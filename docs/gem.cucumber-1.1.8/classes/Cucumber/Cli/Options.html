<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Cucumber::Cli::Options</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Cucumber::Cli::Options 
            
                <span class="parent">&lt; 
                    
                    <a href="../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/cucumber/cli/options_rb.html">lib/cucumber/cli/options.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000145">[]</a>,</li>
                
                <li><a href="#M000146">[]=</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000159">custom_profiles</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000174">default_options</a>,</li>
                
                <li><a href="#M000168">default_profile_should_be_used?</a>,</li>
                
                <li><a href="#M000165">disable_profile_loading?</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000147">expanded_args_without_drb</a>,</li>
                
                <li><a href="#M000163">extract_environment_variables</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000160">filters</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000171">list_keywords_and_exit</a>,</li>
                
                <li><a href="#M000172">list_languages_and_exit</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000166">merge_profiles</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000144">new</a>,</li>
                
                <li><a href="#M000161">non_stdout_formats</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000143">parse</a>,</li>
                
                <li><a href="#M000148">parse!</a>,</li>
                
                <li><a href="#M000173">print_profile_information</a>,</li>
                
                <li><a href="#M000169">profile_loader</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000170">reverse_merge</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000162">stdout_formats</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">INDENT</td>
            <td>=</td>
            <td class="attr-value">' ' * 53</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">BUILTIN_FORMATS</td>
            <td>=</td>
            <td class="attr-value">{         'html'        =&gt; ['Cucumber::Formatter::Html',        'Generates a nice looking HTML report.'],         'pretty'      =&gt; ['Cucumber::Formatter::Pretty',      'Prints the feature as is - in colours.'],         'pdf'         =&gt; ['Cucumber::Formatter::Pdf',         &quot;Generates a PDF report. You need to have the\n&quot; +                                                               &quot;#{INDENT}prawn gem installed. Will pick up logo from\n&quot; +                                                               &quot;#{INDENT}features/support/logo.png or\n&quot; +                                                               &quot;#{INDENT}features/support/logo.jpg if present.&quot;],         'progress'    =&gt; ['Cucumber::Formatter::Progress',    'Prints one character per scenario.'],         'rerun'       =&gt; ['Cucumber::Formatter::Rerun',       'Prints failing files with line numbers.'],         'usage'       =&gt; ['Cucumber::Formatter::Usage',       &quot;Prints where step definitions are used.\n&quot; +                                                               &quot;#{INDENT}The slowest step definitions (with duration) are\n&quot; +                                                               &quot;#{INDENT}listed first. If --dry-run is used the duration\n&quot; +                                                               &quot;#{INDENT}is not shown, and step definitions are sorted by\n&quot; +                                                               &quot;#{INDENT}filename instead.&quot;],         'stepdefs'    =&gt; ['Cucumber::Formatter::Stepdefs',    &quot;Prints All step definitions with their locations. Same as\n&quot; +                                                               &quot;#{INDENT}the usage formatter, except that steps are not printed.&quot;],         'junit'       =&gt; ['Cucumber::Formatter::Junit',       'Generates a report similar to Ant+JUnit.'],         'json'        =&gt; ['Cucumber::Formatter::Json',        'Prints the feature as JSON'],         'json_pretty' =&gt; ['Cucumber::Formatter::JsonPretty',  'Prints the feature as prettified JSON'],         'debug'       =&gt; ['Cucumber::Formatter::Debug',       'For developing formatters - prints the calls made to the listeners.']       }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">FORMAT_HELP</td>
            <td>=</td>
            <td class="attr-value">(BUILTIN_FORMATS.keys.sort.map do |key|         &quot;  #{key}#{' ' * (max - key.length)} : #{BUILTIN_FORMATS[key][1]}&quot;       end) + [&quot;Use --format rerun --out features.txt to write out failing&quot;,         &quot;features. You can rerun them with cucumber @rerun.txt.&quot;,         &quot;FORMAT can also be the fully qualified class name of&quot;,         &quot;your own custom formatter. If the class isn't loaded,&quot;,         &quot;Cucumber will attempt to require a file with a relative&quot;,         &quot;file name that is the underscore name of the class name.&quot;,         &quot;Example: --format Foo::BarZap -&gt; Cucumber will look for&quot;,         &quot;foo/bar_zap.rb. You can place the file with this relative&quot;,         &quot;path underneath your features/support directory or anywhere&quot;,         &quot;on Ruby's LOAD_PATH, for example in a Ruby gem.&quot;       ]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">DRB_FLAG</td>
            <td>=</td>
            <td class="attr-value">'--drb'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PROFILE_SHORT_FLAG</td>
            <td>=</td>
            <td class="attr-value">'-p'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NO_PROFILE_SHORT_FLAG</td>
            <td>=</td>
            <td class="attr-value">'-P'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PROFILE_LONG_FLAG</td>
            <td>=</td>
            <td class="attr-value">'--profile'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NO_PROFILE_LONG_FLAG</td>
            <td>=</td>
            <td class="attr-value">'--no-profile'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">OPTIONS_WITH_ARGS</td>
            <td>=</td>
            <td class="attr-value">['-r', '--require', '--i18n', '-f', '--format', '-o', '--out',                                   '-t', '--tags', '-n', '--name', '-e', '--exclude',                                   PROFILE_SHORT_FLAG, PROFILE_LONG_FLAG,                                   '-a', '--autoformat', '-l', '--lines', '--port']</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>options</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>profiles</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>expanded_args</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000144">
                    
                    <a name="M000144"></a><b>new</b>(out_stream = STDOUT, error_stream = STDERR, options = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000144_source')" id="l_M000144_source">show</a>
                        
                    </p>
                    <div id="M000144_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 58</span>
58:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">out_stream</span> = <span class="ruby-constant">STDOUT</span>, <span class="ruby-identifier">error_stream</span> = <span class="ruby-constant">STDERR</span>, <span class="ruby-identifier">options</span> = {})
59:         <span class="ruby-ivar">@out_stream</span>   = <span class="ruby-identifier">out_stream</span>
60:         <span class="ruby-ivar">@error_stream</span> = <span class="ruby-identifier">error_stream</span>
61: 
62:         <span class="ruby-ivar">@default_profile</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default_profile</span>]
63:         <span class="ruby-ivar">@skip_profile_information</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:skip_profile_information</span>]
64:         <span class="ruby-ivar">@profiles</span> = []
65:         <span class="ruby-ivar">@overridden_paths</span> = []
66:         <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">default_options</span>
67:         
68:         <span class="ruby-ivar">@quiet</span> = <span class="ruby-ivar">@disable_profile_loading</span> = <span class="ruby-keyword kw">nil</span>
69:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000143">
                    
                    <a name="M000143"></a><b>parse</b>(args, out_stream, error_stream, options = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000143_source')" id="l_M000143_source">show</a>
                        
                    </p>
                    <div id="M000143_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 54</span>
54:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">args</span>, <span class="ruby-identifier">out_stream</span>, <span class="ruby-identifier">error_stream</span>, <span class="ruby-identifier">options</span> = {})
55:         <span class="ruby-identifier">new</span>(<span class="ruby-identifier">out_stream</span>, <span class="ruby-identifier">error_stream</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">parse!</span>(<span class="ruby-identifier">args</span>)
56:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000145">
                    
                    <a name="M000145"></a><b>[]</b>(key)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000145_source')" id="l_M000145_source">show</a>
                        
                    </p>
                    <div id="M000145_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 71</span>
71:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)
72:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">key</span>]
73:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000146">
                    
                    <a name="M000146"></a><b>[]=</b>(key, value)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show</a>
                        
                    </p>
                    <div id="M000146_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 75</span>
75:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
76:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
77:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000159">
                    
                    <a name="M000159"></a><b>custom_profiles</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show</a>
                        
                    </p>
                    <div id="M000159_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 304</span>
304:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">custom_profiles</span>
305:         <span class="ruby-ivar">@profiles</span> <span class="ruby-operator">-</span> [<span class="ruby-ivar">@default_profile</span>]
306:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000147">
                    
                    <a name="M000147"></a><b>expanded_args_without_drb</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000147_source')" id="l_M000147_source">show</a>
                        
                    </p>
                    <div id="M000147_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 79</span>
 79:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expanded_args_without_drb</span>
 80:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@expanded_args_without_drb</span>  <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@expanded_args_without_drb</span>
 81:         <span class="ruby-ivar">@expanded_args_without_drb</span> = (
 82:           <span class="ruby-identifier">previous_flag_was_profile</span> = <span class="ruby-keyword kw">false</span>
 83:           <span class="ruby-identifier">previous_flag_requires_arg</span> = <span class="ruby-keyword kw">false</span>
 84: 
 85:           <span class="ruby-ivar">@expanded_args</span>.<span class="ruby-identifier">reject</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
 86:             <span class="ruby-comment cmt"># ignore profiles</span>
 87:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">previous_flag_was_profile</span>
 88:               <span class="ruby-identifier">previous_flag_was_profile</span> = <span class="ruby-keyword kw">false</span>
 89:               <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">true</span>
 90:             <span class="ruby-keyword kw">end</span>
 91:             <span class="ruby-keyword kw">if</span> [<span class="ruby-constant">PROFILE_SHORT_FLAG</span>, <span class="ruby-constant">PROFILE_LONG_FLAG</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">arg</span>)
 92:               <span class="ruby-identifier">previous_flag_was_profile</span> = <span class="ruby-keyword kw">true</span>
 93:               <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">true</span>
 94:             <span class="ruby-keyword kw">end</span>
 95: 
 96:             <span class="ruby-comment cmt"># accept all options which requires arguments</span>
 97:             <span class="ruby-comment cmt"># and don't try to look @overridden_paths in it's arguments!</span>
 98:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">previous_flag_requires_arg</span>
 99:               <span class="ruby-identifier">previous_flag_requires_arg</span> = <span class="ruby-keyword kw">false</span>
100:               <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
101:             <span class="ruby-keyword kw">end</span>
102:             <span class="ruby-keyword kw">if</span> <span class="ruby-constant">OPTIONS_WITH_ARGS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">arg</span>)
103:               <span class="ruby-identifier">previous_flag_requires_arg</span> = <span class="ruby-keyword kw">true</span>
104:               <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">false</span>
105:             <span class="ruby-keyword kw">end</span>
106: 
107:             <span class="ruby-comment cmt"># ignore --drb flag and overridden features paths</span>
108:             <span class="ruby-identifier">arg</span> <span class="ruby-operator">==</span> <span class="ruby-constant">DRB_FLAG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@overridden_paths</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">arg</span>)
109:           <span class="ruby-keyword kw">end</span>
110:         )
111: 
112:         <span class="ruby-ivar">@expanded_args_without_drb</span>.<span class="ruby-identifier">push</span>(<span class="ruby-value str">&quot;--no-profile&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@expanded_args_without_drb</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">NO_PROFILE_LONG_FLAG</span>) <span class="ruby-operator">||</span> <span class="ruby-ivar">@expanded_args_without_drb</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">NO_PROFILE_SHORT_FLAG</span>)
113:         <span class="ruby-ivar">@expanded_args_without_drb</span>
114:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000160">
                    
                    <a name="M000160"></a><b>filters</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show</a>
                        
                    </p>
                    <div id="M000160_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 308</span>
308:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">filters</span>
309:         <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">values_at</span>(<span class="ruby-identifier">:name_regexps</span>, <span class="ruby-identifier">:tag_expressions</span>).<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">v</span>.<span class="ruby-identifier">empty?</span>}.<span class="ruby-identifier">first</span> <span class="ruby-operator">||</span> []
310:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000148">
                    
                    <a name="M000148"></a><b>parse!</b>(args)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show</a>
                        
                    </p>
                    <div id="M000148_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 116</span>
116:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse!</span>(<span class="ruby-identifier">args</span>)
117:         <span class="ruby-ivar">@args</span> = <span class="ruby-identifier">args</span>
118:         <span class="ruby-ivar">@expanded_args</span> = <span class="ruby-ivar">@args</span>.<span class="ruby-identifier">dup</span>
119: 
120:         <span class="ruby-ivar">@args</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-operator">::</span><span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">Arguable</span>)
121: 
122:         <span class="ruby-ivar">@args</span>.<span class="ruby-identifier">options</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">opts</span><span class="ruby-operator">|</span>
123:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">banner</span> = [<span class="ruby-value str">&quot;Usage: cucumber [options] [ [FILE|DIR|URL][:LINE[:LINE]*] ]+&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>,
124:             <span class="ruby-value str">&quot;Examples:&quot;</span>,
125:             <span class="ruby-value str">&quot;cucumber examples/i18n/en/features&quot;</span>,
126:             <span class="ruby-value str">&quot;cucumber @rerun.txt (See --format rerun)&quot;</span>,
127:             <span class="ruby-value str">&quot;cucumber examples/i18n/it/features/somma.feature:6:98:113&quot;</span>,
128:             <span class="ruby-value str">&quot;cucumber -s -i http://rubyurl.com/eeCl&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>,
129:           ].<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
130:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-r LIBRARY|DIR&quot;</span>, <span class="ruby-value str">&quot;--require LIBRARY|DIR&quot;</span>,
131:             <span class="ruby-value str">&quot;Require files before executing the features. If this&quot;</span>,
132:             <span class="ruby-value str">&quot;option is not specified, all *.rb files that are&quot;</span>,
133:             <span class="ruby-value str">&quot;siblings or below the features will be loaded auto-&quot;</span>,
134:             <span class="ruby-value str">&quot;matically. Automatic loading is disabled when this&quot;</span>,
135:             <span class="ruby-value str">&quot;option is specified, and all loading becomes explicit.&quot;</span>,
136:             <span class="ruby-value str">&quot;Files under directories named \&quot;support\&quot; are always&quot;</span>,
137:             <span class="ruby-value str">&quot;loaded first.&quot;</span>,
138:             <span class="ruby-value str">&quot;This option can be specified multiple times.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
139:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:require</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>
140:             <span class="ruby-keyword kw">if</span>(<span class="ruby-constant">Cucumber</span><span class="ruby-operator">::</span><span class="ruby-constant">JRUBY</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">v</span>))
141:               <span class="ruby-identifier">require</span> <span class="ruby-value str">'java'</span>
142:               <span class="ruby-identifier">$CLASSPATH</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>
143:             <span class="ruby-keyword kw">end</span>
144:           <span class="ruby-keyword kw">end</span>
145: 
146:           <span class="ruby-keyword kw">if</span>(<span class="ruby-constant">Cucumber</span><span class="ruby-operator">::</span><span class="ruby-constant">JRUBY</span>)
147:             <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-j DIR&quot;</span>, <span class="ruby-value str">&quot;--jars DIR&quot;</span>,
148:             <span class="ruby-value str">&quot;Load all the jars under DIR&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">jars</span><span class="ruby-operator">|</span>
149:               <span class="ruby-constant">Dir</span>[<span class="ruby-node">&quot;#{jars}/**/*.jar&quot;</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">jar</span><span class="ruby-operator">|</span> <span class="ruby-identifier">require</span> <span class="ruby-identifier">jar</span>}
150:             <span class="ruby-keyword kw">end</span>
151:           <span class="ruby-keyword kw">end</span>
152: 
153:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--i18n LANG&quot;</span>,
154:             <span class="ruby-value str">&quot;List keywords for in a particular language&quot;</span>,
155:             <span class="ruby-value str">%{Run with &quot;--i18n help&quot; to see all languages}</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">lang</span><span class="ruby-operator">|</span>
156:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lang</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'help'</span>
157:               <span class="ruby-identifier">list_languages_and_exit</span>
158:             <span class="ruby-keyword kw">else</span>
159:               <span class="ruby-identifier">list_keywords_and_exit</span>(<span class="ruby-identifier">lang</span>)
160:             <span class="ruby-keyword kw">end</span>
161:           <span class="ruby-keyword kw">end</span>
162:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-f FORMAT&quot;</span>, <span class="ruby-value str">&quot;--format FORMAT&quot;</span>,
163:             <span class="ruby-value str">&quot;How to format features (Default: pretty). Available formats:&quot;</span>,
164:             <span class="ruby-operator">*</span><span class="ruby-constant">FORMAT_HELP</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
165:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>] <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">v</span>, <span class="ruby-ivar">@out_stream</span>]
166:           <span class="ruby-keyword kw">end</span>
167:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-o&quot;</span>, <span class="ruby-value str">&quot;--out [FILE|DIR]&quot;</span>,
168:             <span class="ruby-value str">&quot;Write output to a file/directory instead of STDOUT. This option&quot;</span>,
169:             <span class="ruby-value str">&quot;applies to the previously specified --format, or the&quot;</span>,
170:             <span class="ruby-value str">&quot;default format if no format is specified. Check the specific&quot;</span>,
171:             <span class="ruby-value str">&quot;formatter's docs to see whether to pass a file or a dir.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
172:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>] <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-value str">'pretty'</span>, <span class="ruby-keyword kw">nil</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>].<span class="ruby-identifier">empty?</span>
173:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>][<span class="ruby-value">-1</span>][<span class="ruby-value">1</span>] = <span class="ruby-identifier">v</span>
174:           <span class="ruby-keyword kw">end</span>
175:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-t TAG_EXPRESSION&quot;</span>, <span class="ruby-value str">&quot;--tags TAG_EXPRESSION&quot;</span>,
176:             <span class="ruby-value str">&quot;Only execute the features or scenarios with tags matching TAG_EXPRESSION.&quot;</span>,
177:             <span class="ruby-value str">&quot;Scenarios inherit tags declared on the Feature level. The simplest&quot;</span>,
178:             <span class="ruby-value str">&quot;TAG_EXPRESSION is simply a tag. Example: --tags @dev. When a tag in a tag&quot;</span>,
179:             <span class="ruby-value str">&quot;expression starts with a ~, this represents boolean NOT. Example: --tags ~@dev.&quot;</span>,
180:             <span class="ruby-value str">&quot;A tag expression can have several tags separated by a comma, which represents&quot;</span>,
181:             <span class="ruby-value str">&quot;logical OR. Example: --tags @dev,@wip. The --tags option can be specified&quot;</span>,
182:             <span class="ruby-value str">&quot;several times, and this represents logical AND. Example: --tags @foo,~@bar --tags @zap.&quot;</span>,
183:             <span class="ruby-value str">&quot;This represents the boolean expression (@foo || !@bar) &amp;&amp; @zap.&quot;</span>,
184:             <span class="ruby-value str">&quot;\n&quot;</span>,
185:             <span class="ruby-value str">&quot;Beware that if you want to use several negative tags to exclude several tags&quot;</span>,
186:             <span class="ruby-value str">&quot;you have to use logical AND: --tags ~@fixme --tags ~@buggy.&quot;</span>,
187:             <span class="ruby-value str">&quot;\n&quot;</span>,
188:             <span class="ruby-value str">&quot;Positive tags can be given a threshold to limit the number of occurrences.&quot;</span>, 
189:             <span class="ruby-value str">&quot;Example: --tags @qa:3 will fail if there are more than 3 occurrences of the @qa tag.&quot;</span>,
190:             <span class="ruby-value str">&quot;This can be practical if you are practicing Kanban or CONWIP.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
191:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:tag_expressions</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>
192:           <span class="ruby-keyword kw">end</span>
193:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-n NAME&quot;</span>, <span class="ruby-value str">&quot;--name NAME&quot;</span>,
194:             <span class="ruby-value str">&quot;Only execute the feature elements which match part of the given name.&quot;</span>,
195:             <span class="ruby-value str">&quot;If this option is given more than once, it will match against all the&quot;</span>,
196:             <span class="ruby-value str">&quot;given names.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
197:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:name_regexps</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">/#{v}/</span>
198:           <span class="ruby-keyword kw">end</span>
199:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-e&quot;</span>, <span class="ruby-value str">&quot;--exclude PATTERN&quot;</span>, <span class="ruby-value str">&quot;Don't run feature files or require ruby files matching PATTERN&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
200:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:excludes</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">v</span>)
201:           <span class="ruby-keyword kw">end</span>
202:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-constant">PROFILE_SHORT_FLAG</span>, <span class="ruby-node">&quot;#{PROFILE_LONG_FLAG} PROFILE&quot;</span>,
203:               <span class="ruby-value str">&quot;Pull commandline arguments from cucumber.yml which can be defined as&quot;</span>,
204:               <span class="ruby-value str">&quot;strings or arrays.  When a 'default' profile is defined and no profile&quot;</span>,
205:               <span class="ruby-value str">&quot;is specified it is always used. (Unless disabled, see -P below.)&quot;</span>,
206:               <span class="ruby-value str">&quot;When feature files are defined in a profile and on the command line&quot;</span>,
207:               <span class="ruby-value str">&quot;then only the ones from the command line are used.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
208:             <span class="ruby-ivar">@profiles</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>
209:           <span class="ruby-keyword kw">end</span>
210:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-constant">NO_PROFILE_SHORT_FLAG</span>, <span class="ruby-constant">NO_PROFILE_LONG_FLAG</span>,
211:             <span class="ruby-value str">&quot;Disables all profile loading to avoid using the 'default' profile.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
212:             <span class="ruby-ivar">@disable_profile_loading</span> = <span class="ruby-keyword kw">true</span>
213:           <span class="ruby-keyword kw">end</span>
214:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-c&quot;</span>, <span class="ruby-value str">&quot;--[no-]color&quot;</span>,
215:             <span class="ruby-value str">&quot;Whether or not to use ANSI color in the output. Cucumber decides&quot;</span>,
216:             <span class="ruby-value str">&quot;based on your platform and the output destination if not specified.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
217:             <span class="ruby-constant">Term</span><span class="ruby-operator">::</span><span class="ruby-constant">ANSIColor</span>.<span class="ruby-identifier">coloring</span> = <span class="ruby-identifier">v</span>
218:           <span class="ruby-keyword kw">end</span>
219:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-d&quot;</span>, <span class="ruby-value str">&quot;--dry-run&quot;</span>, <span class="ruby-value str">&quot;Invokes formatters without executing the steps.&quot;</span>,
220:             <span class="ruby-value str">&quot;This also omits the loading of your support/env.rb file if it exists.&quot;</span>) <span class="ruby-keyword kw">do</span>
221:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:dry_run</span>] = <span class="ruby-keyword kw">true</span>
222:           <span class="ruby-keyword kw">end</span>
223:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-a&quot;</span>, <span class="ruby-value str">&quot;--autoformat DIR&quot;</span>,
224:             <span class="ruby-value str">&quot;Reformats (pretty prints) feature files and write them to DIRECTORY.&quot;</span>,
225:             <span class="ruby-value str">&quot;Be careful if you choose to overwrite the originals.&quot;</span>,
226:             <span class="ruby-value str">&quot;Implies --dry-run --format pretty.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directory</span><span class="ruby-operator">|</span>
227:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:autoformat</span>] = <span class="ruby-identifier">directory</span>
228:             <span class="ruby-constant">Term</span><span class="ruby-operator">::</span><span class="ruby-constant">ANSIColor</span>.<span class="ruby-identifier">coloring</span> = <span class="ruby-keyword kw">false</span>
229:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:dry_run</span>] = <span class="ruby-keyword kw">true</span>
230:             <span class="ruby-ivar">@quiet</span> = <span class="ruby-keyword kw">true</span>
231:           <span class="ruby-keyword kw">end</span>
232: 
233:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-m&quot;</span>, <span class="ruby-value str">&quot;--no-multiline&quot;</span>,
234:             <span class="ruby-value str">&quot;Don't print multiline strings and tables under steps.&quot;</span>) <span class="ruby-keyword kw">do</span>
235:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:no_multiline</span>] = <span class="ruby-keyword kw">true</span>
236:           <span class="ruby-keyword kw">end</span>
237:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-s&quot;</span>, <span class="ruby-value str">&quot;--no-source&quot;</span>,
238:             <span class="ruby-value str">&quot;Don't print the file and line of the step definition with the steps.&quot;</span>) <span class="ruby-keyword kw">do</span>
239:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:source</span>] = <span class="ruby-keyword kw">false</span>
240:           <span class="ruby-keyword kw">end</span>
241:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-i&quot;</span>, <span class="ruby-value str">&quot;--no-snippets&quot;</span>, <span class="ruby-value str">&quot;Don't print snippets for pending steps.&quot;</span>) <span class="ruby-keyword kw">do</span>
242:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:snippets</span>] = <span class="ruby-keyword kw">false</span>
243:           <span class="ruby-keyword kw">end</span>
244:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-q&quot;</span>, <span class="ruby-value str">&quot;--quiet&quot;</span>, <span class="ruby-value str">&quot;Alias for --no-snippets --no-source.&quot;</span>) <span class="ruby-keyword kw">do</span>
245:             <span class="ruby-ivar">@quiet</span> = <span class="ruby-keyword kw">true</span>
246:           <span class="ruby-keyword kw">end</span>
247:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-b&quot;</span>, <span class="ruby-value str">&quot;--backtrace&quot;</span>, <span class="ruby-value str">&quot;Show full backtrace for all errors.&quot;</span>) <span class="ruby-keyword kw">do</span>
248:             <span class="ruby-constant">Cucumber</span>.<span class="ruby-identifier">use_full_backtrace</span> = <span class="ruby-keyword kw">true</span>
249:           <span class="ruby-keyword kw">end</span>
250:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-S&quot;</span>, <span class="ruby-value str">&quot;--strict&quot;</span>, <span class="ruby-value str">&quot;Fail if there are any undefined or pending steps.&quot;</span>) <span class="ruby-keyword kw">do</span>
251:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:strict</span>] = <span class="ruby-keyword kw">true</span>
252:           <span class="ruby-keyword kw">end</span>
253:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-w&quot;</span>, <span class="ruby-value str">&quot;--wip&quot;</span>, <span class="ruby-value str">&quot;Fail if there are any passing scenarios.&quot;</span>) <span class="ruby-keyword kw">do</span>
254:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:wip</span>] = <span class="ruby-keyword kw">true</span>
255:           <span class="ruby-keyword kw">end</span>
256:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-v&quot;</span>, <span class="ruby-value str">&quot;--verbose&quot;</span>, <span class="ruby-value str">&quot;Show the files and features loaded.&quot;</span>) <span class="ruby-keyword kw">do</span>
257:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:verbose</span>] = <span class="ruby-keyword kw">true</span>
258:           <span class="ruby-keyword kw">end</span>
259:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-g&quot;</span>, <span class="ruby-value str">&quot;--guess&quot;</span>, <span class="ruby-value str">&quot;Guess best match for Ambiguous steps.&quot;</span>) <span class="ruby-keyword kw">do</span>
260:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:guess</span>] = <span class="ruby-keyword kw">true</span>
261:           <span class="ruby-keyword kw">end</span>
262:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-l&quot;</span>, <span class="ruby-value str">&quot;--lines LINES&quot;</span>, <span class="ruby-value str">&quot;Run given line numbers. Equivalent to FILE:LINE syntax&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">lines</span><span class="ruby-operator">|</span>
263:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:lines</span>] = <span class="ruby-identifier">lines</span>
264:           <span class="ruby-keyword kw">end</span>
265:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-x&quot;</span>, <span class="ruby-value str">&quot;--expand&quot;</span>, <span class="ruby-value str">&quot;Expand Scenario Outline Tables in output.&quot;</span>) <span class="ruby-keyword kw">do</span>
266:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:expand</span>] = <span class="ruby-keyword kw">true</span>
267:           <span class="ruby-keyword kw">end</span>
268:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-constant">DRB_FLAG</span>, <span class="ruby-value str">&quot;Run features against a DRb server. (i.e. with the spork gem)&quot;</span>) <span class="ruby-keyword kw">do</span>
269:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:drb</span>] = <span class="ruby-keyword kw">true</span>
270:           <span class="ruby-keyword kw">end</span>
271:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--port PORT&quot;</span>, <span class="ruby-value str">&quot;Specify DRb port.  Ignored without --drb&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">port</span><span class="ruby-operator">|</span>
272:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:drb_port</span>] = <span class="ruby-identifier">port</span>
273:           <span class="ruby-keyword kw">end</span>
274:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--dotcucumber DIR&quot;</span>, <span class="ruby-value str">&quot;Write metadata to DIR&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
275:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:dotcucumber</span>] = <span class="ruby-identifier">dir</span>
276:           <span class="ruby-keyword kw">end</span>
277:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on_tail</span>(<span class="ruby-value str">&quot;--version&quot;</span>, <span class="ruby-value str">&quot;Show version.&quot;</span>) <span class="ruby-keyword kw">do</span>
278:             <span class="ruby-ivar">@out_stream</span>.<span class="ruby-identifier">puts</span> <span class="ruby-constant">Cucumber</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>
279:             <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">exit</span>(<span class="ruby-value">0</span>)
280:           <span class="ruby-keyword kw">end</span>
281:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on_tail</span>(<span class="ruby-value str">&quot;-h&quot;</span>, <span class="ruby-value str">&quot;--help&quot;</span>, <span class="ruby-value str">&quot;You're looking at it.&quot;</span>) <span class="ruby-keyword kw">do</span>
282:             <span class="ruby-ivar">@out_stream</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">help</span>
283:             <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">exit</span>(<span class="ruby-value">0</span>)
284:           <span class="ruby-keyword kw">end</span>
285:         <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">parse!</span>
286: 
287:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@quiet</span>
288:           <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:snippets</span>] = <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:source</span>] = <span class="ruby-keyword kw">false</span>
289:         <span class="ruby-keyword kw">else</span>
290:           <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:snippets</span>] = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:snippets</span>].<span class="ruby-identifier">nil?</span>
291:           <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:source</span>]   = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:source</span>].<span class="ruby-identifier">nil?</span>
292:         <span class="ruby-keyword kw">end</span>
293:         <span class="ruby-ivar">@args</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{a}:#{@options[:lines]}&quot;</span> } <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:lines</span>]
294: 
295:         <span class="ruby-identifier">extract_environment_variables</span>
296:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:paths</span>] = <span class="ruby-ivar">@args</span>.<span class="ruby-identifier">dup</span> <span class="ruby-comment cmt">#whatver is left over</span>
297: 
298:         <span class="ruby-identifier">merge_profiles</span>
299:         <span class="ruby-identifier">print_profile_information</span>
300: 
301:         <span class="ruby-keyword kw">self</span>
302:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000174">
                    
                    <a name="M000174"></a><b>default_options</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000174_source')" id="l_M000174_source">show</a>
                        
                    </p>
                    <div id="M000174_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 416</span>
416:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_options</span>
417:         {
418:           <span class="ruby-identifier">:strict</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
419:           <span class="ruby-identifier">:require</span>      =<span class="ruby-operator">&gt;</span> [],
420:           <span class="ruby-identifier">:dry_run</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
421:           <span class="ruby-identifier">:formats</span>      =<span class="ruby-operator">&gt;</span> [],
422:           <span class="ruby-identifier">:excludes</span>     =<span class="ruby-operator">&gt;</span> [],
423:           <span class="ruby-identifier">:tag_expressions</span>  =<span class="ruby-operator">&gt;</span> [],
424:           <span class="ruby-identifier">:name_regexps</span> =<span class="ruby-operator">&gt;</span> [],
425:           <span class="ruby-identifier">:env_vars</span>     =<span class="ruby-operator">&gt;</span> {},
426:           <span class="ruby-identifier">:diff_enabled</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
427:         }
428:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000168">
                    
                    <a name="M000168"></a><b>default_profile_should_be_used?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000168_source')" id="l_M000168_source">show</a>
                        
                    </p>
                    <div id="M000168_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 356</span>
356:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_profile_should_be_used?</span>
357:         <span class="ruby-ivar">@profiles</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
358:           <span class="ruby-identifier">profile_loader</span>.<span class="ruby-identifier">cucumber_yml_defined?</span> <span class="ruby-operator">&amp;&amp;</span>
359:           <span class="ruby-identifier">profile_loader</span>.<span class="ruby-identifier">has_profile?</span>(<span class="ruby-ivar">@default_profile</span>)
360:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000165">
                    
                    <a name="M000165"></a><b>disable_profile_loading?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show</a>
                        
                    </p>
                    <div id="M000165_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 336</span>
336:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disable_profile_loading?</span>
337:         <span class="ruby-ivar">@disable_profile_loading</span>
338:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000163">
                    
                    <a name="M000163"></a><b>extract_environment_variables</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000163_source')" id="l_M000163_source">show</a>
                        
                    </p>
                    <div id="M000163_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 327</span>
327:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_environment_variables</span>
328:         <span class="ruby-ivar">@args</span>.<span class="ruby-identifier">delete_if</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
329:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^(\w+)=(.*)$/</span>
330:             <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:env_vars</span>][<span class="ruby-identifier">$1</span>] = <span class="ruby-identifier">$2</span>
331:             <span class="ruby-keyword kw">true</span>
332:           <span class="ruby-keyword kw">end</span>
333:         <span class="ruby-keyword kw">end</span>
334:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000171">
                    
                    <a name="M000171"></a><b>list_keywords_and_exit</b>(lang)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000171_source')" id="l_M000171_source">show</a>
                        
                    </p>
                    <div id="M000171_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 395</span>
395:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_keywords_and_exit</span>(<span class="ruby-identifier">lang</span>)
396:         <span class="ruby-identifier">require</span> <span class="ruby-value str">'gherkin/i18n'</span>
397:         <span class="ruby-ivar">@out_stream</span>.<span class="ruby-identifier">write</span>(<span class="ruby-constant">Gherkin</span><span class="ruby-operator">::</span><span class="ruby-constant">I18n</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">lang</span>).<span class="ruby-identifier">keyword_table</span>)
398:         <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">exit</span>(<span class="ruby-value">0</span>)
399:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000172">
                    
                    <a name="M000172"></a><b>list_languages_and_exit</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000172_source')" id="l_M000172_source">show</a>
                        
                    </p>
                    <div id="M000172_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 401</span>
401:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_languages_and_exit</span>
402:         <span class="ruby-identifier">require</span> <span class="ruby-value str">'gherkin/i18n'</span>
403:         <span class="ruby-ivar">@out_stream</span>.<span class="ruby-identifier">write</span>(<span class="ruby-constant">Gherkin</span><span class="ruby-operator">::</span><span class="ruby-constant">I18n</span>.<span class="ruby-identifier">language_table</span>)
404:         <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">exit</span>(<span class="ruby-value">0</span>)
405:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000166">
                    
                    <a name="M000166"></a><b>merge_profiles</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000166_source')" id="l_M000166_source">show</a>
                        
                    </p>
                    <div id="M000166_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 340</span>
340:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge_profiles</span>
341:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@disable_profile_loading</span>
342:           <span class="ruby-ivar">@out_stream</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Disabling profiles...&quot;</span>
343:           <span class="ruby-keyword kw">return</span>
344:         <span class="ruby-keyword kw">end</span>
345: 
346:         <span class="ruby-ivar">@profiles</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@default_profile</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">default_profile_should_be_used?</span>
347: 
348:         <span class="ruby-ivar">@profiles</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">profile</span><span class="ruby-operator">|</span>
349:           <span class="ruby-identifier">profile_args</span> = <span class="ruby-identifier">profile_loader</span>.<span class="ruby-identifier">args_from</span>(<span class="ruby-identifier">profile</span>)
350:           <span class="ruby-identifier">reverse_merge</span>(
351:             <span class="ruby-constant">Options</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">profile_args</span>, <span class="ruby-ivar">@out_stream</span>, <span class="ruby-ivar">@error_stream</span>, <span class="ruby-identifier">:skip_profile_information</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
352:           )
353:         <span class="ruby-keyword kw">end</span>
354:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000161">
                    
                    <a name="M000161"></a><b>non_stdout_formats</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show</a>
                        
                    </p>
                    <div id="M000161_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 319</span>
319:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">non_stdout_formats</span>
320:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>].<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">format</span>, <span class="ruby-identifier">output</span><span class="ruby-operator">|</span> <span class="ruby-identifier">output</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@out_stream</span> }
321:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000173">
                    
                    <a name="M000173"></a><b>print_profile_information</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000173_source')" id="l_M000173_source">show</a>
                        
                    </p>
                    <div id="M000173_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 407</span>
407:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">print_profile_information</span>
408:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@skip_profile_information</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@profiles</span>.<span class="ruby-identifier">empty?</span>
409:         <span class="ruby-identifier">profiles_sentence</span> = <span class="ruby-value str">''</span>
410:         <span class="ruby-identifier">profiles_sentence</span> = <span class="ruby-ivar">@profiles</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@profiles</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span>
411:           <span class="ruby-node">&quot;#{@profiles[0...-1].join(', ')} and #{@profiles.last}&quot;</span>
412: 
413:         <span class="ruby-ivar">@out_stream</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Using the #{profiles_sentence} profile#{'s' if @profiles.size&gt; 1}...&quot;</span>
414:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000169">
                    
                    <a name="M000169"></a><b>profile_loader</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000169_source')" id="l_M000169_source">show</a>
                        
                    </p>
                    <div id="M000169_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 362</span>
362:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">profile_loader</span>
363:         <span class="ruby-ivar">@profile_loader</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ProfileLoader</span>.<span class="ruby-identifier">new</span>
364:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000170">
                    
                    <a name="M000170"></a><b>reverse_merge</b>(other_options)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show</a>
                        
                    </p>
                    <div id="M000170_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 366</span>
366:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reverse_merge</span>(<span class="ruby-identifier">other_options</span>)
367:         <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">other_options</span>.<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-ivar">@options</span>)
368:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:require</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:require</span>]
369:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:excludes</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:excludes</span>]
370:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:name_regexps</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:name_regexps</span>]
371:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:tag_expressions</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:tag_expressions</span>]
372:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:env_vars</span>] = <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:env_vars</span>].<span class="ruby-identifier">merge</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:env_vars</span>])
373:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:paths</span>].<span class="ruby-identifier">empty?</span>
374:           <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:paths</span>] = <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:paths</span>]
375:         <span class="ruby-keyword kw">else</span>
376:           <span class="ruby-ivar">@overridden_paths</span> <span class="ruby-operator">+=</span> (<span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:paths</span>] <span class="ruby-operator">-</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:paths</span>])
377:         <span class="ruby-keyword kw">end</span>
378:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:source</span>] <span class="ruby-operator">&amp;=</span> <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:source</span>]
379:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:snippets</span>] <span class="ruby-operator">&amp;=</span> <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:snippets</span>]
380:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:strict</span>] <span class="ruby-operator">|=</span> <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:strict</span>]
381: 
382:         <span class="ruby-ivar">@profiles</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">other_options</span>.<span class="ruby-identifier">profiles</span>
383:         <span class="ruby-ivar">@expanded_args</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">other_options</span>.<span class="ruby-identifier">expanded_args</span>
384: 
385:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>].<span class="ruby-identifier">empty?</span>
386:           <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>] = <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:formats</span>]
387:         <span class="ruby-keyword kw">else</span>
388:           <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">other_options</span>[<span class="ruby-identifier">:formats</span>]
389:           <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>] = <span class="ruby-identifier">stdout_formats</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">non_stdout_formats</span>
390:         <span class="ruby-keyword kw">end</span>
391: 
392:         <span class="ruby-keyword kw">self</span>
393:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000162">
                    
                    <a name="M000162"></a><b>stdout_formats</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000162_source')" id="l_M000162_source">show</a>
                        
                    </p>
                    <div id="M000162_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/cucumber/cli/options.rb, line 323</span>
323:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stdout_formats</span>
324:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:formats</span>].<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">format</span>, <span class="ruby-identifier">output</span><span class="ruby-operator">|</span> <span class="ruby-identifier">output</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@out_stream</span> }
325:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    