<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Hash</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Hash 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/array/extract_options_rb.html">activesupport-3.2.1/lib/active_support/core_ext/array/extract_options.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/conversions_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/conversions.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/deep_dup_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/deep_dup.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/deep_merge_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/deep_merge.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/diff_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/diff.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/except_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/except.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/indifferent_access_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/indifferent_access.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/keys_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/reverse_merge_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/reverse_merge.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/hash/slice_rb.html">activesupport-3.2.1/lib/active_support/core_ext/hash/slice.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/object/blank_rb.html">activesupport-3.2.1/lib/active_support/core_ext/object/blank.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/object/to_query_rb.html">activesupport-3.2.1/lib/active_support/core_ext/object/to_query.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/core_ext/object/to_param_rb.html">activesupport-3.2.1/lib/active_support/core_ext/object/to_param.rb</a></li>
            
            <li><a href="../files/activesupport-3_2_1/lib/active_support/json/encoding_rb.html">activesupport-3.2.1/lib/active_support/json/encoding.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M002284">assert_valid_keys</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M002266">deep_dup</a>,</li>
                
                <li><a href="#M002270">deep_merge</a>,</li>
                
                <li><a href="#M002271">deep_merge!</a>,</li>
                
                <li><a href="#M002273">diff</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M002721">encode_json</a>,</li>
                
                <li><a href="#M002274">except</a>,</li>
                
                <li><a href="#M002275">except!</a>,</li>
                
                <li><a href="#M002290">extract!</a>,</li>
                
                <li><a href="#M002149">extractable_options?</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M002268">from_xml</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M002277">nested_under_indifferent_access</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M002285">reverse_merge</a>,</li>
                
                <li><a href="#M002286">reverse_merge!</a>,</li>
                
                <li><a href="#M002287">reverse_update</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M002288">slice</a>,</li>
                
                <li><a href="#M002289">slice!</a>,</li>
                
                <li><a href="#M002278">stringify_keys</a>,</li>
                
                <li><a href="#M002279">stringify_keys!</a>,</li>
                
                <li><a href="#M002280">symbolize_keys</a>,</li>
                
                <li><a href="#M002281">symbolize_keys!</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M002282">to_options</a>,</li>
                
                <li><a href="#M002283">to_options!</a>,</li>
                
                <li><a href="#M002403">to_param</a>,</li>
                
                <li><a href="#M002404">to_query</a>,</li>
                
                <li><a href="#M002267">to_xml</a>,</li>
                
                <li><a href="#M002269">typecast_xml_value</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M002272">unrename_keys</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M002276">with_indifferent_access</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M002268">
                    
                    <a name="M002268"></a><b>from_xml</b>(xml)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002268_source')" id="l_M002268_source">show</a>
                        
                    </p>
                    <div id="M002268_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/conversions.rb, line 89</span>
89:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">xml</span>)
90:       <span class="ruby-identifier">typecast_xml_value</span>(<span class="ruby-identifier">unrename_keys</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">XmlMini</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">xml</span>)))
91:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Private methods</div>
            
            <div class="method">
                <div class="title" id="M002269">
                    
                    <a name="M002269"></a><b>typecast_xml_value</b>(value)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002269_source')" id="l_M002269_source">show</a>
                        
                    </p>
                    <div id="M002269_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/conversions.rb, line 94</span>
 94:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">typecast_xml_value</span>(<span class="ruby-identifier">value</span>)
 95:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>
 96:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'Hash'</span>
 97:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>[<span class="ruby-value str">'type'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'array'</span>
 98:               <span class="ruby-identifier">_</span>, <span class="ruby-identifier">entries</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) })
 99:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">entries</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">c</span> = <span class="ruby-identifier">value</span>[<span class="ruby-value str">'__content__'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">blank?</span>)
100:                 []
101:               <span class="ruby-keyword kw">else</span>
102:                 <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">entries</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>   <span class="ruby-comment cmt"># something weird with classes not matching here.  maybe singleton methods breaking is_a?</span>
103:                 <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;Array&quot;</span>
104:                   <span class="ruby-identifier">entries</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">typecast_xml_value</span>(<span class="ruby-identifier">v</span>) }
105:                 <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;Hash&quot;</span>
106:                   [<span class="ruby-identifier">typecast_xml_value</span>(<span class="ruby-identifier">entries</span>)]
107:                 <span class="ruby-keyword kw">else</span>
108:                   <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;can't typecast #{entries.inspect}&quot;</span>
109:                 <span class="ruby-keyword kw">end</span>
110:               <span class="ruby-keyword kw">end</span>
111:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>[<span class="ruby-value str">'type'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'file'</span> <span class="ruby-operator">||</span> 
112:                (<span class="ruby-identifier">value</span>[<span class="ruby-value str">&quot;__content__&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">value</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>[<span class="ruby-value str">&quot;__content__&quot;</span>].<span class="ruby-identifier">present?</span>))
113:               <span class="ruby-identifier">content</span> = <span class="ruby-identifier">value</span>[<span class="ruby-value str">&quot;__content__&quot;</span>]
114:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parser</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">XmlMini</span><span class="ruby-operator">::</span><span class="ruby-constant">PARSING</span>[<span class="ruby-identifier">value</span>[<span class="ruby-value str">&quot;type&quot;</span>]]
115:                 <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">content</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">content</span>, <span class="ruby-identifier">value</span>)
116:               <span class="ruby-keyword kw">else</span>
117:                 <span class="ruby-identifier">content</span>
118:               <span class="ruby-keyword kw">end</span>
119:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>[<span class="ruby-value str">'type'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'string'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>[<span class="ruby-value str">'nil'</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">'true'</span>
120:               <span class="ruby-value str">&quot;&quot;</span>
121:             <span class="ruby-comment cmt"># blank or nil parsed values are represented by nil</span>
122:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>[<span class="ruby-value str">'nil'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'true'</span>
123:               <span class="ruby-keyword kw">nil</span>
124:             <span class="ruby-comment cmt"># If the type is the only element which makes it then</span>
125:             <span class="ruby-comment cmt"># this still makes the value nil, except if type is</span>
126:             <span class="ruby-comment cmt"># a XML node(where type['value'] is a Hash)</span>
127:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>[<span class="ruby-value str">'type'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>[<span class="ruby-value str">'type'</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Hash</span>)
128:               <span class="ruby-keyword kw">nil</span>
129:             <span class="ruby-keyword kw">else</span>
130:               <span class="ruby-identifier">xml_value</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">value</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">k</span>, <span class="ruby-identifier">typecast_xml_value</span>(<span class="ruby-identifier">v</span>)] }]
131: 
132:               <span class="ruby-comment cmt"># Turn { :files =&gt; { :file =&gt; #&lt;StringIO&gt; } into { :files =&gt; #&lt;StringIO&gt; } so it is compatible with</span>
133:               <span class="ruby-comment cmt"># how multipart uploaded files from HTML appear</span>
134:               <span class="ruby-identifier">xml_value</span>[<span class="ruby-value str">&quot;file&quot;</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">StringIO</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">xml_value</span>[<span class="ruby-value str">&quot;file&quot;</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">xml_value</span>
135:             <span class="ruby-keyword kw">end</span>
136:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'Array'</span>
137:             <span class="ruby-identifier">value</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">typecast_xml_value</span>(<span class="ruby-identifier">i</span>) }
138:             <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">first</span>
139:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'String'</span>
140:             <span class="ruby-identifier">value</span>
141:           <span class="ruby-keyword kw">else</span>
142:             <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;can't typecast #{value.class.name} - #{value.inspect}&quot;</span>
143:         <span class="ruby-keyword kw">end</span>
144:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002272">
                    
                    <a name="M002272"></a><b>unrename_keys</b>(params)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002272_source')" id="l_M002272_source">show</a>
                        
                    </p>
                    <div id="M002272_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/conversions.rb, line 146</span>
146:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unrename_keys</span>(<span class="ruby-identifier">params</span>)
147:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>
148:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;Hash&quot;</span>
149:             <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">params</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;-&quot;</span>, <span class="ruby-value str">&quot;_&quot;</span>), <span class="ruby-identifier">unrename_keys</span>(<span class="ruby-identifier">v</span>)] } ]
150:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;Array&quot;</span>
151:             <span class="ruby-identifier">params</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">unrename_keys</span>(<span class="ruby-identifier">v</span>) }
152:           <span class="ruby-keyword kw">else</span>
153:             <span class="ruby-identifier">params</span>
154:         <span class="ruby-keyword kw">end</span>
155:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M002284">
                    
                    <a name="M002284"></a><b>assert_valid_keys</b>(*valid_keys)
                    
                </div>
                
                <div class="description">
                  <p>
Validate all keys in a hash match *valid keys, raising ArgumentError on a
mismatch. Note that keys are NOT treated indifferently, meaning if you use
strings for keys but assert symbols as keys, this will fail.
</p>
<h4>Examples</h4>
<pre>
  { :name =&gt; &quot;Rob&quot;, :years =&gt; &quot;28&quot; }.assert_valid_keys(:name, :age) # =&gt; raises &quot;ArgumentError: Unknown key: years&quot;
  { :name =&gt; &quot;Rob&quot;, :age =&gt; &quot;28&quot; }.assert_valid_keys(&quot;name&quot;, &quot;age&quot;) # =&gt; raises &quot;ArgumentError: Unknown key: name&quot;
  { :name =&gt; &quot;Rob&quot;, :age =&gt; &quot;28&quot; }.assert_valid_keys(:name, :age) # =&gt; passes, raises nothing
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002284_source')" id="l_M002284_source">show</a>
                        
                    </p>
                    <div id="M002284_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assert_valid_keys</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">valid_keys</span>)
42:     <span class="ruby-identifier">valid_keys</span>.<span class="ruby-identifier">flatten!</span>
43:     <span class="ruby-identifier">each_key</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>
44:       <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Unknown key: #{k}&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">valid_keys</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">k</span>)
45:     <span class="ruby-keyword kw">end</span>
46:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002266">
                    
                    <a name="M002266"></a><b>deep_dup</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a deep copy of hash.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002266_source')" id="l_M002266_source">show</a>
                        
                    </p>
                    <div id="M002266_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/deep_dup.rb, line 3</span>
 3:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deep_dup</span>
 4:     <span class="ruby-identifier">duplicate</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">dup</span>
 5:     <span class="ruby-identifier">duplicate</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
 6:       <span class="ruby-identifier">tv</span> = <span class="ruby-identifier">duplicate</span>[<span class="ruby-identifier">k</span>]
 7:       <span class="ruby-identifier">duplicate</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">tv</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">tv</span>.<span class="ruby-identifier">deep_dup</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">v</span>
 8:     <span class="ruby-keyword kw">end</span>
 9:     <span class="ruby-identifier">duplicate</span>
10:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002273">
                    
                    <a name="M002273"></a><b>diff</b>(h2)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a hash that represents the difference between two hashes.
</p>
<p>
Examples:
</p>
<pre>
  {1 =&gt; 2}.diff(1 =&gt; 2)         # =&gt; {}
  {1 =&gt; 2}.diff(1 =&gt; 3)         # =&gt; {1 =&gt; 2}
  {}.diff(1 =&gt; 2)               # =&gt; {1 =&gt; 2}
  {1 =&gt; 2, 3 =&gt; 4}.diff(1 =&gt; 2) # =&gt; {3 =&gt; 4}
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002273_source')" id="l_M002273_source">show</a>
                        
                    </p>
                    <div id="M002273_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/diff.rb, line 10</span>
10:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">diff</span>(<span class="ruby-identifier">h2</span>)
11:     <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h2</span>[<span class="ruby-identifier">k</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">v</span> }.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">h2</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">k</span>) })
12:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002721">
                    
                    <a name="M002721"></a><b>encode_json</b>(encoder)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002721_source')" id="l_M002721_source">show</a>
                        
                    </p>
                    <div id="M002721_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/json/encoding.rb, line 245</span>
245:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode_json</span>(<span class="ruby-identifier">encoder</span>)
246:     <span class="ruby-comment cmt"># values are encoded with use_options = false, because we don't want hash representations from ActiveModel to be</span>
247:     <span class="ruby-comment cmt"># processed once again with as_json with options, as this could cause unexpected results (i.e. missing fields);</span>
248: 
249:     <span class="ruby-comment cmt"># on the other hand, we need to run as_json on the elements, because the model representation may contain fields</span>
250:     <span class="ruby-comment cmt"># like Time/Date in their original (not jsonified) form, etc.</span>
251: 
252:     <span class="ruby-node">&quot;{#{map { |k,v| &quot;#{encoder.encode(k.to_s)}:#{encoder.encode(v, false)}&quot; } * ','}}&quot;</span>
253:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002274">
                    
                    <a name="M002274"></a><b>except</b>(*keys)
                    
                </div>
                
                <div class="description">
                  <p>
Return a hash that includes everything but the given keys. This is useful
for limiting a set of parameters to everything but a few known toggles:
</p>
<pre>
  @person.update_attributes(params[:person].except(:admin))
</pre>
<p>
If the receiver responds to <tt>convert_key</tt>, the method is called on
each of the arguments. This allows <tt>except</tt> to play nice with hashes
with indifferent access for instance:
</p>
<pre>
  {:a =&gt; 1}.with_indifferent_access.except(:a)  # =&gt; {}
  {:a =&gt; 1}.with_indifferent_access.except(&quot;a&quot;) # =&gt; {}
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002274_source')" id="l_M002274_source">show</a>
                        
                    </p>
                    <div id="M002274_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/except.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">except</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
15:     <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">except!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
16:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002275">
                    
                    <a name="M002275"></a><b>except!</b>(*keys)
                    
                </div>
                
                <div class="description">
                  <p>
Replaces the hash without the given keys.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002275_source')" id="l_M002275_source">show</a>
                        
                    </p>
                    <div id="M002275_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/except.rb, line 19</span>
19:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">except!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
20:     <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>) }
21:     <span class="ruby-keyword kw">self</span>
22:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002290">
                    
                    <a name="M002290"></a><b>extract!</b>(*keys)
                    
                </div>
                
                <div class="description">
                  <p>
Removes and returns the key/value pairs matching the given keys.
</p>
<pre>
  {:a =&gt; 1, :b =&gt; 2, :c =&gt; 3, :d =&gt; 4}.extract!(:a, :b) # =&gt; {:a =&gt; 1, :b =&gt; 2}
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002290_source')" id="l_M002290_source">show</a>
                        
                    </p>
                    <div id="M002290_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/slice.rb, line 35</span>
35:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
36:     <span class="ruby-identifier">result</span> = {}
37:     <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">result</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>) }
38:     <span class="ruby-identifier">result</span>
39:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002149">
                    
                    <a name="M002149"></a><b>extractable_options?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
By default, only instances of <a href="Hash.html">Hash</a> itself are
extractable. Subclasses of <a href="Hash.html">Hash</a> may implement this
method and return true to declare themselves as extractable. If a <a
href="Hash.html">Hash</a> is extractable, <a
href="Array.html#M002150">Array#extract_options!</a> pops it from the <a
href="Array.html">Array</a> when it is the last element of the <a
href="Array.html">Array</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002149_source')" id="l_M002149_source">show</a>
                        
                    </p>
                    <div id="M002149_source" class="dyn-source">
                        <pre>   <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/array/extract_options.rb, line 7</span>
7:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extractable_options?</span>
8:     <span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">Hash</span>)
9:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002277">
                    
                    <a name="M002277"></a><b>nested_under_indifferent_access</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Hash.html#M002276">with_indifferent_access</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002285">
                    
                    <a name="M002285"></a><b>reverse_merge</b>(other_hash)
                    
                </div>
                
                <div class="description">
                  <p>
Merges the caller into <tt>other_hash</tt>. For example,
</p>
<pre>
  options = options.reverse_merge(:size =&gt; 25, :velocity =&gt; 10)
</pre>
<p>
is equivalent to
</p>
<pre>
  options = {:size =&gt; 25, :velocity =&gt; 10}.merge(options)
</pre>
<p>
This is particularly useful for initializing an options hash with default
values.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002285_source')" id="l_M002285_source">show</a>
                        
                    </p>
                    <div id="M002285_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/reverse_merge.rb, line 12</span>
12:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reverse_merge</span>(<span class="ruby-identifier">other_hash</span>)
13:     <span class="ruby-identifier">other_hash</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-keyword kw">self</span>)
14:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002286">
                    
                    <a name="M002286"></a><b>reverse_merge!</b>(other_hash)
                    
                </div>
                
                <div class="description">
                  <p>
Destructive <tt><a href="Hash.html#M002285">reverse_merge</a></tt>.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Hash.html#M002287">reverse_update</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002286_source')" id="l_M002286_source">show</a>
                        
                    </p>
                    <div id="M002286_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/reverse_merge.rb, line 17</span>
17:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reverse_merge!</span>(<span class="ruby-identifier">other_hash</span>)
18:     <span class="ruby-comment cmt"># right wins if there is no left</span>
19:     <span class="ruby-identifier">merge!</span>( <span class="ruby-identifier">other_hash</span> ){<span class="ruby-operator">|</span><span class="ruby-identifier">key</span>,<span class="ruby-identifier">left</span>,<span class="ruby-identifier">right</span><span class="ruby-operator">|</span> <span class="ruby-identifier">left</span> }
20:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002287">
                    
                    <a name="M002287"></a><b>reverse_update</b>(other_hash)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Hash.html#M002286">reverse_merge!</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002288">
                    
                    <a name="M002288"></a><b>slice</b>(*keys)
                    
                </div>
                
                <div class="description">
                  <p>
Slice a hash to include only the given keys. This is useful for limiting an
options hash to valid keys before passing to a method:
</p>
<pre>
  def search(criteria = {})
    assert_valid_keys(:mass, :velocity, :time)
  end

  search(options.slice(:mass, :velocity, :time))
</pre>
<p>
If you have an array of keys you want to limit to, you should splat them:
</p>
<pre>
  valid_keys = [:mass, :velocity, :time]
  search(options.slice(*valid_keys))
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002288_source')" id="l_M002288_source">show</a>
                        
                    </p>
                    <div id="M002288_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/slice.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">slice</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
16:     <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">convert_key</span>(<span class="ruby-identifier">key</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:convert_key</span>)
17:     <span class="ruby-identifier">hash</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>
18:     <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">k</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">k</span>) }
19:     <span class="ruby-identifier">hash</span>
20:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002289">
                    
                    <a name="M002289"></a><b>slice!</b>(*keys)
                    
                </div>
                
                <div class="description">
                  <p>
Replaces the hash with only the given keys. Returns a hash contained the
removed key/value pairs
</p>
<pre>
  {:a =&gt; 1, :b =&gt; 2, :c =&gt; 3, :d =&gt; 4}.slice!(:a, :b) # =&gt; {:c =&gt; 3, :d =&gt; 4}
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002289_source')" id="l_M002289_source">show</a>
                        
                    </p>
                    <div id="M002289_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/slice.rb, line 25</span>
25:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">slice!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
26:     <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">convert_key</span>(<span class="ruby-identifier">key</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:convert_key</span>)
27:     <span class="ruby-identifier">omit</span> = <span class="ruby-identifier">slice</span>(<span class="ruby-operator">*</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">keys</span>)
28:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">slice</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">keys</span>)
29:     <span class="ruby-identifier">replace</span>(<span class="ruby-identifier">hash</span>)
30:     <span class="ruby-identifier">omit</span>
31:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002278">
                    
                    <a name="M002278"></a><b>stringify_keys</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return a new hash with all keys converted to strings.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002278_source')" id="l_M002278_source">show</a>
                        
                    </p>
                    <div id="M002278_source" class="dyn-source">
                        <pre>   <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb, line 3</span>
3:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stringify_keys</span>
4:     <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">stringify_keys!</span>
5:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002279">
                    
                    <a name="M002279"></a><b>stringify_keys!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Destructively convert all keys to strings.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002279_source')" id="l_M002279_source">show</a>
                        
                    </p>
                    <div id="M002279_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb, line 8</span>
 8:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stringify_keys!</span>
 9:     <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
10:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
11:     <span class="ruby-keyword kw">end</span>
12:     <span class="ruby-keyword kw">self</span>
13:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002280">
                    
                    <a name="M002280"></a><b>symbolize_keys</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return a new hash with all keys converted to symbols, as long as they
respond to <tt>to_sym</tt>.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Hash.html#M002282">to_options</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002280_source')" id="l_M002280_source">show</a>
                        
                    </p>
                    <div id="M002280_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb, line 17</span>
17:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">symbolize_keys</span>
18:     <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">symbolize_keys!</span>
19:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002281">
                    
                    <a name="M002281"></a><b>symbolize_keys!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Destructively convert all keys to symbols, as long as they respond to
<tt>to_sym</tt>.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Hash.html#M002283">to_options!</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002281_source')" id="l_M002281_source">show</a>
                        
                    </p>
                    <div id="M002281_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/keys.rb, line 23</span>
23:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">symbolize_keys!</span>
24:     <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
25:       <span class="ruby-keyword kw">self</span>[(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_sym</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-identifier">key</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">key</span>] = <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
26:     <span class="ruby-keyword kw">end</span>
27:     <span class="ruby-keyword kw">self</span>
28:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002282">
                    
                    <a name="M002282"></a><b>to_options</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Hash.html#M002280">symbolize_keys</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002283">
                    
                    <a name="M002283"></a><b>to_options!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Hash.html#M002281">symbolize_keys!</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002403">
                    
                    <a name="M002403"></a><b>to_param</b>(namespace = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string representation of the receiver suitable for use as a URL
query string:
</p>
<pre>
  {:name =&gt; 'David', :nationality =&gt; 'Danish'}.to_param
  # =&gt; &quot;name=David&amp;nationality=Danish&quot;
</pre>
<p>
An optional namespace can be passed to enclose the param names:
</p>
<pre>
  {:name =&gt; 'David', :nationality =&gt; 'Danish'}.to_param('user')
  # =&gt; &quot;user[name]=David&amp;user[nationality]=Danish&quot;
</pre>
<p>
The string pairs &#8220;key=value&#8221; that conform the query string are
sorted lexicographically in ascending order.
</p>
<p>
This method is also aliased as <tt><a
href="Hash.html#M002404">to_query</a></tt>.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Hash.html#M002404">to_query</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002403_source')" id="l_M002403_source">show</a>
                        
                    </p>
                    <div id="M002403_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/object/to_param.rb, line 50</span>
50:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_param</span>(<span class="ruby-identifier">namespace</span> = <span class="ruby-keyword kw">nil</span>)
51:     <span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
52:       <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_query</span>(<span class="ruby-identifier">namespace</span> <span class="ruby-value">? </span><span class="ruby-node">&quot;#{namespace}[#{key}]&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">key</span>)
53:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">sort</span> <span class="ruby-operator">*</span> <span class="ruby-value str">'&amp;'</span>
54:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002404">
                    
                    <a name="M002404"></a><b>to_query</b>(namespace = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Hash.html#M002403">to_param</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002267">
                    
                    <a name="M002267"></a><b>to_xml</b>(options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing an XML representation of its receiver:
</p>
<pre>
  {&quot;foo&quot; =&gt; 1, &quot;bar&quot; =&gt; 2}.to_xml
  # =&gt;
  # &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  # &lt;hash&gt;
  #   &lt;foo type=&quot;integer&quot;&gt;1&lt;/foo&gt;
  #   &lt;bar type=&quot;integer&quot;&gt;2&lt;/bar&gt;
  # &lt;/hash&gt;
</pre>
<p>
To do so, the method loops over the pairs and builds nodes that depend on
the <em>values</em>. Given a pair <tt>key</tt>, <tt>value</tt>:
</p>
<ul>
<li>If <tt>value</tt> is a hash there&#8217;s a recursive call with
<tt>key</tt> as <tt>:root</tt>.

</li>
<li>If <tt>value</tt> is an array there&#8217;s a recursive call with
<tt>key</tt> as <tt>:root</tt>, and <tt>key</tt> singularized as
<tt>:children</tt>.

</li>
<li>If <tt>value</tt> is a callable object it must expect one or two arguments.
Depending on the arity, the callable is invoked with the <tt>options</tt>
hash as first argument with <tt>key</tt> as <tt>:root</tt>, and
<tt>key</tt> singularized as second argument. The callable can add nodes by
using <tt>options[:builder]</tt>.

<pre>
  &quot;foo&quot;.to_xml(lambda { |options, key| options[:builder].b(key) })
  # =&gt; &quot;&lt;b&gt;foo&lt;/b&gt;&quot;
</pre>
</li>
<li>If <tt>value</tt> responds to <tt><a
href="Hash.html#M002267">to_xml</a></tt> the method is invoked with
<tt>key</tt> as <tt>:root</tt>.

<pre>
  class Foo
    def to_xml(options)
      options[:builder].bar &quot;fooing!&quot;
    end
  end

  {:foo =&gt; Foo.new}.to_xml(:skip_instruct =&gt; true)
  # =&gt; &quot;&lt;hash&gt;&lt;bar&gt;fooing!&lt;/bar&gt;&lt;/hash&gt;&quot;
</pre>
</li>
<li>Otherwise, a node with <tt>key</tt> as tag is created with a string
representation of <tt>value</tt> as text node. If <tt>value</tt> is
<tt>nil</tt> an attribute &#8220;nil&#8221; set to &#8220;true&#8221; is
added. Unless the option <tt>:skip_types</tt> exists and is true, an
attribute &#8220;type&#8221; is added as well according to the following
mapping:

<pre>
  XML_TYPE_NAMES = {
    &quot;Symbol&quot;     =&gt; &quot;symbol&quot;,
    &quot;Fixnum&quot;     =&gt; &quot;integer&quot;,
    &quot;Bignum&quot;     =&gt; &quot;integer&quot;,
    &quot;BigDecimal&quot; =&gt; &quot;decimal&quot;,
    &quot;Float&quot;      =&gt; &quot;float&quot;,
    &quot;TrueClass&quot;  =&gt; &quot;boolean&quot;,
    &quot;FalseClass&quot; =&gt; &quot;boolean&quot;,
    &quot;Date&quot;       =&gt; &quot;date&quot;,
    &quot;DateTime&quot;   =&gt; &quot;datetime&quot;,
    &quot;Time&quot;       =&gt; &quot;datetime&quot;
  }
</pre>
</li>
</ul>
<p>
By default the root node is &#8220;hash&#8221;, but that&#8217;s
configurable via the <tt>:root</tt> option.
</p>
<p>
The default XML builder is a fresh instance of <tt>Builder::XmlMarkup</tt>.
You can configure your own builder with the <tt>:builder</tt> option. The
method also accepts options like <tt>:dasherize</tt> and friends, they are
forwarded to the builder.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002267_source')" id="l_M002267_source">show</a>
                        
                    </p>
                    <div id="M002267_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/conversions.rb, line 69</span>
69:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">options</span> = {})
70:     <span class="ruby-identifier">require</span> <span class="ruby-value str">'active_support/builder'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Builder</span>)
71: 
72:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
73:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:indent</span>]  <span class="ruby-operator">||=</span> <span class="ruby-value">2</span>
74:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:root</span>]    <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;hash&quot;</span>
75:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:builder</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">Builder</span><span class="ruby-operator">::</span><span class="ruby-constant">XmlMarkup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:indent</span>])
76: 
77:     <span class="ruby-identifier">builder</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:builder</span>]
78:     <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">instruct!</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:skip_instruct</span>)
79: 
80:     <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">XmlMini</span>.<span class="ruby-identifier">rename_key</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:root</span>].<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">options</span>)
81: 
82:     <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:method_missing</span>, <span class="ruby-identifier">root</span>) <span class="ruby-keyword kw">do</span>
83:       <span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">XmlMini</span>.<span class="ruby-identifier">to_tag</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span>) }
84:       <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">builder</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
85:     <span class="ruby-keyword kw">end</span>
86:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002276">
                    
                    <a name="M002276"></a><b>with_indifferent_access</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an <tt>ActiveSupport::HashWithIndifferentAccess</tt> out of its
receiver:
</p>
<pre>
  {:a =&gt; 1}.with_indifferent_access[&quot;a&quot;] # =&gt; 1
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Hash.html#M002277">nested_under_indifferent_access</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002276_source')" id="l_M002276_source">show</a>
                        
                    </p>
                    <div id="M002276_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/indifferent_access.rb, line 9</span>
 9:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_indifferent_access</span>
10:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">HashWithIndifferentAccess</span>.<span class="ruby-identifier">new_from_hash_copying_default</span>(<span class="ruby-keyword kw">self</span>)
11:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M002270">
                    
                    <a name="M002270"></a><b>deep_merge</b>(other_hash)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new hash with <tt>self</tt> and <tt>other_hash</tt> merged
recursively.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002270_source')" id="l_M002270_source">show</a>
                        
                    </p>
                    <div id="M002270_source" class="dyn-source">
                        <pre>   <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/deep_merge.rb, line 3</span>
3:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deep_merge</span>(<span class="ruby-identifier">other_hash</span>)
4:     <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">deep_merge!</span>(<span class="ruby-identifier">other_hash</span>)
5:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002271">
                    
                    <a name="M002271"></a><b>deep_merge!</b>(other_hash)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new hash with <tt>self</tt> and <tt>other_hash</tt> merged
recursively. Modifies the receiver in place.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002271_source')" id="l_M002271_source">show</a>
                        
                    </p>
                    <div id="M002271_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activesupport-3.2.1/lib/active_support/core_ext/hash/deep_merge.rb, line 9</span>
 9:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deep_merge!</span>(<span class="ruby-identifier">other_hash</span>)
10:     <span class="ruby-identifier">other_hash</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
11:       <span class="ruby-identifier">tv</span> = <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">k</span>]
12:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">tv</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">tv</span>.<span class="ruby-identifier">deep_merge</span>(<span class="ruby-identifier">v</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">v</span>
13:     <span class="ruby-keyword kw">end</span>
14:     <span class="ruby-keyword kw">self</span>
15:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    