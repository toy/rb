<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RubyLex</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            RubyLex 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/irb/ruby-lex_rb.html">lib/irb/ruby-lex.rb</a></li>
            
            <li><a href="../files/lib/rdoc/parsers/parse_rb_rb.html">lib/rdoc/parsers/parse_rb.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Lexical analyzer for Ruby source
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M002286">buf_input</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M003866">char_no</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M002267">debug?</a>,</li>
                
                <li><a href="#M003863">debug?</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M002290">each_top_level_statement</a>,</li>
                
                <li><a href="#M002280">eof?</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M003867">get_read</a>,</li>
                
                <li><a href="#M002275">get_readed</a>,</li>
                
                <li><a href="#M003868">getc</a>,</li>
                
                <li><a href="#M002276">getc</a>,</li>
                
                <li><a href="#M003869">getc_of_rests</a>,</li>
                
                <li><a href="#M002281">getc_of_rests</a>,</li>
                
                <li><a href="#M002279">gets</a>,</li>
                
                <li><a href="#M003870">gets</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M003904">identify_comment</a>,</li>
                
                <li><a href="#M002320">identify_comment</a>,</li>
                
                <li><a href="#M003888">identify_gvar</a>,</li>
                
                <li><a href="#M002310">identify_gvar</a>,</li>
                
                <li><a href="#M003894">identify_here_document</a>,</li>
                
                <li><a href="#M002312">identify_here_document</a>,</li>
                
                <li><a href="#M003890">identify_identifier</a>,</li>
                
                <li><a href="#M002311">identify_identifier</a>,</li>
                
                <li><a href="#M002314">identify_number</a>,</li>
                
                <li><a href="#M003896">identify_number</a>,</li>
                
                <li><a href="#M003895">identify_quotation</a>,</li>
                
                <li><a href="#M002313">identify_quotation</a>,</li>
                
                <li><a href="#M003900">identify_string</a>,</li>
                
                <li><a href="#M002317">identify_string</a>,</li>
                
                <li><a href="#M002289">initialize_input</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M002291">lex</a>,</li>
                
                <li><a href="#M003874">lex</a>,</li>
                
                <li><a href="#M002293">lex_init</a>,</li>
                
                <li><a href="#M003876">lex_init</a>,</li>
                
                <li><a href="#M002298">lex_int2</a>,</li>
                
                <li><a href="#M003881">lex_int2</a>,</li>
                
                <li><a href="#M003865">line_no</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M002268">new</a>,</li>
                
                <li><a href="#M003864">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M002285">peek</a>,</li>
                
                <li><a href="#M003873">peek</a>,</li>
                
                <li><a href="#M002283">peek_equal?</a>,</li>
                
                <li><a href="#M003872">peek_equal?</a>,</li>
                
                <li><a href="#M002284">peek_match?</a>,</li>
                
                <li><a href="#M002288">prompt</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M002321">read_escape</a>,</li>
                
                <li><a href="#M003906">read_escape</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M002272">set_input</a>,</li>
                
                <li><a href="#M002287">set_prompt</a>,</li>
                
                <li><a href="#M003902">skip_inner_expression</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M002292">token</a>,</li>
                
                <li><a href="#M003875">token</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M002282">ungetc</a>,</li>
                
                <li><a href="#M003871">ungetc</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="RSS/Utils.html">RSS::Utils</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="RSS/Utils.html">RSS::Utils</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="RSS/Utils.html">RSS::Utils</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">CLASS</span> <a href="RubyLex/BufferedReader.html">RubyLex::BufferedReader</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">ENINDENT_CLAUSE</td>
            <td>=</td>
            <td class="attr-value">[     &quot;case&quot;, &quot;class&quot;, &quot;def&quot;, &quot;do&quot;, &quot;for&quot;, &quot;if&quot;,     &quot;module&quot;, &quot;unless&quot;, &quot;until&quot;, &quot;while&quot;, &quot;begin&quot; #, &quot;when&quot;   ]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">DEINDENT_CLAUSE</td>
            <td>=</td>
            <td class="attr-value">[&quot;end&quot; #, &quot;when&quot;   ]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PERCENT_LTYPE</td>
            <td>=</td>
            <td class="attr-value">{     &quot;q&quot; =&gt; &quot;\'&quot;,     &quot;Q&quot; =&gt; &quot;\&quot;&quot;,     &quot;x&quot; =&gt; &quot;\`&quot;,     &quot;r&quot; =&gt; &quot;/&quot;,     &quot;w&quot; =&gt; &quot;]&quot;,     &quot;W&quot; =&gt; &quot;]&quot;,     &quot;s&quot; =&gt; &quot;:&quot;   }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PERCENT_PAREN</td>
            <td>=</td>
            <td class="attr-value">{     &quot;{&quot; =&gt; &quot;}&quot;,     &quot;[&quot; =&gt; &quot;]&quot;,     &quot;&lt;&quot; =&gt; &quot;&gt;&quot;,     &quot;(&quot; =&gt; &quot;)&quot;   }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">Ltype2Token</td>
            <td>=</td>
            <td class="attr-value">{     &quot;\'&quot; =&gt; TkSTRING,     &quot;\&quot;&quot; =&gt; TkSTRING,     &quot;\`&quot; =&gt; TkXSTRING,     &quot;/&quot; =&gt; TkREGEXP,     &quot;]&quot; =&gt; TkDSTRING,     &quot;:&quot; =&gt; TkSYMBOL   }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">DLtype2Token</td>
            <td>=</td>
            <td class="attr-value">{     &quot;\&quot;&quot; =&gt; TkDSTRING,     &quot;\`&quot; =&gt; TkDXSTRING,     &quot;/&quot; =&gt; TkDREGEXP,   }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ENINDENT_CLAUSE</td>
            <td>=</td>
            <td class="attr-value">[     &quot;case&quot;, &quot;class&quot;, &quot;def&quot;, &quot;do&quot;, &quot;for&quot;, &quot;if&quot;,     &quot;module&quot;, &quot;unless&quot;, &quot;until&quot;, &quot;while&quot;, &quot;begin&quot; #, &quot;when&quot;   ]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">DEINDENT_CLAUSE</td>
            <td>=</td>
            <td class="attr-value">[&quot;end&quot; #, &quot;when&quot;   ]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PERCENT_LTYPE</td>
            <td>=</td>
            <td class="attr-value">{     &quot;q&quot; =&gt; &quot;\'&quot;,     &quot;Q&quot; =&gt; &quot;\&quot;&quot;,     &quot;x&quot; =&gt; &quot;\`&quot;,     &quot;r&quot; =&gt; &quot;/&quot;,     &quot;w&quot; =&gt; &quot;]&quot;   }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PERCENT_PAREN</td>
            <td>=</td>
            <td class="attr-value">{     &quot;{&quot; =&gt; &quot;}&quot;,     &quot;[&quot; =&gt; &quot;]&quot;,     &quot;&lt;&quot; =&gt; &quot;&gt;&quot;,     &quot;(&quot; =&gt; &quot;)&quot;   }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">Ltype2Token</td>
            <td>=</td>
            <td class="attr-value">{     &quot;\'&quot; =&gt; TkSTRING,     &quot;\&quot;&quot; =&gt; TkSTRING,     &quot;\`&quot; =&gt; TkXSTRING,     &quot;/&quot; =&gt; TkREGEXP,     &quot;]&quot; =&gt; TkDSTRING   }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">DLtype2Token</td>
            <td>=</td>
            <td class="attr-value">{     &quot;\&quot;&quot; =&gt; TkDSTRING,     &quot;\`&quot; =&gt; TkDXSTRING,     &quot;/&quot; =&gt; TkDREGEXP,   }</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>debug_level</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>skip_space</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>readed_auto_clean_up</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>exception_on_syntax_error</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>seek</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>char_no</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>line_no</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>indent</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>continue</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>lex_state</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>skip_space</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>read_auto_clean_up</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>exception_on_syntax_error</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>indent</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M003866">
                    
                    <a name="M003866"></a><b>char_no</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003866_source')" id="l_M003866_source">show</a>
                        
                    </p>
                    <div id="M003866_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 480</span>
480:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">char_no</span>
481:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">column</span>
482:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002290">
                    
                    <a name="M002290"></a><b>each_top_level_statement</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002290_source')" id="l_M002290_source">show</a>
                        
                    </p>
                    <div id="M002290_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 227</span>
227:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_top_level_statement</span>
228:     <span class="ruby-identifier">initialize_input</span>
229:     <span class="ruby-identifier">catch</span>(<span class="ruby-identifier">:TERM_INPUT</span>) <span class="ruby-keyword kw">do</span>
230:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
231:   <span class="ruby-keyword kw">begin</span>
232:     <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>
233:     <span class="ruby-identifier">prompt</span>
234:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">l</span> = <span class="ruby-identifier">lex</span>
235:       <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:TERM_INPUT</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">==</span> <span class="ruby-value str">''</span>
236:     <span class="ruby-keyword kw">else</span>
237:       <span class="ruby-comment cmt">#p l</span>
238:       <span class="ruby-ivar">@line</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">l</span>
239:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@ltype</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@continue</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@indent</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
240:         <span class="ruby-keyword kw">next</span>
241:       <span class="ruby-keyword kw">end</span>
242:     <span class="ruby-keyword kw">end</span>
243:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@line</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;\n&quot;</span>
244:       <span class="ruby-keyword kw">yield</span> <span class="ruby-ivar">@line</span>, <span class="ruby-ivar">@exp_line_no</span>
245:     <span class="ruby-keyword kw">end</span>
246:     <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">l</span>
247:     <span class="ruby-ivar">@line</span> = <span class="ruby-value str">''</span>
248:     <span class="ruby-ivar">@exp_line_no</span> = <span class="ruby-ivar">@line_no</span>
249: 
250:     <span class="ruby-ivar">@indent</span> = <span class="ruby-value">0</span>
251:     <span class="ruby-ivar">@indent_stack</span> = []
252:     <span class="ruby-identifier">prompt</span>
253:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">TerminateLineInput</span>
254:     <span class="ruby-identifier">initialize_input</span>
255:     <span class="ruby-identifier">prompt</span>
256:     <span class="ruby-identifier">get_readed</span>
257:   <span class="ruby-keyword kw">end</span>
258:       <span class="ruby-keyword kw">end</span>
259:     <span class="ruby-keyword kw">end</span>
260:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002280">
                    
                    <a name="M002280"></a><b>eof?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002280_source')" id="l_M002280_source">show</a>
                        
                    </p>
                    <div id="M002280_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 132</span>
132:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eof?</span>
133:     <span class="ruby-ivar">@io</span>.<span class="ruby-identifier">eof?</span>
134:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003867">
                    
                    <a name="M003867"></a><b>get_read</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003867_source')" id="l_M003867_source">show</a>
                        
                    </p>
                    <div id="M003867_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 484</span>
484:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_read</span>
485:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">get_read</span>
486:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002275">
                    
                    <a name="M002275"></a><b>get_readed</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002275_source')" id="l_M002275_source">show</a>
                        
                    </p>
                    <div id="M002275_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 89</span>
89:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_readed</span>
90:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">idx</span> = <span class="ruby-ivar">@readed</span>.<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
91:       <span class="ruby-ivar">@base_char_no</span> = <span class="ruby-identifier">idx</span>
92:     <span class="ruby-keyword kw">else</span>
93:       <span class="ruby-ivar">@base_char_no</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@readed</span>.<span class="ruby-identifier">size</span>
94:     <span class="ruby-keyword kw">end</span>
95:     
96:     <span class="ruby-identifier">readed</span> = <span class="ruby-ivar">@readed</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&quot;</span>)
97:     <span class="ruby-ivar">@readed</span> = []
98:     <span class="ruby-identifier">readed</span>
99:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002276">
                    
                    <a name="M002276"></a><b>getc</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002276_source')" id="l_M002276_source">show</a>
                        
                    </p>
                    <div id="M002276_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getc</span>
102:     <span class="ruby-keyword kw">while</span> <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">empty?</span>
103: <span class="ruby-comment cmt">#      return nil unless buf_input</span>
104:       <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">buf_input</span>
105:     <span class="ruby-keyword kw">end</span>
106:     <span class="ruby-identifier">c</span> = <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">shift</span>
107:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@here_header</span>
108:       <span class="ruby-ivar">@here_readed</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">c</span>
109:     <span class="ruby-keyword kw">else</span>
110:       <span class="ruby-ivar">@readed</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">c</span>
111:     <span class="ruby-keyword kw">end</span>
112:     <span class="ruby-ivar">@seek</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
113:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
114:       <span class="ruby-ivar">@line_no</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> 
115:       <span class="ruby-ivar">@char_no</span> = <span class="ruby-value">0</span>
116:     <span class="ruby-keyword kw">else</span>
117:       <span class="ruby-ivar">@char_no</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
118:     <span class="ruby-keyword kw">end</span>
119:     <span class="ruby-identifier">c</span>
120:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003868">
                    
                    <a name="M003868"></a><b>getc</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003868_source')" id="l_M003868_source">show</a>
                        
                    </p>
                    <div id="M003868_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 488</span>
488:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getc</span>
489:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">getc</span>
490:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003869">
                    
                    <a name="M003869"></a><b>getc_of_rests</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003869_source')" id="l_M003869_source">show</a>
                        
                    </p>
                    <div id="M003869_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 492</span>
492:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getc_of_rests</span>
493:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">getc_already_read</span>
494:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002281">
                    
                    <a name="M002281"></a><b>getc_of_rests</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002281_source')" id="l_M002281_source">show</a>
                        
                    </p>
                    <div id="M002281_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getc_of_rests</span>
137:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">empty?</span>
138:       <span class="ruby-keyword kw">nil</span>
139:     <span class="ruby-keyword kw">else</span>
140:       <span class="ruby-identifier">getc</span>
141:     <span class="ruby-keyword kw">end</span>
142:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003870">
                    
                    <a name="M003870"></a><b>gets</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003870_source')" id="l_M003870_source">show</a>
                        
                    </p>
                    <div id="M003870_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 496</span>
496:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gets</span>
497:     <span class="ruby-identifier">c</span> = <span class="ruby-identifier">getc</span> <span class="ruby-keyword kw">or</span> <span class="ruby-keyword kw">return</span>
498:     <span class="ruby-identifier">l</span> = <span class="ruby-value str">&quot;&quot;</span>
499:     <span class="ruby-keyword kw">begin</span>
500:       <span class="ruby-identifier">l</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\r&quot;</span>
501:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
502:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">c</span> = <span class="ruby-identifier">getc</span>
503:     <span class="ruby-identifier">l</span>
504:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002279">
                    
                    <a name="M002279"></a><b>gets</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002279_source')" id="l_M002279_source">show</a>
                        
                    </p>
                    <div id="M002279_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gets</span>
123:     <span class="ruby-identifier">l</span> = <span class="ruby-value str">&quot;&quot;</span>
124:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">c</span> = <span class="ruby-identifier">getc</span>
125:       <span class="ruby-identifier">l</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">c</span>)
126:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
127:     <span class="ruby-keyword kw">end</span>
128:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">l</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">nil?</span>
129:     <span class="ruby-identifier">l</span>
130:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003904">
                    
                    <a name="M003904"></a><b>identify_comment</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003904_source')" id="l_M003904_source">show</a>
                        
                    </p>
                    <div id="M003904_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1269</span>
1269:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_comment</span>
1270:     <span class="ruby-ivar">@ltype</span> = <span class="ruby-value str">&quot;#&quot;</span>
1271:     <span class="ruby-identifier">comment</span> = <span class="ruby-value str">&quot;#&quot;</span>
1272:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1273:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\\&quot;</span>
1274:         <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1275:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
1276:           <span class="ruby-identifier">ch</span> = <span class="ruby-value str">&quot; &quot;</span>
1277:         <span class="ruby-keyword kw">else</span>
1278:           <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\\&quot;</span> 
1279:         <span class="ruby-keyword kw">end</span>
1280:       <span class="ruby-keyword kw">else</span>
1281:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
1282:           <span class="ruby-ivar">@ltype</span> = <span class="ruby-keyword kw">nil</span>
1283:           <span class="ruby-identifier">ungetc</span>
1284:           <span class="ruby-keyword kw">break</span>
1285:         <span class="ruby-keyword kw">end</span>
1286:       <span class="ruby-keyword kw">end</span>
1287:       <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1288:     <span class="ruby-keyword kw">end</span>
1289:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOMMENT</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">comment</span>)
1290:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002320">
                    
                    <a name="M002320"></a><b>identify_comment</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002320_source')" id="l_M002320_source">show</a>
                        
                    </p>
                    <div id="M002320_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 1085</span>
1085:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_comment</span>
1086:     <span class="ruby-ivar">@ltype</span> = <span class="ruby-value str">&quot;#&quot;</span>
1087: 
1088:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1089: <span class="ruby-comment cmt">#      if ch == &quot;\\&quot; #&quot;</span>
1090: <span class="ruby-comment cmt"># read_escape</span>
1091: <span class="ruby-comment cmt">#      end</span>
1092:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
1093:   <span class="ruby-ivar">@ltype</span> = <span class="ruby-keyword kw">nil</span>
1094:   <span class="ruby-identifier">ungetc</span>
1095:   <span class="ruby-keyword kw">break</span>
1096:       <span class="ruby-keyword kw">end</span>
1097:     <span class="ruby-keyword kw">end</span>
1098:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOMMENT</span>)
1099:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002310">
                    
                    <a name="M002310"></a><b>identify_gvar</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002310_source')" id="l_M002310_source">show</a>
                        
                    </p>
                    <div id="M002310_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 746</span>
746:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_gvar</span>
747:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
748:     
749:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
750:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[~_*$?!@\/\\;,=:&lt;&gt;&quot;.]/</span>   <span class="ruby-comment cmt">#&quot;</span>
751:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkGVAR</span>, <span class="ruby-value str">&quot;$&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">ch</span>)
752:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;-&quot;</span>
753:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkGVAR</span>, <span class="ruby-value str">&quot;$-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">getc</span>)
754:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;&amp;&quot;</span>, <span class="ruby-value str">&quot;`&quot;</span>, <span class="ruby-value str">&quot;'&quot;</span>, <span class="ruby-value str">&quot;+&quot;</span>
755:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkBACK_REF</span>, <span class="ruby-value str">&quot;$&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">ch</span>)
756:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[1-9]/</span>
757:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">getc</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>; <span class="ruby-keyword kw">end</span>
758:       <span class="ruby-identifier">ungetc</span>
759:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkNTH_REF</span>)
760:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/\w/</span>
761:       <span class="ruby-identifier">ungetc</span>
762:       <span class="ruby-identifier">ungetc</span>
763:       <span class="ruby-identifier">identify_identifier</span>
764:     <span class="ruby-keyword kw">else</span> 
765:       <span class="ruby-identifier">ungetc</span>
766:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;$&quot;</span>)
767:     <span class="ruby-keyword kw">end</span>
768:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003888">
                    
                    <a name="M003888"></a><b>identify_gvar</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003888_source')" id="l_M003888_source">show</a>
                        
                    </p>
                    <div id="M003888_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 964</span>
964:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_gvar</span>
965:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
966:     <span class="ruby-identifier">str</span> = <span class="ruby-value str">&quot;$&quot;</span>
967: 
968:     <span class="ruby-identifier">tk</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
969:          <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[~_*$?!@\/\\;,=:&lt;&gt;&quot;.]/</span>   <span class="ruby-comment cmt">#&quot;</span>
970:            <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
971:            <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkGVAR</span>, <span class="ruby-identifier">str</span>)
972:            
973:          <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;-&quot;</span>
974:            <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">getc</span>
975:            <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkGVAR</span>, <span class="ruby-identifier">str</span>)
976:            
977:          <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;&amp;&quot;</span>, <span class="ruby-value str">&quot;`&quot;</span>, <span class="ruby-value str">&quot;'&quot;</span>, <span class="ruby-value str">&quot;+&quot;</span>
978:            <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
979:            <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkBACK_REF</span>, <span class="ruby-identifier">str</span>)
980:            
981:          <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[1-9]/</span>
982:            <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
983:            <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
984:              <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
985:            <span class="ruby-keyword kw">end</span>
986:            <span class="ruby-identifier">ungetc</span>
987:            <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkNTH_REF</span>)
988:          <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/\w/</span>
989:            <span class="ruby-identifier">ungetc</span>
990:            <span class="ruby-identifier">ungetc</span>
991:            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">identify_identifier</span>
992:          <span class="ruby-keyword kw">else</span> 
993:            <span class="ruby-identifier">ungetc</span>
994:            <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;$&quot;</span>)     
995:          <span class="ruby-keyword kw">end</span>
996:     <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">str</span>)
997:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003894">
                    
                    <a name="M003894"></a><b>identify_here_document</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003894_source')" id="l_M003894_source">show</a>
                        
                    </p>
                    <div id="M003894_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1074</span>
1074:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_here_document</span>
1075:     <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1076:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-&quot;</span>
1077:       <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1078:       <span class="ruby-identifier">indent</span> = <span class="ruby-keyword kw">true</span>
1079:     <span class="ruby-keyword kw">end</span>
1080:     <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/['&quot;`]/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">ch</span>            <span class="ruby-comment cmt"># '</span>
1081:       <span class="ruby-identifier">lt</span> = <span class="ruby-identifier">ch</span>
1082:       <span class="ruby-identifier">quoted</span> = <span class="ruby-value str">&quot;&quot;</span>
1083:       <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">c</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">lt</span>
1084:   <span class="ruby-identifier">quoted</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">c</span>
1085:       <span class="ruby-keyword kw">end</span>
1086:     <span class="ruby-keyword kw">else</span>
1087:       <span class="ruby-identifier">lt</span> = <span class="ruby-value str">'&quot;'</span>
1088:       <span class="ruby-identifier">quoted</span> = <span class="ruby-identifier">ch</span>.<span class="ruby-identifier">dup</span>
1089:       <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">c</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\w/</span>
1090:   <span class="ruby-identifier">quoted</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">c</span>
1091:       <span class="ruby-keyword kw">end</span>
1092:       <span class="ruby-identifier">ungetc</span>
1093:     <span class="ruby-keyword kw">end</span>
1094: 
1095:     <span class="ruby-identifier">ltback</span>, <span class="ruby-ivar">@ltype</span> = <span class="ruby-ivar">@ltype</span>, <span class="ruby-identifier">lt</span>
1096:     <span class="ruby-identifier">reserve</span> = <span class="ruby-value str">&quot;&quot;</span>
1097: 
1098:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1099:       <span class="ruby-identifier">reserve</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1100:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\\&quot;</span>    <span class="ruby-comment cmt">#&quot;</span>
1101:         <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1102:   <span class="ruby-identifier">reserve</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1103:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
1104:   <span class="ruby-keyword kw">break</span>
1105:       <span class="ruby-keyword kw">end</span>
1106:     <span class="ruby-keyword kw">end</span>
1107: 
1108:     <span class="ruby-identifier">str</span> = <span class="ruby-value str">&quot;&quot;</span>
1109:     <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">l</span> = <span class="ruby-identifier">gets</span>)
1110:       <span class="ruby-identifier">l</span>.<span class="ruby-identifier">chomp!</span>
1111:       <span class="ruby-identifier">l</span>.<span class="ruby-identifier">strip!</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">indent</span>
1112:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">l</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">quoted</span>
1113:       <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1114:     <span class="ruby-keyword kw">end</span>
1115: 
1116:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">divert_read_from</span>(<span class="ruby-identifier">reserve</span>)
1117: 
1118:     <span class="ruby-ivar">@ltype</span> = <span class="ruby-identifier">ltback</span>
1119:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
1120:     <span class="ruby-constant">Token</span>(<span class="ruby-constant">Ltype2Token</span>[<span class="ruby-identifier">lt</span>], <span class="ruby-identifier">str</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">str</span>.<span class="ruby-identifier">dump</span>)
1121:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002312">
                    
                    <a name="M002312"></a><b>identify_here_document</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002312_source')" id="l_M002312_source">show</a>
                        
                    </p>
                    <div id="M002312_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 879</span>
879:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_here_document</span>
880:     <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
881: <span class="ruby-comment cmt">#    if lt = PERCENT_LTYPE[ch]</span>
882:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-&quot;</span>
883:       <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
884:       <span class="ruby-identifier">indent</span> = <span class="ruby-keyword kw">true</span>
885:     <span class="ruby-keyword kw">end</span>
886:     <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/['&quot;`]/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">ch</span>
887:       <span class="ruby-identifier">lt</span> = <span class="ruby-identifier">ch</span>
888:       <span class="ruby-identifier">quoted</span> = <span class="ruby-value str">&quot;&quot;</span>
889:       <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">c</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">lt</span>
890:   <span class="ruby-identifier">quoted</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">c</span>
891:       <span class="ruby-keyword kw">end</span>
892:     <span class="ruby-keyword kw">else</span>
893:       <span class="ruby-identifier">lt</span> = <span class="ruby-value str">'&quot;'</span>
894:       <span class="ruby-identifier">quoted</span> = <span class="ruby-identifier">ch</span>.<span class="ruby-identifier">dup</span>
895:       <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">c</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\w/</span>
896:   <span class="ruby-identifier">quoted</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">c</span>
897:       <span class="ruby-keyword kw">end</span>
898:       <span class="ruby-identifier">ungetc</span>
899:     <span class="ruby-keyword kw">end</span>
900: 
901:     <span class="ruby-identifier">ltback</span>, <span class="ruby-ivar">@ltype</span> = <span class="ruby-ivar">@ltype</span>, <span class="ruby-identifier">lt</span>
902:     <span class="ruby-identifier">reserve</span> = []
903:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
904:       <span class="ruby-identifier">reserve</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">ch</span>
905:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\\&quot;</span>
906:   <span class="ruby-identifier">reserve</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
907:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
908:   <span class="ruby-keyword kw">break</span>
909:       <span class="ruby-keyword kw">end</span>
910:     <span class="ruby-keyword kw">end</span>
911: 
912:     <span class="ruby-ivar">@here_header</span> = <span class="ruby-keyword kw">false</span>
913:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">l</span> = <span class="ruby-identifier">gets</span>
914:       <span class="ruby-identifier">l</span> = <span class="ruby-identifier">l</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/(:?\r)?\n\z/</span>, <span class="ruby-value str">''</span>)
915:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">indent</span> <span class="ruby-value">? </span><span class="ruby-identifier">l</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">l</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">quoted</span>
916:   <span class="ruby-keyword kw">break</span>
917:       <span class="ruby-keyword kw">end</span>
918:     <span class="ruby-keyword kw">end</span>
919: 
920:     <span class="ruby-ivar">@here_header</span> = <span class="ruby-keyword kw">true</span>
921:     <span class="ruby-ivar">@here_readed</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">reserve</span>
922:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">reserve</span>.<span class="ruby-identifier">pop</span>
923:       <span class="ruby-identifier">ungetc</span> <span class="ruby-identifier">ch</span>
924:     <span class="ruby-keyword kw">end</span>
925: 
926:     <span class="ruby-ivar">@ltype</span> = <span class="ruby-identifier">ltback</span>
927:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
928:     <span class="ruby-constant">Token</span>(<span class="ruby-constant">Ltype2Token</span>[<span class="ruby-identifier">lt</span>])
929:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002311">
                    
                    <a name="M002311"></a><b>identify_identifier</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002311_source')" id="l_M002311_source">show</a>
                        
                    </p>
                    <div id="M002311_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 770</span>
770:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_identifier</span>
771:     <span class="ruby-identifier">token</span> = <span class="ruby-value str">&quot;&quot;</span>
772:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[$@]/</span>
773:       <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">c</span> = <span class="ruby-identifier">getc</span>)
774:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;@&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;@&quot;</span>
775:   <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">getc</span>
776:       <span class="ruby-keyword kw">end</span>
777:     <span class="ruby-keyword kw">end</span>
778: 
779:     <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\w|_/</span>
780:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;:&quot;</span>, <span class="ruby-identifier">ch</span>, <span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
781:       <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">ch</span>
782:     <span class="ruby-keyword kw">end</span>
783:     <span class="ruby-identifier">ungetc</span>
784:     
785:     <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;!&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;?&quot;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>,<span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\w/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;=&quot;</span>
786:       <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">getc</span>
787:     <span class="ruby-keyword kw">end</span>
788: 
789:     <span class="ruby-comment cmt"># almost fix token</span>
790: 
791:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">token</span>
792:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\$/</span>
793:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkGVAR</span>, <span class="ruby-identifier">token</span>)
794:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\@\@/</span>
795:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
796:       <span class="ruby-comment cmt"># p Token(TkCVAR, token)</span>
797:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCVAR</span>, <span class="ruby-identifier">token</span>)
798:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\@/</span>
799:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
800:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkIVAR</span>, <span class="ruby-identifier">token</span>)
801:     <span class="ruby-keyword kw">end</span>
802:     
803:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_DOT</span>
804:       <span class="ruby-identifier">print</span> <span class="ruby-identifier">token</span>, <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
805: 
806:       <span class="ruby-identifier">token_c</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">trans</span> = <span class="ruby-constant">TkReading2Token</span>[<span class="ruby-identifier">token</span>]
807:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token_c</span>
808:   <span class="ruby-comment cmt"># reserved word?</span>
809: 
810:   <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">&amp;&amp;</span>
811:       <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_FNAME</span> <span class="ruby-operator">&amp;&amp;</span>
812:       <span class="ruby-identifier">trans</span>[<span class="ruby-value">1</span>])
813:     <span class="ruby-comment cmt"># modifiers</span>
814:     <span class="ruby-identifier">token_c</span> = <span class="ruby-constant">TkSymbol2Token</span>[<span class="ruby-identifier">trans</span>[<span class="ruby-value">1</span>]]
815:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-identifier">trans</span>[<span class="ruby-value">0</span>]
816:   <span class="ruby-keyword kw">else</span>
817:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_FNAME</span>
818:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ENINDENT_CLAUSE</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">token</span>)
819:         <span class="ruby-comment cmt"># check for ``class = val'' etc.</span>
820:         <span class="ruby-identifier">valid</span> = <span class="ruby-keyword kw">true</span>
821:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">token</span>
822:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;class&quot;</span>
823:     <span class="ruby-identifier">valid</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">peek_match?</span>(<span class="ruby-regexp re">/^\s*(&lt;&lt;|\w|::)/</span>)
824:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;def&quot;</span>
825:     <span class="ruby-identifier">valid</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek_match?</span>(<span class="ruby-regexp re">/^\s*(([+-\/*&amp;\|^]|&lt;&lt;|&gt;&gt;|\|\||\&amp;\&amp;)=|\&amp;\&amp;|\|\|)/</span>)
826:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;do&quot;</span>
827:     <span class="ruby-identifier">valid</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek_match?</span>(<span class="ruby-regexp re">/^\s*([+-\/*]?=|\*|&lt;|&gt;|\&amp;)/</span>)
828:         <span class="ruby-keyword kw">when</span> <span class="ruby-operator">*</span><span class="ruby-constant">ENINDENT_CLAUSE</span>
829:     <span class="ruby-identifier">valid</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek_match?</span>(<span class="ruby-regexp re">/^\s*([+-\/*]?=|\*|&lt;|&gt;|\&amp;|\|)/</span>)
830:         <span class="ruby-keyword kw">else</span>
831:     <span class="ruby-comment cmt"># no nothing</span>
832:         <span class="ruby-keyword kw">end</span>
833:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">valid</span>
834:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;do&quot;</span>
835:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">TkFOR</span>, <span class="ruby-constant">TkWHILE</span>, <span class="ruby-constant">TkUNTIL</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">last</span>)
836:         <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
837:         <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">token_c</span>
838:       <span class="ruby-keyword kw">end</span>
839:     <span class="ruby-keyword kw">else</span>
840:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
841:       <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">token_c</span>
842:     <span class="ruby-keyword kw">end</span>
843: <span class="ruby-comment cmt">#   p @indent_stack</span>
844:         <span class="ruby-keyword kw">end</span>
845: 
846:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">DEINDENT_CLAUSE</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">token</span>)
847:         <span class="ruby-ivar">@indent</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
848:         <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">pop</span>
849:       <span class="ruby-keyword kw">end</span>
850:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-identifier">trans</span>[<span class="ruby-value">0</span>]
851:     <span class="ruby-keyword kw">else</span>
852:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
853:     <span class="ruby-keyword kw">end</span>
854:   <span class="ruby-keyword kw">end</span>
855:   <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-identifier">token_c</span>, <span class="ruby-identifier">token</span>)
856:       <span class="ruby-keyword kw">end</span>
857:     <span class="ruby-keyword kw">end</span>
858: 
859:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>
860:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
861:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">'='</span>
862:   <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">getc</span>
863:       <span class="ruby-keyword kw">end</span>
864:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_DOT</span>
865:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_ARG</span>
866:     <span class="ruby-keyword kw">else</span>
867:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
868:     <span class="ruby-keyword kw">end</span>
869: 
870:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[A-Z]/</span>
871:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCONSTANT</span>, <span class="ruby-identifier">token</span>)
872:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">token</span>[<span class="ruby-identifier">token</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[!?]/</span>
873:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkFID</span>, <span class="ruby-identifier">token</span>)
874:     <span class="ruby-keyword kw">else</span>
875:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkIDENTIFIER</span>, <span class="ruby-identifier">token</span>)
876:     <span class="ruby-keyword kw">end</span>
877:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003890">
                    
                    <a name="M003890"></a><b>identify_identifier</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003890_source')" id="l_M003890_source">show</a>
                        
                    </p>
                    <div id="M003890_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 999</span>
 999:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_identifier</span>
1000:     <span class="ruby-identifier">token</span> = <span class="ruby-value str">&quot;&quot;</span>
1001:     <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">getc</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[$@]/</span>
1002:     <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">getc</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;@&quot;</span>
1003: 
1004:     <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\w|_/</span>
1005:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;:&quot;</span>, <span class="ruby-identifier">ch</span>, <span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
1006:       <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">ch</span>
1007:     <span class="ruby-keyword kw">end</span>
1008:     <span class="ruby-identifier">ungetc</span>
1009:     
1010:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;!&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;?&quot;</span>
1011:       <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">getc</span>
1012:     <span class="ruby-keyword kw">end</span>
1013:     <span class="ruby-comment cmt"># fix token</span>
1014: 
1015:     <span class="ruby-comment cmt"># $stderr.puts &quot;identifier - #{token}, state = #@lex_state&quot;</span>
1016: 
1017:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">token</span>
1018:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\$/</span>
1019:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkGVAR</span>, <span class="ruby-identifier">token</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">token</span>)
1020:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\@/</span>
1021:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
1022:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkIVAR</span>, <span class="ruby-identifier">token</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">token</span>)
1023:     <span class="ruby-keyword kw">end</span>
1024:     
1025:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_DOT</span>
1026:       <span class="ruby-identifier">print</span> <span class="ruby-identifier">token</span>, <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
1027: 
1028:       <span class="ruby-identifier">token_c</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">trans</span> = <span class="ruby-constant">TkReading2Token</span>[<span class="ruby-identifier">token</span>]
1029:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token_c</span>
1030:   <span class="ruby-comment cmt"># reserved word?</span>
1031: 
1032:   <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">&amp;&amp;</span>
1033:       <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_FNAME</span> <span class="ruby-operator">&amp;&amp;</span>
1034:       <span class="ruby-identifier">trans</span>[<span class="ruby-value">1</span>])
1035:     <span class="ruby-comment cmt"># modifiers</span>
1036:     <span class="ruby-identifier">token_c</span> = <span class="ruby-constant">TkSymbol2Token</span>[<span class="ruby-identifier">trans</span>[<span class="ruby-value">1</span>]]
1037:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-identifier">trans</span>[<span class="ruby-value">0</span>]
1038:   <span class="ruby-keyword kw">else</span>
1039:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_FNAME</span>
1040:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ENINDENT_CLAUSE</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">token</span>)
1041:         <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1042:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">DEINDENT_CLAUSE</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">token</span>)
1043:         <span class="ruby-ivar">@indent</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1044:       <span class="ruby-keyword kw">end</span>
1045:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-identifier">trans</span>[<span class="ruby-value">0</span>]
1046:     <span class="ruby-keyword kw">else</span>
1047:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
1048:     <span class="ruby-keyword kw">end</span>
1049:   <span class="ruby-keyword kw">end</span>
1050:   <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-identifier">token_c</span>, <span class="ruby-identifier">token</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">token</span>)
1051:       <span class="ruby-keyword kw">end</span>
1052:     <span class="ruby-keyword kw">end</span>
1053: 
1054:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>
1055:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
1056:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">'='</span>
1057:   <span class="ruby-identifier">token</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">getc</span>
1058:       <span class="ruby-keyword kw">end</span>
1059:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_DOT</span>
1060:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_ARG</span>
1061:     <span class="ruby-keyword kw">else</span>
1062:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
1063:     <span class="ruby-keyword kw">end</span>
1064: 
1065:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[A-Z]/</span>
1066:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCONSTANT</span>, <span class="ruby-identifier">token</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">token</span>)
1067:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">token</span>[<span class="ruby-identifier">token</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[!?]/</span>
1068:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkFID</span>, <span class="ruby-identifier">token</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">token</span>)
1069:     <span class="ruby-keyword kw">else</span>
1070:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkIDENTIFIER</span>, <span class="ruby-identifier">token</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">token</span>)
1071:     <span class="ruby-keyword kw">end</span>
1072:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003896">
                    
                    <a name="M003896"></a><b>identify_number</b>(start)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003896_source')" id="l_M003896_source">show</a>
                        
                    </p>
                    <div id="M003896_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1142</span>
1142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_number</span>(<span class="ruby-identifier">start</span>)
1143:     <span class="ruby-identifier">str</span> = <span class="ruby-identifier">start</span>.<span class="ruby-identifier">dup</span>
1144: 
1145:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">start</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;+&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">start</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">start</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
1146:       <span class="ruby-identifier">start</span> = <span class="ruby-identifier">getc</span>
1147:       <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">start</span>
1148:     <span class="ruby-keyword kw">end</span>
1149: 
1150:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
1151: 
1152:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">start</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;0&quot;</span>
1153:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;x&quot;</span>
1154:         <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1155:         <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1156:         <span class="ruby-identifier">match</span> = <span class="ruby-regexp re">/[0-9a-f_]/</span>
1157:       <span class="ruby-keyword kw">else</span>
1158:         <span class="ruby-identifier">match</span> = <span class="ruby-regexp re">/[0-7_]/</span>
1159:       <span class="ruby-keyword kw">end</span>
1160:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1161:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">!~</span> <span class="ruby-identifier">match</span>
1162:           <span class="ruby-identifier">ungetc</span>
1163:           <span class="ruby-keyword kw">break</span>
1164:         <span class="ruby-keyword kw">else</span>
1165:           <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1166:         <span class="ruby-keyword kw">end</span>
1167:       <span class="ruby-keyword kw">end</span>
1168:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkINTEGER</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">str</span>)
1169:     <span class="ruby-keyword kw">end</span>
1170: 
1171:     <span class="ruby-identifier">type</span> = <span class="ruby-constant">TkINTEGER</span>
1172:     <span class="ruby-identifier">allow_point</span> = <span class="ruby-constant">TRUE</span>
1173:     <span class="ruby-identifier">allow_e</span> = <span class="ruby-constant">TRUE</span>
1174:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1175:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span>
1176:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-9_]/</span>
1177:         <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1178: 
1179:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">allow_point</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-value str">&quot;.&quot;</span>
1180:   <span class="ruby-identifier">type</span> = <span class="ruby-constant">TkFLOAT</span>
1181:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/[0-9]/</span>
1182:     <span class="ruby-identifier">ungetc</span>
1183:     <span class="ruby-keyword kw">break</span>
1184:   <span class="ruby-keyword kw">end</span>
1185:         <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1186:   <span class="ruby-identifier">allow_point</span> = <span class="ruby-keyword kw">false</span>
1187: 
1188:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">allow_e</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-value str">&quot;e&quot;</span>, <span class="ruby-identifier">allow_e</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-value str">&quot;E&quot;</span>
1189:         <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1190:   <span class="ruby-identifier">type</span> = <span class="ruby-constant">TkFLOAT</span>
1191:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[+-]/</span>
1192:     <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">getc</span>
1193:   <span class="ruby-keyword kw">end</span>
1194:   <span class="ruby-identifier">allow_e</span> = <span class="ruby-keyword kw">false</span>
1195:   <span class="ruby-identifier">allow_point</span> = <span class="ruby-keyword kw">false</span>
1196:       <span class="ruby-keyword kw">else</span>
1197:   <span class="ruby-identifier">ungetc</span>
1198:   <span class="ruby-keyword kw">break</span>
1199:       <span class="ruby-keyword kw">end</span>
1200:     <span class="ruby-keyword kw">end</span>
1201:     <span class="ruby-constant">Token</span>(<span class="ruby-identifier">type</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">str</span>)
1202:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002314">
                    
                    <a name="M002314"></a><b>identify_number</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002314_source')" id="l_M002314_source">show</a>
                        
                    </p>
                    <div id="M002314_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 949</span>
 949:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_number</span>
 950:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
 951: 
 952:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;0&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">1</span>) <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/[.eE]/</span>
 953:       <span class="ruby-identifier">getc</span>
 954:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>)
 955:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[xX]/</span>
 956:   <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
 957:   <span class="ruby-identifier">match</span> = <span class="ruby-regexp re">/[0-9a-fA-F_]/</span>
 958:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[bB]/</span>
 959:   <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
 960:   <span class="ruby-identifier">match</span> = <span class="ruby-regexp re">/[01_]/</span>
 961:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[oO]/</span>
 962:   <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
 963:   <span class="ruby-identifier">match</span> = <span class="ruby-regexp re">/[0-7_]/</span>
 964:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[dD]/</span>
 965:   <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
 966:   <span class="ruby-identifier">match</span> = <span class="ruby-regexp re">/[0-9_]/</span>
 967:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-7]/</span>
 968:   <span class="ruby-identifier">match</span> = <span class="ruby-regexp re">/[0-7_]/</span>
 969:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[89]/</span>
 970:   <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-value str">&quot;Illegal octal digit&quot;</span>
 971:       <span class="ruby-keyword kw">else</span> 
 972:   <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkINTEGER</span>)
 973:       <span class="ruby-keyword kw">end</span>
 974:       
 975:       <span class="ruby-identifier">len0</span> = <span class="ruby-keyword kw">true</span>
 976:       <span class="ruby-identifier">non_digit</span> = <span class="ruby-keyword kw">false</span>
 977:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
 978:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">match</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">ch</span>
 979:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;_&quot;</span>
 980:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_digit</span>
 981:         <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-node">&quot;trailing `#{ch}' in number&quot;</span>
 982:       <span class="ruby-keyword kw">else</span>
 983:         <span class="ruby-identifier">non_digit</span> = <span class="ruby-identifier">ch</span>
 984:       <span class="ruby-keyword kw">end</span>
 985:     <span class="ruby-keyword kw">else</span>
 986:       <span class="ruby-identifier">non_digit</span> = <span class="ruby-keyword kw">false</span>
 987:       <span class="ruby-identifier">len0</span> = <span class="ruby-keyword kw">false</span>
 988:     <span class="ruby-keyword kw">end</span>
 989:   <span class="ruby-keyword kw">else</span>
 990:     <span class="ruby-identifier">ungetc</span>
 991:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">len0</span>
 992:       <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-value str">&quot;numeric literal without digits&quot;</span>
 993:     <span class="ruby-keyword kw">end</span>
 994:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_digit</span>
 995:       <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-node">&quot;trailing `#{non_digit}' in number&quot;</span>
 996:     <span class="ruby-keyword kw">end</span>
 997:     <span class="ruby-keyword kw">break</span>
 998:   <span class="ruby-keyword kw">end</span>
 999:       <span class="ruby-keyword kw">end</span>
1000:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkINTEGER</span>)
1001:     <span class="ruby-keyword kw">end</span>
1002:     
1003:     <span class="ruby-identifier">type</span> = <span class="ruby-constant">TkINTEGER</span>
1004:     <span class="ruby-identifier">allow_point</span> = <span class="ruby-keyword kw">true</span>
1005:     <span class="ruby-identifier">allow_e</span> = <span class="ruby-keyword kw">true</span>
1006:     <span class="ruby-identifier">non_digit</span> = <span class="ruby-keyword kw">false</span>
1007:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1008:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span>
1009:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-9]/</span>
1010:   <span class="ruby-identifier">non_digit</span> = <span class="ruby-keyword kw">false</span>
1011:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;_&quot;</span>
1012:   <span class="ruby-identifier">non_digit</span> = <span class="ruby-identifier">ch</span>
1013:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">allow_point</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-value str">&quot;.&quot;</span>
1014:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_digit</span>
1015:     <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-node">&quot;trailing `#{non_digit}' in number&quot;</span>
1016:   <span class="ruby-keyword kw">end</span>
1017:   <span class="ruby-identifier">type</span> = <span class="ruby-constant">TkFLOAT</span>
1018:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/[0-9]/</span>
1019:     <span class="ruby-identifier">type</span> = <span class="ruby-constant">TkINTEGER</span>
1020:     <span class="ruby-identifier">ungetc</span>
1021:     <span class="ruby-keyword kw">break</span>
1022:   <span class="ruby-keyword kw">end</span>
1023:   <span class="ruby-identifier">allow_point</span> = <span class="ruby-keyword kw">false</span>
1024:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">allow_e</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-value str">&quot;e&quot;</span>, <span class="ruby-identifier">allow_e</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-value str">&quot;E&quot;</span>
1025:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_digit</span>
1026:     <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-node">&quot;trailing `#{non_digit}' in number&quot;</span>
1027:   <span class="ruby-keyword kw">end</span>
1028:   <span class="ruby-identifier">type</span> = <span class="ruby-constant">TkFLOAT</span>
1029:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[+-]/</span>
1030:     <span class="ruby-identifier">getc</span>
1031:   <span class="ruby-keyword kw">end</span>
1032:   <span class="ruby-identifier">allow_e</span> = <span class="ruby-keyword kw">false</span>
1033:   <span class="ruby-identifier">allow_point</span> = <span class="ruby-keyword kw">false</span>
1034:   <span class="ruby-identifier">non_digit</span> = <span class="ruby-identifier">ch</span>
1035:       <span class="ruby-keyword kw">else</span>
1036:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_digit</span>
1037:     <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-node">&quot;trailing `#{non_digit}' in number&quot;</span>
1038:   <span class="ruby-keyword kw">end</span>
1039:   <span class="ruby-identifier">ungetc</span>
1040:   <span class="ruby-keyword kw">break</span>
1041:       <span class="ruby-keyword kw">end</span>
1042:     <span class="ruby-keyword kw">end</span>
1043:     <span class="ruby-constant">Token</span>(<span class="ruby-identifier">type</span>)
1044:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002313">
                    
                    <a name="M002313"></a><b>identify_quotation</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002313_source')" id="l_M002313_source">show</a>
                        
                    </p>
                    <div id="M002313_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 931</span>
931:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_quotation</span>
932:     <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
933:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lt</span> = <span class="ruby-constant">PERCENT_LTYPE</span>[<span class="ruby-identifier">ch</span>]
934:       <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
935:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\W/</span>
936:       <span class="ruby-identifier">lt</span> = <span class="ruby-value str">&quot;\&quot;&quot;</span>
937:     <span class="ruby-keyword kw">else</span>
938:       <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-value str">&quot;unknown type of %string&quot;</span>
939:     <span class="ruby-keyword kw">end</span>
940: <span class="ruby-comment cmt">#     if ch !~ /\W/</span>
941: <span class="ruby-comment cmt">#       ungetc</span>
942: <span class="ruby-comment cmt">#       next</span>
943: <span class="ruby-comment cmt">#     end</span>
944:     <span class="ruby-comment cmt">#@ltype = lt</span>
945:     <span class="ruby-ivar">@quoted</span> = <span class="ruby-identifier">ch</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@quoted</span> = <span class="ruby-constant">PERCENT_PAREN</span>[<span class="ruby-identifier">ch</span>]
946:     <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">lt</span>, <span class="ruby-ivar">@quoted</span>)
947:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003895">
                    
                    <a name="M003895"></a><b>identify_quotation</b>(initial_char)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003895_source')" id="l_M003895_source">show</a>
                        
                    </p>
                    <div id="M003895_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1123</span>
1123:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_quotation</span>(<span class="ruby-identifier">initial_char</span>)
1124:     <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1125:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lt</span> = <span class="ruby-constant">PERCENT_LTYPE</span>[<span class="ruby-identifier">ch</span>]
1126:       <span class="ruby-identifier">initial_char</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">ch</span>
1127:       <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1128:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\W/</span>
1129:       <span class="ruby-identifier">lt</span> = <span class="ruby-value str">&quot;\&quot;&quot;</span>
1130:     <span class="ruby-keyword kw">else</span>
1131:       <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">fail</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-node">&quot;unknown type of %string ('#{ch}')&quot;</span>
1132:     <span class="ruby-keyword kw">end</span>
1133: <span class="ruby-comment cmt">#     if ch !~ /\W/</span>
1134: <span class="ruby-comment cmt">#       ungetc</span>
1135: <span class="ruby-comment cmt">#       next</span>
1136: <span class="ruby-comment cmt">#     end</span>
1137:     <span class="ruby-comment cmt">#@ltype = lt</span>
1138:     <span class="ruby-ivar">@quoted</span> = <span class="ruby-identifier">ch</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@quoted</span> = <span class="ruby-constant">PERCENT_PAREN</span>[<span class="ruby-identifier">ch</span>]
1139:     <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">lt</span>, <span class="ruby-ivar">@quoted</span>, <span class="ruby-identifier">ch</span>, <span class="ruby-identifier">initial_char</span>)
1140:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003900">
                    
                    <a name="M003900"></a><b>identify_string</b>(ltype, quoted = ltype, opener=nil, initial_char = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003900_source')" id="l_M003900_source">show</a>
                        
                    </p>
                    <div id="M003900_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1204</span>
1204:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">ltype</span>, <span class="ruby-identifier">quoted</span> = <span class="ruby-identifier">ltype</span>, <span class="ruby-identifier">opener</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">initial_char</span> = <span class="ruby-keyword kw">nil</span>)
1205:     <span class="ruby-ivar">@ltype</span> = <span class="ruby-identifier">ltype</span>
1206:     <span class="ruby-ivar">@quoted</span> = <span class="ruby-identifier">quoted</span>
1207:     <span class="ruby-identifier">subtype</span> = <span class="ruby-keyword kw">nil</span>
1208: 
1209:     <span class="ruby-identifier">str</span> = <span class="ruby-value str">&quot;&quot;</span>
1210:     <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">initial_char</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">initial_char</span>
1211:     <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">opener</span><span class="ruby-operator">||</span><span class="ruby-identifier">quoted</span>)
1212: 
1213:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1214:     <span class="ruby-keyword kw">begin</span>
1215:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span> 
1216:   <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1217:   <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@quoted</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">ch</span> 
1218:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1219:             <span class="ruby-keyword kw">break</span>
1220:           <span class="ruby-keyword kw">else</span>
1221:             <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1222:           <span class="ruby-keyword kw">end</span>
1223:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">opener</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">ch</span>
1224:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1225:   <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@ltype</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;'&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@ltype</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;]&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;#&quot;</span>
1226:           <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1227:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;{&quot;</span>
1228:             <span class="ruby-identifier">subtype</span> = <span class="ruby-keyword kw">true</span>
1229:             <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">skip_inner_expression</span>
1230:           <span class="ruby-keyword kw">else</span>
1231:             <span class="ruby-identifier">ungetc</span>(<span class="ruby-identifier">ch</span>)
1232:           <span class="ruby-keyword kw">end</span>
1233:   <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'\\'</span> <span class="ruby-comment cmt">#'</span>
1234:     <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">read_escape</span>
1235:   <span class="ruby-keyword kw">end</span>
1236:       <span class="ruby-keyword kw">end</span>
1237:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@ltype</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;/&quot;</span>
1238:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/i|o|n|e|s/</span>
1239:     <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">getc</span>
1240:   <span class="ruby-keyword kw">end</span>
1241:       <span class="ruby-keyword kw">end</span>
1242:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">subtype</span>
1243:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">DLtype2Token</span>[<span class="ruby-identifier">ltype</span>], <span class="ruby-identifier">str</span>)
1244:       <span class="ruby-keyword kw">else</span>
1245:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">Ltype2Token</span>[<span class="ruby-identifier">ltype</span>], <span class="ruby-identifier">str</span>)
1246:       <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">str</span>)
1247:     <span class="ruby-keyword kw">ensure</span>
1248:       <span class="ruby-ivar">@ltype</span> = <span class="ruby-keyword kw">nil</span>
1249:       <span class="ruby-ivar">@quoted</span> = <span class="ruby-keyword kw">nil</span>
1250:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
1251:     <span class="ruby-keyword kw">end</span>
1252:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002317">
                    
                    <a name="M002317"></a><b>identify_string</b>(ltype, quoted = ltype)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002317_source')" id="l_M002317_source">show</a>
                        
                    </p>
                    <div id="M002317_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 1046</span>
1046:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">ltype</span>, <span class="ruby-identifier">quoted</span> = <span class="ruby-identifier">ltype</span>)
1047:     <span class="ruby-ivar">@ltype</span> = <span class="ruby-identifier">ltype</span>
1048:     <span class="ruby-ivar">@quoted</span> = <span class="ruby-identifier">quoted</span>
1049:     <span class="ruby-identifier">subtype</span> = <span class="ruby-keyword kw">nil</span>
1050:     <span class="ruby-keyword kw">begin</span>
1051:       <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1052:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1053:   <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@quoted</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">ch</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1054:     <span class="ruby-keyword kw">break</span>
1055:   <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@ltype</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;'&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@ltype</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;]&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@ltype</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;#&quot;</span>
1056:     <span class="ruby-identifier">subtype</span> = <span class="ruby-keyword kw">true</span>
1057:   <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'\\'</span> <span class="ruby-comment cmt">#'</span>
1058:     <span class="ruby-identifier">read_escape</span>
1059:   <span class="ruby-keyword kw">end</span>
1060:   <span class="ruby-keyword kw">if</span> <span class="ruby-constant">PERCENT_PAREN</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@quoted</span>) 
1061:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">PERCENT_PAREN</span>[<span class="ruby-identifier">ch</span>] <span class="ruby-operator">==</span> <span class="ruby-ivar">@quoted</span>
1062:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1063:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@quoted</span>
1064:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1065:     <span class="ruby-keyword kw">end</span>
1066:   <span class="ruby-keyword kw">end</span>
1067:       <span class="ruby-keyword kw">end</span>
1068:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@ltype</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;/&quot;</span>
1069:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/i|m|x|o|e|s|u|n/</span>
1070:     <span class="ruby-identifier">getc</span>
1071:   <span class="ruby-keyword kw">end</span>
1072:       <span class="ruby-keyword kw">end</span>
1073:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">subtype</span>
1074:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">DLtype2Token</span>[<span class="ruby-identifier">ltype</span>])
1075:       <span class="ruby-keyword kw">else</span>
1076:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">Ltype2Token</span>[<span class="ruby-identifier">ltype</span>])
1077:       <span class="ruby-keyword kw">end</span>
1078:     <span class="ruby-keyword kw">ensure</span>
1079:       <span class="ruby-ivar">@ltype</span> = <span class="ruby-keyword kw">nil</span>
1080:       <span class="ruby-ivar">@quoted</span> = <span class="ruby-keyword kw">nil</span>
1081:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
1082:     <span class="ruby-keyword kw">end</span>
1083:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002289">
                    
                    <a name="M002289"></a><b>initialize_input</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002289_source')" id="l_M002289_source">show</a>
                        
                    </p>
                    <div id="M002289_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 211</span>
211:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_input</span>
212:     <span class="ruby-ivar">@ltype</span> = <span class="ruby-keyword kw">nil</span>
213:     <span class="ruby-ivar">@quoted</span> = <span class="ruby-keyword kw">nil</span>
214:     <span class="ruby-ivar">@indent</span> = <span class="ruby-value">0</span>
215:     <span class="ruby-ivar">@indent_stack</span> = []
216:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
217:     <span class="ruby-ivar">@space_seen</span> = <span class="ruby-keyword kw">false</span>
218:     <span class="ruby-ivar">@here_header</span> = <span class="ruby-keyword kw">false</span>
219:     
220:     <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>
221:     <span class="ruby-identifier">prompt</span>
222: 
223:     <span class="ruby-ivar">@line</span> = <span class="ruby-value str">&quot;&quot;</span>
224:     <span class="ruby-ivar">@exp_line_no</span> = <span class="ruby-ivar">@line_no</span>
225:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003874">
                    
                    <a name="M003874"></a><b>lex</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003874_source')" id="l_M003874_source">show</a>
                        
                    </p>
                    <div id="M003874_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 519</span>
519:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lex</span>
520:     <span class="ruby-keyword kw">until</span> (((<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">token</span>).<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkNL</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkEND_OF_SCRIPT</span>)) <span class="ruby-operator">&amp;&amp;</span>
521:        <span class="ruby-operator">!</span><span class="ruby-ivar">@continue</span> <span class="ruby-keyword kw">or</span>
522:        <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">nil?</span>)
523:     <span class="ruby-keyword kw">end</span>
524:     <span class="ruby-identifier">line</span> = <span class="ruby-identifier">get_read</span>
525: 
526:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkEND_OF_SCRIPT</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">nil?</span>
527:       <span class="ruby-keyword kw">nil</span>
528:     <span class="ruby-keyword kw">else</span>
529:       <span class="ruby-identifier">line</span>
530:     <span class="ruby-keyword kw">end</span>
531:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002291">
                    
                    <a name="M002291"></a><b>lex</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002291_source')" id="l_M002291_source">show</a>
                        
                    </p>
                    <div id="M002291_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 262</span>
262:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lex</span>
263:     <span class="ruby-keyword kw">until</span> (((<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">token</span>).<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkNL</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkEND_OF_SCRIPT</span>)) <span class="ruby-operator">&amp;&amp;</span>
264:        <span class="ruby-operator">!</span><span class="ruby-ivar">@continue</span> <span class="ruby-keyword kw">or</span>
265:        <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">nil?</span>)
266:       <span class="ruby-comment cmt">#p tk</span>
267:       <span class="ruby-comment cmt">#p @lex_state</span>
268:       <span class="ruby-comment cmt">#p self</span>
269:     <span class="ruby-keyword kw">end</span>
270:     <span class="ruby-identifier">line</span> = <span class="ruby-identifier">get_readed</span>
271:     <span class="ruby-comment cmt">#      print self.inspect</span>
272:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkEND_OF_SCRIPT</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">nil?</span>
273:       <span class="ruby-keyword kw">nil</span>
274:     <span class="ruby-keyword kw">else</span>
275:       <span class="ruby-identifier">line</span>
276:     <span class="ruby-keyword kw">end</span>
277:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002293">
                    
                    <a name="M002293"></a><b>lex_init</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002293_source')" id="l_M002293_source">show</a>
                        
                    </p>
                    <div id="M002293_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 339</span>
339:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lex_init</span>()
340:     <span class="ruby-ivar">@OP</span> = <span class="ruby-constant">IRB</span><span class="ruby-operator">::</span><span class="ruby-constant">SLex</span>.<span class="ruby-identifier">new</span>
341:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;\0&quot;</span>, <span class="ruby-value str">&quot;\004&quot;</span>, <span class="ruby-value str">&quot;\032&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
342:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkEND_OF_SCRIPT</span>)
343:     <span class="ruby-keyword kw">end</span>
344: 
345:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot; &quot;</span>, <span class="ruby-value str">&quot;\t&quot;</span>, <span class="ruby-value str">&quot;\f&quot;</span>, <span class="ruby-value str">&quot;\r&quot;</span>, <span class="ruby-value str">&quot;\13&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
346:       <span class="ruby-ivar">@space_seen</span> = <span class="ruby-keyword kw">true</span>
347:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">getc</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[ \t\f\r\13]/</span>; <span class="ruby-keyword kw">end</span>
348:       <span class="ruby-identifier">ungetc</span>
349:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSPACE</span>)
350:     <span class="ruby-keyword kw">end</span>
351: 
352:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;#&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
353:       <span class="ruby-identifier">identify_comment</span>
354:     <span class="ruby-keyword kw">end</span>
355: 
356:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;=begin&quot;</span>,
357:      <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@prev_char_no</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s/</span>}) <span class="ruby-keyword kw">do</span> 
358:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
359:       <span class="ruby-ivar">@ltype</span> = <span class="ruby-value str">&quot;=&quot;</span>
360:       <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">getc</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>; <span class="ruby-keyword kw">end</span>
361:       <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">peek_equal?</span>(<span class="ruby-value str">&quot;=end&quot;</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">4</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s/</span>
362:   <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">getc</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>; <span class="ruby-keyword kw">end</span>
363:       <span class="ruby-keyword kw">end</span>
364:       <span class="ruby-identifier">gets</span>
365:       <span class="ruby-ivar">@ltype</span> = <span class="ruby-keyword kw">nil</span>
366:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkRD_COMMENT</span>)
367:     <span class="ruby-keyword kw">end</span>
368: 
369:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
370:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\\n\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
371:       <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@lex_state</span>
372:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">EXPR_BEG</span>, <span class="ruby-constant">EXPR_FNAME</span>, <span class="ruby-constant">EXPR_DOT</span>
373:   <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">true</span>
374:       <span class="ruby-keyword kw">else</span>
375:   <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>
376:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
377:   <span class="ruby-keyword kw">until</span> (<span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> 
378:          [<span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkLBRACK</span>, <span class="ruby-constant">TkLBRACE</span>, 
379:      <span class="ruby-constant">TkfLPAREN</span>, <span class="ruby-constant">TkfLBRACK</span>, <span class="ruby-constant">TkfLBRACE</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">last</span>))
380:     <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">pop</span>
381:   <span class="ruby-keyword kw">end</span>
382:       <span class="ruby-keyword kw">end</span>
383:       <span class="ruby-ivar">@here_header</span> = <span class="ruby-keyword kw">false</span>
384:       <span class="ruby-ivar">@here_readed</span> = []
385:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkNL</span>)
386:     <span class="ruby-keyword kw">end</span>
387: 
388:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;*&quot;</span>, <span class="ruby-value str">&quot;**&quot;</span>,  
389:       <span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-value str">&quot;==&quot;</span>, <span class="ruby-value str">&quot;===&quot;</span>, 
390:       <span class="ruby-value str">&quot;=~&quot;</span>, <span class="ruby-value str">&quot;&lt;=&gt;&quot;</span>,  
391:       <span class="ruby-value str">&quot;&lt;&quot;</span>, <span class="ruby-value str">&quot;&lt;=&quot;</span>,
392:       <span class="ruby-value str">&quot;&gt;&quot;</span>, <span class="ruby-value str">&quot;&gt;=&quot;</span>, <span class="ruby-value str">&quot;&gt;&gt;&quot;</span>) <span class="ruby-keyword kw">do</span>
393:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
394:       <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@lex_state</span>
395:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">EXPR_FNAME</span>, <span class="ruby-constant">EXPR_DOT</span>
396:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_ARG</span>
397:       <span class="ruby-keyword kw">else</span>
398:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
399:       <span class="ruby-keyword kw">end</span>
400:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
401:     <span class="ruby-keyword kw">end</span>
402: 
403:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;!&quot;</span>, <span class="ruby-value str">&quot;!=&quot;</span>, <span class="ruby-value str">&quot;!~&quot;</span>) <span class="ruby-keyword kw">do</span>
404:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
405:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
406:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
407:     <span class="ruby-keyword kw">end</span>
408: 
409:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;&lt;&lt;&quot;</span>) <span class="ruby-keyword kw">do</span>
410:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
411:       <span class="ruby-identifier">tk</span> = <span class="ruby-keyword kw">nil</span>
412:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_CLASS</span> <span class="ruby-operator">&amp;&amp;</span>
413:     (<span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@space_seen</span>)
414:   <span class="ruby-identifier">c</span> = <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>)
415:   <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\S/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-regexp re">/[&quot;'`]/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">||</span> <span class="ruby-regexp re">/[\w_]/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;-&quot;</span>)
416:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">identify_here_document</span>
417:   <span class="ruby-keyword kw">end</span>
418:       <span class="ruby-keyword kw">end</span>
419:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tk</span>
420:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
421:   <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@lex_state</span>
422:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">EXPR_FNAME</span>, <span class="ruby-constant">EXPR_DOT</span>
423:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_ARG</span>
424:   <span class="ruby-keyword kw">else</span>
425:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
426:   <span class="ruby-keyword kw">end</span>
427:       <span class="ruby-keyword kw">end</span>
428:       <span class="ruby-identifier">tk</span>
429:     <span class="ruby-keyword kw">end</span>
430: 
431:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;'&quot;</span>, <span class="ruby-value str">'&quot;'</span>) <span class="ruby-keyword kw">do</span>
432:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
433:       <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">op</span>)
434:     <span class="ruby-keyword kw">end</span>
435: 
436:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;`&quot;</span>) <span class="ruby-keyword kw">do</span>
437:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
438:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>
439:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
440:   <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
441:       <span class="ruby-keyword kw">else</span>
442:   <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">op</span>)
443:       <span class="ruby-keyword kw">end</span>
444:     <span class="ruby-keyword kw">end</span>
445: 
446:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">'?'</span>) <span class="ruby-keyword kw">do</span>
447:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
448:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span>
449:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
450:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkQUESTION</span>)
451:       <span class="ruby-keyword kw">else</span>
452:   <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
453:   <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s/</span>
454:     <span class="ruby-identifier">ungetc</span>
455:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>;
456:     <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkQUESTION</span>)
457:   <span class="ruby-keyword kw">else</span>
458:     <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'\\'</span>) 
459:       <span class="ruby-identifier">read_escape</span>
460:     <span class="ruby-keyword kw">end</span>
461:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
462:     <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkINTEGER</span>)
463:   <span class="ruby-keyword kw">end</span>
464:       <span class="ruby-keyword kw">end</span>
465:     <span class="ruby-keyword kw">end</span>
466: 
467:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>, <span class="ruby-value str">&quot;&amp;&amp;&quot;</span>, <span class="ruby-value str">&quot;|&quot;</span>, <span class="ruby-value str">&quot;||&quot;</span>) <span class="ruby-keyword kw">do</span>
468:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
469:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
470:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
471:     <span class="ruby-keyword kw">end</span>
472:     
473:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;+=&quot;</span>, <span class="ruby-value str">&quot;-=&quot;</span>, <span class="ruby-value str">&quot;*=&quot;</span>, <span class="ruby-value str">&quot;**=&quot;</span>, 
474:       <span class="ruby-value str">&quot;&amp;=&quot;</span>, <span class="ruby-value str">&quot;|=&quot;</span>, <span class="ruby-value str">&quot;^=&quot;</span>, <span class="ruby-value str">&quot;&lt;&lt;=&quot;</span>, <span class="ruby-value str">&quot;&gt;&gt;=&quot;</span>, <span class="ruby-value str">&quot;||=&quot;</span>, <span class="ruby-value str">&quot;&amp;&amp;=&quot;</span>) <span class="ruby-keyword kw">do</span>
475:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
476:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
477:       <span class="ruby-identifier">op</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^(.*)=$/</span>
478:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkOPASGN</span>, <span class="ruby-identifier">$1</span>)
479:     <span class="ruby-keyword kw">end</span>
480: 
481:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;+@&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span>
482:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
483:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_ARG</span>
484:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
485:     <span class="ruby-keyword kw">end</span>
486: 
487:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;-@&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span>
488:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
489:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_ARG</span>
490:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
491:     <span class="ruby-keyword kw">end</span>
492: 
493:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;+&quot;</span>, <span class="ruby-value str">&quot;-&quot;</span>) <span class="ruby-keyword kw">do</span>
494:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
495:       <span class="ruby-identifier">catch</span>(<span class="ruby-identifier">:RET</span>) <span class="ruby-keyword kw">do</span>
496:   <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span>
497:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@space_seen</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
498:       <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:RET</span>, <span class="ruby-identifier">identify_number</span>
499:     <span class="ruby-keyword kw">else</span>
500:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
501:     <span class="ruby-keyword kw">end</span>
502:   <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
503:     <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:RET</span>, <span class="ruby-identifier">identify_number</span>
504:   <span class="ruby-keyword kw">else</span>
505:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
506:   <span class="ruby-keyword kw">end</span>
507:   <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
508:       <span class="ruby-keyword kw">end</span>
509:     <span class="ruby-keyword kw">end</span>
510: 
511:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;.&quot;</span>) <span class="ruby-keyword kw">do</span>
512:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
513:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
514:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
515:   <span class="ruby-identifier">ungetc</span>
516:   <span class="ruby-identifier">identify_number</span>
517:       <span class="ruby-keyword kw">else</span>
518:   <span class="ruby-comment cmt"># for &quot;obj.if&quot; etc.</span>
519:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_DOT</span>
520:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkDOT</span>)
521:       <span class="ruby-keyword kw">end</span>
522:     <span class="ruby-keyword kw">end</span>
523: 
524:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;..&quot;</span>, <span class="ruby-value str">&quot;...&quot;</span>) <span class="ruby-keyword kw">do</span>
525:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
526:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
527:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
528:     <span class="ruby-keyword kw">end</span>
529: 
530:     <span class="ruby-identifier">lex_int2</span>
531:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003876">
                    
                    <a name="M003876"></a><b>lex_init</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003876_source')" id="l_M003876_source">show</a>
                        
                    </p>
                    <div id="M003876_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 589</span>
589:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lex_init</span>()
590:     <span class="ruby-ivar">@OP</span> = <span class="ruby-constant">SLex</span>.<span class="ruby-identifier">new</span>
591:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;\0&quot;</span>, <span class="ruby-value str">&quot;\004&quot;</span>, <span class="ruby-value str">&quot;\032&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
592:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkEND_OF_SCRIPT</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">chars</span>)
593:     <span class="ruby-keyword kw">end</span>
594: 
595:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot; &quot;</span>, <span class="ruby-value str">&quot;\t&quot;</span>, <span class="ruby-value str">&quot;\f&quot;</span>, <span class="ruby-value str">&quot;\r&quot;</span>, <span class="ruby-value str">&quot;\13&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
596:       <span class="ruby-ivar">@space_seen</span> = <span class="ruby-constant">TRUE</span>
597:       <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[ \t\f\r\13]/</span>
598:         <span class="ruby-identifier">chars</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
599:       <span class="ruby-keyword kw">end</span>
600:       <span class="ruby-identifier">ungetc</span>
601:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSPACE</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">chars</span>)
602:     <span class="ruby-keyword kw">end</span>
603: 
604:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;#&quot;</span>) <span class="ruby-keyword kw">do</span>
605:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
606:       <span class="ruby-identifier">identify_comment</span>
607:     <span class="ruby-keyword kw">end</span>
608: 
609:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;=begin&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-ivar">@prev_char_no</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s/</span>}) <span class="ruby-keyword kw">do</span>
610:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
611:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">op</span>
612:       <span class="ruby-ivar">@ltype</span> = <span class="ruby-value str">&quot;=&quot;</span>
613: 
614: 
615:       <span class="ruby-keyword kw">begin</span>
616:         <span class="ruby-identifier">line</span> = <span class="ruby-value str">&quot;&quot;</span>
617:         <span class="ruby-keyword kw">begin</span>
618:           <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
619:           <span class="ruby-identifier">line</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
620:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
621:         <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
622:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^=end/</span>
623: 
624:       <span class="ruby-identifier">ungetc</span>
625: 
626:       <span class="ruby-ivar">@ltype</span> = <span class="ruby-keyword kw">nil</span>
627: 
628:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A=begin\s+rdoc/i</span>
629:         <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\A=begin.*\n/</span>, <span class="ruby-value str">''</span>)
630:         <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^=end.*/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">''</span>)
631:         <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOMMENT</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">str</span>)
632:       <span class="ruby-keyword kw">else</span>
633:         <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkRD_COMMENT</span>)<span class="ruby-comment cmt">#.set_text(str)</span>
634:       <span class="ruby-keyword kw">end</span>
635:     <span class="ruby-keyword kw">end</span>
636: 
637:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-keyword kw">do</span>
638:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\\n\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
639:       <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@lex_state</span>
640:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">EXPR_BEG</span>, <span class="ruby-constant">EXPR_FNAME</span>, <span class="ruby-constant">EXPR_DOT</span>
641:   <span class="ruby-ivar">@continue</span> = <span class="ruby-constant">TRUE</span>
642:       <span class="ruby-keyword kw">else</span>
643:   <span class="ruby-ivar">@continue</span> = <span class="ruby-constant">FALSE</span>
644:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
645:       <span class="ruby-keyword kw">end</span>
646:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkNL</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
647:     <span class="ruby-keyword kw">end</span>
648: 
649:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;*&quot;</span>, <span class="ruby-value str">&quot;**&quot;</span>,  
650:       <span class="ruby-value str">&quot;!&quot;</span>, <span class="ruby-value str">&quot;!=&quot;</span>, <span class="ruby-value str">&quot;!~&quot;</span>,
651:       <span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-value str">&quot;==&quot;</span>, <span class="ruby-value str">&quot;===&quot;</span>, 
652:       <span class="ruby-value str">&quot;=~&quot;</span>, <span class="ruby-value str">&quot;&lt;=&gt;&quot;</span>,  
653:       <span class="ruby-value str">&quot;&lt;&quot;</span>, <span class="ruby-value str">&quot;&lt;=&quot;</span>,
654:       <span class="ruby-value str">&quot;&gt;&quot;</span>, <span class="ruby-value str">&quot;&gt;=&quot;</span>, <span class="ruby-value str">&quot;&gt;&gt;&quot;</span>) <span class="ruby-keyword kw">do</span>
655:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
656:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
657:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
658:     <span class="ruby-keyword kw">end</span>
659: 
660:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;&lt;&lt;&quot;</span>) <span class="ruby-keyword kw">do</span>
661:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
662:       <span class="ruby-identifier">tk</span> = <span class="ruby-keyword kw">nil</span>
663:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_CLASS</span> <span class="ruby-operator">&amp;&amp;</span>
664:     (<span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@space_seen</span>)
665:   <span class="ruby-identifier">c</span> = <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>)
666:   <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/[-\w_\&quot;\'\`]/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">c</span>
667:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">identify_here_document</span>
668:   <span class="ruby-keyword kw">end</span>
669:       <span class="ruby-keyword kw">end</span>
670:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tk</span>
671:         <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
672:         <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
673:       <span class="ruby-keyword kw">end</span>
674:       <span class="ruby-identifier">tk</span>
675:     <span class="ruby-keyword kw">end</span>
676: 
677:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;'&quot;</span>, <span class="ruby-value str">'&quot;'</span>) <span class="ruby-keyword kw">do</span>
678:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
679:       <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">op</span>)
680:     <span class="ruby-keyword kw">end</span>
681: 
682:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;`&quot;</span>) <span class="ruby-keyword kw">do</span>
683:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
684:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>
685:   <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
686:       <span class="ruby-keyword kw">else</span>
687:   <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">op</span>)
688:       <span class="ruby-keyword kw">end</span>
689:     <span class="ruby-keyword kw">end</span>
690: 
691:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">'?'</span>) <span class="ruby-keyword kw">do</span>
692:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
693:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span>
694:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
695:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkQUESTION</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
696:       <span class="ruby-keyword kw">else</span>
697:   <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
698:   <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\s/</span>
699:     <span class="ruby-identifier">ungetc</span>
700:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>;
701:     <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkQUESTION</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
702:   <span class="ruby-keyword kw">else</span>
703:           <span class="ruby-identifier">str</span> = <span class="ruby-identifier">op</span>
704:           <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
705:     <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'\\'</span>) <span class="ruby-comment cmt">#'</span>
706:       <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">read_escape</span>
707:     <span class="ruby-keyword kw">end</span>
708:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
709:     <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkINTEGER</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">str</span>)
710:   <span class="ruby-keyword kw">end</span>
711:       <span class="ruby-keyword kw">end</span>
712:     <span class="ruby-keyword kw">end</span>
713: 
714:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>, <span class="ruby-value str">&quot;&amp;&amp;&quot;</span>, <span class="ruby-value str">&quot;|&quot;</span>, <span class="ruby-value str">&quot;||&quot;</span>) <span class="ruby-keyword kw">do</span>
715:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
716:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
717:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
718:     <span class="ruby-keyword kw">end</span>
719:     
720:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;+=&quot;</span>, <span class="ruby-value str">&quot;-=&quot;</span>, <span class="ruby-value str">&quot;*=&quot;</span>, <span class="ruby-value str">&quot;**=&quot;</span>, 
721:       <span class="ruby-value str">&quot;&amp;=&quot;</span>, <span class="ruby-value str">&quot;|=&quot;</span>, <span class="ruby-value str">&quot;^=&quot;</span>, <span class="ruby-value str">&quot;&lt;&lt;=&quot;</span>, <span class="ruby-value str">&quot;&gt;&gt;=&quot;</span>, <span class="ruby-value str">&quot;||=&quot;</span>, <span class="ruby-value str">&quot;&amp;&amp;=&quot;</span>) <span class="ruby-keyword kw">do</span>
722:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
723:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
724:       <span class="ruby-identifier">op</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^(.*)=$/</span>
725:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkOPASGN</span>, <span class="ruby-identifier">$1</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
726:     <span class="ruby-keyword kw">end</span>
727: 
728:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;+@&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
729:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkUPLUS</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
730:     <span class="ruby-keyword kw">end</span>
731: 
732:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;-@&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
733:       <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkUMINUS</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
734:     <span class="ruby-keyword kw">end</span>
735: 
736:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;+&quot;</span>, <span class="ruby-value str">&quot;-&quot;</span>) <span class="ruby-keyword kw">do</span>
737:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
738:       <span class="ruby-identifier">catch</span>(<span class="ruby-identifier">:RET</span>) <span class="ruby-keyword kw">do</span>
739:   <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span>
740:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@space_seen</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
741:       <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:RET</span>, <span class="ruby-identifier">identify_number</span>(<span class="ruby-identifier">op</span>)
742:     <span class="ruby-keyword kw">else</span>
743:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
744:     <span class="ruby-keyword kw">end</span>
745:   <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
746:     <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:RET</span>, <span class="ruby-identifier">identify_number</span>(<span class="ruby-identifier">op</span>)
747:   <span class="ruby-keyword kw">else</span>
748:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
749:   <span class="ruby-keyword kw">end</span>
750:   <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
751:       <span class="ruby-keyword kw">end</span>
752:     <span class="ruby-keyword kw">end</span>
753: 
754:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;.&quot;</span>) <span class="ruby-keyword kw">do</span>
755:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
756:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
757:   <span class="ruby-identifier">ungetc</span>
758:   <span class="ruby-identifier">identify_number</span>(<span class="ruby-value str">&quot;&quot;</span>)
759:       <span class="ruby-keyword kw">else</span>
760:   <span class="ruby-comment cmt"># for obj.if</span>
761:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_DOT</span>
762:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkDOT</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;.&quot;</span>)
763:       <span class="ruby-keyword kw">end</span>
764:     <span class="ruby-keyword kw">end</span>
765: 
766:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;..&quot;</span>, <span class="ruby-value str">&quot;...&quot;</span>) <span class="ruby-keyword kw">do</span>
767:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
768:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
769:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
770:     <span class="ruby-keyword kw">end</span>
771: 
772:     <span class="ruby-identifier">lex_int2</span>
773:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003881">
                    
                    <a name="M003881"></a><b>lex_int2</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003881_source')" id="l_M003881_source">show</a>
                        
                    </p>
                    <div id="M003881_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 775</span>
775:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lex_int2</span>
776:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;]&quot;</span>, <span class="ruby-value str">&quot;}&quot;</span>, <span class="ruby-value str">&quot;)&quot;</span>) <span class="ruby-keyword kw">do</span>
777:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
778:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
779:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
780:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
781:     <span class="ruby-keyword kw">end</span>
782: 
783:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;:&quot;</span>) <span class="ruby-keyword kw">do</span>
784:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s/</span>
785:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
786:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOLON</span>)
787:       <span class="ruby-keyword kw">else</span>
788:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span>;
789:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSYMBEG</span>)
790:       <span class="ruby-keyword kw">end</span>
791:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;:&quot;</span>)
792:     <span class="ruby-keyword kw">end</span>
793: 
794:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;::&quot;</span>) <span class="ruby-keyword kw">do</span>
795: <span class="ruby-comment cmt">#      p @lex_state.id2name, @space_seen</span>
796:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@space_seen</span>
797:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
798:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOLON3</span>)
799:       <span class="ruby-keyword kw">else</span>
800:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_DOT</span>
801:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOLON2</span>)
802:       <span class="ruby-keyword kw">end</span>
803:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;::&quot;</span>)
804:     <span class="ruby-keyword kw">end</span>
805: 
806:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;/&quot;</span>) <span class="ruby-keyword kw">do</span>
807:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
808:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_MID</span>
809:   <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">op</span>)
810:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">'='</span>
811:   <span class="ruby-identifier">getc</span>
812:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
813:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkOPASGN</span>, <span class="ruby-identifier">:/</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;/=&quot;</span>) <span class="ruby-comment cmt">#&quot;)</span>
814:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@space_seen</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\s/</span>
815:   <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">op</span>)
816:       <span class="ruby-keyword kw">else</span> 
817:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
818:         <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;/&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
819:       <span class="ruby-keyword kw">end</span>
820:     <span class="ruby-keyword kw">end</span>
821: 
822:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;^&quot;</span>) <span class="ruby-keyword kw">do</span>
823:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
824:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;^&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;^&quot;</span>)
825:     <span class="ruby-keyword kw">end</span>
826: 
827:     <span class="ruby-comment cmt">#       @OP.def_rules(&quot;^=&quot;) do</span>
828:     <span class="ruby-comment cmt">#   @lex_state = EXPR_BEG</span>
829:     <span class="ruby-comment cmt">#   Token(TkOPASGN, :^)</span>
830:     <span class="ruby-comment cmt">#       end</span>
831:     
832:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;,&quot;</span>, <span class="ruby-value str">&quot;;&quot;</span>) <span class="ruby-keyword kw">do</span>
833:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
834:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
835:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-identifier">op</span>)
836:     <span class="ruby-keyword kw">end</span>
837: 
838:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;~&quot;</span>) <span class="ruby-keyword kw">do</span>
839:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
840:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;~&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;~&quot;</span>)
841:     <span class="ruby-keyword kw">end</span>
842: 
843:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;~@&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span>
844:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
845:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;~&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;~@&quot;</span>)
846:     <span class="ruby-keyword kw">end</span>
847:     
848:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;(&quot;</span>) <span class="ruby-keyword kw">do</span>
849:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
850:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_MID</span>
851:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
852:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkfLPAREN</span>)
853:       <span class="ruby-keyword kw">else</span>
854:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
855:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkLPAREN</span>)
856:       <span class="ruby-keyword kw">end</span>
857:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;(&quot;</span>)
858:     <span class="ruby-keyword kw">end</span>
859: 
860:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;[]&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span>
861:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;[]&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;[]&quot;</span>)
862:     <span class="ruby-keyword kw">end</span>
863: 
864:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;[]=&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span>
865:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;[]=&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;[]=&quot;</span>)
866:     <span class="ruby-keyword kw">end</span>
867: 
868:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;[&quot;</span>) <span class="ruby-keyword kw">do</span>
869:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
870:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>
871:   <span class="ruby-identifier">t</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkfLBRACK</span>)
872:       <span class="ruby-keyword kw">else</span>
873:   <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_MID</span>
874:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkLBRACK</span>)
875:   <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@space_seen</span>
876:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkLBRACK</span>)
877:   <span class="ruby-keyword kw">else</span>
878:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkfLBRACK</span>)
879:   <span class="ruby-keyword kw">end</span>
880:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
881:       <span class="ruby-keyword kw">end</span>
882:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;[&quot;</span>)
883:     <span class="ruby-keyword kw">end</span>
884: 
885:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;{&quot;</span>) <span class="ruby-keyword kw">do</span>
886:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
887:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_ARG</span>
888:   <span class="ruby-identifier">t</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkLBRACE</span>)
889:       <span class="ruby-keyword kw">else</span>
890:   <span class="ruby-identifier">t</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkfLBRACE</span>)
891:       <span class="ruby-keyword kw">end</span>
892:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
893:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;{&quot;</span>)
894:     <span class="ruby-keyword kw">end</span>
895: 
896:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">'\\'</span>) <span class="ruby-keyword kw">do</span>   <span class="ruby-comment cmt">#'</span>
897:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">getc</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span> 
898:   <span class="ruby-ivar">@space_seen</span> = <span class="ruby-keyword kw">true</span>
899:   <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">true</span>
900:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSPACE</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;\\\n&quot;</span>)
901:       <span class="ruby-keyword kw">else</span> 
902:   <span class="ruby-identifier">ungetc</span>
903:   <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;\\&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;\\&quot;</span>)  <span class="ruby-comment cmt">#&quot;</span>
904:       <span class="ruby-keyword kw">end</span> 
905:     <span class="ruby-keyword kw">end</span> 
906: 
907:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">'%'</span>) <span class="ruby-keyword kw">do</span>
908:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
909:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_MID</span>
910:   <span class="ruby-identifier">identify_quotation</span>(<span class="ruby-value str">'%'</span>)
911:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">'='</span>
912:   <span class="ruby-identifier">getc</span>
913:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkOPASGN</span>, <span class="ruby-value str">&quot;%&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;%=&quot;</span>)
914:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@space_seen</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\s/</span>
915:   <span class="ruby-identifier">identify_quotation</span>(<span class="ruby-value str">'%'</span>)
916:       <span class="ruby-keyword kw">else</span>
917:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
918:   <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;%&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;%&quot;</span>)
919:       <span class="ruby-keyword kw">end</span>
920:     <span class="ruby-keyword kw">end</span>
921: 
922:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">'$'</span>) <span class="ruby-keyword kw">do</span>  <span class="ruby-comment cmt">#'</span>
923:       <span class="ruby-identifier">identify_gvar</span>
924:     <span class="ruby-keyword kw">end</span>
925: 
926:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">'@'</span>) <span class="ruby-keyword kw">do</span>
927:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[@\w_]/</span>
928:   <span class="ruby-identifier">ungetc</span>
929:   <span class="ruby-identifier">identify_identifier</span>
930:       <span class="ruby-keyword kw">else</span>
931:   <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;@&quot;</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;@&quot;</span>)
932:       <span class="ruby-keyword kw">end</span>
933:     <span class="ruby-keyword kw">end</span>
934: 
935:     <span class="ruby-comment cmt">#       @OP.def_rule(&quot;def&quot;, proc{|op, io| /\s/ =~ io.peek(0)}) do </span>
936:     <span class="ruby-comment cmt">#   |op, io|</span>
937:     <span class="ruby-comment cmt">#   @indent += 1</span>
938:     <span class="ruby-comment cmt">#   @lex_state = EXPR_FNAME</span>
939:     <span class="ruby-comment cmt"># # @lex_state = EXPR_END</span>
940:     <span class="ruby-comment cmt"># # until @rests[0] == &quot;\n&quot; or @rests[0] == &quot;;&quot;</span>
941:     <span class="ruby-comment cmt"># #   rests.shift</span>
942:     <span class="ruby-comment cmt"># # end</span>
943:     <span class="ruby-comment cmt">#       end</span>
944: 
945:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;__END__&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-ivar">@prev_char_no</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[\r\n]/</span>}) <span class="ruby-keyword kw">do</span>
946:       <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:eof</span>
947:     <span class="ruby-keyword kw">end</span>
948: 
949:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-keyword kw">do</span>
950:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
951:       <span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;MATCH: start %s: %s\n&quot;</span>, <span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
952:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
953:   <span class="ruby-identifier">t</span> = <span class="ruby-identifier">identify_number</span>(<span class="ruby-value str">&quot;&quot;</span>)
954:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[\w_]/</span>
955:   <span class="ruby-identifier">t</span> = <span class="ruby-identifier">identify_identifier</span>
956:       <span class="ruby-keyword kw">end</span>
957:       <span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;MATCH: end %s: %s\n&quot;</span>, <span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
958:       <span class="ruby-identifier">t</span>
959:     <span class="ruby-keyword kw">end</span>
960:     
961:     <span class="ruby-identifier">p</span> <span class="ruby-ivar">@OP</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
962:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002298">
                    
                    <a name="M002298"></a><b>lex_int2</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002298_source')" id="l_M002298_source">show</a>
                        
                    </p>
                    <div id="M002298_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 533</span>
533:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lex_int2</span>
534:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;]&quot;</span>, <span class="ruby-value str">&quot;}&quot;</span>, <span class="ruby-value str">&quot;)&quot;</span>) <span class="ruby-keyword kw">do</span>
535:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
536:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_END</span>
537:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
538:       <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">pop</span>
539:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
540:     <span class="ruby-keyword kw">end</span>
541: 
542:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;:&quot;</span>) <span class="ruby-keyword kw">do</span>
543:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
544:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s/</span>
545:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
546:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOLON</span>)
547:       <span class="ruby-keyword kw">else</span>
548:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span>;
549:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSYMBEG</span>)
550:       <span class="ruby-keyword kw">end</span>
551:     <span class="ruby-keyword kw">end</span>
552: 
553:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;::&quot;</span>) <span class="ruby-keyword kw">do</span>
554:        <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
555: <span class="ruby-comment cmt">#      p @lex_state.id2name, @space_seen</span>
556:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@space_seen</span>
557:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
558:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOLON3</span>)
559:       <span class="ruby-keyword kw">else</span>
560:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_DOT</span>
561:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkCOLON2</span>)
562:       <span class="ruby-keyword kw">end</span>
563:     <span class="ruby-keyword kw">end</span>
564: 
565:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;/&quot;</span>) <span class="ruby-keyword kw">do</span>
566:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
567:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_MID</span>
568:   <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">op</span>)
569:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">'='</span>
570:   <span class="ruby-identifier">getc</span>
571:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
572:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkOPASGN</span>, <span class="ruby-value str">&quot;/&quot;</span>) <span class="ruby-comment cmt">#/)</span>
573:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@space_seen</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\s/</span>
574:   <span class="ruby-identifier">identify_string</span>(<span class="ruby-identifier">op</span>)
575:       <span class="ruby-keyword kw">else</span> 
576:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
577:   <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;/&quot;</span>) <span class="ruby-comment cmt">#/)</span>
578:       <span class="ruby-keyword kw">end</span>
579:     <span class="ruby-keyword kw">end</span>
580: 
581:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;^&quot;</span>) <span class="ruby-keyword kw">do</span>
582:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
583:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
584:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;^&quot;</span>)
585:     <span class="ruby-keyword kw">end</span>
586: 
587:     <span class="ruby-comment cmt">#       @OP.def_rules(&quot;^=&quot;) do</span>
588:     <span class="ruby-comment cmt">#   @lex_state = EXPR_BEG</span>
589:     <span class="ruby-comment cmt">#   Token(OP_ASGN, :^)</span>
590:     <span class="ruby-comment cmt">#       end</span>
591:     
592:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;,&quot;</span>) <span class="ruby-keyword kw">do</span>
593:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
594:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
595:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
596:     <span class="ruby-keyword kw">end</span>
597: 
598:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rules</span>(<span class="ruby-value str">&quot;;&quot;</span>) <span class="ruby-keyword kw">do</span>
599:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
600:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
601:       <span class="ruby-keyword kw">until</span> (<span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> 
602:        [<span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkLBRACK</span>, <span class="ruby-constant">TkLBRACE</span>, 
603:          <span class="ruby-constant">TkfLPAREN</span>, <span class="ruby-constant">TkfLBRACK</span>, <span class="ruby-constant">TkfLBRACE</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">last</span>))
604:   <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">pop</span>
605:       <span class="ruby-keyword kw">end</span>
606:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">op</span>)
607:     <span class="ruby-keyword kw">end</span>
608: 
609:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;~&quot;</span>) <span class="ruby-keyword kw">do</span>
610:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
611:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
612:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;~&quot;</span>)
613:     <span class="ruby-keyword kw">end</span>
614: 
615:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;~@&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span>
616:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
617:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
618:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;~&quot;</span>)
619:     <span class="ruby-keyword kw">end</span>
620:     
621:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;(&quot;</span>) <span class="ruby-keyword kw">do</span>
622:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
623:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
624:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_MID</span>
625:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
626:   <span class="ruby-identifier">tk_c</span> = <span class="ruby-constant">TkfLPAREN</span>
627:       <span class="ruby-keyword kw">else</span>
628:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
629:   <span class="ruby-identifier">tk_c</span> = <span class="ruby-constant">TkLPAREN</span>
630:       <span class="ruby-keyword kw">end</span>
631:       <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk_c</span>
632:       <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-identifier">tk_c</span>)
633:     <span class="ruby-keyword kw">end</span>
634: 
635:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;[]&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span>
636:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
637:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_ARG</span>
638:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;[]&quot;</span>)
639:     <span class="ruby-keyword kw">end</span>
640: 
641:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;[]=&quot;</span>, <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>}) <span class="ruby-keyword kw">do</span>
642:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
643:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_ARG</span>
644:       <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;[]=&quot;</span>)
645:     <span class="ruby-keyword kw">end</span>
646: 
647:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;[&quot;</span>) <span class="ruby-keyword kw">do</span>
648:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
649:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
650:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_FNAME</span>
651:   <span class="ruby-identifier">tk_c</span> = <span class="ruby-constant">TkfLBRACK</span>
652:       <span class="ruby-keyword kw">else</span>
653:   <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_MID</span>
654:     <span class="ruby-identifier">tk_c</span> = <span class="ruby-constant">TkLBRACK</span>
655:   <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@space_seen</span>
656:     <span class="ruby-identifier">tk_c</span> = <span class="ruby-constant">TkLBRACK</span>
657:   <span class="ruby-keyword kw">else</span>
658:     <span class="ruby-identifier">tk_c</span> = <span class="ruby-constant">TkfLBRACK</span>
659:   <span class="ruby-keyword kw">end</span>
660:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
661:       <span class="ruby-keyword kw">end</span>
662:       <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk_c</span>
663:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">tk_c</span>)
664:     <span class="ruby-keyword kw">end</span>
665: 
666:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;{&quot;</span>) <span class="ruby-keyword kw">do</span>
667:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
668:       <span class="ruby-ivar">@indent</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
669:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">EXPR_ARG</span>
670:   <span class="ruby-identifier">tk_c</span> = <span class="ruby-constant">TkLBRACE</span>
671:       <span class="ruby-keyword kw">else</span>
672:   <span class="ruby-identifier">tk_c</span> = <span class="ruby-constant">TkfLBRACE</span>
673:       <span class="ruby-keyword kw">end</span>
674:       <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
675:       <span class="ruby-ivar">@indent_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk_c</span>
676:       <span class="ruby-constant">Token</span>(<span class="ruby-identifier">tk_c</span>)
677:     <span class="ruby-keyword kw">end</span>
678: 
679:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">'\\'</span>) <span class="ruby-keyword kw">do</span>
680:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
681:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">getc</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
682:   <span class="ruby-ivar">@space_seen</span> = <span class="ruby-keyword kw">true</span>
683:   <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">true</span>
684:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSPACE</span>)
685:       <span class="ruby-keyword kw">else</span>
686:   <span class="ruby-identifier">ungetc</span>
687:   <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;\\&quot;</span>)
688:       <span class="ruby-keyword kw">end</span>
689:     <span class="ruby-keyword kw">end</span>
690: 
691:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">'%'</span>) <span class="ruby-keyword kw">do</span>
692:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
693:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_BEG</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_MID</span>
694:   <span class="ruby-identifier">identify_quotation</span>
695:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">'='</span>
696:   <span class="ruby-identifier">getc</span>
697:   <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkOPASGN</span>, <span class="ruby-identifier">:%</span>)
698:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_ARG</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@space_seen</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\s/</span>
699:   <span class="ruby-identifier">identify_quotation</span>
700:       <span class="ruby-keyword kw">else</span>
701:   <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
702:   <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;%&quot;</span>) <span class="ruby-comment cmt">#))</span>
703:       <span class="ruby-keyword kw">end</span>
704:     <span class="ruby-keyword kw">end</span>
705: 
706:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">'$'</span>) <span class="ruby-keyword kw">do</span>
707:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
708:       <span class="ruby-identifier">identify_gvar</span>
709:     <span class="ruby-keyword kw">end</span>
710: 
711:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">'@'</span>) <span class="ruby-keyword kw">do</span>
712:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
713:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[\w_@]/</span>
714:   <span class="ruby-identifier">ungetc</span>
715:   <span class="ruby-identifier">identify_identifier</span>
716:       <span class="ruby-keyword kw">else</span>
717:   <span class="ruby-constant">Token</span>(<span class="ruby-value str">&quot;@&quot;</span>)
718:       <span class="ruby-keyword kw">end</span>
719:     <span class="ruby-keyword kw">end</span>
720: 
721:     <span class="ruby-comment cmt">#       @OP.def_rule(&quot;def&quot;, proc{|op, io| /\s/ =~ io.peek(0)}) do </span>
722:     <span class="ruby-comment cmt">#   |op, io|</span>
723:     <span class="ruby-comment cmt">#   @indent += 1</span>
724:     <span class="ruby-comment cmt">#   @lex_state = EXPR_FNAME</span>
725:     <span class="ruby-comment cmt"># # @lex_state = EXPR_END</span>
726:     <span class="ruby-comment cmt"># # until @rests[0] == &quot;\n&quot; or @rests[0] == &quot;;&quot;</span>
727:     <span class="ruby-comment cmt"># #   rests.shift</span>
728:     <span class="ruby-comment cmt"># # end</span>
729:     <span class="ruby-comment cmt">#       end</span>
730: 
731:     <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">def_rule</span>(<span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-keyword kw">do</span>
732:       <span class="ruby-operator">|</span><span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
733:       <span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;MATCH: start %s: %s\n&quot;</span>, <span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
734:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[0-9]/</span>
735:   <span class="ruby-identifier">t</span> = <span class="ruby-identifier">identify_number</span>
736:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">peek</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[\w_]/</span>
737:   <span class="ruby-identifier">t</span> = <span class="ruby-identifier">identify_identifier</span>
738:       <span class="ruby-keyword kw">end</span>
739:       <span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;MATCH: end %s: %s\n&quot;</span>, <span class="ruby-identifier">op</span>, <span class="ruby-identifier">io</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
740:       <span class="ruby-identifier">t</span>
741:     <span class="ruby-keyword kw">end</span>
742:     
743:     <span class="ruby-identifier">p</span> <span class="ruby-ivar">@OP</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
744:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003865">
                    
                    <a name="M003865"></a><b>line_no</b>()
                    
                </div>
                
                <div class="description">
                  <p>
io functions
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003865_source')" id="l_M003865_source">show</a>
                        
                    </p>
                    <div id="M003865_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 476</span>
476:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">line_no</span>
477:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">line_num</span>
478:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002285">
                    
                    <a name="M002285"></a><b>peek</b>(i = 0)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002285_source')" id="l_M002285_source">show</a>
                        
                    </p>
                    <div id="M002285_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek</span>(<span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>)
181:     <span class="ruby-keyword kw">while</span> <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">i</span>
182:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">buf_input</span>
183:     <span class="ruby-keyword kw">end</span>
184:     <span class="ruby-ivar">@rests</span>[<span class="ruby-identifier">i</span>]
185:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003873">
                    
                    <a name="M003873"></a><b>peek</b>(i = 0)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003873_source')" id="l_M003873_source">show</a>
                        
                    </p>
                    <div id="M003873_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 515</span>
515:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek</span>(<span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>)
516:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">peek</span>(<span class="ruby-identifier">i</span>)
517:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002283">
                    
                    <a name="M002283"></a><b>peek_equal?</b>(str)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002283_source')" id="l_M002283_source">show</a>
                        
                    </p>
                    <div id="M002283_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek_equal?</span>(<span class="ruby-identifier">str</span>)
166:     <span class="ruby-identifier">chrs</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">//</span>)
167:     <span class="ruby-keyword kw">until</span> <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">chrs</span>.<span class="ruby-identifier">size</span>
168:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">buf_input</span>
169:     <span class="ruby-keyword kw">end</span>
170:     <span class="ruby-ivar">@rests</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">chrs</span>.<span class="ruby-identifier">size</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">chrs</span>
171:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003872">
                    
                    <a name="M003872"></a><b>peek_equal?</b>(str)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003872_source')" id="l_M003872_source">show</a>
                        
                    </p>
                    <div id="M003872_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 511</span>
511:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek_equal?</span>(<span class="ruby-identifier">str</span>)
512:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">peek_equal</span>(<span class="ruby-identifier">str</span>)
513:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002284">
                    
                    <a name="M002284"></a><b>peek_match?</b>(regexp)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002284_source')" id="l_M002284_source">show</a>
                        
                    </p>
                    <div id="M002284_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 173</span>
173:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek_match?</span>(<span class="ruby-identifier">regexp</span>)
174:     <span class="ruby-keyword kw">while</span> <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">empty?</span>
175:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">buf_input</span>
176:     <span class="ruby-keyword kw">end</span>
177:     <span class="ruby-identifier">regexp</span> <span class="ruby-operator">=~</span> <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&quot;</span>)
178:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002288">
                    
                    <a name="M002288"></a><b>prompt</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002288_source')" id="l_M002288_source">show</a>
                        
                    </p>
                    <div id="M002288_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prompt</span>
206:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@prompt</span>
207:       <span class="ruby-ivar">@prompt</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@ltype</span>, <span class="ruby-ivar">@indent</span>, <span class="ruby-ivar">@continue</span>, <span class="ruby-ivar">@line_no</span>)
208:     <span class="ruby-keyword kw">end</span>
209:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002321">
                    
                    <a name="M002321"></a><b>read_escape</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002321_source')" id="l_M002321_source">show</a>
                        
                    </p>
                    <div id="M002321_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 1101</span>
1101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_escape</span>
1102:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1103:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot;\r&quot;</span>, <span class="ruby-value str">&quot;\f&quot;</span>
1104:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;\\&quot;</span>, <span class="ruby-value str">&quot;n&quot;</span>, <span class="ruby-value str">&quot;t&quot;</span>, <span class="ruby-value str">&quot;r&quot;</span>, <span class="ruby-value str">&quot;f&quot;</span>, <span class="ruby-value str">&quot;v&quot;</span>, <span class="ruby-value str">&quot;a&quot;</span>, <span class="ruby-value str">&quot;e&quot;</span>, <span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-value str">&quot;s&quot;</span> <span class="ruby-comment cmt">#&quot;</span>
1105:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-7]/</span>
1106:       <span class="ruby-identifier">ungetc</span> <span class="ruby-identifier">ch</span>
1107:       <span class="ruby-value">3</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
1108:   <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1109:   <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-7]/</span>
1110:   <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
1111:     <span class="ruby-keyword kw">break</span>
1112:   <span class="ruby-keyword kw">else</span>
1113:     <span class="ruby-identifier">ungetc</span>
1114:     <span class="ruby-keyword kw">break</span>
1115:   <span class="ruby-keyword kw">end</span>
1116:       <span class="ruby-keyword kw">end</span>
1117:       
1118:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;x&quot;</span>
1119:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
1120:   <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1121:   <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-9a-fA-F]/</span>
1122:   <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
1123:     <span class="ruby-keyword kw">break</span>
1124:   <span class="ruby-keyword kw">else</span>
1125:     <span class="ruby-identifier">ungetc</span>
1126:     <span class="ruby-keyword kw">break</span>
1127:   <span class="ruby-keyword kw">end</span>
1128:       <span class="ruby-keyword kw">end</span>
1129: 
1130:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;M&quot;</span>
1131:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">!=</span> <span class="ruby-value str">'-'</span>
1132:   <span class="ruby-identifier">ungetc</span>
1133:       <span class="ruby-keyword kw">else</span>
1134:   <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\\&quot;</span> <span class="ruby-comment cmt">#&quot;</span>
1135:     <span class="ruby-identifier">read_escape</span>
1136:   <span class="ruby-keyword kw">end</span>
1137:       <span class="ruby-keyword kw">end</span>
1138: 
1139:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;C&quot;</span>, <span class="ruby-value str">&quot;c&quot;</span> <span class="ruby-comment cmt">#, &quot;^&quot;</span>
1140:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;C&quot;</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;-&quot;</span>
1141:   <span class="ruby-identifier">ungetc</span>
1142:       <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\\&quot;</span> <span class="ruby-comment cmt">#&quot;</span>
1143:   <span class="ruby-identifier">read_escape</span>
1144:       <span class="ruby-keyword kw">end</span>
1145:     <span class="ruby-keyword kw">else</span>
1146:       <span class="ruby-comment cmt"># other characters </span>
1147:     <span class="ruby-keyword kw">end</span>
1148:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003906">
                    
                    <a name="M003906"></a><b>read_escape</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003906_source')" id="l_M003906_source">show</a>
                        
                    </p>
                    <div id="M003906_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1292</span>
1292:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_escape</span>
1293:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
1294:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1295:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-7]/</span>
1296:       <span class="ruby-identifier">ungetc</span> <span class="ruby-identifier">ch</span>
1297:       <span class="ruby-value">3</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
1298:   <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1299:   <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-7]/</span>
1300:   <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
1301:     <span class="ruby-keyword kw">break</span>
1302:   <span class="ruby-keyword kw">else</span>
1303:     <span class="ruby-identifier">ungetc</span>
1304:     <span class="ruby-keyword kw">break</span>
1305:   <span class="ruby-keyword kw">end</span>
1306:         <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1307:       <span class="ruby-keyword kw">end</span>
1308:       
1309:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;x&quot;</span>
1310:       <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1311:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
1312:   <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>
1313:   <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[0-9a-fA-F]/</span>
1314:   <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
1315:     <span class="ruby-keyword kw">break</span>
1316:   <span class="ruby-keyword kw">else</span>
1317:     <span class="ruby-identifier">ungetc</span>
1318:     <span class="ruby-keyword kw">break</span>
1319:   <span class="ruby-keyword kw">end</span>
1320:         <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1321:       <span class="ruby-keyword kw">end</span>
1322: 
1323:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;M&quot;</span>
1324:       <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1325:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">!=</span> <span class="ruby-value str">'-'</span>
1326:   <span class="ruby-identifier">ungetc</span>
1327:       <span class="ruby-keyword kw">else</span>
1328:         <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1329:   <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\\&quot;</span> <span class="ruby-comment cmt">#&quot;</span>
1330:           <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1331:     <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">read_escape</span>
1332:         <span class="ruby-keyword kw">else</span>
1333:           <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1334:   <span class="ruby-keyword kw">end</span>
1335:       <span class="ruby-keyword kw">end</span>
1336: 
1337:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;C&quot;</span>, <span class="ruby-value str">&quot;c&quot;</span> <span class="ruby-comment cmt">#, &quot;^&quot;</span>
1338:       <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1339:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;C&quot;</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;-&quot;</span>
1340:   <span class="ruby-identifier">ungetc</span>
1341:       <span class="ruby-keyword kw">else</span>
1342:         <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1343:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\\&quot;</span> <span class="ruby-comment cmt">#&quot;</span>
1344:           <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1345:           <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">read_escape</span>
1346:         <span class="ruby-keyword kw">else</span>
1347:           <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1348:         <span class="ruby-keyword kw">end</span>
1349:       <span class="ruby-keyword kw">end</span>
1350:     <span class="ruby-keyword kw">else</span>
1351:       <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1352:     <span class="ruby-keyword kw">end</span>
1353:     <span class="ruby-identifier">res</span>
1354:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002272">
                    
                    <a name="M002272"></a><b>set_input</b>(io, p = nil, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
io functions
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002272_source')" id="l_M002272_source">show</a>
                        
                    </p>
                    <div id="M002272_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 78</span>
78:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_input</span>(<span class="ruby-identifier">io</span>, <span class="ruby-identifier">p</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
79:     <span class="ruby-ivar">@io</span> = <span class="ruby-identifier">io</span>
80:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:call</span>)
81:       <span class="ruby-ivar">@input</span> = <span class="ruby-identifier">p</span>
82:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">block_given?</span>
83:       <span class="ruby-ivar">@input</span> = <span class="ruby-identifier">block</span>
84:     <span class="ruby-keyword kw">else</span>
85:       <span class="ruby-ivar">@input</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>{<span class="ruby-ivar">@io</span>.<span class="ruby-identifier">gets</span>}
86:     <span class="ruby-keyword kw">end</span>
87:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002287">
                    
                    <a name="M002287"></a><b>set_prompt</b>(p = nil, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002287_source')" id="l_M002287_source">show</a>
                        
                    </p>
                    <div id="M002287_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 196</span>
196:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_prompt</span>(<span class="ruby-identifier">p</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
197:     <span class="ruby-identifier">p</span> = <span class="ruby-identifier">block</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
198:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:call</span>)
199:       <span class="ruby-ivar">@prompt</span> = <span class="ruby-identifier">p</span>
200:     <span class="ruby-keyword kw">else</span>
201:       <span class="ruby-ivar">@prompt</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>{<span class="ruby-identifier">print</span> <span class="ruby-identifier">p</span>}
202:     <span class="ruby-keyword kw">end</span>
203:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003902">
                    
                    <a name="M003902"></a><b>skip_inner_expression</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003902_source')" id="l_M003902_source">show</a>
                        
                    </p>
                    <div id="M003902_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1254</span>
1254:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_inner_expression</span>
1255:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
1256:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1257:     <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">ch</span> = <span class="ruby-identifier">getc</span>)
1258:       <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ch</span>
1259:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'}'</span>
1260:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
1261:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1262:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ch</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'{'</span>
1263:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1264:       <span class="ruby-keyword kw">end</span>
1265:     <span class="ruby-keyword kw">end</span>
1266:     <span class="ruby-identifier">res</span>
1267:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002292">
                    
                    <a name="M002292"></a><b>token</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002292_source')" id="l_M002292_source">show</a>
                        
                    </p>
                    <div id="M002292_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 279</span>
279:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">token</span>
280:     <span class="ruby-comment cmt">#      require &quot;tracer&quot;</span>
281:     <span class="ruby-comment cmt">#      Tracer.on</span>
282:     <span class="ruby-ivar">@prev_seek</span> = <span class="ruby-ivar">@seek</span>
283:     <span class="ruby-ivar">@prev_line_no</span> = <span class="ruby-ivar">@line_no</span>
284:     <span class="ruby-ivar">@prev_char_no</span> = <span class="ruby-ivar">@char_no</span>
285:     <span class="ruby-keyword kw">begin</span>
286:       <span class="ruby-keyword kw">begin</span>
287:   <span class="ruby-identifier">tk</span> = <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">match</span>(<span class="ruby-keyword kw">self</span>)
288:   <span class="ruby-ivar">@space_seen</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkSPACE</span>)
289:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SyntaxError</span>
290:   <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@exception_on_syntax_error</span>
291:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">TkError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@seek</span>, <span class="ruby-ivar">@line_no</span>, <span class="ruby-ivar">@char_no</span>)
292:       <span class="ruby-keyword kw">end</span>
293:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-ivar">@skip_space</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkSPACE</span>)
294:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@readed_auto_clean_up</span>
295:       <span class="ruby-identifier">get_readed</span>
296:     <span class="ruby-keyword kw">end</span>
297:     <span class="ruby-comment cmt">#      Tracer.off</span>
298:     <span class="ruby-identifier">tk</span>
299:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003875">
                    
                    <a name="M003875"></a><b>token</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003875_source')" id="l_M003875_source">show</a>
                        
                    </p>
                    <div id="M003875_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 533</span>
533:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">token</span>
534:     <span class="ruby-identifier">set_token_position</span>(<span class="ruby-identifier">line_no</span>, <span class="ruby-identifier">char_no</span>)
535:     <span class="ruby-keyword kw">begin</span>
536:       <span class="ruby-keyword kw">begin</span>
537:   <span class="ruby-identifier">tk</span> = <span class="ruby-ivar">@OP</span>.<span class="ruby-identifier">match</span>(<span class="ruby-keyword kw">self</span>)
538:   <span class="ruby-ivar">@space_seen</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkSPACE</span>)
539:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SyntaxError</span>
540:   <span class="ruby-identifier">abort</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@exception_on_syntax_error</span>
541:   <span class="ruby-identifier">tk</span> = <span class="ruby-constant">TkError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line_no</span>, <span class="ruby-identifier">char_no</span>)
542:       <span class="ruby-keyword kw">end</span>
543:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-ivar">@skip_space</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkSPACE</span>)
544:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@read_auto_clean_up</span>
545:       <span class="ruby-identifier">get_read</span>
546:     <span class="ruby-keyword kw">end</span>
547: <span class="ruby-comment cmt">#   throw :eof unless tk</span>
548:     <span class="ruby-identifier">p</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
549:     <span class="ruby-identifier">tk</span>
550:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003871">
                    
                    <a name="M003871"></a><b>ungetc</b>(c = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003871_source')" id="l_M003871_source">show</a>
                        
                    </p>
                    <div id="M003871_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 507</span>
507:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ungetc</span>(<span class="ruby-identifier">c</span> = <span class="ruby-keyword kw">nil</span>)
508:     <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">ungetc</span>(<span class="ruby-identifier">c</span>)
509:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002282">
                    
                    <a name="M002282"></a><b>ungetc</b>(c = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002282_source')" id="l_M002282_source">show</a>
                        
                    </p>
                    <div id="M002282_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 144</span>
144:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ungetc</span>(<span class="ruby-identifier">c</span> = <span class="ruby-keyword kw">nil</span>)
145:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@here_readed</span>.<span class="ruby-identifier">empty?</span>
146:       <span class="ruby-identifier">c2</span> = <span class="ruby-ivar">@readed</span>.<span class="ruby-identifier">pop</span>
147:     <span class="ruby-keyword kw">else</span>
148:       <span class="ruby-identifier">c2</span> = <span class="ruby-ivar">@here_readed</span>.<span class="ruby-identifier">pop</span>
149:     <span class="ruby-keyword kw">end</span>
150:     <span class="ruby-identifier">c</span> = <span class="ruby-identifier">c2</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">c</span>
151:     <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">c</span> <span class="ruby-comment cmt">#c = </span>
152:       <span class="ruby-ivar">@seek</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
153:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;\n&quot;</span>
154:       <span class="ruby-ivar">@line_no</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> 
155:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">idx</span> = <span class="ruby-ivar">@readed</span>.<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
156:   <span class="ruby-ivar">@char_no</span> = <span class="ruby-ivar">@readed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">idx</span>
157:       <span class="ruby-keyword kw">else</span>
158:   <span class="ruby-ivar">@char_no</span> = <span class="ruby-ivar">@base_char_no</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@readed</span>.<span class="ruby-identifier">size</span>
159:       <span class="ruby-keyword kw">end</span>
160:     <span class="ruby-keyword kw">else</span>
161:       <span class="ruby-ivar">@char_no</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
162:     <span class="ruby-keyword kw">end</span>
163:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M002286">
                    
                    <a name="M002286"></a><b>buf_input</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002286_source')" id="l_M002286_source">show</a>
                        
                    </p>
                    <div id="M002286_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">buf_input</span>
188:     <span class="ruby-identifier">prompt</span>
189:     <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@input</span>.<span class="ruby-identifier">call</span>
190:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">line</span>
191:     <span class="ruby-ivar">@rests</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">//</span>)
192:     <span class="ruby-keyword kw">true</span>
193:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M002267">
                    
                    <a name="M002267"></a><b>debug?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002267_source')" id="l_M002267_source">show</a>
                        
                    </p>
                    <div id="M002267_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 34</span>
34:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug?</span>
35:       <span class="ruby-ivar">@debug_level</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
36:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003863">
                    
                    <a name="M003863"></a><b>debug?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003863_source')" id="l_M003863_source">show</a>
                        
                    </p>
                    <div id="M003863_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 443</span>
443:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">debug?</span>
444:     <span class="ruby-keyword kw">false</span>
445:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002268">
                    
                    <a name="M002268"></a><b>new</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002268_source')" id="l_M002268_source">show</a>
                        
                    </p>
                    <div id="M002268_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/irb/ruby-lex.rb, line 40</span>
40:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
41:     <span class="ruby-identifier">lex_init</span>
42:     <span class="ruby-identifier">set_input</span>(<span class="ruby-constant">STDIN</span>)
43: 
44:     <span class="ruby-ivar">@seek</span> = <span class="ruby-value">0</span>
45:     <span class="ruby-ivar">@exp_line_no</span> = <span class="ruby-ivar">@line_no</span> = <span class="ruby-value">1</span>
46:     <span class="ruby-ivar">@base_char_no</span> = <span class="ruby-value">0</span>
47:     <span class="ruby-ivar">@char_no</span> = <span class="ruby-value">0</span>
48:     <span class="ruby-ivar">@rests</span> = []
49:     <span class="ruby-ivar">@readed</span> = []
50:     <span class="ruby-ivar">@here_readed</span> = []
51: 
52:     <span class="ruby-ivar">@indent</span> = <span class="ruby-value">0</span>
53:     <span class="ruby-ivar">@indent_stack</span> = []
54:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
55:     <span class="ruby-ivar">@space_seen</span> = <span class="ruby-keyword kw">false</span>
56:     <span class="ruby-ivar">@here_header</span> = <span class="ruby-keyword kw">false</span>
57:     
58:     <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>
59:     <span class="ruby-ivar">@line</span> = <span class="ruby-value str">&quot;&quot;</span>
60: 
61:     <span class="ruby-ivar">@skip_space</span> = <span class="ruby-keyword kw">false</span>
62:     <span class="ruby-ivar">@readed_auto_clean_up</span> = <span class="ruby-keyword kw">false</span>
63:     <span class="ruby-ivar">@exception_on_syntax_error</span> = <span class="ruby-keyword kw">true</span>
64: 
65:     <span class="ruby-ivar">@prompt</span> = <span class="ruby-keyword kw">nil</span>
66:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003864">
                    
                    <a name="M003864"></a><b>new</b>(content)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003864_source')" id="l_M003864_source">show</a>
                        
                    </p>
                    <div id="M003864_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 447</span>
447:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">content</span>)
448:     <span class="ruby-identifier">lex_init</span>
449: 
450:     <span class="ruby-ivar">@reader</span> = <span class="ruby-constant">BufferedReader</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">content</span>)
451: 
452:     <span class="ruby-ivar">@exp_line_no</span> = <span class="ruby-ivar">@line_no</span> = <span class="ruby-value">1</span>
453:     <span class="ruby-ivar">@base_char_no</span> = <span class="ruby-value">0</span>
454:     <span class="ruby-ivar">@indent</span> = <span class="ruby-value">0</span>
455: 
456:     <span class="ruby-ivar">@ltype</span> = <span class="ruby-keyword kw">nil</span>
457:     <span class="ruby-ivar">@quoted</span> = <span class="ruby-keyword kw">nil</span>
458:     <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_BEG</span>
459:     <span class="ruby-ivar">@space_seen</span> = <span class="ruby-keyword kw">false</span>
460:     
461:     <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>
462:     <span class="ruby-ivar">@line</span> = <span class="ruby-value str">&quot;&quot;</span>
463: 
464:     <span class="ruby-ivar">@skip_space</span> = <span class="ruby-keyword kw">false</span>
465:     <span class="ruby-ivar">@read_auto_clean_up</span> = <span class="ruby-keyword kw">false</span>
466:     <span class="ruby-ivar">@exception_on_syntax_error</span> = <span class="ruby-keyword kw">true</span>
467:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    