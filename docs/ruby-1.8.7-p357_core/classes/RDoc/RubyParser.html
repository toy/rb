<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RDoc::RubyParser</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            RDoc::RubyParser 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/rdoc/parsers/parse_rb_rb.html">lib/rdoc/parsers/parse_rb.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M003920">add_token_listener</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M003928">collect_first_comment</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M003918">error</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M003973">get_bool</a>,</li>
                
                <li><a href="#M003936">get_class_or_module</a>,</li>
                
                <li><a href="#M003948">get_class_specification</a>,</li>
                
                <li><a href="#M003953">get_constant</a>,</li>
                
                <li><a href="#M003955">get_constant_with_optional_parens</a>,</li>
                
                <li><a href="#M003966">get_symbol_or_name</a>,</li>
                
                <li><a href="#M003922">get_tk</a>,</li>
                
                <li><a href="#M003926">get_tkread</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M003962">look_for_directives_in</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M003916">make_message</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M003913">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M003967">parse_alias</a>,</li>
                
                <li><a href="#M003974">parse_attr</a>,</li>
                
                <li><a href="#M003976">parse_attr_accessor</a>,</li>
                
                <li><a href="#M003951">parse_call_parameters</a>,</li>
                
                <li><a href="#M003934">parse_class</a>,</li>
                
                <li><a href="#M003939">parse_constant</a>,</li>
                
                <li><a href="#M003972">parse_include</a>,</li>
                
                <li><a href="#M003942">parse_method</a>,</li>
                
                <li><a href="#M003945">parse_method_or_yield_parameters</a>,</li>
                
                <li><a href="#M003944">parse_method_parameters</a>,</li>
                
                <li><a href="#M003935">parse_module</a>,</li>
                
                <li><a href="#M003971">parse_require</a>,</li>
                
                <li><a href="#M003930">parse_statements</a>,</li>
                
                <li><a href="#M003978">parse_symbol_arg</a>,</li>
                
                <li><a href="#M003979">parse_symbol_in_arg</a>,</li>
                
                <li><a href="#M003929">parse_toplevel_statements</a>,</li>
                
                <li><a href="#M003975">parse_visibility</a>,</li>
                
                <li><a href="#M003970">parse_yield</a>,</li>
                
                <li><a href="#M003969">parse_yield_parameters</a>,</li>
                
                <li><a href="#M003927">peek_read</a>,</li>
                
                <li><a href="#M003923">peek_tk</a>,</li>
                
                <li><a href="#M003919">progress</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M003959">read_directive</a>,</li>
                
                <li><a href="#M003960">read_documentation_modifiers</a>,</li>
                
                <li><a href="#M003964">remove_private_comments</a>,</li>
                
                <li><a href="#M003921">remove_token_listener</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M003915">scan</a>,</li>
                
                <li><a href="#M003946">skip_for_variable</a>,</li>
                
                <li><a href="#M003943">skip_method</a>,</li>
                
                <li><a href="#M003947">skip_optional_do_after_expression</a>,</li>
                
                <li><a href="#M003925">skip_tkspace</a>,</li>
                
                <li><a href="#M003977">skip_tkspace_comment</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M003924">unget_tk</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M003917">warn</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../RSS/Utils.html">RSS::Utils</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="../RSS/Utils.html">RSS::Utils</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">NORMAL</td>
            <td>=</td>
            <td class="attr-value">&quot;::&quot;</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SINGLE</td>
            <td>=</td>
            <td class="attr-value">&quot;&lt;&lt;&quot;</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M003915">
                    
                    <a name="M003915"></a><b>scan</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003915_source')" id="l_M003915_source">show</a>
                        
                    </p>
                    <div id="M003915_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1399</span>
1399:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan</span>
1400:       <span class="ruby-ivar">@tokens</span> = []
1401:       <span class="ruby-ivar">@unget_read</span> = []
1402:       <span class="ruby-ivar">@read</span> = []
1403:       <span class="ruby-identifier">catch</span>(<span class="ruby-identifier">:eof</span>) <span class="ruby-keyword kw">do</span>
1404:         <span class="ruby-identifier">catch</span>(<span class="ruby-identifier">:enddoc</span>) <span class="ruby-keyword kw">do</span>
1405:           <span class="ruby-keyword kw">begin</span>
1406:             <span class="ruby-identifier">parse_toplevel_statements</span>(<span class="ruby-ivar">@top_level</span>)
1407:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1408:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;\n\n&quot;</span>
1409:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;RDoc failure in #@input_file_name at or around &quot;</span> <span class="ruby-operator">+</span>
1410:                          <span class="ruby-node">&quot;line #{@scanner.line_no} column #{@scanner.char_no}&quot;</span>
1411:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> 
1412:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Before reporting this, could you check that the file&quot;</span>
1413:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;you're documenting compiles cleanly--RDoc is not a&quot;</span>
1414:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;full Ruby parser, and gets confused easily if fed&quot;</span>
1415:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;invalid programs.&quot;</span>
1416:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>
1417:             <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;The internal error was:\n\n&quot;</span>
1418:             
1419:             <span class="ruby-identifier">e</span>.<span class="ruby-identifier">set_backtrace</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>,<span class="ruby-value">4</span>])
1420:             <span class="ruby-identifier">raise</span>
1421:           <span class="ruby-keyword kw">end</span>
1422:         <span class="ruby-keyword kw">end</span>
1423:       <span class="ruby-keyword kw">end</span>
1424:       <span class="ruby-ivar">@top_level</span>
1425:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M003920">
                    
                    <a name="M003920"></a><b>add_token_listener</b>(obj)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003920_source')" id="l_M003920_source">show</a>
                        
                    </p>
                    <div id="M003920_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1456</span>
1456:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_token_listener</span>(<span class="ruby-identifier">obj</span>)
1457:       <span class="ruby-ivar">@token_listeners</span> <span class="ruby-operator">||=</span> []
1458:       <span class="ruby-ivar">@token_listeners</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">obj</span>
1459:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003928">
                    
                    <a name="M003928"></a><b>collect_first_comment</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Look for the first comment in a file that isn&#8217;t a shebang line.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003928_source')" id="l_M003928_source">show</a>
                        
                    </p>
                    <div id="M003928_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1542</span>
1542:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collect_first_comment</span>
1543:       <span class="ruby-identifier">skip_tkspace</span>
1544:       <span class="ruby-identifier">res</span> = <span class="ruby-value str">''</span>
1545:       <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">true</span>
1546: 
1547:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1548:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOMMENT</span>)
1549:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">first_line</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-regexp re">/\A#!/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
1550:           <span class="ruby-identifier">skip_tkspace</span>
1551:           <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1552:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">first_line</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-regexp re">/\A#\s*-\*-/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
1553:           <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">false</span>
1554:           <span class="ruby-identifier">skip_tkspace</span>
1555:           <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1556:         <span class="ruby-keyword kw">else</span>
1557:           <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">false</span>
1558:           <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1559:           <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1560:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">TkNL</span>
1561:             <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1562:             <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1563:           <span class="ruby-keyword kw">end</span>
1564:         <span class="ruby-keyword kw">end</span>
1565:       <span class="ruby-keyword kw">end</span>
1566:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1567:       <span class="ruby-identifier">res</span>
1568:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003918">
                    
                    <a name="M003918"></a><b>error</b>(msg)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003918_source')" id="l_M003918_source">show</a>
                        
                    </p>
                    <div id="M003918_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1443</span>
1443:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">error</span>(<span class="ruby-identifier">msg</span>)
1444:       <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">msg</span>
1445:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">msg</span>
1446:       <span class="ruby-identifier">exit</span>(<span class="ruby-value">1</span>)
1447:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003973">
                    
                    <a name="M003973"></a><b>get_bool</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003973_source')" id="l_M003973_source">show</a>
                        
                    </p>
                    <div id="M003973_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2445</span>
2445:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_bool</span>
2446:       <span class="ruby-identifier">skip_tkspace</span>
2447:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2448:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2449:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkTRUE</span>
2450:         <span class="ruby-keyword kw">true</span>
2451:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkFALSE</span>, <span class="ruby-constant">TkNIL</span>
2452:         <span class="ruby-keyword kw">false</span>
2453:       <span class="ruby-keyword kw">else</span>
2454:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
2455:         <span class="ruby-keyword kw">true</span>
2456:       <span class="ruby-keyword kw">end</span>
2457:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003936">
                    
                    <a name="M003936"></a><b>get_class_or_module</b>(container)
                    
                </div>
                
                <div class="description">
                  <table>
<tr><td valign="top">Look for the name of a class of module (optionally with a leading :</td><td>or

</td></tr>
<tr><td valign="top">with :</td><td>separated named) and return the ultimate name and container

</td></tr>
</table>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003936_source')" id="l_M003936_source">show</a>
                        
                    </p>
                    <div id="M003936_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1801</span>
1801:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_class_or_module</span>(<span class="ruby-identifier">container</span>)
1802:       <span class="ruby-identifier">skip_tkspace</span>
1803:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1804: 
1805:       <span class="ruby-comment cmt"># class ::A -&gt; A is in the top level</span>
1806:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOLON2</span>)
1807:         <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1808:         <span class="ruby-identifier">container</span> = <span class="ruby-ivar">@top_level</span>
1809:       <span class="ruby-keyword kw">end</span>
1810: 
1811:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1812: 
1813:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">peek_tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOLON2</span>)
1814:         <span class="ruby-identifier">prev_container</span> = <span class="ruby-identifier">container</span>
1815:         <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span>(<span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
1816:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">container</span>
1817: <span class="ruby-comment cmt">#          warn(&quot;Couldn't find module #{name_t.name}&quot;)</span>
1818:           <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_module</span>(<span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
1819:         <span class="ruby-keyword kw">end</span>
1820:         <span class="ruby-identifier">get_tk</span>
1821:         <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1822:       <span class="ruby-keyword kw">end</span>
1823:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1824:       <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>]
1825:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003948">
                    
                    <a name="M003948"></a><b>get_class_specification</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return a superclass, which can be either a constant of an expression
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003948_source')" id="l_M003948_source">show</a>
                        
                    </p>
                    <div id="M003948_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2130</span>
2130:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_class_specification</span>
2131:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2132:       <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;self&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkSELF</span>)
2133:         
2134:       <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
2135:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOLON2</span>) <span class="ruby-operator">||</span>
2136:           <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOLON3</span>)   <span class="ruby-operator">||</span>
2137:           <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCONSTANT</span>)   
2138:         
2139:         <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
2140:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2141:       <span class="ruby-keyword kw">end</span>
2142: 
2143:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2144:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2145: 
2146:       <span class="ruby-identifier">get_tkread</span> <span class="ruby-comment cmt"># empty out read buffer</span>
2147: 
2148:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2149: 
2150:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2151:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>, <span class="ruby-constant">TkCOMMENT</span>, <span class="ruby-constant">TkSEMICOLON</span>
2152:         <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2153:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
2154:       <span class="ruby-keyword kw">end</span>
2155: 
2156:       <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">parse_call_parameters</span>(<span class="ruby-identifier">tk</span>)
2157:       <span class="ruby-identifier">res</span>
2158:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003953">
                    
                    <a name="M003953"></a><b>get_constant</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse a constant, which might be qualified by one or more class or module
names
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003953_source')" id="l_M003953_source">show</a>
                        
                    </p>
                    <div id="M003953_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2202</span>
2202:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_constant</span>
2203:       <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
2204:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2205:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2206: 
2207:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOLON2</span>) <span class="ruby-operator">||</span>
2208:           <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOLON3</span>)   <span class="ruby-operator">||</span>
2209:           <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCONSTANT</span>)          
2210:         
2211:         <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
2212:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2213:       <span class="ruby-keyword kw">end</span>
2214: 
2215: <span class="ruby-comment cmt">#      if res.empty?</span>
2216: <span class="ruby-comment cmt">#        warn(&quot;Unexpected token #{tk} in constant&quot;)</span>
2217: <span class="ruby-comment cmt">#      end </span>
2218:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2219:       <span class="ruby-identifier">res</span>
2220:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003955">
                    
                    <a name="M003955"></a><b>get_constant_with_optional_parens</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Get a constant that may be surrounded by parens
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003955_source')" id="l_M003955_source">show</a>
                        
                    </p>
                    <div id="M003955_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2224</span>
2224:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_constant_with_optional_parens</span>
2225:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2226:       <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
2227:       <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">peek_tk</span>).<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkLPAREN</span>)  <span class="ruby-operator">||</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkfLPAREN</span>)
2228:         <span class="ruby-identifier">get_tk</span>
2229:         <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">true</span>)
2230:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2231:       <span class="ruby-keyword kw">end</span>
2232: 
2233:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_constant</span>
2234: 
2235:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
2236:         <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">true</span>)
2237:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2238:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkRPAREN</span>)
2239:       <span class="ruby-keyword kw">end</span>
2240:       <span class="ruby-identifier">name</span>
2241:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003966">
                    
                    <a name="M003966"></a><b>get_symbol_or_name</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003966_source')" id="l_M003966_source">show</a>
                        
                    </p>
                    <div id="M003966_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2359</span>
2359:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_symbol_or_name</span>
2360:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2361:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2362:       <span class="ruby-keyword kw">when</span>  <span class="ruby-constant">TkSYMBOL</span>
2363:         <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^:/</span>, <span class="ruby-value str">''</span>)
2364:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkId</span>, <span class="ruby-constant">TkOp</span>
2365:         <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
2366:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span>
2367:         <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
2368:       <span class="ruby-keyword kw">else</span>
2369:         <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Name or symbol expected (got #{tk})&quot;</span>
2370:       <span class="ruby-keyword kw">end</span>
2371:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003922">
                    
                    <a name="M003922"></a><b>get_tk</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003922_source')" id="l_M003922_source">show</a>
                        
                    </p>
                    <div id="M003922_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1465</span>
1465:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_tk</span>
1466:       <span class="ruby-identifier">tk</span> = <span class="ruby-keyword kw">nil</span>
1467:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tokens</span>.<span class="ruby-identifier">empty?</span>
1468:   <span class="ruby-identifier">tk</span> = <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">token</span>
1469:   <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">push</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">get_read</span>
1470:   <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;get_tk1 =&gt; #{tk.inspect}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$TOKEN_DEBUG</span>
1471:       <span class="ruby-keyword kw">else</span>
1472:   <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">push</span> <span class="ruby-ivar">@unget_read</span>.<span class="ruby-identifier">shift</span>
1473:   <span class="ruby-identifier">tk</span> = <span class="ruby-ivar">@tokens</span>.<span class="ruby-identifier">shift</span>
1474:   <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;get_tk2 =&gt; #{tk.inspect}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$TOKEN_DEBUG</span>
1475:       <span class="ruby-keyword kw">end</span>
1476: 
1477:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkSYMBEG</span>)
1478:         <span class="ruby-identifier">set_token_position</span>(<span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>, <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>)
1479:         <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">get_tk</span>
1480:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk1</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkId</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">tk1</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkOp</span>)
1481:           <span class="ruby-identifier">tk</span> = <span class="ruby-constant">Token</span>(<span class="ruby-constant">TkSYMBOL</span>).<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">tk1</span>.<span class="ruby-identifier">name</span>)
1482:           <span class="ruby-comment cmt"># remove the identifier we just read (we're about to</span>
1483:           <span class="ruby-comment cmt"># replace it with a symbol)</span>
1484:           <span class="ruby-ivar">@token_listeners</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
1485:             <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">pop_token</span>
1486:           <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@token_listeners</span>
1487:         <span class="ruby-keyword kw">else</span>
1488:           <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;':' not followed by identifier or operator&quot;</span>)
1489:           <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">tk1</span>
1490:         <span class="ruby-keyword kw">end</span>
1491:       <span class="ruby-keyword kw">end</span>
1492: 
1493:       <span class="ruby-comment cmt"># inform any listeners of our shiny new token</span>
1494:       <span class="ruby-ivar">@token_listeners</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
1495:         <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">add_token</span>(<span class="ruby-identifier">tk</span>)
1496:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@token_listeners</span>
1497: 
1498:       <span class="ruby-identifier">tk</span>
1499:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003926">
                    
                    <a name="M003926"></a><b>get_tkread</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003926_source')" id="l_M003926_source">show</a>
                        
                    </p>
                    <div id="M003926_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1526</span>
1526:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_tkread</span>
1527:       <span class="ruby-identifier">read</span> = <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&quot;</span>)
1528:       <span class="ruby-ivar">@read</span> = []
1529:       <span class="ruby-identifier">read</span>
1530:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003962">
                    
                    <a name="M003962"></a><b>look_for_directives_in</b>(context, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Look for directives in a normal comment block:
</p>
<pre>
  #--       - don't display comment from this point forward
</pre>
<p>
This routine modifies it&#8217;s parameter
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003962_source')" id="l_M003962_source">show</a>
                        
                    </p>
                    <div id="M003962_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2309</span>
2309:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">look_for_directives_in</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>)
2310: 
2311:       <span class="ruby-identifier">preprocess</span> = <span class="ruby-constant">SM</span><span class="ruby-operator">::</span><span class="ruby-constant">PreProcess</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@input_file_name</span>,
2312:                                       <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">rdoc_include</span>)
2313: 
2314:       <span class="ruby-identifier">preprocess</span>.<span class="ruby-identifier">handle</span>(<span class="ruby-identifier">comment</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directive</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
2315:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">directive</span>
2316:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;stopdoc&quot;</span>
2317:           <span class="ruby-identifier">context</span>.<span class="ruby-identifier">stop_doc</span>
2318:           <span class="ruby-value str">&quot;&quot;</span>
2319:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;startdoc&quot;</span>
2320:           <span class="ruby-identifier">context</span>.<span class="ruby-identifier">start_doc</span>
2321:           <span class="ruby-identifier">context</span>.<span class="ruby-identifier">force_documentation</span> = <span class="ruby-keyword kw">true</span>
2322:           <span class="ruby-value str">&quot;&quot;</span>
2323: 
2324:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;enddoc&quot;</span>
2325:           <span class="ruby-comment cmt">#context.done_documenting = true</span>
2326:           <span class="ruby-comment cmt">#&quot;&quot;</span>
2327:           <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:enddoc</span>
2328: 
2329:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;main&quot;</span>
2330:           <span class="ruby-identifier">options</span> = <span class="ruby-constant">Options</span>.<span class="ruby-identifier">instance</span>
2331:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">main_page</span> = <span class="ruby-identifier">param</span>
2332:     <span class="ruby-value str">&quot;&quot;</span>
2333: 
2334:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;title&quot;</span>
2335:           <span class="ruby-identifier">options</span> = <span class="ruby-constant">Options</span>.<span class="ruby-identifier">instance</span>
2336:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">title</span> = <span class="ruby-identifier">param</span>
2337:           <span class="ruby-value str">&quot;&quot;</span>
2338: 
2339:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;section&quot;</span>
2340:           <span class="ruby-identifier">context</span>.<span class="ruby-identifier">set_current_section</span>(<span class="ruby-identifier">param</span>, <span class="ruby-identifier">comment</span>)
2341:           <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-comment cmt"># 1.8 doesn't support #clear</span>
2342:           <span class="ruby-keyword kw">break</span> 
2343:         <span class="ruby-keyword kw">else</span>
2344:           <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Unrecognized directive '#{directive}'&quot;</span>
2345:           <span class="ruby-keyword kw">break</span>
2346:         <span class="ruby-keyword kw">end</span>
2347:       <span class="ruby-keyword kw">end</span>
2348: 
2349:       <span class="ruby-identifier">remove_private_comments</span>(<span class="ruby-identifier">comment</span>)
2350:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003916">
                    
                    <a name="M003916"></a><b>make_message</b>(msg)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003916_source')" id="l_M003916_source">show</a>
                        
                    </p>
                    <div id="M003916_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1429</span>
1429:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make_message</span>(<span class="ruby-identifier">msg</span>)
1430:       <span class="ruby-identifier">prefix</span> = <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@input_file_name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;:&quot;</span>
1431:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>
1432:         <span class="ruby-identifier">prefix</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{@scanner.line_no}:#{@scanner.char_no}: &quot;</span>
1433:       <span class="ruby-keyword kw">end</span>
1434:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">msg</span>
1435:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003967">
                    
                    <a name="M003967"></a><b>parse_alias</b>(context, single, tk, comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003967_source')" id="l_M003967_source">show</a>
                        
                    </p>
                    <div id="M003967_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2373</span>
2373:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_alias</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
2374:       <span class="ruby-identifier">skip_tkspace</span>
2375:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">peek_tk</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">TkLPAREN</span>)
2376:         <span class="ruby-identifier">get_tk</span>
2377:         <span class="ruby-identifier">skip_tkspace</span>
2378:       <span class="ruby-keyword kw">end</span>
2379:       <span class="ruby-identifier">new_name</span> = <span class="ruby-identifier">get_symbol_or_name</span>
2380:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span>}
2381:       <span class="ruby-identifier">skip_tkspace</span>
2382:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">peek_tk</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">TkCOMMA</span>)
2383:         <span class="ruby-identifier">get_tk</span>
2384:         <span class="ruby-identifier">skip_tkspace</span>
2385:       <span class="ruby-keyword kw">end</span>
2386:       <span class="ruby-identifier">old_name</span> = <span class="ruby-identifier">get_symbol_or_name</span>
2387: 
2388:       <span class="ruby-identifier">al</span> = <span class="ruby-constant">Alias</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">old_name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">comment</span>)
2389:       <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">al</span>, <span class="ruby-constant">ATTR_MODIFIERS</span>)
2390:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">al</span>.<span class="ruby-identifier">document_self</span>
2391:   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_alias</span>(<span class="ruby-identifier">al</span>)
2392:       <span class="ruby-keyword kw">end</span>
2393:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003974">
                    
                    <a name="M003974"></a><b>parse_attr</b>(context, single, tk, comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003974_source')" id="l_M003974_source">show</a>
                        
                    </p>
                    <div id="M003974_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2459</span>
2459:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attr</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
2460:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>(<span class="ruby-value">1</span>)
2461:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
2462:   <span class="ruby-identifier">name</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>]
2463:         <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;R&quot;</span>
2464:         <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2465:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2466:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">TkCOMMA</span>
2467:           <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;RW&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">get_bool</span>
2468:         <span class="ruby-keyword kw">else</span>
2469:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
2470:         <span class="ruby-keyword kw">end</span>
2471:   <span class="ruby-identifier">att</span> = <span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>)
2472:   <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">att</span>, <span class="ruby-constant">ATTR_MODIFIERS</span>)
2473:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">att</span>.<span class="ruby-identifier">document_self</span>
2474:     <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">att</span>)
2475:   <span class="ruby-keyword kw">end</span>
2476:       <span class="ruby-keyword kw">else</span>
2477:   <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;'attr' ignored - looks like a variable&quot;</span>)
2478:       <span class="ruby-keyword kw">end</span>    
2479: 
2480:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003976">
                    
                    <a name="M003976"></a><b>parse_attr_accessor</b>(context, single, tk, comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003976_source')" id="l_M003976_source">show</a>
                        
                    </p>
                    <div id="M003976_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2513</span>
2513:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attr_accessor</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
2514:       <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
2515:       <span class="ruby-identifier">read</span> = <span class="ruby-identifier">get_tkread</span>
2516:       <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;?&quot;</span>
2517: 
2518:       <span class="ruby-comment cmt"># If nodoc is given, don't document any of them</span>
2519: 
2520:       <span class="ruby-identifier">tmp</span> = <span class="ruby-constant">CodeObject</span>.<span class="ruby-identifier">new</span>
2521:       <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">tmp</span>, <span class="ruby-constant">ATTR_MODIFIERS</span>)
2522:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tmp</span>.<span class="ruby-identifier">document_self</span>
2523: 
2524:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
2525:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_reader&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;R&quot;</span>
2526:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_writer&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;W&quot;</span>
2527:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_accessor&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;RW&quot;</span>
2528:       <span class="ruby-keyword kw">else</span>
2529:         <span class="ruby-identifier">rw</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">extra_accessor_flags</span>[<span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>]
2530:       <span class="ruby-keyword kw">end</span>
2531:       
2532:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">args</span>
2533:   <span class="ruby-identifier">att</span> = <span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>)
2534:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">att</span>)
2535:       <span class="ruby-keyword kw">end</span>    
2536:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003951">
                    
                    <a name="M003951"></a><b>parse_call_parameters</b>(tk)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003951_source')" id="l_M003951_source">show</a>
                        
                    </p>
                    <div id="M003951_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2160</span>
2160:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_call_parameters</span>(<span class="ruby-identifier">tk</span>)
2161: 
2162:       <span class="ruby-identifier">end_token</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2163:                   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2164:                     <span class="ruby-constant">TkRPAREN</span>
2165:                   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
2166:                     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
2167:                   <span class="ruby-keyword kw">else</span>
2168:                     <span class="ruby-constant">TkNL</span>
2169:                   <span class="ruby-keyword kw">end</span>
2170:       <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
2171: 
2172:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2173:         <span class="ruby-identifier">puts</span>(<span class="ruby-node">&quot;Call param: #{tk}, #{@scanner.continue} &quot;</span> <span class="ruby-operator">+</span>
2174:           <span class="ruby-node">&quot;#{@scanner.lex_state} #{nest}&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
2175:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2176:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
2177:           <span class="ruby-keyword kw">break</span>
2178:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2179:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2180:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span>
2181:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
2182:             <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
2183:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
2184:           <span class="ruby-keyword kw">else</span>
2185:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
2186:           <span class="ruby-keyword kw">end</span>
2187:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span>
2188:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2189:     <span class="ruby-keyword kw">break</span>
2190:         <span class="ruby-keyword kw">end</span>
2191:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2192:       <span class="ruby-keyword kw">end</span>
2193:       <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">strip</span>
2194:       <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
2195:       <span class="ruby-identifier">res</span>
2196:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003934">
                    
                    <a name="M003934"></a><b>parse_class</b>(container, single, tk, comment, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003934_source')" id="l_M003934_source">show</a>
                        
                    </p>
                    <div id="M003934_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1733</span>
1733:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_class</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1734:       <span class="ruby-identifier">progress</span>(<span class="ruby-value str">&quot;c&quot;</span>)
1735: 
1736:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">num_classes</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1737: 
1738:       <span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_class_or_module</span>(<span class="ruby-identifier">container</span>)
1739: 
1740:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
1741:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span>
1742:   <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1743:         <span class="ruby-identifier">superclass</span> = <span class="ruby-value str">&quot;Object&quot;</span>
1744: 
1745:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek_tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkLT</span>)
1746:           <span class="ruby-identifier">get_tk</span>
1747:           <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">true</span>)
1748:           <span class="ruby-identifier">superclass</span> = <span class="ruby-identifier">get_class_specification</span>
1749:           <span class="ruby-identifier">superclass</span> = <span class="ruby-value str">&quot;&lt;unknown&gt;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">empty?</span>
1750:         <span class="ruby-keyword kw">end</span>
1751: 
1752:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>
1753:     <span class="ruby-identifier">cls_type</span> = <span class="ruby-constant">SingleClass</span>
1754:   <span class="ruby-keyword kw">else</span>
1755:     <span class="ruby-identifier">cls_type</span> = <span class="ruby-constant">NormalClass</span>
1756:   <span class="ruby-keyword kw">end</span>
1757: 
1758:         <span class="ruby-identifier">cls</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_class</span>(<span class="ruby-identifier">cls_type</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">superclass</span>)
1759:         <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">cls</span>, <span class="ruby-constant">CLASS_MODIFIERS</span>)
1760:         <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">record_location</span>(<span class="ruby-ivar">@top_level</span>)
1761:   <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">cls</span>)
1762:         <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
1763: 
1764:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLSHFT</span>
1765:   <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_class_specification</span>
1766:   <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;self&quot;</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>
1767:     <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-constant">SINGLE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1768:   <span class="ruby-keyword kw">else</span>
1769:           <span class="ruby-identifier">other</span> = <span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">find_class_named</span>(<span class="ruby-identifier">name</span>)
1770:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">other</span>
1771: <span class="ruby-comment cmt">#            other = @top_level.add_class(NormalClass, name, nil)</span>
1772: <span class="ruby-comment cmt">#            other.record_location(@top_level)</span>
1773: <span class="ruby-comment cmt">#            other.comment = comment</span>
1774:             <span class="ruby-identifier">other</span> = <span class="ruby-constant">NormalClass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Dummy&quot;</span>, <span class="ruby-keyword kw">nil</span>)
1775:           <span class="ruby-keyword kw">end</span>
1776:           <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">other</span>, <span class="ruby-constant">CLASS_MODIFIERS</span>)
1777:           <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">other</span>, <span class="ruby-constant">SINGLE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1778:   <span class="ruby-keyword kw">end</span>
1779: 
1780:       <span class="ruby-keyword kw">else</span>
1781:   <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Expected class name or '&lt;&lt;'. Got #{name_t.class}: #{name_t.text.inspect}&quot;</span>)
1782:       <span class="ruby-keyword kw">end</span>
1783:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003939">
                    
                    <a name="M003939"></a><b>parse_constant</b>(container, single, tk, comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003939_source')" id="l_M003939_source">show</a>
                        
                    </p>
                    <div id="M003939_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1827</span>
1827:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_constant</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1828:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1829:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1830:       <span class="ruby-identifier">eq_tk</span> = <span class="ruby-identifier">get_tk</span>
1831: 
1832:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">eq_tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkASSIGN</span>)
1833:         <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">eq_tk</span>)
1834:         <span class="ruby-keyword kw">return</span>
1835:       <span class="ruby-keyword kw">end</span>
1836: 
1837: 
1838:       <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1839:       <span class="ruby-identifier">get_tkread</span>
1840: 
1841:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1842:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">TkGT</span>
1843:         <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1844:         <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">eq_tk</span>)
1845:         <span class="ruby-keyword kw">return</span>
1846:       <span class="ruby-keyword kw">end</span>
1847: 
1848:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1849:         <span class="ruby-identifier">puts</span>(<span class="ruby-node">&quot;Param: #{tk}, #{@scanner.continue} &quot;</span> <span class="ruby-operator">+</span>
1850:           <span class="ruby-node">&quot;#{@scanner.lex_state} #{nest}&quot;</span>)  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
1851: 
1852:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1853:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
1854:           <span class="ruby-keyword kw">break</span>
1855:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
1856:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1857:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
1858:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1859:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span>
1860:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span>
1861:             <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1862:             <span class="ruby-keyword kw">break</span>
1863:           <span class="ruby-keyword kw">end</span>
1864:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>
1865:           <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>) <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
1866:             <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1867:             <span class="ruby-keyword kw">break</span>
1868:           <span class="ruby-keyword kw">end</span>
1869:         <span class="ruby-keyword kw">end</span>
1870:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1871:       <span class="ruby-keyword kw">end</span>
1872: 
1873:       <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">strip</span>
1874:       <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
1875:       <span class="ruby-identifier">con</span> = <span class="ruby-constant">Constant</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">comment</span>)
1876:       <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">con</span>, <span class="ruby-constant">CONSTANT_MODIFIERS</span>)
1877:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">con</span>.<span class="ruby-identifier">document_self</span>
1878:   <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_constant</span>(<span class="ruby-identifier">con</span>)
1879:       <span class="ruby-keyword kw">end</span>
1880:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003972">
                    
                    <a name="M003972"></a><b>parse_include</b>(context, comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003972_source')" id="l_M003972_source">show</a>
                        
                    </p>
                    <div id="M003972_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2433</span>
2433:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_include</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>)
2434:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2435:       <span class="ruby-identifier">skip_tkspace_comment</span>
2436:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_constant_with_optional_parens</span>
2437:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">empty?</span>
2438:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_include</span>(<span class="ruby-constant">Include</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">comment</span>))
2439:       <span class="ruby-keyword kw">end</span>
2440:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">peek_tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOMMA</span>)
2441:       <span class="ruby-identifier">get_tk</span>
2442:     <span class="ruby-keyword kw">end</span>
2443:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003942">
                    
                    <a name="M003942"></a><b>parse_method</b>(container, single, tk, comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003942_source')" id="l_M003942_source">show</a>
                        
                    </p>
                    <div id="M003942_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1882</span>
1882:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1883:       <span class="ruby-identifier">progress</span>(<span class="ruby-value str">&quot;.&quot;</span>)
1884:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">num_methods</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1885:       <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
1886:       <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
1887:       
1888:       <span class="ruby-identifier">start_collecting_tokens</span>
1889:       <span class="ruby-identifier">add_token</span>(<span class="ruby-identifier">tk</span>)
1890:       <span class="ruby-identifier">add_token_listener</span>(<span class="ruby-keyword kw">self</span>)
1891:       
1892:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span>}
1893:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1894:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1895:       <span class="ruby-identifier">back_tk</span> = <span class="ruby-identifier">skip_tkspace</span>
1896:       <span class="ruby-identifier">meth</span> = <span class="ruby-keyword kw">nil</span>
1897:       <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">false</span>
1898: 
1899:       <span class="ruby-identifier">dot</span> = <span class="ruby-identifier">get_tk</span>
1900:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dot</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkDOT</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">dot</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOLON2</span>)
1901:   <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span>}
1902:   <span class="ruby-identifier">skip_tkspace</span>
1903:   <span class="ruby-identifier">name_t2</span> = <span class="ruby-identifier">get_tk</span>
1904:   <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
1905:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSELF</span>
1906:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
1907:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span>
1908:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
1909:           <span class="ruby-identifier">prev_container</span> = <span class="ruby-identifier">container</span>
1910:           <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span>(<span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
1911:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">container</span>
1912:             <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">true</span>
1913:             <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;::&quot;</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-constant">Object</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span>, <span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
1914:               <span class="ruby-identifier">state</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">item</span>)
1915:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1916: 
1917:             <span class="ruby-identifier">type</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Class</span> <span class="ruby-value">? </span><span class="ruby-constant">NormalClass</span> <span class="ruby-operator">:</span> <span class="ruby-constant">NormalModule</span>
1918:             <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> [<span class="ruby-constant">Class</span>, <span class="ruby-constant">Module</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span>)
1919:               <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Couldn't find #{name_t.name}. Assuming it's a module&quot;</span>)
1920:             <span class="ruby-keyword kw">end</span>
1921: 
1922:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">NormalClass</span> <span class="ruby-keyword kw">then</span>
1923:               <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_class</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">name</span>)
1924:             <span class="ruby-keyword kw">else</span>
1925:               <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_module</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
1926:             <span class="ruby-keyword kw">end</span>
1927:           <span class="ruby-keyword kw">end</span>
1928:   <span class="ruby-keyword kw">else</span>
1929:     <span class="ruby-comment cmt"># warn(&quot;Unexpected token '#{name_t2.inspect}'&quot;)</span>
1930:     <span class="ruby-comment cmt"># break</span>
1931:           <span class="ruby-identifier">skip_method</span>(<span class="ruby-identifier">container</span>)
1932:           <span class="ruby-keyword kw">return</span>
1933:   <span class="ruby-keyword kw">end</span>
1934:   <span class="ruby-identifier">meth</span> =  <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>)
1935:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1936:       <span class="ruby-keyword kw">else</span>
1937:   <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">dot</span>
1938:   <span class="ruby-identifier">back_tk</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword kw">do</span>
1939:     <span class="ruby-operator">|</span><span class="ruby-identifier">tk</span><span class="ruby-operator">|</span>
1940:     <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1941:   <span class="ruby-keyword kw">end</span>
1942:   <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1943: 
1944:         <span class="ruby-identifier">meth</span> =  <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>)
1945:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = (<span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
1946:       <span class="ruby-keyword kw">end</span>
1947: 
1948:       <span class="ruby-identifier">remove_token_listener</span>(<span class="ruby-keyword kw">self</span>)
1949: 
1950:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
1951:       <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>,<span class="ruby-value">1</span>)
1952:       <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span>(<span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">column</span>)
1953: 
1954:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span>([<span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">line_no</span>,
1955:                                      <span class="ruby-value">1</span>,
1956:                                      <span class="ruby-node">&quot;# File #{@top_level.file_absolute_name}, line #{line_no}&quot;</span>),
1957:                         <span class="ruby-constant">NEWLINE_TOKEN</span>,
1958:                         <span class="ruby-identifier">indent</span>])
1959: 
1960:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span>(<span class="ruby-ivar">@token_stream</span>)
1961: 
1962:       <span class="ruby-identifier">add_token_listener</span>(<span class="ruby-identifier">meth</span>)
1963: 
1964:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>}
1965:       <span class="ruby-identifier">parse_method_parameters</span>(<span class="ruby-identifier">meth</span>)
1966: 
1967:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">document_self</span>
1968:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-identifier">meth</span>)
1969:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">added_container</span>
1970:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">false</span>
1971:       <span class="ruby-keyword kw">end</span>
1972: 
1973:       <span class="ruby-comment cmt"># Having now read the method parameters and documentation modifiers, we</span>
1974:       <span class="ruby-comment cmt"># now know whether we have to rename #initialize to ::new</span>
1975: 
1976:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;initialize&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span>
1977:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">dont_rename_initialize</span>
1978:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">:protected</span>
1979:         <span class="ruby-keyword kw">else</span>
1980:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1981:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;new&quot;</span>
1982:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">:public</span>
1983:         <span class="ruby-keyword kw">end</span>
1984:       <span class="ruby-keyword kw">end</span>
1985:       
1986:       <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">meth</span>)
1987:       
1988:       <span class="ruby-identifier">remove_token_listener</span>(<span class="ruby-identifier">meth</span>)
1989: 
1990:       <span class="ruby-comment cmt"># Look for a 'call-seq' in the comment, and override the</span>
1991:       <span class="ruby-comment cmt"># normal parameter stuff</span>
1992: 
1993:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/:?call-seq:(.*?)^\s*\#?\s*$/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">''</span>)
1994:         <span class="ruby-identifier">seq</span> = <span class="ruby-identifier">$1</span>
1995:         <span class="ruby-identifier">seq</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^\s*\#\s*/</span>, <span class="ruby-value str">''</span>)
1996:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">call_seq</span> = <span class="ruby-identifier">seq</span>
1997:       <span class="ruby-keyword kw">end</span>
1998:       
1999:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
2000: 
2001:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003945">
                    
                    <a name="M003945"></a><b>parse_method_or_yield_parameters</b>(method=nil, modifiers=METHOD_MODIFIERS)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003945_source')" id="l_M003945_source">show</a>
                        
                    </p>
                    <div id="M003945_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2026</span>
2026:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method_or_yield_parameters</span>(<span class="ruby-identifier">method</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">modifiers</span>=<span class="ruby-constant">METHOD_MODIFIERS</span>)
2027:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2028:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2029: 
2030:       <span class="ruby-comment cmt"># Little hack going on here. In the statement</span>
2031:       <span class="ruby-comment cmt">#  f = 2*(1+yield)</span>
2032:       <span class="ruby-comment cmt"># We see the RPAREN as the next token, so we need</span>
2033:       <span class="ruby-comment cmt"># to exit early. This still won't catch all cases</span>
2034:       <span class="ruby-comment cmt"># (such as &quot;a = yield + 1&quot;</span>
2035:       <span class="ruby-identifier">end_token</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2036:                   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2037:                     <span class="ruby-constant">TkRPAREN</span>
2038:                   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
2039:                     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
2040:                   <span class="ruby-keyword kw">else</span>
2041:                     <span class="ruby-constant">TkNL</span>
2042:                   <span class="ruby-keyword kw">end</span>
2043:       <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
2044: 
2045:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2046:         <span class="ruby-identifier">puts</span>(<span class="ruby-node">&quot;Param: #{tk.inspect}, #{@scanner.continue} &quot;</span> <span class="ruby-operator">+</span>
2047:           <span class="ruby-node">&quot;#{@scanner.lex_state} #{nest}&quot;</span>)  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
2048:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2049:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
2050:           <span class="ruby-keyword kw">break</span>
2051:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLBRACE</span>
2052:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2053:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRBRACE</span>
2054:           <span class="ruby-comment cmt"># we might have a.each {|i| yield i }</span>
2055:           <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
2056:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
2057:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
2058:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2059:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2060:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span>
2061:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
2062:             <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
2063:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
2064:           <span class="ruby-keyword kw">else</span>
2065:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
2066:           <span class="ruby-keyword kw">end</span>
2067:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">TkCOMMENT</span>
2068:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2069:     <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">modifiers</span>)
2070:         <span class="ruby-keyword kw">end</span>
2071:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2072:       <span class="ruby-keyword kw">end</span>
2073:       <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">strip</span>
2074:       <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
2075:       <span class="ruby-identifier">res</span>
2076:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003944">
                    
                    <a name="M003944"></a><b>parse_method_parameters</b>(method)
                    
                </div>
                
                <div class="description">
                  <p>
Capture the method&#8217;s parameters. Along the way, look for a comment
containing
</p>
<pre>
   # yields: ....
</pre>
<p>
and add this as the block_params for the method
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003944_source')" id="l_M003944_source">show</a>
                        
                    </p>
                    <div id="M003944_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2016</span>
2016:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method_parameters</span>(<span class="ruby-identifier">method</span>)
2017:       <span class="ruby-identifier">res</span> = <span class="ruby-identifier">parse_method_or_yield_parameters</span>(<span class="ruby-identifier">method</span>)
2018:       <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;(&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;)&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">res</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?(</span>
2019:       <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span> = <span class="ruby-identifier">res</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span>
2020:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span>
2021:           <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2022:     <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">method</span>, <span class="ruby-constant">METHOD_MODIFIERS</span>)
2023:       <span class="ruby-keyword kw">end</span>
2024:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003935">
                    
                    <a name="M003935"></a><b>parse_module</b>(container, single, tk, comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003935_source')" id="l_M003935_source">show</a>
                        
                    </p>
                    <div id="M003935_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1785</span>
1785:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_module</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1786:       <span class="ruby-identifier">progress</span>(<span class="ruby-value str">&quot;m&quot;</span>)
1787:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">num_modules</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1788:       <span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>  = <span class="ruby-identifier">get_class_or_module</span>(<span class="ruby-identifier">container</span>)
1789: <span class="ruby-comment cmt">#      skip_tkspace</span>
1790:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1791:       <span class="ruby-identifier">mod</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_module</span>(<span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name</span>)
1792:       <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">record_location</span>(<span class="ruby-ivar">@top_level</span>)
1793:       <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">mod</span>, <span class="ruby-constant">CLASS_MODIFIERS</span>)
1794:       <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">mod</span>)
1795:       <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
1796:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003971">
                    
                    <a name="M003971"></a><b>parse_require</b>(context, comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003971_source')" id="l_M003971_source">show</a>
                        
                    </p>
                    <div id="M003971_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2407</span>
2407:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_require</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>)
2408:     <span class="ruby-identifier">skip_tkspace_comment</span>
2409:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2410:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">TkLPAREN</span>
2411:       <span class="ruby-identifier">skip_tkspace_comment</span>
2412:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2413:     <span class="ruby-keyword kw">end</span>
2414: 
2415:     <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>
2416:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2417:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span>
2418:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
2419: <span class="ruby-comment cmt">#    when TkCONSTANT, TkIDENTIFIER, TkIVAR, TkGVAR</span>
2420: <span class="ruby-comment cmt">#      name = tk.name</span>
2421:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDSTRING</span>
2422:       <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipping require of dynamic string: #{tk.text}&quot;</span>
2423:  <span class="ruby-comment cmt">#   else</span>
2424:  <span class="ruby-comment cmt">#     warn &quot;'require' used as variable&quot;</span>
2425:     <span class="ruby-keyword kw">end</span>
2426:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span>
2427:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_require</span>(<span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">comment</span>))
2428:     <span class="ruby-keyword kw">else</span>
2429:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2430:     <span class="ruby-keyword kw">end</span>
2431:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003930">
                    
                    <a name="M003930"></a><b>parse_statements</b>(container, single=NORMAL, current_method=nil, comment='')
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003930_source')" id="l_M003930_source">show</a>
                        
                    </p>
                    <div id="M003930_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1577</span>
1577:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>=<span class="ruby-constant">NORMAL</span>, <span class="ruby-identifier">current_method</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">comment</span>=<span class="ruby-value str">''</span>)
1578:       <span class="ruby-identifier">nest</span> = <span class="ruby-value">1</span>
1579:       <span class="ruby-identifier">save_visibility</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">visibility</span>
1580:       
1581: <span class="ruby-comment cmt">#      if container.kind_of?(TopLevel)</span>
1582: <span class="ruby-comment cmt">#      else</span>
1583: <span class="ruby-comment cmt">#        comment = ''</span>
1584: <span class="ruby-comment cmt">#      end</span>
1585: 
1586:       <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span>
1587:       
1588:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1589:         
1590:         <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">false</span>
1591:         
1592:         <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOMMENT</span>)
1593:         
1594:   <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1595: 
1596:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>
1597:           <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">true</span>)   <span class="ruby-comment cmt"># Skip blanks and newlines</span>
1598:           <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1599:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOMMENT</span>)
1600:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_comment_seen</span>
1601:               <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>
1602:               <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">false</span>
1603:             <span class="ruby-keyword kw">end</span>
1604:             <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOMMENT</span>)
1605:               <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1606:               <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>          <span class="ruby-comment cmt"># this is the newline </span>
1607:               <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)  <span class="ruby-comment cmt"># leading spaces</span>
1608:               <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1609:             <span class="ruby-keyword kw">end</span>
1610:             <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1611:               <span class="ruby-identifier">look_for_directives_in</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>) 
1612:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">done_documenting</span>
1613:                 <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">save_visibility</span>
1614: <span class="ruby-comment cmt">#                return</span>
1615:               <span class="ruby-keyword kw">end</span>
1616:             <span class="ruby-keyword kw">end</span>
1617:             <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1618:           <span class="ruby-keyword kw">else</span>
1619:             <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span>
1620:           <span class="ruby-keyword kw">end</span>
1621:           <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1622:           <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1623: 
1624: 
1625:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCLASS</span>
1626:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_children</span>
1627:             <span class="ruby-identifier">parse_class</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1628:     <span class="ruby-keyword kw">else</span>
1629:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1630:           <span class="ruby-keyword kw">end</span>
1631: 
1632:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkMODULE</span>
1633:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_children</span>
1634:             <span class="ruby-identifier">parse_module</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1635:     <span class="ruby-keyword kw">else</span>
1636:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1637:           <span class="ruby-keyword kw">end</span>
1638: 
1639:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDEF</span>
1640:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span>
1641:       <span class="ruby-identifier">parse_method</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1642:     <span class="ruby-keyword kw">else</span>
1643:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1644:           <span class="ruby-keyword kw">end</span>
1645: 
1646:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span>
1647:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span>
1648:             <span class="ruby-identifier">parse_constant</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1649:           <span class="ruby-keyword kw">end</span>
1650: 
1651:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkALIAS</span>
1652:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span>
1653:       <span class="ruby-identifier">parse_alias</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1654:     <span class="ruby-keyword kw">end</span>
1655: 
1656:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkYIELD</span>
1657:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_method</span>.<span class="ruby-identifier">nil?</span>
1658:             <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;Warning: yield outside of method&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span>
1659:           <span class="ruby-keyword kw">else</span>
1660:             <span class="ruby-identifier">parse_yield</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">current_method</span>)
1661:           <span class="ruby-keyword kw">end</span>
1662: 
1663:           <span class="ruby-comment cmt"># Until and While can have a 'do', which shouldn't increas</span>
1664:           <span class="ruby-comment cmt"># the nesting. We can't solve the general case, but we can</span>
1665:           <span class="ruby-comment cmt"># handle most occurrences by ignoring a do at the end of a line</span>
1666: 
1667:         <span class="ruby-keyword kw">when</span>  <span class="ruby-constant">TkUNTIL</span>, <span class="ruby-constant">TkWHILE</span>
1668:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1669:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;FOUND #{tk.class} in #{container.name}, nest = #{nest}, &quot;</span> <span class="ruby-operator">+</span>
1670:             <span class="ruby-node">&quot;line #{tk.line_no}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
1671:           <span class="ruby-identifier">skip_optional_do_after_expression</span>
1672: 
1673:           <span class="ruby-comment cmt"># 'for' is trickier</span>
1674:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkFOR</span>
1675:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1676:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;FOUND #{tk.class} in #{container.name}, nest = #{nest}, &quot;</span> <span class="ruby-operator">+</span>
1677:             <span class="ruby-node">&quot;line #{tk.line_no}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
1678:           <span class="ruby-identifier">skip_for_variable</span>
1679:           <span class="ruby-identifier">skip_optional_do_after_expression</span>
1680: 
1681:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCASE</span>, <span class="ruby-constant">TkDO</span>, <span class="ruby-constant">TkIF</span>, <span class="ruby-constant">TkUNLESS</span>, <span class="ruby-constant">TkBEGIN</span>
1682:     <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1683:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Found #{tk.class} in #{container.name}, nest = #{nest}, &quot;</span> <span class="ruby-operator">+</span>
1684:             <span class="ruby-node">&quot;line #{tk.line_no}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
1685: 
1686:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkIDENTIFIER</span>
1687:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">current_method</span>.<span class="ruby-identifier">nil?</span>
1688:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1689:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;private&quot;</span>, <span class="ruby-value str">&quot;protected&quot;</span>, <span class="ruby-value str">&quot;public&quot;</span>,
1690:                  <span class="ruby-value str">&quot;private_class_method&quot;</span>, <span class="ruby-value str">&quot;public_class_method&quot;</span>
1691:               <span class="ruby-identifier">parse_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>)
1692:               <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1693:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr&quot;</span>
1694:               <span class="ruby-identifier">parse_attr</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1695:             <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^attr_(reader|writer|accessor)$/</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">extra_accessors</span>
1696:               <span class="ruby-identifier">parse_attr_accessor</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1697:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;alias_method&quot;</span>
1698:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span>
1699:           <span class="ruby-identifier">parse_alias</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1700:         <span class="ruby-keyword kw">end</span>
1701:             <span class="ruby-keyword kw">end</span>
1702:     <span class="ruby-keyword kw">end</span>
1703:     
1704:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1705:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;require&quot;</span>
1706:       <span class="ruby-identifier">parse_require</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>)
1707:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;include&quot;</span>
1708:       <span class="ruby-identifier">parse_include</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>)
1709:     <span class="ruby-keyword kw">end</span>
1710: 
1711: 
1712:   <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkEND</span>
1713:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1714:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Found 'end' in #{container.name}, nest = #{nest}, line #{tk.line_no}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
1715:           <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Method = #{current_method.name}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">current_method</span>
1716:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1717:             <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">container</span>, <span class="ruby-constant">CLASS_MODIFIERS</span>)
1718:             <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">save_visibility</span>
1719:             <span class="ruby-keyword kw">return</span>
1720:           <span class="ruby-keyword kw">end</span>
1721: 
1722:   <span class="ruby-keyword kw">end</span>
1723: 
1724:         <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">keep_comment</span>
1725:   <span class="ruby-keyword kw">begin</span>
1726:     <span class="ruby-identifier">get_tkread</span>
1727:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
1728:   <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkNL</span>
1729: 
1730:       <span class="ruby-keyword kw">end</span>
1731:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003978">
                    
                    <a name="M003978"></a><b>parse_symbol_arg</b>(no = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003978_source')" id="l_M003978_source">show</a>
                        
                    </p>
                    <div id="M003978_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2546</span>
2546:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_symbol_arg</span>(<span class="ruby-identifier">no</span> = <span class="ruby-keyword kw">nil</span>)
2547: 
2548:       <span class="ruby-identifier">args</span> = []
2549:       <span class="ruby-identifier">skip_tkspace_comment</span>
2550:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2551:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>
2552:   <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2553:     <span class="ruby-identifier">skip_tkspace_comment</span>
2554:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
2555:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk1</span>
2556:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
2557:     <span class="ruby-keyword kw">end</span>
2558:     
2559:     <span class="ruby-identifier">skip_tkspace_comment</span>
2560:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk2</span> = <span class="ruby-identifier">get_tk</span>
2561:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
2562:       <span class="ruby-keyword kw">break</span>
2563:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMA</span>
2564:     <span class="ruby-keyword kw">else</span>
2565:            <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;unexpected token: '#{tk2.inspect}'&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
2566:       <span class="ruby-keyword kw">break</span>
2567:     <span class="ruby-keyword kw">end</span>
2568:   <span class="ruby-keyword kw">end</span>
2569:       <span class="ruby-keyword kw">else</span>
2570:   <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
2571:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
2572:     <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
2573:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">args</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
2574:   <span class="ruby-keyword kw">end</span>
2575: 
2576:   <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2577: <span class="ruby-comment cmt">#   skip_tkspace_comment(false)</span>
2578:     <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2579: 
2580:     <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">get_tk</span>
2581:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tk1</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOMMA</span>) 
2582:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk1</span>
2583:       <span class="ruby-keyword kw">break</span>
2584:     <span class="ruby-keyword kw">end</span>
2585:     
2586:     <span class="ruby-identifier">skip_tkspace_comment</span>
2587:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
2588:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
2589:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
2590:     <span class="ruby-keyword kw">end</span>
2591:   <span class="ruby-keyword kw">end</span>
2592:       <span class="ruby-keyword kw">end</span>
2593:       <span class="ruby-identifier">args</span>
2594:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003979">
                    
                    <a name="M003979"></a><b>parse_symbol_in_arg</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003979_source')" id="l_M003979_source">show</a>
                        
                    </p>
                    <div id="M003979_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2596</span>
2596:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_symbol_in_arg</span>
2597:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2598:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span>
2599:         <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^:/</span>, <span class="ruby-value str">''</span>)
2600:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span>
2601:   <span class="ruby-identifier">eval</span> <span class="ruby-ivar">@read</span>[<span class="ruby-value">-1</span>]
2602:       <span class="ruby-keyword kw">else</span>
2603:   <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Expected symbol or string, got #{tk.inspect}&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
2604:   <span class="ruby-keyword kw">nil</span>
2605:       <span class="ruby-keyword kw">end</span>
2606:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003929">
                    
                    <a name="M003929"></a><b>parse_toplevel_statements</b>(container)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003929_source')" id="l_M003929_source">show</a>
                        
                    </p>
                    <div id="M003929_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1570</span>
1570:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_toplevel_statements</span>(<span class="ruby-identifier">container</span>)
1571:       <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">collect_first_comment</span>
1572:       <span class="ruby-identifier">look_for_directives_in</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>)
1573:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1574:       <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-constant">NORMAL</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">comment</span>)
1575:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003975">
                    
                    <a name="M003975"></a><b>parse_visibility</b>(container, single, tk)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003975_source')" id="l_M003975_source">show</a>
                        
                    </p>
                    <div id="M003975_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2482</span>
2482:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>)
2483:       <span class="ruby-identifier">singleton</span> = (<span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
2484:       <span class="ruby-identifier">vis</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
2485:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;private&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:private</span>
2486:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;protected&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:protected</span>
2487:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;public&quot;</span>    <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:public</span>
2488:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;private_class_method&quot;</span>
2489:               <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
2490:               <span class="ruby-identifier">:private</span>
2491:             <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;public_class_method&quot;</span>
2492:               <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
2493:               <span class="ruby-identifier">:public</span>
2494:             <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid visibility: #{tk.name}&quot;</span>
2495:             <span class="ruby-keyword kw">end</span>
2496:             
2497:       <span class="ruby-identifier">skip_tkspace_comment</span>(<span class="ruby-keyword kw">false</span>)
2498:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">peek_tk</span>
2499:         <span class="ruby-comment cmt"># Ryan Davis suggested the extension to ignore modifiers, because he</span>
2500:         <span class="ruby-comment cmt"># often writes</span>
2501:         <span class="ruby-comment cmt">#</span>
2502:         <span class="ruby-comment cmt">#   protected unless $TESTING</span>
2503:         <span class="ruby-comment cmt">#</span>
2504:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>, <span class="ruby-constant">TkUNLESS_MOD</span>, <span class="ruby-constant">TkIF_MOD</span>
2505: <span class="ruby-comment cmt">#        error(&quot;Missing argument&quot;) if singleton        </span>
2506:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">vis</span>
2507:       <span class="ruby-keyword kw">else</span>
2508:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
2509:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span>(<span class="ruby-identifier">args</span>, <span class="ruby-identifier">vis</span>, <span class="ruby-identifier">singleton</span>)
2510:       <span class="ruby-keyword kw">end</span>
2511:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003970">
                    
                    <a name="M003970"></a><b>parse_yield</b>(context, single, tk, method)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003970_source')" id="l_M003970_source">show</a>
                        
                    </p>
                    <div id="M003970_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2399</span>
2399:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_yield</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">method</span>)
2400:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span>
2401:       <span class="ruby-identifier">get_tkread</span>
2402:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>}
2403:       <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span> = <span class="ruby-identifier">parse_yield_parameters</span>
2404:     <span class="ruby-keyword kw">end</span>
2405:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003969">
                    
                    <a name="M003969"></a><b>parse_yield_parameters</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003969_source')" id="l_M003969_source">show</a>
                        
                    </p>
                    <div id="M003969_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2395</span>
2395:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_yield_parameters</span>
2396:       <span class="ruby-identifier">parse_method_or_yield_parameters</span>
2397:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003927">
                    
                    <a name="M003927"></a><b>peek_read</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003927_source')" id="l_M003927_source">show</a>
                        
                    </p>
                    <div id="M003927_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1532</span>
1532:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek_read</span>
1533:       <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">''</span>)
1534:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003923">
                    
                    <a name="M003923"></a><b>peek_tk</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003923_source')" id="l_M003923_source">show</a>
                        
                    </p>
                    <div id="M003923_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1501</span>
1501:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek_tk</span>
1502:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>)
1503:       <span class="ruby-identifier">tk</span>
1504:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003919">
                    
                    <a name="M003919"></a><b>progress</b>(char)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003919_source')" id="l_M003919_source">show</a>
                        
                    </p>
                    <div id="M003919_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1449</span>
1449:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">progress</span>(<span class="ruby-identifier">char</span>)
1450:       <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>
1451:         <span class="ruby-ivar">@progress</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">char</span>)
1452:   <span class="ruby-ivar">@progress</span>.<span class="ruby-identifier">flush</span>
1453:       <span class="ruby-keyword kw">end</span>
1454:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003959">
                    
                    <a name="M003959"></a><b>read_directive</b>(allowed)
                    
                </div>
                
                <div class="description">
                  <p>
Directives are modifier comments that can appear after class, module, or
method names. For example
</p>
<pre>
  def fred    # :yields:  a, b
</pre>
<p>
or
</p>
<pre>
  class SM  # :nodoc:
</pre>
<p>
we return the directive name and any parameters as a two element array
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003959_source')" id="l_M003959_source">show</a>
                        
                    </p>
                    <div id="M003959_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2254</span>
2254:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_directive</span>(<span class="ruby-identifier">allowed</span>)
2255:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2256:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;directive: #{tk.inspect}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
2257:       <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
2258:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkCOMMENT</span>) 
2259:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s*:?(\w+):\s*(.*)/</span>
2260:           <span class="ruby-identifier">directive</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">downcase</span>
2261:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">allowed</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">directive</span>)
2262:             <span class="ruby-identifier">result</span> = [<span class="ruby-identifier">directive</span>, <span class="ruby-identifier">$2</span>]
2263:           <span class="ruby-keyword kw">end</span>
2264:         <span class="ruby-keyword kw">end</span>
2265:       <span class="ruby-keyword kw">else</span>
2266:         <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
2267:       <span class="ruby-keyword kw">end</span>
2268:       <span class="ruby-identifier">result</span>
2269:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003960">
                    
                    <a name="M003960"></a><b>read_documentation_modifiers</b>(context, allow)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003960_source')" id="l_M003960_source">show</a>
                        
                    </p>
                    <div id="M003960_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2272</span>
2272:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_documentation_modifiers</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">allow</span>)
2273:       <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">read_directive</span>(<span class="ruby-identifier">allow</span>)
2274: 
2275:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">dir</span>[<span class="ruby-value">0</span>]
2276: 
2277:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;notnew&quot;</span>, <span class="ruby-value str">&quot;not_new&quot;</span>, <span class="ruby-value str">&quot;not-new&quot;</span>
2278:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">dont_rename_initialize</span> = <span class="ruby-keyword kw">true</span>
2279: 
2280:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;nodoc&quot;</span>
2281:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">false</span>
2282:   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;all&quot;</span>
2283:     <span class="ruby-identifier">context</span>.<span class="ruby-identifier">document_children</span> = <span class="ruby-keyword kw">false</span>
2284:   <span class="ruby-keyword kw">end</span>
2285: 
2286:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;doc&quot;</span>
2287:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">true</span>
2288:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">force_documentation</span> = <span class="ruby-keyword kw">true</span>
2289: 
2290:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;yield&quot;</span>, <span class="ruby-value str">&quot;yields&quot;</span>
2291:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">context</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">nil?</span>
2292:           <span class="ruby-identifier">context</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/(,|)\s*&amp;\w+/</span>,<span class="ruby-value str">''</span>) <span class="ruby-comment cmt"># remove parameter &amp;proc</span>
2293:         <span class="ruby-keyword kw">end</span>
2294:   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">block_params</span> = <span class="ruby-identifier">dir</span>[<span class="ruby-value">1</span>]
2295: 
2296:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;arg&quot;</span>, <span class="ruby-value str">&quot;args&quot;</span>
2297:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">params</span> = <span class="ruby-identifier">dir</span>[<span class="ruby-value">1</span>]
2298:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span>
2299:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003964">
                    
                    <a name="M003964"></a><b>remove_private_comments</b>(comment)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003964_source')" id="l_M003964_source">show</a>
                        
                    </p>
                    <div id="M003964_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2352</span>
2352:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_private_comments</span>(<span class="ruby-identifier">comment</span>)
2353:       <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^#--.*?^#\+\+/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">''</span>)
2354:       <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^#--.*/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">''</span>)
2355:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003921">
                    
                    <a name="M003921"></a><b>remove_token_listener</b>(obj)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003921_source')" id="l_M003921_source">show</a>
                        
                    </p>
                    <div id="M003921_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1461</span>
1461:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_token_listener</span>(<span class="ruby-identifier">obj</span>)
1462:       <span class="ruby-ivar">@token_listeners</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">obj</span>)
1463:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003946">
                    
                    <a name="M003946"></a><b>skip_for_variable</b>()
                    
                </div>
                
                <div class="description">
                  <p>
skip the var [in] part of a &#8216;for&#8217; statement
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003946_source')" id="l_M003946_source">show</a>
                        
                    </p>
                    <div id="M003946_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2079</span>
2079:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_for_variable</span>
2080:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2081:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2082:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2083:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2084:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkIN</span>)
2085:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003943">
                    
                    <a name="M003943"></a><b>skip_method</b>(container)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003943_source')" id="l_M003943_source">show</a>
                        
                    </p>
                    <div id="M003943_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2003</span>
2003:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_method</span>(<span class="ruby-identifier">container</span>)
2004:       <span class="ruby-identifier">meth</span> =  <span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;anon&quot;</span>)
2005:       <span class="ruby-identifier">parse_method_parameters</span>(<span class="ruby-identifier">meth</span>)
2006:       <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">meth</span>)
2007:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003947">
                    
                    <a name="M003947"></a><b>skip_optional_do_after_expression</b>()
                    
                </div>
                
                <div class="description">
                  <p>
while, until, and for have an optional
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003947_source')" id="l_M003947_source">show</a>
                        
                    </p>
                    <div id="M003947_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2088</span>
2088:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_optional_do_after_expression</span>
2089:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2090:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2091:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2092:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2093:         <span class="ruby-identifier">end_token</span> = <span class="ruby-constant">TkRPAREN</span>
2094:       <span class="ruby-keyword kw">else</span>
2095:         <span class="ruby-identifier">end_token</span> = <span class="ruby-constant">TkNL</span>
2096:       <span class="ruby-keyword kw">end</span>
2097: 
2098:       <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
2099:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span>}
2100: 
2101:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2102:         <span class="ruby-identifier">puts</span>(<span class="ruby-node">&quot;\nWhile: #{tk}, #{@scanner.continue} &quot;</span> <span class="ruby-operator">+</span>
2103:           <span class="ruby-node">&quot;#{@scanner.lex_state} #{nest}&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
2104:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
2105:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
2106:           <span class="ruby-keyword kw">break</span>
2107:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
2108:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
2109:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDO</span>
2110:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
2111:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span>
2112:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
2113:             <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
2114:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
2115:           <span class="ruby-keyword kw">else</span>
2116:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
2117:           <span class="ruby-keyword kw">end</span>
2118:         <span class="ruby-keyword kw">end</span>
2119:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
2120:       <span class="ruby-keyword kw">end</span>
2121:       <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-keyword kw">false</span>)
2122:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">peek_tk</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">TkDO</span>
2123:         <span class="ruby-identifier">get_tk</span>
2124:       <span class="ruby-keyword kw">end</span>
2125:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003925">
                    
                    <a name="M003925"></a><b>skip_tkspace</b>(skip_nl = true)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003925_source')" id="l_M003925_source">show</a>
                        
                    </p>
                    <div id="M003925_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1516</span>
1516:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-identifier">skip_nl</span> = <span class="ruby-keyword kw">true</span>)
1517:       <span class="ruby-identifier">tokens</span> = []
1518:       <span class="ruby-keyword kw">while</span> ((<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>).<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkSPACE</span>) <span class="ruby-operator">||</span>
1519:        (<span class="ruby-identifier">skip_nl</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">TkNL</span>)))
1520:   <span class="ruby-identifier">tokens</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
1521:       <span class="ruby-keyword kw">end</span>
1522:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1523:       <span class="ruby-identifier">tokens</span>
1524:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003977">
                    
                    <a name="M003977"></a><b>skip_tkspace_comment</b>(skip_nl = true)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003977_source')" id="l_M003977_source">show</a>
                        
                    </p>
                    <div id="M003977_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 2538</span>
2538:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_tkspace_comment</span>(<span class="ruby-identifier">skip_nl</span> = <span class="ruby-keyword kw">true</span>)
2539:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
2540:         <span class="ruby-identifier">skip_tkspace</span>(<span class="ruby-identifier">skip_nl</span>)
2541:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">peek_tk</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">TkCOMMENT</span>
2542:         <span class="ruby-identifier">get_tk</span>
2543:       <span class="ruby-keyword kw">end</span>
2544:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003924">
                    
                    <a name="M003924"></a><b>unget_tk</b>(tk)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003924_source')" id="l_M003924_source">show</a>
                        
                    </p>
                    <div id="M003924_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1506</span>
1506:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
1507:       <span class="ruby-ivar">@tokens</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">tk</span>
1508:       <span class="ruby-ivar">@unget_read</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">pop</span>
1509: 
1510:       <span class="ruby-comment cmt"># Remove this token from any listeners</span>
1511:       <span class="ruby-ivar">@token_listeners</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
1512:         <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">pop_token</span>
1513:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@token_listeners</span>
1514:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003917">
                    
                    <a name="M003917"></a><b>warn</b>(msg)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003917_source')" id="l_M003917_source">show</a>
                        
                    </p>
                    <div id="M003917_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1437</span>
1437:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">warn</span>(<span class="ruby-identifier">msg</span>)
1438:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>
1439:       <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">msg</span>
1440:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">msg</span>
1441:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M003913">
                    
                    <a name="M003913"></a><b>new</b>(top_level, file_name, content, options, stats)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003913_source')" id="l_M003913_source">show</a>
                        
                    </p>
                    <div id="M003913_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parsers/parse_rb.rb, line 1387</span>
1387:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">top_level</span>, <span class="ruby-identifier">file_name</span>, <span class="ruby-identifier">content</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">stats</span>)
1388:       <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
1389:       <span class="ruby-ivar">@stats</span>   = <span class="ruby-identifier">stats</span>
1390:       <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>
1391:       <span class="ruby-ivar">@token_listeners</span> = <span class="ruby-keyword kw">nil</span>
1392:       <span class="ruby-ivar">@input_file_name</span> = <span class="ruby-identifier">file_name</span>
1393:       <span class="ruby-ivar">@scanner</span> = <span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">content</span>)
1394:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">exception_on_syntax_error</span> = <span class="ruby-keyword kw">false</span>
1395:       <span class="ruby-ivar">@top_level</span> = <span class="ruby-identifier">top_level</span>
1396:       <span class="ruby-ivar">@progress</span> = <span class="ruby-identifier">$stderr</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">quiet</span>
1397:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    