<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.textile</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README.textile
        </h1>
        <ul class="files">
            <li>README.textile</li>
            <li>Last modified: Wed Jan 04 02:41:07 +0100 2012</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
h1. <a href="../classes/Formtastic.html">Formtastic</a>
</p>
<p>
<a href="../classes/Formtastic.html">Formtastic</a> is a Rails FormBuilder
DSL (with some other goodies) to make it far easier to create beautiful,
semantically rich, syntactically awesome, readily stylable and wonderfully
accessible HTML forms in your Rails applications.
</p>
<p>
<a href=&#8217;<a
href="http://www.pledgie.com/campaigns/2178'><img">www.pledgie.com/campaigns/2178'><img</a>
alt=&#8217;Click here to lend your support to: formtastic and make a
donation at <a href="http://www.pledgie.com">www.pledgie.com</a> !&#8217;
src=&#8217;<a
href="http://pledgie.com/campaigns/2178.png?skin_name=chrome">pledgie.com/campaigns/2178.png?skin_name=chrome</a>&#8217;
border=&#8217;0&#8217; /></a>
</p>
<p>
h2. Compatibility
</p>
<ul>
<li><a href="../classes/Formtastic.html">Formtastic</a> 2.0 is Rails 3.x
compatible only

</li>
<li><a href="../classes/Formtastic.html">Formtastic</a> 1.x is compatible with
both Rails 2 and 3, and is being maintained for bug fixes in the the
&#8220;1.2-stable branch&#8221;:<a
href="https://github.com/justinfrench/formtastic/tree/1.2-stable">github.com/justinfrench/formtastic/tree/1.2-stable</a>.
View the README in that branch for installation instructions, etc.

</li>
<li><a href="../classes/Formtastic.html">Formtastic</a>, much like Rails, is
very ActiveRecord-centric. Many are successfully using other
ActiveModel-like ORMs and objects (DataMapper, MongoMapper, Mongoid,
Authlogic, Devise&#8230;) but we&#8217;re not guaranteeing full
compatibility at this stage. Patches are welcome!

</li>
</ul>
<p>
h2. The Story
</p>
<p>
One day, I finally had enough, so I opened up my text editor, and wrote a
DSL for how I&#8217;d like to author forms:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @article do |form| %&gt;

    &lt;%= form.inputs :name =&gt; &quot;Basic&quot; do %&gt;
      &lt;%= form.input :title %&gt;
      &lt;%= form.input :body %&gt;
      &lt;%= form.input :section %&gt;
      &lt;%= form.input :publication_state, :as =&gt; :radio %&gt;
      &lt;%= form.input :category %&gt;
      &lt;%= form.input :allow_comments, :label =&gt; &quot;Allow commenting on this article&quot; %&gt;
    &lt;% end %&gt;

    &lt;%= form.inputs :name =&gt; &quot;Advanced&quot; do %&gt;
      &lt;%= form.input :keywords, :required =&gt; false, :hint =&gt; &quot;Example: ruby, rails, forms&quot; %&gt;
      &lt;%= form.input :extract, :required =&gt; false %&gt;
      &lt;%= form.input :description, :required =&gt; false %&gt;
      &lt;%= form.input :url_title, :required =&gt; false %&gt;
    &lt;% end %&gt;

    &lt;%= form.inputs :name =&gt; &quot;Author&quot;, :for =&gt; :author do |author_form| %&gt;
      &lt;%= author_form.input :first_name %&gt;
      &lt;%= author_form.input :last_name %&gt;
    &lt;% end %&gt;

    &lt;%= form.buttons do %&gt;
      &lt;%= form.commit_button %&gt;
    &lt;% end %&gt;

  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
I also wrote the accompanying HTML output I expected, favoring something
very similar to the fieldsets, lists and other semantic elements Aaron
Gustafson presented in &#8220;Learning to Love Forms&#8221;:<a
href="http://www.slideshare.net/AaronGustafson/learning-to-love-forms-web-directions-south-07">www.slideshare.net/AaronGustafson/learning-to-love-forms-web-directions-south-07</a>,
hacking together enough Ruby to prove it could be done.
</p>
<p>
h2. It&#8217;s awesome because...
</p>
<ul>
<li>it can handle @belongs_to@ associations (like Post belongs_to :author),
rendering a select or set of radio inputs with choices from the parent
model.

</li>
<li>it can handle @has_many@ and @has_and_belongs_to_many@ associations (like:
Post has_many :tags), rendering a multi-select with choices from the child
models.

</li>
<li>it&#8217;s Rails 3 compatible (including nested forms).

</li>
<li>it has internationalization (I18n)!

</li>
<li>it&#8217;s <em>really</em> quick to get started with a basic form in place
(4 lines), then go back to add in more detail if you need it.

</li>
<li>there&#8217;s heaps of elements, id and class attributes for you to hook in
your CSS and JS.

</li>
<li>it handles real world stuff like inline hints, inline error messages &amp;
help text.

</li>
<li>it doesn&#8217;t hijack or change any of the standard Rails form inputs, so
you can still use them as expected (even mix and match).

</li>
<li>it&#8217;s got absolutely awesome spec coverage.

</li>
<li>there&#8217;s a bunch of people using and working on it (it&#8217;s not
just one developer building half a solution).

</li>
<li>it has growing HTML5 support (new inputs like email/phone/search, new
attributes like required/min/max/step/placeholder)

</li>
</ul>
<p>
h2. Opinions
</p>
<ul>
<li>it should be easier to do things the right way than the wrong way.

</li>
<li>sometimes _more mark-up_ is better.

</li>
<li>elements and attribute hooks are <em>gold</em> for stylesheet authors.

</li>
<li>make the common things we do easy, yet ensure uncommon things are still
possible.

</li>
</ul>
<p>
h2. Documentation
</p>
<p>
RDoc documentation <em>should</em> be automatically generated after each
commit and made available on the &#8220;rdoc.info website&#8221;:<a
href="http://rdoc.info/projects/justinfrench/formtastic.">rdoc.info/projects/justinfrench/formtastic.</a>
</p>
<p>
h2. Installation
</p>
<p>
Simply add <a href="../classes/Formtastic.html">Formtastic</a> to your
Gemfile and bundle it up:
</p>
<p>
<pre>
</p>
<pre>
  gem 'formtastic'
</pre>
<p>
</pre>
</p>
<p>
Run the installation generator:
</p>
<p>
<pre>
</p>
<pre>
  $ rails generate formtastic:install
</pre>
<p>
</pre>
</p>
<p>
h2. Stylesheets
</p>
<p>
A proof-of-concept set of stylesheets are provided which you can include in
your layout. Customization is best achieved by overriding these styles in
an additional stylesheet.
</p>
<p>
h3. Stylesheet usage in Rails < 3.1:
</p>
<p>
<pre>
</p>
<pre>
  $ rails generate formtastic:install
</pre>
<p>
</pre>
</p>
<p>
<pre>
</p>
<pre>
  # app/views/layouts/application.html.erb
  &lt;%= stylesheet_link_tag 'formtastic', 'my_formtastic_changes' %&gt;
  &lt;!--[if IE 6]&gt;&lt;%= stylesheet_link_tag 'formtastic_ie6' %&gt;&lt;![endif]--&gt;
  &lt;!--[if IE 7]&gt;&lt;%= stylesheet_link_tag 'formtastic_ie7' %&gt;&lt;![endif]--&gt;
</pre>
<p>
</pre>
</p>
<p>
h3. Stylesheet usage in Rails >= 3.1:
</p>
<p>
Rails 3.1 introduces an asset pipeline that allows plugins like <a
href="../classes/Formtastic.html">Formtastic</a> to serve their own
Stylesheets, Javascripts, etc without having to run generators that copy
them accross to the host application. <a
href="../classes/Formtastic.html">Formtastic</a> makes three stylesheets
available as an Engine, you just need to require them in your global
stylesheets.
</p>
<p>
<pre>
</p>
<pre>
  # app/assets/stylesheets/application.css
  *= require formtastic
  *= require my_formtastic_changes

  # app/assets/stylesheets/ie6.css
  *= require formtastic_ie6

  # app/assets/stylesheets/ie7.css
  *= require formtastic_ie7
</pre>
<p>
</pre>
</p>
<p>
<pre>
</p>
<pre>
  # app/views/layouts/application.html.erb
  &lt;%= stylesheet_link_tag 'application' %&gt;
  &lt;!--[if IE 6]&gt;&lt;%= stylesheet_link_tag 'ie6' %&gt;&lt;![endif]--&gt;
  &lt;!--[if IE 7]&gt;&lt;%= stylesheet_link_tag 'ie7' %&gt;&lt;![endif]--&gt;
</pre>
<p>
</pre>
</p>
<p>
h2. Usage
</p>
<p>
Forms are really boring to code... you want to get onto the good stuff as
fast as possible.
</p>
<p>
This renders a set of inputs (one for <em>most</em> columns in the database
table, and one for each ActiveRecord @belongs_to@-association), followed by
a submit button:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @user do |form| %&gt;
    &lt;%= form.inputs %&gt;
    &lt;%= form.buttons %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
This is a great way to get something up fast, but like scaffolding,
it&#8217;s *not recommended for production*. Don&#8217;t be so lazy!
</p>
<p>
To specify the order of the fields, skip some of the fields or even add in
fields that <a href="../classes/Formtastic.html">Formtastic</a>
couldn&#8217;t infer. You can pass in a list of field names to @inputs@ and
list of button names to @buttons@:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @user do |form| %&gt;
    &lt;%= form.inputs :title, :body, :section, :categories, :created_at %&gt;
    &lt;%= form.buttons :commit %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
You probably want control over the input type <a
href="../classes/Formtastic.html">Formtastic</a> uses for each field. You
can expand the @inputs@ and @buttons@ to block helper format and use the
@:as@ option to specify an exact input type:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.inputs do %&gt;
      &lt;%= form.input :title %&gt;
      &lt;%= form.input :body %&gt;
      &lt;%= form.input :section, :as =&gt; :radio %&gt;
      &lt;%= form.input :categories %&gt;
      &lt;%= form.input :created_at, :as =&gt; :string %&gt;
    &lt;% end %&gt;
    &lt;%= form.buttons do %&gt;
      &lt;%= form.commit_button %&gt;
    &lt;% end %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
If you want to customize the label text, or render some hint text below the
field, specify which fields are required/optional, or break the form into
two fieldsets, the DSL is pretty comprehensive:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.inputs &quot;Basic&quot;, :id =&gt; &quot;basic&quot; do %&gt;
      &lt;%= form.input :title %&gt;
      &lt;%= form.input :body %&gt;
    &lt;% end %&gt;
    &lt;%= form.inputs :name =&gt; &quot;Advanced Options&quot;, :id =&gt; &quot;advanced&quot; do %&gt;
      &lt;%= form.input :slug, :label =&gt; &quot;URL Title&quot;, :hint =&gt; &quot;Created automatically if left blank&quot;, :required =&gt; false %&gt;
      &lt;%= form.input :section, :as =&gt; :radio %&gt;
      &lt;%= form.input :user, :label =&gt; &quot;Author&quot;, :member_label =&gt; :full_name %&gt;
      &lt;%= form.input :categories, :required =&gt; false %&gt;
      &lt;%= form.input :created_at, :as =&gt; :string, :label =&gt; &quot;Publication Date&quot;, :required =&gt; false %&gt;
    &lt;% end %&gt;
    &lt;%= form.buttons do %&gt;
      &lt;%= form.commit_button %&gt;
    &lt;% end %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
You can create forms for nested resources:
</p>
<p>
<pre>
</p>
<pre>
        &lt;%= semantic_form_for [@author, @post] do |form| %&gt;
</pre>
<p>
</pre>
</p>
<p>
Nested forms are also supported (don&#8217;t forget your models need to be
setup correctly with @accepts_nested_attributes_for@). You can do it in the
Rails way:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.inputs :title, :body, :created_at %&gt;
    &lt;%= form.semantic_fields_for :author do |author| %&gt;
      &lt;%= author.inputs :first_name, :last_name, :name =&gt; &quot;Author&quot; %&gt;
    &lt;% end %&gt;
    &lt;%= form.buttons %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
Or the <a href="../classes/Formtastic.html">Formtastic</a> way with the
@:for@ option:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.inputs :title, :body, :created_at %&gt;
    &lt;%= form.inputs :first_name, :last_name, :for =&gt; :author, :name =&gt; &quot;Author&quot; %&gt;
    &lt;%= form.buttons %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
When working in has many association, you can even supply
@&#8221;%i&#8221;@ in your fieldset name that it will be properly
interpolated with the child index. For example:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.inputs %&gt;
    &lt;%= form.inputs :name =&gt; 'Category #%i', :for =&gt; :categories %&gt;
    &lt;%= form.buttons %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
If you have more than one form on the same page, it may lead to HTML
invalidation because of the way HTML element id attributes are assigned.
You can provide a namespace for your form to ensure uniqueness of id
attributes on form elements. The namespace attribute will be prefixed with
underscore on the generate html id. For example:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for(@post, :namespace =&gt; 'cat_form') do |form| %&gt;
    &lt;%= form.input :title %&gt;        # id=&quot;cat_form_post_title&quot;
    &lt;%= form.input :body %&gt;         # id=&quot;cat_form_post_body&quot;
    &lt;%= form.input :created_at %&gt;   # id=&quot;cat_form_post_created_at&quot;
    &lt;%= form.buttons %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
Customize HTML attributes for any input using the @:input_html@ option.
Typically this is used to disable the input, change the size of a text
field, change the rows in a textarea, or even to add a special class to an
input to attach special behavior like &#8220;autogrow&#8221;:<a
href="http://plugins.jquery.com/project/autogrow">plugins.jquery.com/project/autogrow</a>
textareas:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.input :title,      :input_html =&gt; {  :cols =&gt; 10 } %&gt;
    &lt;%= form.input :body,       :input_html =&gt; { :class =&gt; 'autogrow', :rows =&gt; 10, :cols =&gt; 20, :maxlength =&gt; 10  } %&gt;
    &lt;%= form.input :created_at, :input_html =&gt; { :disabled =&gt; true } %&gt;
    &lt;%= form.buttons %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
The same can be done for buttons with the @:button_html@ option:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    ...
    &lt;%= form.buttons do %&gt;
      &lt;%= form.commit_button :button_html =&gt; { :class =&gt; &quot;primary&quot;, :disable_with =&gt; 'Wait...' } %&gt;
    &lt;% end %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
Customize the HTML attributes for the @<li>@ wrapper around every input
with the @:wrapper_html@ option hash. There&#8217;s one special key in the
hash (@:class@), which will actually <em>append</em> your string of classes
to the existing classes provided by <a
href="../classes/Formtastic.html">Formtastic</a> (like @&#8220;required
string error&#8221;@).
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.input :title, :wrapper_html =&gt; { :class =&gt; &quot;important&quot; } %&gt;
    &lt;%= form.input :body %&gt;
    &lt;%= form.input :description, :wrapper_html =&gt; { :style =&gt; &quot;display:none;&quot; } %&gt;
    ...
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
Customize the default class used for hints on each attribute or globally in
the @config/formtastic.rb@ file. Similarly you can customize the error
classes on an attribute level or globally.
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.input :title, :hint_class =&gt; 'custom-html-class', :error_class =&gt; 'custom-error-class' %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
Many inputs provide a collection of options to choose from (like @:select@,
@:radio@, @:check_boxes@, @:boolean@). In many cases, <a
href="../classes/Formtastic.html">Formtastic</a> can find choices through
the model associations, but if you want to use your own set of choices, the
@:collection@ option is what you want. You can pass in an Array of objects,
an array of Strings, a Hash&#8230; Throw almost anything at it! Examples:
</p>
<p>
<pre>
</p>
<pre>
  f.input :authors, :as =&gt; :check_boxes, :collection =&gt; User.find(:all, :order =&gt; &quot;last_name ASC&quot;)
  f.input :authors, :as =&gt; :check_boxes, :collection =&gt; current_user.company.users.active
  f.input :authors, :as =&gt; :check_boxes, :collection =&gt; [@justin, @kate]
  f.input :authors, :as =&gt; :check_boxes, :collection =&gt; [&quot;Justin&quot;, &quot;Kate&quot;, &quot;Amelia&quot;, &quot;Gus&quot;, &quot;Meg&quot;]
  f.input :author,  :as =&gt; :select,      :collection =&gt; Author.find(:all)
  f.input :author,  :as =&gt; :select,      :collection =&gt; { @justin.name =&gt; @justin.id, @kate.name =&gt; @kate.id }
  f.input :author,  :as =&gt; :select,      :collection =&gt; [&quot;Justin&quot;, &quot;Kate&quot;, &quot;Amelia&quot;, &quot;Gus&quot;, &quot;Meg&quot;]
  f.input :author,  :as =&gt; :radio,       :collection =&gt; User.find(:all)
  f.input :author,  :as =&gt; :radio,       :collection =&gt; [@justin, @kate]
  f.input :author,  :as =&gt; :radio,       :collection =&gt; { @justin.name =&gt; @justin.id, @kate.name =&gt; @kate.id }
  f.input :author,  :as =&gt; :radio,       :collection =&gt; [&quot;Justin&quot;, &quot;Kate&quot;, &quot;Amelia&quot;, &quot;Gus&quot;, &quot;Meg&quot;]
  f.input :admin,   :as =&gt; :radio,       :collection =&gt; [&quot;Yes!&quot;, &quot;No&quot;]
</pre>
<p>
</pre>
</p>
<p>
h2. The Available Inputs
</p>
<p>
The <a href="../classes/Formtastic.html">Formtastic</a> input types:
</p>
<ul>
<li>@:select@ - a select menu. Default for ActiveRecord associations:
@belongs_to@, @has_many@, and @has_and_belongs_to_many@.

</li>
<li>@:check_boxes@ - a set of check_box inputs. Alternative to @:select@ for
ActiveRecord-associations: @has_many@, and @has_and_belongs_to_many@.

</li>
<li>@:radio@ - a set of radio inputs. Alternative to @:select@ for
ActiveRecord-associations: @belongs_to@.

</li>
<li>@:time_zone@ - a select input. Default for column types: @:string@ with
name matching @&#8220;time_zone&#8220;@.

</li>
<li>@:password@ - a password input. Default for column types: @:string@ with
name matching @&#8220;password&#8221;@.

</li>
<li>@:text@ - a textarea. Default for column types: @:text@.

</li>
<li>@:date@ - a date select. Default for column types: @:date@.

</li>
<li>@:datetime@ - a date and time select. Default for column types: @:datetime@
and @:timestamp@.

</li>
<li>@:time@ - a time select. Default for column types: @:time@.

</li>
<li>@:boolean@ - a checkbox. Default for column types: @:boolean@.

</li>
<li>@:string@ - a text field. Default for column types: @:string@.

</li>
<li>@:number@ - a text field (just like string). Default for column types:
@:integer@, @:float@, and @:decimal@.

</li>
<li>@:file@ - a file field. Default for file-attachment attributes matching:
&#8220;paperclip&#8221;:<a
href="http://github.com/thoughtbot/paperclip">github.com/thoughtbot/paperclip</a>
or &#8220;attachment_fu&#8220;:<a
href="http://github.com/technoweenie/attachment_fu.">github.com/technoweenie/attachment_fu.</a>

</li>
<li>@:country@ - a select menu of country names. Default for column types:
:string with name @&#8220;country&#8221;@ - requires a
<b>country_select</b> plugin to be installed.

</li>
<li>@:email@ - a text field (just like string). Default for columns with name
matching @&#8220;email&#8221;@. New in HTML5. Works on some mobile browsers
already.

</li>
<li>@:url@ - a text field (just like string). Default for columns with name
matching @&#8220;url&#8221;@. New in HTML5. Works on some mobile browsers
already.

</li>
<li>@:phone@ - a text field (just like string). Default for columns with name
matching @&#8220;phone&#8221;@ or @&#8220;fax&#8221;@. New in HTML5.

</li>
<li>@:search@ - a text field (just like string). Default for columns with name
matching @&#8220;search&#8221;@. New in HTML5. Works on Safari.

</li>
<li>@:hidden@ - a hidden field. Creates a hidden field (added for
compatibility).

</li>
<li>@:range@ - a slider field.

</li>
</ul>
<p>
The comments in the code are pretty good for each of these (what it does,
what the output is, what the options are, etc.) so go check it out.
</p>
<p>
h2. Delegation for label lookups
</p>
<p>
<a href="../classes/Formtastic.html">Formtastic</a> decides which label to
use in the following order:
</p>
<p>
<pre>
</p>
<pre>
  1. :label             # :label =&gt; &quot;Choose Title&quot;
  2. Formtastic i18n    # if either :label =&gt; true || i18n_lookups_by_default = true (see Internationalization)
  3. Activerecord i18n  # if localization file found for the given attribute
  4. label_str_method   # if nothing provided this defaults to :humanize but can be set to a custom method
</pre>
<p>
</pre>
</p>
<p>
h2. Internationalization (I18n)
</p>
<p>
h3. Basic Localization
</p>
<p>
<a href="../classes/Formtastic.html">Formtastic</a> got some neat
I18n-features. ActiveRecord object names and attributes are, by default,
taken from calling @@object.human_name@ and
@@object.human_attribute_name(attr)@ respectively. There are a few words
specific to <a href="../classes/Formtastic.html">Formtastic</a> that can be
translated. See @<a href="lib/locale/en_yml.html">lib/locale/en.yml</a>@
for more information.
</p>
<p>
Basic localization (labels only, with ActiveRecord):
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.input :title %&gt;        # =&gt; :label =&gt; I18n.t('activerecord.attributes.user.title')    or 'Title'
    &lt;%= form.input :body %&gt;         # =&gt; :label =&gt; I18n.t('activerecord.attributes.user.body')     or 'Body'
    &lt;%= form.input :section %&gt;      # =&gt; :label =&gt; I18n.t('activerecord.attributes.user.section')  or 'Section'
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
<b>Note:</b> This is perfectly fine if you just want your labels/attributes
and/or models to be translated using *ActiveRecord I18n attribute
translations*, and you don&#8217;t use input hints and legends. But what if
you do? And what if you don&#8217;t want same labels in all forms?
</p>
<p>
h3. Enhanced Localization (<a
href="../classes/Formtastic.html">Formtastic</a> I18n API)
</p>
<p>
<a href="../classes/Formtastic.html">Formtastic</a> supports localized
<b>labels</b>, <b>hints</b>, <b>legends</b>, <b>actions</b> using the I18n
API for more advanced usage. Your forms can now be DRYer and more flexible
than ever, and still fully localized. This is how:
</p>
<p>
*1. Enable I18n lookups by default (@config/initializers/formtastic.rb@):*
</p>
<p>
<pre>
</p>
<pre>
  Formtastic::FormBuilder.i18n_lookups_by_default = true
</pre>
<p>
</pre>
</p>
<p>
*2. Add some cool label-translations/variants (@config/locale/en.yml@):*
</p>
<p>
<pre>
</p>
<pre>
  en:
    formtastic:
      titles:
        post_details: &quot;Post details&quot;
      labels:
        post:
          title: &quot;Your Title&quot;
          body: &quot;Write something...&quot;
          edit:
            title: &quot;Edit title&quot;
      hints:
        post:
          title: &quot;Choose a good title for you post.&quot;
          body: &quot;Write something inspiring here.&quot;
      placeholders:
        post:
          title: &quot;Title your post&quot;
          slug: &quot;Leave blank for an automatically generated slug&quot;
        user:
          email: &quot;you@yours.com&quot;
      actions:
        create: &quot;Create my %{model}&quot;
        update: &quot;Save changes&quot;
        dummie: &quot;Launch!&quot;
</pre>
<p>
</pre>
</p>
<p>
*3. &#8230;and now you&#8217;ll get:*
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for Post.new do |form| %&gt;
    &lt;%= form.inputs do %&gt;
      &lt;%= form.input :title %&gt;      # =&gt; :label =&gt; &quot;Choose a title...&quot;, :hint =&gt; &quot;Choose a good title for you post.&quot;
      &lt;%= form.input :body %&gt;       # =&gt; :label =&gt; &quot;Write something...&quot;, :hint =&gt; &quot;Write something inspiring here.&quot;
      &lt;%= form.input :section %&gt;    # =&gt; :label =&gt; I18n.t('activerecord.attributes.user.section')  or 'Section'
    &lt;% end %&gt;
    &lt;%= form.buttons do %&gt;
      &lt;%= form.commit_button %&gt;     # =&gt; &quot;Create my %{model}&quot;
    &lt;% end %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
*4. Localized titles (a.k.a. legends):*
</p>
<p>
_Note: Slightly different because <a
href="../classes/Formtastic.html">Formtastic</a> can&#8217;t guess how you
group fields in a form. Legend text can be set with first (as in the sample
below) specified value, or :name/:title options - depending on what flavor
is preferred._
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.inputs :post_details do %&gt;   # =&gt; :title =&gt; &quot;Post details&quot;
      # ...
    &lt;% end %&gt;
    # ...
</pre>
<p>
<% end %> </pre>
</p>
<p>
*5. Override I18n settings:*
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.inputs do %&gt;
      &lt;%= form.input :title %&gt;      # =&gt; :label =&gt; &quot;Choose a title...&quot;, :hint =&gt; &quot;Choose a good title for you post.&quot;
      &lt;%= form.input :body, :hint =&gt; false %&gt;                 # =&gt; :label =&gt; &quot;Write something...&quot;
      &lt;%= form.input :section, :label =&gt; 'Some section' %&gt;    # =&gt; :label =&gt; 'Some section'
    &lt;% end %&gt;
    &lt;%= form.buttons do %&gt;
      &lt;%= form.commit_button :dummie %&gt;     # =&gt; &quot;Launch!&quot;
    &lt;% end %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
If I18n-lookups is disabled, i.e.:
</p>
<p>
<pre>
</p>
<pre>
  Formtastic::FormBuilder.i18n_lookups_by_default = false
</pre>
<p>
</pre>
</p>
<p>
&#8230;then you can enable I18n within the forms instead:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.inputs do %&gt;
      &lt;%= form.input :title, :label =&gt; true %&gt;      # =&gt; :label =&gt; &quot;Choose a title...&quot;
      &lt;%= form.input :body, :label =&gt; true %&gt;       # =&gt; :label =&gt; &quot;Write something...&quot;
      &lt;%= form.input :section, :label =&gt; true %&gt;    # =&gt; :label =&gt; I18n.t('activerecord.attributes.user.section')  or 'Section'
    &lt;% end %&gt;
    &lt;%= form.buttons do %&gt;
      &lt;%= form.commit_button true %&gt;                # =&gt; &quot;Update %{model}&quot; (if we are in edit that is...)
    &lt;% end %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
*6. Advanced I18n lookups*
</p>
<p>
For more flexible forms; <a
href="../classes/Formtastic.html">Formtastic</a> find translations using a
bottom-up approach taking the following variables in account:
</p>
<ul>
<li>@MODEL@, e.g. &#8220;post&#8220;

</li>
<li>@ACTION@, e.g. &#8220;edit&#8220;

</li>
<li>@KEY/ATTRIBUTE@, e.g. &#8220;title&#8221;, :my_custom_key, &#8230;

</li>
</ul>
<p>
&#8230;in the following order:
</p>
<ol>
<li>@formtastic.{titles,labels,hints,actions}.MODEL.ACTION.ATTRIBUTE@ - by
model and action

</li>
<li>@formtastic.{titles,labels,hints,actions}.MODEL.ATTRIBUTE@ - by model

</li>
<li>@formtastic.{titles,labels,hints,actions}.ATTRIBUTE@ - global default

</li>
</ol>
<p>
&#8230;which means that you can define translations like this:
</p>
<p>
<pre>
</p>
<pre>
  en:
    formtastic:
      labels:
        title: &quot;Title&quot;  # Default global value
        article:
          body: &quot;Article content&quot;
        post:
          new:
            title: &quot;Choose a title...&quot;
            body: &quot;Write something...&quot;
          edit:
            title: &quot;Edit title&quot;
            body: &quot;Edit body&quot;
</pre>
<p>
</pre>
</p>
<p>
Values for @labels@/@hints@/@actions@ are can take values: @String@
(explicit value), @Symbol@ (i18n-lookup-key relative to the current
&#8220;type&#8221;, e.g. actions:), @true@ (force I18n lookup), @false@
(force no I18n lookup). Titles (legends) can only take: @String@ and
@Symbol@ - true/false have no meaning.
</p>
<p>
h2. Semantic errors
</p>
<p>
You can show errors on base (by default) and any other attribute just
passing it name to semantic_errors method:
</p>
<p>
<pre>
</p>
<pre>
  &lt;%= semantic_form_for @post do |form| %&gt;
    &lt;%= form.semantic_errors :state %&gt;
  &lt;% end %&gt;
</pre>
<p>
</pre>
</p>
<p>
h2. Modified &amp; Custom Inputs
</p>
<p>
If you want to change the behaviour of an input, you can subclass it in
your app. For example, to tweak @StringInput@, create a new file
@app/inputs/string_input.rb@:
</p>
<p>
<pre>
</p>
<pre>
  class StringInput &lt; Formtastic::Inputs::StringInput
    def to_html
      puts &quot;this is my modified version of StringInput&quot;
      super
    end
  end
</pre>
<p>
</pre>
</p>
<p>
To create your own new types of inputs based on existing inputs, the
process is similar:
</p>
<p>
<pre>
</p>
<pre>
  # f.input(:body, :as =&gt; :flexible_text)
  class FlexibleTextInput &lt; Formtastic::Inputs::StringInput
    def input_html_options
      super.merge(:class =&gt; &quot;flexible-text-area&quot;)
    end
  end
</pre>
<p>
</pre>
</p>
<p>
To create your own new types of inputs from scratch:
</p>
<p>
<pre>
</p>
<pre>
  # f.input(:created_at, :as =&gt; :date_picker)
  class DatePickerInput
    include Formtastic::Inputs::Base
    def to_html
      # ...
    end
  end
</pre>
<p>
</pre>
</p>
<p>
It was previously recommended in <a
href="../classes/Formtastic.html">Formtastic</a> 1.x to subclass <a
href="../classes/Formtastic/FormBuilder.html">Formtastic::FormBuilder</a>
to add your own inputs. This is no longer recommended in <a
href="../classes/Formtastic.html">Formtastic</a> 2, and will not work as
expected.
</p>
<p>
h2. Security
</p>
<p>
By default <a href="../classes/Formtastic.html">Formtastic</a> escapes html
entities in both labels and hints unless a string is marked as html_safe.
If you are using an older rails version which doesn&#8217;t know html_safe,
or you want to globally turn this feature off, you can set the following in
your initializer:
</p>
<p>
Formtastic::FormBuilder.escape_html_entities_in_hints_and_labels = false
</p>
<p>
h2. Dependencies
</p>
<p>
There are none, but...
</p>
<ul>
<li>if you want to use the @:country@ input, you&#8217;ll need to install the
&#8220;country-select plugin&#8221;:<a
href="https://github.com/chrislerum/country_select">github.com/chrislerum/country_select</a>
(or any other country_select plugin with the same API).

</li>
<li>&#8220;rspec&#8221;:<a
href="http://github.com/dchelimsky/rspec/">github.com/dchelimsky/rspec/</a>,
&#8220;rspec_hpricot_matchers&#8220;:<a
href="http://rubyforge.org/projects/rspec-hpricot">rubyforge.org/projects/rspec-hpricot</a>/
and &#8220;rcov&#8221;:<a
href="http://github.com/relevance/rcov">github.com/relevance/rcov</a> gems
(plus any of their own dependencies) are required for the test suite.

</li>
</ul>
<p>
h2. How to contribute
</p>
<p>
Please ensure that you provide appropriate spec/test coverage and ensure
the documentation is up-to-date. Bonus points if you perform your changes
in a clean topic branch rather than master, and if you create a pull
request for your changes to be discussed and reviewed.
</p>
<p>
Please also keep your commits <b>atomic</b> so that they are more likely to
apply cleanly. That means that each commit should contain the smallest
possible logical change. Don&#8217;t commit two features at once,
don&#8217;t update the gemspec at the same time you add a feature,
don&#8217;t fix a whole bunch of whitespace in a file at the same time you
change a few lines, etc, etc.
</p>
<p>
For significant changes, you may wish to discuss your idea on the <a
href="../classes/Formtastic.html">Formtastic</a> Google group before coding
to ensure that your change is likely to be accepted. <a
href="../classes/Formtastic.html">Formtastic</a> relies heavily on i18n, so
if you&#8217;re unsure of the impact this has on your changes, please
discuss them with the group.
</p>
<p>
See below for installation of a development environment.
</p>
<p>
h2. Google Group, Twitter, etc
</p>
<p>
Please join the &#8220;<a href="../classes/Formtastic.html">Formtastic</a>
Google Group&#8221;:<a
href="http://groups.google.com.au/group/formtastic">groups.google.com.au/group/formtastic</a>,
especially if you&#8217;d like to talk about a new feature, or report a
bug.
</p>
<p>
You can also &#8220;follow @formtastic on Twitter&#8221;:<a
href="http://twitter.com/formtastic">twitter.com/formtastic</a> for
announcements, tutorials and awesome <a
href="../classes/Formtastic.html">Formtastic</a> links.
</p>
<p>
h2. Project Info
</p>
<p>
<a href="../classes/Formtastic.html">Formtastic</a> was created by
&#8220;Justin French&#8221;:<a
href="http://www.justinfrench.com">www.justinfrench.com</a> with
contributions from over 100 awesome developers.
</p>
<p>
Run @git shortlog -n -s@ to see the awesome.
</p>
<p>
The project is hosted on Github: &#8220;<a
href="http://github.com/justinfrench/formtastic":http://github.com/justinfrench/formtastic">github.com/justinfrench/formtastic":http://github.com/justinfrench/formtastic</a>,
where your contributions, forkings, comments, issues and feedback are
greatly welcomed.
</p>
<p>
Copyright &#169; 2007-2010 Justin French, released under the MIT license.
</p>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>