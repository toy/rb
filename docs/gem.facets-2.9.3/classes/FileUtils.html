<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>FileUtils</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            FileUtils 
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/standard/facets/fileutils/amass_rb.html">lib/standard/facets/fileutils/amass.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/cp_rx_rb.html">lib/standard/facets/fileutils/cp_rx.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/ln_r_rb.html">lib/standard/facets/fileutils/ln_r.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/outofdate_rb.html">lib/standard/facets/fileutils/outofdate.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/safe_ln_rb.html">lib/standard/facets/fileutils/safe_ln.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/slice_rb.html">lib/standard/facets/fileutils/slice.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/stage_rb.html">lib/standard/facets/fileutils/stage.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/whereis_rb.html">lib/standard/facets/fileutils/whereis.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/wc_rb.html">lib/standard/facets/fileutils/wc.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/fileutils/which_rb.html">lib/standard/facets/fileutils/which.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000810">amass</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000812">copy_entryx</a>,</li>
                
                <li><a href="#M000811">cp_rx</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000819">head</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000814">link_entry</a>,</li>
                
                <li><a href="#M000813">ln_r</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000816">out_of_date?</a>,</li>
                
                <li><a href="#M000815">outofdate?</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000817">safe_ln</a>,</li>
                
                <li><a href="#M000818">slice</a>,</li>
                
                <li><a href="#M000821">stage</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000820">tail</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000825">wc</a>,</li>
                
                <li><a href="#M000826">whereis</a>,</li>
                
                <li><a href="#M000827">which</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="FileUtils/DryRun.html">FileUtils::DryRun</a></li>
        
        <li><span class="type">MODULE</span> <a href="FileUtils/NoWrite.html">FileUtils::NoWrite</a></li>
        
        <li><span class="type">MODULE</span> <a href="FileUtils/Verbose.html">FileUtils::Verbose</a></li>
        
        <li><span class="type">CLASS</span> <a href="FileUtils/Entry_.html">FileUtils::Entry_</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">OPT_TABLE</td>
            <td>=</td>
            <td class="attr-value">{} unless const_defined?(:OPT_TABLE)</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LINKING_SUPPORTED</td>
            <td>=</td>
            <td class="attr-value">[true]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">Win32Exts</td>
            <td>=</td>
            <td class="attr-value">%w{.exe .com .bat .cmd}</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">Win32Exts</td>
            <td>=</td>
            <td class="attr-value">%w{.exe .com .bat .cmd}</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000810">
                    
                    <a name="M000810"></a><b>amass</b>(include_globs, exclude_globs=[], ignore=[])
                    
                </div>
                
                <div class="description">
                  <p>
An intergrated glob like method that takes a set of include globs, exclude
globs and ignore globs to produce a collection of paths.
</p>
<p>
The ignore_globs differ from exclude_globs in that they match by the
basename of the path rather than the whole pathname.
</p>
<p>
TODO: Should ignore be based on any portion of the path, not just the
basename?
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000810_source')" id="l_M000810_source">show</a>
                        
                    </p>
                    <div id="M000810_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/amass.rb, line 13</span>
13:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">amass</span>(<span class="ruby-identifier">include_globs</span>, <span class="ruby-identifier">exclude_globs</span>=[], <span class="ruby-identifier">ignore</span>=[])
14: 
15:     <span class="ruby-identifier">include_files</span> = [<span class="ruby-identifier">include_globs</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">g</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
16:     <span class="ruby-identifier">exclude_files</span> = [<span class="ruby-identifier">exclude_globs</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">g</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
17: 
18:     <span class="ruby-identifier">include_files</span> = <span class="ruby-identifier">include_files</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">f</span>, <span class="ruby-value str">'**/*'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">f</span> } <span class="ruby-comment cmt"># Recursive!</span>
19:     <span class="ruby-identifier">exclude_files</span> = <span class="ruby-identifier">exclude_files</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">f</span>, <span class="ruby-value str">'**/*'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">f</span> } <span class="ruby-comment cmt"># Recursive!</span>
20: 
21:     <span class="ruby-identifier">include_files</span> = <span class="ruby-identifier">include_files</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">g</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
22:     <span class="ruby-identifier">exclude_files</span> = <span class="ruby-identifier">exclude_files</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">g</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
23: 
24:     <span class="ruby-identifier">files</span> = <span class="ruby-identifier">include_files</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">exclude_files</span>
25: 
26:     <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>.<span class="ruby-identifier">reject</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">ignore</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">any?</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">fnmatch?</span>(<span class="ruby-identifier">x</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">f</span>)) } }
27: 
28:     <span class="ruby-identifier">files</span>
29:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000812">
                    
                    <a name="M000812"></a><b>copy_entryx</b>(src, dest, filter, preserve = false, dereference_root = false, remove_destination = false)
                    
                </div>
                
                <div class="description">
                  <p>
Like FileUtils.copy_entry, but takes a filter proc that can return false to
skip a file.
</p>
<p>
Note that if the filter rejects a subdirectory then everything within that
subdirectory is automatically skipped as well.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000812_source')" id="l_M000812_source">show</a>
                        
                    </p>
                    <div id="M000812_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/cp_rx.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_entryx</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">filter</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword kw">false</span>)
33:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
34:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">filter</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ent</span>.<span class="ruby-identifier">path</span>) <span class="ruby-keyword kw">then</span>
35:         <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword kw">false</span>)
36:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
37:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
38:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">preserve</span>
39:       <span class="ruby-keyword kw">end</span>
40:     <span class="ruby-keyword kw">end</span>
41:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000811">
                    
                    <a name="M000811"></a><b>cp_rx</b>(src, dest, options = {}, &amp;filter)
                    
                </div>
                
                <div class="description">
                  <p>
Like FileUtils.cp_r, but takes a filter proc that can return false to skip
a file:
</p>
<pre>
  cp_rx &quot;bigDirectoryTree&quot;, &quot;dest&quot;, {:noop =&gt; true} do |name|
     /dontCopyThis$/.match(name)
  end
</pre>
<p>
Note that if the filter rejects a subdirectory then everything within that
subdirectory is automatically skipped as well.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000811_source')" id="l_M000811_source">show</a>
                        
                    </p>
                    <div id="M000811_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/cp_rx.rb, line 16</span>
16:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cp_rx</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">filter</span>)
17:     <span class="ruby-identifier">fu_check_options</span>(<span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cp_r'</span>])
18:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
19:       <span class="ruby-identifier">fu_output_message</span>(<span class="ruby-node">&quot;cp -r#{options[:preserve] ? 'p' : ''}#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span>)
20:     <span class="ruby-keyword kw">end</span>
21:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
22:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
23:       <span class="ruby-identifier">copy_entryx</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">filter</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:remove_destination</span>])
24:     <span class="ruby-keyword kw">end</span>
25:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000819">
                    
                    <a name="M000819"></a><b>head</b>(filename,lines)
                    
                </div>
                
                <div class="description">
                  <p>
In block form, yields the first number of <tt>lines</tt> of file
<tt>filename</tt>. In non-block form, it returns an array of the first
number of <tt>lines</tt>:
</p>
<pre>
  # Returns first 10 lines of 'myfile'
  FileUtils.head(&quot;myfile&quot;, 10)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000819_source')" id="l_M000819_source">show</a>
                        
                    </p>
                    <div id="M000819_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/slice.rb, line 25</span>
25:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">head</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">lines</span>) <span class="ruby-comment cmt">#:yield:</span>
26:     <span class="ruby-identifier">a</span> = []
27:     <span class="ruby-constant">IO</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">filename</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
28:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
29:         <span class="ruby-identifier">lines</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
30:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
31:           <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">line</span>
32:         <span class="ruby-keyword kw">else</span>
33:           <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
34:         <span class="ruby-keyword kw">end</span>
35:     }
36:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">a</span>
37:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000814">
                    
                    <a name="M000814"></a><b>link_entry</b>(src, dest, dereference_root = false, remove_destination = false)
                    
                </div>
                
                <div class="description">
                  <p>
Hard links a file system entry <tt>src</tt> to <tt>dest</tt>. If
<tt>src</tt> is a directory, this method links its contents recursively.
</p>
<p>
Both of <tt>src</tt> and <tt>dest</tt> must be a path name. <tt>src</tt>
must exist, <tt>dest</tt> must not exist.
</p>
<p>
If <tt>dereference_root</tt> is true, this method dereference tree root.
</p>
<p>
If <tt>remove_destination</tt> is true, this method removes each
destination file before copy.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000814_source')" id="l_M000814_source">show</a>
                        
                    </p>
                    <div id="M000814_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/ln_r.rb, line 55</span>
55:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword kw">false</span>)
56:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
57:         <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword kw">false</span>)
58:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
59:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
60:       <span class="ruby-keyword kw">end</span>
61:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000813">
                    
                    <a name="M000813"></a><b>ln_r</b>(src, dest, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Options: noop verbose dereference_root remove_destination
</p>
<p>
Hard link <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt> is a directory,
this method links all its contents recursively. If <tt>dest</tt> is a
directory, links <tt>src</tt> to <tt>dest/src</tt>.
</p>
<p>
<tt>src</tt> can be a list of files.
</p>
<pre>
  # Installing ruby library &quot;mylib&quot; under the site_ruby
  FileUtils.rm_r site_ruby + '/mylib', :force
  FileUtils.ln_r 'lib/', site_ruby + '/mylib'

  # Examples of copying several files to target directory.
  FileUtils.ln_r %w(mail.rb field.rb debug/), site_ruby + '/tmail'
  FileUtils.ln_r Dir.glob('*.rb'), '/home/aamine/lib/ruby', :noop =&gt; true, :verbose =&gt; true

  # If you want to copy all contents of a directory instead of the
  # directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,
  # use following code.
  FileUtils.ln_r 'src/.', 'dest'     # cp_r('src', 'dest') makes src/dest,
                                     # but this doesn't.
</pre>
<p>
TODO: Why &#8212;remove-destination and not just &#8212;force?
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000813_source')" id="l_M000813_source">show</a>
                        
                    </p>
                    <div id="M000813_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/ln_r.rb, line 29</span>
29:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
30:       <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln_r'</span>]
31:       <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -r#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
32:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
33:       <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
34:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>] = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:dereference_root</span>)
35:       <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
36:         <span class="ruby-identifier">link_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:remove_destination</span>]
37:       <span class="ruby-keyword kw">end</span>
38:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000816">
                    
                    <a name="M000816"></a><b>out_of_date?</b>(path, *sources)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FileUtils.html#M000815">outofdate?</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000815">
                    
                    <a name="M000815"></a><b>outofdate?</b>(path, *sources)
                    
                </div>
                
                <div class="description">
                  <p>
The opposite of uptodate?
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FileUtils.html#M000816">out_of_date?</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000815_source')" id="l_M000815_source">show</a>
                        
                    </p>
                    <div id="M000815_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/outofdate.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">outofdate?</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">sources</span>)
 8:     <span class="ruby-comment cmt">#return true unless File.exist?(path)</span>
 9:     <span class="ruby-operator">!</span> <span class="ruby-identifier">uptodate?</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">sources</span>.<span class="ruby-identifier">flatten</span>)
10:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000817">
                    
                    <a name="M000817"></a><b>safe_ln</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Attempt to do a normal file link, but fall back to a copy if the link
fails.
</p>
<p>
CREDIT: Jim Weirich
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000817_source')" id="l_M000817_source">show</a>
                        
                    </p>
                    <div id="M000817_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/safe_ln.rb, line 13</span>
13:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">safe_ln</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
14:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">LINKING_SUPPORTED</span>[<span class="ruby-value">0</span>]
15:       <span class="ruby-identifier">cp</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
16:     <span class="ruby-keyword kw">else</span>
17:       <span class="ruby-keyword kw">begin</span>
18:         <span class="ruby-identifier">ln</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
19:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EOPNOTSUPP</span>
20:         <span class="ruby-constant">LINKING_SUPPORTED</span>[<span class="ruby-value">0</span>] = <span class="ruby-keyword kw">false</span>
21:         <span class="ruby-identifier">cp</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
22:       <span class="ruby-keyword kw">end</span>
23:     <span class="ruby-keyword kw">end</span>
24:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000818">
                    
                    <a name="M000818"></a><b>slice</b>(filename,from,to)
                    
                </div>
                
                <div class="description">
                  <p>
In block form, yields lines <tt>from</tt>-<tt>to</tt>. In non-block form,
returns an array of lines <tt>from</tt>-<tt>to</tt>:
</p>
<pre>
  # Returns lines 8-12 of 'myfile'
  FileUtils.body(&quot;myfile&quot;,8,12)
</pre>
<p>
CREDIT Shashank <a href="Date.html">Date</a>, via Daniel Berger.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000818_source')" id="l_M000818_source">show</a>
                        
                    </p>
                    <div id="M000818_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/slice.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">slice</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">from</span>,<span class="ruby-identifier">to</span>) <span class="ruby-comment cmt">#:yield:</span>
16:     <span class="ruby-constant">IO</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">filename</span>)[<span class="ruby-identifier">from</span><span class="ruby-operator">-</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">to</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
17:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000821">
                    
                    <a name="M000821"></a><b>stage</b>(stage_directory, source_directory, files, options={})
                    
                </div>
                
                <div class="description">
                  <p>
Stage by hard linking included files to a stage directory.
</p>
<p>
stage_directory - Where to stage the files source_directory - Where to find
files to stage files - Files to link in stage relative to source
</p>
<p>
TODO: Rename to link_stage or something less likely to name clash? TODO:
Add options for :verbose, :noop and :dryrun ?
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000821_source')" id="l_M000821_source">show</a>
                        
                    </p>
                    <div id="M000821_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/stage.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stage</span>(<span class="ruby-identifier">stage_directory</span>, <span class="ruby-identifier">source_directory</span>, <span class="ruby-identifier">files</span>, <span class="ruby-identifier">options</span>={})
16:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">stage_directory</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dryrun</span>]
17: 
18:     <span class="ruby-identifier">stage_directory</span>, <span class="ruby-identifier">source_directory</span> = <span class="ruby-identifier">stage_directory</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">source_directory</span>.<span class="ruby-identifier">to_s</span>
19:     <span class="ruby-comment cmt">## ensure existance of staging area</span>
20:     <span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">stage_directory</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">stage_directory</span>)
21:     <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">stage_directory</span>)
22:     <span class="ruby-comment cmt">## link files into staging area</span>
23:     <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
24:       <span class="ruby-identifier">src</span>  = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">source_directory</span>, <span class="ruby-identifier">f</span>)
25:       <span class="ruby-identifier">file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">stage_directory</span>, <span class="ruby-identifier">f</span>)
26:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">src</span>)
27:         <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>)
28:       <span class="ruby-keyword kw">else</span>
29:         <span class="ruby-identifier">fdir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">file</span>)
30:         <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">fdir</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">fdir</span>)
31:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">file</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">src</span>)
32:           <span class="ruby-identifier">ln</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">file</span>) <span class="ruby-comment cmt">#safe_ln ?</span>
33:         <span class="ruby-keyword kw">end</span>
34:       <span class="ruby-keyword kw">end</span>
35:     <span class="ruby-keyword kw">end</span>
36:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">stage_directory</span>
37:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000820">
                    
                    <a name="M000820"></a><b>tail</b>(filename,lines)
                    
                </div>
                
                <div class="description">
                  <p>
In block form, yields the last number of <tt>lines</tt> of file
<tt>filename</tt>. In non-block form, it returns the lines as an array.
</p>
<p>
Note that this method slurps the entire file, so I don&#8217;t recommend it
for very large files. If you want an advanced form of <tt>tail</tt>, I
suggest using file-tail, by Florian Frank (available on the RAA):
</p>
<pre>
  # Returns last 3 lines of 'myfile'
  FileUtils.tail(&quot;myfile&quot;,3)
</pre>
<p>
And no tail -f.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000820_source')" id="l_M000820_source">show</a>
                        
                    </p>
                    <div id="M000820_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/slice.rb, line 50</span>
50:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tail</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">lines</span>) <span class="ruby-comment cmt">#:yield</span>
51:     <span class="ruby-constant">IO</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">reverse</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">lines</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">reverse</span>
52:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000825">
                    
                    <a name="M000825"></a><b>wc</b>(filename,option='all')
                    
                </div>
                
                <div class="description">
                  <p>
With no arguments, returns a four element array consisting of the number of
bytes, characters, words and lines in <em>filename</em>, respectively.
</p>
<p>
Valid options are <tt>bytes</tt>, <tt>characters</tt> (or just
&#8216;chars&#8217;), <tt>words</tt> and <tt>lines</tt>:
</p>
<pre>
  # Return the number of words in 'myfile'
  FileUtils.wc(&quot;myfile&quot;,'words')
</pre>
<p>
CREDIT: Daniel J. Berger
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000825_source')" id="l_M000825_source">show</a>
                        
                    </p>
                    <div id="M000825_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/wc.rb, line 17</span>
17:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wc</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">option</span>=<span class="ruby-value str">'all'</span>)
18:     <span class="ruby-identifier">option</span>.<span class="ruby-identifier">downcase!</span>
19:     <span class="ruby-identifier">valid</span> = <span class="ruby-node">%w/all bytes characters chars lines words/</span>
20: 
21:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">valid</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">option</span>)
22:         <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid option: '#{option}'&quot;</span>
23:     <span class="ruby-keyword kw">end</span>
24: 
25:     <span class="ruby-identifier">n</span> = <span class="ruby-value">0</span>
26:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'lines'</span>
27:         <span class="ruby-constant">IO</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> }
28:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">n</span>
29:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'bytes'</span>
30:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
31:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">each_byte</span>{ <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> }
32:         }
33:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">n</span>
34:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'characters'</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'chars'</span>
35:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
36:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">getc</span>
37:               <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
38:           <span class="ruby-keyword kw">end</span>
39:         }
40:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">n</span>
41:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'words'</span>
42:         <span class="ruby-constant">IO</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
43:           <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>.<span class="ruby-identifier">length</span>
44:         }
45:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">n</span>
46:     <span class="ruby-keyword kw">else</span>
47:         <span class="ruby-identifier">bytes</span>,<span class="ruby-identifier">chars</span>,<span class="ruby-identifier">lines</span>,<span class="ruby-identifier">words</span> = <span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>
48:         <span class="ruby-constant">IO</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
49:           <span class="ruby-identifier">lines</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
50:           <span class="ruby-identifier">words</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>.<span class="ruby-identifier">length</span>
51:           <span class="ruby-identifier">chars</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">''</span>).<span class="ruby-identifier">length</span>
52:         }
53:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
54:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">getc</span>
55:               <span class="ruby-identifier">bytes</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
56:           <span class="ruby-keyword kw">end</span>
57:         }
58:         <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">bytes</span>,<span class="ruby-identifier">chars</span>,<span class="ruby-identifier">words</span>,<span class="ruby-identifier">lines</span>]
59:     <span class="ruby-keyword kw">end</span>
60:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000826">
                    
                    <a name="M000826"></a><b>whereis</b>(prog, path=ENV['PATH'])
                    
                </div>
                
                <div class="description">
                  <p>
In block form, yields each ((<b>program</b>)) within ((<b>path</b>)). In
non-block form, returns an array of each ((<b>program</b>)) within
((<b>path</b>)). Returns (({nil})) if not found.
</p>
<p>
On the MS Windows platform, it looks for executables ending with .exe, .bat
and .com, which you may optionally include in the program name:
</p>
<pre>
   FileUtils.whereis(&quot;ruby&quot;)  #=&gt; ['/usr/local/bin/ruby','/opt/bin/ruby']
</pre>
<p>
CREDIT: Daniel J. Berger
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000826_source')" id="l_M000826_source">show</a>
                        
                    </p>
                    <div id="M000826_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/whereis.rb, line 25</span>
25:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">whereis</span>(<span class="ruby-identifier">prog</span>, <span class="ruby-identifier">path</span>=<span class="ruby-constant">ENV</span>[<span class="ruby-value str">'PATH'</span>]) <span class="ruby-comment cmt">#:yield:</span>
26:     <span class="ruby-identifier">dirs</span> = []
27:     <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH_SEPARATOR</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
28:         <span class="ruby-comment cmt"># Windows checks against specific extensions</span>
29:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">ALT_SEPARATOR</span>
30:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prog</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'.'</span>)
31:               <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span>)
32:               <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
33:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
34:                     <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\//</span>,<span class="ruby-value str">'\\'</span>)
35:                 <span class="ruby-keyword kw">else</span>
36:                     <span class="ruby-identifier">dirs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\//</span>,<span class="ruby-value str">'\\'</span>)
37:                 <span class="ruby-keyword kw">end</span>
38:               <span class="ruby-keyword kw">end</span>
39:           <span class="ruby-keyword kw">else</span>
40:               <span class="ruby-constant">Win32Exts</span>.<span class="ruby-identifier">find_all</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
41:                 <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span><span class="ruby-operator">+</span><span class="ruby-identifier">ext</span>)
42:                 <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
43:                     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
44:                       <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\//</span>,<span class="ruby-value str">'\\'</span>)
45:                     <span class="ruby-keyword kw">else</span>
46:                       <span class="ruby-identifier">dirs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\//</span>,<span class="ruby-value str">'\\'</span>)
47:                     <span class="ruby-keyword kw">end</span>
48:                 <span class="ruby-keyword kw">end</span>
49:               }
50:           <span class="ruby-keyword kw">end</span>
51:         <span class="ruby-keyword kw">else</span>
52:           <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span>)
53:           <span class="ruby-comment cmt"># Avoid /usr/lib/ruby, for example</span>
54:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
55:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
56:                 <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">f</span>
57:               <span class="ruby-keyword kw">else</span>
58:                 <span class="ruby-identifier">dirs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>
59:               <span class="ruby-keyword kw">end</span>
60:           <span class="ruby-keyword kw">end</span>
61:         <span class="ruby-keyword kw">end</span>
62:     }
63:     <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">dirs</span>
64:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000827">
                    
                    <a name="M000827"></a><b>which</b>(prog, path=ENV['PATH'])
                    
                </div>
                
                <div class="description">
                  <p>
Looks for the first occurrence of <em>program</em> within <em>path</em>.
</p>
<p>
On the MS Windows platform, it looks for executables ending with .exe, .bat
and .com, which you may optionally include in the program name. Returns
<tt>nil</tt> if not found.
</p>
<p>
CREDIT: Daniel J. Berger, Michael Granger
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000827_source')" id="l_M000827_source">show</a>
                        
                    </p>
                    <div id="M000827_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/fileutils/which.rb, line 27</span>
27:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">which</span>(<span class="ruby-identifier">prog</span>, <span class="ruby-identifier">path</span>=<span class="ruby-constant">ENV</span>[<span class="ruby-value str">'PATH'</span>])
28:     <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH_SEPARATOR</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
29:       <span class="ruby-comment cmt"># Windows checks against specific extensions</span>
30:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">ALT_SEPARATOR</span>
31:         <span class="ruby-identifier">ext</span> = <span class="ruby-constant">Win32Exts</span>.<span class="ruby-identifier">find</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
32:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prog</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'.'</span>) <span class="ruby-comment cmt"># Assume extension already included</span>
33:             <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span>)
34:           <span class="ruby-keyword kw">else</span>
35:             <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span><span class="ruby-operator">+</span><span class="ruby-identifier">ext</span>)
36:           <span class="ruby-keyword kw">end</span>
37:           <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
38:         }
39:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ext</span>
40:           <span class="ruby-comment cmt"># Use backslashes, not forward slashes</span>
41:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prog</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'.'</span>) <span class="ruby-comment cmt"># Assume extension already included</span>
42:             <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>( <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">prog</span> ).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\//</span>,<span class="ruby-value str">'\\'</span>)
43:           <span class="ruby-keyword kw">else</span>
44:             <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>( <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">prog</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">ext</span> ).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\//</span>,<span class="ruby-value str">'\\'</span>)
45:           <span class="ruby-keyword kw">end</span>
46:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">f</span>
47:         <span class="ruby-keyword kw">end</span>
48:       <span class="ruby-keyword kw">else</span>
49:         <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span>)
50:         <span class="ruby-comment cmt"># Avoid /usr/lib/ruby, for example</span>
51:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
52:           <span class="ruby-keyword kw">return</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-identifier">join</span>( <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">prog</span> )
53:         <span class="ruby-keyword kw">end</span>
54:       <span class="ruby-keyword kw">end</span>
55:     }
56:     <span class="ruby-keyword kw">nil</span>
57:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    