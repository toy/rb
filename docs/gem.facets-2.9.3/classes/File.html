<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>File</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            File 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/core/facets/file/atomic_id_rb.html">lib/core/facets/file/atomic_id.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/append_rb.html">lib/core/facets/file/append.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/atomic_open_rb.html">lib/core/facets/file/atomic_open.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/atomic_write_rb.html">lib/core/facets/file/atomic_write.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/create_rb.html">lib/core/facets/file/create.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/ext_rb.html">lib/core/facets/file/ext.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/null_rb.html">lib/core/facets/file/null.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/read_binary_rb.html">lib/core/facets/file/read_binary.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/read_list_rb.html">lib/core/facets/file/read_list.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/rewrite_rb.html">lib/core/facets/file/rewrite.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/rootname_rb.html">lib/core/facets/file/rootname.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/sanitize_rb.html">lib/core/facets/file/sanitize.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/split_all_rb.html">lib/core/facets/file/split_all.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/split_root_rb.html">lib/core/facets/file/split_root.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/write_rb.html">lib/core/facets/file/write.rb</a></li>
            
            <li><a href="../files/lib/core/facets/file/writelines_rb.html">lib/core/facets/file/writelines.rb</a></li>
            
            <li><a href="../files/lib/standard/facets/yaml_rb.html">lib/standard/facets/yaml.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000155">append</a>,</li>
                
                <li><a href="#M000156">atomic_id</a>,</li>
                
                <li><a href="#M000157">atomic_open</a>,</li>
                
                <li><a href="#M000158">atomic_write</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000159">create</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000160">ext</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000161">null</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000162">read_binary</a>,</li>
                
                <li><a href="#M000163">read_list</a>,</li>
                
                <li><a href="#M000164">rewrite</a>,</li>
                
                <li><a href="#M000166">rewrite!</a>,</li>
                
                <li><a href="#M000165">rootname</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000167">sanitize</a>,</li>
                
                <li><a href="#M000168">split_all</a>,</li>
                
                <li><a href="#M000169">split_root</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000170">write</a>,</li>
                
                <li><a href="#M000171">writelines</a></li>
                
            </ul>
        </dd>
    
        <dt>Y</dt>
        <dd>
            <ul>
                
                <li><a href="#M001190">yaml?</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000155">
                    
                    <a name="M000155"></a><b>append</b>(file, str)
                    
                </div>
                
                <div class="description">
                  <p>
Append to a file.
</p>
<p>
CREDIT: George Moschovitis
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show</a>
                        
                    </p>
                    <div id="M000155_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/append.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">str</span>)
 8:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">file</span>, <span class="ruby-value str">'ab'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
 9:       <span class="ruby-identifier">f</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
10:     }
11:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000156">
                    
                    <a name="M000156"></a><b>atomic_id</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000156_source')" id="l_M000156_source">show</a>
                        
                    </p>
                    <div id="M000156_source" class="dyn-source">
                        <pre>   <span class="ruby-comment cmt"># File lib/core/facets/file/atomic_id.rb, line 4</span>
4:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">atomic_id</span>
5:     <span class="ruby-ivar">@atomic_id</span> <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
6:     <span class="ruby-ivar">@atomic_id</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
7:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000157">
                    
                    <a name="M000157"></a><b>atomic_open</b>(file_name, mode=&quot;r&quot;, temp_dir=nil, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Same as `File.open`, but acts on a temporary copy of named file, copying
the file back to the original on completion.
</p>
<p>
@uncommon
</p>
<pre>
  require 'facets/fileutils/atomic_open'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show</a>
                        
                    </p>
                    <div id="M000157_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/atomic_open.rb, line 13</span>
13:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">atomic_open</span>(<span class="ruby-identifier">file_name</span>, <span class="ruby-identifier">mode</span>=<span class="ruby-value str">&quot;r&quot;</span>, <span class="ruby-identifier">temp_dir</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
14:     <span class="ruby-identifier">temp_dir</span>  = <span class="ruby-identifier">temp_dir</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">tmpdir</span>
15:     <span class="ruby-identifier">temp_file</span> = <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{aomtic_id}-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">basename</span>(<span class="ruby-identifier">file_name</span>), <span class="ruby-identifier">temp_dir</span>)
16: 
17:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file_name</span>)
18:       <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">file_name</span>, <span class="ruby-identifier">temp_file</span>)
19:     <span class="ruby-keyword kw">end</span>
20: 
21:     <span class="ruby-identifier">open</span>(<span class="ruby-identifier">temp_file</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
22: 
23:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">temp_file</span>, <span class="ruby-identifier">file_name</span>)
24:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000158">
                    
                    <a name="M000158"></a><b>atomic_write</b>(file_name, temp_dir=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Write to a file atomically. Useful for situations where you don&#8217;t
want other processes or threads to see half-written files.
</p>
<pre>
  File.atomic_write(&quot;important.txt&quot;) do |file|
    file.write(&quot;hello&quot;)
  end
</pre>
<p>
If your temporary directory is not on the same filesystem as the file
you&#8217;re trying to write, you can provide a different temporary
directory.
</p>
<pre>
  File.atomic_write(&quot;important.txt&quot;, &quot;tmp&quot;) do |file|
    file.write(&quot;hello&quot;)
  end
</pre>
<p>
NOTE: This method is not a common core extension and is not loaded
automatically when using <tt>require 'facets'</tt>.
</p>
<p>
CREDIT: David Heinemeier Hansson
</p>
<p>
@uncommon
</p>
<pre>
  require 'facets/fileutils/atomic_write'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show</a>
                        
                    </p>
                    <div id="M000158_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/atomic_write.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">atomic_write</span>(<span class="ruby-identifier">file_name</span>, <span class="ruby-identifier">temp_dir</span>=<span class="ruby-keyword kw">nil</span>)
33:     <span class="ruby-identifier">temp_dir</span>  = <span class="ruby-identifier">temp_dir</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">tmpdir</span>
34:     <span class="ruby-identifier">temp_file</span> = <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">file_name</span>), <span class="ruby-identifier">temp_dir</span>)
35: 
36:     <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">temp_file</span>
37:     <span class="ruby-identifier">temp_file</span>.<span class="ruby-identifier">close</span>
38: 
39:     <span class="ruby-keyword kw">begin</span>
40:       <span class="ruby-comment cmt">## Get original file permissions</span>
41:       <span class="ruby-identifier">old_stat</span> = <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">file_name</span>)
42:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
43:       <span class="ruby-comment cmt">## No old permissions, write a temp file to determine the defaults</span>
44:       <span class="ruby-identifier">check_name</span> = <span class="ruby-identifier">join</span>(<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">file_name</span>), <span class="ruby-node">&quot;.permissions_check.#{Thread.current.object_id}.#{Process.pid}.#{rand(1000000)}&quot;</span>)
45:       <span class="ruby-identifier">open</span>(<span class="ruby-identifier">check_name</span>, <span class="ruby-value str">&quot;w&quot;</span>) { }
46:       <span class="ruby-identifier">old_stat</span> = <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">check_name</span>)
47:       <span class="ruby-identifier">unlink</span>(<span class="ruby-identifier">check_name</span>)
48:     <span class="ruby-keyword kw">end</span>
49: 
50:     <span class="ruby-comment cmt">## Overwrite original file with temp file</span>
51:     <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span>(<span class="ruby-identifier">temp_file</span>.<span class="ruby-identifier">path</span>, <span class="ruby-identifier">file_name</span>)
52: 
53:     <span class="ruby-comment cmt">## Set correct permissions on new file</span>
54:     <span class="ruby-identifier">chown</span>(<span class="ruby-identifier">old_stat</span>.<span class="ruby-identifier">uid</span>, <span class="ruby-identifier">old_stat</span>.<span class="ruby-identifier">gid</span>, <span class="ruby-identifier">file_name</span>)
55:     <span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">old_stat</span>.<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">file_name</span>)
56:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000159">
                    
                    <a name="M000159"></a><b>create</b>(path, str='', &amp;blk)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new file, or overwrites an existing file, and writes a string
into it. Can also take a block just like File#open, which is yielded
<em>after</em> the string is writ.
</p>
<pre>
  str = 'The content for the file'
  File.create('myfile.txt', str)
</pre>
<p>
CREDIT: George Moschovitis
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show</a>
                        
                    </p>
                    <div id="M000159_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/create.rb, line 13</span>
13:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">str</span>=<span class="ruby-value str">''</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">blk</span>)
14:     <span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value str">'wb'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
15:       <span class="ruby-identifier">f</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
16:       <span class="ruby-identifier">blk</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">f</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">blk</span>
17:     <span class="ruby-keyword kw">end</span>
18:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000160">
                    
                    <a name="M000160"></a><b>ext</b>(filename, new_ext=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Takes a file name string and returns or changes its extension.
</p>
<p>
Without a new extension argument, returns the extension of the file name.
In this respect <a href="File.html#M000160">ext</a> is like extname, but
unlike extname it does not include the dot prefix.
</p>
<p>
With a new extension argument, changes the exension of the file name to the
new extension and returns it.
</p>
<p>
Examples
</p>
<pre>
  File.ext('file.rb')          # =&gt; 'rb'
  File.ext('file.rb', 'txt')   # =&gt; 'file.txt'
  File.ext('file.rb', '.txt')  # =&gt; 'file.txt'
  File.ext('file.rb', '')      # =&gt; 'file'
</pre>
<p>
This method can be used with <a href="String.html#M000597">String#file</a>
for more object-oriented notation:
</p>
<pre>
  'file.rb'.file.ext('txt')    # =&gt; 'file.txt'
</pre>
<p>
CREDIT: Lavir the Whiolet
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show</a>
                        
                    </p>
                    <div id="M000160_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/ext.rb, line 25</span>
25:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ext</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">new_ext</span>=<span class="ruby-keyword kw">nil</span>)
26:     <span class="ruby-identifier">old_ext</span> = <span class="ruby-identifier">extname</span>(<span class="ruby-identifier">filename</span>)
27:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_ext</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
28:       <span class="ruby-identifier">old_ext</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^\./</span>, <span class="ruby-value str">''</span>)
29:     <span class="ruby-keyword kw">else</span>
30:       <span class="ruby-identifier">new_ext</span> = <span class="ruby-value str">'.'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">new_ext</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">new_ext</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">new_ext</span>[<span class="ruby-value">0</span>,<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'.'</span>)
31:       <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">chomp</span>(<span class="ruby-identifier">old_ext</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">new_ext</span>
32:     <span class="ruby-keyword kw">end</span>
33:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000161">
                    
                    <a name="M000161"></a><b>null</b>()
                    
                </div>
                
                <div class="description">
                  <p>
<a href="Platform.html">Platform</a> dependent null device.
</p>
<p>
CREDIT: Daniel Burger
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show</a>
                        
                    </p>
                    <div id="M000161_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/null.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">null</span>
 8:     <span class="ruby-keyword kw">case</span> <span class="ruby-constant">RUBY_PLATFORM</span>
 9:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/mswin/i</span>
10:       <span class="ruby-value str">'NUL'</span>
11:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/amiga/i</span>
12:       <span class="ruby-value str">'NIL:'</span>
13:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/openvms/i</span>
14:       <span class="ruby-value str">'NL:'</span>
15:     <span class="ruby-keyword kw">else</span>
16:       <span class="ruby-value str">'/dev/null'</span>
17:     <span class="ruby-keyword kw">end</span>
18:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000162">
                    
                    <a name="M000162"></a><b>read_binary</b>(fname)
                    
                </div>
                
                <div class="description">
                  <p>
Read in a file as binary data.
</p>
<p>
Assuming we had a binary file &#8216;binary.dat&#8217;.
</p>
<pre>
  File.read_binary('binary.dat')
</pre>
<p>
CREDIT: George Moschovitis
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000162_source')" id="l_M000162_source">show</a>
                        
                    </p>
                    <div id="M000162_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/read_binary.rb, line 11</span>
11:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">read_binary</span>(<span class="ruby-identifier">fname</span>)
12:     <span class="ruby-identifier">open</span>(<span class="ruby-identifier">fname</span>, <span class="ruby-value str">'rb'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
13:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span>
14:     <span class="ruby-keyword kw">end</span>
15:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000163">
                    
                    <a name="M000163"></a><b>read_list</b>(filepath, options={})
                    
                </div>
                
                <div class="description">
                  <p>
Reads in a file, removes blank lines and removes lines starting with
&#8217;#&#8217; and then returns an array of all the remaining lines.
</p>
<p>
Thr remark indicator can be overridden via the <tt>:omit:</tt> option,
which can be a regualar expression or a string that is match against the
start of a line.
</p>
<p>
CREDIT: Trans
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000163_source')" id="l_M000163_source">show</a>
                        
                    </p>
                    <div id="M000163_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/read_list.rb, line 12</span>
12:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">read_list</span>(<span class="ruby-identifier">filepath</span>, <span class="ruby-identifier">options</span>={})
13:     <span class="ruby-identifier">chomp</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:chomp</span>]
14:     <span class="ruby-identifier">omit</span>  = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:omit</span>]
15:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Regexp</span>
16:               <span class="ruby-identifier">omit</span>
17:             <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
18:               <span class="ruby-regexp re">/^\s*\#/</span>
19:             <span class="ruby-keyword kw">else</span>
20:               <span class="ruby-node">/^\s*#{Regexp.escape(omit)}/</span>
21:             <span class="ruby-keyword kw">end</span>
22: 
23:     <span class="ruby-identifier">list</span> = []
24:     <span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">filepath</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
25:       <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">chomp</span>(<span class="ruby-identifier">chomp</span>)
26:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">empty?</span>
27:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">omit</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">line</span>
28:       <span class="ruby-identifier">list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
29:     <span class="ruby-keyword kw">end</span>
30:     <span class="ruby-identifier">list</span>
31:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000164">
                    
                    <a name="M000164"></a><b>rewrite</b>(name, mode = &quot;&quot;)
                    
                </div>
                
                <div class="description">
                  <p>
Opens a file as a string and writes back the string to the file at the end
of the block.
</p>
<p>
Returns the number of written bytes or <tt>nil</tt> if the file
wasn&#8217;t modified.
</p>
<p>
Note that the file will even be written back in case the block raises an
exception.
</p>
<p>
Mode can either be &#8220;b&#8221; or &#8220;+&#8221; and specifies to open
the file in binary mode (no mapping of the plattform&#8217;s newlines to
&#8220;n&#8220; is done) or to append to it.
</p>
<p>
Assuming we had a file &#8216;message.txt&#8217; and had a binary file
&#8216;binary.dat&#8217;.
</p>
<pre>
  # Reverse contents of &quot;message.txt&quot;
  File.rewrite(&quot;message.txt&quot;) { |str| str.reverse }

  # Replace &quot;foo&quot; by &quot;bar&quot; in &quot;binary.dat&quot;.
  File.rewrite(&quot;binary.dat&quot;, &quot;b&quot;) { |str| str.gsub(&quot;foo&quot;, &quot;bar&quot;) }
</pre>
<p>
IMPORTANT: The old version of this method required in place modification of
the file string. The new version will write whatever the block returns
instead!!!
</p>
<p>
CREDIT: George Moschovitis
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000164_source')" id="l_M000164_source">show</a>
                        
                    </p>
                    <div id="M000164_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/rewrite.rb, line 30</span>
30:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rewrite</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-comment cmt">#:yield:</span>
31:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block_given?</span>
32:       <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Need to supply block to File.rewrite&quot;</span>)
33:     <span class="ruby-keyword kw">end</span>
34: 
35:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Numeric</span>) <span class="ruby-keyword kw">then</span>
36:       <span class="ruby-identifier">flag</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-identifier">mode</span>, <span class="ruby-value str">&quot;&quot;</span>
37:       <span class="ruby-identifier">mode</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;b&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">flag</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Constants</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
38:       <span class="ruby-identifier">mode</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;+&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">flag</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Constants</span><span class="ruby-operator">::</span><span class="ruby-constant">APPEND</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
39:     <span class="ruby-keyword kw">else</span>
40:       <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">delete!</span>(<span class="ruby-value str">&quot;^b+&quot;</span>)
41:     <span class="ruby-keyword kw">end</span>
42: 
43:     <span class="ruby-identifier">old_str</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;r#{mode}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span> } <span class="ruby-comment cmt">#rescue &quot;&quot;</span>
44:     <span class="ruby-identifier">old_str</span> = <span class="ruby-identifier">old_str</span>.<span class="ruby-identifier">clone</span>
45: 
46:     <span class="ruby-keyword kw">begin</span>
47:       <span class="ruby-identifier">new_str</span> = <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">old_str</span>)
48:     <span class="ruby-keyword kw">ensure</span>
49:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old_str</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">new_str</span>
50:         <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;w#{mode}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">new_str</span>) }
51:       <span class="ruby-keyword kw">end</span>
52:     <span class="ruby-keyword kw">end</span>
53:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000166">
                    
                    <a name="M000166"></a><b>rewrite!</b>(name, mode = &quot;&quot;)
                    
                </div>
                
                <div class="description">
                  <p>
In place version of <a href="File.html#M000164">rewrite</a>. This version
of method requires that the string be modified in place within the block.
</p>
<pre>
  # Reverse contents of &quot;message&quot;
  File.rewrite(&quot;message.txt&quot;) { |str| str.reverse! }

  # Replace &quot;foo&quot; by &quot;bar&quot; in &quot;binary&quot;
  File.rewrite(&quot;binary.dat&quot;, &quot;b&quot;) { |str| str.gsub!(&quot;foo&quot;, &quot;bar&quot;) }
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000166_source')" id="l_M000166_source">show</a>
                        
                    </p>
                    <div id="M000166_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/rewrite.rb, line 64</span>
64:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rewrite!</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-comment cmt">#:yield:</span>
65:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block_given?</span>
66:       <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Need to supply block to File.rewrite&quot;</span>)
67:     <span class="ruby-keyword kw">end</span>
68: 
69:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Numeric</span>) <span class="ruby-keyword kw">then</span>
70:       <span class="ruby-identifier">flag</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-identifier">mode</span>, <span class="ruby-value str">&quot;&quot;</span>
71:       <span class="ruby-identifier">mode</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;b&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">flag</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Constants</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
72:       <span class="ruby-identifier">mode</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;+&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">flag</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Constants</span><span class="ruby-operator">::</span><span class="ruby-constant">APPEND</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
73:     <span class="ruby-keyword kw">else</span>
74:       <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">delete!</span>(<span class="ruby-value str">&quot;^b+&quot;</span>)
75:     <span class="ruby-keyword kw">end</span>
76: 
77:     <span class="ruby-identifier">old_str</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;r#{mode}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span> } <span class="ruby-comment cmt">#rescue &quot;&quot;</span>
78:     <span class="ruby-identifier">new_str</span> = <span class="ruby-identifier">old_str</span>.<span class="ruby-identifier">clone</span>
79: 
80:     <span class="ruby-keyword kw">begin</span>
81:       <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">new_str</span>)
82:     <span class="ruby-keyword kw">ensure</span>
83:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old_str</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">new_str</span>
84:         <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;w#{mode}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">new_str</span>) }
85:       <span class="ruby-keyword kw">end</span>
86:     <span class="ruby-keyword kw">end</span>
87:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000165">
                    
                    <a name="M000165"></a><b>rootname</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
Returns only the first portion of the directory of a file path name.
</p>
<pre>
  File.rootname('lib/jump.rb')  #=&gt; 'lib'
  File.rootname('/jump.rb')     #=&gt; '/'
  File.rootname('jump.rb')      #=&gt; '.'
</pre>
<p>
CREDIT: Trans
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show</a>
                        
                    </p>
                    <div id="M000165_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/rootname.rb, line 12</span>
12:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rootname</span>(<span class="ruby-identifier">path</span>)
13:     <span class="ruby-comment cmt"># -- this should be fairly robust</span>
14:     <span class="ruby-identifier">path_re</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'['</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Separator</span> <span class="ruby-operator">+</span> <span class="ruby-value str">%q{\/}</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">']'</span>)
15: 
16:     <span class="ruby-identifier">head</span>, <span class="ruby-identifier">tail</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">path_re</span>, <span class="ruby-value">2</span>)
17:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">'.'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">head</span>
18:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">'/'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">head</span>.<span class="ruby-identifier">empty?</span>
19:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">head</span>
20:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000167">
                    
                    <a name="M000167"></a><b>sanitize</b>(filename)
                    
                </div>
                
                <div class="description">
                  <p>
Cleans up a filename to ensure it will work on a filesystem.
</p>
<pre>
  File.sanitize(&quot;yo+baby!&quot;)   #=&gt; 'yo+baby_'
  File.sanitize(&quot;.what&amp;up&quot;)  #=&gt; '.what_up'
</pre>
<p>
CREDIT: George Moschovitis
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000167_source')" id="l_M000167_source">show</a>
                        
                    </p>
                    <div id="M000167_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/sanitize.rb, line 10</span>
10:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">filename</span>)
11:     <span class="ruby-identifier">filename</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">filename</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;\\&quot;</span>, <span class="ruby-value str">&quot;/&quot;</span>)) <span class="ruby-comment cmt"># work-around for IE</span>
12:     <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/[^a-zA-Z0-9\.\-\+_]/</span>,<span class="ruby-value str">&quot;_&quot;</span>)
13:     <span class="ruby-identifier">filename</span> = <span class="ruby-node">&quot;_#{filename}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">filename</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\.+$/</span>
14:     <span class="ruby-identifier">filename</span>
15:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000168">
                    
                    <a name="M000168"></a><b>split_all</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
Splits a file path into an array of individual path components. This
differs from <tt>File.split</tt>, which divides the path into only two
parts, directory path and basename.
</p>
<pre>
  File.split_all(&quot;a/b/c&quot;)  #=&gt; ['a', 'b', 'c']
</pre>
<p>
CREDIT: Trans
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000168_source')" id="l_M000168_source">show</a>
                        
                    </p>
                    <div id="M000168_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/split_all.rb, line 11</span>
11:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">split_all</span>(<span class="ruby-identifier">path</span>)
12:     <span class="ruby-identifier">head</span>, <span class="ruby-identifier">tail</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">path</span>)
13:     <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">tail</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">head</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'.'</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tail</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'/'</span>
14:     <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">head</span>, <span class="ruby-identifier">tail</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">head</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'/'</span>
15:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">split_all</span>(<span class="ruby-identifier">head</span>) <span class="ruby-operator">+</span> [<span class="ruby-identifier">tail</span>]
16:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000169">
                    
                    <a name="M000169"></a><b>split_root</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
Return the head of path from the rest of the path.
</p>
<pre>
  File.split_root('etc/xdg/gtk')  #=&gt; ['etc', 'xdg/gtk']
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000169_source')" id="l_M000169_source">show</a>
                        
                    </p>
                    <div id="M000169_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/split_root.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">split_root</span>(<span class="ruby-identifier">path</span>)
 8:     <span class="ruby-identifier">path_re</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'['</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Separator</span> <span class="ruby-operator">+</span> <span class="ruby-value str">%q{\/}</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">']'</span>)
 9:     <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">path_re</span>, <span class="ruby-value">2</span>)
10:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000170">
                    
                    <a name="M000170"></a><b>write</b>(path, data)
                    
                </div>
                
                <div class="description">
                  <p>
Writes the given data to the given path and closes the file. This is done
in binary mode, complementing <tt>IO.read</tt> in standard Ruby.
</p>
<pre>
  str = 'The content for the file'
  File.write('write.txt', str)
</pre>
<p>
Returns the number of bytes written.
</p>
<p>
CREDIT: Gavin Sinclair
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show</a>
                        
                    </p>
                    <div id="M000170_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/write.rb, line 15</span>
15:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">data</span>)
16:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value str">&quot;wb&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
17:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">data</span>)
18:       <span class="ruby-keyword kw">end</span>
19:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000171">
                    
                    <a name="M000171"></a><b>writelines</b>(path, data)
                    
                </div>
                
                <div class="description">
                  <p>
Writes the given array of data to the given path and closes the file. This
is done in binary mode, complementing <tt>IO.readlines</tt> in standard
Ruby.
</p>
<p>
Note that <tt>readlines</tt> (the standard Ruby method) returns an array of
lines <em>with newlines intact</em>, whereas <tt>writelines</tt> uses
<tt>puts</tt>, and so appends newlines if necessary. In this small way,
<tt>readlines</tt> and <tt>writelines</tt> are not exact opposites.
</p>
<pre>
  data = ['The content', ['for the file']]
  File.writelines('writelines.txt', data)
</pre>
<p>
Returns number of lines written.
</p>
<p>
CREDIT: Noah Gibbs, Gavin Sinclair
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000171_source')" id="l_M000171_source">show</a>
                        
                    </p>
                    <div id="M000171_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/file/writelines.rb, line 19</span>
19:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">writelines</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">data</span>)
20:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value str">&quot;wb&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
21:       <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">data</span>)
22:     <span class="ruby-keyword kw">end</span>
23:     <span class="ruby-identifier">data</span>.<span class="ruby-identifier">size</span>
24:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001190">
                    
                    <a name="M001190"></a><b>yaml?</b>(file)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="File.html#M001190">File.yaml?</a> provides a way to check if a
file is a <a href="YAML.html">YAML</a> formatted file:
</p>
<pre>
  File.yaml?('project.yaml')  #=&gt; true
  File.yaml?('project.xml')   #=&gt; false
</pre>
<p>
Note this isn&#8217;t perfect. At present it depends on the use use of an
initial document separator (eg. &#8217;&#8212;&#8217;). With <a
href="YAML.html">YAML</a> 1.1 the %<a href="YAML.html">YAML</a> delaration
is supposed to be manditory, so in the future this can be adapted to fit
that standard.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001190_source')" id="l_M001190_source">show</a>
                        
                    </p>
                    <div id="M001190_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/standard/facets/yaml.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">yaml?</span>(<span class="ruby-identifier">file</span>)
40:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
41:       <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">eof?</span>
42:         <span class="ruby-identifier">line</span> = <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gets</span>
43:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^---/</span>
44:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^(\s*#.*?|\s*)$/</span>
45:       <span class="ruby-keyword kw">end</span>
46:     <span class="ruby-keyword kw">end</span>
47:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    