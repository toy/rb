<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Dir</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Dir 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/core/facets/dir/ascend_rb.html">lib/core/facets/dir/ascend.rb</a></li>
            
            <li><a href="../files/lib/core/facets/dir/each_child_rb.html">lib/core/facets/dir/each_child.rb</a></li>
            
            <li><a href="../files/lib/core/facets/dir/parent_rb.html">lib/core/facets/dir/parent.rb</a></li>
            
            <li><a href="../files/lib/core/facets/dir/multiglob_rb.html">lib/core/facets/dir/multiglob.rb</a></li>
            
            <li><a href="../files/lib/core/facets/dir/recurse_rb.html">lib/core/facets/dir/recurse.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000093">ascend</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000095">descend</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000096">each_child</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000101">ls_r</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000098">multiglob</a>,</li>
                
                <li><a href="#M000099">multiglob_r</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000097">parent?</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000100">recurse</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000096">
                    
                    <a name="M000096"></a><b>each_child</b>(*ignore)
                    
                </div>
                
                <div class="description">
                  <p>
Like each, except the &#8220;.&#8221; and &#8220;..&#8221; special files
are ignored. You can use <tt>ignore</tt> to override &#8217;.&#8217; and
&#8217;..&#8217; and ignore other entries via a exact match or regular
expression.
</p>
<p>
CREDIT: Tyler Rick
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show</a>
                        
                    </p>
                    <div id="M000096_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/dir/each_child.rb, line 8</span>
 8:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_child</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ignore</span>)
 9:     <span class="ruby-identifier">ignore</span> = [<span class="ruby-value str">'.'</span>, <span class="ruby-value str">'..'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ignore</span>.<span class="ruby-identifier">empty?</span>
10:     <span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
11:       <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">file</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">ignore</span>.<span class="ruby-identifier">any?</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">file</span> }
12:     <span class="ruby-keyword kw">end</span>
13:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000093">
                    
                    <a name="M000093"></a><b>ascend</b>(dir, inclusive=true, &amp;blk)
                    
                </div>
                
                <div class="description">
                  <p>
Ascend a directory path.
</p>
<pre>
  a = []

  Dir.ascend(&quot;/var/log&quot;) do |path|
    a &lt;&lt; path
  end

  a  #=&gt; ['/var/log', '/var', '/']
</pre>
<p>
CREDIT: Daniel Berger, Jeffrey Schwab
</p>
<p>
TODO: make it work with windows too use <a
href="FileTest.html#M000176">FileTest.root?</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000093_source')" id="l_M000093_source">show</a>
                        
                    </p>
                    <div id="M000093_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/dir/ascend.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ascend</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">inclusive</span>=<span class="ruby-keyword kw">true</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">blk</span>)
21:     <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">dup</span>
22:     <span class="ruby-identifier">blk</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">dir</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inclusive</span>
23:     <span class="ruby-identifier">ri</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">rindex</span>(<span class="ruby-value str">'/'</span>)
24:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">ri</span>
25:       <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">ri</span>)
26:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
27:         <span class="ruby-identifier">blk</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">'/'</span>) ; <span class="ruby-keyword kw">break</span>
28:       <span class="ruby-keyword kw">end</span>
29:       <span class="ruby-identifier">blk</span>.<span class="ruby-identifier">call</span>( <span class="ruby-identifier">dir</span> )
30:       <span class="ruby-identifier">ri</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">rindex</span>(<span class="ruby-value str">'/'</span>)
31:     <span class="ruby-keyword kw">end</span>
32:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000095">
                    
                    <a name="M000095"></a><b>descend</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
Descend a directory path.
</p>
<pre>
  d = []

  Dir.descend(&quot;/var/log&quot;) do |path|
    d &lt;&lt; path
  end

  d  #=&gt; ['/', '/var', '/var/log']
</pre>
<p>
CREDIT: Daniel Berger, Jeffrey Schwab
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show</a>
                        
                    </p>
                    <div id="M000095_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/dir/ascend.rb, line 46</span>
46:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">descend</span>(<span class="ruby-identifier">path</span>) <span class="ruby-comment cmt">#:yield:</span>
47:     <span class="ruby-identifier">paths</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>)
48:     <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
49:       <span class="ruby-identifier">pth</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">paths</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">n</span>])
50:       <span class="ruby-identifier">pth</span> = <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pth</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
51:       <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">pth</span>)
52:     <span class="ruby-keyword kw">end</span>
53:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000101">
                    
                    <a name="M000101"></a><b>ls_r</b>(path='.', &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Same as <a href="Dir.html#M000100">Dir#recurse</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show</a>
                        
                    </p>
                    <div id="M000101_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/dir/recurse.rb, line 30</span>
30:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ls_r</span>(<span class="ruby-identifier">path</span>=<span class="ruby-value str">'.'</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
31:     <span class="ruby-identifier">recurse</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
32:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000098">
                    
                    <a name="M000098"></a><b>multiglob</b>(*patterns)
                    
                </div>
                
                <div class="description">
                  <p>
Like <tt>glob</tt> but can take multiple patterns.
</p>
<pre>
  Dir.multiglob('tmp/*.rb', 'tmp/*.py')
</pre>
<p>
Rather then constants for options multiglob accepts a trailing options hash
of symbol keys...
</p>
<pre>
  :noescape    File::FNM_NOESCAPE
  :casefold    File::FNM_CASEFOLD
  :pathname    File::FNM_PATHNAME
  :dotmatch    File::FNM_DOTMATCH
  :strict      File::FNM_PATHNAME &amp;&amp; File::FNM_DOTMATCH
</pre>
<p>
It also has an option for recurse...
</p>
<pre>
  :recurse     Recurively include contents of directories.
</pre>
<p>
For example
</p>
<pre>
  Dir.multiglob('tmp/*', :recurse =&gt; true)
</pre>
<p>
would have the same result as
</p>
<pre>
  Dir.multiglob('tmp/**/*')
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show</a>
                        
                    </p>
                    <div id="M000098_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/dir/multiglob.rb, line 28</span>
28:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">multiglob</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">patterns</span>)
29:     <span class="ruby-identifier">options</span>  = (<span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">last</span> <span class="ruby-value">? </span><span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {})
30: 
31:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:recurse</span>)
32:       <span class="ruby-comment cmt">##patterns += patterns.collect{ |f| File.join(f, '**', '**') }</span>
33:       <span class="ruby-identifier">multiglob_r</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">patterns</span>)
34:     <span class="ruby-keyword kw">end</span>
35: 
36:     <span class="ruby-identifier">bitflags</span> = <span class="ruby-value">0</span>
37:     <span class="ruby-identifier">bitflags</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">FNM_NOESCAPE</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noescape</span>]
38:     <span class="ruby-identifier">bitflags</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">FNM_CASEFOLD</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:casefold</span>]
39:     <span class="ruby-identifier">bitflags</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">FNM_PATHNAME</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:pathname</span>] <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:strict</span>]
40:     <span class="ruby-identifier">bitflags</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">FNM_DOTMATCH</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dotmatch</span>] <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:strict</span>]
41: 
42:     <span class="ruby-identifier">patterns</span> = [<span class="ruby-identifier">patterns</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">compact</span>
43: 
44:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:recurse</span>]
45:       <span class="ruby-identifier">patterns</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">f</span>, <span class="ruby-value str">'**'</span>, <span class="ruby-value str">'**'</span>) }
46:     <span class="ruby-keyword kw">end</span>
47: 
48:     <span class="ruby-identifier">files</span> = []
49:     <span class="ruby-identifier">files</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">pattern</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">bitflags</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
50: 
51:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">files</span>
52:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000099">
                    
                    <a name="M000099"></a><b>multiglob_r</b>(*patterns)
                    
                </div>
                
                <div class="description">
                  <p>
The same as <tt>multiglob</tt>, but recusively includes directories.
</p>
<pre>
  Dir.multiglob_r('tmp')
</pre>
<p>
is equivalent to
</p>
<pre>
  Dir.multiglob('tmp', :recurse=&gt;true)
</pre>
<p>
The effect of which is
</p>
<pre>
  Dir.multiglob('tmp', 'tmp/**/**')
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show</a>
                        
                    </p>
                    <div id="M000099_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/dir/multiglob.rb, line 66</span>
66:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">multiglob_r</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">patterns</span>)
67:     <span class="ruby-identifier">options</span> = <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">last</span> <span class="ruby-value">? </span><span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {}
68:     <span class="ruby-identifier">matches</span> = <span class="ruby-identifier">multiglob</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">patterns</span>)
69:     <span class="ruby-identifier">directories</span> = <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">select</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">m</span>) }
70:     <span class="ruby-identifier">matches</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">directories</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">multiglob_r</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">d</span>, <span class="ruby-value str">'**'</span>), <span class="ruby-identifier">options</span>) }.<span class="ruby-identifier">flatten</span>
71:     <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">uniq</span>
72:     <span class="ruby-comment cmt">##options = (Hash === patterns.last ? patterns.pop : {})</span>
73:     <span class="ruby-comment cmt">##options[:recurse] = true</span>
74:     <span class="ruby-comment cmt">##patterns &lt;&lt; options</span>
75:     <span class="ruby-comment cmt">##multiglob(*patterns)</span>
76:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000097">
                    
                    <a name="M000097"></a><b>parent?</b>(parent_path, child_path)
                    
                </div>
                
                <div class="description">
                  <p>
Is a path parental to another?
</p>
<pre>
  Dir.parent?('parent', 'parent/child')  #=&gt; true
</pre>
<p>
TODO: Needs improvement.
</p>
<p>
TODO: <a href="Instance.html">Instance</a> version?
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show</a>
                        
                    </p>
                    <div id="M000097_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/dir/parent.rb, line 11</span>
11:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parent?</span>(<span class="ruby-identifier">parent_path</span>, <span class="ruby-identifier">child_path</span>)
12:     <span class="ruby-node">%r|^#{Regexp.escape(parent_path)}|</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">child_path</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">false</span>
13:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000100">
                    
                    <a name="M000100"></a><b>recurse</b>(path='.', &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Recursively scan a directory and pass each file to the given block.
</p>
<pre>
  Dir.recurse('.') do |path|
    # ...
  end
</pre>
<p>
CREDIT: George Moschovitis
</p>
<p>
TODO: If fully compatible, reimplement as alias of Find.find, or just copy
and paste Find.find code here if it looks more robust.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show</a>
                        
                    </p>
                    <div id="M000100_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/dir/recurse.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">recurse</span>(<span class="ruby-identifier">path</span>=<span class="ruby-value str">'.'</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
15:     <span class="ruby-identifier">list</span> = []
16:     <span class="ruby-identifier">stoplist</span> = [<span class="ruby-value str">'.'</span>, <span class="ruby-value str">'..'</span>]
17:     <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
18:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">stoplist</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">f</span>)
19:       <span class="ruby-identifier">filename</span> = (<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'.'</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">f</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">f</span>)
20:       <span class="ruby-identifier">list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">filename</span>
21:       <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">filename</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
22:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">FileTest</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">filename</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-constant">FileTest</span>.<span class="ruby-identifier">symlink?</span>(<span class="ruby-identifier">filename</span>)
23:         <span class="ruby-identifier">list</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-constant">Dir</span>.<span class="ruby-identifier">recurse</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>))
24:       <span class="ruby-keyword kw">end</span>
25:     <span class="ruby-keyword kw">end</span>
26:     <span class="ruby-identifier">list</span>
27:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    