<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Class</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Class 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/core/facets/class/descendants_rb.html">lib/core/facets/class/descendants.rb</a></li>
            
            <li><a href="../files/lib/core/facets/class/methodize_rb.html">lib/core/facets/class/methodize.rb</a></li>
            
            <li><a href="../files/lib/core/facets/class/preallocate_rb.html">lib/core/facets/class/preallocate.rb</a></li>
            
            <li><a href="../files/lib/core/facets/class/pathize_rb.html">lib/core/facets/class/pathize.rb</a></li>
            
            <li><a href="../files/lib/core/facets/class/singleton_rb.html">lib/core/facets/class/singleton.rb</a></li>
            
            <li><a href="../files/lib/core/facets/class/subclasses_rb.html">lib/core/facets/class/subclasses.rb</a></li>
            
            <li><a href="../files/lib/core/facets/class/to_proc_rb.html">lib/core/facets/class/to_proc.rb</a></li>
            
            <li><a href="../files/lib/core/facets/module/class_extend_rb.html">lib/core/facets/module/class_extend.rb</a></li>
            
            <li><a href="../files/lib/core/facets/module/revise_rb.html">lib/core/facets/module/revise.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000441">class_extend</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000071">descendants</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000073">methodize</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000074">pathize</a>,</li>
                
                <li><a href="#M000075">preallocate</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000076">singleton?</a>,</li>
                
                <li><a href="#M000077">subclasses</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000078">to_proc</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000441">
                    
                    <a name="M000441"></a><b>class_extend</b>(*mods, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
For <a href="Class.html">Class</a>, <a
href="Module.html#M000438">Module#class_extend</a> is similar to
class_eval.
</p>
<p>
The alternative is to &#8220;undef_method :<a
href="Class.html#M000441">class_extend</a>&#8220;, but this seems
uneccessarily limited.
</p>
<p>
@uncommon
</p>
<pre>
  require 'facets/module/class_extend'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000441_source')" id="l_M000441_source">show</a>
                        
                    </p>
                    <div id="M000441_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/module/class_extend.rb, line 84</span>
84:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">class_extend</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">mods</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
85:     <span class="ruby-identifier">class_extension</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
86:     <span class="ruby-identifier">class_extension</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:include</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">mods</span>)
87:     <span class="ruby-identifier">class_extension</span>.<span class="ruby-identifier">module_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
88:     <span class="ruby-identifier">extend</span>(<span class="ruby-identifier">class_extension</span>)
89:     <span class="ruby-identifier">class_extensions</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">class_extension</span>
90:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000071">
                    
                    <a name="M000071"></a><b>descendants</b>(generations=-1)
                    
                </div>
                
                <div class="description">
                  <p>
List all descedents of this class.
</p>
<pre>
  class A ; end
  class B &lt; A; end
  class C &lt; A; end
  A.descendants  #=&gt; [B,C]
</pre>
<p>
You may also limit the generational distance the subclass may be from the
parent class.
</p>
<pre>
  class X ; end
  class Y &lt; X; end
  class Z &lt; Y; end
  X.descendants    #=&gt; [Y,Z]
  X.descendants(1) #=&gt; [Y]
</pre>
<p>
NOTE: This is a intensive operation. Do not expect it to be very fast.
</p>
<p>
@author Roger Pack
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show</a>
                        
                    </p>
                    <div id="M000071_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/class/descendants.rb, line 24</span>
24:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">descendants</span>(<span class="ruby-identifier">generations</span>=<span class="ruby-value">-1</span>)
25:     <span class="ruby-identifier">descendants</span> = []
26:     <span class="ruby-identifier">subclasses</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>
27:       <span class="ruby-identifier">descendants</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">k</span>
28:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">generations</span> <span class="ruby-operator">!=</span> <span class="ruby-value">1</span>
29:         <span class="ruby-identifier">descendants</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">k</span>.<span class="ruby-identifier">descendants</span>(<span class="ruby-identifier">generations</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
30:       <span class="ruby-keyword kw">end</span>
31:     <span class="ruby-keyword kw">end</span>
32:     <span class="ruby-identifier">descendants</span>
33:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000073">
                    
                    <a name="M000073"></a><b>methodize</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Translate a class name to a suitable method name.
</p>
<pre>
  module ::Example
    class MethodizeExample
    end
  end

  Example::MethodizeExample.methodize  #=&gt; &quot;example__methodize_example&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show</a>
                        
                    </p>
                    <div id="M000073_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/class/methodize.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">methodize</span>
15:     <span class="ruby-identifier">name</span>.<span class="ruby-identifier">methodize</span>
16:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000074">
                    
                    <a name="M000074"></a><b>pathize</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Converts a class name to a unix path.
</p>
<pre>
  module ::Example
    class PathizeExample
    end
  end

  Example::PathizeExample.pathize  #=&gt; &quot;example/pathize_example&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show</a>
                        
                    </p>
                    <div id="M000074_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/class/pathize.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pathize</span>
15:     <span class="ruby-identifier">name</span>.<span class="ruby-identifier">pathize</span>
16:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000075">
                    
                    <a name="M000075"></a><b>preallocate</b>(aspect)
                    
                </div>
                
                <div class="description">
                  <p>
Designate aspect modules to be added to a object at instantiation.
</p>
<pre>
  class Firetruck
    def put_out_fire(option)
      &quot;Put out #{option}&quot;
    end
  end

  module FastFiretruck
    def put_out_fire(option)
      super(&quot;very #{option}!&quot;)
    end
  end

  Firetruck.preallocate(FastFiretruck)

  ft = Firetruck.new
  ft.put_out_fire('fast') #=&gt; &quot;Put out very fast!&quot;
</pre>
<p>
This method is very similar to the idea of prepend, but it has some
limitations in that it works by overriding new and allocate and extends an
object with the aspect modules on instantiation. A true prepend
implementation would not have to do this &#8212;but would be a natural part
of the class heirarchy instead. For this reason, this method has been named
<a href="Class.html#M000075">preallocate</a>, rather than prepend.
</p>
<p>
NOTE: This method is not a common core extension and is not loaded
automatically when using <tt>require 'facets'</tt>.
</p>
<p>
CREDIT: Trans
</p>
<p>
@uncommon
</p>
<pre>
  require 'facets/class/preallocate'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show</a>
                        
                    </p>
                    <div id="M000075_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/class/preallocate.rb, line 37</span>
37:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">preallocate</span>(<span class="ruby-identifier">aspect</span>)
38:     <span class="ruby-identifier">_new</span>      = <span class="ruby-identifier">method</span>(<span class="ruby-identifier">:new</span>)
39:     <span class="ruby-identifier">_allocate</span> = <span class="ruby-identifier">method</span>(<span class="ruby-identifier">:allocate</span>)
40:     (<span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">class_eval</span> <span class="ruby-keyword kw">do</span>
41:       <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">:new</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span><span class="ruby-operator">|</span>
42:         <span class="ruby-identifier">o</span> = <span class="ruby-identifier">_new</span>.<span class="ruby-identifier">call</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
43:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">extend</span> <span class="ruby-identifier">aspect</span>
44:         <span class="ruby-identifier">o</span>
45:       <span class="ruby-keyword kw">end</span>
46:       <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">:allocate</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span><span class="ruby-operator">|</span>
47:         <span class="ruby-identifier">o</span> = <span class="ruby-identifier">_allocate</span>.<span class="ruby-identifier">call</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
48:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">extend</span> <span class="ruby-identifier">aspect</span>
49:         <span class="ruby-identifier">o</span>
50:       <span class="ruby-keyword kw">end</span>
51:     <span class="ruby-keyword kw">end</span>
52:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000076">
                    
                    <a name="M000076"></a><b>singleton?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return true if a class is the singleton class of an object.
</p>
<p>
@uncommon
</p>
<pre>
  require 'facets/class/singleton'
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000076_source')" id="l_M000076_source">show</a>
                        
                    </p>
                    <div id="M000076_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/class/singleton.rb, line 9</span>
 9:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">singleton?</span> 
10:     <span class="ruby-operator">!</span> <span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">include?</span>( <span class="ruby-keyword kw">self</span> ) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">false</span> 
11:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000077">
                    
                    <a name="M000077"></a><b>subclasses</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array with the direct children of <tt>self</tt>.
</p>
<pre>
  Integer.subclasses # =&gt; [Fixnum, Bignum]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000077_source')" id="l_M000077_source">show</a>
                        
                    </p>
                    <div id="M000077_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/class/subclasses.rb, line 17</span>
17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">subclasses</span>
18:       <span class="ruby-identifier">list</span> = []
19:       <span class="ruby-constant">ObjectSpace</span>.<span class="ruby-identifier">each_object</span>(<span class="ruby-constant">Class</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
20:         <span class="ruby-identifier">list</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>
21:       <span class="ruby-keyword kw">end</span>
22:       <span class="ruby-identifier">list</span>.<span class="ruby-identifier">uniq</span>
23:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000078">
                    
                    <a name="M000078"></a><b>to_proc</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Convert instatiation of a class into a <a href="Proc.html">Proc</a>.
</p>
<pre>
  class Person
    def initialize(name)
      @name = name
    end

    def inspect
      @name.to_str
    end
  end

  persons = %w(john bob jane hans).map(&amp;Person)

  persons.map{ |p| p.inspect }  #=&gt; ['john', 'bob', 'jane', 'hans']
</pre>
<p>
CREDIT: Daniel Schierbeck
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000078_source')" id="l_M000078_source">show</a>
                        
                    </p>
                    <div id="M000078_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/core/facets/class/to_proc.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_proc</span>
21:     <span class="ruby-identifier">proc</span>{<span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span><span class="ruby-operator">|</span> <span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)}
22:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    