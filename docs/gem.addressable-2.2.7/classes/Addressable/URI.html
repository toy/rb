<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Addressable::URI</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Addressable::URI 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/addressable/uri_rb.html">lib/addressable/uri.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
This is an implementation of a <a href="URI.html">URI</a> parser based on
<a href=&#8220;<a
href="http://www.ietf.org/rfc/rfc3986.txt">RFC">www.ietf.org/rfc/rfc3986.txt">RFC</a>
3986</a>, <a href=&#8220;<a
href="http://www.ietf.org/rfc/rfc3987.txt">RFC">www.ietf.org/rfc/rfc3987.txt">RFC</a>
3987</a>.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000111">+</a>,</li>
                
                <li><a href="#M000121">==</a>,</li>
                
                <li><a href="#M000120">===</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000109">absolute?</a>,</li>
                
                <li><a href="#M000079">authority</a>,</li>
                
                <li><a href="#M000081">authority=</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000095">basename</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000046">convert_path</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000131">defer_validation</a>,</li>
                
                <li><a href="#M000119">display_uri</a>,</li>
                
                <li><a href="#M000124">dup</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000056">encode</a>,</li>
                
                <li><a href="#M000053">encode_component</a>,</li>
                
                <li><a href="#M000122">eql?</a>,</li>
                
                <li><a href="#M000096">extname</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000058">form_encode</a>,</li>
                
                <li><a href="#M000059">form_unencode</a>,</li>
                
                <li><a href="#M000104">fragment</a>,</li>
                
                <li><a href="#M000106">fragment=</a>,</li>
                
                <li><a href="#M000061">freeze</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000123">hash</a>,</li>
                
                <li><a href="#M000043">heuristic_parse</a>,</li>
                
                <li><a href="#M000074">host</a>,</li>
                
                <li><a href="#M000076">host=</a>,</li>
                
                <li><a href="#M000077">hostname</a>,</li>
                
                <li><a href="#M000078">hostname=</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000088">inferred_port</a>,</li>
                
                <li><a href="#M000130">inspect</a>,</li>
                
                <li><a href="#M000107">ip_based?</a>,</li>
                
                <li><a href="#M000083">ip_based_schemes</a></li>
                
            </ul>
        </dd>
    
        <dt>J</dt>
        <dd>
            <ul>
                
                <li><a href="#M000052">join</a>,</li>
                
                <li><a href="#M000110">join</a>,</li>
                
                <li><a href="#M000112">join!</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000113">merge</a>,</li>
                
                <li><a href="#M000114">merge!</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000060">new</a>,</li>
                
                <li><a href="#M000117">normalize</a>,</li>
                
                <li><a href="#M000118">normalize!</a>,</li>
                
                <li><a href="#M000055">normalize_component</a>,</li>
                
                <li><a href="#M000132">normalize_path</a>,</li>
                
                <li><a href="#M000080">normalized_authority</a>,</li>
                
                <li><a href="#M000057">normalized_encode</a>,</li>
                
                <li><a href="#M000105">normalized_fragment</a>,</li>
                
                <li><a href="#M000075">normalized_host</a>,</li>
                
                <li><a href="#M000069">normalized_password</a>,</li>
                
                <li><a href="#M000093">normalized_path</a>,</li>
                
                <li><a href="#M000086">normalized_port</a>,</li>
                
                <li><a href="#M000098">normalized_query</a>,</li>
                
                <li><a href="#M000063">normalized_scheme</a>,</li>
                
                <li><a href="#M000090">normalized_site</a>,</li>
                
                <li><a href="#M000066">normalized_user</a>,</li>
                
                <li><a href="#M000072">normalized_userinfo</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000125">omit</a>,</li>
                
                <li><a href="#M000126">omit!</a>,</li>
                
                <li><a href="#M000082">origin</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000042">parse</a>,</li>
                
                <li><a href="#M000068">password</a>,</li>
                
                <li><a href="#M000070">password=</a>,</li>
                
                <li><a href="#M000092">path</a>,</li>
                
                <li><a href="#M000094">path=</a>,</li>
                
                <li><a href="#M000085">port</a>,</li>
                
                <li><a href="#M000087">port=</a>,</li>
                
                <li><a href="#M000084">port_mapping</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M000097">query</a>,</li>
                
                <li><a href="#M000099">query=</a>,</li>
                
                <li><a href="#M000100">query_values</a>,</li>
                
                <li><a href="#M000101">query_values=</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000108">relative?</a>,</li>
                
                <li><a href="#M000134">replace_self</a>,</li>
                
                <li><a href="#M000102">request_uri</a>,</li>
                
                <li><a href="#M000103">request_uri=</a>,</li>
                
                <li><a href="#M000115">route_from</a>,</li>
                
                <li><a href="#M000116">route_to</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000062">scheme</a>,</li>
                
                <li><a href="#M000064">scheme=</a>,</li>
                
                <li><a href="#M000089">site</a>,</li>
                
                <li><a href="#M000091">site=</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000129">to_hash</a>,</li>
                
                <li><a href="#M000127">to_s</a>,</li>
                
                <li><a href="#M000128">to_str</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000054">unencode</a>,</li>
                
                <li><a href="#M000065">user</a>,</li>
                
                <li><a href="#M000067">user=</a>,</li>
                
                <li><a href="#M000071">userinfo</a>,</li>
                
                <li><a href="#M000073">userinfo=</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M000133">validate</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="URI/CharacterClasses.html">Addressable::URI::CharacterClasses</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/InvalidURIError.html">Addressable::URI::InvalidURIError</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">SLASH</td>
            <td>=</td>
            <td class="attr-value">'/'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EMPTYSTR</td>
            <td>=</td>
            <td class="attr-value">''</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">URIREGEX</td>
            <td>=</td>
            <td class="attr-value">/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PORT_MAPPING</td>
            <td>=</td>
            <td class="attr-value">{       &quot;http&quot; =&gt; 80,       &quot;https&quot; =&gt; 443,       &quot;ftp&quot; =&gt; 21,       &quot;tftp&quot; =&gt; 69,       &quot;sftp&quot; =&gt; 22,       &quot;ssh&quot; =&gt; 22,       &quot;svn+ssh&quot; =&gt; 22,       &quot;telnet&quot; =&gt; 23,       &quot;nntp&quot; =&gt; 119,       &quot;gopher&quot; =&gt; 70,       &quot;wais&quot; =&gt; 210,       &quot;ldap&quot; =&gt; 389,       &quot;prospero&quot; =&gt; 1525     }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NORMPATH</td>
            <td>=</td>
            <td class="attr-value">/^(?!\/)[^\/:]*:.*$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PARENT1</td>
            <td>=</td>
            <td class="attr-value">'.'</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Resolves paths to their simplest form.
</p>
<p>
@param [String] path The path to normalize.
</p>
<p>
@return [String] The normalized path.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PARENT2</td>
            <td>=</td>
            <td class="attr-value">'..'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NPATH1</td>
            <td>=</td>
            <td class="attr-value">/\/\.\/|\/\.$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NPATH2</td>
            <td>=</td>
            <td class="attr-value">/\/([^\/]+)\/\.\.\/|\/([^\/]+)\/\.\.$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NPATH3</td>
            <td>=</td>
            <td class="attr-value">/^\.\.?\/?/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NPATH4</td>
            <td>=</td>
            <td class="attr-value">/^\/\.\.?\/|^(\/\.\.?)+\/?$/</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000111">
                    
                    <a name="M000111"></a><b>+</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="URI.html#M000052">join</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000121">
                    
                    <a name="M000121"></a><b>==</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the <a href="URI.html">URI</a> objects are equal.
This method normalizes both URIs before doing the comparison.
</p>
<p>
@param [Object] uri The <a href="URI.html">URI</a> to compare.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URIs are equivalent, &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000121_source')" id="l_M000121_source">show</a>
                        
                    </p>
                    <div id="M000121_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2027</span>
2027:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">uri</span>)
2028:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">URI</span>)
2029:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span>
2030:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000120">
                    
                    <a name="M000120"></a><b>===</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the <a href="URI.html">URI</a> objects are equal.
This method normalizes both URIs before doing the comparison, and allows
comparison against <tt>Strings</tt>.
</p>
<p>
@param [Object] uri The <a href="URI.html">URI</a> to compare.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URIs are equivalent, &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000120_source')" id="l_M000120_source">show</a>
                        
                    </p>
                    <div id="M000120_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2005</span>
2005:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">===</span>(<span class="ruby-identifier">uri</span>)
2006:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:normalize</span>)
2007:         <span class="ruby-identifier">uri_string</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span>
2008:       <span class="ruby-keyword kw">else</span>
2009:         <span class="ruby-keyword kw">begin</span>
2010:           <span class="ruby-identifier">uri_string</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span>
2011:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">InvalidURIError</span>, <span class="ruby-constant">TypeError</span>
2012:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
2013:         <span class="ruby-keyword kw">end</span>
2014:       <span class="ruby-keyword kw">end</span>
2015:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri_string</span>
2016:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000109">
                    
                    <a name="M000109"></a><b>absolute?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determines if the <a href="URI.html">URI</a> is absolute.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URI is absolute. &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000109_source')" id="l_M000109_source">show</a>
                        
                    </p>
                    <div id="M000109_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1674</span>
1674:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">absolute?</span>
1675:       <span class="ruby-keyword kw">return</span> <span class="ruby-operator">!</span><span class="ruby-identifier">relative?</span>
1676:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000079">
                    
                    <a name="M000079"></a><b>authority</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The authority component for this <a href="URI.html">URI</a>. Combines the
user, password, host, and port components.
</p>
<p>
@return [String] The authority component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000079_source')" id="l_M000079_source">show</a>
                        
                    </p>
                    <div id="M000079_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1036</span>
1036:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authority</span>
1037:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@authority</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1038:         <span class="ruby-identifier">authority</span> = <span class="ruby-value str">&quot;&quot;</span>
1039:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">userinfo</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1040:           <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.userinfo}@&quot;</span>
1041:         <span class="ruby-keyword kw">end</span>
1042:         <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>
1043:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1044:           <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;:#{self.port}&quot;</span>
1045:         <span class="ruby-keyword kw">end</span>
1046:         <span class="ruby-identifier">authority</span>
1047:       <span class="ruby-keyword kw">end</span>)
1048:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000081">
                    
                    <a name="M000081"></a><b>authority=</b>(new_authority)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the authority component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_authority The
new authority component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000081_source')" id="l_M000081_source">show</a>
                        
                    </p>
                    <div id="M000081_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1072</span>
1072:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authority=</span>(<span class="ruby-identifier">new_authority</span>)
1073:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_authority</span>
1074:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_authority</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1075:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_authority.class} into String.&quot;</span>
1076:         <span class="ruby-keyword kw">end</span>
1077:         <span class="ruby-identifier">new_authority</span> = <span class="ruby-identifier">new_authority</span>.<span class="ruby-identifier">to_str</span>
1078:         <span class="ruby-identifier">new_userinfo</span> = <span class="ruby-identifier">new_authority</span>[<span class="ruby-regexp re">/^([^\[\]]*)@/</span>, <span class="ruby-value">1</span>]
1079:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_userinfo</span>
1080:           <span class="ruby-identifier">new_user</span> = <span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/^([^:]*):?/</span>, <span class="ruby-value">1</span>]
1081:           <span class="ruby-identifier">new_password</span> = <span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/:(.*)$/</span>, <span class="ruby-value">1</span>]
1082:         <span class="ruby-keyword kw">end</span>
1083:         <span class="ruby-identifier">new_host</span> =
1084:           <span class="ruby-identifier">new_authority</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^([^\[\]]*)@/</span>, <span class="ruby-constant">EMPTYSTR</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/:([^:@\[\]]*?)$/</span>, <span class="ruby-constant">EMPTYSTR</span>)
1085:         <span class="ruby-identifier">new_port</span> =
1086:           <span class="ruby-identifier">new_authority</span>[<span class="ruby-regexp re">/:([^:@\[\]]*?)$/</span>, <span class="ruby-value">1</span>]
1087:       <span class="ruby-keyword kw">end</span>
1088: 
1089:       <span class="ruby-comment cmt"># Password assigned first to ensure validity in case of nil</span>
1090:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">new_password</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">new_password</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1091:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">new_user</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">new_user</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1092:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">new_host</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">new_host</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1093:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">new_port</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">new_port</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1094: 
1095:       <span class="ruby-comment cmt"># Reset dependant values</span>
1096:       <span class="ruby-ivar">@userinfo</span> = <span class="ruby-keyword kw">nil</span>
1097:       <span class="ruby-ivar">@normalized_userinfo</span> = <span class="ruby-keyword kw">nil</span>
1098:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1099:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1100: 
1101:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
1102:       <span class="ruby-identifier">validate</span>()
1103:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000095">
                    
                    <a name="M000095"></a><b>basename</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The basename, if any, of the file in the path component.
</p>
<p>
@return [String] The path&#8217;s basename.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show</a>
                        
                    </p>
                    <div id="M000095_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1328</span>
1328:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">basename</span>
1329:       <span class="ruby-comment cmt"># Path cannot be nil</span>
1330:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/;[^\/]*$/</span>, <span class="ruby-constant">EMPTYSTR</span>)
1331:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000131">
                    
                    <a name="M000131"></a><b>defer_validation</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
This method allows you to make several changes to a <a
href="URI.html">URI</a> simultaneously, which separately would cause
validation errors, but in conjunction, are valid. The <a
href="URI.html">URI</a> will be revalidated as soon as the entire block has
been executed.
</p>
<p>
@param [Proc] block
</p>
<pre>
  A set of operations to perform on a given URI.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show</a>
                        
                    </p>
                    <div id="M000131_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2177</span>
2177:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">defer_validation</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
2178:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">LocalJumpError</span>, <span class="ruby-value str">&quot;No block given.&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block</span>
2179:       <span class="ruby-ivar">@validation_deferred</span> = <span class="ruby-keyword kw">true</span>
2180:       <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>()
2181:       <span class="ruby-ivar">@validation_deferred</span> = <span class="ruby-keyword kw">false</span>
2182:       <span class="ruby-identifier">validate</span>
2183:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
2184:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000119">
                    
                    <a name="M000119"></a><b>display_uri</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Creates a <a href="URI.html">URI</a> suitable for display to users. If
semantic attacks are likely, the application should try to detect these and
warn the user. See <a href=&#8220;<a
href="http://www.ietf.org/rfc/rfc3986.txt">RFC">www.ietf.org/rfc/rfc3986.txt">RFC</a>
3986</a>, section 7.6 for more information.
</p>
<p>
@return [Addressable::URI] A <a href="URI.html">URI</a> suitable for
display purposes.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000119_source')" id="l_M000119_source">show</a>
                        
                    </p>
                    <div id="M000119_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1989</span>
1989:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_uri</span>
1990:       <span class="ruby-identifier">display_uri</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>
1991:       <span class="ruby-identifier">display_uri</span>.<span class="ruby-identifier">host</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">IDNA</span>.<span class="ruby-identifier">to_unicode</span>(<span class="ruby-identifier">display_uri</span>.<span class="ruby-identifier">host</span>)
1992:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">display_uri</span>
1993:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000124">
                    
                    <a name="M000124"></a><b>dup</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Clones the <a href="URI.html">URI</a> object.
</p>
<p>
@return [Addressable::URI] The cloned <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show</a>
                        
                    </p>
                    <div id="M000124_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2059</span>
2059:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dup</span>
2060:       <span class="ruby-identifier">duplicated_uri</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
2061:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2062:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2063:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2064:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2065:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>,
2066:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2067:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2068:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
2069:       )
2070:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">duplicated_uri</span>
2071:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000122">
                    
                    <a name="M000122"></a><b>eql?</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the <a href="URI.html">URI</a> objects are equal.
This method does NOT normalize either <a href="URI.html">URI</a> before
doing the comparison.
</p>
<p>
@param [Object] uri The <a href="URI.html">URI</a> to compare.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URIs are equivalent, &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000122_source')" id="l_M000122_source">show</a>
                        
                    </p>
                    <div id="M000122_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2041</span>
2041:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">uri</span>)
2042:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">URI</span>)
2043:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>
2044:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000096">
                    
                    <a name="M000096"></a><b>extname</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The extname, if any, of the file in the path component. Empty string if
there is no extension.
</p>
<p>
@return [String] The path&#8217;s extname.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show</a>
                        
                    </p>
                    <div id="M000096_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1338</span>
1338:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extname</span>
1339:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>
1340:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">extname</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">basename</span>)
1341:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000104">
                    
                    <a name="M000104"></a><b>fragment</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The fragment component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The fragment component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show</a>
                        
                    </p>
                    <div id="M000104_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1608</span>
1608:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fragment</span>
1609:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@fragment</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@fragment</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1610:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000106">
                    
                    <a name="M000106"></a><b>fragment=</b>(new_fragment)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the fragment component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_fragment The new
fragment component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show</a>
                        
                    </p>
                    <div id="M000106_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1629</span>
1629:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fragment=</span>(<span class="ruby-identifier">new_fragment</span>)
1630:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_fragment</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_fragment</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1631:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_fragment.class} into String.&quot;</span>
1632:       <span class="ruby-keyword kw">end</span>
1633:       <span class="ruby-ivar">@fragment</span> = <span class="ruby-identifier">new_fragment</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_fragment</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1634: 
1635:       <span class="ruby-comment cmt"># Reset dependant values</span>
1636:       <span class="ruby-ivar">@normalized_fragment</span> = <span class="ruby-keyword kw">nil</span>
1637:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1638:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1639: 
1640:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
1641:       <span class="ruby-identifier">validate</span>()
1642:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000061">
                    
                    <a name="M000061"></a><b>freeze</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Freeze <a href="URI.html">URI</a>, initializing instance variables.
</p>
<p>
@return [Addressable::URI] The frozen <a href="URI.html">URI</a> object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000061_source')" id="l_M000061_source">show</a>
                        
                    </p>
                    <div id="M000061_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 731</span>
731:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">freeze</span>
732:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span>
733:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_user</span>
734:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_password</span>
735:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_userinfo</span>
736:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_host</span>
737:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_port</span>
738:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_authority</span>
739:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_site</span>
740:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_path</span>
741:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_query</span>
742:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_fragment</span>
743:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">hash</span>
744:       <span class="ruby-keyword kw">super</span>
745:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000123">
                    
                    <a name="M000123"></a><b>hash</b>()
                    
                </div>
                
                <div class="description">
                  <p>
A hash value that will make a <a href="URI.html">URI</a> equivalent to its
normalized form.
</p>
<p>
@return [Integer] A hash of the <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show</a>
                        
                    </p>
                    <div id="M000123_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2051</span>
2051:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
2052:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@hash</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">hash</span> <span class="ruby-operator">*</span> <span class="ruby-value">-1</span>)
2053:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000074">
                    
                    <a name="M000074"></a><b>host</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The host component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The host component.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="URI.html#M000077">hostname</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show</a>
                        
                    </p>
                    <div id="M000074_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 974</span>
974:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">host</span>
975:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@host</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@host</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
976:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000076">
                    
                    <a name="M000076"></a><b>host=</b>(new_host)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the host component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_host The new
host component.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="URI.html#M000078">hostname=</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000076_source')" id="l_M000076_source">show</a>
                        
                    </p>
                    <div id="M000076_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1007</span>
1007:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">host=</span>(<span class="ruby-identifier">new_host</span>)
1008:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_host</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_host</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1009:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_host.class} into String.&quot;</span>
1010:       <span class="ruby-keyword kw">end</span>
1011:       <span class="ruby-ivar">@host</span> = <span class="ruby-identifier">new_host</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_host</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1012: 
1013:       <span class="ruby-comment cmt"># Reset dependant values</span>
1014:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
1015:       <span class="ruby-ivar">@normalized_host</span> = <span class="ruby-keyword kw">nil</span>
1016:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1017:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1018: 
1019:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
1020:       <span class="ruby-identifier">validate</span>()
1021:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000077">
                    
                    <a name="M000077"></a><b>hostname</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="URI.html#M000074">host</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000078">
                    
                    <a name="M000078"></a><b>hostname=</b>(new_host)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="URI.html#M000076">host=</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000088">
                    
                    <a name="M000088"></a><b>inferred_port</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The inferred port component for this <a href="URI.html">URI</a>. This
method will normalize to the default port for the URI&#8217;s scheme if the
port isn&#8217;t explicitly specified in the <a href="URI.html">URI</a>.
</p>
<p>
@return [Integer] The inferred port component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show</a>
                        
                    </p>
                    <div id="M000088_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1193</span>
1193:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inferred_port</span>
1194:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1195:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>
1196:           <span class="ruby-constant">URI</span>.<span class="ruby-identifier">port_mapping</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">downcase</span>]
1197:         <span class="ruby-keyword kw">else</span>
1198:           <span class="ruby-keyword kw">nil</span>
1199:         <span class="ruby-keyword kw">end</span>
1200:       <span class="ruby-keyword kw">else</span>
1201:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>.<span class="ruby-identifier">to_i</span>
1202:       <span class="ruby-keyword kw">end</span>
1203:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000130">
                    
                    <a name="M000130"></a><b>inspect</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <tt>String</tt> representation of the <a href="URI.html">URI</a>
object&#8217;s state.
</p>
<p>
@return [String] The <a href="URI.html">URI</a> object&#8217;s state, as a
<tt>String</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show</a>
                        
                    </p>
                    <div id="M000130_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2165</span>
2165:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
2166:       <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;#&lt;%s:%#0x URI:%s&gt;&quot;</span>, <span class="ruby-constant">URI</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">object_id</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>)
2167:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000107">
                    
                    <a name="M000107"></a><b>ip_based?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determines if the scheme indicates an IP-based protocol.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the scheme indicates an IP-based protocol.
  &lt;code&gt;false&lt;/code&gt; otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000107_source')" id="l_M000107_source">show</a>
                        
                    </p>
                    <div id="M000107_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1650</span>
1650:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip_based?</span>
1651:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>
1652:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">ip_based_schemes</span>.<span class="ruby-identifier">include?</span>(
1653:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">downcase</span>)
1654:       <span class="ruby-keyword kw">end</span>
1655:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
1656:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000110">
                    
                    <a name="M000110"></a><b>join</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Joins two URIs together.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] The <a href="URI.html">URI</a> to join
with.
</p>
<p>
@return [Addressable::URI] The joined <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="URI.html#M000111">+</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show</a>
                        
                    </p>
                    <div id="M000110_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1684</span>
1684:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join</span>(<span class="ruby-identifier">uri</span>)
1685:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1686:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
1687:       <span class="ruby-keyword kw">end</span>
1688:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">URI</span>)
1689:         <span class="ruby-comment cmt"># Otherwise, convert to a String, then parse.</span>
1690:         <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>)
1691:       <span class="ruby-keyword kw">end</span>
1692:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">empty?</span>
1693:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">dup</span>
1694:       <span class="ruby-keyword kw">end</span>
1695: 
1696:       <span class="ruby-identifier">joined_scheme</span> = <span class="ruby-keyword kw">nil</span>
1697:       <span class="ruby-identifier">joined_user</span> = <span class="ruby-keyword kw">nil</span>
1698:       <span class="ruby-identifier">joined_password</span> = <span class="ruby-keyword kw">nil</span>
1699:       <span class="ruby-identifier">joined_host</span> = <span class="ruby-keyword kw">nil</span>
1700:       <span class="ruby-identifier">joined_port</span> = <span class="ruby-keyword kw">nil</span>
1701:       <span class="ruby-identifier">joined_path</span> = <span class="ruby-keyword kw">nil</span>
1702:       <span class="ruby-identifier">joined_query</span> = <span class="ruby-keyword kw">nil</span>
1703:       <span class="ruby-identifier">joined_fragment</span> = <span class="ruby-keyword kw">nil</span>
1704: 
1705:       <span class="ruby-comment cmt"># Section 5.2.2 of RFC 3986</span>
1706:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1707:         <span class="ruby-identifier">joined_scheme</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
1708:         <span class="ruby-identifier">joined_user</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span>
1709:         <span class="ruby-identifier">joined_password</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span>
1710:         <span class="ruby-identifier">joined_host</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>
1711:         <span class="ruby-identifier">joined_port</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>
1712:         <span class="ruby-identifier">joined_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)
1713:         <span class="ruby-identifier">joined_query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1714:       <span class="ruby-keyword kw">else</span>
1715:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1716:           <span class="ruby-identifier">joined_user</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span>
1717:           <span class="ruby-identifier">joined_password</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span>
1718:           <span class="ruby-identifier">joined_host</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>
1719:           <span class="ruby-identifier">joined_port</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>
1720:           <span class="ruby-identifier">joined_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)
1721:           <span class="ruby-identifier">joined_query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1722:         <span class="ruby-keyword kw">else</span>
1723:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span>
1724:             <span class="ruby-identifier">joined_path</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>
1725:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1726:               <span class="ruby-identifier">joined_query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1727:             <span class="ruby-keyword kw">else</span>
1728:               <span class="ruby-identifier">joined_query</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>
1729:             <span class="ruby-keyword kw">end</span>
1730:           <span class="ruby-keyword kw">else</span>
1731:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">SLASH</span>
1732:               <span class="ruby-identifier">joined_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)
1733:             <span class="ruby-keyword kw">else</span>
1734:               <span class="ruby-identifier">base_path</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">dup</span>
1735:               <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">EMPTYSTR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">base_path</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
1736:               <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">base_path</span>)
1737: 
1738:               <span class="ruby-comment cmt"># Section 5.2.3 of RFC 3986</span>
1739:               <span class="ruby-comment cmt">#</span>
1740:               <span class="ruby-comment cmt"># Removes the right-most path segment from the base path.</span>
1741:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">base_path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\//</span>
1742:                 <span class="ruby-identifier">base_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\/[^\/]+$/</span>, <span class="ruby-constant">SLASH</span>)
1743:               <span class="ruby-keyword kw">else</span>
1744:                 <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">EMPTYSTR</span>
1745:               <span class="ruby-keyword kw">end</span>
1746: 
1747:               <span class="ruby-comment cmt"># If the base path is empty and an authority segment has been</span>
1748:               <span class="ruby-comment cmt"># defined, use a base path of SLASH</span>
1749:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">base_path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1750:                 <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">SLASH</span>
1751:               <span class="ruby-keyword kw">end</span>
1752: 
1753:               <span class="ruby-identifier">joined_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">base_path</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)
1754:             <span class="ruby-keyword kw">end</span>
1755:             <span class="ruby-identifier">joined_query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1756:           <span class="ruby-keyword kw">end</span>
1757:           <span class="ruby-identifier">joined_user</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>
1758:           <span class="ruby-identifier">joined_password</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>
1759:           <span class="ruby-identifier">joined_host</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>
1760:           <span class="ruby-identifier">joined_port</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>
1761:         <span class="ruby-keyword kw">end</span>
1762:         <span class="ruby-identifier">joined_scheme</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>
1763:       <span class="ruby-keyword kw">end</span>
1764:       <span class="ruby-identifier">joined_fragment</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">fragment</span>
1765: 
1766:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
1767:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_scheme</span>,
1768:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_user</span>,
1769:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_password</span>,
1770:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_host</span>,
1771:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_port</span>,
1772:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_path</span>,
1773:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_query</span>,
1774:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_fragment</span>
1775:       )
1776:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000112">
                    
                    <a name="M000112"></a><b>join!</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Destructive form of <tt>join</tt>.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] The <a href="URI.html">URI</a> to join
with.
</p>
<p>
@return [Addressable::URI] The joined <a href="URI.html">URI</a>.
</p>
<p>
@see <a href="URI.html#M000052">Addressable::URI#join</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show</a>
                        
                    </p>
                    <div id="M000112_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1787</span>
1787:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join!</span>(<span class="ruby-identifier">uri</span>)
1788:       <span class="ruby-identifier">replace_self</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">uri</span>))
1789:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000113">
                    
                    <a name="M000113"></a><b>merge</b>(hash)
                    
                </div>
                
                <div class="description">
                  <p>
Merges a <a href="URI.html">URI</a> with a <tt>Hash</tt> of components.
This method has different behavior from <tt>join</tt>. Any components
present in the <tt>hash</tt> parameter will override the original
components. The path component is not treated specially.
</p>
<p>
@param [Hash, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000129">to_hash</a>] The components to merge with.
</p>
<p>
@return [Addressable::URI] The merged <a href="URI.html">URI</a>.
</p>
<p>
@see Hash#merge
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show</a>
                        
                    </p>
                    <div id="M000113_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1802</span>
1802:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge</span>(<span class="ruby-identifier">hash</span>)
1803:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_hash</span>)
1804:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{hash.class} into Hash.&quot;</span>
1805:       <span class="ruby-keyword kw">end</span>
1806:       <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">to_hash</span>
1807: 
1808:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
1809:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">:userinfo</span>, <span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>, <span class="ruby-identifier">:host</span>, <span class="ruby-identifier">:port</span>]).<span class="ruby-identifier">any?</span>
1810:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
1811:             <span class="ruby-value str">&quot;Cannot specify both an authority and any of the components &quot;</span> <span class="ruby-operator">+</span>
1812:             <span class="ruby-value str">&quot;within the authority.&quot;</span>
1813:         <span class="ruby-keyword kw">end</span>
1814:       <span class="ruby-keyword kw">end</span>
1815:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>)
1816:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>]).<span class="ruby-identifier">any?</span>
1817:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
1818:             <span class="ruby-value str">&quot;Cannot specify both a userinfo and either the user or password.&quot;</span>
1819:         <span class="ruby-keyword kw">end</span>
1820:       <span class="ruby-keyword kw">end</span>
1821: 
1822:       <span class="ruby-identifier">uri</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>
1823:       <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">defer_validation</span> <span class="ruby-keyword kw">do</span>
1824:         <span class="ruby-comment cmt"># Bunch of crazy logic required because of the composite components</span>
1825:         <span class="ruby-comment cmt"># like userinfo and authority.</span>
1826:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> =
1827:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:scheme</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:scheme</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>
1828:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
1829:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">authority</span> =
1830:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:authority</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span>
1831:         <span class="ruby-keyword kw">end</span>
1832:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>)
1833:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">userinfo</span> =
1834:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:userinfo</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">userinfo</span>
1835:         <span class="ruby-keyword kw">end</span>
1836:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
1837:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span> =
1838:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:user</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:user</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>
1839:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span> =
1840:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:password</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:password</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>
1841:         <span class="ruby-keyword kw">end</span>
1842:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
1843:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span> =
1844:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:host</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:host</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>
1845:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span> =
1846:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:port</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:port</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>
1847:         <span class="ruby-keyword kw">end</span>
1848:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> =
1849:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:path</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:path</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>
1850:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span> =
1851:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:query</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:query</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>
1852:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">fragment</span> =
1853:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:fragment</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:fragment</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span>
1854:       <span class="ruby-keyword kw">end</span>
1855: 
1856:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>
1857:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000114">
                    
                    <a name="M000114"></a><b>merge!</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Destructive form of <tt>merge</tt>.
</p>
<p>
@param [Hash, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000129">to_hash</a>] The components to merge with.
</p>
<p>
@return [Addressable::URI] The merged <a href="URI.html">URI</a>.
</p>
<p>
@see <a href="URI.html#M000113">Addressable::URI#merge</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000114_source')" id="l_M000114_source">show</a>
                        
                    </p>
                    <div id="M000114_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1867</span>
1867:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">uri</span>)
1868:       <span class="ruby-identifier">replace_self</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">uri</span>))
1869:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000117">
                    
                    <a name="M000117"></a><b>normalize</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a normalized <a href="URI.html">URI</a> object.
</p>
<p>
NOTE: This method does not attempt to fully conform to specifications. It
exists largely to correct other people&#8217;s failures to read the
specifications, and also to deal with caching issues since several
different URIs may represent the same resource and should not be cached
multiple times.
</p>
<p>
@return [Addressable::URI] The normalized <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000117_source')" id="l_M000117_source">show</a>
                        
                    </p>
                    <div id="M000117_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1952</span>
1952:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalize</span>
1953:       <span class="ruby-comment cmt"># This is a special exception for the frequently misused feed</span>
1954:       <span class="ruby-comment cmt"># URI scheme.</span>
1955:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_scheme</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;feed&quot;</span>
1956:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^feed:\/*http:\/*/</span>
1957:           <span class="ruby-keyword kw">return</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(
1958:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-regexp re">/^feed:\/*(http:\/*.*)/</span>, <span class="ruby-value">1</span>]
1959:           ).<span class="ruby-identifier">normalize</span>
1960:         <span class="ruby-keyword kw">end</span>
1961:       <span class="ruby-keyword kw">end</span>
1962: 
1963:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
1964:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_scheme</span>,
1965:         <span class="ruby-identifier">:authority</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_authority</span>,
1966:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_path</span>,
1967:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_query</span>,
1968:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_fragment</span>
1969:       )
1970:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000118">
                    
                    <a name="M000118"></a><b>normalize!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Destructively normalizes this <a href="URI.html">URI</a> object.
</p>
<p>
@return [Addressable::URI] The normalized <a href="URI.html">URI</a>.
</p>
<p>
@see <a href="URI.html#M000117">Addressable::URI#normalize</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000118_source')" id="l_M000118_source">show</a>
                        
                    </p>
                    <div id="M000118_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1978</span>
1978:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalize!</span>
1979:       <span class="ruby-identifier">replace_self</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>)
1980:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000080">
                    
                    <a name="M000080"></a><b>normalized_authority</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The authority component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The authority component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000080_source')" id="l_M000080_source">show</a>
                        
                    </p>
                    <div id="M000080_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1054</span>
1054:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_authority</span>
1055:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_authority</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1056:         <span class="ruby-identifier">authority</span> = <span class="ruby-value str">&quot;&quot;</span>
1057:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_userinfo</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1058:           <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.normalized_userinfo}@&quot;</span>
1059:         <span class="ruby-keyword kw">end</span>
1060:         <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_host</span>
1061:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1062:           <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;:#{self.normalized_port}&quot;</span>
1063:         <span class="ruby-keyword kw">end</span>
1064:         <span class="ruby-identifier">authority</span>
1065:       <span class="ruby-keyword kw">end</span>)
1066:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000105">
                    
                    <a name="M000105"></a><b>normalized_fragment</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The fragment component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The fragment component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show</a>
                        
                    </p>
                    <div id="M000105_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1616</span>
1616:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_fragment</span>
1617:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_fragment</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1618:         <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
1619:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">strip</span>,
1620:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">FRAGMENT</span>
1621:         )
1622:       <span class="ruby-keyword kw">end</span>)
1623:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000075">
                    
                    <a name="M000075"></a><b>normalized_host</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The host component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The host component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show</a>
                        
                    </p>
                    <div id="M000075_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 982</span>
 982:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_host</span>
 983:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_host</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
 984:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
 985:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
 986:             <span class="ruby-identifier">result</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">IDNA</span>.<span class="ruby-identifier">to_ascii</span>(
 987:               <span class="ruby-constant">URI</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">downcase</span>)
 988:             )
 989:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>[<span class="ruby-value">-1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;.&quot;</span>
 990:               <span class="ruby-comment cmt"># Trailing dots are unnecessary</span>
 991:               <span class="ruby-identifier">result</span> = <span class="ruby-identifier">result</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>]
 992:             <span class="ruby-keyword kw">end</span>
 993:             <span class="ruby-identifier">result</span>
 994:           <span class="ruby-keyword kw">else</span>
 995:             <span class="ruby-constant">EMPTYSTR</span>
 996:           <span class="ruby-keyword kw">end</span>
 997:         <span class="ruby-keyword kw">else</span>
 998:           <span class="ruby-keyword kw">nil</span>
 999:         <span class="ruby-keyword kw">end</span>
1000:       <span class="ruby-keyword kw">end</span>)
1001:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000069">
                    
                    <a name="M000069"></a><b>normalized_password</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The password component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The password component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show</a>
                        
                    </p>
                    <div id="M000069_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 862</span>
862:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_password</span>
863:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_password</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
864:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/https?/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
865:             (<span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>)
866:           <span class="ruby-keyword kw">nil</span>
867:         <span class="ruby-keyword kw">else</span>
868:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
869:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">strip</span>,
870:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
871:           )
872:         <span class="ruby-keyword kw">end</span>
873:       <span class="ruby-keyword kw">end</span>)
874:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000093">
                    
                    <a name="M000093"></a><b>normalized_path</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The path component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The path component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000093_source')" id="l_M000093_source">show</a>
                        
                    </p>
                    <div id="M000093_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1280</span>
1280:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_path</span>
1281:       <span class="ruby-ivar">@normalized_path</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1282:         <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_s</span>
1283:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">NORMPATH</span>
1284:           <span class="ruby-comment cmt"># Relative paths with colons in the first segment are ambiguous.</span>
1285:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">&quot;:&quot;</span>, <span class="ruby-value str">&quot;%2F&quot;</span>)
1286:         <span class="ruby-keyword kw">end</span>
1287:         <span class="ruby-comment cmt"># String#split(delimeter, -1) uses the more strict splitting behavior</span>
1288:         <span class="ruby-comment cmt"># found by default in Python.</span>
1289:         <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">path</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">SLASH</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">segment</span><span class="ruby-operator">|</span>
1290:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
1291:             <span class="ruby-identifier">segment</span>,
1292:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">PCHAR</span>
1293:           )
1294:         <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">join</span>(<span class="ruby-constant">SLASH</span>)
1295: 
1296:         <span class="ruby-identifier">result</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">result</span>)
1297:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
1298:             [<span class="ruby-value str">&quot;http&quot;</span>, <span class="ruby-value str">&quot;https&quot;</span>, <span class="ruby-value str">&quot;ftp&quot;</span>, <span class="ruby-value str">&quot;tftp&quot;</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span>)
1299:           <span class="ruby-identifier">result</span> = <span class="ruby-constant">SLASH</span>
1300:         <span class="ruby-keyword kw">end</span>
1301:         <span class="ruby-identifier">result</span>
1302:       <span class="ruby-keyword kw">end</span>)
1303:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000086">
                    
                    <a name="M000086"></a><b>normalized_port</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The port component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [Integer] The port component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show</a>
                        
                    </p>
                    <div id="M000086_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1153</span>
1153:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_port</span>
1154:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">port_mapping</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>
1155:         <span class="ruby-keyword kw">nil</span>
1156:       <span class="ruby-keyword kw">else</span>
1157:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>
1158:       <span class="ruby-keyword kw">end</span>
1159:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000098">
                    
                    <a name="M000098"></a><b>normalized_query</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The query component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The query component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show</a>
                        
                    </p>
                    <div id="M000098_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1355</span>
1355:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_query</span>
1356:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_query</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1357:         (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span><span class="ruby-operator">|</span>
1358:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
1359:             <span class="ruby-identifier">pair</span>,
1360:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">QUERY</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">&quot;\\&amp;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>)
1361:           )
1362:         <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>)
1363:       <span class="ruby-keyword kw">end</span>)
1364:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000063">
                    
                    <a name="M000063"></a><b>normalized_scheme</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The scheme component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The scheme component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000063_source')" id="l_M000063_source">show</a>
                        
                    </p>
                    <div id="M000063_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 759</span>
759:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_scheme</span>
760:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_scheme</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
761:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*ssh\+svn\s*$/i</span>
762:           <span class="ruby-value str">&quot;svn+ssh&quot;</span>
763:         <span class="ruby-keyword kw">else</span>
764:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
765:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">downcase</span>,
766:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">SCHEME</span>
767:           )
768:         <span class="ruby-keyword kw">end</span>
769:       <span class="ruby-keyword kw">end</span>)
770:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000090">
                    
                    <a name="M000090"></a><b>normalized_site</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The normalized combination of components that represent a site. Combines
the scheme, user, password, host, and port components. Primarily useful for
HTTP and HTTPS.
</p>
<p>
For example, <tt>&quot;<a
href="http://example.com/path?query">example.com/path?query</a>&quot;</tt>
would have a <tt>site</tt> value of <tt>&quot;<a
href="http://example.com">example.com</a>&quot;</tt>.
</p>
<p>
@return [String] The normalized components that identify a site.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000090_source')" id="l_M000090_source">show</a>
                        
                    </p>
                    <div id="M000090_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1232</span>
1232:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_site</span>
1233:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">site</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_site</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1234:         <span class="ruby-identifier">site_string</span> = <span class="ruby-value str">&quot;&quot;</span>
1235:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1236:           <span class="ruby-identifier">site_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.normalized_scheme}:&quot;</span>
1237:         <span class="ruby-keyword kw">end</span>
1238:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1239:           <span class="ruby-identifier">site_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;//#{self.normalized_authority}&quot;</span>
1240:         <span class="ruby-keyword kw">end</span>
1241:         <span class="ruby-identifier">site_string</span>
1242:       <span class="ruby-keyword kw">end</span>)
1243:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000066">
                    
                    <a name="M000066"></a><b>normalized_user</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The user component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The user component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000066_source')" id="l_M000066_source">show</a>
                        
                    </p>
                    <div id="M000066_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 809</span>
809:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_user</span>
810:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_user</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
811:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/https?/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
812:             (<span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>)
813:           <span class="ruby-keyword kw">nil</span>
814:         <span class="ruby-keyword kw">else</span>
815:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
816:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">strip</span>,
817:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
818:           )
819:         <span class="ruby-keyword kw">end</span>
820:       <span class="ruby-keyword kw">end</span>)
821:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000072">
                    
                    <a name="M000072"></a><b>normalized_userinfo</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The userinfo component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The userinfo component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000072_source')" id="l_M000072_source">show</a>
                        
                    </p>
                    <div id="M000072_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 926</span>
926:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_userinfo</span>
927:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">userinfo</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_userinfo</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
928:         <span class="ruby-identifier">current_user</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_user</span>
929:         <span class="ruby-identifier">current_password</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_password</span>
930:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_password</span>
931:           <span class="ruby-keyword kw">nil</span>
932:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_password</span>
933:           <span class="ruby-node">&quot;#{current_user}:#{current_password}&quot;</span>
934:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_password</span>
935:           <span class="ruby-node">&quot;#{current_user}&quot;</span>
936:         <span class="ruby-keyword kw">end</span>
937:       <span class="ruby-keyword kw">end</span>)
938:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000125">
                    
                    <a name="M000125"></a><b>omit</b>(*components)
                    
                </div>
                
                <div class="description">
                  <p>
Omits components from a <a href="URI.html">URI</a>.
</p>
<p>
@param [Symbol] *components The components to be omitted.
</p>
<p>
@return [Addressable::URI] The <a href="URI.html">URI</a> with components
omitted.
</p>
<p>
@example
</p>
<pre>
  uri = Addressable::URI.parse(&quot;http://example.com/path?query&quot;)
  #=&gt; #&lt;Addressable::URI:0xcc5e7a URI:http://example.com/path?query&gt;
  uri.omit(:scheme, :authority)
  #=&gt; #&lt;Addressable::URI:0xcc4d86 URI:/path?query&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000125_source')" id="l_M000125_source">show</a>
                        
                    </p>
                    <div id="M000125_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2085</span>
2085:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">omit</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">components</span>)
2086:       <span class="ruby-identifier">invalid_components</span> = <span class="ruby-identifier">components</span> <span class="ruby-operator">-</span> [
2087:         <span class="ruby-identifier">:scheme</span>, <span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>, <span class="ruby-identifier">:userinfo</span>, <span class="ruby-identifier">:host</span>, <span class="ruby-identifier">:port</span>, <span class="ruby-identifier">:authority</span>,
2088:         <span class="ruby-identifier">:path</span>, <span class="ruby-identifier">:query</span>, <span class="ruby-identifier">:fragment</span>
2089:       ]
2090:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">invalid_components</span>.<span class="ruby-identifier">empty?</span>
2091:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
2092:           <span class="ruby-node">&quot;Invalid component names: #{invalid_components.inspect}.&quot;</span>
2093:       <span class="ruby-keyword kw">end</span>
2094:       <span class="ruby-identifier">duplicated_uri</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">dup</span>
2095:       <span class="ruby-identifier">duplicated_uri</span>.<span class="ruby-identifier">defer_validation</span> <span class="ruby-keyword kw">do</span>
2096:         <span class="ruby-identifier">components</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span>
2097:           <span class="ruby-identifier">duplicated_uri</span>.<span class="ruby-identifier">send</span>((<span class="ruby-identifier">component</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;=&quot;</span>).<span class="ruby-identifier">to_sym</span>, <span class="ruby-keyword kw">nil</span>)
2098:         <span class="ruby-keyword kw">end</span>
2099:         <span class="ruby-identifier">duplicated_uri</span>.<span class="ruby-identifier">user</span> = <span class="ruby-identifier">duplicated_uri</span>.<span class="ruby-identifier">normalized_user</span>
2100:       <span class="ruby-keyword kw">end</span>
2101:       <span class="ruby-identifier">duplicated_uri</span>
2102:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000126">
                    
                    <a name="M000126"></a><b>omit!</b>(*components)
                    
                </div>
                
                <div class="description">
                  <p>
Destructive form of omit.
</p>
<p>
@param [Symbol] *components The components to be omitted.
</p>
<p>
@return [Addressable::URI] The <a href="URI.html">URI</a> with components
omitted.
</p>
<p>
@see <a href="URI.html#M000125">Addressable::URI#omit</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000126_source')" id="l_M000126_source">show</a>
                        
                    </p>
                    <div id="M000126_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2112</span>
2112:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">omit!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">components</span>)
2113:       <span class="ruby-identifier">replace_self</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">omit</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">components</span>))
2114:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000082">
                    
                    <a name="M000082"></a><b>origin</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The origin for this <a href="URI.html">URI</a>, serialized to ASCII, as per
draft-ietf-websec-origin-00, section 5.2.
</p>
<p>
@return [String] The serialized origin.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000082_source')" id="l_M000082_source">show</a>
                        
                    </p>
                    <div id="M000082_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1110</span>
1110:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">origin</span>
1111:       <span class="ruby-keyword kw">return</span> (<span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span>
1112:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_port</span>
1113:           (
1114:             <span class="ruby-node">&quot;#{self.normalized_scheme}://#{self.normalized_host}&quot;</span> <span class="ruby-operator">+</span>
1115:             <span class="ruby-node">&quot;:#{self.normalized_port}&quot;</span>
1116:           )
1117:         <span class="ruby-keyword kw">else</span>
1118:           <span class="ruby-node">&quot;#{self.normalized_scheme}://#{self.normalized_host}&quot;</span>
1119:         <span class="ruby-keyword kw">end</span>
1120:       <span class="ruby-keyword kw">else</span>
1121:         <span class="ruby-value str">&quot;null&quot;</span>
1122:       <span class="ruby-keyword kw">end</span>)
1123:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000068">
                    
                    <a name="M000068"></a><b>password</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The password component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The password component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000068_source')" id="l_M000068_source">show</a>
                        
                    </p>
                    <div id="M000068_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 854</span>
854:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">password</span>
855:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@password</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@password</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
856:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000070">
                    
                    <a name="M000070"></a><b>password=</b>(new_password)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the password component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_password The new
password component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show</a>
                        
                    </p>
                    <div id="M000070_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 880</span>
880:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">password=</span>(<span class="ruby-identifier">new_password</span>)
881:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_password</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_password</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
882:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_password.class} into String.&quot;</span>
883:       <span class="ruby-keyword kw">end</span>
884:       <span class="ruby-ivar">@password</span> = <span class="ruby-identifier">new_password</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_password</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
885: 
886:       <span class="ruby-comment cmt"># You can't have a nil user with a non-nil password</span>
887:       <span class="ruby-ivar">@password</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">nil</span>
888:       <span class="ruby-ivar">@user</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">nil</span>
889:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@password</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
890:         <span class="ruby-ivar">@user</span> = <span class="ruby-constant">EMPTYSTR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">nil?</span>
891:       <span class="ruby-keyword kw">end</span>
892: 
893:       <span class="ruby-comment cmt"># Reset dependant values</span>
894:       <span class="ruby-ivar">@userinfo</span> = <span class="ruby-keyword kw">nil</span>
895:       <span class="ruby-ivar">@normalized_userinfo</span> = <span class="ruby-keyword kw">nil</span>
896:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
897:       <span class="ruby-ivar">@normalized_password</span> = <span class="ruby-keyword kw">nil</span>
898:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
899:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
900: 
901:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
902:       <span class="ruby-identifier">validate</span>()
903:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000092">
                    
                    <a name="M000092"></a><b>path</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The path component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The path component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000092_source')" id="l_M000092_source">show</a>
                        
                    </p>
                    <div id="M000092_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1271</span>
1271:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">path</span>
1272:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@path</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@path</span> <span class="ruby-operator">:</span> <span class="ruby-constant">EMPTYSTR</span>
1273:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000094">
                    
                    <a name="M000094"></a><b>path=</b>(new_path)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the path component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_path The new
path component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000094_source')" id="l_M000094_source">show</a>
                        
                    </p>
                    <div id="M000094_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1309</span>
1309:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">path=</span>(<span class="ruby-identifier">new_path</span>)
1310:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_path</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1311:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_path.class} into String.&quot;</span>
1312:       <span class="ruby-keyword kw">end</span>
1313:       <span class="ruby-ivar">@path</span> = (<span class="ruby-identifier">new_path</span> <span class="ruby-operator">||</span> <span class="ruby-constant">EMPTYSTR</span>).<span class="ruby-identifier">to_str</span>
1314:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@path</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">SLASH</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">host</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1315:         <span class="ruby-ivar">@path</span> = <span class="ruby-node">&quot;/#{@path}&quot;</span>
1316:       <span class="ruby-keyword kw">end</span>
1317: 
1318:       <span class="ruby-comment cmt"># Reset dependant values</span>
1319:       <span class="ruby-ivar">@normalized_path</span> = <span class="ruby-keyword kw">nil</span>
1320:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1321:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1322:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000085">
                    
                    <a name="M000085"></a><b>port</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The port component for this <a href="URI.html">URI</a>. This is the port
number actually given in the <a href="URI.html">URI</a>. This does not
infer port numbers from default values.
</p>
<p>
@return [Integer] The port component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show</a>
                        
                    </p>
                    <div id="M000085_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1145</span>
1145:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">port</span>
1146:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@port</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@port</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1147:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000087">
                    
                    <a name="M000087"></a><b>port=</b>(new_port)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the port component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, Integer, <a href="URI.html#M000127">to_s</a>] new_port The
new port component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show</a>
                        
                    </p>
                    <div id="M000087_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1165</span>
1165:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">port=</span>(<span class="ruby-identifier">new_port</span>)
1166:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">new_port</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1167:         <span class="ruby-identifier">new_port</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">new_port</span>.<span class="ruby-identifier">to_str</span>)
1168:       <span class="ruby-keyword kw">end</span>
1169:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">new_port</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span>)
1170:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
1171:           <span class="ruby-node">&quot;Invalid port number: #{new_port.inspect}&quot;</span>
1172:       <span class="ruby-keyword kw">end</span>
1173: 
1174:       <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">new_port</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_i</span>
1175:       <span class="ruby-ivar">@port</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@port</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1176: 
1177:       <span class="ruby-comment cmt"># Reset dependant values</span>
1178:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
1179:       <span class="ruby-ivar">@normalized_port</span> = <span class="ruby-keyword kw">nil</span>
1180:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1181:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1182: 
1183:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
1184:       <span class="ruby-identifier">validate</span>()
1185:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000097">
                    
                    <a name="M000097"></a><b>query</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The query component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The query component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show</a>
                        
                    </p>
                    <div id="M000097_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1347</span>
1347:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query</span>
1348:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@query</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@query</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1349:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000099">
                    
                    <a name="M000099"></a><b>query=</b>(new_query)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the query component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_query The new
query component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show</a>
                        
                    </p>
                    <div id="M000099_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1370</span>
1370:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query=</span>(<span class="ruby-identifier">new_query</span>)
1371:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_query</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_query</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1372:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_query.class} into String.&quot;</span>
1373:       <span class="ruby-keyword kw">end</span>
1374:       <span class="ruby-ivar">@query</span> = <span class="ruby-identifier">new_query</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_query</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1375: 
1376:       <span class="ruby-comment cmt"># Reset dependant values</span>
1377:       <span class="ruby-ivar">@normalized_query</span> = <span class="ruby-keyword kw">nil</span>
1378:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1379:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1380:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000100">
                    
                    <a name="M000100"></a><b>query_values</b>(options={})
                    
                </div>
                
                <div class="description">
                  <p>
Converts the query component to a Hash value.
</p>
<p>
@option [Symbol] notation
</p>
<pre>
  May be one of &lt;code&gt;:flat&lt;/code&gt;, &lt;code&gt;:dot&lt;/code&gt;, or
  &lt;code&gt;:subscript&lt;/code&gt;. The &lt;code&gt;:dot&lt;/code&gt; notation is not
  supported for assignment. Default value is &lt;code&gt;:subscript&lt;/code&gt;.
</pre>
<p>
@return [Hash, Array] The query string parsed as a Hash or Array object.
</p>
<p>
@example
</p>
<pre>
  Addressable::URI.parse(&quot;?one=1&amp;two=2&amp;three=3&quot;).query_values
  #=&gt; {&quot;one&quot; =&gt; &quot;1&quot;, &quot;two&quot; =&gt; &quot;2&quot;, &quot;three&quot; =&gt; &quot;3&quot;}
  Addressable::URI.parse(&quot;?one[two][three]=four&quot;).query_values
  #=&gt; {&quot;one&quot; =&gt; {&quot;two&quot; =&gt; {&quot;three&quot; =&gt; &quot;four&quot;}}}
  Addressable::URI.parse(&quot;?one.two.three=four&quot;).query_values(
    :notation =&gt; :dot
  )
  #=&gt; {&quot;one&quot; =&gt; {&quot;two&quot; =&gt; {&quot;three&quot; =&gt; &quot;four&quot;}}}
  Addressable::URI.parse(&quot;?one[two][three]=four&quot;).query_values(
    :notation =&gt; :flat
  )
  #=&gt; {&quot;one[two][three]&quot; =&gt; &quot;four&quot;}
  Addressable::URI.parse(&quot;?one.two.three=four&quot;).query_values(
    :notation =&gt; :flat
  )
  #=&gt; {&quot;one.two.three&quot; =&gt; &quot;four&quot;}
  Addressable::URI.parse(
    &quot;?one[two][three][]=four&amp;one[two][three][]=five&quot;
  ).query_values
  #=&gt; {&quot;one&quot; =&gt; {&quot;two&quot; =&gt; {&quot;three&quot; =&gt; [&quot;four&quot;, &quot;five&quot;]}}}
  Addressable::URI.parse(
    &quot;?one=two&amp;one=three&quot;).query_values(:notation =&gt; :flat_array)
  #=&gt; [['one', 'two'], ['one', 'three']]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show</a>
                        
                    </p>
                    <div id="M000100_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1416</span>
1416:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query_values</span>(<span class="ruby-identifier">options</span>={})
1417:       <span class="ruby-identifier">defaults</span> = {<span class="ruby-identifier">:notation</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:subscript</span>}
1418:       <span class="ruby-identifier">options</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
1419:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-identifier">:flat</span>, <span class="ruby-identifier">:dot</span>, <span class="ruby-identifier">:subscript</span>, <span class="ruby-identifier">:flat_array</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>])
1420:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
1421:           <span class="ruby-value str">&quot;Invalid notation. Must be one of: &quot;</span> <span class="ruby-operator">+</span>
1422:           <span class="ruby-value str">&quot;[:flat, :dot, :subscript, :flat_array].&quot;</span>
1423:       <span class="ruby-keyword kw">end</span>
1424:       <span class="ruby-identifier">dehash</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
1425:         <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1426:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
1427:             <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">dehash</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">value</span>)
1428:           <span class="ruby-keyword kw">end</span>
1429:         <span class="ruby-keyword kw">end</span>
1430:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span> <span class="ruby-operator">!=</span> {} <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span> }
1431:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">accu</span>, (<span class="ruby-identifier">_</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1432:             <span class="ruby-identifier">accu</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">value</span>; <span class="ruby-identifier">accu</span>
1433:           <span class="ruby-keyword kw">end</span>
1434:         <span class="ruby-keyword kw">else</span>
1435:           <span class="ruby-identifier">hash</span>
1436:         <span class="ruby-keyword kw">end</span>
1437:       <span class="ruby-keyword kw">end</span>
1438:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
1439:       <span class="ruby-identifier">empty_accumulator</span> = <span class="ruby-identifier">:flat_array</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">?</span> [] <span class="ruby-operator">:</span> {}
1440:       <span class="ruby-keyword kw">return</span> ((<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span><span class="ruby-operator">|</span>
1441:         <span class="ruby-identifier">pair</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-value">2</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pair</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">pair</span>.<span class="ruby-identifier">empty?</span>
1442:       <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">empty_accumulator</span>.<span class="ruby-identifier">dup</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">accumulator</span>, (<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1443:         <span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
1444:         <span class="ruby-identifier">key</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">key</span>)
1445:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">true</span>
1446:           <span class="ruby-identifier">value</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\+/</span>, <span class="ruby-value str">&quot; &quot;</span>))
1447:         <span class="ruby-keyword kw">end</span>
1448:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:flat</span>
1449:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">accumulator</span>[<span class="ruby-identifier">key</span>]
1450:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Key was repeated: #{key.inspect}&quot;</span>
1451:           <span class="ruby-keyword kw">end</span>
1452:           <span class="ruby-identifier">accumulator</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
1453:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:flat_array</span>
1454:           <span class="ruby-identifier">accumulator</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
1455:         <span class="ruby-keyword kw">else</span>
1456:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:dot</span>
1457:             <span class="ruby-identifier">array_value</span> = <span class="ruby-keyword kw">false</span>
1458:             <span class="ruby-identifier">subkeys</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;.&quot;</span>)
1459:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:subscript</span>
1460:             <span class="ruby-identifier">array_value</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span>(<span class="ruby-identifier">key</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\[\]$/</span>)
1461:             <span class="ruby-identifier">subkeys</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/[\[\]]+/</span>)
1462:           <span class="ruby-keyword kw">end</span>
1463:           <span class="ruby-identifier">current_hash</span> = <span class="ruby-identifier">accumulator</span>
1464:           <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">0</span><span class="ruby-operator">...</span>(<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
1465:             <span class="ruby-identifier">subkey</span> = <span class="ruby-identifier">subkeys</span>[<span class="ruby-identifier">i</span>]
1466:             <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkey</span>] = {} <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkey</span>]
1467:             <span class="ruby-identifier">current_hash</span> = <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkey</span>]
1468:           <span class="ruby-keyword kw">end</span>
1469:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">array_value</span>
1470:             <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">last</span>] = [] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">last</span>]
1471:             <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">last</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">value</span>
1472:           <span class="ruby-keyword kw">else</span>
1473:             <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">last</span>] = <span class="ruby-identifier">value</span>
1474:           <span class="ruby-keyword kw">end</span>
1475:         <span class="ruby-keyword kw">end</span>
1476:         <span class="ruby-identifier">accumulator</span>
1477:       <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">empty_accumulator</span>.<span class="ruby-identifier">dup</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">accumulator</span>, (<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1478:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:flat_array</span>
1479:           <span class="ruby-identifier">accumulator</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
1480:         <span class="ruby-keyword kw">else</span>
1481:           <span class="ruby-identifier">accumulator</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">dehash</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">value</span>
1482:         <span class="ruby-keyword kw">end</span>
1483:         <span class="ruby-identifier">accumulator</span>
1484:       <span class="ruby-keyword kw">end</span>
1485:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000101">
                    
                    <a name="M000101"></a><b>query_values=</b>(new_query_values)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the query component for this <a href="URI.html">URI</a> from a Hash
object. This method produces a query string using the :subscript notation.
An empty Hash will result in a nil query.
</p>
<p>
@param [Hash, <a href="URI.html#M000129">to_hash</a>, Array]
new_query_values The new query values.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show</a>
                        
                    </p>
                    <div id="M000101_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1493</span>
1493:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query_values=</span>(<span class="ruby-identifier">new_query_values</span>)
1494:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_query_values</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
1495:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> = <span class="ruby-keyword kw">nil</span>
1496:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
1497:       <span class="ruby-keyword kw">end</span>
1498: 
1499:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
1500:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_hash</span>)
1501:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
1502:             <span class="ruby-node">&quot;Can't convert #{new_query_values.class} into Hash.&quot;</span>
1503:         <span class="ruby-keyword kw">end</span>
1504:         <span class="ruby-identifier">new_query_values</span> = <span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">to_hash</span>
1505:         <span class="ruby-identifier">new_query_values</span> = <span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1506:           <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Symbol</span>)
1507:           [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
1508:         <span class="ruby-keyword kw">end</span>
1509:         <span class="ruby-comment cmt"># Useful default for OAuth and caching.</span>
1510:         <span class="ruby-comment cmt"># Only to be used for non-Array inputs. Arrays should preserve order.</span>
1511:         <span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">sort!</span>
1512:       <span class="ruby-keyword kw">end</span>
1513: 
1514:       <span class="ruby-comment cmt">##</span>
1515:       <span class="ruby-comment cmt"># Joins and converts parent and value into a properly encoded and</span>
1516:       <span class="ruby-comment cmt"># ordered URL query.</span>
1517:       <span class="ruby-comment cmt">#</span>
1518:       <span class="ruby-comment cmt"># @private</span>
1519:       <span class="ruby-comment cmt"># @param [String] parent an URI encoded component.</span>
1520:       <span class="ruby-comment cmt"># @param [Array, Hash, Symbol, #to_str] value</span>
1521:       <span class="ruby-comment cmt">#</span>
1522:       <span class="ruby-comment cmt"># @return [String] a properly escaped and ordered URL query.</span>
1523:       <span class="ruby-identifier">to_query</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">parent</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1524:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
1525:           <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">val</span><span class="ruby-operator">|</span>
1526:             [
1527:               <span class="ruby-constant">URI</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">key</span>, <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>),
1528:               <span class="ruby-identifier">val</span>
1529:             ]
1530:           <span class="ruby-keyword kw">end</span>
1531:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">sort!</span>
1532:           <span class="ruby-identifier">buffer</span> = <span class="ruby-value str">&quot;&quot;</span>
1533:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">val</span><span class="ruby-operator">|</span>
1534:             <span class="ruby-identifier">new_parent</span> = <span class="ruby-node">&quot;#{parent}[#{key}]&quot;</span>
1535:             <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{to_query.call(new_parent, val)}&amp;&quot;</span>
1536:           <span class="ruby-keyword kw">end</span>
1537:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">chop</span>
1538:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
1539:           <span class="ruby-identifier">buffer</span> = <span class="ruby-value str">&quot;&quot;</span>
1540:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">val</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
1541:             <span class="ruby-identifier">new_parent</span> = <span class="ruby-node">&quot;#{parent}[#{i}]&quot;</span>
1542:             <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{to_query.call(new_parent, val)}&amp;&quot;</span>
1543:           <span class="ruby-keyword kw">end</span>
1544:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">chop</span>
1545:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
1546:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parent</span>
1547:         <span class="ruby-keyword kw">else</span>
1548:           <span class="ruby-identifier">encoded_value</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">encode_component</span>(
1549:             <span class="ruby-identifier">value</span>, <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
1550:           )
1551:           <span class="ruby-keyword kw">return</span> <span class="ruby-node">&quot;#{parent}=#{encoded_value}&quot;</span>
1552:         <span class="ruby-keyword kw">end</span>
1553:       <span class="ruby-keyword kw">end</span>
1554: 
1555:       <span class="ruby-comment cmt"># new_query_values have form [['key1', 'value1'], ['key2', 'value2']]</span>
1556:       <span class="ruby-identifier">buffer</span> = <span class="ruby-value str">&quot;&quot;</span>
1557:       <span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">parent</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1558:         <span class="ruby-identifier">encoded_parent</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">encode_component</span>(
1559:           <span class="ruby-identifier">parent</span>, <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
1560:         )
1561:         <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{to_query.call(encoded_parent, value)}&amp;&quot;</span>
1562:       <span class="ruby-keyword kw">end</span>
1563:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> = <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">chop</span>
1564:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000108">
                    
                    <a name="M000108"></a><b>relative?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determines if the <a href="URI.html">URI</a> is relative.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URI is relative. &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show</a>
                        
                    </p>
                    <div id="M000108_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1664</span>
1664:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relative?</span>
1665:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">nil?</span>
1666:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000102">
                    
                    <a name="M000102"></a><b>request_uri</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The HTTP request <a href="URI.html">URI</a> for this <a
href="URI.html">URI</a>. This is the path and the query string.
</p>
<p>
@return [String] The request <a href="URI.html">URI</a> required for an
HTTP request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show</a>
                        
                    </p>
                    <div id="M000102_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1571</span>
1571:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request_uri</span>
1572:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">absolute?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/^https?$/</span>
1573:       <span class="ruby-keyword kw">return</span> (
1574:         (<span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">:</span> <span class="ruby-constant">SLASH</span>) <span class="ruby-operator">+</span>
1575:         (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-value">? </span><span class="ruby-node">&quot;?#{self.query}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-constant">EMPTYSTR</span>)
1576:       )
1577:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000103">
                    
                    <a name="M000103"></a><b>request_uri=</b>(new_request_uri)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the HTTP request <a href="URI.html">URI</a> for this <a
href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_request_uri The
new HTTP request <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show</a>
                        
                    </p>
                    <div id="M000103_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1583</span>
1583:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request_uri=</span>(<span class="ruby-identifier">new_request_uri</span>)
1584:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_request_uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1585:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_request_uri.class} into String.&quot;</span>
1586:       <span class="ruby-keyword kw">end</span>
1587:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">absolute?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/^https?$/</span>
1588:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
1589:           <span class="ruby-value str">&quot;Cannot set an HTTP request URI for a non-HTTP URI.&quot;</span>
1590:       <span class="ruby-keyword kw">end</span>
1591:       <span class="ruby-identifier">new_request_uri</span> = <span class="ruby-identifier">new_request_uri</span>.<span class="ruby-identifier">to_str</span>
1592:       <span class="ruby-identifier">path_component</span> = <span class="ruby-identifier">new_request_uri</span>[<span class="ruby-regexp re">/^([^\?]*)\?(?:.*)$/</span>, <span class="ruby-value">1</span>]
1593:       <span class="ruby-identifier">query_component</span> = <span class="ruby-identifier">new_request_uri</span>[<span class="ruby-regexp re">/^(?:[^\?]*)\?(.*)$/</span>, <span class="ruby-value">1</span>]
1594:       <span class="ruby-identifier">path_component</span> = <span class="ruby-identifier">path_component</span>.<span class="ruby-identifier">to_s</span>
1595:       <span class="ruby-identifier">path_component</span> = (<span class="ruby-operator">!</span><span class="ruby-identifier">path_component</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-identifier">path_component</span> <span class="ruby-operator">:</span> <span class="ruby-constant">SLASH</span>)
1596:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">path_component</span>
1597:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> = <span class="ruby-identifier">query_component</span>
1598: 
1599:       <span class="ruby-comment cmt"># Reset dependant values</span>
1600:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1601:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1602:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000115">
                    
                    <a name="M000115"></a><b>route_from</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the shortest normalized relative form of this <a
href="URI.html">URI</a> that uses the supplied <a href="URI.html">URI</a>
as a base for resolution. Returns an absolute <a href="URI.html">URI</a> if
necessary. This is effectively the opposite of <tt><a
href="URI.html#M000116">route_to</a></tt>.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] uri The <a href="URI.html">URI</a> to
route from.
</p>
<p>
@return [Addressable::URI]
</p>
<pre>
  The normalized relative URI that is equivalent to the original URI.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show</a>
                        
                    </p>
                    <div id="M000115_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1880</span>
1880:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">route_from</span>(<span class="ruby-identifier">uri</span>)
1881:       <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">normalize</span>
1882:       <span class="ruby-identifier">normalized_self</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>
1883:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">relative?</span>
1884:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Expected absolute URI, got: #{self.to_s}&quot;</span>
1885:       <span class="ruby-keyword kw">end</span>
1886:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">relative?</span>
1887:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Expected absolute URI, got: #{uri.to_s}&quot;</span>
1888:       <span class="ruby-keyword kw">end</span>
1889:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>
1890:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-node">&quot;##{normalized_self.fragment}&quot;</span>)
1891:       <span class="ruby-keyword kw">end</span>
1892:       <span class="ruby-identifier">components</span> = <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">to_hash</span>
1893:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
1894:         <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:scheme</span>] = <span class="ruby-keyword kw">nil</span>
1895:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">authority</span>
1896:           <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:user</span>] = <span class="ruby-keyword kw">nil</span>
1897:           <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:password</span>] = <span class="ruby-keyword kw">nil</span>
1898:           <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-keyword kw">nil</span>
1899:           <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:port</span>] = <span class="ruby-keyword kw">nil</span>
1900:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>
1901:             <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:path</span>] = <span class="ruby-keyword kw">nil</span>
1902:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1903:               <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:query</span>] = <span class="ruby-keyword kw">nil</span>
1904:             <span class="ruby-keyword kw">end</span>
1905:           <span class="ruby-keyword kw">else</span>
1906:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">SLASH</span>
1907:               <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:path</span>].<span class="ruby-identifier">gsub!</span>(
1908:                 <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;^&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)), <span class="ruby-constant">EMPTYSTR</span>)
1909:             <span class="ruby-keyword kw">end</span>
1910:           <span class="ruby-keyword kw">end</span>
1911:         <span class="ruby-keyword kw">end</span>
1912:       <span class="ruby-keyword kw">end</span>
1913:       <span class="ruby-comment cmt"># Avoid network-path references.</span>
1914:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:host</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1915:         <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:scheme</span>] = <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">scheme</span>
1916:       <span class="ruby-keyword kw">end</span>
1917:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
1918:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:scheme</span>],
1919:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:user</span>],
1920:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:password</span>],
1921:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:host</span>],
1922:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:port</span>],
1923:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:path</span>],
1924:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:query</span>],
1925:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:fragment</span>]
1926:       )
1927:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000116">
                    
                    <a name="M000116"></a><b>route_to</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the shortest normalized relative form of the supplied <a
href="URI.html">URI</a> that uses this <a href="URI.html">URI</a> as a base
for resolution. Returns an absolute <a href="URI.html">URI</a> if
necessary. This is effectively the opposite of <tt><a
href="URI.html#M000115">route_from</a></tt>.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] uri The <a href="URI.html">URI</a> to
route to.
</p>
<p>
@return [Addressable::URI]
</p>
<pre>
  The normalized relative URI that is equivalent to the supplied URI.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000116_source')" id="l_M000116_source">show</a>
                        
                    </p>
                    <div id="M000116_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1938</span>
1938:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">route_to</span>(<span class="ruby-identifier">uri</span>)
1939:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">route_from</span>(<span class="ruby-keyword kw">self</span>)
1940:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000062">
                    
                    <a name="M000062"></a><b>scheme</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The scheme component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The scheme component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000062_source')" id="l_M000062_source">show</a>
                        
                    </p>
                    <div id="M000062_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 751</span>
751:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scheme</span>
752:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@scheme</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@scheme</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
753:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000064">
                    
                    <a name="M000064"></a><b>scheme=</b>(new_scheme)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the scheme component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_scheme The new
scheme component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000064_source')" id="l_M000064_source">show</a>
                        
                    </p>
                    <div id="M000064_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 776</span>
776:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scheme=</span>(<span class="ruby-identifier">new_scheme</span>)
777:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_scheme</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
778:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_scheme.class} into String.&quot;</span>
779:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">new_scheme</span>
780:         <span class="ruby-identifier">new_scheme</span> = <span class="ruby-identifier">new_scheme</span>.<span class="ruby-identifier">to_str</span>
781:       <span class="ruby-keyword kw">end</span>
782:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">new_scheme</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/[a-z][a-z0-9\.\+\-]*/i</span>
783:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>, <span class="ruby-value str">&quot;Invalid scheme format.&quot;</span>
784:       <span class="ruby-keyword kw">end</span>
785:       <span class="ruby-ivar">@scheme</span> = <span class="ruby-identifier">new_scheme</span>
786:       <span class="ruby-ivar">@scheme</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scheme</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
787: 
788:       <span class="ruby-comment cmt"># Reset dependant values</span>
789:       <span class="ruby-ivar">@normalized_scheme</span> = <span class="ruby-keyword kw">nil</span>
790:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
791:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
792: 
793:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
794:       <span class="ruby-identifier">validate</span>()
795:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000089">
                    
                    <a name="M000089"></a><b>site</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The combination of components that represent a site. Combines the scheme,
user, password, host, and port components. Primarily useful for HTTP and
HTTPS.
</p>
<p>
For example, <tt>&quot;<a
href="http://example.com/path?query">example.com/path?query</a>&quot;</tt>
would have a <tt>site</tt> value of <tt>&quot;<a
href="http://example.com">example.com</a>&quot;</tt>.
</p>
<p>
@return [String] The components that identify a site.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show</a>
                        
                    </p>
                    <div id="M000089_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1214</span>
1214:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site</span>
1215:       (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@site</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1216:         <span class="ruby-identifier">site_string</span> = <span class="ruby-value str">&quot;&quot;</span>
1217:         <span class="ruby-identifier">site_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.scheme}:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1218:         <span class="ruby-identifier">site_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;//#{self.authority}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1219:         <span class="ruby-identifier">site_string</span>
1220:       <span class="ruby-keyword kw">end</span>)
1221:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000091">
                    
                    <a name="M000091"></a><b>site=</b>(new_site)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the site value for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_site The new
site value.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000091_source')" id="l_M000091_source">show</a>
                        
                    </p>
                    <div id="M000091_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1249</span>
1249:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site=</span>(<span class="ruby-identifier">new_site</span>)
1250:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_site</span>
1251:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_site</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1252:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_site.class} into String.&quot;</span>
1253:         <span class="ruby-keyword kw">end</span>
1254:         <span class="ruby-identifier">new_site</span> = <span class="ruby-identifier">new_site</span>.<span class="ruby-identifier">to_str</span>
1255:         <span class="ruby-comment cmt"># These two regular expressions derived from the primary parsing</span>
1256:         <span class="ruby-comment cmt"># expression</span>
1257:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">new_site</span>[<span class="ruby-regexp re">/^(?:([^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?$/</span>, <span class="ruby-value">1</span>]
1258:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> = <span class="ruby-identifier">new_site</span>[
1259:           <span class="ruby-regexp re">/^(?:(?:[^:\/?#]+):)?(?:\/\/([^\/?#]*))?$/</span>, <span class="ruby-value">1</span>
1260:         ]
1261:       <span class="ruby-keyword kw">else</span>
1262:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-keyword kw">nil</span>
1263:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> = <span class="ruby-keyword kw">nil</span>
1264:       <span class="ruby-keyword kw">end</span>
1265:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000129">
                    
                    <a name="M000129"></a><b>to_hash</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a Hash of the <a href="URI.html">URI</a> components.
</p>
<p>
@return [Hash] The <a href="URI.html">URI</a> as a <tt>Hash</tt> of
components.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show</a>
                        
                    </p>
                    <div id="M000129_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2148</span>
2148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hash</span>
2149:       <span class="ruby-keyword kw">return</span> {
2150:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>,
2151:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>,
2152:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>,
2153:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>,
2154:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>,
2155:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>,
2156:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>,
2157:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span>
2158:       }
2159:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000127">
                    
                    <a name="M000127"></a><b>to_s</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Converts the <a href="URI.html">URI</a> to a <tt>String</tt>.
</p>
<p>
@return [String] The URI&#8217;s <tt>String</tt> representation.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="URI.html#M000128">to_str</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000127_source')" id="l_M000127_source">show</a>
                        
                    </p>
                    <div id="M000127_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2120</span>
2120:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
2121:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
2122:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">NORMPATH</span>
2123:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
2124:           <span class="ruby-node">&quot;Cannot assemble URI string with ambiguous path: '#{self.path}'&quot;</span>
2125:       <span class="ruby-keyword kw">end</span>
2126:       <span class="ruby-ivar">@uri_string</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
2127:         <span class="ruby-identifier">uri_string</span> = <span class="ruby-value str">&quot;&quot;</span>
2128:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.scheme}:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2129:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;//#{self.authority}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2130:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_s</span>
2131:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;?#{self.query}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2132:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;##{self.fragment}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2133:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri_string</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
2134:           <span class="ruby-identifier">uri_string</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
2135:         <span class="ruby-keyword kw">end</span>
2136:         <span class="ruby-identifier">uri_string</span>
2137:       <span class="ruby-keyword kw">end</span>)
2138:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000128">
                    
                    <a name="M000128"></a><b>to_str</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="URI.html#M000127">to_s</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000065">
                    
                    <a name="M000065"></a><b>user</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The user component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The user component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000065_source')" id="l_M000065_source">show</a>
                        
                    </p>
                    <div id="M000065_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 801</span>
801:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user</span>
802:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@user</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@user</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
803:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000067">
                    
                    <a name="M000067"></a><b>user=</b>(new_user)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the user component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_user The new
user component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000067_source')" id="l_M000067_source">show</a>
                        
                    </p>
                    <div id="M000067_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 827</span>
827:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user=</span>(<span class="ruby-identifier">new_user</span>)
828:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
829:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_user.class} into String.&quot;</span>
830:       <span class="ruby-keyword kw">end</span>
831:       <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">new_user</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
832: 
833:       <span class="ruby-comment cmt"># You can't have a nil user with a non-nil password</span>
834:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">password</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
835:         <span class="ruby-ivar">@user</span> = <span class="ruby-constant">EMPTYSTR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">nil?</span>
836:       <span class="ruby-keyword kw">end</span>
837: 
838:       <span class="ruby-comment cmt"># Reset dependant values</span>
839:       <span class="ruby-ivar">@userinfo</span> = <span class="ruby-keyword kw">nil</span>
840:       <span class="ruby-ivar">@normalized_userinfo</span> = <span class="ruby-keyword kw">nil</span>
841:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
842:       <span class="ruby-ivar">@normalized_user</span> = <span class="ruby-keyword kw">nil</span>
843:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
844:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
845: 
846:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
847:       <span class="ruby-identifier">validate</span>()
848:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000071">
                    
                    <a name="M000071"></a><b>userinfo</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The userinfo component for this <a href="URI.html">URI</a>. Combines the
user and password components.
</p>
<p>
@return [String] The userinfo component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show</a>
                        
                    </p>
                    <div id="M000071_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 910</span>
910:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">userinfo</span>
911:       <span class="ruby-identifier">current_user</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>
912:       <span class="ruby-identifier">current_password</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>
913:       (<span class="ruby-identifier">current_user</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">current_password</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@userinfo</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
914:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_password</span>
915:           <span class="ruby-node">&quot;#{current_user}:#{current_password}&quot;</span>
916:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_password</span>
917:           <span class="ruby-node">&quot;#{current_user}&quot;</span>
918:         <span class="ruby-keyword kw">end</span>
919:       <span class="ruby-keyword kw">end</span>)
920:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000073">
                    
                    <a name="M000073"></a><b>userinfo=</b>(new_userinfo)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the userinfo component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] new_userinfo The new
userinfo component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show</a>
                        
                    </p>
                    <div id="M000073_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 944</span>
944:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">userinfo=</span>(<span class="ruby-identifier">new_userinfo</span>)
945:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_userinfo</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
946:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_userinfo.class} into String.&quot;</span>
947:       <span class="ruby-keyword kw">end</span>
948:       <span class="ruby-identifier">new_user</span>, <span class="ruby-identifier">new_password</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_userinfo</span>
949:         [
950:           <span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/^(.*):/</span>, <span class="ruby-value">1</span>],
951:           <span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/:(.*)$/</span>, <span class="ruby-value">1</span>]
952:         ]
953:       <span class="ruby-keyword kw">else</span>
954:         [<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>]
955:       <span class="ruby-keyword kw">end</span>
956: 
957:       <span class="ruby-comment cmt"># Password assigned first to ensure validity in case of nil</span>
958:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> = <span class="ruby-identifier">new_password</span>
959:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> = <span class="ruby-identifier">new_user</span>
960: 
961:       <span class="ruby-comment cmt"># Reset dependant values</span>
962:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
963:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
964:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
965: 
966:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
967:       <span class="ruby-identifier">validate</span>()
968:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000134">
                    
                    <a name="M000134"></a><b>replace_self</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Replaces the internal state of self with the specified URI&#8217;s state.
Used in destructive operations to avoid massive code repetition.
</p>
<p>
@param [Addressable::URI] uri The <a href="URI.html">URI</a> to replace
<tt>self</tt> with.
</p>
<p>
@return [Addressable::URI] <tt>self</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000134_source')" id="l_M000134_source">show</a>
                        
                    </p>
                    <div id="M000134_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2256</span>
2256:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">replace_self</span>(<span class="ruby-identifier">uri</span>)
2257:       <span class="ruby-comment cmt"># Reset dependant values</span>
2258:       <span class="ruby-identifier">instance_variables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">var</span><span class="ruby-operator">|</span>
2259:         <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-identifier">var</span>, <span class="ruby-keyword kw">nil</span>)
2260:       <span class="ruby-keyword kw">end</span>
2261: 
2262:       <span class="ruby-ivar">@scheme</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
2263:       <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span>
2264:       <span class="ruby-ivar">@password</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span>
2265:       <span class="ruby-ivar">@host</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>
2266:       <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>
2267:       <span class="ruby-ivar">@path</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>
2268:       <span class="ruby-ivar">@query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
2269:       <span class="ruby-ivar">@fragment</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">fragment</span>
2270:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
2271:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000133">
                    
                    <a name="M000133"></a><b>validate</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Ensures that the <a href="URI.html">URI</a> is valid.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000133_source')" id="l_M000133_source">show</a>
                        
                    </p>
                    <div id="M000133_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2226</span>
2226:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate</span>
2227:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@validation_deferred</span>
2228:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span>
2229:           (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>.<span class="ruby-identifier">empty?</span>) <span class="ruby-operator">&amp;&amp;</span>
2230:           (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span>)
2231:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
2232:           <span class="ruby-node">&quot;Absolute URI missing hierarchical segment: '#{self.to_s}'&quot;</span>
2233:       <span class="ruby-keyword kw">end</span>
2234:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
2235:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span>
2236:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span>
2237:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2238:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>, <span class="ruby-node">&quot;Hostname not supplied: '#{self.to_s}'&quot;</span>
2239:         <span class="ruby-keyword kw">end</span>
2240:       <span class="ruby-keyword kw">end</span>
2241:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">SLASH</span> <span class="ruby-operator">&amp;&amp;</span>
2242:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2243:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
2244:           <span class="ruby-node">&quot;Cannot have a relative path with an authority set: '#{self.to_s}'&quot;</span>
2245:       <span class="ruby-keyword kw">end</span>
2246:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
2247:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000046">
                    
                    <a name="M000046"></a><b>convert_path</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
Converts a path to a file scheme <a href="URI.html">URI</a>. If the path
supplied is relative, it will be returned as a relative <a
href="URI.html">URI</a>. If the path supplied is actually a non-file <a
href="URI.html">URI</a>, it will parse the <a href="URI.html">URI</a> as if
it had been parsed with <tt><a
href="URI.html#M000042">Addressable::URI.parse</a></tt>. Handles all of the
various Microsoft-specific formats for specifying paths.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] path
</p>
<pre>
  Typically a &lt;code&gt;String&lt;/code&gt; path to a file or directory, but
  will return a sensible return value if an absolute URI is supplied
  instead.
</pre>
<p>
@return [Addressable::URI]
</p>
<pre>
  The parsed file scheme URI or the original URI if some other URI
  scheme was provided.
</pre>
<p>
@example
</p>
<pre>
  base = Addressable::URI.convert_path(&quot;/absolute/path/&quot;)
  uri = Addressable::URI.convert_path(&quot;relative/path&quot;)
  (base + uri).to_s
  #=&gt; &quot;file:///absolute/path/relative/path&quot;

  Addressable::URI.convert_path(
    &quot;c:\\windows\\My Documents 100%20\\foo.txt&quot;
  ).to_s
  #=&gt; &quot;file:///c:/windows/My%20Documents%20100%20/foo.txt&quot;

  Addressable::URI.convert_path(&quot;http://example.com/&quot;).to_s
  #=&gt; &quot;http://example.com/&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000046_source')" id="l_M000046_source">show</a>
                        
                    </p>
                    <div id="M000046_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 229</span>
229:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">convert_path</span>(<span class="ruby-identifier">path</span>)
230:       <span class="ruby-comment cmt"># If we were given nil, return nil.</span>
231:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">path</span>
232:       <span class="ruby-comment cmt"># If a URI object is passed, just return itself.</span>
233:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>)
234:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
235:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{path.class} into String.&quot;</span>
236:       <span class="ruby-keyword kw">end</span>
237:       <span class="ruby-comment cmt"># Otherwise, convert to a String</span>
238:       <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">strip</span>
239: 
240:       <span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^file:\/?\/?/</span>, <span class="ruby-constant">EMPTYSTR</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^file:\/?\/?/</span>
241:       <span class="ruby-identifier">path</span> = <span class="ruby-constant">SLASH</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^([a-zA-Z])[\|:]/</span>
242:       <span class="ruby-identifier">uri</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">path</span>)
243: 
244:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
245:         <span class="ruby-comment cmt"># Adjust windows-style uris</span>
246:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^\/?([a-zA-Z])[\|:][\\\/]/</span>) <span class="ruby-keyword kw">do</span>
247:           <span class="ruby-node">&quot;/#{$1.downcase}:/&quot;</span>
248:         <span class="ruby-keyword kw">end</span>
249:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\\/</span>, <span class="ruby-constant">SLASH</span>)
250:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>) <span class="ruby-operator">&amp;&amp;</span>
251:             <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>).<span class="ruby-identifier">directory?</span>
252:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\/$/</span>, <span class="ruby-constant">EMPTYSTR</span>)
253:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/'</span>
254:         <span class="ruby-keyword kw">end</span>
255: 
256:         <span class="ruby-comment cmt"># If the path is absolute, set the scheme and host.</span>
257:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\//</span>
258:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-value str">&quot;file&quot;</span>
259:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span> = <span class="ruby-constant">EMPTYSTR</span>
260:         <span class="ruby-keyword kw">end</span>
261:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">normalize!</span>
262:       <span class="ruby-keyword kw">end</span>
263: 
264:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>
265:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000056">
                    
                    <a name="M000056"></a><b>encode</b>(uri, returning=String)
                    
                </div>
                
                <div class="description">
                  <p>
Percent encodes any special characters in the <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] uri
</p>
<pre>
  The URI to encode.
</pre>
<p>
@param [Class] returning
</p>
<pre>
  The type of object to return.
  This value may only be set to &lt;code&gt;String&lt;/code&gt; or
  &lt;code&gt;Addressable::URI&lt;/code&gt;. All other values are invalid. Defaults
  to &lt;code&gt;String&lt;/code&gt;.
</pre>
<p>
@return [String, Addressable::URI]
</p>
<pre>
  The encoded URI.
  The return type is determined by the &lt;code&gt;returning&lt;/code&gt; parameter.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000056_source')" id="l_M000056_source">show</a>
                        
                    </p>
                    <div id="M000056_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 490</span>
490:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">returning</span>=<span class="ruby-constant">String</span>)
491:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">nil?</span>
492: 
493:       <span class="ruby-keyword kw">begin</span>
494:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>
495:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">TypeError</span>
496:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
497:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
498: 
499:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">returning</span>)
500:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
501:           <span class="ruby-value str">&quot;Expected Class (String or Addressable::URI), &quot;</span> <span class="ruby-operator">+</span>
502:           <span class="ruby-node">&quot;got #{returning.inspect}&quot;</span>
503:       <span class="ruby-keyword kw">end</span>
504:       <span class="ruby-identifier">uri_object</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">uri</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
505:       <span class="ruby-identifier">encoded_uri</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
506:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">scheme</span>,
507:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">SCHEME</span>),
508:         <span class="ruby-identifier">:authority</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">authority</span>,
509:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">AUTHORITY</span>),
510:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">path</span>,
511:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH</span>),
512:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">query</span>,
513:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">QUERY</span>),
514:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">fragment</span>,
515:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">FRAGMENT</span>)
516:       )
517:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>
518:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded_uri</span>.<span class="ruby-identifier">to_s</span>
519:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>
520:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded_uri</span>
521:       <span class="ruby-keyword kw">end</span>
522:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000053">
                    
                    <a name="M000053"></a><b>encode_component</b>(component, character_class= CharacterClasses::RESERVED + CharacterClasses::UNRESERVED)
                    
                </div>
                
                <div class="description">
                  <p>
Percent encodes a <a href="URI.html">URI</a> component.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] component The <a
href="URI.html">URI</a> component to encode.
</p>
<p>
@param [String, Regexp] character_class
</p>
<pre>
  The characters which are not percent encoded. If a &lt;code&gt;String&lt;/code&gt;
  is passed, the &lt;code&gt;String&lt;/code&gt; must be formatted as a regular
  expression character class. (Do not include the surrounding square
  brackets.)  For example, &lt;code&gt;&quot;b-zB-Z0-9&quot;&lt;/code&gt; would cause
  everything but the letters 'b' through 'z' and the numbers '0' through
 '9' to be percent encoded. If a &lt;code&gt;Regexp&lt;/code&gt; is passed, the
  value &lt;code&gt;/[^b-zB-Z0-9]/&lt;/code&gt; would have the same effect. A set of
  useful &lt;code&gt;String&lt;/code&gt; values may be found in the
  &lt;code&gt;Addressable::URI::CharacterClasses&lt;/code&gt; module. The default
  value is the reserved plus unreserved character classes specified in
  &lt;a href=&quot;http://www.ietf.org/rfc/rfc3986.txt&quot;&gt;RFC 3986&lt;/a&gt;.
</pre>
<p>
@return [String] The encoded component.
</p>
<p>
@example
</p>
<pre>
  Addressable::URI.encode_component(&quot;simple/example&quot;, &quot;b-zB-Z0-9&quot;)
  =&gt; &quot;simple%2Fex%61mple&quot;
  Addressable::URI.encode_component(&quot;simple/example&quot;, /[^b-zB-Z0-9]/)
  =&gt; &quot;simple%2Fex%61mple&quot;
  Addressable::URI.encode_component(
    &quot;simple/example&quot;, Addressable::URI::CharacterClasses::UNRESERVED
  )
  =&gt; &quot;simple%2Fexample&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000053_source')" id="l_M000053_source">show</a>
                        
                    </p>
                    <div id="M000053_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 323</span>
323:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">component</span>, <span class="ruby-identifier">character_class</span>=
324:         <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">RESERVED</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>)
325:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">nil?</span>
326: 
327:       <span class="ruby-keyword kw">begin</span>
328:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Symbol</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Numeric</span>)
329:           <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">to_s</span>
330:         <span class="ruby-keyword kw">else</span>
331:           <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">to_str</span>
332:         <span class="ruby-keyword kw">end</span>
333:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-constant">NoMethodError</span>
334:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{component.class} into String.&quot;</span>
335:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">component</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
336: 
337:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-constant">Regexp</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">character_class</span>.<span class="ruby-identifier">class</span>)
338:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
339:           <span class="ruby-node">&quot;Expected String or Regexp, got #{character_class.inspect}&quot;</span>
340:       <span class="ruby-keyword kw">end</span>
341:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">character_class</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
342:         <span class="ruby-identifier">character_class</span> = <span class="ruby-node">/[^#{character_class}]/</span>
343:       <span class="ruby-keyword kw">end</span>
344:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
345:         <span class="ruby-comment cmt"># We can't perform regexps on invalid UTF sequences, but</span>
346:         <span class="ruby-comment cmt"># here we need to, so switch to ASCII.</span>
347:         <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">dup</span>
348:         <span class="ruby-identifier">component</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
349:       <span class="ruby-keyword kw">end</span>
350:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">character_class</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sequence</span><span class="ruby-operator">|</span>
351:         (<span class="ruby-identifier">sequence</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">'C*'</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-value str">&quot;%&quot;</span> <span class="ruby-operator">+</span> (<span class="ruby-value str">&quot;%02x&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">c</span>).<span class="ruby-identifier">upcase</span> }).<span class="ruby-identifier">join</span>
352:       <span class="ruby-keyword kw">end</span>
353:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000058">
                    
                    <a name="M000058"></a><b>form_encode</b>(form_values, sort=false)
                    
                </div>
                
                <div class="description">
                  <p>
Encodes a set of key/value pairs according to the rules for the
<tt>application/x-www-form-urlencoded</tt> MIME type.
</p>
<p>
@param [<a href="URI.html#M000129">to_hash</a>, to_ary] form_values
</p>
<pre>
  The form values to encode.
</pre>
<p>
@param [TrueClass, FalseClass] sort
</p>
<pre>
  Sort the key/value pairs prior to encoding.
  Defaults to &lt;code&gt;false&lt;/code&gt;.
</pre>
<p>
@return [String]
</p>
<pre>
  The encoded value.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000058_source')" id="l_M000058_source">show</a>
                        
                    </p>
                    <div id="M000058_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 614</span>
614:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">form_encode</span>(<span class="ruby-identifier">form_values</span>, <span class="ruby-identifier">sort</span>=<span class="ruby-keyword kw">false</span>)
615:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_hash</span>)
616:         <span class="ruby-identifier">form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">to_hash</span>.<span class="ruby-identifier">to_a</span>
617:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_ary</span>)
618:         <span class="ruby-identifier">form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">to_ary</span>
619:       <span class="ruby-keyword kw">else</span>
620:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{form_values.class} into Array.&quot;</span>
621:       <span class="ruby-keyword kw">end</span>
622:       <span class="ruby-identifier">form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
623:         [<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>]
624:       <span class="ruby-keyword kw">end</span>
625:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sort</span>
626:         <span class="ruby-comment cmt"># Useful for OAuth and optimizing caching systems</span>
627:         <span class="ruby-identifier">form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">sort</span>
628:       <span class="ruby-keyword kw">end</span>
629:       <span class="ruby-identifier">escaped_form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
630:         <span class="ruby-comment cmt"># Line breaks are CRLF pairs</span>
631:         [
632:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(
633:             <span class="ruby-identifier">key</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)/</span>, <span class="ruby-value str">&quot;\r\n&quot;</span>),
634:             <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
635:           ).<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;%20&quot;</span>, <span class="ruby-value str">&quot;+&quot;</span>),
636:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(
637:             <span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)/</span>, <span class="ruby-value str">&quot;\r\n&quot;</span>),
638:             <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
639:           ).<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;%20&quot;</span>, <span class="ruby-value str">&quot;+&quot;</span>)
640:         ]
641:       <span class="ruby-keyword kw">end</span>
642:       <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">escaped_form_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
643:         <span class="ruby-node">&quot;#{key}=#{value}&quot;</span>
644:       <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>)
645:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000059">
                    
                    <a name="M000059"></a><b>form_unencode</b>(encoded_value)
                    
                </div>
                
                <div class="description">
                  <p>
Decodes a <tt>String</tt> according to the rules for the
<tt>application/x-www-form-urlencoded</tt> MIME type.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] encoded_value
</p>
<pre>
  The form values to decode.
</pre>
<p>
@return [Array]
</p>
<pre>
  The decoded values.
  This is not a &lt;code&gt;Hash&lt;/code&gt; because of the possibility for
  duplicate keys.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000059_source')" id="l_M000059_source">show</a>
                        
                    </p>
                    <div id="M000059_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 658</span>
658:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">form_unencode</span>(<span class="ruby-identifier">encoded_value</span>)
659:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">encoded_value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
660:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{encoded_value.class} into String.&quot;</span>
661:       <span class="ruby-keyword kw">end</span>
662:       <span class="ruby-identifier">encoded_value</span> = <span class="ruby-identifier">encoded_value</span>.<span class="ruby-identifier">to_str</span>
663:       <span class="ruby-identifier">split_values</span> = <span class="ruby-identifier">encoded_value</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span><span class="ruby-operator">|</span>
664:         <span class="ruby-identifier">pair</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-value">2</span>)
665:       <span class="ruby-keyword kw">end</span>
666:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">split_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
667:         [
668:           <span class="ruby-identifier">key</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(
669:             <span class="ruby-identifier">key</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;+&quot;</span>, <span class="ruby-value str">&quot;%20&quot;</span>)).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)/</span>, <span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
670:           <span class="ruby-identifier">value</span> <span class="ruby-value">? </span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(
671:             <span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;+&quot;</span>, <span class="ruby-value str">&quot;%20&quot;</span>)).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)/</span>, <span class="ruby-value str">&quot;\n&quot;</span>)) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
672:         ]
673:       <span class="ruby-keyword kw">end</span>
674:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000043">
                    
                    <a name="M000043"></a><b>heuristic_parse</b>(uri, hints={})
                    
                </div>
                
                <div class="description">
                  <p>
Converts an input to a <a href="URI.html">URI</a>. The input does not have
to be a valid <a href="URI.html">URI</a>  the method will use heuristics
to guess what <a href="URI.html">URI</a> was intended. This is not
standards-compliant, merely user-friendly.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] uri
</p>
<pre>
  The URI string to parse.
  No parsing is performed if the object is already an
  &lt;code&gt;Addressable::URI&lt;/code&gt;.
</pre>
<p>
@param [Hash] hints
</p>
<pre>
  A &lt;code&gt;Hash&lt;/code&gt; of hints to the heuristic parser.
  Defaults to &lt;code&gt;{:scheme =&gt; &quot;http&quot;}&lt;/code&gt;.
</pre>
<p>
@return [Addressable::URI] The parsed <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000043_source')" id="l_M000043_source">show</a>
                        
                    </p>
                    <div id="M000043_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 156</span>
156:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">heuristic_parse</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">hints</span>={})
157:       <span class="ruby-comment cmt"># If we were given nil, return nil.</span>
158:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uri</span>
159:       <span class="ruby-comment cmt"># If a URI object is passed, just return itself.</span>
160:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>)
161:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
162:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
163:       <span class="ruby-keyword kw">end</span>
164:       <span class="ruby-comment cmt"># Otherwise, convert to a String</span>
165:       <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">dup</span>
166:       <span class="ruby-identifier">hints</span> = {
167:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http&quot;</span>
168:       }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">hints</span>)
169:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">uri</span>
170:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^http:\/+/</span>
171:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^http:\/+/</span>, <span class="ruby-value str">&quot;http://&quot;</span>)
172:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^https:\/+/</span>
173:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^https:\/+/</span>, <span class="ruby-value str">&quot;https://&quot;</span>)
174:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^feed:\/+http:\/+/</span>
175:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^feed:\/+http:\/+/</span>, <span class="ruby-value str">&quot;feed:http://&quot;</span>)
176:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^feed:\/+/</span>
177:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^feed:\/+/</span>, <span class="ruby-value str">&quot;feed://&quot;</span>)
178:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^file:\/+/</span>
179:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^file:\/+/</span>, <span class="ruby-value str">&quot;file:///&quot;</span>)
180:       <span class="ruby-keyword kw">end</span>
181:       <span class="ruby-identifier">parsed</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
182:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^[^\/?#\.]+\.[^\/?#]+$/</span>
183:         <span class="ruby-identifier">parsed</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">hints</span>[<span class="ruby-identifier">:scheme</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;://&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">uri</span>)
184:       <span class="ruby-keyword kw">end</span>
185:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;.&quot;</span>)
186:         <span class="ruby-identifier">new_host</span> = <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">path</span>[<span class="ruby-regexp re">/^([^\/]+\.[^\/]*)/</span>, <span class="ruby-value">1</span>]
187:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_host</span>
188:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">defer_validation</span> <span class="ruby-keyword kw">do</span>
189:             <span class="ruby-identifier">new_path</span> = <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub</span>(
190:               <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;^&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">new_host</span>)), <span class="ruby-constant">EMPTYSTR</span>)
191:             <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">host</span> = <span class="ruby-identifier">new_host</span>
192:             <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">new_path</span>
193:             <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">hints</span>[<span class="ruby-identifier">:scheme</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">scheme</span>
194:           <span class="ruby-keyword kw">end</span>
195:         <span class="ruby-keyword kw">end</span>
196:       <span class="ruby-keyword kw">end</span>
197:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parsed</span>
198:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000083">
                    
                    <a name="M000083"></a><b>ip_based_schemes</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of known ip-based schemes. These schemes typically use a
similar <a href="URI.html">URI</a> form:
<tt>//&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;url-path&gt;</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show</a>
                        
                    </p>
                    <div id="M000083_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1128</span>
1128:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ip_based_schemes</span>
1129:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port_mapping</span>.<span class="ruby-identifier">keys</span>
1130:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000052">
                    
                    <a name="M000052"></a><b>join</b>(*uris)
                    
                </div>
                
                <div class="description">
                  <p>
Joins several URIs together.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] *uris
</p>
<pre>
  The URIs to join.
</pre>
<p>
@return [Addressable::URI] The joined <a href="URI.html">URI</a>.
</p>
<p>
@example
</p>
<pre>
  base = &quot;http://example.com/&quot;
  uri = Addressable::URI.parse(&quot;relative/path&quot;)
  Addressable::URI.join(base, uri)
  #=&gt; #&lt;Addressable::URI:0xcab390 URI:http://example.com/relative/path&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000052_source')" id="l_M000052_source">show</a>
                        
                    </p>
                    <div id="M000052_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 280</span>
280:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">uris</span>)
281:       <span class="ruby-identifier">uri_objects</span> = <span class="ruby-identifier">uris</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">uri</span><span class="ruby-operator">|</span>
282:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
283:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
284:         <span class="ruby-keyword kw">end</span>
285:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">uri</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>)
286:       <span class="ruby-keyword kw">end</span>
287:       <span class="ruby-identifier">result</span> = <span class="ruby-identifier">uri_objects</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">dup</span>
288:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">uri</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">uri_objects</span>
289:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">join!</span>(<span class="ruby-identifier">uri</span>)
290:       <span class="ruby-keyword kw">end</span>
291:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
292:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000060">
                    
                    <a name="M000060"></a><b>new</b>(options={})
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new uri object from component parts.
</p>
<p>
@option [String, <a href="URI.html#M000128">to_str</a>] scheme The scheme
component. @option [String, <a href="URI.html#M000128">to_str</a>] user The
user component. @option [String, <a href="URI.html#M000128">to_str</a>]
password The password component. @option [String, <a
href="URI.html#M000128">to_str</a>] userinfo
</p>
<pre>
  The userinfo component. If this is supplied, the user and password
  components must be omitted.
</pre>
<p>
@option [String, <a href="URI.html#M000128">to_str</a>] host The host
component. @option [String, <a href="URI.html#M000128">to_str</a>] port The
port component. @option [String, <a href="URI.html#M000128">to_str</a>]
authority
</p>
<pre>
  The authority component. If this is supplied, the user, password,
  userinfo, host, and port components must be omitted.
</pre>
<p>
@option [String, <a href="URI.html#M000128">to_str</a>] path The path
component. @option [String, <a href="URI.html#M000128">to_str</a>] query
The query component. @option [String, <a
href="URI.html#M000128">to_str</a>] fragment The fragment component.
</p>
<p>
@return [Addressable::URI] The constructed <a href="URI.html">URI</a>
object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000060_source')" id="l_M000060_source">show</a>
                        
                    </p>
                    <div id="M000060_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 695</span>
695:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span>={})
696:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
697:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">:userinfo</span>, <span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>, <span class="ruby-identifier">:host</span>, <span class="ruby-identifier">:port</span>]).<span class="ruby-identifier">any?</span>
698:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
699:             <span class="ruby-value str">&quot;Cannot specify both an authority and any of the components &quot;</span> <span class="ruby-operator">+</span>
700:             <span class="ruby-value str">&quot;within the authority.&quot;</span>
701:         <span class="ruby-keyword kw">end</span>
702:       <span class="ruby-keyword kw">end</span>
703:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>)
704:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>]).<span class="ruby-identifier">any?</span>
705:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
706:             <span class="ruby-value str">&quot;Cannot specify both a userinfo and either the user or password.&quot;</span>
707:         <span class="ruby-keyword kw">end</span>
708:       <span class="ruby-keyword kw">end</span>
709: 
710:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">defer_validation</span> <span class="ruby-keyword kw">do</span>
711:         <span class="ruby-comment cmt"># Bunch of crazy logic required because of the composite components</span>
712:         <span class="ruby-comment cmt"># like userinfo and authority.</span>
713:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:scheme</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:scheme</span>]
714:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:user</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:user</span>]
715:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:password</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:password</span>]
716:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">userinfo</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:userinfo</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:userinfo</span>]
717:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:host</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:host</span>]
718:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:port</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:port</span>]
719:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:authority</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:authority</span>]
720:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:path</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:path</span>]
721:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:query</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:query</span>]
722:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query_values</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:query_values</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:query_values</span>]
723:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:fragment</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:fragment</span>]
724:       <span class="ruby-keyword kw">end</span>
725:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000055">
                    
                    <a name="M000055"></a><b>normalize_component</b>(component, character_class= CharacterClasses::RESERVED + CharacterClasses::UNRESERVED)
                    
                </div>
                
                <div class="description">
                  <p>
Normalizes the encoding of a <a href="URI.html">URI</a> component.
</p>
<p>
@param [String, <a href="URI.html#M000128">to_str</a>] component The <a
href="URI.html">URI</a> component to encode.
</p>
<p>
@param [String, Regexp] character_class
</p>
<pre>
  The characters which are not percent encoded. If a &lt;code&gt;String&lt;/code&gt;
  is passed, the &lt;code&gt;String&lt;/code&gt; must be formatted as a regular
  expression character class. (Do not include the surrounding square
  brackets.)  For example, &lt;code&gt;&quot;b-zB-Z0-9&quot;&lt;/code&gt; would cause
  everything but the letters 'b' through 'z' and the numbers '0'
  through '9' to be percent encoded. If a &lt;code&gt;Regexp&lt;/code&gt; is passed,
  the value &lt;code&gt;/[^b-zB-Z0-9]/&lt;/code&gt; would have the same effect. A
  set of useful &lt;code&gt;String&lt;/code&gt; values may be found in the
  &lt;code&gt;Addressable::URI::CharacterClasses&lt;/code&gt; module. The default
  value is the reserved plus unreserved character classes specified in
  &lt;a href=&quot;http://www.ietf.org/rfc/rfc3986.txt&quot;&gt;RFC 3986&lt;/a&gt;.
</pre>
<p>
@return [String] The normalized component.
</p>
<p>
@example
</p>
<pre>
  Addressable::URI.normalize_component(&quot;simpl%65/%65xampl%65&quot;, &quot;b-zB-Z&quot;)
  =&gt; &quot;simple%2Fex%61mple&quot;
  Addressable::URI.normalize_component(
    &quot;simpl%65/%65xampl%65&quot;, /[^b-zB-Z]/
  )
  =&gt; &quot;simple%2Fex%61mple&quot;
  Addressable::URI.normalize_component(
    &quot;simpl%65/%65xampl%65&quot;,
    Addressable::URI::CharacterClasses::UNRESERVED
  )
  =&gt; &quot;simple%2Fexample&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000055_source')" id="l_M000055_source">show</a>
                        
                    </p>
                    <div id="M000055_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 440</span>
440:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize_component</span>(<span class="ruby-identifier">component</span>, <span class="ruby-identifier">character_class</span>=
441:         <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">RESERVED</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>)
442:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">nil?</span>
443: 
444:       <span class="ruby-keyword kw">begin</span>
445:         <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">to_str</span>
446:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">TypeError</span>
447:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{component.class} into String.&quot;</span>
448:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">component</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
449: 
450:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-constant">Regexp</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">character_class</span>.<span class="ruby-identifier">class</span>)
451:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
452:           <span class="ruby-node">&quot;Expected String or Regexp, got #{character_class.inspect}&quot;</span>
453:       <span class="ruby-keyword kw">end</span>
454:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">character_class</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
455:         <span class="ruby-identifier">character_class</span> = <span class="ruby-node">/[^#{character_class}]/</span>
456:       <span class="ruby-keyword kw">end</span>
457:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
458:         <span class="ruby-comment cmt"># We can't perform regexps on invalid UTF sequences, but</span>
459:         <span class="ruby-comment cmt"># here we need to, so switch to ASCII.</span>
460:         <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">dup</span>
461:         <span class="ruby-identifier">component</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
462:       <span class="ruby-keyword kw">end</span>
463:       <span class="ruby-identifier">unencoded</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">component</span>)
464:       <span class="ruby-keyword kw">begin</span>
465:         <span class="ruby-identifier">encoded</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(
466:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">IDNA</span>.<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">unencoded</span>),
467:           <span class="ruby-identifier">character_class</span>
468:         )
469:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
470:         <span class="ruby-identifier">encoded</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">unencoded</span>)
471:       <span class="ruby-keyword kw">end</span>
472:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded</span>
473:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000057">
                    
                    <a name="M000057"></a><b>normalized_encode</b>(uri, returning=String)
                    
                </div>
                
                <div class="description">
                  <p>
Normalizes the encoding of a <a href="URI.html">URI</a>. Characters within
a hostname are not percent encoded to allow for internationalized domain
names.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] uri
</p>
<pre>
  The URI to encode.
</pre>
<p>
@param [Class] returning
</p>
<pre>
  The type of object to return.
  This value may only be set to &lt;code&gt;String&lt;/code&gt; or
  &lt;code&gt;Addressable::URI&lt;/code&gt;. All other values are invalid. Defaults
  to &lt;code&gt;String&lt;/code&gt;.
</pre>
<p>
@return [String, Addressable::URI]
</p>
<pre>
  The encoded URI.
  The return type is determined by the &lt;code&gt;returning&lt;/code&gt; parameter.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000057_source')" id="l_M000057_source">show</a>
                        
                    </p>
                    <div id="M000057_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 544</span>
544:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_encode</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">returning</span>=<span class="ruby-constant">String</span>)
545:       <span class="ruby-keyword kw">begin</span>
546:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>
547:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">TypeError</span>
548:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
549:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
550: 
551:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">returning</span>)
552:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
553:           <span class="ruby-value str">&quot;Expected Class (String or Addressable::URI), &quot;</span> <span class="ruby-operator">+</span>
554:           <span class="ruby-node">&quot;got #{returning.inspect}&quot;</span>
555:       <span class="ruby-keyword kw">end</span>
556:       <span class="ruby-identifier">uri_object</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">uri</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
557:       <span class="ruby-identifier">components</span> = {
558:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">scheme</span>),
559:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">user</span>),
560:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">password</span>),
561:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">host</span>),
562:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">port</span>,
563:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">path</span>),
564:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">query</span>),
565:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">fragment</span>)
566:       }
567:       <span class="ruby-identifier">components</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
568:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
569:           <span class="ruby-keyword kw">begin</span>
570:             <span class="ruby-identifier">components</span>[<span class="ruby-identifier">key</span>] =
571:               <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">IDNA</span>.<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_str</span>)
572:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
573:             <span class="ruby-comment cmt"># Likely a malformed UTF-8 character, skip unicode normalization</span>
574:             <span class="ruby-identifier">components</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_str</span>
575:           <span class="ruby-keyword kw">end</span>
576:         <span class="ruby-keyword kw">end</span>
577:       <span class="ruby-keyword kw">end</span>
578:       <span class="ruby-identifier">encoded_uri</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
579:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:scheme</span>],
580:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">SCHEME</span>),
581:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:user</span>],
582:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>),
583:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:password</span>],
584:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>),
585:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:host</span>],
586:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:port</span>],
587:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:path</span>],
588:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH</span>),
589:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:query</span>],
590:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">QUERY</span>),
591:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:fragment</span>],
592:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">FRAGMENT</span>)
593:       )
594:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>
595:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded_uri</span>.<span class="ruby-identifier">to_s</span>
596:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>
597:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded_uri</span>
598:       <span class="ruby-keyword kw">end</span>
599:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000042">
                    
                    <a name="M000042"></a><b>parse</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <a href="URI.html">URI</a> object based on the parsed string.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] uri
</p>
<pre>
  The URI string to parse.
  No parsing is performed if the object is already an
  &lt;code&gt;Addressable::URI&lt;/code&gt;.
</pre>
<p>
@return [Addressable::URI] The parsed <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000042_source')" id="l_M000042_source">show</a>
                        
                    </p>
                    <div id="M000042_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 83</span>
 83:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
 84:       <span class="ruby-comment cmt"># If we were given nil, return nil.</span>
 85:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uri</span>
 86:       <span class="ruby-comment cmt"># If a URI object is passed, just return itself.</span>
 87:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>)
 88: 
 89:       <span class="ruby-comment cmt"># If a URI object of the Ruby standard library variety is passed,</span>
 90:       <span class="ruby-comment cmt"># convert it to a string, then parse the string.</span>
 91:       <span class="ruby-comment cmt"># We do the check this way because we don't want to accidentally</span>
 92:       <span class="ruby-comment cmt"># cause a missing constant exception to be thrown.</span>
 93:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^URI\b/</span>
 94:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>
 95:       <span class="ruby-keyword kw">end</span>
 96: 
 97:       <span class="ruby-comment cmt"># Otherwise, convert to a String</span>
 98:       <span class="ruby-keyword kw">begin</span>
 99:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>
100:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-constant">NoMethodError</span>
101:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
102:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
103: 
104:       <span class="ruby-comment cmt"># This Regexp supplied as an example in RFC 3986, and it works great.</span>
105:       <span class="ruby-identifier">scan</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">URIREGEX</span>)
106:       <span class="ruby-identifier">fragments</span> = <span class="ruby-identifier">scan</span>[<span class="ruby-value">0</span>]
107:       <span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">1</span>]
108:       <span class="ruby-identifier">authority</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">3</span>]
109:       <span class="ruby-identifier">path</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">4</span>]
110:       <span class="ruby-identifier">query</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">6</span>]
111:       <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">8</span>]
112:       <span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">nil</span>
113:       <span class="ruby-identifier">password</span> = <span class="ruby-keyword kw">nil</span>
114:       <span class="ruby-identifier">host</span> = <span class="ruby-keyword kw">nil</span>
115:       <span class="ruby-identifier">port</span> = <span class="ruby-keyword kw">nil</span>
116:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
117:         <span class="ruby-comment cmt"># The Regexp above doesn't split apart the authority.</span>
118:         <span class="ruby-identifier">userinfo</span> = <span class="ruby-identifier">authority</span>[<span class="ruby-regexp re">/^([^\[\]]*)@/</span>, <span class="ruby-value">1</span>]
119:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">userinfo</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
120:           <span class="ruby-identifier">user</span> = <span class="ruby-identifier">userinfo</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/^([^:]*):?/</span>, <span class="ruby-value">1</span>]
121:           <span class="ruby-identifier">password</span> = <span class="ruby-identifier">userinfo</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/:(.*)$/</span>, <span class="ruby-value">1</span>]
122:         <span class="ruby-keyword kw">end</span>
123:         <span class="ruby-identifier">host</span> = <span class="ruby-identifier">authority</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^([^\[\]]*)@/</span>, <span class="ruby-constant">EMPTYSTR</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/:([^:@\[\]]*?)$/</span>, <span class="ruby-constant">EMPTYSTR</span>)
124:         <span class="ruby-identifier">port</span> = <span class="ruby-identifier">authority</span>[<span class="ruby-regexp re">/:([^:@\[\]]*?)$/</span>, <span class="ruby-value">1</span>]
125:       <span class="ruby-keyword kw">end</span>
126:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">port</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EMPTYSTR</span>
127:         <span class="ruby-identifier">port</span> = <span class="ruby-keyword kw">nil</span>
128:       <span class="ruby-keyword kw">end</span>
129: 
130:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">new</span>(
131:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">scheme</span>,
132:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>,
133:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">password</span>,
134:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">host</span>,
135:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">port</span>,
136:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">path</span>,
137:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">query</span>,
138:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">fragment</span>
139:       )
140:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000084">
                    
                    <a name="M000084"></a><b>port_mapping</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a hash of common IP-based schemes and their default port numbers.
Adding new schemes to this hash, as necessary, will allow for better <a
href="URI.html">URI</a> normalization.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show</a>
                        
                    </p>
                    <div id="M000084_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1135</span>
1135:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port_mapping</span>
1136:       <span class="ruby-constant">PORT_MAPPING</span>
1137:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000054">
                    
                    <a name="M000054"></a><b>unencode</b>(uri, returning=String)
                    
                </div>
                
                <div class="description">
                  <p>
Unencodes any percent encoded characters within a <a
href="URI.html">URI</a> component. This method may be used for unencoding
either components or full URIs, however, it is recommended to use the
<tt>unencode_component</tt> alias when unencoding components.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000128">to_str</a>] uri
</p>
<pre>
  The URI or component to unencode.
</pre>
<p>
@param [Class] returning
</p>
<pre>
  The type of object to return.
  This value may only be set to &lt;code&gt;String&lt;/code&gt; or
  &lt;code&gt;Addressable::URI&lt;/code&gt;. All other values are invalid. Defaults
  to &lt;code&gt;String&lt;/code&gt;.
</pre>
<p>
@return [String, Addressable::URI]
</p>
<pre>
  The unencoded component or URI.
  The return type is determined by the &lt;code&gt;returning&lt;/code&gt; parameter.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000054_source')" id="l_M000054_source">show</a>
                        
                    </p>
                    <div id="M000054_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 377</span>
377:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">returning</span>=<span class="ruby-constant">String</span>)
378:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">nil?</span>
379: 
380:       <span class="ruby-keyword kw">begin</span>
381:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>
382:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">TypeError</span>
383:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
384:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
385:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">returning</span>)
386:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
387:           <span class="ruby-value str">&quot;Expected Class (String or Addressable::URI), &quot;</span> <span class="ruby-operator">+</span>
388:           <span class="ruby-node">&quot;got #{returning.inspect}&quot;</span>
389:       <span class="ruby-keyword kw">end</span>
390:       <span class="ruby-identifier">result</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/%[0-9a-f]{2}/i</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sequence</span><span class="ruby-operator">|</span>
391:         <span class="ruby-identifier">sequence</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>].<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>).<span class="ruby-identifier">chr</span>
392:       <span class="ruby-keyword kw">end</span>
393:       <span class="ruby-identifier">result</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;utf-8&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
394:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>
395:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
396:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>
397:         <span class="ruby-keyword kw">return</span> <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">result</span>)
398:       <span class="ruby-keyword kw">end</span>
399:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Private methods</div>
            
            <div class="method">
                <div class="title" id="M000132">
                    
                    <a name="M000132"></a><b>normalize_path</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show</a>
                        
                    </p>
                    <div id="M000132_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2202</span>
2202:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">path</span>)
2203:       <span class="ruby-comment cmt"># Section 5.2.4 of RFC 3986</span>
2204: 
2205:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">nil?</span>
2206:       <span class="ruby-identifier">normalized_path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">dup</span>
2207:       <span class="ruby-keyword kw">begin</span>
2208:         <span class="ruby-identifier">mod</span> = <span class="ruby-keyword kw">nil</span>
2209:         <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-constant">NPATH1</span>, <span class="ruby-constant">SLASH</span>)
2210: 
2211:         <span class="ruby-identifier">parent</span> = <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">match</span>(<span class="ruby-constant">NPATH2</span>)
2212:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">&amp;&amp;</span> ((<span class="ruby-identifier">parent</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">PARENT1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">parent</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">PARENT2</span>) \
2213:                       <span class="ruby-operator">||</span> (<span class="ruby-identifier">parent</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">PARENT1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">parent</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">PARENT2</span>))
2214:           <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/\/#{Regexp.escape(parent[1].to_s)}\/\.\.\/|(\/#{Regexp.escape(parent[2].to_s)}\/\.\.$)/</span>, <span class="ruby-constant">SLASH</span>)
2215:         <span class="ruby-keyword kw">end</span>
2216: 
2217:         <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-constant">NPATH3</span>, <span class="ruby-constant">EMPTYSTR</span>)
2218:         <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-constant">NPATH4</span>, <span class="ruby-constant">SLASH</span>)
2219:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">nil?</span>
2220: 
2221:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">normalized_path</span>
2222:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    