<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Selenium::Server</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Selenium::Server 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/selenium/server_rb.html">lib/selenium/server.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Wraps the remote server jar
</p>
<p>
Usage:
</p>
<pre>
  server = Selenium::Server.new('/path/to/selenium-server-standalone.jar')
  server.start
</pre>
<p>
Automatically download the given version:
</p>
<pre>
  server = Selenium::Server.get '2.6.0'
  server.start
</pre>
<p>
or the latest version:
</p>
<pre>
  server = Selenium::Server.get :latest
  server.start
</pre>
<p>
Run the server in the background:
</p>
<pre>
  server = Selenium::Server.new(jar, :background =&gt; true)
  server.start
</pre>
<p>
Add additional arguments:
</p>
<pre>
  server = Selenium::Server.new(jar)
  server &lt;&lt; [&quot;--additional&quot;, &quot;args&quot;]
  server.start
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000150"><<</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000136">download</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000135">get</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000141">latest</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000151">net_http</a>,</li>
                
                <li><a href="#M000144">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000158">poll_for_service</a>,</li>
                
                <li><a href="#M000159">poll_for_shutdown</a>,</li>
                
                <li><a href="#M000155">process</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000160">socket</a>,</li>
                
                <li><a href="#M000146">start</a>,</li>
                
                <li><a href="#M000147">stop</a>,</li>
                
                <li><a href="#M000154">stop_process</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000148">webdriver_url</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">CLASS</span> <a href="Server/Error.html">Selenium::Server::Error</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">CL_RESET</td>
            <td>=</td>
            <td class="attr-value">WebDriver::Platform.windows? ? '' : &quot;\r\e[0K&quot;</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000150">
                    
                    <a name="M000150"></a><b>&lt;&lt;</b>(arg)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000150_source')" id="l_M000150_source">show</a>
                        
                    </p>
                    <div id="M000150_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 152</span>
152:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">arg</span>)
153:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>)
154:         <span class="ruby-ivar">@additional_args</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">arg</span>
155:       <span class="ruby-keyword kw">else</span>
156:         <span class="ruby-ivar">@additional_args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_s</span>
157:       <span class="ruby-keyword kw">end</span>
158:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000146">
                    
                    <a name="M000146"></a><b>start</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show</a>
                        
                    </p>
                    <div id="M000146_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 129</span>
129:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">start</span>
130:       <span class="ruby-identifier">process</span>.<span class="ruby-identifier">start</span>
131:       <span class="ruby-identifier">poll_for_service</span>
132: 
133:       <span class="ruby-identifier">process</span>.<span class="ruby-identifier">wait</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@background</span>
134:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000147">
                    
                    <a name="M000147"></a><b>stop</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000147_source')" id="l_M000147_source">show</a>
                        
                    </p>
                    <div id="M000147_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 136</span>
136:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stop</span>
137:       <span class="ruby-keyword kw">begin</span>
138:         <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span>.<span class="ruby-identifier">get</span>(<span class="ruby-ivar">@host</span>, <span class="ruby-value str">&quot;/selenium-server/driver/?cmd=shutDownSeleniumServer&quot;</span>, <span class="ruby-ivar">@port</span>)
139:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ECONNREFUSED</span>
140:       <span class="ruby-keyword kw">end</span>
141: 
142:       <span class="ruby-identifier">stop_process</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@process</span>
143:       <span class="ruby-identifier">poll_for_shutdown</span>
144: 
145:       <span class="ruby-ivar">@log_file</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@log_file</span>
146:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000148">
                    
                    <a name="M000148"></a><b>webdriver_url</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show</a>
                        
                    </p>
                    <div id="M000148_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 148</span>
148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">webdriver_url</span>
149:       <span class="ruby-node">&quot;http://#{@host}:#{@port}/wd/hub&quot;</span>
150:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000158">
                    
                    <a name="M000158"></a><b>poll_for_service</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show</a>
                        
                    </p>
                    <div id="M000158_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 206</span>
206:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">poll_for_service</span>
207:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">connected?</span>
208:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;remote server not launched in #{@timeout} seconds&quot;</span>
209:       <span class="ruby-keyword kw">end</span>
210:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000159">
                    
                    <a name="M000159"></a><b>poll_for_shutdown</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show</a>
                        
                    </p>
                    <div id="M000159_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 212</span>
212:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">poll_for_shutdown</span>
213:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">closed?</span>
214:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;remote server not stopped in #{@timeout} seconds&quot;</span>
215:       <span class="ruby-keyword kw">end</span>
216:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000155">
                    
                    <a name="M000155"></a><b>process</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show</a>
                        
                    </p>
                    <div id="M000155_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 188</span>
188:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process</span>
189:       <span class="ruby-ivar">@process</span> <span class="ruby-operator">||=</span> (
190:         <span class="ruby-identifier">cp</span> = <span class="ruby-constant">ChildProcess</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value str">&quot;java&quot;</span>, <span class="ruby-value str">&quot;-jar&quot;</span>, <span class="ruby-ivar">@jar</span>, <span class="ruby-value str">&quot;-port&quot;</span>, <span class="ruby-ivar">@port</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-operator">*</span><span class="ruby-ivar">@additional_args</span>)
191:         <span class="ruby-identifier">io</span> = <span class="ruby-identifier">cp</span>.<span class="ruby-identifier">io</span>
192: 
193:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@log</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@background</span>
194:           <span class="ruby-ivar">@log_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-ivar">@log</span>, <span class="ruby-value str">&quot;w&quot;</span>)
195:           <span class="ruby-identifier">io</span>.<span class="ruby-identifier">stdout</span> = <span class="ruby-identifier">io</span>.<span class="ruby-identifier">stderr</span> = <span class="ruby-ivar">@log_file</span>
196:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@log</span>
197:           <span class="ruby-identifier">io</span>.<span class="ruby-identifier">inherit!</span>
198:         <span class="ruby-keyword kw">end</span>
199: 
200:         <span class="ruby-identifier">cp</span>.<span class="ruby-identifier">detach</span> = <span class="ruby-ivar">@background</span>
201: 
202:         <span class="ruby-identifier">cp</span>
203:       )
204:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000160">
                    
                    <a name="M000160"></a><b>socket</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show</a>
                        
                    </p>
                    <div id="M000160_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 218</span>
218:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">socket</span>
219:       <span class="ruby-ivar">@socket</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">WebDriver</span><span class="ruby-operator">::</span><span class="ruby-constant">SocketPoller</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@host</span>, <span class="ruby-ivar">@port</span>, <span class="ruby-ivar">@timeout</span>)
220:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000154">
                    
                    <a name="M000154"></a><b>stop_process</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show</a>
                        
                    </p>
                    <div id="M000154_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 174</span>
174:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stop_process</span>
175:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@process</span>.<span class="ruby-identifier">alive?</span>
176: 
177:       <span class="ruby-keyword kw">begin</span>
178:         <span class="ruby-ivar">@process</span>.<span class="ruby-identifier">poll_for_exit</span>(<span class="ruby-value">5</span>)
179:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ChildProcess</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeoutError</span>
180:         <span class="ruby-ivar">@process</span>.<span class="ruby-identifier">stop</span>
181:       <span class="ruby-keyword kw">end</span>
182:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ECHILD</span>
183:       <span class="ruby-comment cmt"># already dead</span>
184:     <span class="ruby-keyword kw">ensure</span>
185:       <span class="ruby-ivar">@process</span> = <span class="ruby-keyword kw">nil</span>
186:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000136">
                    
                    <a name="M000136"></a><b>download</b>(required_version)
                    
                </div>
                
                <div class="description">
                  <p>
Download the given version of the selenium-server-standalone jar.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000136_source')" id="l_M000136_source">show</a>
                        
                    </p>
                    <div id="M000136_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 50</span>
50:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">download</span>(<span class="ruby-identifier">required_version</span>)
51:       <span class="ruby-identifier">required_version</span> = <span class="ruby-identifier">latest</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">required_version</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:latest</span>
52:       <span class="ruby-identifier">download_file_name</span> = <span class="ruby-node">&quot;selenium-server-standalone-#{required_version}.jar&quot;</span>
53: 
54:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">download_file_name</span>
55:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">download_file_name</span>
56:       <span class="ruby-keyword kw">end</span>
57: 
58:       <span class="ruby-keyword kw">begin</span>
59:         <span class="ruby-identifier">open</span>(<span class="ruby-identifier">download_file_name</span>, <span class="ruby-value str">&quot;wb&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">destination</span><span class="ruby-operator">|</span>
60:           <span class="ruby-identifier">net_http</span>.<span class="ruby-identifier">start</span>(<span class="ruby-value str">&quot;selenium.googlecode.com&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">http</span><span class="ruby-operator">|</span>
61:             <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">http</span>.<span class="ruby-identifier">request_get</span>(<span class="ruby-node">&quot;/files/#{download_file_name}&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>
62:               <span class="ruby-identifier">total</span> = <span class="ruby-identifier">response</span>.<span class="ruby-identifier">content_length</span>
63:               <span class="ruby-identifier">progress</span> = <span class="ruby-value">0</span>
64:               <span class="ruby-identifier">segment_count</span> = <span class="ruby-value">0</span>
65: 
66:               <span class="ruby-identifier">response</span>.<span class="ruby-identifier">read_body</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">segment</span><span class="ruby-operator">|</span>
67:                 <span class="ruby-identifier">progress</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">length</span>
68:                 <span class="ruby-identifier">segment_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
69: 
70:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">segment_count</span> <span class="ruby-operator">%</span> <span class="ruby-value">15</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
71:                   <span class="ruby-identifier">percent</span> = (<span class="ruby-identifier">progress</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">total</span>.<span class="ruby-identifier">to_f</span>) <span class="ruby-operator">*</span> <span class="ruby-value">100</span>
72:                   <span class="ruby-identifier">print</span> <span class="ruby-node">&quot;#{CL_RESET}Downloading #{download_file_name}: #{percent.to_i}% (#{progress} / #{total})&quot;</span>
73:                   <span class="ruby-identifier">segment_count</span> = <span class="ruby-value">0</span>
74:                 <span class="ruby-keyword kw">end</span>
75: 
76:                 <span class="ruby-identifier">destination</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">segment</span>)
77:               <span class="ruby-keyword kw">end</span>
78:             <span class="ruby-keyword kw">end</span>
79: 
80:             <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPSuccess</span>
81:               <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;#{resp.code} for #{download_file_name}&quot;</span>
82:             <span class="ruby-keyword kw">end</span>
83:           <span class="ruby-keyword kw">end</span>
84:         <span class="ruby-keyword kw">end</span>
85:       <span class="ruby-keyword kw">rescue</span>
86:         <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-identifier">download_file_name</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">download_file_name</span>
87:         <span class="ruby-identifier">raise</span>
88:       <span class="ruby-keyword kw">end</span>
89: 
90:       <span class="ruby-identifier">download_file_name</span>
91:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000135">
                    
                    <a name="M000135"></a><b>get</b>(required_version, opts = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000135_source')" id="l_M000135_source">show</a>
                        
                    </p>
                    <div id="M000135_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 42</span>
42:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">required_version</span>, <span class="ruby-identifier">opts</span> = {})
43:       <span class="ruby-identifier">new</span>(<span class="ruby-identifier">download</span>(<span class="ruby-identifier">required_version</span>), <span class="ruby-identifier">opts</span>)
44:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000141">
                    
                    <a name="M000141"></a><b>latest</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Ask Google Code what the latest selenium-server-standalone version is.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000141_source')" id="l_M000141_source">show</a>
                        
                    </p>
                    <div id="M000141_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 97</span>
 97:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">latest</span>
 98:       <span class="ruby-identifier">net_http</span>.<span class="ruby-identifier">start</span>(<span class="ruby-value str">&quot;code.google.com&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">http</span><span class="ruby-operator">|</span>
 99:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">http</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value str">&quot;/p/selenium/downloads/list&quot;</span>)
100:         <span class="ruby-identifier">resp</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-regexp re">/selenium-server-standalone-(\d+.\d+.\d+).jar/</span>, <span class="ruby-value">1</span>]
101:       <span class="ruby-keyword kw">end</span>
102:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000144">
                    
                    <a name="M000144"></a><b>new</b>(jar, opts = {})
                    
                </div>
                
                <div class="description">
                  <p>
@param [String] jar Path to the server jar. @param [Hash] opts the options
to create the server process with
</p>
<p>
@option opts [Integer] :port Port the server should listen on (default:
4444). @option opts [Integer] :timeout Seconds to wait for server
launch/shutdown (default: 30) @option opts [true,false] :background Run the
server in the background (default: false) @option opts [true,false,String]
:log Either a path to a log file,
</p>
<pre>
                                     or true to pass server log to stdout.
</pre>
<p>
@raise [Errno::ENOENT] if the jar file does not exist
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000144_source')" id="l_M000144_source">show</a>
                        
                    </p>
                    <div id="M000144_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 116</span>
116:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">jar</span>, <span class="ruby-identifier">opts</span> = {})
117:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>, <span class="ruby-identifier">jar</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">jar</span>)
118: 
119:       <span class="ruby-ivar">@jar</span>        = <span class="ruby-identifier">jar</span>
120:       <span class="ruby-ivar">@host</span>       = <span class="ruby-value str">&quot;127.0.0.1&quot;</span>
121:       <span class="ruby-ivar">@port</span>       = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">:port</span>, <span class="ruby-value">4444</span>)
122:       <span class="ruby-ivar">@timeout</span>    = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">:timeout</span>, <span class="ruby-value">30</span>)
123:       <span class="ruby-ivar">@background</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">:background</span>, <span class="ruby-keyword kw">false</span>)
124:       <span class="ruby-ivar">@log</span>        = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:log</span>]
125: 
126:       <span class="ruby-ivar">@additional_args</span> = []
127:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Private methods</div>
            
            <div class="method">
                <div class="title" id="M000151">
                    
                    <a name="M000151"></a><b>net_http</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000151_source')" id="l_M000151_source">show</a>
                        
                    </p>
                    <div id="M000151_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/selenium/server.rb, line 162</span>
162:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">net_http</span>
163:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'http_proxy'</span>]
164:         <span class="ruby-identifier">http_proxy</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'http_proxy'</span>]
165:         <span class="ruby-identifier">http_proxy</span> = <span class="ruby-node">&quot;http://#{http_proxy}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">http_proxy</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^http:\/\//i</span>
166:         <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">http_proxy</span>)
167: 
168:         <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span><span class="ruby-operator">::</span><span class="ruby-constant">Proxy</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>, <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>)
169:       <span class="ruby-keyword kw">else</span>
170:         <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span>
171:       <span class="ruby-keyword kw">end</span>
172:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    