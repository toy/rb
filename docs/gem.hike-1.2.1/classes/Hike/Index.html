<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Hike::Index</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Hike::Index 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/hike/index_rb.html">lib/hike/index.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
`Index` is an internal cached variant of `Trail`. It assumes the file
system does not change between `find` calls. All `stat` and `entries` calls
are cached for the lifetime of the `Index` object.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000026">build_pattern_for</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000007">entries</a>,</li>
                
                <li><a href="#M000015">extract_options!</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000004">find</a>,</li>
                
                <li><a href="#M000028">find_aliases_for</a>,</li>
                
                <li><a href="#M000020">find_in_base_path</a>,</li>
                
                <li><a href="#M000019">find_in_paths</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000003">index</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000021">match</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000000">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000022">paths_contain?</a>,</li>
                
                <li><a href="#M000023">pattern_for</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000018">relative?</a>,</li>
                
                <li><a href="#M000002">root</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000027">sort_matches</a>,</li>
                
                <li><a href="#M000014">stat</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>paths</td>
            <td class='attr-desc'><p>
`<a href="Index.html#paths">Index#paths</a>` is an immutable `Paths`
collection.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>extensions</td>
            <td class='attr-desc'><p>
`<a href="Index.html#extensions">Index#extensions</a>` is an immutable
`Extensions` collection.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>aliases</td>
            <td class='attr-desc'><p>
`<a href="Index.html#aliases">Index#aliases</a>` is an immutable `Hash`
mapping an extension to an `Array` of aliases.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000000">
                    
                    <a name="M000000"></a><b>new</b>(root, paths, extensions, aliases)
                    
                </div>
                
                <div class="description">
                  <p>
`<a href="Index.html#M000000">Index.new</a>` is an internal method. Instead
of constructing it directly, create a `Trail` and call `<a
href="Trail.html#M000044">Trail#index</a>`.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000000_source')" id="l_M000000_source">show</a>
                        
                    </p>
                    <div id="M000000_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/hike/index.rb, line 20</span>
20:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">root</span>, <span class="ruby-identifier">paths</span>, <span class="ruby-identifier">extensions</span>, <span class="ruby-identifier">aliases</span>)
21:       <span class="ruby-ivar">@root</span> = <span class="ruby-identifier">root</span>
22: 
23:       <span class="ruby-comment cmt"># Freeze is used here so an error is throw if a mutator method</span>
24:       <span class="ruby-comment cmt"># is called on the array. Mutating `@paths`, `@extensions`, or</span>
25:       <span class="ruby-comment cmt"># `@aliases` would have unpredictable results.</span>
26:       <span class="ruby-ivar">@paths</span>      = <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>
27:       <span class="ruby-ivar">@extensions</span> = <span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>
28:       <span class="ruby-ivar">@aliases</span>    = <span class="ruby-identifier">aliases</span>.<span class="ruby-identifier">inject</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>, (<span class="ruby-identifier">k</span>, <span class="ruby-identifier">a</span>)<span class="ruby-operator">|</span>
29:                       <span class="ruby-identifier">h</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>; <span class="ruby-identifier">h</span>
30:                    }.<span class="ruby-identifier">freeze</span>
31:       <span class="ruby-ivar">@pathnames</span>  = <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>) }
32: 
33:       <span class="ruby-ivar">@stats</span>    = {}
34:       <span class="ruby-ivar">@entries</span>  = {}
35:       <span class="ruby-ivar">@patterns</span> = {}
36:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000007">
                    
                    <a name="M000007"></a><b>entries</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
A cached version of `Dir.entries` that filters out `.` files and `~` swap
files. Returns an empty `Array` if the directory does not exist.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000007_source')" id="l_M000007_source">show</a>
                        
                    </p>
                    <div id="M000007_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/hike/index.rb, line 78</span>
78:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">entries</span>(<span class="ruby-identifier">path</span>)
79:       <span class="ruby-identifier">key</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_s</span>
80:       <span class="ruby-ivar">@entries</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">entries</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">entry</span><span class="ruby-operator">|</span> <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\.|~$|^\#.*\#$/</span> }.<span class="ruby-identifier">sort</span>
81:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
82:       <span class="ruby-ivar">@entries</span>[<span class="ruby-identifier">key</span>] = []
83:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000004">
                    
                    <a name="M000004"></a><b>find</b>(*logical_paths, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
The real implementation of `find`. `<a
href="Trail.html#M000043">Trail#find</a>` generates a one time index and
delegates here.
</p>
<p>
See `<a href="Trail.html#M000043">Trail#find</a>` for usage.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000004_source')" id="l_M000004_source">show</a>
                        
                    </p>
                    <div id="M000004_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/hike/index.rb, line 52</span>
52:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">logical_paths</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
53:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
54:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">extract_options!</span>(<span class="ruby-identifier">logical_paths</span>)
55:         <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:base_path</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@root</span>)
56: 
57:         <span class="ruby-identifier">logical_paths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">logical_path</span><span class="ruby-operator">|</span>
58:           <span class="ruby-identifier">logical_path</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">logical_path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^\//</span>, <span class="ruby-value str">''</span>))
59: 
60:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">relative?</span>(<span class="ruby-identifier">logical_path</span>)
61:             <span class="ruby-identifier">find_in_base_path</span>(<span class="ruby-identifier">logical_path</span>, <span class="ruby-identifier">base_path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
62:           <span class="ruby-keyword kw">else</span>
63:             <span class="ruby-identifier">find_in_paths</span>(<span class="ruby-identifier">logical_path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
64:           <span class="ruby-keyword kw">end</span>
65:         <span class="ruby-keyword kw">end</span>
66: 
67:         <span class="ruby-keyword kw">nil</span>
68:       <span class="ruby-keyword kw">else</span>
69:         <span class="ruby-identifier">find</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">logical_paths</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
70:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span>
71:         <span class="ruby-keyword kw">end</span>
72:       <span class="ruby-keyword kw">end</span>
73:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000003">
                    
                    <a name="M000003"></a><b>index</b>()
                    
                </div>
                
                <div class="description">
                  <p>
`<a href="Index.html#M000003">Index#index</a>` returns `self` to be
compatable with the `Trail` interface.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000003_source')" id="l_M000003_source">show</a>
                        
                    </p>
                    <div id="M000003_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/hike/index.rb, line 44</span>
44:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">index</span>
45:       <span class="ruby-keyword kw">self</span>
46:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000002">
                    
                    <a name="M000002"></a><b>root</b>()
                    
                </div>
                
                <div class="description">
                  <p>
`<a href="Index.html#M000002">Index#root</a>` returns root path as a
`String`. This attribute is immutable.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000002_source')" id="l_M000002_source">show</a>
                        
                    </p>
                    <div id="M000002_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/hike/index.rb, line 39</span>
39:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">root</span>
40:       <span class="ruby-ivar">@root</span>.<span class="ruby-identifier">to_s</span>
41:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000014">
                    
                    <a name="M000014"></a><b>stat</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
A cached version of `File.stat`. Returns nil if the file does not exist.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000014_source')" id="l_M000014_source">show</a>
                        
                    </p>
                    <div id="M000014_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/hike/index.rb, line 87</span>
87:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>)
88:       <span class="ruby-identifier">key</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_s</span>
89:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">key</span>)
90:         <span class="ruby-ivar">@stats</span>[<span class="ruby-identifier">key</span>]
91:       <span class="ruby-keyword kw">else</span>
92:         <span class="ruby-keyword kw">begin</span>
93:           <span class="ruby-ivar">@stats</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>)
94:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
95:           <span class="ruby-ivar">@stats</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-keyword kw">nil</span>
96:         <span class="ruby-keyword kw">end</span>
97:       <span class="ruby-keyword kw">end</span>
98:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M000026">
                    
                    <a name="M000026"></a><b>build_pattern_for</b>(basename)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a `Regexp` that matches the allowed extensions.
</p>
<pre>
    pattern_for(&quot;index.html&quot;) #=&gt; /^index(.html|.htm)(.builder|.erb)*$/
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000026_source')" id="l_M000026_source">show</a>
                        
                    </p>
                    <div id="M000026_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 160</span>
160:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_pattern_for</span>(<span class="ruby-identifier">basename</span>)
161:         <span class="ruby-identifier">extname</span> = <span class="ruby-identifier">basename</span>.<span class="ruby-identifier">extname</span>
162:         <span class="ruby-identifier">aliases</span> = <span class="ruby-identifier">find_aliases_for</span>(<span class="ruby-identifier">extname</span>)
163: 
164:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">aliases</span>.<span class="ruby-identifier">any?</span>
165:           <span class="ruby-identifier">basename</span> = <span class="ruby-identifier">basename</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">extname</span>)
166:           <span class="ruby-identifier">aliases</span>  = [<span class="ruby-identifier">extname</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">aliases</span>
167:           <span class="ruby-identifier">aliases_pattern</span> = <span class="ruby-identifier">aliases</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">e</span>) }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;|&quot;</span>)
168:           <span class="ruby-identifier">basename_re</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">basename</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;(?:#{aliases_pattern})&quot;</span>
169:         <span class="ruby-keyword kw">else</span>
170:           <span class="ruby-identifier">basename_re</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">basename</span>.<span class="ruby-identifier">to_s</span>)
171:         <span class="ruby-keyword kw">end</span>
172: 
173:         <span class="ruby-identifier">extension_pattern</span> = <span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">e</span>) }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;|&quot;</span>)
174:         <span class="ruby-node">/^#{basename_re}(?:#{extension_pattern})*$/</span>
175:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000015">
                    
                    <a name="M000015"></a><b>extract_options!</b>(arguments)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000015_source')" id="l_M000015_source">show</a>
                        
                    </p>
                    <div id="M000015_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 101</span>
101:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_options!</span>(<span class="ruby-identifier">arguments</span>)
102:         <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">pop</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> {}
103:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000028">
                    
                    <a name="M000028"></a><b>find_aliases_for</b>(extension)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000028_source')" id="l_M000028_source">show</a>
                        
                    </p>
                    <div id="M000028_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 197</span>
197:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_aliases_for</span>(<span class="ruby-identifier">extension</span>)
198:         <span class="ruby-ivar">@aliases</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">aliases</span>, (<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
199:           <span class="ruby-identifier">aliases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">key</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">extension</span>
200:           <span class="ruby-identifier">aliases</span>
201:         <span class="ruby-keyword kw">end</span>
202:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000020">
                    
                    <a name="M000020"></a><b>find_in_base_path</b>(logical_path, base_path, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Finds relative logical path, `../test/test_trail`. Requires a `base_path`
for reference.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000020_source')" id="l_M000020_source">show</a>
                        
                    </p>
                    <div id="M000020_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 119</span>
119:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_in_base_path</span>(<span class="ruby-identifier">logical_path</span>, <span class="ruby-identifier">base_path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
120:         <span class="ruby-identifier">candidate</span> = <span class="ruby-identifier">base_path</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">logical_path</span>)
121:         <span class="ruby-identifier">dirname</span>, <span class="ruby-identifier">basename</span> = <span class="ruby-identifier">candidate</span>.<span class="ruby-identifier">split</span>
122:         <span class="ruby-identifier">match</span>(<span class="ruby-identifier">dirname</span>, <span class="ruby-identifier">basename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">paths_contain?</span>(<span class="ruby-identifier">dirname</span>)
123:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000019">
                    
                    <a name="M000019"></a><b>find_in_paths</b>(logical_path, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Finds logical path across all `paths`
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000019_source')" id="l_M000019_source">show</a>
                        
                    </p>
                    <div id="M000019_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 110</span>
110:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_in_paths</span>(<span class="ruby-identifier">logical_path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
111:         <span class="ruby-identifier">dirname</span>, <span class="ruby-identifier">basename</span> = <span class="ruby-identifier">logical_path</span>.<span class="ruby-identifier">split</span>
112:         <span class="ruby-ivar">@pathnames</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">base_path</span><span class="ruby-operator">|</span>
113:           <span class="ruby-identifier">match</span>(<span class="ruby-identifier">base_path</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dirname</span>), <span class="ruby-identifier">basename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
114:         <span class="ruby-keyword kw">end</span>
115:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000021">
                    
                    <a name="M000021"></a><b>match</b>(dirname, basename)
                    
                </div>
                
                <div class="description">
                  <p>
Checks if the path is actually on the file system and performs any syscalls
if necessary.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000021_source')" id="l_M000021_source">show</a>
                        
                    </p>
                    <div id="M000021_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 127</span>
127:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">match</span>(<span class="ruby-identifier">dirname</span>, <span class="ruby-identifier">basename</span>)
128:         <span class="ruby-comment cmt"># Potential `entries` syscall</span>
129:         <span class="ruby-identifier">matches</span> = <span class="ruby-identifier">entries</span>(<span class="ruby-identifier">dirname</span>)
130: 
131:         <span class="ruby-identifier">pattern</span> = <span class="ruby-identifier">pattern_for</span>(<span class="ruby-identifier">basename</span>)
132:         <span class="ruby-identifier">matches</span> = <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">pattern</span> }
133: 
134:         <span class="ruby-identifier">sort_matches</span>(<span class="ruby-identifier">matches</span>, <span class="ruby-identifier">basename</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
135:           <span class="ruby-identifier">pathname</span> = <span class="ruby-identifier">dirname</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">path</span>)
136: 
137:           <span class="ruby-comment cmt"># Potential `stat` syscall</span>
138:           <span class="ruby-identifier">stat</span> = <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">pathname</span>)
139: 
140:           <span class="ruby-comment cmt"># Exclude directories</span>
141:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">stat</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">file?</span>
142:             <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">pathname</span>.<span class="ruby-identifier">to_s</span>
143:           <span class="ruby-keyword kw">end</span>
144:         <span class="ruby-keyword kw">end</span>
145:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000022">
                    
                    <a name="M000022"></a><b>paths_contain?</b>(dirname)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if `dirname` is a subdirectory of any of the `paths`
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000022_source')" id="l_M000022_source">show</a>
                        
                    </p>
                    <div id="M000022_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 148</span>
148:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">paths_contain?</span>(<span class="ruby-identifier">dirname</span>)
149:         <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dirname</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">path</span>.<span class="ruby-identifier">length</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">path</span> }
150:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000023">
                    
                    <a name="M000023"></a><b>pattern_for</b>(basename)
                    
                </div>
                
                <div class="description">
                  <p>
Cache results of `<a href="Index.html#M000026">build_pattern_for</a>`
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000023_source')" id="l_M000023_source">show</a>
                        
                    </p>
                    <div id="M000023_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 153</span>
153:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pattern_for</span>(<span class="ruby-identifier">basename</span>)
154:         <span class="ruby-ivar">@patterns</span>[<span class="ruby-identifier">basename</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">build_pattern_for</span>(<span class="ruby-identifier">basename</span>)
155:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000018">
                    
                    <a name="M000018"></a><b>relative?</b>(logical_path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000018_source')" id="l_M000018_source">show</a>
                        
                    </p>
                    <div id="M000018_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 105</span>
105:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relative?</span>(<span class="ruby-identifier">logical_path</span>)
106:         <span class="ruby-identifier">logical_path</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\.\.?\//</span>
107:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000027">
                    
                    <a name="M000027"></a><b>sort_matches</b>(matches, basename)
                    
                </div>
                
                <div class="description">
                  <p>
Sorts candidate matches by their extension priority. <a
href="Extensions.html">Extensions</a> in the front of the `extensions`
carry more weight.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000027_source')" id="l_M000027_source">show</a>
                        
                    </p>
                    <div id="M000027_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/hike/index.rb, line 180</span>
180:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sort_matches</span>(<span class="ruby-identifier">matches</span>, <span class="ruby-identifier">basename</span>)
181:         <span class="ruby-identifier">aliases</span> = <span class="ruby-identifier">find_aliases_for</span>(<span class="ruby-identifier">basename</span>.<span class="ruby-identifier">extname</span>)
182: 
183:         <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">sort_by</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">match</span><span class="ruby-operator">|</span>
184:           <span class="ruby-identifier">extnames</span> = <span class="ruby-identifier">match</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-identifier">basename</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\.[^.]+/</span>)
185:           <span class="ruby-identifier">extnames</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sum</span>, <span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
186:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> = <span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">ext</span>)
187:               <span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
188:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">i</span> = <span class="ruby-identifier">aliases</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">ext</span>)
189:               <span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">11</span>
190:             <span class="ruby-keyword kw">else</span>
191:               <span class="ruby-identifier">sum</span>
192:             <span class="ruby-keyword kw">end</span>
193:           <span class="ruby-keyword kw">end</span>
194:         <span class="ruby-keyword kw">end</span>
195:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    