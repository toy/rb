<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>HTTP::Message::Headers</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            HTTP::Message::Headers 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/httpclient/http_rb.html">lib/httpclient/http.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Represents <a href="../../HTTP.html">HTTP</a> message header.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000115">[]</a>,</li>
                
                <li><a href="#M000113">[]=</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000108">add</a>,</li>
                
                <li><a href="#M000111">all</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000105">body_size=</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000124">charset_label</a>,</li>
                
                <li><a href="#M000099">content_type</a>,</li>
                
                <li><a href="#M000100">content_type=</a>,</li>
                
                <li><a href="#M000101">contenttype</a>,</li>
                
                <li><a href="#M000102">contenttype=</a>,</li>
                
                <li><a href="#M000118">create_query_part</a>,</li>
                
                <li><a href="#M000117">create_query_uri</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000112">delete</a>,</li>
                
                <li><a href="#M000106">dump</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000110">get</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000095">init_connect_request</a>,</li>
                
                <li><a href="#M000096">init_request</a>,</li>
                
                <li><a href="#M000097">init_response</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000094">new</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000119">request_line</a>,</li>
                
                <li><a href="#M000120">response_status_line</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000109">set</a>,</li>
                
                <li><a href="#M000104">set_body_encoding</a>,</li>
                
                <li><a href="#M000103">set_body_encoding</a>,</li>
                
                <li><a href="#M000121">set_header</a>,</li>
                
                <li><a href="#M000116">set_headers</a>,</li>
                
                <li><a href="#M000122">set_request_header</a>,</li>
                
                <li><a href="#M000123">set_response_header</a>,</li>
                
                <li><a href="#M000098">status_code=</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">STATUS_CODE_MAP</td>
            <td>=</td>
            <td class="attr-value">{         Status::OK =&gt; 'OK',         Status::CREATED =&gt; &quot;Created&quot;,         Status::NON_AUTHORITATIVE_INFORMATION =&gt; &quot;Non-Authoritative Information&quot;,         Status::NO_CONTENT =&gt; &quot;No Content&quot;,         Status::RESET_CONTENT =&gt; &quot;Reset Content&quot;,         Status::PARTIAL_CONTENT =&gt; &quot;Partial Content&quot;,         Status::MOVED_PERMANENTLY =&gt; 'Moved Permanently',         Status::FOUND =&gt; 'Found',         Status::SEE_OTHER =&gt; 'See Other',         Status::TEMPORARY_REDIRECT =&gt; 'Temporary Redirect',         Status::MOVED_TEMPORARILY =&gt; 'Temporary Redirect',         Status::BAD_REQUEST =&gt; 'Bad Request',         Status::INTERNAL =&gt; 'Internal Server Error',       }</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="../../HTTP.html">HTTP</a> response status code to reason phrase
mapping definition.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">CHARSET_MAP</td>
            <td>=</td>
            <td class="attr-value">{         'NONE' =&gt; 'us-ascii',         'EUC'  =&gt; 'euc-jp',         'SJIS' =&gt; 'shift_jis',         'UTF8' =&gt; 'utf-8',       }</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
$KCODE to charset mapping definition.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NIL_URI</td>
            <td>=</td>
            <td class="attr-value">URI.parse('http://nil-uri-given/')</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Placeholder URI object for nil uri.
</p>
</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>http_version</td>
            <td class='attr-desc'><p>
<a href="../../HTTP.html">HTTP</a> version in a <a
href="../../HTTP.html">HTTP</a> header. <a
href="../../String.html">String</a>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>body_size</td>
            <td class='attr-desc'><p>
Size of body. nil when size is unknown (e.g. chunked response).
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>chunked</td>
            <td class='attr-desc'><p>
Request/Response is chunked or not.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>request_method</td>
            <td class='attr-desc'><p>
Request only. Requested method.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>request_uri</td>
            <td class='attr-desc'><p>
Request only. Requested URI.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>request_query</td>
            <td class='attr-desc'><p>
Request only. Requested query.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>request_absolute_uri</td>
            <td class='attr-desc'><p>
Request only. Requested via proxy or not.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>status_code</td>
            <td class='attr-desc'><p>
Response only. <a href="../../HTTP.html">HTTP</a> status
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>reason_phrase</td>
            <td class='attr-desc'><p>
Response only. <a href="../../HTTP.html">HTTP</a> status reason phrase.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000094">
                    
                    <a name="M000094"></a><b>new</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Creates a <a href="Headers.html">Message::Headers</a>. Use <a
href="Headers.html#M000096">init_request</a>, <a
href="Headers.html#M000097">init_response</a>, or <a
href="Headers.html#M000095">init_connect_request</a> for acutual
initialize.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000094_source')" id="l_M000094_source">show</a>
                        
                    </p>
                    <div id="M000094_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 156</span>
156:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
157:         <span class="ruby-ivar">@http_version</span> = <span class="ruby-value str">'1.1'</span>
158:         <span class="ruby-ivar">@body_size</span> = <span class="ruby-keyword kw">nil</span>
159:         <span class="ruby-ivar">@chunked</span> = <span class="ruby-keyword kw">false</span>
160: 
161:         <span class="ruby-ivar">@request_method</span> = <span class="ruby-keyword kw">nil</span>
162:         <span class="ruby-ivar">@request_uri</span> = <span class="ruby-keyword kw">nil</span>
163:         <span class="ruby-ivar">@request_query</span> = <span class="ruby-keyword kw">nil</span>
164:         <span class="ruby-ivar">@request_absolute_uri</span> = <span class="ruby-keyword kw">nil</span>
165: 
166:         <span class="ruby-ivar">@status_code</span> = <span class="ruby-keyword kw">nil</span>
167:         <span class="ruby-ivar">@reason_phrase</span> = <span class="ruby-keyword kw">nil</span>
168: 
169:         <span class="ruby-ivar">@body_type</span> = <span class="ruby-keyword kw">nil</span>
170:         <span class="ruby-ivar">@body_charset</span> = <span class="ruby-keyword kw">nil</span>
171:         <span class="ruby-ivar">@body_date</span> = <span class="ruby-keyword kw">nil</span>
172:         <span class="ruby-ivar">@body_encoding</span> = <span class="ruby-keyword kw">nil</span>
173: 
174:         <span class="ruby-ivar">@is_request</span> = <span class="ruby-keyword kw">nil</span>
175:         <span class="ruby-ivar">@header_item</span> = []
176:         <span class="ruby-ivar">@dumped</span> = <span class="ruby-keyword kw">false</span>
177:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000115">
                    
                    <a name="M000115"></a><b>[]</b>(key)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an Array of header values for the given key.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show</a>
                        
                    </p>
                    <div id="M000115_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 305</span>
305:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)
306:         <span class="ruby-identifier">get</span>(<span class="ruby-identifier">key</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span> <span class="ruby-identifier">item</span>[<span class="ruby-value">1</span>] }
307:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000113">
                    
                    <a name="M000113"></a><b>[]=</b>(key, value)
                    
                </div>
                
                <div class="description">
                  <p>
Adds a header. See set.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show</a>
                        
                    </p>
                    <div id="M000113_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 300</span>
300:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
301:         <span class="ruby-identifier">set</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
302:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000108">
                    
                    <a name="M000108"></a><b>add</b>(key, value)
                    
                </div>
                
                <div class="description">
                  <p>
Adds a header. Addition order is preserved.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show</a>
                        
                    </p>
                    <div id="M000108_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 260</span>
260:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
261:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
262:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
263:             <span class="ruby-ivar">@header_item</span>.<span class="ruby-identifier">push</span>([<span class="ruby-identifier">key</span>, <span class="ruby-identifier">v</span>])
264:           <span class="ruby-keyword kw">end</span>
265:         <span class="ruby-keyword kw">else</span>
266:           <span class="ruby-ivar">@header_item</span>.<span class="ruby-identifier">push</span>([<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>])
267:         <span class="ruby-keyword kw">end</span>
268:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000111">
                    
                    <a name="M000111"></a><b>all</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an Array of all headers.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000111_source')" id="l_M000111_source">show</a>
                        
                    </p>
                    <div id="M000111_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 289</span>
289:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">all</span>
290:         <span class="ruby-ivar">@header_item</span>
291:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000105">
                    
                    <a name="M000105"></a><b>body_size=</b>(body_size)
                    
                </div>
                
                <div class="description">
                  <p>
Sets byte size of message body. <a
href="Headers.html#body_size">body_size</a> == nil means that the body
is_a? IO
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show</a>
                        
                    </p>
                    <div id="M000105_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 241</span>
241:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">body_size=</span>(<span class="ruby-identifier">body_size</span>)
242:         <span class="ruby-ivar">@body_size</span> = <span class="ruby-identifier">body_size</span>
243:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000099">
                    
                    <a name="M000099"></a><b>content_type</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns &#8216;Content-Type&#8217; header value.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Headers.html#M000101">contenttype</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show</a>
                        
                    </p>
                    <div id="M000099_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 212</span>
212:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_type</span>
213:         <span class="ruby-keyword kw">self</span>[<span class="ruby-value str">'Content-Type'</span>][<span class="ruby-value">0</span>]
214:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000100">
                    
                    <a name="M000100"></a><b>content_type=</b>(content_type)
                    
                </div>
                
                <div class="description">
                  <p>
Sets &#8216;Content-Type&#8217; header value. Overrides if already exists.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Headers.html#M000102">contenttype=</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show</a>
                        
                    </p>
                    <div id="M000100_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 217</span>
217:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_type=</span>(<span class="ruby-identifier">content_type</span>)
218:         <span class="ruby-identifier">delete</span>(<span class="ruby-value str">'Content-Type'</span>)
219:         <span class="ruby-keyword kw">self</span>[<span class="ruby-value str">'Content-Type'</span>] = <span class="ruby-identifier">content_type</span>
220:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000101">
                    
                    <a name="M000101"></a><b>contenttype</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Headers.html#M000099">content_type</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000102">
                    
                    <a name="M000102"></a><b>contenttype=</b>(content_type)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Headers.html#M000100">content_type=</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000118">
                    
                    <a name="M000118"></a><b>create_query_part</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000118_source')" id="l_M000118_source">show</a>
                        
                    </p>
                    <div id="M000118_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 328</span>
328:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_query_part</span>()
329:         <span class="ruby-identifier">query_str</span> = <span class="ruby-keyword kw">nil</span>
330:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@request_uri</span>.<span class="ruby-identifier">query</span>
331:           <span class="ruby-identifier">query_str</span> = <span class="ruby-ivar">@request_uri</span>.<span class="ruby-identifier">query</span>
332:         <span class="ruby-keyword kw">end</span>
333:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@request_query</span>
334:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">query_str</span>
335:             <span class="ruby-identifier">query_str</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&amp;#{Message.create_query_part_str(@request_query)}&quot;</span>
336:           <span class="ruby-keyword kw">else</span>
337:             <span class="ruby-identifier">query_str</span> = <span class="ruby-constant">Message</span>.<span class="ruby-identifier">create_query_part_str</span>(<span class="ruby-ivar">@request_query</span>)
338:           <span class="ruby-keyword kw">end</span>
339:         <span class="ruby-keyword kw">end</span>
340:         <span class="ruby-identifier">query_str</span>
341:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000117">
                    
                    <a name="M000117"></a><b>create_query_uri</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000117_source')" id="l_M000117_source">show</a>
                        
                    </p>
                    <div id="M000117_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 316</span>
316:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_query_uri</span>()
317:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@request_method</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'CONNECT'</span>
318:           <span class="ruby-keyword kw">return</span> <span class="ruby-node">&quot;#{@request_uri.host}:#{@request_uri.port}&quot;</span>
319:         <span class="ruby-keyword kw">end</span>
320:         <span class="ruby-identifier">path</span> = <span class="ruby-ivar">@request_uri</span>.<span class="ruby-identifier">path</span>
321:         <span class="ruby-identifier">path</span> = <span class="ruby-value str">'/'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span>
322:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">query_str</span> = <span class="ruby-identifier">create_query_part</span>()
323:           <span class="ruby-identifier">path</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;?#{query_str}&quot;</span>
324:         <span class="ruby-keyword kw">end</span>
325:         <span class="ruby-identifier">path</span>
326:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000112">
                    
                    <a name="M000112"></a><b>delete</b>(key)
                    
                </div>
                
                <div class="description">
                  <p>
Deletes headers of the given key.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show</a>
                        
                    </p>
                    <div id="M000112_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 294</span>
294:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
295:         <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">upcase</span>
296:         <span class="ruby-ivar">@header_item</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">key</span> }
297:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000106">
                    
                    <a name="M000106"></a><b>dump</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Dumps message header part and returns a dumped <a
href="../../String.html">String</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show</a>
                        
                    </p>
                    <div id="M000106_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 246</span>
246:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dump</span>
247:         <span class="ruby-identifier">set_header</span>
248:         <span class="ruby-identifier">str</span> = <span class="ruby-keyword kw">nil</span>
249:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@is_request</span>
250:           <span class="ruby-identifier">str</span> = <span class="ruby-identifier">request_line</span>
251:         <span class="ruby-keyword kw">else</span>
252:           <span class="ruby-identifier">str</span> = <span class="ruby-identifier">response_status_line</span>
253:         <span class="ruby-keyword kw">end</span>
254:         <span class="ruby-identifier">str</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@header_item</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
255:           <span class="ruby-node">&quot;#{ key }: #{ value }#{ CRLF }&quot;</span>
256:         }.<span class="ruby-identifier">join</span>
257:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000110">
                    
                    <a name="M000110"></a><b>get</b>(key = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an Array of headers for the given key. Each element is a pair of
key and value. It returns an single element Array even if the only one
header exists. If nil key given, it returns all headers.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show</a>
                        
                    </p>
                    <div id="M000110_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 279</span>
279:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get</span>(<span class="ruby-identifier">key</span> = <span class="ruby-keyword kw">nil</span>)
280:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">nil?</span>
281:           <span class="ruby-identifier">all</span>
282:         <span class="ruby-keyword kw">else</span>
283:           <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">upcase</span>
284:           <span class="ruby-ivar">@header_item</span>.<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">key</span> }
285:         <span class="ruby-keyword kw">end</span>
286:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000095">
                    
                    <a name="M000095"></a><b>init_connect_request</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Initialize this instance as a CONNECT request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show</a>
                        
                    </p>
                    <div id="M000095_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 180</span>
180:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_connect_request</span>(<span class="ruby-identifier">uri</span>)
181:         <span class="ruby-ivar">@is_request</span> = <span class="ruby-keyword kw">true</span>
182:         <span class="ruby-ivar">@request_method</span> = <span class="ruby-value str">'CONNECT'</span>
183:         <span class="ruby-ivar">@request_uri</span> = <span class="ruby-identifier">uri</span>
184:         <span class="ruby-ivar">@request_query</span> = <span class="ruby-keyword kw">nil</span>
185:         <span class="ruby-ivar">@http_version</span> = <span class="ruby-value str">'1.0'</span>
186:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000096">
                    
                    <a name="M000096"></a><b>init_request</b>(method, uri, query = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Initialize this instance as a general request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show</a>
                        
                    </p>
                    <div id="M000096_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 191</span>
191:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_request</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">uri</span>, <span class="ruby-identifier">query</span> = <span class="ruby-keyword kw">nil</span>)
192:         <span class="ruby-ivar">@is_request</span> = <span class="ruby-keyword kw">true</span>
193:         <span class="ruby-ivar">@request_method</span> = <span class="ruby-identifier">method</span>
194:         <span class="ruby-ivar">@request_uri</span> = <span class="ruby-identifier">uri</span> <span class="ruby-operator">||</span> <span class="ruby-constant">NIL_URI</span>
195:         <span class="ruby-ivar">@request_query</span> = <span class="ruby-identifier">query</span>
196:         <span class="ruby-ivar">@request_absolute_uri</span> = <span class="ruby-keyword kw">false</span>
197:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000097">
                    
                    <a name="M000097"></a><b>init_response</b>(status_code)
                    
                </div>
                
                <div class="description">
                  <p>
Initialize this instance as a response.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show</a>
                        
                    </p>
                    <div id="M000097_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 200</span>
200:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_response</span>(<span class="ruby-identifier">status_code</span>)
201:         <span class="ruby-ivar">@is_request</span> = <span class="ruby-keyword kw">false</span>
202:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">status_code</span> = <span class="ruby-identifier">status_code</span>
203:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000109">
                    
                    <a name="M000109"></a><b>set</b>(key, value)
                    
                </div>
                
                <div class="description">
                  <p>
Sets a header.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000109_source')" id="l_M000109_source">show</a>
                        
                    </p>
                    <div id="M000109_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 271</span>
271:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
272:         <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
273:         <span class="ruby-identifier">add</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
274:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000103">
                    
                    <a name="M000103"></a><b>set_body_encoding</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show</a>
                        
                    </p>
                    <div id="M000103_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 226</span>
226:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_body_encoding</span>
227:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">content_type</span>
228:             <span class="ruby-constant">OpenURI</span><span class="ruby-operator">::</span><span class="ruby-constant">Meta</span>.<span class="ruby-identifier">init</span>(<span class="ruby-identifier">o</span> = <span class="ruby-value str">''</span>)
229:             <span class="ruby-identifier">o</span>.<span class="ruby-identifier">meta_add_field</span>(<span class="ruby-value str">'content-type'</span>, <span class="ruby-identifier">type</span>)
230:             <span class="ruby-ivar">@body_encoding</span> = <span class="ruby-identifier">o</span>.<span class="ruby-identifier">encoding</span>
231:           <span class="ruby-keyword kw">end</span>
232:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000104">
                    
                    <a name="M000104"></a><b>set_body_encoding</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show</a>
                        
                    </p>
                    <div id="M000104_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 234</span>
234:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_body_encoding</span>
235:           <span class="ruby-ivar">@body_encoding</span> = <span class="ruby-keyword kw">nil</span>
236:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000116">
                    
                    <a name="M000116"></a><b>set_headers</b>(headers)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000116_source')" id="l_M000116_source">show</a>
                        
                    </p>
                    <div id="M000116_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 309</span>
309:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_headers</span>(<span class="ruby-identifier">headers</span>)
310:         <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
311:           <span class="ruby-identifier">add</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
312:         <span class="ruby-keyword kw">end</span>
313:         <span class="ruby-identifier">set_body_encoding</span>
314:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000098">
                    
                    <a name="M000098"></a><b>status_code=</b>(status_code)
                    
                </div>
                
                <div class="description">
                  <p>
Sets status code and reason phrase.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show</a>
                        
                    </p>
                    <div id="M000098_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 206</span>
206:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">status_code=</span>(<span class="ruby-identifier">status_code</span>)
207:         <span class="ruby-ivar">@status_code</span> = <span class="ruby-identifier">status_code</span>
208:         <span class="ruby-ivar">@reason_phrase</span> = <span class="ruby-constant">STATUS_CODE_MAP</span>[<span class="ruby-ivar">@status_code</span>]
209:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000124">
                    
                    <a name="M000124"></a><b>charset_label</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show</a>
                        
                    </p>
                    <div id="M000124_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 413</span>
413:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">charset_label</span>
414:         <span class="ruby-comment cmt"># TODO: should handle response encoding for 1.9 correctly.</span>
415:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1.9&quot;</span>
416:           <span class="ruby-constant">CHARSET_MAP</span>[<span class="ruby-ivar">@body_charset</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">'us-ascii'</span>
417:         <span class="ruby-keyword kw">else</span>
418:           <span class="ruby-constant">CHARSET_MAP</span>[<span class="ruby-ivar">@body_charset</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">$KCODE</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">'us-ascii'</span>
419:         <span class="ruby-keyword kw">end</span>
420:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000119">
                    
                    <a name="M000119"></a><b>request_line</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000119_source')" id="l_M000119_source">show</a>
                        
                    </p>
                    <div id="M000119_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 345</span>
345:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request_line</span>
346:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">create_query_uri</span>()
347:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@request_absolute_uri</span>
348:           <span class="ruby-identifier">path</span> = <span class="ruby-node">&quot;#{ @request_uri.scheme }://#{ @request_uri.host }:#{ @request_uri.port }#{ path }&quot;</span>
349:         <span class="ruby-keyword kw">end</span>
350:         <span class="ruby-node">&quot;#{ @request_method } #{ path } HTTP/#{ @http_version }#{ CRLF }&quot;</span>
351:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000120">
                    
                    <a name="M000120"></a><b>response_status_line</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000120_source')" id="l_M000120_source">show</a>
                        
                    </p>
                    <div id="M000120_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 353</span>
353:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">response_status_line</span>
354:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Apache</span>)
355:           <span class="ruby-node">&quot;HTTP/#{ @http_version } #{ @status_code } #{ @reason_phrase }#{ CRLF }&quot;</span>
356:         <span class="ruby-keyword kw">else</span>
357:           <span class="ruby-node">&quot;Status: #{ @status_code } #{ @reason_phrase }#{ CRLF }&quot;</span>
358:         <span class="ruby-keyword kw">end</span>
359:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000121">
                    
                    <a name="M000121"></a><b>set_header</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000121_source')" id="l_M000121_source">show</a>
                        
                    </p>
                    <div id="M000121_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 361</span>
361:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_header</span>
362:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@is_request</span>
363:           <span class="ruby-identifier">set_request_header</span>
364:         <span class="ruby-keyword kw">else</span>
365:           <span class="ruby-identifier">set_response_header</span>
366:         <span class="ruby-keyword kw">end</span>
367:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000122">
                    
                    <a name="M000122"></a><b>set_request_header</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000122_source')" id="l_M000122_source">show</a>
                        
                    </p>
                    <div id="M000122_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 369</span>
369:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_request_header</span>
370:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@dumped</span>
371:         <span class="ruby-ivar">@dumped</span> = <span class="ruby-keyword kw">true</span>
372:         <span class="ruby-identifier">keep_alive</span> = <span class="ruby-constant">Message</span>.<span class="ruby-identifier">keep_alive_enabled?</span>(<span class="ruby-ivar">@http_version</span>)
373:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">keep_alive</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@request_method</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">'CONNECT'</span>
374:           <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Connection'</span>, <span class="ruby-value str">'close'</span>)
375:         <span class="ruby-keyword kw">end</span>
376:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@chunked</span>
377:           <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Transfer-Encoding'</span>, <span class="ruby-value str">'chunked'</span>)
378:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@body_size</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">keep_alive</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@body_size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>)
379:           <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Content-Length'</span>, <span class="ruby-ivar">@body_size</span>.<span class="ruby-identifier">to_s</span>)
380:         <span class="ruby-keyword kw">end</span>
381:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@http_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value str">'1.1'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">get</span>(<span class="ruby-value str">'Host'</span>).<span class="ruby-identifier">empty?</span>
382:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@request_uri</span>.<span class="ruby-identifier">port</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@request_uri</span>.<span class="ruby-identifier">default_port</span>
383:             <span class="ruby-comment cmt"># GFE/1.3 dislikes default port number (returns 404)</span>
384:             <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Host'</span>, <span class="ruby-node">&quot;#{@request_uri.host}&quot;</span>)
385:           <span class="ruby-keyword kw">else</span>
386:             <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Host'</span>, <span class="ruby-node">&quot;#{@request_uri.host}:#{@request_uri.port}&quot;</span>)
387:           <span class="ruby-keyword kw">end</span>
388:         <span class="ruby-keyword kw">end</span>
389:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000123">
                    
                    <a name="M000123"></a><b>set_response_header</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show</a>
                        
                    </p>
                    <div id="M000123_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/httpclient/http.rb, line 391</span>
391:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_response_header</span>
392:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@dumped</span>
393:         <span class="ruby-ivar">@dumped</span> = <span class="ruby-keyword kw">true</span>
394:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Apache</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>[<span class="ruby-value str">'Date'</span>].<span class="ruby-identifier">empty?</span>
395:           <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Date'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">httpdate</span>)
396:         <span class="ruby-keyword kw">end</span>
397:         <span class="ruby-identifier">keep_alive</span> = <span class="ruby-constant">Message</span>.<span class="ruby-identifier">keep_alive_enabled?</span>(<span class="ruby-ivar">@http_version</span>)
398:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@chunked</span>
399:           <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Transfer-Encoding'</span>, <span class="ruby-value str">'chunked'</span>)
400:         <span class="ruby-keyword kw">else</span>
401:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">keep_alive</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@body_size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
402:             <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Content-Length'</span>, <span class="ruby-ivar">@body_size</span>.<span class="ruby-identifier">to_s</span>)
403:           <span class="ruby-keyword kw">end</span>
404:         <span class="ruby-keyword kw">end</span>
405:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@body_date</span>
406:           <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Last-Modified'</span>, <span class="ruby-ivar">@body_date</span>.<span class="ruby-identifier">httpdate</span>)
407:         <span class="ruby-keyword kw">end</span>
408:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>[<span class="ruby-value str">'Content-Type'</span>].<span class="ruby-identifier">empty?</span>
409:           <span class="ruby-identifier">set</span>(<span class="ruby-value str">'Content-Type'</span>, <span class="ruby-node">&quot;#{ @body_type || 'text/html' }; charset=#{ charset_label }&quot;</span>)
410:         <span class="ruby-keyword kw">end</span>
411:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    