<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Haml::Util</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            Haml::Util 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/haml/util_rb.html">lib/haml/util.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
A module containing various useful functions.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000339">_enc</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000319">abstract</a>,</li>
                
                <li><a href="#M000327">ap_geq?</a>,</li>
                
                <li><a href="#M000326">ap_geq_3?</a>,</li>
                
                <li><a href="#M000331">assert_html_safe!</a>,</li>
                
                <li><a href="#M000328">av_template_class</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000314">caller_info</a>,</li>
                
                <li><a href="#M000337">check_encoding</a>,</li>
                
                <li><a href="#M000338">check_haml_encoding</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000317">dump</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000322">haml_warn</a>,</li>
                
                <li><a href="#M000330">html_safe</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000308">intersperse</a>,</li>
                
                <li><a href="#M000334">ironruby?</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000313">lcs</a>,</li>
                
                <li><a href="#M000318">load</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000304">map_hash</a>,</li>
                
                <li><a href="#M000302">map_keys</a>,</li>
                
                <li><a href="#M000303">map_vals</a>,</li>
                
                <li><a href="#M000307">merge_adjacent_strings</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000312">paths</a>,</li>
                
                <li><a href="#M000305">powerset</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000325">rails_env</a>,</li>
                
                <li><a href="#M000324">rails_root</a>,</li>
                
                <li><a href="#M000332">rails_safe_buffer_class</a>,</li>
                
                <li><a href="#M000329">rails_xss_safe?</a>,</li>
                
                <li><a href="#M000306">restrict</a>,</li>
                
                <li><a href="#M000335">ruby1_8?</a>,</li>
                
                <li><a href="#M000336">ruby1_8_6?</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000299">scope</a>,</li>
                
                <li><a href="#M000321">silence_haml_warnings</a>,</li>
                
                <li><a href="#M000320">silence_warnings</a>,</li>
                
                <li><a href="#M000310">strip_string_array</a>,</li>
                
                <li><a href="#M000309">substitute</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000300">to_hash</a>,</li>
                
                <li><a href="#M000323">try_sass</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M000316">version_geq</a>,</li>
                
                <li><a href="#M000315">version_gt</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000333">windows?</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">RUBY_VERSION</td>
            <td>=</td>
            <td class="attr-value">::RUBY_VERSION.split(&quot;.&quot;).map {|s| s.to_i}</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
An array of ints representing the Ruby version number. @api public
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">RUBY_ENGINE</td>
            <td>=</td>
            <td class="attr-value">defined?(::RUBY_ENGINE) ? ::RUBY_ENGINE : &quot;ruby&quot;</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The Ruby engine we&#8217;re running under. Defaults to `&#8220;ruby&#8221;`
if the top-level constant is undefined. @api public
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ENCODINGS_TO_CHECK</td>
            <td>=</td>
            <td class="attr-value">%w[UTF-8 UTF-16BE UTF-16LE UTF-32BE UTF-32LE]</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
We could automatically add in any non-ASCII-compatible encodings here, but
there&#8217;s not really a good way to do that without manually checking
that each encoding encodes all ASCII characters properly, which takes long
enough to affect the startup time of the CLI.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">CHARSET_REGEXPS</td>
            <td>=</td>
            <td class="attr-value">Hash.new do |h, e|         h[e] =           begin             # /\A(?:\uFEFF)?@charset &quot;(.*?)&quot;|\A(\uFEFF)/             Regexp.new(/\A(?:#{_enc(&quot;\uFEFF&quot;, e)})?#{               _enc('@charset &quot;', e)}(.*?)#{_enc('&quot;', e)}|\A(#{               _enc(&quot;\uFEFF&quot;, e)})/)</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000339">
                    
                    <a name="M000339"></a><b>_enc</b>(string, encoding)
                    
                </div>
                
                <div class="description">
                  <p>
@private
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000339_source')" id="l_M000339_source">show</a>
                        
                    </p>
                    <div id="M000339_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 584</span>
584:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_enc</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">encoding</span>)
585:         <span class="ruby-identifier">string</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">encoding</span>).<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;BINARY&quot;</span>)
586:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000319">
                    
                    <a name="M000319"></a><b>abstract</b>(obj)
                    
                </div>
                
                <div class="description">
                  <p>
Throws a NotImplementedError for an abstract method.
</p>
<p>
@param obj [Object] `self` @raise [NotImplementedError]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000319_source')" id="l_M000319_source">show</a>
                        
                    </p>
                    <div id="M000319_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 305</span>
305:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abstract</span>(<span class="ruby-identifier">obj</span>)
306:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{obj.class} must implement ##{caller_info[2]}&quot;</span>)
307:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000327">
                    
                    <a name="M000327"></a><b>ap_geq?</b>(version)
                    
                </div>
                
                <div class="description">
                  <p>
Returns whether this environment is using ActionPack of a version greater
than or equal to that specified.
</p>
<p>
@param version [String] The string version number to check against.
</p>
<pre>
  Should be greater than or equal to Rails 3,
  because otherwise ActionPack::VERSION isn't autoloaded
</pre>
<p>
@return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000327_source')" id="l_M000327_source">show</a>
                        
                    </p>
                    <div id="M000327_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 411</span>
411:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ap_geq?</span>(<span class="ruby-identifier">version</span>)
412:       <span class="ruby-comment cmt"># The ActionPack module is always loaded automatically in Rails &gt;= 3</span>
413:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ActionPack</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ActionPack</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>) <span class="ruby-operator">&amp;&amp;</span>
414:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ActionPack</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span><span class="ruby-operator">::</span><span class="ruby-constant">STRING</span>)
415: 
416:       <span class="ruby-identifier">version_geq</span>(<span class="ruby-constant">ActionPack</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span><span class="ruby-operator">::</span><span class="ruby-constant">STRING</span>, <span class="ruby-identifier">version</span>)
417:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000326">
                    
                    <a name="M000326"></a><b>ap_geq_3?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns whether this environment is using ActionPack version 3.0.0 or
greater.
</p>
<p>
@return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000326_source')" id="l_M000326_source">show</a>
                        
                    </p>
                    <div id="M000326_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 400</span>
400:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ap_geq_3?</span>
401:       <span class="ruby-identifier">ap_geq?</span>(<span class="ruby-value str">&quot;3.0.0.beta1&quot;</span>)
402:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000331">
                    
                    <a name="M000331"></a><b>assert_html_safe!</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Assert that a given object (usually a String) is <a
href="HTML.html">HTML</a> safe according to Rails&#8217; XSS handling, if
it&#8217;s loaded.
</p>
<p>
@param text [Object]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000331_source')" id="l_M000331_source">show</a>
                        
                    </p>
                    <div id="M000331_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 459</span>
459:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assert_html_safe!</span>(<span class="ruby-identifier">text</span>)
460:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">rails_xss_safe?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">text</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">html_safe?</span>
461:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Expected #{text.inspect} to be HTML-safe.&quot;</span>)
462:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000328">
                    
                    <a name="M000328"></a><b>av_template_class</b>(name)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an ActionView::Template* class. In pre-3.0 versions of Rails, most
of these classes were of the form `ActionView::TemplateFoo`, while
afterwards they were of the form `<a
href="../ActionView.html">ActionView</a>;:Template::Foo`.
</p>
<p>
@param name [to_s] The name of the class to get.
</p>
<pre>
  For example, `:Error` will return `ActionView::TemplateError`
  or `ActionView::Template::Error`.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000328_source')" id="l_M000328_source">show</a>
                        
                    </p>
                    <div id="M000328_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 427</span>
427:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">av_template_class</span>(<span class="ruby-identifier">name</span>)
428:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">ActionView</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-node">&quot;Template#{name}&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ActionView</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-node">&quot;Template#{name}&quot;</span>)
429:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>)
430:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000314">
                    
                    <a name="M000314"></a><b>caller_info</b>(entry = caller[1])
                    
                </div>
                
                <div class="description">
                  <p>
Returns information about the caller of the previous method.
</p>
<p>
@param entry [String] An entry in the `caller` list, or a similarly
formatted string @return [[String, Fixnum, (String, nil)]] An array
containing the filename, line, and method name of the caller.
</p>
<pre>
  The method name may be nil
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000314_source')" id="l_M000314_source">show</a>
                        
                    </p>
                    <div id="M000314_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 226</span>
226:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">caller_info</span>(<span class="ruby-identifier">entry</span> = <span class="ruby-identifier">caller</span>[<span class="ruby-value">1</span>])
227:       <span class="ruby-identifier">info</span> = <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/^(.*?):(-?.*?)(?::.*`(.+)')?$/</span>).<span class="ruby-identifier">first</span>
228:       <span class="ruby-identifier">info</span>[<span class="ruby-value">1</span>] = <span class="ruby-identifier">info</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">to_i</span>
229:       <span class="ruby-comment cmt"># This is added by Rubinius to designate a block, but we don't care about it.</span>
230:       <span class="ruby-identifier">info</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/ \{\}\Z/</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">info</span>[<span class="ruby-value">2</span>]
231:       <span class="ruby-identifier">info</span>
232:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000337">
                    
                    <a name="M000337"></a><b>check_encoding</b>(str)
                    
                </div>
                
                <div class="description">
                  <p>
Checks that the encoding of a string is valid in Ruby 1.9 and cleans up
potential encoding gotchas like the UTF-8 BOM. If it&#8217;s not, yields an
error string describing the invalid character and the line on which it
occurrs.
</p>
<p>
@param str [String] The string of which to check the encoding @yield [msg]
A block in which an encoding error can be raised.
</p>
<pre>
  Only yields if there is an encoding error
</pre>
<p>
@yieldparam msg [String] The error message to be raised @return [String]
`str`, potentially with encoding gotchas like BOMs removed
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000337_source')" id="l_M000337_source">show</a>
                        
                    </p>
                    <div id="M000337_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 524</span>
524:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_encoding</span>(<span class="ruby-identifier">str</span>)
525:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ruby1_8?</span>
526:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\A\xEF\xBB\xBF/</span>, <span class="ruby-value str">''</span>) <span class="ruby-comment cmt"># Get rid of the UTF-8 BOM</span>
527:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">valid_encoding?</span>
528:         <span class="ruby-comment cmt"># Get rid of the Unicode BOM if possible</span>
529:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^UTF-(8|16|32)(BE|LE)?$/</span>
530:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;\\A\uFEFF&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">str</span>.<span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">name</span>)), <span class="ruby-value str">''</span>)
531:         <span class="ruby-keyword kw">else</span>
532:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span>
533:         <span class="ruby-keyword kw">end</span>
534:       <span class="ruby-keyword kw">end</span>
535: 
536:       <span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">encoding</span>
537:       <span class="ruby-identifier">newlines</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;\r\n|\r|\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">encoding</span>).<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;binary&quot;</span>))
538:       <span class="ruby-identifier">str</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;binary&quot;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-identifier">newlines</span>).<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
539:         <span class="ruby-keyword kw">begin</span>
540:           <span class="ruby-identifier">line</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">encoding</span>)
541:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UndefinedConversionError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
542:           <span class="ruby-keyword kw">yield</span> <span class="ruby-operator">&lt;&lt;</span><span class="ruby-constant">MSG</span>.<span class="ruby-identifier">rstrip</span>, <span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
543: <span class="ruby-constant">Invalid</span> <span class="ruby-comment cmt">#{encoding.name} character #{e.error_char.dump}</span>
544: <span class="ruby-constant">MSG</span>
545:         <span class="ruby-keyword kw">end</span>
546:       <span class="ruby-keyword kw">end</span>
547:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span>
548:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000338">
                    
                    <a name="M000338"></a><b>check_haml_encoding</b>(str, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Like {#check_encoding}, but also checks for a Ruby-style `-# coding:`
comment at the beginning of the template and uses that encoding if it
exists.
</p>
<p>
The <a href="../Haml.html">Haml</a> encoding rules are simple. If a `-#
coding:` comment exists, we assume that that&#8217;s the original encoding
of the document. Otherwise, we use whatever encoding Ruby has.
</p>
<p>
<a href="../Haml.html">Haml</a> uses the same rules for parsing coding
comments as Ruby. This means that it can understand Emacs-style comments
(e.g. `-*- encoding: &#8220;utf-8&#8221; -*-`), and also that it cannot
understand non-ASCII-compatible encodings such as `UTF-16` and `UTF-32`.
</p>
<p>
@param str [String] The <a href="../Haml.html">Haml</a> template of which
to check the encoding @yield [msg] A block in which an encoding error can
be raised.
</p>
<pre>
  Only yields if there is an encoding error
</pre>
<p>
@yieldparam msg [String] The error message to be raised @return [String]
The original string encoded properly @raise [ArgumentError] if the document
declares an unknown encoding
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000338_source')" id="l_M000338_source">show</a>
                        
                    </p>
                    <div id="M000338_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 570</span>
570:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_haml_encoding</span>(<span class="ruby-identifier">str</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
571:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">check_encoding</span>(<span class="ruby-identifier">str</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ruby1_8?</span>
572:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">frozen?</span>
573: 
574:       <span class="ruby-identifier">bom</span>, <span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">parse_haml_magic_comment</span>(<span class="ruby-identifier">str</span>)
575:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">encoding</span>; <span class="ruby-identifier">str</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-identifier">encoding</span>)
576:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">bom</span>; <span class="ruby-identifier">str</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;UTF-8&quot;</span>)
577:       <span class="ruby-keyword kw">end</span>
578: 
579:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">check_encoding</span>(<span class="ruby-identifier">str</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
580:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000317">
                    
                    <a name="M000317"></a><b>dump</b>(obj)
                    
                </div>
                
                <div class="description">
                  <p>
A wrapper for `Marshal.dump` that calls `_before_dump` on the object before
dumping it, `_after_dump` afterwards. It also calls `_around_dump` and
passes it a block in which the object is dumped.
</p>
<p>
If any of these methods are undefined, they are not called.
</p>
<p>
@param obj [Object] The object to dump. @return [String] The dumped data.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000317_source')" id="l_M000317_source">show</a>
                        
                    </p>
                    <div id="M000317_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 280</span>
280:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dump</span>(<span class="ruby-identifier">obj</span>)
281:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">_before_dump</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:_before_dump</span>)
282:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span>(<span class="ruby-identifier">obj</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:_around_dump</span>)
283:       <span class="ruby-identifier">res</span> = <span class="ruby-keyword kw">nil</span>
284:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">_around_dump</span> {<span class="ruby-identifier">res</span> = <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span>(<span class="ruby-identifier">obj</span>)}
285:       <span class="ruby-identifier">res</span>
286:     <span class="ruby-keyword kw">ensure</span>
287:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">_after_dump</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:_after_dump</span>)
288:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000322">
                    
                    <a name="M000322"></a><b>haml_warn</b>(msg)
                    
                </div>
                
                <div class="description">
                  <p>
The same as `Kernel#warn`, but is silenced by {#silence_haml_warnings}.
</p>
<p>
@param msg [String]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000322_source')" id="l_M000322_source">show</a>
                        
                    </p>
                    <div id="M000322_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 334</span>
334:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">haml_warn</span>(<span class="ruby-identifier">msg</span>)
335:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@silence_warnings</span>
336:       <span class="ruby-identifier">warn</span>(<span class="ruby-identifier">msg</span>)
337:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000330">
                    
                    <a name="M000330"></a><b>html_safe</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the given text, marked as being HTML-safe. With older versions of
the Rails XSS-safety mechanism, this destructively modifies the HTML-safety
of `text`.
</p>
<p>
@param text [String, nil] @return [String, nil] `text`, marked as HTML-safe
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000330_source')" id="l_M000330_source">show</a>
                        
                    </p>
                    <div id="M000330_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 449</span>
449:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">html_safe</span>(<span class="ruby-identifier">text</span>)
450:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text</span>
451:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">html_safe</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">SafeBuffer</span>)
452:       <span class="ruby-identifier">text</span>.<span class="ruby-identifier">html_safe!</span>
453:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000308">
                    
                    <a name="M000308"></a><b>intersperse</b>(enum, val)
                    
                </div>
                
                <div class="description">
                  <p>
Intersperses a value in an enumerable, as would be done with `Array#join`
but without concatenating the array together afterwards.
</p>
<p>
@param enum [Enumerable] @param val @return [Array]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000308_source')" id="l_M000308_source">show</a>
                        
                    </p>
                    <div id="M000308_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 153</span>
153:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">intersperse</span>(<span class="ruby-identifier">enum</span>, <span class="ruby-identifier">val</span>)
154:       <span class="ruby-identifier">enum</span>.<span class="ruby-identifier">inject</span>([]) {<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">e</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">val</span>}[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>]
155:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000334">
                    
                    <a name="M000334"></a><b>ironruby?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Whether or not this is running on IronRuby.
</p>
<p>
@return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000334_source')" id="l_M000334_source">show</a>
                        
                    </p>
                    <div id="M000334_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 488</span>
488:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ironruby?</span>
489:       <span class="ruby-constant">RUBY_ENGINE</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;ironruby&quot;</span>
490:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000313">
                    
                    <a name="M000313"></a><b>lcs</b>(x, y, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Computes a single longest common subsequence for `x` and `y`. If there are
more than one longest common subsequences, the one returned is that which
starts first in `x`.
</p>
<p>
@param x [Array] @param y [Array] @yield [a, b] An optional block to use in
place of a check for equality
</p>
<pre>
  between elements of `x` and `y`.
</pre>
<p>
@yieldreturn [<a href="../Object.html">Object</a>, nil] If the two values
register as equal,
</p>
<pre>
  this will return the value to use in the LCS array.
</pre>
<p>
@return [Array] The LCS
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000313_source')" id="l_M000313_source">show</a>
                        
                    </p>
                    <div id="M000313_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 214</span>
214:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lcs</span>(<span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
215:       <span class="ruby-identifier">x</span> = [<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">x</span>]
216:       <span class="ruby-identifier">y</span> = [<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">y</span>]
217:       <span class="ruby-identifier">block</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">a</span>}
218:       <span class="ruby-identifier">lcs_backtrace</span>(<span class="ruby-identifier">lcs_table</span>(<span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>), <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-identifier">y</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
219:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000318">
                    
                    <a name="M000318"></a><b>load</b>(data)
                    
                </div>
                
                <div class="description">
                  <p>
A wrapper for `Marshal.load` that calls `_after_load` on the object after
loading it, if it&#8217;s defined.
</p>
<p>
@param data [String] The data to load. @return [Object] The loaded object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000318_source')" id="l_M000318_source">show</a>
                        
                    </p>
                    <div id="M000318_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 295</span>
295:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load</span>(<span class="ruby-identifier">data</span>)
296:       <span class="ruby-identifier">obj</span> = <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">data</span>)
297:       <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">_after_load</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:_after_load</span>)
298:       <span class="ruby-identifier">obj</span>
299:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000304">
                    
                    <a name="M000304"></a><b>map_hash</b>(hash, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Maps the key-value pairs of a hash according to a block.
</p>
<p>
@example
</p>
<pre>
  map_hash({:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}) {|k, v| [k.to_s, v.to_sym]}
    #=&gt; {&quot;foo&quot; =&gt; :bar, &quot;baz&quot; =&gt; :bang}
</pre>
<p>
@param hash [Hash] The hash to map @yield [key, value] A block in which the
key-value pairs are transformed @yieldparam [key] The hash key @yieldparam
[value] The hash value @yieldreturn [(<a href="../Object.html">Object</a>,
<a href="../Object.html">Object</a>)] The new value for the `[key, value]`
pair @return [Hash] The mapped hash @see <a
href="Util.html#M000302">map_keys</a> @see <a
href="Util.html#M000303">map_vals</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000304_source')" id="l_M000304_source">show</a>
                        
                    </p>
                    <div id="M000304_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/haml/util.rb, line 88</span>
88:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">map_hash</span>(<span class="ruby-identifier">hash</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
89:       <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>))
90:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000302">
                    
                    <a name="M000302"></a><b>map_keys</b>(hash)
                    
                </div>
                
                <div class="description">
                  <p>
Maps the keys in a hash according to a block.
</p>
<p>
@example
</p>
<pre>
  map_keys({:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}) {|k| k.to_s}
    #=&gt; {&quot;foo&quot; =&gt; &quot;bar&quot;, &quot;baz&quot; =&gt; &quot;bang&quot;}
</pre>
<p>
@param hash [Hash] The hash to map @yield [key] A block in which the keys
are transformed @yieldparam key [Object] The key that should be mapped
@yieldreturn [Object] The new value for the key @return [Hash] The mapped
hash @see <a href="Util.html#M000303">map_vals</a> @see <a
href="Util.html#M000304">map_hash</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000302_source')" id="l_M000302_source">show</a>
                        
                    </p>
                    <div id="M000302_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/haml/util.rb, line 55</span>
55:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">map_keys</span>(<span class="ruby-identifier">hash</span>)
56:       <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [<span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">k</span>), <span class="ruby-identifier">v</span>]})
57:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000303">
                    
                    <a name="M000303"></a><b>map_vals</b>(hash)
                    
                </div>
                
                <div class="description">
                  <p>
Maps the values in a hash according to a block.
</p>
<p>
@example
</p>
<pre>
  map_values({:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}) {|v| v.to_sym}
    #=&gt; {:foo =&gt; :bar, :baz =&gt; :bang}
</pre>
<p>
@param hash [Hash] The hash to map @yield [value] A block in which the
values are transformed @yieldparam value [Object] The value that should be
mapped @yieldreturn [Object] The new value for the value @return [Hash] The
mapped hash @see <a href="Util.html#M000302">map_keys</a> @see <a
href="Util.html#M000304">map_hash</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000303_source')" id="l_M000303_source">show</a>
                        
                    </p>
                    <div id="M000303_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/haml/util.rb, line 71</span>
71:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">map_vals</span>(<span class="ruby-identifier">hash</span>)
72:       <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">k</span>, <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">v</span>)]})
73:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000307">
                    
                    <a name="M000307"></a><b>merge_adjacent_strings</b>(arr)
                    
                </div>
                
                <div class="description">
                  <p>
Concatenates all strings that are adjacent in an array, while leaving other
elements as they are.
</p>
<p>
@example
</p>
<pre>
  merge_adjacent_strings([1, &quot;foo&quot;, &quot;bar&quot;, 2, &quot;baz&quot;])
    #=&gt; [1, &quot;foobar&quot;, 2, &quot;baz&quot;]
</pre>
<p>
@param arr [Array] @return [Array] The enumerable with strings merged
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000307_source')" id="l_M000307_source">show</a>
                        
                    </p>
                    <div id="M000307_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 130</span>
130:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge_adjacent_strings</span>(<span class="ruby-identifier">arr</span>)
131:       <span class="ruby-comment cmt"># Optimize for the common case of one element</span>
132:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">arr</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>
133:       <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
134:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
135:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
136:             <span class="ruby-identifier">a</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">e</span>
137:           <span class="ruby-keyword kw">else</span>
138:             <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">dup</span>
139:           <span class="ruby-keyword kw">end</span>
140:         <span class="ruby-keyword kw">else</span>
141:           <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">e</span>
142:         <span class="ruby-keyword kw">end</span>
143:         <span class="ruby-identifier">a</span>
144:       <span class="ruby-keyword kw">end</span>
145:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000312">
                    
                    <a name="M000312"></a><b>paths</b>(arrs)
                    
                </div>
                
                <div class="description">
                  <p>
Return an array of all possible paths through the given arrays.
</p>
<p>
@param arrs [Array<Array>] @return [Array<Arrays>]
</p>
<p>
@example
</p>
<pre>
  paths([[1, 2], [3, 4], [5]]) #=&gt;
    # [[1, 3, 5],
    #  [2, 3, 5],
    #  [1, 4, 5],
    #  [2, 4, 5]]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000312_source')" id="l_M000312_source">show</a>
                        
                    </p>
                    <div id="M000312_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 197</span>
197:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">paths</span>(<span class="ruby-identifier">arrs</span>)
198:       <span class="ruby-identifier">arrs</span>.<span class="ruby-identifier">inject</span>([[]]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">paths</span>, <span class="ruby-identifier">arr</span><span class="ruby-operator">|</span>
199:         <span class="ruby-identifier">flatten</span>(<span class="ruby-identifier">arr</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">e</span>]}}, <span class="ruby-value">1</span>)
200:       <span class="ruby-keyword kw">end</span>
201:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000305">
                    
                    <a name="M000305"></a><b>powerset</b>(arr)
                    
                </div>
                
                <div class="description">
                  <p>
Computes the powerset of the given array. This is the set of all subsets of
the array.
</p>
<p>
@example
</p>
<pre>
  powerset([1, 2, 3]) #=&gt;
    Set[Set[], Set[1], Set[2], Set[3], Set[1, 2], Set[2, 3], Set[1, 3], Set[1, 2, 3]]
</pre>
<p>
@param arr [Enumerable] @return [Set<Set>] The subsets of `arr`
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000305_source')" id="l_M000305_source">show</a>
                        
                    </p>
                    <div id="M000305_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 100</span>
100:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">powerset</span>(<span class="ruby-identifier">arr</span>)
101:       <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">inject</span>([<span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>].<span class="ruby-identifier">to_set</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">powerset</span>, <span class="ruby-identifier">el</span><span class="ruby-operator">|</span>
102:         <span class="ruby-identifier">new_powerset</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>
103:         <span class="ruby-identifier">powerset</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">subset</span><span class="ruby-operator">|</span>
104:           <span class="ruby-identifier">new_powerset</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">subset</span>
105:           <span class="ruby-identifier">new_powerset</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">subset</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">el</span>]
106:         <span class="ruby-keyword kw">end</span>
107:         <span class="ruby-identifier">new_powerset</span>
108:       <span class="ruby-keyword kw">end</span>
109:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000325">
                    
                    <a name="M000325"></a><b>rails_env</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the environment of the Rails application, if this is running in a
Rails context. Returns `nil` if no such environment is defined.
</p>
<p>
@return [String, nil]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000325_source')" id="l_M000325_source">show</a>
                        
                    </p>
                    <div id="M000325_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 390</span>
390:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rails_env</span>
391:       <span class="ruby-keyword kw">return</span> <span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>)
392:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">RAILS_ENV</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">RAILS_ENV</span>)
393:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
394:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000324">
                    
                    <a name="M000324"></a><b>rails_root</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the root of the Rails application, if this is running in a Rails
context. Returns `nil` if no such root is defined.
</p>
<p>
@return [String, nil]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000324_source')" id="l_M000324_source">show</a>
                        
                    </p>
                    <div id="M000324_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 376</span>
376:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rails_root</span>
377:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>)
378:         <span class="ruby-keyword kw">return</span> <span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>
379:         <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;ERROR: Rails.root is nil!&quot;</span>
380:       <span class="ruby-keyword kw">end</span>
381:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">RAILS_ROOT</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">RAILS_ROOT</span>)
382:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
383:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000332">
                    
                    <a name="M000332"></a><b>rails_safe_buffer_class</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The class for the Rails SafeBuffer XSS protection class. This varies
depending on Rails version.
</p>
<p>
@return [Class]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000332_source')" id="l_M000332_source">show</a>
                        
                    </p>
                    <div id="M000332_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 468</span>
468:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rails_safe_buffer_class</span>
469:       <span class="ruby-comment cmt"># It's important that we check ActiveSupport first,</span>
470:       <span class="ruby-comment cmt"># because in Rails 2.3.6 ActionView::SafeBuffer exists</span>
471:       <span class="ruby-comment cmt"># but is a deprecated proxy object.</span>
472:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">SafeBuffer</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">SafeBuffer</span>)
473:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">SafeBuffer</span>
474:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000329">
                    
                    <a name="M000329"></a><b>rails_xss_safe?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Whether or not ActionView&#8217;s XSS protection is available and enabled,
as is the default for Rails 3.0+, and optional for version 2.3.5+.
Overridden in haml/template.rb if this is the case.
</p>
<p>
@return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000329_source')" id="l_M000329_source">show</a>
                        
                    </p>
                    <div id="M000329_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 439</span>
439:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rails_xss_safe?</span>
440:       <span class="ruby-keyword kw">false</span>
441:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000306">
                    
                    <a name="M000306"></a><b>restrict</b>(value, range)
                    
                </div>
                
                <div class="description">
                  <p>
Restricts a number to falling within a given range. Returns the number if
it falls within the range, or the closest value in the range if it
doesn&#8217;t.
</p>
<p>
@param value [Numeric] @param range [Range<Numeric>] @return [Numeric]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000306_source')" id="l_M000306_source">show</a>
                        
                    </p>
                    <div id="M000306_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 118</span>
118:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">restrict</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">range</span>)
119:       [[<span class="ruby-identifier">value</span>, <span class="ruby-identifier">range</span>.<span class="ruby-identifier">first</span>].<span class="ruby-identifier">max</span>, <span class="ruby-identifier">range</span>.<span class="ruby-identifier">last</span>].<span class="ruby-identifier">min</span>
120:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000335">
                    
                    <a name="M000335"></a><b>ruby1_8?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Whether or not this is running under Ruby 1.8 or lower.
</p>
<p>
Note that IronRuby counts as Ruby 1.8, because it doesn&#8217;t support the
Ruby 1.9 encoding API.
</p>
<p>
@return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000335_source')" id="l_M000335_source">show</a>
                        
                    </p>
                    <div id="M000335_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 500</span>
500:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ruby1_8?</span>
501:       <span class="ruby-comment cmt"># IronRuby says its version is 1.9, but doesn't support any of the encoding APIs.</span>
502:       <span class="ruby-comment cmt"># We have to fall back to 1.8 behavior.</span>
503:       <span class="ruby-identifier">ironruby?</span> <span class="ruby-operator">||</span> (<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span><span class="ruby-operator">::</span><span class="ruby-constant">RUBY_VERSION</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span><span class="ruby-operator">::</span><span class="ruby-constant">RUBY_VERSION</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-value">9</span>)
504:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000336">
                    
                    <a name="M000336"></a><b>ruby1_8_6?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Whether or not this is running under Ruby 1.8.6 or lower. Note that lower
versions are not officially supported.
</p>
<p>
@return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000336_source')" id="l_M000336_source">show</a>
                        
                    </p>
                    <div id="M000336_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 510</span>
510:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ruby1_8_6?</span>
511:       <span class="ruby-identifier">ruby1_8?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span><span class="ruby-operator">::</span><span class="ruby-constant">RUBY_VERSION</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-value">7</span>
512:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000299">
                    
                    <a name="M000299"></a><b>scope</b>(file)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the path of a file relative to the <a href="../Haml.html">Haml</a>
root directory.
</p>
<p>
@param file [String] The filename relative to the <a
href="../Haml.html">Haml</a> root @return [String] The filename relative to
the the working directory
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000299_source')" id="l_M000299_source">show</a>
                        
                    </p>
                    <div id="M000299_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/haml/util.rb, line 28</span>
28:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">file</span>)
29:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">ROOT_DIR</span>, <span class="ruby-identifier">file</span>)
30:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000321">
                    
                    <a name="M000321"></a><b>silence_haml_warnings</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Silences all <a href="../Haml.html">Haml</a> warnings within a block.
</p>
<p>
@yield A block in which no <a href="../Haml.html">Haml</a> warnings will be
printed
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000321_source')" id="l_M000321_source">show</a>
                        
                    </p>
                    <div id="M000321_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 323</span>
323:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">silence_haml_warnings</span>
324:       <span class="ruby-identifier">old_silence_warnings</span> = <span class="ruby-ivar">@@silence_warnings</span>
325:       <span class="ruby-ivar">@@silence_warnings</span> = <span class="ruby-keyword kw">true</span>
326:       <span class="ruby-keyword kw">yield</span>
327:     <span class="ruby-keyword kw">ensure</span>
328:       <span class="ruby-ivar">@@silence_warnings</span> = <span class="ruby-identifier">old_silence_warnings</span>
329:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000320">
                    
                    <a name="M000320"></a><b>silence_warnings</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Silence all output to STDERR within a block.
</p>
<p>
@yield A block in which no output will be printed to STDERR
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000320_source')" id="l_M000320_source">show</a>
                        
                    </p>
                    <div id="M000320_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 312</span>
312:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">silence_warnings</span>
313:       <span class="ruby-identifier">the_real_stderr</span>, <span class="ruby-identifier">$stderr</span> = <span class="ruby-identifier">$stderr</span>, <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
314:       <span class="ruby-keyword kw">yield</span>
315:     <span class="ruby-keyword kw">ensure</span>
316:       <span class="ruby-identifier">$stderr</span> = <span class="ruby-identifier">the_real_stderr</span>
317:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000310">
                    
                    <a name="M000310"></a><b>strip_string_array</b>(arr)
                    
                </div>
                
                <div class="description">
                  <p>
Destructively strips whitespace from the beginning and end of the first and
last elements, respectively, in the array (if those elements are strings).
</p>
<p>
@param arr [Array] @return [Array] `arr`
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000310_source')" id="l_M000310_source">show</a>
                        
                    </p>
                    <div id="M000310_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 180</span>
180:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strip_string_array</span>(<span class="ruby-identifier">arr</span>)
181:       <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">lstrip!</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
182:       <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">rstrip!</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
183:       <span class="ruby-identifier">arr</span>
184:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000309">
                    
                    <a name="M000309"></a><b>substitute</b>(ary, from, to)
                    
                </div>
                
                <div class="description">
                  <p>
Substitutes a sub-array of one array with another sub-array.
</p>
<p>
@param ary [Array] The array in which to make the substitution @param from
[Array] The sequence of elements to replace with `to` @param to [Array] The
sequence of elements to replace `from` with
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000309_source')" id="l_M000309_source">show</a>
                        
                    </p>
                    <div id="M000309_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 162</span>
162:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">substitute</span>(<span class="ruby-identifier">ary</span>, <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
163:       <span class="ruby-identifier">res</span> = <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">dup</span>
164:       <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>
165:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">res</span>.<span class="ruby-identifier">size</span>
166:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">...</span><span class="ruby-identifier">i</span><span class="ruby-operator">+</span><span class="ruby-identifier">from</span>.<span class="ruby-identifier">size</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">from</span>
167:           <span class="ruby-identifier">res</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">...</span><span class="ruby-identifier">i</span><span class="ruby-operator">+</span><span class="ruby-identifier">from</span>.<span class="ruby-identifier">size</span>] = <span class="ruby-identifier">to</span>
168:         <span class="ruby-keyword kw">end</span>
169:         <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
170:       <span class="ruby-keyword kw">end</span>
171:       <span class="ruby-identifier">res</span>
172:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000300">
                    
                    <a name="M000300"></a><b>to_hash</b>(arr)
                    
                </div>
                
                <div class="description">
                  <p>
Converts an array of `[key, value]` pairs to a hash.
</p>
<p>
@example
</p>
<pre>
  to_hash([[:foo, &quot;bar&quot;], [:baz, &quot;bang&quot;]])
    #=&gt; {:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}
</pre>
<p>
@param arr [Array<(<a href="../Object.html">Object</a>, <a
href="../Object.html">Object</a>)>] An array of pairs @return [Hash] A hash
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000300_source')" id="l_M000300_source">show</a>
                        
                    </p>
                    <div id="M000300_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/haml/util.rb, line 39</span>
39:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">arr</span>)
40:       <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">arr</span>.<span class="ruby-identifier">compact</span>]
41:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000323">
                    
                    <a name="M000323"></a><b>try_sass</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Try loading Sass. If the `sass` gem isn&#8217;t installed, print a warning
and load from the vendored gem.
</p>
<p>
@return [Boolean] True if Sass was successfully loaded from the `sass` gem,
</p>
<pre>
  false otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000323_source')" id="l_M000323_source">show</a>
                        
                    </p>
                    <div id="M000323_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 344</span>
344:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">try_sass</span>
345:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">SASS_BEGUN_TO_LOAD</span>)
346:       <span class="ruby-keyword kw">begin</span>
347:         <span class="ruby-identifier">require</span> <span class="ruby-value str">'sass/version'</span>
348:         <span class="ruby-identifier">loaded</span> = <span class="ruby-constant">Sass</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:version</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Sass</span>.<span class="ruby-identifier">version</span>[<span class="ruby-identifier">:major</span>] <span class="ruby-operator">&amp;&amp;</span>
349:           <span class="ruby-constant">Sass</span>.<span class="ruby-identifier">version</span>[<span class="ruby-identifier">:minor</span>] <span class="ruby-operator">&amp;&amp;</span> ((<span class="ruby-constant">Sass</span>.<span class="ruby-identifier">version</span>[<span class="ruby-identifier">:major</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Sass</span>.<span class="ruby-identifier">version</span>[<span class="ruby-identifier">:minor</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>) <span class="ruby-operator">||</span>
350:           ((<span class="ruby-constant">Sass</span>.<span class="ruby-identifier">version</span>[<span class="ruby-identifier">:major</span>] <span class="ruby-operator">==</span> <span class="ruby-value">3</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Sass</span>.<span class="ruby-identifier">version</span>[<span class="ruby-identifier">:minor</span>] <span class="ruby-operator">==</span> <span class="ruby-value">1</span>) <span class="ruby-operator">&amp;&amp;</span>
351:             (<span class="ruby-constant">Sass</span>.<span class="ruby-identifier">version</span>[<span class="ruby-identifier">:prerelease</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Sass</span>.<span class="ruby-identifier">version</span>[<span class="ruby-identifier">:name</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;Bleeding Edge&quot;</span>)))
352:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
353:         <span class="ruby-identifier">loaded</span> = <span class="ruby-keyword kw">false</span>
354:       <span class="ruby-keyword kw">end</span>
355: 
356:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">loaded</span>
357:         <span class="ruby-identifier">haml_warn</span>(<span class="ruby-value str">&quot;Sass is in the process of being separated from Haml,\nand will no longer be bundled at all in Haml 3.2.0.\nPlease install the 'sass' gem if you want to use Sass.\n&quot;</span>)
358:         <span class="ruby-identifier">$&quot;</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'sass/version'</span>)
359:         <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">scope</span>(<span class="ruby-value str">&quot;vendor/sass/lib&quot;</span>))
360:       <span class="ruby-keyword kw">end</span>
361:       <span class="ruby-identifier">loaded</span>
362:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000316">
                    
                    <a name="M000316"></a><b>version_geq</b>(v1, v2)
                    
                </div>
                
                <div class="description">
                  <p>
Returns whether one version string represents the same or a more recent
version than another.
</p>
<p>
@param v1 [String] A version string. @param v2 [String] Another version
string. @return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000316_source')" id="l_M000316_source">show</a>
                        
                    </p>
                    <div id="M000316_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 268</span>
268:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version_geq</span>(<span class="ruby-identifier">v1</span>, <span class="ruby-identifier">v2</span>)
269:       <span class="ruby-identifier">version_gt</span>(<span class="ruby-identifier">v1</span>, <span class="ruby-identifier">v2</span>) <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">version_gt</span>(<span class="ruby-identifier">v2</span>, <span class="ruby-identifier">v1</span>)
270:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000315">
                    
                    <a name="M000315"></a><b>version_gt</b>(v1, v2)
                    
                </div>
                
                <div class="description">
                  <p>
Returns whether one version string represents a more recent version than
another.
</p>
<p>
@param v1 [String] A version string. @param v2 [String] Another version
string. @return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000315_source')" id="l_M000315_source">show</a>
                        
                    </p>
                    <div id="M000315_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 239</span>
239:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version_gt</span>(<span class="ruby-identifier">v1</span>, <span class="ruby-identifier">v2</span>)
240:       <span class="ruby-comment cmt"># Construct an array to make sure the shorter version is padded with nil</span>
241:       <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>([<span class="ruby-identifier">v1</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">v2</span>.<span class="ruby-identifier">length</span>].<span class="ruby-identifier">max</span>).<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">v1</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;.&quot;</span>), <span class="ruby-identifier">v2</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;.&quot;</span>)) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">_</span>, <span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span><span class="ruby-operator">|</span>
242:         <span class="ruby-identifier">p1</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;0&quot;</span>
243:         <span class="ruby-identifier">p2</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;0&quot;</span>
244:         <span class="ruby-identifier">release1</span> = <span class="ruby-identifier">p1</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^[0-9]+$/</span>
245:         <span class="ruby-identifier">release2</span> = <span class="ruby-identifier">p2</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^[0-9]+$/</span>
246:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">release1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">release2</span>
247:           <span class="ruby-comment cmt"># Integer comparison if both are full releases</span>
248:           <span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span> = <span class="ruby-identifier">p1</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">p2</span>.<span class="ruby-identifier">to_i</span>
249:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">p2</span>
250:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">p1</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">p2</span>
251:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">release1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">release2</span>
252:           <span class="ruby-comment cmt"># String comparison if both are prereleases</span>
253:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">p2</span>
254:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">p1</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">p2</span>
255:         <span class="ruby-keyword kw">else</span>
256:           <span class="ruby-comment cmt"># If only one is a release, that one is newer</span>
257:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">release1</span>
258:         <span class="ruby-keyword kw">end</span>
259:       <span class="ruby-keyword kw">end</span>
260:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000333">
                    
                    <a name="M000333"></a><b>windows?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Whether or not this is running on Windows.
</p>
<p>
@return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000333_source')" id="l_M000333_source">show</a>
                        
                    </p>
                    <div id="M000333_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/haml/util.rb, line 481</span>
481:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">windows?</span>
482:       <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-value str">'host_os'</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/mswin|windows|mingw/i</span>
483:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    