<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Platform</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            Platform 
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/platform_rb.html">lib/platform.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h2><a href="Platform.html">Platform</a></h2>
<p>
<a href="Platform.html">Platform</a> is a simple module which parses the
Ruby constant RUBY_PLATFORM and works out the OS, it&#8217;s
implementation, and the architecture it&#8217;s running on.
</p>
<p>
The motivation for writing this was coming across a case where
</p>
<p>
+if RUBY_PLATFORM =~ /win/+
</p>
<p>
didn&#8217;t behave as expected (i.e. on powerpc-darwin-8.1.0)
</p>
<p>
It is hoped that providing a library for parsing the platform means that we
can cover all the cases and have something which works reliably 99% of the
time.
</p>
<p>
Please report any anomalies or new combinations to the author(s).
</p>
<h2>Use</h2>
<p>
require &#8220;platform&#8220;
</p>
<p>
defines
</p>
<p>
Platform::OS (:unix,:win32,:vms,:os2) Platform::IMPL
(:macosx,:linux,:mswin) Platform::ARCH (:powerpc,:x86,:alpha)
</p>
<p>
if an unknown configuration is encountered any (or all) of these constant
may have the value :unknown.
</p>
<p>
To display the combination for your setup run
</p>
<p>
ruby platform.rb
</p>

    </div>
    

    

    
    

    
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">PLATFORMS</td>
            <td>=</td>
            <td class="attr-value">[       [ /darwin/i,   :unix,      :macosx ],       [ /linux/i,    :unix,      :linux ],       [ /freebsd/i,  :unix,      :freebsd ],       [ /netbsd/i,   :unix,      :netbsd ],       [ /mswin/i,    :win32,     :mswin ],        [ /cygwin/i,   :hybrid,    :cygwin ],       [ /mingw/i,    :win32,     :mingw ],       [ /bccwin/i,   :win32,     :bccwin ],       [ /wince/i,    :win32,     :wince ],        [ /vms/i,      :vms,       :vms ],       [ /os2/i,      :os2,       :os2 ],       [ /solaris/i,  :unix,      :solaris ],        [ /irix/i,     :unix,      :irix ],        [ /.*/,        :unknown,   :unknown ]    ]</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Each platform is defined as [ /regex/, ::OS, ::IMPL ] define them from most
to least specific and
</p>
<dl>
<dt> /.*/, :unknown, :unknown </dt><dd>should always come last

</dd>
</dl>
<p>
whither AIX, SOLARIS, and the other unixen?
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IMPL</td>
            <td>=</td>
            <td class="attr-value">PLATFORMS.find { |p| RUBY_PLATFORM =~ /#{p[0]}/ }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ARCHS</td>
            <td>=</td>
            <td class="attr-value">[       [ /i\d86/,     :x86 ],       [ /ia64/,      :ia64 ],       [ /powerpc/,   :powerpc ],       [ /alpha/,     :alpha ],       [ /sparc/i,    :sparc ],        [ /mips/i,     :mips ],        [ /.*/,        :unknown ]    ]</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
What about AMD, Turion, Motorola, etc..?
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ARCH</td>
            <td>=</td>
            <td class="attr-value">ARCHS.find { |a| RUBY_PLATFORM =~ /#{a[0]}/}</td>
        </tr>
        
        
    </table>
    

    

    
</div>
    </div>
  </body>
</html>    