<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActionView::Helpers::FormOptionsHelper</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            ActionView::Helpers::FormOptionsHelper 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/actionpack-3_2_0/lib/action_view/helpers/form_options_helper_rb.html">actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Provides a number of methods for turning different kinds of containers into
a set of option tags.
</p>
<h2>Options</h2>
<p>
The <tt><a
href="FormOptionsHelper.html#M000427">collection_select</a></tt>,
<tt>select</tt> and <tt><a
href="FormOptionsHelper.html#M000435">time_zone_select</a></tt> methods
take an <tt>options</tt> parameter, a hash:
</p>
<ul>
<li><tt>:include_blank</tt> - set to true or a prompt string if the first
option element of the select element is a blank. Useful if there is not a
default value required for the select element.

</li>
</ul>
<p>
For example,
</p>
<pre>
  select(&quot;post&quot;, &quot;category&quot;, Post::CATEGORIES, {:include_blank =&gt; true})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[category]&quot;&gt;
    &lt;option&gt;&lt;/option&gt;
    &lt;option&gt;joke&lt;/option&gt;
    &lt;option&gt;poem&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
Another common case is a select tag for an <tt>belongs_to</tt>-associated
object.
</p>
<p>
Example with @post.person_id => 2:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.all.collect {|p| [ p.name, p.id ] }, {:include_blank =&gt; 'None'})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;None&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<ul>
<li><tt>:prompt</tt> - set to true or a prompt string. When the select element
doesn&#8217;t have a value yet, this prepends an option with a generic
prompt &#8212; &#8220;Please select&#8221; &#8212; or the given prompt
string.

</li>
</ul>
<p>
Example:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.all.collect {|p| [ p.name, p.id ] }, {:prompt =&gt; 'Select Person'})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;Select Person&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
Like the other form helpers, <tt>select</tt> can accept an <tt>:index</tt>
option to manually set the ID used in the resulting output. Unlike other
helpers, <tt>select</tt> expects this option to be in the
<tt>html_options</tt> parameter.
</p>
<p>
Example:
</p>
<pre>
  select(&quot;album[]&quot;, &quot;genre&quot;, %w[rap rock country], {}, { :index =&gt; nil })
</pre>
<p>
becomes:
</p>
<pre>
  &lt;select name=&quot;album[][genre]&quot; id=&quot;album__genre&quot;&gt;
    &lt;option value=&quot;rap&quot;&gt;rap&lt;/option&gt;
    &lt;option value=&quot;rock&quot;&gt;rock&lt;/option&gt;
    &lt;option value=&quot;country&quot;&gt;country&lt;/option&gt;
  &lt;/select&gt;
</pre>
<ul>
<li><tt>:disabled</tt> - can be a single value or an array of values that will
be disabled options in the final output.

</li>
</ul>
<p>
Example:
</p>
<pre>
  select(&quot;post&quot;, &quot;category&quot;, Post::CATEGORIES, {:disabled =&gt; 'restricted'})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[category]&quot;&gt;
    &lt;option&gt;&lt;/option&gt;
    &lt;option&gt;joke&lt;/option&gt;
    &lt;option&gt;poem&lt;/option&gt;
    &lt;option disabled=&quot;disabled&quot;&gt;restricted&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
When used with the <tt><a
href="FormOptionsHelper.html#M000427">collection_select</a></tt> helper,
<tt>:disabled</tt> can also be a Proc that identifies those options that
should be disabled.
</p>
<p>
Example:
</p>
<pre>
  collection_select(:post, :category_id, Category.all, :id, :name, {:disabled =&gt; lambda{|category| category.archived? }})
</pre>
<p>
If the categories &#8220;2008 stuff&#8221; and &#8220;Christmas&#8221;
return true when the method <tt>archived?</tt> is called, this would
return:
</p>
<pre>
  &lt;select name=&quot;post[category_id]&quot;&gt;
    &lt;option value=&quot;1&quot; disabled=&quot;disabled&quot;&gt;2008 stuff&lt;/option&gt;
    &lt;option value=&quot;2&quot; disabled=&quot;disabled&quot;&gt;Christmas&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Jokes&lt;/option&gt;
    &lt;option value=&quot;4&quot;&gt;Poems&lt;/option&gt;
  &lt;/select&gt;
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000427">collection_select</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000447">extract_selected_and_disabled</a>,</li>
                
                <li><a href="#M000448">extract_values_from_collection</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000429">grouped_collection_select</a>,</li>
                
                <li><a href="#M000442">grouped_options_for_select</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000441">option_groups_from_collection_for_select</a>,</li>
                
                <li><a href="#M000444">option_html_attributes</a>,</li>
                
                <li><a href="#M000445">option_text_and_value</a>,</li>
                
                <li><a href="#M000446">option_value_selected?</a>,</li>
                
                <li><a href="#M000438">options_for_select</a>,</li>
                
                <li><a href="#M000440">options_from_collection_for_select</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000423">select</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000443">time_zone_options_for_select</a>,</li>
                
                <li><a href="#M000435">time_zone_select</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="AssetTagHelper.html">ActionView::Helpers::AssetTagHelper</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000427">
                    
                    <a name="M000427"></a><b>collection_select</b>(object, method, collection, value_method, text_method, options = {}, html_options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>&lt;select&gt;</tt> and <tt>&lt;option&gt;</tt> tags for the
collection of existing return values of <tt>method</tt> for
<tt>object</tt>&#8217;s class. The value returned from calling
<tt>method</tt> on the instance <tt>object</tt> will be selected. If
calling <tt>method</tt> returns <tt>nil</tt>, no selection is made without
including <tt>:prompt</tt> or <tt>:include_blank</tt> in the
<tt>options</tt> hash.
</p>
<p>
The <tt>:value_method</tt> and <tt>:text_method</tt> parameters are methods
to be called on each member of <tt>collection</tt>. The return values are
used as the <tt>value</tt> attribute and contents of each
<tt>&lt;option&gt;</tt> tag, respectively.
</p>
<p>
Example object structure for use with this method:
</p>
<pre>
  class Post &lt; ActiveRecord::Base
    belongs_to :author
  end
  class Author &lt; ActiveRecord::Base
    has_many :posts
    def name_with_initial
      &quot;#{first_name.first}. #{last_name}&quot;
    end
  end
</pre>
<p>
Sample usage (selecting the associated Author for an instance of Post,
<tt>@post</tt>):
</p>
<pre>
  collection_select(:post, :author_id, Author.all, :id, :name_with_initial, :prompt =&gt; true)
</pre>
<p>
If <tt>@post.author_id</tt> is already <tt>1</tt>, this would return:
</p>
<pre>
  &lt;select name=&quot;post[author_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;Please select&lt;/option&gt;
    &lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;D. Heinemeier Hansson&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;D. Thomas&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;M. Clark&lt;/option&gt;
  &lt;/select&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000427_source')" id="l_M000427_source">show</a>
                        
                    </p>
                    <div id="M000427_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 190</span>
190:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collection_select</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">text_method</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})
191:         <span class="ruby-constant">InstanceTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:object</span>)).<span class="ruby-identifier">to_collection_select_tag</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">text_method</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)
192:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000429">
                    
                    <a name="M000429"></a><b>grouped_collection_select</b>(object, method, collection, group_method, group_label_method, option_key_method, option_value_method, options = {}, html_options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>&lt;select&gt;</tt>, <tt>&lt;optgroup&gt;</tt> and
<tt>&lt;option&gt;</tt> tags for the collection of existing return values
of <tt>method</tt> for <tt>object</tt>&#8217;s class. The value returned
from calling <tt>method</tt> on the instance <tt>object</tt> will be
selected. If calling <tt>method</tt> returns <tt>nil</tt>, no selection is
made without including <tt>:prompt</tt> or <tt>:include_blank</tt> in the
<tt>options</tt> hash.
</p>
<p>
Parameters:
</p>
<ul>
<li><tt>object</tt> - The instance of the class to be used for the select tag

</li>
<li><tt>method</tt> - The attribute of <tt>object</tt> corresponding to the
select tag

</li>
<li><tt>collection</tt> - An array of objects representing the
<tt>&lt;optgroup&gt;</tt> tags.

</li>
<li><tt>group_method</tt> - The name of a method which, when called on a member
of <tt>collection</tt>, returns an array of child objects representing the
<tt>&lt;option&gt;</tt> tags.

</li>
<li><tt>group_label_method</tt> - The name of a method which, when called on a
member of <tt>collection</tt>, returns a string to be used as the
<tt>label</tt> attribute for its <tt>&lt;optgroup&gt;</tt> tag.

</li>
<li><tt>option_key_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the <tt>value</tt> attribute for its <tt>&lt;option&gt;</tt> tag.

</li>
<li><tt>option_value_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the contents of its <tt>&lt;option&gt;</tt> tag.

</li>
</ul>
<p>
Example object structure for use with this method:
</p>
<pre>
  class Continent &lt; ActiveRecord::Base
    has_many :countries
    # attribs: id, name
  end
  class Country &lt; ActiveRecord::Base
    belongs_to :continent
    # attribs: id, name, continent_id
  end
  class City &lt; ActiveRecord::Base
    belongs_to :country
    # attribs: id, name, country_id
  end
</pre>
<p>
Sample usage:
</p>
<pre>
  grouped_collection_select(:city, :country_id, @continents, :countries, :name, :id, :name)
</pre>
<p>
Possible output:
</p>
<pre>
  &lt;select name=&quot;city[country_id]&quot;&gt;
    &lt;optgroup label=&quot;Africa&quot;&gt;
      &lt;option value=&quot;1&quot;&gt;South Africa&lt;/option&gt;
      &lt;option value=&quot;3&quot;&gt;Somalia&lt;/option&gt;
    &lt;/optgroup&gt;
    &lt;optgroup label=&quot;Europe&quot;&gt;
      &lt;option value=&quot;7&quot; selected=&quot;selected&quot;&gt;Denmark&lt;/option&gt;
      &lt;option value=&quot;2&quot;&gt;Ireland&lt;/option&gt;
    &lt;/optgroup&gt;
  &lt;/select&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000429_source')" id="l_M000429_source">show</a>
                        
                    </p>
                    <div id="M000429_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 242</span>
242:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grouped_collection_select</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">collection</span>, <span class="ruby-identifier">group_method</span>, <span class="ruby-identifier">group_label_method</span>, <span class="ruby-identifier">option_key_method</span>, <span class="ruby-identifier">option_value_method</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})
243:         <span class="ruby-constant">InstanceTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:object</span>)).<span class="ruby-identifier">to_grouped_collection_select_tag</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">group_method</span>, <span class="ruby-identifier">group_label_method</span>, <span class="ruby-identifier">option_key_method</span>, <span class="ruby-identifier">option_value_method</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)
244:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000442">
                    
                    <a name="M000442"></a><b>grouped_options_for_select</b>(grouped_options, selected_key = nil, prompt = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like <tt><a
href="FormOptionsHelper.html#M000438">options_for_select</a></tt>, but
wraps them with <tt>&lt;optgroup&gt;</tt> tags.
</p>
<p>
Parameters:
</p>
<ul>
<li><tt>grouped_options</tt> - Accepts a nested array or hash of strings. The
first value serves as the <tt>&lt;optgroup&gt;</tt> label while the second
value must be an array of options. The second value can be a nested array
of text-value pairs. See <tt><a
href="FormOptionsHelper.html#M000438">options_for_select</a></tt> for more
info.

<pre>
 Ex. [&quot;North America&quot;,[[&quot;United States&quot;,&quot;US&quot;],[&quot;Canada&quot;,&quot;CA&quot;]]]
</pre>
</li>
<li><tt>selected_key</tt> - A value equal to the <tt>value</tt> attribute for
one of the <tt>&lt;option&gt;</tt> tags, which will have the
<tt>selected</tt> attribute set. Note: It is possible for this value to
match multiple options as you might have the same option in multiple
groups. Each will then get <tt>selected=&quot;selected&quot;</tt>.

</li>
<li><tt>prompt</tt> - set to true or a prompt string. When the select element
doesn&#8217;t have a value yet, this prepends an option with a generic
prompt - &#8220;Please select&#8221; - or the given prompt string.

</li>
</ul>
<p>
Sample usage (<a href="../../Array.html">Array</a>):
</p>
<pre>
  grouped_options = [
   ['North America',
     [['United States','US'],'Canada']],
   ['Europe',
     ['Denmark','Germany','France']]
  ]
  grouped_options_for_select(grouped_options)
</pre>
<p>
Sample usage (<a href="../../Hash.html">Hash</a>):
</p>
<pre>
  grouped_options = {
   'North America' =&gt; [['United States','US'], 'Canada'],
   'Europe' =&gt; ['Denmark','Germany','France']
  }
  grouped_options_for_select(grouped_options)
</pre>
<p>
Possible output:
</p>
<pre>
  &lt;optgroup label=&quot;Europe&quot;&gt;
    &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;
    &lt;option value=&quot;Germany&quot;&gt;Germany&lt;/option&gt;
    &lt;option value=&quot;France&quot;&gt;France&lt;/option&gt;
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;North America&quot;&gt;
    &lt;option value=&quot;US&quot;&gt;United States&lt;/option&gt;
    &lt;option value=&quot;Canada&quot;&gt;Canada&lt;/option&gt;
  &lt;/optgroup&gt;
</pre>
<p>
<b>Note:</b> Only the <tt>&lt;optgroup&gt;</tt> and <tt>&lt;option&gt;</tt>
tags are returned, so you still have to wrap the output in an appropriate
<tt>&lt;select&gt;</tt> tag.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000442_source')" id="l_M000442_source">show</a>
                        
                    </p>
                    <div id="M000442_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 473</span>
473:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grouped_options_for_select</span>(<span class="ruby-identifier">grouped_options</span>, <span class="ruby-identifier">selected_key</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">prompt</span> = <span class="ruby-keyword kw">nil</span>)
474:         <span class="ruby-identifier">body</span> = <span class="ruby-value str">''</span>
475:         <span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">:option</span>, <span class="ruby-identifier">prompt</span>, { <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }, <span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prompt</span>
476: 
477:         <span class="ruby-identifier">grouped_options</span> = <span class="ruby-identifier">grouped_options</span>.<span class="ruby-identifier">sort</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">grouped_options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
478: 
479:         <span class="ruby-identifier">grouped_options</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
480:           <span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">:optgroup</span>, <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">group</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">selected_key</span>), <span class="ruby-identifier">:label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">group</span>[<span class="ruby-value">0</span>])
481:         <span class="ruby-keyword kw">end</span>
482: 
483:         <span class="ruby-identifier">body</span>.<span class="ruby-identifier">html_safe</span>
484:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000441">
                    
                    <a name="M000441"></a><b>option_groups_from_collection_for_select</b>(collection, group_method, group_label_method, option_key_method, option_value_method, selected_key = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like <tt><a
href="FormOptionsHelper.html#M000440">options_from_collection_for_select</a></tt>,
but groups them by <tt>&lt;optgroup&gt;</tt> tags based on the object
relationships of the arguments.
</p>
<p>
Parameters:
</p>
<ul>
<li><tt>collection</tt> - An array of objects representing the
<tt>&lt;optgroup&gt;</tt> tags.

</li>
<li><tt>group_method</tt> - The name of a method which, when called on a member
of <tt>collection</tt>, returns an array of child objects representing the
<tt>&lt;option&gt;</tt> tags.

</li>
<li>group_label_method+ - The name of a method which, when called on a member
of <tt>collection</tt>, returns a string to be used as the <tt>label</tt>
attribute for its <tt>&lt;optgroup&gt;</tt> tag.

</li>
<li><tt>option_key_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the <tt>value</tt> attribute for its <tt>&lt;option&gt;</tt> tag.

</li>
<li><tt>option_value_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the contents of its <tt>&lt;option&gt;</tt> tag.

</li>
<li><tt>selected_key</tt> - A value equal to the <tt>value</tt> attribute for
one of the <tt>&lt;option&gt;</tt> tags, which will have the
<tt>selected</tt> attribute set. Corresponds to the return value of one of
the calls to <tt>option_key_method</tt>. If <tt>nil</tt>, no selection is
made. Can also be a hash if disabled values are to be specified.

</li>
</ul>
<p>
Example object structure for use with this method:
</p>
<pre>
  class Continent &lt; ActiveRecord::Base
    has_many :countries
    # attribs: id, name
  end
  class Country &lt; ActiveRecord::Base
    belongs_to :continent
    # attribs: id, name, continent_id
  end
</pre>
<p>
Sample usage:
</p>
<pre>
  option_groups_from_collection_for_select(@continents, :countries, :name, :id, :name, 3)
</pre>
<p>
Possible output:
</p>
<pre>
  &lt;optgroup label=&quot;Africa&quot;&gt;
    &lt;option value=&quot;1&quot;&gt;Egypt&lt;/option&gt;
    &lt;option value=&quot;4&quot;&gt;Rwanda&lt;/option&gt;
    ...
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;Asia&quot;&gt;
    &lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;China&lt;/option&gt;
    &lt;option value=&quot;12&quot;&gt;India&lt;/option&gt;
    &lt;option value=&quot;5&quot;&gt;Japan&lt;/option&gt;
    ...
  &lt;/optgroup&gt;
</pre>
<p>
<b>Note:</b> Only the <tt>&lt;optgroup&gt;</tt> and <tt>&lt;option&gt;</tt>
tags are returned, so you still have to wrap the output in an appropriate
<tt>&lt;select&gt;</tt> tag.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000441_source')" id="l_M000441_source">show</a>
                        
                    </p>
                    <div id="M000441_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 421</span>
421:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_groups_from_collection_for_select</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">group_method</span>, <span class="ruby-identifier">group_label_method</span>, <span class="ruby-identifier">option_key_method</span>, <span class="ruby-identifier">option_value_method</span>, <span class="ruby-identifier">selected_key</span> = <span class="ruby-keyword kw">nil</span>)
422:         <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
423:           <span class="ruby-identifier">group_label_string</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;group.#{group_label_method}&quot;</span>)
424:           <span class="ruby-node">&quot;&lt;optgroup label=\&quot;#{ERB::Util.html_escape(group_label_string)}\&quot;&gt;&quot;</span> <span class="ruby-operator">+</span>
425:             <span class="ruby-identifier">options_from_collection_for_select</span>(<span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;group.#{group_method}&quot;</span>), <span class="ruby-identifier">option_key_method</span>, <span class="ruby-identifier">option_value_method</span>, <span class="ruby-identifier">selected_key</span>) <span class="ruby-operator">+</span>
426:             <span class="ruby-value str">'&lt;/optgroup&gt;'</span>
427:         <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>.<span class="ruby-identifier">html_safe</span>
428:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000438">
                    
                    <a name="M000438"></a><b>options_for_select</b>(container, selected = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Accepts a container (hash, array, enumerable, your type) and returns a
string of option tags. Given a container where the elements respond to
first and last (such as a two-element array), the &#8220;lasts&#8221; serve
as option values and the &#8220;firsts&#8221; as option text. Hashes are
turned into this form automatically, so the keys become
&#8220;firsts&#8221; and values become lasts. If <tt>selected</tt> is
specified, the matching &#8220;last&#8221; or element will get the selected
option-tag. <tt>selected</tt> may also be an array of values to be selected
when using a multiple select.
</p>
<p>
Examples (call, result):
</p>
<pre>
  options_for_select([[&quot;Dollar&quot;, &quot;$&quot;], [&quot;Kroner&quot;, &quot;DKK&quot;]])
    &lt;option value=&quot;$&quot;&gt;Dollar&lt;/option&gt;\n&lt;option value=&quot;DKK&quot;&gt;Kroner&lt;/option&gt;

  options_for_select([ &quot;VISA&quot;, &quot;MasterCard&quot; ], &quot;MasterCard&quot;)
    &lt;option&gt;VISA&lt;/option&gt;\n&lt;option selected=&quot;selected&quot;&gt;MasterCard&lt;/option&gt;

  options_for_select({ &quot;Basic&quot; =&gt; &quot;$20&quot;, &quot;Plus&quot; =&gt; &quot;$40&quot; }, &quot;$40&quot;)
    &lt;option value=&quot;$20&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;$40&quot; selected=&quot;selected&quot;&gt;Plus&lt;/option&gt;

  options_for_select([ &quot;VISA&quot;, &quot;MasterCard&quot;, &quot;Discover&quot; ], [&quot;VISA&quot;, &quot;Discover&quot;])
    &lt;option selected=&quot;selected&quot;&gt;VISA&lt;/option&gt;\n&lt;option&gt;MasterCard&lt;/option&gt;\n&lt;option selected=&quot;selected&quot;&gt;Discover&lt;/option&gt;
</pre>
<p>
You can optionally provide html attributes as the last element of the
array.
</p>
<p>
Examples:
</p>
<pre>
  options_for_select([ &quot;Denmark&quot;, [&quot;USA&quot;, {:class =&gt; 'bold'}], &quot;Sweden&quot; ], [&quot;USA&quot;, &quot;Sweden&quot;])
    &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;\n&lt;option value=&quot;USA&quot; class=&quot;bold&quot; selected=&quot;selected&quot;&gt;USA&lt;/option&gt;\n&lt;option value=&quot;Sweden&quot; selected=&quot;selected&quot;&gt;Sweden&lt;/option&gt;

  options_for_select([[&quot;Dollar&quot;, &quot;$&quot;, {:class =&gt; &quot;bold&quot;}], [&quot;Kroner&quot;, &quot;DKK&quot;, {:onclick =&gt; &quot;alert('HI');&quot;}]])
    &lt;option value=&quot;$&quot; class=&quot;bold&quot;&gt;Dollar&lt;/option&gt;\n&lt;option value=&quot;DKK&quot; onclick=&quot;alert('HI');&quot;&gt;Kroner&lt;/option&gt;
</pre>
<p>
If you wish to specify disabled option tags, set <tt>selected</tt> to be a
hash, with <tt>:disabled</tt> being either a value or array of values to be
disabled. In this case, you can use <tt>:selected</tt> to specify selected
option tags.
</p>
<p>
Examples:
</p>
<pre>
  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :disabled =&gt; &quot;Super Platinum&quot;)
    &lt;option value=&quot;Free&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;

  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :disabled =&gt; [&quot;Advanced&quot;, &quot;Super Platinum&quot;])
    &lt;option value=&quot;Free&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot; disabled=&quot;disabled&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;

  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :selected =&gt; &quot;Free&quot;, :disabled =&gt; &quot;Super Platinum&quot;)
    &lt;option value=&quot;Free&quot; selected=&quot;selected&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;
</pre>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML select tag.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000438_source')" id="l_M000438_source">show</a>
                        
                    </p>
                    <div id="M000438_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 322</span>
322:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">selected</span> = <span class="ruby-keyword kw">nil</span>)
323:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">container</span>
324: 
325:         <span class="ruby-identifier">selected</span>, <span class="ruby-identifier">disabled</span> = <span class="ruby-identifier">extract_selected_and_disabled</span>(<span class="ruby-identifier">selected</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">r</span> <span class="ruby-operator">|</span>
326:            <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">r</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">to_s</span> }
327:         <span class="ruby-keyword kw">end</span>
328: 
329:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
330:           <span class="ruby-identifier">html_attributes</span> = <span class="ruby-identifier">option_html_attributes</span>(<span class="ruby-identifier">element</span>)
331:           <span class="ruby-identifier">text</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">option_text_and_value</span>(<span class="ruby-identifier">element</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">to_s</span> }
332:           <span class="ruby-identifier">selected_attribute</span> = <span class="ruby-value str">' selected=&quot;selected&quot;'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">option_value_selected?</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">selected</span>)
333:           <span class="ruby-identifier">disabled_attribute</span> = <span class="ruby-value str">' disabled=&quot;disabled&quot;'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">disabled</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">option_value_selected?</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">disabled</span>)
334:           <span class="ruby-node">%(&lt;option value=&quot;#{ERB::Util.html_escape(value)}&quot;#{selected_attribute}#{disabled_attribute}#{html_attributes}&gt;#{ERB::Util.html_escape(text)}&lt;/option&gt;)</span>
335:         <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">html_safe</span>
336: 
337:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000440">
                    
                    <a name="M000440"></a><b>options_from_collection_for_select</b>(collection, value_method, text_method, selected = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string of option tags that have been compiled by iterating over
the <tt>collection</tt> and assigning the the result of a call to the
<tt>value_method</tt> as the option value and the <tt>text_method</tt> as
the option text. Example:
</p>
<pre>
  options_from_collection_for_select(@people, 'id', 'name')
</pre>
<p>
This will output the same HTML as if you did this:
</p>
<pre>
  &lt;option value=&quot;#{person.id}&quot;&gt;#{person.name}&lt;/option&gt;
</pre>
<p>
This is more often than not used inside a select_tag like this example:
</p>
<pre>
  select_tag 'person', options_from_collection_for_select(@people, 'id', 'name')
</pre>
<p>
If <tt>selected</tt> is specified as a value or array of values, the
element(s) returning a match on <tt>value_method</tt> will be selected
option tag(s).
</p>
<p>
If <tt>selected</tt> is specified as a Proc, those members of the
collection that return true for the anonymous function are the selected
values.
</p>
<p>
<tt>selected</tt> can also be a hash, specifying both <tt>:selected</tt>
and/or <tt>:disabled</tt> values as required.
</p>
<p>
Be sure to specify the same class as the <tt>value_method</tt> when
specifying selected or disabled options. Failure to do this will produce
undesired results. Example:
</p>
<pre>
  options_from_collection_for_select(@people, 'id', 'name', '1')
</pre>
<p>
Will not select a person with the id of 1 because 1 (an <a
href="../../Integer.html">Integer</a>) is not the same as &#8216;1&#8217;
(a string)
</p>
<pre>
  options_from_collection_for_select(@people, 'id', 'name', 1)
</pre>
<p>
should produce the desired results.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000440_source')" id="l_M000440_source">show</a>
                        
                    </p>
                    <div id="M000440_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 363</span>
363:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_from_collection_for_select</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">text_method</span>, <span class="ruby-identifier">selected</span> = <span class="ruby-keyword kw">nil</span>)
364:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
365:           [<span class="ruby-identifier">element</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">text_method</span>), <span class="ruby-identifier">element</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">value_method</span>)]
366:         <span class="ruby-keyword kw">end</span>
367:         <span class="ruby-identifier">selected</span>, <span class="ruby-identifier">disabled</span> = <span class="ruby-identifier">extract_selected_and_disabled</span>(<span class="ruby-identifier">selected</span>)
368:         <span class="ruby-identifier">select_deselect</span> = {}
369:         <span class="ruby-identifier">select_deselect</span>[<span class="ruby-identifier">:selected</span>] = <span class="ruby-identifier">extract_values_from_collection</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">selected</span>)
370:         <span class="ruby-identifier">select_deselect</span>[<span class="ruby-identifier">:disabled</span>] = <span class="ruby-identifier">extract_values_from_collection</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">disabled</span>)
371: 
372:         <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">select_deselect</span>)
373:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000423">
                    
                    <a name="M000423"></a><b>select</b>(object, method, choices, options = {}, html_options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Create a select tag and a series of contained option tags for the provided
object and method. The option currently held by the object will be
selected, provided that the object is available.
</p>
<p>
There are two possible formats for the choices parameter, corresponding to
other helpers&#8217; output:
</p>
<pre>
  * A flat collection: see options_for_select
  * A nested collection: see grouped_options_for_select
</pre>
<p>
Example with @post.person_id => 1:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.all.collect {|p| [ p.name, p.id ] }, { :include_blank =&gt; true })
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;&lt;/option&gt;
    &lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
This can be used to provide a default set of options in the standard way:
before rendering the create form, a new model instance is assigned the
default options and bound to @model_name. Usually this model is not saved
to the database. Instead, a second model object is created when the create
request is received. This allows the user to submit a form page more than
once with the expected results of creating multiple records. In addition,
this allows a single partial to be used to generate form inputs for both
edit and create forms.
</p>
<p>
By default, <tt>post.person_id</tt> is the selected option. Specify
<tt>:selected =&gt; value</tt> to use a different selection or
<tt>:selected =&gt; nil</tt> to leave all options unselected. Similarly,
you can specify values to be disabled in the option tags by specifying the
<tt>:disabled</tt> option. This can either be a single value or an array of
values to be disabled.
</p>
<h4>Gotcha</h4>
<p>
The HTML specification says when <tt>multiple</tt> parameter passed to
select and all options got deselected web browsers do not send any value to
server. Unfortunately this introduces a gotcha: if an <tt>User</tt> model
has many <tt>roles</tt> and have <tt>role_ids</tt> accessor, and in the
form that edits roles of the user the user deselects all roles from
<tt>role_ids</tt> multiple select box, no <tt>role_ids</tt> parameter is
sent. So, any mass-assignment idiom like
</p>
<pre>
  @user.update_attributes(params[:user])
</pre>
<p>
wouldn&#8217;t update roles.
</p>
<p>
To prevent this the helper generates an auxiliary hidden field before every
multiple select. The hidden field has the same name as multiple select and
blank value.
</p>
<p>
This way, the client either sends only the hidden field (representing the
deselected multiple select box), or both fields. Since the HTML
specification says key/value pairs have to be sent in the same order they
appear in the form, and parameters extraction gets the last occurrence of
any repeated key in the query string, that works for ordinary forms.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000423_source')" id="l_M000423_source">show</a>
                        
                    </p>
                    <div id="M000423_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 156</span>
156:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">choices</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})
157:         <span class="ruby-constant">InstanceTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:object</span>)).<span class="ruby-identifier">to_select_tag</span>(<span class="ruby-identifier">choices</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)
158:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000443">
                    
                    <a name="M000443"></a><b>time_zone_options_for_select</b>(selected = nil, priority_zones = nil, model = ::ActiveSupport::TimeZone)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string of option tags for pretty much any time zone in the world.
Supply a <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a> name
as <tt>selected</tt> to have it marked as the selected option tag. You can
also supply an array of <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>
objects as <tt>priority_zones</tt>, so that they will be listed above the
rest of the (long) list. (You can use <a
href="../../ActiveSupport/TimeZone.html#M003080">ActiveSupport::TimeZone.us_zones</a>
as a convenience for obtaining a list of the US time zones, or a Regexp to
select the zones of your choice)
</p>
<p>
The <tt>selected</tt> parameter must be either <tt>nil</tt>, or a string
that names a <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>.
</p>
<p>
By default, <tt>model</tt> is the <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>
constant (which can be obtained in Active Record as a value object). The
only requirement is that the <tt>model</tt> parameter be an object that
responds to <tt>all</tt>, and returns an array of objects that represent
time zones.
</p>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML select tag.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000443_source')" id="l_M000443_source">show</a>
                        
                    </p>
                    <div id="M000443_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 504</span>
504:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time_zone_options_for_select</span>(<span class="ruby-identifier">selected</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">priority_zones</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">model</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>)
505:         <span class="ruby-identifier">zone_options</span> = <span class="ruby-value str">&quot;&quot;</span>
506: 
507:         <span class="ruby-identifier">zones</span> = <span class="ruby-identifier">model</span>.<span class="ruby-identifier">all</span>
508:         <span class="ruby-identifier">convert_zones</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">list</span><span class="ruby-operator">|</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">z</span><span class="ruby-operator">|</span> [ <span class="ruby-identifier">z</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">z</span>.<span class="ruby-identifier">name</span> ] } }
509: 
510:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">priority_zones</span>
511:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">priority_zones</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Regexp</span>)
512:             <span class="ruby-identifier">priority_zones</span> = <span class="ruby-identifier">model</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">find_all</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">z</span><span class="ruby-operator">|</span> <span class="ruby-identifier">z</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">priority_zones</span>}
513:           <span class="ruby-keyword kw">end</span>
514:           <span class="ruby-identifier">zone_options</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">convert_zones</span>[<span class="ruby-identifier">priority_zones</span>], <span class="ruby-identifier">selected</span>)
515:           <span class="ruby-identifier">zone_options</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;option value=\&quot;\&quot; disabled=\&quot;disabled\&quot;&gt;-------------&lt;/option&gt;\n&quot;</span>
516: 
517:           <span class="ruby-identifier">zones</span> = <span class="ruby-identifier">zones</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">z</span><span class="ruby-operator">|</span> <span class="ruby-identifier">priority_zones</span>.<span class="ruby-identifier">include?</span>( <span class="ruby-identifier">z</span> ) }
518:         <span class="ruby-keyword kw">end</span>
519: 
520:         <span class="ruby-identifier">zone_options</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">convert_zones</span>[<span class="ruby-identifier">zones</span>], <span class="ruby-identifier">selected</span>)
521:         <span class="ruby-identifier">zone_options</span>.<span class="ruby-identifier">html_safe</span>
522:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000435">
                    
                    <a name="M000435"></a><b>time_zone_select</b>(object, method, priority_zones = nil, options = {}, html_options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Return select and option tags for the given object and method, using <a
href="FormOptionsHelper.html#M000443">time_zone_options_for_select</a> to
generate the list of option tags.
</p>
<p>
In addition to the <tt>:include_blank</tt> option documented above, this
method also supports a <tt>:model</tt> option, which defaults to <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>. This
may be used by users to specify a different time zone model object. (See
<tt><a
href="FormOptionsHelper.html#M000443">time_zone_options_for_select</a></tt>
for more information.)
</p>
<p>
You can also supply an array of <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>
objects as <tt>priority_zones</tt>, so that they will be listed above the
rest of the (long) list. (You can use <a
href="../../ActiveSupport/TimeZone.html#M003080">ActiveSupport::TimeZone.us_zones</a>
as a convenience for obtaining a list of the US time zones, or a Regexp to
select the zones of your choice)
</p>
<p>
Finally, this method supports a <tt>:default</tt> option, which selects a
default <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a> if the
object&#8217;s time zone is <tt>nil</tt>.
</p>
<p>
Examples:
</p>
<pre>
  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, nil, :include_blank =&gt; true)

  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, nil, :default =&gt; &quot;Pacific Time (US &amp; Canada)&quot; )

  time_zone_select( &quot;user&quot;, 'time_zone', ActiveSupport::TimeZone.us_zones, :default =&gt; &quot;Pacific Time (US &amp; Canada)&quot;)

  time_zone_select( &quot;user&quot;, 'time_zone', [ ActiveSupport::TimeZone['Alaska'], ActiveSupport::TimeZone['Hawaii'] ])

  time_zone_select( &quot;user&quot;, 'time_zone', /Australia/)

  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, ActiveSupport::TimeZone.all.sort, :model =&gt; ActiveSupport::TimeZone)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000435_source')" id="l_M000435_source">show</a>
                        
                    </p>
                    <div id="M000435_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 276</span>
276:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time_zone_select</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">priority_zones</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})
277:         <span class="ruby-constant">InstanceTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-keyword kw">self</span>,  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:object</span>)).<span class="ruby-identifier">to_time_zone_select_tag</span>(<span class="ruby-identifier">priority_zones</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)
278:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000447">
                    
                    <a name="M000447"></a><b>extract_selected_and_disabled</b>(selected)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000447_source')" id="l_M000447_source">show</a>
                        
                    </p>
                    <div id="M000447_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 555</span>
555:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_selected_and_disabled</span>(<span class="ruby-identifier">selected</span>)
556:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Proc</span>)
557:             [ <span class="ruby-identifier">selected</span>, <span class="ruby-keyword kw">nil</span> ]
558:           <span class="ruby-keyword kw">else</span>
559:             <span class="ruby-identifier">selected</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">selected</span>)
560:             <span class="ruby-identifier">options</span> = <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">extract_options!</span>.<span class="ruby-identifier">symbolize_keys</span>
561:             [ <span class="ruby-identifier">options</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">:selected</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:selected</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">selected</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:disabled</span>] ]
562:           <span class="ruby-keyword kw">end</span>
563:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000448">
                    
                    <a name="M000448"></a><b>extract_values_from_collection</b>(collection, value_method, selected)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000448_source')" id="l_M000448_source">show</a>
                        
                    </p>
                    <div id="M000448_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 565</span>
565:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_values_from_collection</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">selected</span>)
566:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Proc</span>)
567:             <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
568:               <span class="ruby-identifier">element</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">value_method</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">element</span>)
569:             <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">compact</span>
570:           <span class="ruby-keyword kw">else</span>
571:             <span class="ruby-identifier">selected</span>
572:           <span class="ruby-keyword kw">end</span>
573:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000444">
                    
                    <a name="M000444"></a><b>option_html_attributes</b>(element)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000444_source')" id="l_M000444_source">show</a>
                        
                    </p>
                    <div id="M000444_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 525</span>
525:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_html_attributes</span>(<span class="ruby-identifier">element</span>)
526:           <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">element</span>
527:           <span class="ruby-identifier">html_attributes</span> = []
528:           <span class="ruby-identifier">element</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">e</span> }.<span class="ruby-identifier">reduce</span>({}, <span class="ruby-identifier">:merge</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
529:             <span class="ruby-identifier">html_attributes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{k}=\&quot;#{ERB::Util.html_escape(v.to_s)}\&quot;&quot;</span>
530:           <span class="ruby-keyword kw">end</span>
531:           <span class="ruby-identifier">html_attributes</span>.<span class="ruby-identifier">join</span>
532:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000445">
                    
                    <a name="M000445"></a><b>option_text_and_value</b>(option)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000445_source')" id="l_M000445_source">show</a>
                        
                    </p>
                    <div id="M000445_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 534</span>
534:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_text_and_value</span>(<span class="ruby-identifier">option</span>)
535:           <span class="ruby-comment cmt"># Options are [text, value] pairs or strings used for both.</span>
536:           <span class="ruby-keyword kw">case</span>
537:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">option</span>
538:             <span class="ruby-identifier">option</span> = <span class="ruby-identifier">option</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">e</span> }
539:             [<span class="ruby-identifier">option</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">option</span>.<span class="ruby-identifier">last</span>]
540:           <span class="ruby-keyword kw">when</span> <span class="ruby-operator">!</span><span class="ruby-identifier">option</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">option</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:first</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">option</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:last</span>)
541:             [<span class="ruby-identifier">option</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">option</span>.<span class="ruby-identifier">last</span>]
542:           <span class="ruby-keyword kw">else</span>
543:             [<span class="ruby-identifier">option</span>, <span class="ruby-identifier">option</span>]
544:           <span class="ruby-keyword kw">end</span>
545:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000446">
                    
                    <a name="M000446"></a><b>option_value_selected?</b>(value, selected)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000446_source')" id="l_M000446_source">show</a>
                        
                    </p>
                    <div id="M000446_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File actionpack-3.2.0/lib/action_view/helpers/form_options_helper.rb, line 547</span>
547:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_value_selected?</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">selected</span>)
548:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:include?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">selected</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
549:             <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">value</span>
550:           <span class="ruby-keyword kw">else</span>
551:             <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">selected</span>
552:           <span class="ruby-keyword kw">end</span>
553:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    