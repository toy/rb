<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActiveRecord::AttributeAssignment</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            ActiveRecord::AttributeAssignment 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/activerecord-3_2_0/lib/active_record/attribute_assignment_rb.html">activerecord-3.2.0/lib/active_record/attribute_assignment.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000894">assign_attributes</a>,</li>
                
                <li><a href="#M000897">assign_multiparameter_attributes</a>,</li>
                
                <li><a href="#M000893">attributes=</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000899">execute_callstack_for_multiparameter_attributes</a>,</li>
                
                <li><a href="#M000905">extract_callstack_for_multiparameter_attributes</a>,</li>
                
                <li><a href="#M000904">extract_max_param_for_multiparameter_attributes</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000907">find_parameter_position</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000898">instantiate_time_object</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000895">mass_assignment_options</a>,</li>
                
                <li><a href="#M000896">mass_assignment_role</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000902">read_date_parameter_value</a>,</li>
                
                <li><a href="#M000903">read_other_parameter_value</a>,</li>
                
                <li><a href="#M000901">read_time_parameter_value</a>,</li>
                
                <li><a href="#M000900">read_value_from_parameter</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000906">type_cast_attribute_value</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../ActiveResource/CustomMethods.html">ActiveResource::CustomMethods</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="AttributeAssignment/ClassMethods.html">ActiveRecord::AttributeAssignment::ClassMethods</a></li>
        
    </ul>
    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000894">
                    
                    <a name="M000894"></a><b>assign_attributes</b>(new_attributes, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Allows you to set all the attributes for a particular mass-assignment
security role by passing in a hash of attributes with keys matching the
attribute names (which again matches the column names) and the role name
using the :as option.
</p>
<p>
To bypass mass-assignment security you can use the :without_protection =>
true option.
</p>
<pre>
  class User &lt; ActiveRecord::Base
    attr_accessible :name
    attr_accessible :name, :is_admin, :as =&gt; :admin
  end

  user = User.new
  user.assign_attributes({ :name =&gt; 'Josh', :is_admin =&gt; true })
  user.name       # =&gt; &quot;Josh&quot;
  user.is_admin?  # =&gt; false

  user = User.new
  user.assign_attributes({ :name =&gt; 'Josh', :is_admin =&gt; true }, :as =&gt; :admin)
  user.name       # =&gt; &quot;Josh&quot;
  user.is_admin?  # =&gt; true

  user = User.new
  user.assign_attributes({ :name =&gt; 'Josh', :is_admin =&gt; true }, :without_protection =&gt; true)
  user.name       # =&gt; &quot;Josh&quot;
  user.is_admin?  # =&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000894_source')" id="l_M000894_source">show</a>
                        
                    </p>
                    <div id="M000894_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 66</span>
66:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assign_attributes</span>(<span class="ruby-identifier">new_attributes</span>, <span class="ruby-identifier">options</span> = {})
67:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_attributes</span>
68: 
69:       <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">stringify_keys</span>
70:       <span class="ruby-identifier">multi_parameter_attributes</span> = []
71:       <span class="ruby-identifier">nested_parameter_attributes</span> = []
72:       <span class="ruby-ivar">@mass_assignment_options</span> = <span class="ruby-identifier">options</span>
73: 
74:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:without_protection</span>]
75:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">sanitize_for_mass_assignment</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">mass_assignment_role</span>)
76:       <span class="ruby-keyword kw">end</span>
77: 
78:       <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
79:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;(&quot;</span>)
80:           <span class="ruby-identifier">multi_parameter_attributes</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span> ]
81:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{k}=&quot;</span>)
82:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
83:             <span class="ruby-identifier">nested_parameter_attributes</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span> ]
84:           <span class="ruby-keyword kw">else</span>
85:             <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{k}=&quot;</span>, <span class="ruby-identifier">v</span>)
86:           <span class="ruby-keyword kw">end</span>
87:         <span class="ruby-keyword kw">else</span>
88:           <span class="ruby-identifier">raise</span>(<span class="ruby-constant">UnknownAttributeError</span>, <span class="ruby-node">&quot;unknown attribute: #{k}&quot;</span>)
89:         <span class="ruby-keyword kw">end</span>
90:       <span class="ruby-keyword kw">end</span>
91: 
92:       <span class="ruby-comment cmt"># assign any deferred nested attributes after the base attributes have been set</span>
93:       <span class="ruby-identifier">nested_parameter_attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
94:         <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{k}=&quot;</span>, <span class="ruby-identifier">v</span>)
95:       <span class="ruby-keyword kw">end</span>
96: 
97:       <span class="ruby-ivar">@mass_assignment_options</span> = <span class="ruby-keyword kw">nil</span>
98:       <span class="ruby-identifier">assign_multiparameter_attributes</span>(<span class="ruby-identifier">multi_parameter_attributes</span>)
99:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000893">
                    
                    <a name="M000893"></a><b>attributes=</b>(new_attributes)
                    
                </div>
                
                <div class="description">
                  <p>
Allows you to set all the attributes at once by passing in a hash with keys
matching the attribute names (which again matches the column names).
</p>
<p>
If any attributes are protected by either <tt>attr_protected</tt> or
<tt>attr_accessible</tt> then only settable attributes will be assigned.
</p>
<pre>
  class User &lt; ActiveRecord::Base
    attr_protected :is_admin
  end

  user = User.new
  user.attributes = { :username =&gt; 'Phusion', :is_admin =&gt; true }
  user.username   # =&gt; &quot;Phusion&quot;
  user.is_admin?  # =&gt; false
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000893_source')" id="l_M000893_source">show</a>
                        
                    </p>
                    <div id="M000893_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 33</span>
33:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes=</span>(<span class="ruby-identifier">new_attributes</span>)
34:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
35: 
36:       <span class="ruby-identifier">assign_attributes</span>(<span class="ruby-identifier">new_attributes</span>)
37:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M000895">
                    
                    <a name="M000895"></a><b>mass_assignment_options</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000895_source')" id="l_M000895_source">show</a>
                        
                    </p>
                    <div id="M000895_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 103</span>
103:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mass_assignment_options</span>
104:       <span class="ruby-ivar">@mass_assignment_options</span> <span class="ruby-operator">||=</span> {}
105:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000896">
                    
                    <a name="M000896"></a><b>mass_assignment_role</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000896_source')" id="l_M000896_source">show</a>
                        
                    </p>
                    <div id="M000896_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 107</span>
107:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mass_assignment_role</span>
108:       <span class="ruby-identifier">mass_assignment_options</span>[<span class="ruby-identifier">:as</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">:default</span>
109:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000897">
                    
                    <a name="M000897"></a><b>assign_multiparameter_attributes</b>(pairs)
                    
                </div>
                
                <div class="description">
                  <p>
Instantiates objects for all attribute classes that needs more than one
constructor parameter. This is done by calling new on the column type or
aggregation type (through composed_of) object with these parameters. So
having the pairs written_on(1) = &#8220;2004&#8221;, written_on(2) =
&#8220;6&#8221;, written_on(3) = &#8220;24&#8221;, will instantiate
written_on (a date type) with Date.new(&#8220;2004&#8221;, &#8220;6&#8221;,
&#8220;24&#8221;). You can also specify a typecast character in the
parentheses to have the parameters typecasted before they&#8217;re used in
the constructor. Use i for Fixnum, f for <a href="../Float.html">Float</a>,
s for <a href="../String.html">String</a>, and a for <a
href="../Array.html">Array</a>. If all the values for a given attribute are
empty, the attribute will be set to nil.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000897_source')" id="l_M000897_source">show</a>
                        
                    </p>
                    <div id="M000897_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 120</span>
120:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assign_multiparameter_attributes</span>(<span class="ruby-identifier">pairs</span>)
121:       <span class="ruby-identifier">execute_callstack_for_multiparameter_attributes</span>(
122:         <span class="ruby-identifier">extract_callstack_for_multiparameter_attributes</span>(<span class="ruby-identifier">pairs</span>)
123:       )
124:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000899">
                    
                    <a name="M000899"></a><b>execute_callstack_for_multiparameter_attributes</b>(callstack)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000899_source')" id="l_M000899_source">show</a>
                        
                    </p>
                    <div id="M000899_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 134</span>
134:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execute_callstack_for_multiparameter_attributes</span>(<span class="ruby-identifier">callstack</span>)
135:       <span class="ruby-identifier">errors</span> = []
136:       <span class="ruby-identifier">callstack</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_with_empty_parameters</span><span class="ruby-operator">|</span>
137:         <span class="ruby-keyword kw">begin</span>
138:           <span class="ruby-identifier">send</span>(<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-identifier">read_value_from_parameter</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_with_empty_parameters</span>))
139:         <span class="ruby-keyword kw">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
140:           <span class="ruby-identifier">errors</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">AttributeAssignmentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;error on assignment #{values_with_empty_parameters.values.inspect} to #{name}&quot;</span>, <span class="ruby-identifier">ex</span>, <span class="ruby-identifier">name</span>)
141:         <span class="ruby-keyword kw">end</span>
142:       <span class="ruby-keyword kw">end</span>
143:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">empty?</span>
144:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">MultiparameterAssignmentErrors</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">errors</span>), <span class="ruby-node">&quot;#{errors.size} error(s) on assignment of multiparameter attributes&quot;</span>
145:       <span class="ruby-keyword kw">end</span>
146:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000905">
                    
                    <a name="M000905"></a><b>extract_callstack_for_multiparameter_attributes</b>(pairs)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000905_source')" id="l_M000905_source">show</a>
                        
                    </p>
                    <div id="M000905_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 197</span>
197:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_callstack_for_multiparameter_attributes</span>(<span class="ruby-identifier">pairs</span>)
198:       <span class="ruby-identifier">attributes</span> = { }
199: 
200:       <span class="ruby-identifier">pairs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span><span class="ruby-operator">|</span>
201:         <span class="ruby-identifier">multiparameter_name</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">pair</span>
202:         <span class="ruby-identifier">attribute_name</span> = <span class="ruby-identifier">multiparameter_name</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;(&quot;</span>).<span class="ruby-identifier">first</span>
203:         <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">attribute_name</span>] = {} <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">attribute_name</span>)
204: 
205:         <span class="ruby-identifier">parameter_value</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">type_cast_attribute_value</span>(<span class="ruby-identifier">multiparameter_name</span>, <span class="ruby-identifier">value</span>)
206:         <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">attribute_name</span>][<span class="ruby-identifier">find_parameter_position</span>(<span class="ruby-identifier">multiparameter_name</span>)] <span class="ruby-operator">||=</span> <span class="ruby-identifier">parameter_value</span>
207:       <span class="ruby-keyword kw">end</span>
208: 
209:       <span class="ruby-identifier">attributes</span>
210:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000904">
                    
                    <a name="M000904"></a><b>extract_max_param_for_multiparameter_attributes</b>(values_hash_from_param, upper_cap = 100)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000904_source')" id="l_M000904_source">show</a>
                        
                    </p>
                    <div id="M000904_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 193</span>
193:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_max_param_for_multiparameter_attributes</span>(<span class="ruby-identifier">values_hash_from_param</span>, <span class="ruby-identifier">upper_cap</span> = <span class="ruby-value">100</span>)
194:       [<span class="ruby-identifier">values_hash_from_param</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">max</span>,<span class="ruby-identifier">upper_cap</span>].<span class="ruby-identifier">min</span>
195:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000907">
                    
                    <a name="M000907"></a><b>find_parameter_position</b>(multiparameter_name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000907_source')" id="l_M000907_source">show</a>
                        
                    </p>
                    <div id="M000907_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 216</span>
216:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_parameter_position</span>(<span class="ruby-identifier">multiparameter_name</span>)
217:       <span class="ruby-identifier">multiparameter_name</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\(([0-9]*).*\)/</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_i</span>
218:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000898">
                    
                    <a name="M000898"></a><b>instantiate_time_object</b>(name, values)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000898_source')" id="l_M000898_source">show</a>
                        
                    </p>
                    <div id="M000898_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 126</span>
126:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">instantiate_time_object</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">values</span>)
127:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:create_time_zone_conversion_attribute?</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">name</span>))
128:         <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">local</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
129:       <span class="ruby-keyword kw">else</span>
130:         <span class="ruby-constant">Time</span>.<span class="ruby-identifier">time_with_datetime_fallback</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">default_timezone</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
131:       <span class="ruby-keyword kw">end</span>
132:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000902">
                    
                    <a name="M000902"></a><b>read_date_parameter_value</b>(name, values_hash_from_param)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000902_source')" id="l_M000902_source">show</a>
                        
                    </p>
                    <div id="M000902_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 174</span>
174:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_date_parameter_value</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_hash_from_param</span>)
175:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>).<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">position</span><span class="ruby-operator">|</span> <span class="ruby-identifier">values_hash_from_param</span>[<span class="ruby-identifier">position</span>].<span class="ruby-identifier">blank?</span>}
176:       <span class="ruby-identifier">set_values</span> = [<span class="ruby-identifier">values_hash_from_param</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">values_hash_from_param</span>[<span class="ruby-value">2</span>], <span class="ruby-identifier">values_hash_from_param</span>[<span class="ruby-value">3</span>]]
177:       <span class="ruby-keyword kw">begin</span>
178:         <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">set_values</span>)
179:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-comment cmt"># if Date.new raises an exception on an invalid date</span>
180:         <span class="ruby-identifier">instantiate_time_object</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">set_values</span>).<span class="ruby-identifier">to_date</span> <span class="ruby-comment cmt"># we instantiate Time object and convert it back to a date thus using Time's logic in handling invalid dates</span>
181:       <span class="ruby-keyword kw">end</span>
182:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000903">
                    
                    <a name="M000903"></a><b>read_other_parameter_value</b>(klass, name, values_hash_from_param)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000903_source')" id="l_M000903_source">show</a>
                        
                    </p>
                    <div id="M000903_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 184</span>
184:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_other_parameter_value</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_hash_from_param</span>)
185:       <span class="ruby-identifier">max_position</span> = <span class="ruby-identifier">extract_max_param_for_multiparameter_attributes</span>(<span class="ruby-identifier">values_hash_from_param</span>)
186:       <span class="ruby-identifier">values</span> = (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">max_position</span>).<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">position</span><span class="ruby-operator">|</span>
187:         <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;Missing Parameter&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">values_hash_from_param</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">position</span>)
188:         <span class="ruby-identifier">values_hash_from_param</span>[<span class="ruby-identifier">position</span>]
189:       <span class="ruby-keyword kw">end</span>
190:       <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
191:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000901">
                    
                    <a name="M000901"></a><b>read_time_parameter_value</b>(name, values_hash_from_param)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000901_source')" id="l_M000901_source">show</a>
                        
                    </p>
                    <div id="M000901_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 161</span>
161:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_time_parameter_value</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_hash_from_param</span>)
162:       <span class="ruby-comment cmt"># If Date bits were not provided, error</span>
163:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;Missing Parameter&quot;</span> <span class="ruby-keyword kw">if</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>].<span class="ruby-identifier">any?</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">position</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">values_hash_from_param</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">position</span>)}
164:       <span class="ruby-identifier">max_position</span> = <span class="ruby-identifier">extract_max_param_for_multiparameter_attributes</span>(<span class="ruby-identifier">values_hash_from_param</span>, <span class="ruby-value">6</span>)
165:       <span class="ruby-comment cmt"># If Date bits were provided but blank, then return nil</span>
166:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>).<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">position</span><span class="ruby-operator">|</span> <span class="ruby-identifier">values_hash_from_param</span>[<span class="ruby-identifier">position</span>].<span class="ruby-identifier">blank?</span>}
167: 
168:       <span class="ruby-identifier">set_values</span> = (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">max_position</span>).<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">position</span><span class="ruby-operator">|</span> <span class="ruby-identifier">values_hash_from_param</span>[<span class="ruby-identifier">position</span>] }
169:       <span class="ruby-comment cmt"># If Time bits are not there, then default to 0</span>
170:       (<span class="ruby-value">3</span><span class="ruby-operator">..</span><span class="ruby-value">5</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">set_values</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">set_values</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">blank?</span> <span class="ruby-value">? </span><span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">set_values</span>[<span class="ruby-identifier">i</span>]}
171:       <span class="ruby-identifier">instantiate_time_object</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">set_values</span>)
172:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000900">
                    
                    <a name="M000900"></a><b>read_value_from_parameter</b>(name, values_hash_from_param)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000900_source')" id="l_M000900_source">show</a>
                        
                    </p>
                    <div id="M000900_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 148</span>
148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_value_from_parameter</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_hash_from_param</span>)
149:       <span class="ruby-identifier">klass</span> = (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">reflect_on_aggregation</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">name</span>)).<span class="ruby-identifier">klass</span>
150:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">values_hash_from_param</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">all?</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span><span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>}
151:         <span class="ruby-keyword kw">nil</span>
152:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">klass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Time</span>
153:         <span class="ruby-identifier">read_time_parameter_value</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_hash_from_param</span>)
154:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">klass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Date</span>
155:         <span class="ruby-identifier">read_date_parameter_value</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_hash_from_param</span>)
156:       <span class="ruby-keyword kw">else</span>
157:         <span class="ruby-identifier">read_other_parameter_value</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">values_hash_from_param</span>)
158:       <span class="ruby-keyword kw">end</span>
159:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000906">
                    
                    <a name="M000906"></a><b>type_cast_attribute_value</b>(multiparameter_name, value)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000906_source')" id="l_M000906_source">show</a>
                        
                    </p>
                    <div id="M000906_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.2.0/lib/active_record/attribute_assignment.rb, line 212</span>
212:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">type_cast_attribute_value</span>(<span class="ruby-identifier">multiparameter_name</span>, <span class="ruby-identifier">value</span>)
213:       <span class="ruby-identifier">multiparameter_name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\([0-9]*([if])\)/</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value str">&quot;to_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">$1</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">value</span>
214:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    