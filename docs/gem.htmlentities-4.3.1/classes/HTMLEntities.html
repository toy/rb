<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>HTMLEntities</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            HTMLEntities 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/htmlentities/decoder_rb.html">lib/htmlentities/decoder.rb</a></li>
            
            <li><a href="../files/lib/htmlentities/encoder_rb.html">lib/htmlentities/encoder.rb</a></li>
            
            <li><a href="../files/lib/htmlentities/flavors_rb.html">lib/htmlentities/flavors.rb</a></li>
            
            <li><a href="../files/lib/htmlentities/mappings/html4_rb.html">lib/htmlentities/mappings/html4.rb</a></li>
            
            <li><a href="../files/lib/htmlentities/mappings/xhtml1_rb.html">lib/htmlentities/mappings/xhtml1.rb</a></li>
            
            <li><a href="../files/lib/htmlentities/mappings/expanded_rb.html">lib/htmlentities/mappings/expanded.rb</a></li>
            
            <li><a href="../files/lib/htmlentities/version_rb.html">lib/htmlentities/version.rb</a></li>
            
            <li><a href="../files/lib/htmlentities_rb.html">lib/htmlentities.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
encoding: UTF-8
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000001">decode</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000002">encode</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000000">new</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="HTMLEntities/VERSION.html">HTMLEntities::VERSION</a></li>
        
        <li><span class="type">CLASS</span> <a href="HTMLEntities/Decoder.html">HTMLEntities::Decoder</a></li>
        
        <li><span class="type">CLASS</span> <a href="HTMLEntities/Encoder.html">HTMLEntities::Encoder</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">InstructionError</td>
            <td>=</td>
            <td class="attr-value">Class.new(RuntimeError)</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">FLAVORS</td>
            <td>=</td>
            <td class="attr-value">%w[html4 xhtml1 expanded]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">MAPPINGS</td>
            <td>=</td>
            <td class="attr-value">{} unless defined? MAPPINGS</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SKIP_DUP_ENCODINGS</td>
            <td>=</td>
            <td class="attr-value">{} unless defined? SKIP_DUP_ENCODINGS</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">UnknownFlavor</td>
            <td>=</td>
            <td class="attr-value">Class.new(RuntimeError)</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000001">
                    
                    <a name="M000001"></a><b>decode</b>(source)
                    
                </div>
                
                <div class="description">
                  <p>
Decode entities in a string into their UTF-8 equivalents. The string should
already be in UTF-8 encoding.
</p>
<p>
Unknown named entities will not be converted
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000001_source')" id="l_M000001_source">show</a>
                        
                    </p>
                    <div id="M000001_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/htmlentities.rb, line 43</span>
43:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode</span>(<span class="ruby-identifier">source</span>)
44:     (<span class="ruby-ivar">@decoder</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Decoder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@flavor</span>)).<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">source</span>)
45:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000002">
                    
                    <a name="M000002"></a><b>encode</b>(source, *instructions)
                    
                </div>
                
                <div class="description">
                  <p>
Encode codepoints into their corresponding entities. Various operations are
possible, and may be specified in order:
</p>
<table>
<tr><td valign="top">:basic :</td><td>Convert the five XML entities (&#8217;&#8221;<>&amp;)

</td></tr>
<tr><td valign="top">:named :</td><td>Convert non-ASCII characters to their named HTML 4.01 equivalent

</td></tr>
<tr><td valign="top">:decimal :</td><td>Convert non-ASCII characters to decimal entities (e.g. &amp;1234;)

</td></tr>
<tr><td valign="top">:hexadecimal :</td><td>Convert non-ASCII characters to hexadecimal entities (e.g. # &amp;x12ab;)

</td></tr>
</table>
<p>
You can specify the commands in any order, but they will be executed in the
order listed above to ensure that entity ampersands are not clobbered and
that named entities are replaced before numeric ones.
</p>
<p>
If no instructions are specified, :basic will be used.
</p>
<p>
Examples:
</p>
<pre>
  encode(str) - XML-safe
  encode(str, :basic, :decimal) - XML-safe and 7-bit clean
  encode(str, :basic, :named, :decimal) - 7-bit clean, with all
  non-ASCII characters replaced with their named entity where possible, and
  decimal equivalents otherwise.
</pre>
<p>
Note: It is the program&#8217;s responsibility to ensure that the source
contains valid UTF-8 before calling this method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000002_source')" id="l_M000002_source">show</a>
                        
                    </p>
                    <div id="M000002_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/htmlentities.rb, line 72</span>
72:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode</span>(<span class="ruby-identifier">source</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">instructions</span>)
73:     <span class="ruby-constant">Encoder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@flavor</span>, <span class="ruby-identifier">instructions</span>).<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">source</span>)
74:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000000">
                    
                    <a name="M000000"></a><b>new</b>(flavor='xhtml1')
                    
                </div>
                
                <div class="description">
                  <p>
Create a new <a href="HTMLEntities.html">HTMLEntities</a> coder for the
specified flavor. Available flavors are &#8216;html4&#8217;,
&#8216;expanded&#8217; and &#8216;xhtml1&#8217; (the default).
</p>
<p>
The only difference in functionality between html4 and xhtml1 is in the
handling of the apos (apostrophe) named entity, which is not defined in
HTML4.
</p>
<p>
&#8216;expanded&#8217; includes a large number of additional SGML entities
drawn from
</p>
<pre>
  ftp://ftp.unicode.org/Public/MAPPINGS/VENDORS/MISC/SGML.TXT
</pre>
<p>
it &#8220;maps SGML character entities from various public sets (namely,
ISOamsa, ISOamsb, ISOamsc, ISOamsn, ISOamso, ISOamsr, ISObox, ISOcyr1,
ISOcyr2, ISOdia, ISOgrk1, ISOgrk2, ISOgrk3, ISOgrk4, ISOlat1, ISOlat2,
ISOnum, ISOpub, ISOtech, HTMLspecial, HTMLsymbol) to corresponding Unicode
characters.&#8221; (sgml.txt).
</p>
<p>
&#8216;expanded&#8217; is a strict superset of the XHTML entities: every
xhtml named entity encodes and decodes the same under :expanded as under
:xhtml1
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000000_source')" id="l_M000000_source">show</a>
                        
                    </p>
                    <div id="M000000_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/htmlentities.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">flavor</span>=<span class="ruby-value str">'xhtml1'</span>)
33:     <span class="ruby-ivar">@flavor</span> = <span class="ruby-identifier">flavor</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>
34:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">UnknownFlavor</span>, <span class="ruby-node">&quot;Unknown flavor #{flavor}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">FLAVORS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@flavor</span>)
35:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    