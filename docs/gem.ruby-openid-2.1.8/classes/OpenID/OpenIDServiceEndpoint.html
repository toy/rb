<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>OpenID::OpenIDServiceEndpoint</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            OpenID::OpenIDServiceEndpoint 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/openid/consumer/discovery_rb.html">lib/openid/consumer/discovery.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Object representing an <a href="../OpenID.html">OpenID</a> service
endpoint.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000075">compatibility_mode</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000068">display_identifier</a>,</li>
                
                <li><a href="#M000069">display_identifier=</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000084">from_basic_service_endpoint</a>,</li>
                
                <li><a href="#M000087">from_discovery_result</a>,</li>
                
                <li><a href="#M000085">from_html</a>,</li>
                
                <li><a href="#M000088">from_op_endpoint_url</a>,</li>
                
                <li><a href="#M000086">from_xrds</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000083">get_local_id</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000081">is_op_identifier</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000066">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000082">parse_service</a>,</li>
                
                <li><a href="#M000073">preferred_namespace</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000074">supports_type</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000089">to_s</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000070">uses_extension</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">OPENID_TYPE_URIS</td>
            <td>=</td>
            <td class="attr-value">[         OPENID_IDP_2_0_TYPE,          OPENID_2_0_TYPE,         OPENID_1_1_TYPE,         OPENID_1_0_TYPE,         ]</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="../OpenID.html">OpenID</a> service type URIs, listed in order of
preference. The ordering of this list affects yadis and XRI service
discovery.
</p>
</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>claimed_id</td>
            <td class='attr-desc'><p>
the verified identifier.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>canonical_id</td>
            <td class='attr-desc'><p>
For XRI, the persistent identifier.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>server_url</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>type_uris</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>local_id</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>used_yadis</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000084">
                    
                    <a name="M000084"></a><b>from_basic_service_endpoint</b>(endpoint)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show</a>
                        
                    </p>
                    <div id="M000084_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 139</span>
139:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from_basic_service_endpoint</span>(<span class="ruby-identifier">endpoint</span>)
140:       <span class="ruby-comment cmt"># Create a new instance of this class from the endpoint object</span>
141:       <span class="ruby-comment cmt"># passed in.</span>
142:       <span class="ruby-comment cmt">#</span>
143:       <span class="ruby-comment cmt"># @return: nil or OpenIDServiceEndpoint for this endpoint object&quot;&quot;&quot;</span>
144: 
145:       <span class="ruby-identifier">type_uris</span> = <span class="ruby-identifier">endpoint</span>.<span class="ruby-identifier">match_types</span>(<span class="ruby-constant">OPENID_TYPE_URIS</span>)
146: 
147:       <span class="ruby-comment cmt"># If any Type URIs match and there is an endpoint URI specified,</span>
148:       <span class="ruby-comment cmt"># then this is an OpenID endpoint</span>
149:       <span class="ruby-keyword kw">if</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">type_uris</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">type_uris</span>.<span class="ruby-identifier">empty?</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">endpoint</span>.<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">nil?</span>
150:         <span class="ruby-identifier">openid_endpoint</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>
151:         <span class="ruby-identifier">openid_endpoint</span>.<span class="ruby-identifier">parse_service</span>(
152:                                       <span class="ruby-identifier">endpoint</span>.<span class="ruby-identifier">yadis_url</span>,
153:                                       <span class="ruby-identifier">endpoint</span>.<span class="ruby-identifier">uri</span>,
154:                                       <span class="ruby-identifier">endpoint</span>.<span class="ruby-identifier">type_uris</span>,
155:                                       <span class="ruby-identifier">endpoint</span>.<span class="ruby-identifier">service_element</span>)
156:       <span class="ruby-keyword kw">else</span>
157:         <span class="ruby-identifier">openid_endpoint</span> = <span class="ruby-keyword kw">nil</span>
158:       <span class="ruby-keyword kw">end</span>
159: 
160:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">openid_endpoint</span>
161:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000087">
                    
                    <a name="M000087"></a><b>from_discovery_result</b>(discoveryResult)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show</a>
                        
                    </p>
                    <div id="M000087_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 205</span>
205:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from_discovery_result</span>(<span class="ruby-identifier">discoveryResult</span>)
206:       <span class="ruby-comment cmt"># Create endpoints from a DiscoveryResult.</span>
207:       <span class="ruby-comment cmt">#</span>
208:       <span class="ruby-comment cmt"># @type discoveryResult: L{DiscoveryResult}</span>
209:       <span class="ruby-comment cmt">#</span>
210:       <span class="ruby-comment cmt"># @rtype: list of L{OpenIDServiceEndpoint}</span>
211:       <span class="ruby-comment cmt">#</span>
212:       <span class="ruby-comment cmt"># @raises L{XRDSError}: When the XRDS does not parse.</span>
213:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">discoveryResult</span>.<span class="ruby-identifier">is_xrds</span>()
214:         <span class="ruby-identifier">meth</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value str">'from_xrds'</span>)
215:       <span class="ruby-keyword kw">else</span>
216:         <span class="ruby-identifier">meth</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value str">'from_html'</span>)
217:       <span class="ruby-keyword kw">end</span>
218: 
219:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">discoveryResult</span>.<span class="ruby-identifier">normalized_uri</span>,
220:                        <span class="ruby-identifier">discoveryResult</span>.<span class="ruby-identifier">response_text</span>)
221:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000085">
                    
                    <a name="M000085"></a><b>from_html</b>(uri, html)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show</a>
                        
                    </p>
                    <div id="M000085_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 163</span>
163:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from_html</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">html</span>)
164:       <span class="ruby-comment cmt"># Parse the given document as HTML looking for an OpenID &lt;link</span>
165:       <span class="ruby-comment cmt"># rel=...&gt;</span>
166:       <span class="ruby-comment cmt">#</span>
167:       <span class="ruby-comment cmt"># @rtype: [OpenIDServiceEndpoint]</span>
168: 
169:       <span class="ruby-identifier">discovery_types</span> = [
170:                          [<span class="ruby-constant">OPENID_2_0_TYPE</span>, <span class="ruby-value str">'openid2.provider'</span>, <span class="ruby-value str">'openid2.local_id'</span>],
171:                          [<span class="ruby-constant">OPENID_1_1_TYPE</span>, <span class="ruby-value str">'openid.server'</span>, <span class="ruby-value str">'openid.delegate'</span>],
172:                         ]
173: 
174:       <span class="ruby-identifier">link_attrs</span> = <span class="ruby-constant">OpenID</span>.<span class="ruby-identifier">parse_link_attrs</span>(<span class="ruby-identifier">html</span>)
175:       <span class="ruby-identifier">services</span> = []
176:       <span class="ruby-identifier">discovery_types</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">type_uri</span>, <span class="ruby-identifier">op_endpoint_rel</span>, <span class="ruby-identifier">local_id_rel</span><span class="ruby-operator">|</span>
177: 
178:         <span class="ruby-identifier">op_endpoint_url</span> = <span class="ruby-constant">OpenID</span>.<span class="ruby-identifier">find_first_href</span>(<span class="ruby-identifier">link_attrs</span>, <span class="ruby-identifier">op_endpoint_rel</span>)
179: 
180:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">op_endpoint_url</span>
181:           <span class="ruby-keyword kw">next</span>
182:         <span class="ruby-keyword kw">end</span>
183: 
184:         <span class="ruby-identifier">service</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>
185:         <span class="ruby-identifier">service</span>.<span class="ruby-identifier">claimed_id</span> = <span class="ruby-identifier">uri</span>
186:         <span class="ruby-identifier">service</span>.<span class="ruby-identifier">local_id</span> = <span class="ruby-constant">OpenID</span>.<span class="ruby-identifier">find_first_href</span>(<span class="ruby-identifier">link_attrs</span>, <span class="ruby-identifier">local_id_rel</span>)
187:         <span class="ruby-identifier">service</span>.<span class="ruby-identifier">server_url</span> = <span class="ruby-identifier">op_endpoint_url</span>
188:         <span class="ruby-identifier">service</span>.<span class="ruby-identifier">type_uris</span> = [<span class="ruby-identifier">type_uri</span>]
189: 
190:         <span class="ruby-identifier">services</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">service</span>
191:       }
192: 
193:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">services</span>
194:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000088">
                    
                    <a name="M000088"></a><b>from_op_endpoint_url</b>(op_endpoint_url)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show</a>
                        
                    </p>
                    <div id="M000088_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 223</span>
223:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from_op_endpoint_url</span>(<span class="ruby-identifier">op_endpoint_url</span>)
224:       <span class="ruby-comment cmt"># Construct an OP-Identifier OpenIDServiceEndpoint object for</span>
225:       <span class="ruby-comment cmt"># a given OP Endpoint URL</span>
226:       <span class="ruby-comment cmt">#</span>
227:       <span class="ruby-comment cmt"># @param op_endpoint_url: The URL of the endpoint</span>
228:       <span class="ruby-comment cmt"># @rtype: OpenIDServiceEndpoint</span>
229:       <span class="ruby-identifier">service</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>
230:       <span class="ruby-identifier">service</span>.<span class="ruby-identifier">server_url</span> = <span class="ruby-identifier">op_endpoint_url</span>
231:       <span class="ruby-identifier">service</span>.<span class="ruby-identifier">type_uris</span> = [<span class="ruby-constant">OPENID_IDP_2_0_TYPE</span>]
232:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">service</span>
233:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000086">
                    
                    <a name="M000086"></a><b>from_xrds</b>(uri, xrds)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show</a>
                        
                    </p>
                    <div id="M000086_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 196</span>
196:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from_xrds</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">xrds</span>)
197:       <span class="ruby-comment cmt"># Parse the given document as XRDS looking for OpenID services.</span>
198:       <span class="ruby-comment cmt">#</span>
199:       <span class="ruby-comment cmt"># @rtype: [OpenIDServiceEndpoint]</span>
200:       <span class="ruby-comment cmt">#</span>
201:       <span class="ruby-comment cmt"># @raises L{XRDSError}: When the XRDS does not parse.</span>
202:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Yadis</span><span class="ruby-operator">::</span><span class="ruby-identifier">apply_filter</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">xrds</span>, <span class="ruby-keyword kw">self</span>)
203:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000066">
                    
                    <a name="M000066"></a><b>new</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000066_source')" id="l_M000066_source">show</a>
                        
                    </p>
                    <div id="M000066_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 48</span>
48:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
49:       <span class="ruby-ivar">@claimed_id</span> = <span class="ruby-keyword kw">nil</span>
50:       <span class="ruby-ivar">@server_url</span> = <span class="ruby-keyword kw">nil</span>
51:       <span class="ruby-ivar">@type_uris</span> = []
52:       <span class="ruby-ivar">@local_id</span> = <span class="ruby-keyword kw">nil</span>
53:       <span class="ruby-ivar">@canonical_id</span> = <span class="ruby-keyword kw">nil</span>
54:       <span class="ruby-ivar">@used_yadis</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-comment cmt"># whether this came from an XRDS</span>
55:       <span class="ruby-ivar">@display_identifier</span> = <span class="ruby-keyword kw">nil</span>
56:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000075">
                    
                    <a name="M000075"></a><b>compatibility_mode</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show</a>
                        
                    </p>
                    <div id="M000075_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 104</span>
104:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compatibility_mode</span>
105:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">preferred_namespace</span>() <span class="ruby-operator">!=</span> <span class="ruby-constant">OPENID_2_0_MESSAGE_NS</span>
106:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000068">
                    
                    <a name="M000068"></a><b>display_identifier</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000068_source')" id="l_M000068_source">show</a>
                        
                    </p>
                    <div id="M000068_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 58</span>
58:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_identifier</span>
59:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@display_identifier</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@display_identifier</span>
60: 
61:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@claimed_id</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@claimed_id</span>.<span class="ruby-identifier">nil?</span> 
62: 
63:       <span class="ruby-keyword kw">begin</span>
64:         <span class="ruby-identifier">parsed_identifier</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-ivar">@claimed_id</span>)
65:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidURIError</span>
66:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ProtocolError</span>, <span class="ruby-node">&quot;Claimed identifier #{claimed_id} is not a valid URI&quot;</span>
67:       <span class="ruby-keyword kw">end</span>
68: 
69:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@claimed_id</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">parsed_identifier</span>.<span class="ruby-identifier">fragment</span>
70: 
71:       <span class="ruby-identifier">disp</span> = <span class="ruby-identifier">parsed_identifier</span>
72:       <span class="ruby-identifier">disp</span>.<span class="ruby-identifier">fragment</span> = <span class="ruby-keyword kw">nil</span>
73: 
74:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">disp</span>.<span class="ruby-identifier">to_s</span>
75:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000069">
                    
                    <a name="M000069"></a><b>display_identifier=</b>(display_identifier)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show</a>
                        
                    </p>
                    <div id="M000069_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 77</span>
77:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_identifier=</span>(<span class="ruby-identifier">display_identifier</span>)
78:       <span class="ruby-ivar">@display_identifier</span> = <span class="ruby-identifier">display_identifier</span>
79:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000083">
                    
                    <a name="M000083"></a><b>get_local_id</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show</a>
                        
                    </p>
                    <div id="M000083_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 129</span>
129:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_local_id</span>
130:       <span class="ruby-comment cmt"># Return the identifier that should be sent as the</span>
131:       <span class="ruby-comment cmt"># openid.identity parameter to the server.</span>
132:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@local_id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@canonical_id</span>.<span class="ruby-identifier">nil?</span>
133:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@claimed_id</span>
134:       <span class="ruby-keyword kw">else</span>
135:         <span class="ruby-keyword kw">return</span> (<span class="ruby-ivar">@local_id</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@canonical_id</span>)
136:       <span class="ruby-keyword kw">end</span>
137:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000081">
                    
                    <a name="M000081"></a><b>is_op_identifier</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000081_source')" id="l_M000081_source">show</a>
                        
                    </p>
                    <div id="M000081_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 108</span>
108:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_op_identifier</span>
109:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@type_uris</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-constant">OPENID_IDP_2_0_TYPE</span>)
110:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000082">
                    
                    <a name="M000082"></a><b>parse_service</b>(yadis_url, uri, type_uris, service_element)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000082_source')" id="l_M000082_source">show</a>
                        
                    </p>
                    <div id="M000082_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 112</span>
112:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_service</span>(<span class="ruby-identifier">yadis_url</span>, <span class="ruby-identifier">uri</span>, <span class="ruby-identifier">type_uris</span>, <span class="ruby-identifier">service_element</span>)
113:       <span class="ruby-comment cmt"># Set the state of this object based on the contents of the</span>
114:       <span class="ruby-comment cmt"># service element.</span>
115:       <span class="ruby-ivar">@type_uris</span> = <span class="ruby-identifier">type_uris</span>
116:       <span class="ruby-ivar">@server_url</span> = <span class="ruby-identifier">uri</span>
117:       <span class="ruby-ivar">@used_yadis</span> = <span class="ruby-keyword kw">true</span>
118: 
119:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">is_op_identifier</span>()
120:         <span class="ruby-comment cmt"># XXX: This has crappy implications for Service elements that</span>
121:         <span class="ruby-comment cmt"># contain both 'server' and 'signon' Types.  But that's a</span>
122:         <span class="ruby-comment cmt"># pathological configuration anyway, so I don't think I care.</span>
123:         <span class="ruby-ivar">@local_id</span> = <span class="ruby-constant">OpenID</span>.<span class="ruby-identifier">find_op_local_identifier</span>(<span class="ruby-identifier">service_element</span>,
124:                                                     <span class="ruby-ivar">@type_uris</span>)
125:         <span class="ruby-ivar">@claimed_id</span> = <span class="ruby-identifier">yadis_url</span>
126:       <span class="ruby-keyword kw">end</span>
127:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000073">
                    
                    <a name="M000073"></a><b>preferred_namespace</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show</a>
                        
                    </p>
                    <div id="M000073_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 85</span>
85:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">preferred_namespace</span>
86:       <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@type_uris</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-constant">OPENID_IDP_2_0_TYPE</span>) <span class="ruby-keyword kw">or</span>
87:           <span class="ruby-ivar">@type_uris</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-constant">OPENID_2_0_TYPE</span>))
88:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">OPENID_2_0_MESSAGE_NS</span>
89:       <span class="ruby-keyword kw">else</span>
90:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">OPENID_1_0_MESSAGE_NS</span>
91:       <span class="ruby-keyword kw">end</span>
92:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000074">
                    
                    <a name="M000074"></a><b>supports_type</b>(type_uri)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show</a>
                        
                    </p>
                    <div id="M000074_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 94</span>
 94:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_type</span>(<span class="ruby-identifier">type_uri</span>)
 95:       <span class="ruby-comment cmt"># Does this endpoint support this type?</span>
 96:       <span class="ruby-comment cmt">#</span>
 97:       <span class="ruby-comment cmt"># I consider C{/server} endpoints to implicitly support C{/signon}.</span>
 98:       (
 99:        <span class="ruby-ivar">@type_uris</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-identifier">type_uri</span>) <span class="ruby-keyword kw">or</span>
100:        (<span class="ruby-identifier">type_uri</span> <span class="ruby-operator">==</span> <span class="ruby-constant">OPENID_2_0_TYPE</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">is_op_identifier</span>())
101:        )
102:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000089">
                    
                    <a name="M000089"></a><b>to_s</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show</a>
                        
                    </p>
                    <div id="M000089_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 235</span>
235:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
236:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;&lt;%s server_url=%s claimed_id=%s &quot;</span> <span class="ruby-operator">+</span>
237:                      <span class="ruby-value str">&quot;local_id=%s canonical_id=%s used_yadis=%s&gt;&quot;</span>,
238:                      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>, <span class="ruby-ivar">@server_url</span>, <span class="ruby-ivar">@claimed_id</span>,
239:                      <span class="ruby-ivar">@local_id</span>, <span class="ruby-ivar">@canonical_id</span>, <span class="ruby-ivar">@used_yadis</span>)
240:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000070">
                    
                    <a name="M000070"></a><b>uses_extension</b>(extension_uri)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show</a>
                        
                    </p>
                    <div id="M000070_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/openid/consumer/discovery.rb, line 81</span>
81:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uses_extension</span>(<span class="ruby-identifier">extension_uri</span>)
82:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@type_uris</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-identifier">extension_uri</span>)
83:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    