<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>OpenID::Server::OpenIDResponse</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            OpenID::Server::OpenIDResponse 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/openid/server_rb.html">lib/openid/server.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
I am a response to an <a href="../../OpenID.html">OpenID</a> request.
</p>
<p>
Attributes:
</p>
<table>
<tr><td valign="top">signed:</td><td>A list of the names of the fields which should be signed.

</td></tr>
</table>
<p>
Implementer&#8217;s note: In a more symmetric client/server implementation,
there would be more types of <a
href="OpenIDResponse.html">OpenIDResponse</a> object and they would have
validated attributes according to the type of response. But as it is,
Response objects in a server are basically write-only, their only job is to
go out over the wire, so this is just a loose wrapper around <a
href="OpenIDResponse.html">OpenIDResponse</a>.fields.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000389">add_extension</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000391">copy</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000390">encode_to_kvform</a>,</li>
                
                <li><a href="#M000387">encode_to_url</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000385">needs_signing</a>,</li>
                
                <li><a href="#M000378">new</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000384">render_as_form</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000382">to_form_markup</a>,</li>
                
                <li><a href="#M000383">to_html</a>,</li>
                
                <li><a href="#M000381">to_s</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000386">which_encoding</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>request</td>
            <td class='attr-desc'><p>
The <a href="OpenIDRequest.html">OpenIDRequest</a> I respond to.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>fields</td>
            <td class='attr-desc'><p>
An <a href="../Message.html">OpenID::Message</a> with the data to be
returned. Keys are parameter names with no leading openid. e.g. identity
and mac_key never openid.identity.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000378">
                    
                    <a name="M000378"></a><b>new</b>(request)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000378_source')" id="l_M000378_source">show</a>
                        
                    </p>
                    <div id="M000378_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 860</span>
860:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">request</span>)
861:         <span class="ruby-comment cmt"># Make a response to an OpenIDRequest.</span>
862:         <span class="ruby-ivar">@request</span> = <span class="ruby-identifier">request</span>
863:         <span class="ruby-ivar">@fields</span> = <span class="ruby-constant">Message</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">request</span>.<span class="ruby-identifier">namespace</span>)
864:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000389">
                    
                    <a name="M000389"></a><b>add_extension</b>(extension_response)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000389_source')" id="l_M000389_source">show</a>
                        
                    </p>
                    <div id="M000389_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 922</span>
922:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_extension</span>(<span class="ruby-identifier">extension_response</span>)
923:         <span class="ruby-comment cmt"># Add an extension response to this response message.</span>
924:         <span class="ruby-comment cmt">#</span>
925:         <span class="ruby-comment cmt"># extension_response:: An object that implements the</span>
926:         <span class="ruby-comment cmt">#     #OpenID::Extension interface for adding arguments to an OpenID</span>
927:         <span class="ruby-comment cmt">#     message.</span>
928:         <span class="ruby-identifier">extension_response</span>.<span class="ruby-identifier">to_message</span>(<span class="ruby-ivar">@fields</span>)
929:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000391">
                    
                    <a name="M000391"></a><b>copy</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000391_source')" id="l_M000391_source">show</a>
                        
                    </p>
                    <div id="M000391_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 943</span>
943:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy</span>
944:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">load</span>(<span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span>(<span class="ruby-keyword kw">self</span>))
945:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000390">
                    
                    <a name="M000390"></a><b>encode_to_kvform</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000390_source')" id="l_M000390_source">show</a>
                        
                    </p>
                    <div id="M000390_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 931</span>
931:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode_to_kvform</span>
932:         <span class="ruby-comment cmt"># Encode a response in key-value colon/newline format.</span>
933:         <span class="ruby-comment cmt">#</span>
934:         <span class="ruby-comment cmt"># This is a machine-readable format used to respond to</span>
935:         <span class="ruby-comment cmt"># messages which came directly from the consumer and not</span>
936:         <span class="ruby-comment cmt"># through the user agent.</span>
937:         <span class="ruby-comment cmt">#</span>
938:         <span class="ruby-comment cmt"># see: OpenID Specs,</span>
939:         <span class="ruby-comment cmt">#    &lt;a href=&quot;http://openid.net/specs.bml#keyvalue&quot;&gt;Key-Value Colon/Newline format&lt;/a&gt;</span>
940:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@fields</span>.<span class="ruby-identifier">to_kvform</span>
941:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000387">
                    
                    <a name="M000387"></a><b>encode_to_url</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000387_source')" id="l_M000387_source">show</a>
                        
                    </p>
                    <div id="M000387_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 916</span>
916:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode_to_url</span>
917:         <span class="ruby-comment cmt"># Encode a response as a URL for the user agent to GET.</span>
918:         <span class="ruby-comment cmt"># You will generally use this URL with a HTTP redirect.</span>
919:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@fields</span>.<span class="ruby-identifier">to_url</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">return_to</span>)
920:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000385">
                    
                    <a name="M000385"></a><b>needs_signing</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000385_source')" id="l_M000385_source">show</a>
                        
                    </p>
                    <div id="M000385_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 894</span>
894:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">needs_signing</span>
895:         <span class="ruby-comment cmt"># Does this response require signing?</span>
896:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@fields</span>.<span class="ruby-identifier">get_arg</span>(<span class="ruby-constant">OPENID_NS</span>, <span class="ruby-value str">'mode'</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">'id_res'</span>
897:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000384">
                    
                    <a name="M000384"></a><b>render_as_form</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000384_source')" id="l_M000384_source">show</a>
                        
                    </p>
                    <div id="M000384_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 888</span>
888:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render_as_form</span>
889:         <span class="ruby-comment cmt"># Returns true if this response's encoding is</span>
890:         <span class="ruby-comment cmt"># ENCODE_HTML_FORM.  Convenience method for server authors.</span>
891:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">which_encoding</span> <span class="ruby-operator">==</span> <span class="ruby-constant">ENCODE_HTML_FORM</span>
892:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000382">
                    
                    <a name="M000382"></a><b>to_form_markup</b>(form_tag_attrs=nil)
                    
                </div>
                
                <div class="description">
                  <p>
form_tag_attrs is a hash of attributes to be added to the form tag.
&#8216;accept-charset&#8217; and &#8216;enctype&#8217; have defaults that
can be overridden. If a value is supplied for &#8216;action&#8217; or
&#8216;method&#8217;, it will be replaced. Returns the form markup for this
response.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000382_source')" id="l_M000382_source">show</a>
                        
                    </p>
                    <div id="M000382_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 878</span>
878:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_form_markup</span>(<span class="ruby-identifier">form_tag_attrs</span>=<span class="ruby-keyword kw">nil</span>)
879:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@fields</span>.<span class="ruby-identifier">to_form_markup</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">return_to</span>, <span class="ruby-identifier">form_tag_attrs</span>)
880:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000383">
                    
                    <a name="M000383"></a><b>to_html</b>(form_tag_attrs=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Wraps the form tag from <a
href="OpenIDResponse.html#M000382">to_form_markup</a> in a complete HTML
document that uses javascript to autosubmit the form.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000383_source')" id="l_M000383_source">show</a>
                        
                    </p>
                    <div id="M000383_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 884</span>
884:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_html</span>(<span class="ruby-identifier">form_tag_attrs</span>=<span class="ruby-keyword kw">nil</span>)
885:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Util</span>.<span class="ruby-identifier">auto_submit_html</span>(<span class="ruby-identifier">to_form_markup</span>(<span class="ruby-identifier">form_tag_attrs</span>))
886:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000381">
                    
                    <a name="M000381"></a><b>to_s</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000381_source')" id="l_M000381_source">show</a>
                        
                    </p>
                    <div id="M000381_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 866</span>
866:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
867:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%s for %s: %s&quot;</span>,
868:                        <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>,
869:                        <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">class</span>,
870:                        <span class="ruby-ivar">@fields</span>)
871:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000386">
                    
                    <a name="M000386"></a><b>which_encoding</b>()
                    
                </div>
                
                <div class="description">
                  <p>
implements IEncodable
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000386_source')" id="l_M000386_source">show</a>
                        
                    </p>
                    <div id="M000386_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/openid/server.rb, line 901</span>
901:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">which_encoding</span>
902:         <span class="ruby-comment cmt"># How should I be encoded?</span>
903:         <span class="ruby-comment cmt"># returns one of ENCODE_URL or ENCODE_KVFORM.</span>
904:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">BROWSER_REQUEST_MODES</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">mode</span>)
905:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@fields</span>.<span class="ruby-identifier">is_openid2</span> <span class="ruby-keyword kw">and</span>
906:               <span class="ruby-identifier">encode_to_url</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">OPENID1_URL_LIMIT</span>
907:             <span class="ruby-keyword kw">return</span> <span class="ruby-constant">ENCODE_HTML_FORM</span>
908:           <span class="ruby-keyword kw">else</span>
909:             <span class="ruby-keyword kw">return</span> <span class="ruby-constant">ENCODE_URL</span>
910:           <span class="ruby-keyword kw">end</span>
911:         <span class="ruby-keyword kw">else</span>
912:           <span class="ruby-keyword kw">return</span> <span class="ruby-constant">ENCODE_KVFORM</span>
913:         <span class="ruby-keyword kw">end</span>
914:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    