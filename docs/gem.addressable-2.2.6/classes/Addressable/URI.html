<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Addressable::URI</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Addressable::URI 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/addressable/uri_rb.html">lib/addressable/uri.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
This is an implementation of a <a href="URI.html">URI</a> parser based on
<a href=&#8220;<a
href="http://www.ietf.org/rfc/rfc3986.txt">RFC">www.ietf.org/rfc/rfc3986.txt">RFC</a>
3986</a>, <a href=&#8220;<a
href="http://www.ietf.org/rfc/rfc3987.txt">RFC">www.ietf.org/rfc/rfc3987.txt">RFC</a>
3987</a>.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000109">+</a>,</li>
                
                <li><a href="#M000119">==</a>,</li>
                
                <li><a href="#M000118">===</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000107">absolute?</a>,</li>
                
                <li><a href="#M000077">authority</a>,</li>
                
                <li><a href="#M000079">authority=</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000093">basename</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000051">convert_path</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000129">defer_validation</a>,</li>
                
                <li><a href="#M000117">display_uri</a>,</li>
                
                <li><a href="#M000122">dup</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000056">encode</a>,</li>
                
                <li><a href="#M000053">encode_component</a>,</li>
                
                <li><a href="#M000120">eql?</a>,</li>
                
                <li><a href="#M000094">extname</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000058">form_encode</a>,</li>
                
                <li><a href="#M000059">form_unencode</a>,</li>
                
                <li><a href="#M000102">fragment</a>,</li>
                
                <li><a href="#M000104">fragment=</a>,</li>
                
                <li><a href="#M000061">freeze</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000121">hash</a>,</li>
                
                <li><a href="#M000046">heuristic_parse</a>,</li>
                
                <li><a href="#M000074">host</a>,</li>
                
                <li><a href="#M000076">host=</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000086">inferred_port</a>,</li>
                
                <li><a href="#M000128">inspect</a>,</li>
                
                <li><a href="#M000105">ip_based?</a>,</li>
                
                <li><a href="#M000081">ip_based_schemes</a></li>
                
            </ul>
        </dd>
    
        <dt>J</dt>
        <dd>
            <ul>
                
                <li><a href="#M000052">join</a>,</li>
                
                <li><a href="#M000108">join</a>,</li>
                
                <li><a href="#M000110">join!</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000111">merge</a>,</li>
                
                <li><a href="#M000112">merge!</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000060">new</a>,</li>
                
                <li><a href="#M000115">normalize</a>,</li>
                
                <li><a href="#M000116">normalize!</a>,</li>
                
                <li><a href="#M000055">normalize_component</a>,</li>
                
                <li><a href="#M000130">normalize_path</a>,</li>
                
                <li><a href="#M000078">normalized_authority</a>,</li>
                
                <li><a href="#M000057">normalized_encode</a>,</li>
                
                <li><a href="#M000103">normalized_fragment</a>,</li>
                
                <li><a href="#M000075">normalized_host</a>,</li>
                
                <li><a href="#M000069">normalized_password</a>,</li>
                
                <li><a href="#M000091">normalized_path</a>,</li>
                
                <li><a href="#M000084">normalized_port</a>,</li>
                
                <li><a href="#M000096">normalized_query</a>,</li>
                
                <li><a href="#M000063">normalized_scheme</a>,</li>
                
                <li><a href="#M000088">normalized_site</a>,</li>
                
                <li><a href="#M000066">normalized_user</a>,</li>
                
                <li><a href="#M000072">normalized_userinfo</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000123">omit</a>,</li>
                
                <li><a href="#M000124">omit!</a>,</li>
                
                <li><a href="#M000080">origin</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000042">parse</a>,</li>
                
                <li><a href="#M000068">password</a>,</li>
                
                <li><a href="#M000070">password=</a>,</li>
                
                <li><a href="#M000090">path</a>,</li>
                
                <li><a href="#M000092">path=</a>,</li>
                
                <li><a href="#M000083">port</a>,</li>
                
                <li><a href="#M000085">port=</a>,</li>
                
                <li><a href="#M000082">port_mapping</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M000095">query</a>,</li>
                
                <li><a href="#M000097">query=</a>,</li>
                
                <li><a href="#M000098">query_values</a>,</li>
                
                <li><a href="#M000099">query_values=</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000106">relative?</a>,</li>
                
                <li><a href="#M000132">replace_self</a>,</li>
                
                <li><a href="#M000100">request_uri</a>,</li>
                
                <li><a href="#M000101">request_uri=</a>,</li>
                
                <li><a href="#M000113">route_from</a>,</li>
                
                <li><a href="#M000114">route_to</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000062">scheme</a>,</li>
                
                <li><a href="#M000064">scheme=</a>,</li>
                
                <li><a href="#M000087">site</a>,</li>
                
                <li><a href="#M000089">site=</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000127">to_hash</a>,</li>
                
                <li><a href="#M000125">to_s</a>,</li>
                
                <li><a href="#M000126">to_str</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000054">unencode</a>,</li>
                
                <li><a href="#M000065">user</a>,</li>
                
                <li><a href="#M000067">user=</a>,</li>
                
                <li><a href="#M000071">userinfo</a>,</li>
                
                <li><a href="#M000073">userinfo=</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M000131">validate</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="URI/CharacterClasses.html">Addressable::URI::CharacterClasses</a></li>
        
        <li><span class="type">CLASS</span> <a href="URI/InvalidURIError.html">Addressable::URI::InvalidURIError</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">SLASH</td>
            <td>=</td>
            <td class="attr-value">'/'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EMPTYSTR</td>
            <td>=</td>
            <td class="attr-value">''</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">URIREGEX</td>
            <td>=</td>
            <td class="attr-value">/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PORT_MAPPING</td>
            <td>=</td>
            <td class="attr-value">{       &quot;http&quot; =&gt; 80,       &quot;https&quot; =&gt; 443,       &quot;ftp&quot; =&gt; 21,       &quot;tftp&quot; =&gt; 69,       &quot;sftp&quot; =&gt; 22,       &quot;ssh&quot; =&gt; 22,       &quot;svn+ssh&quot; =&gt; 22,       &quot;telnet&quot; =&gt; 23,       &quot;nntp&quot; =&gt; 119,       &quot;gopher&quot; =&gt; 70,       &quot;wais&quot; =&gt; 210,       &quot;ldap&quot; =&gt; 389,       &quot;prospero&quot; =&gt; 1525     }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NORMPATH</td>
            <td>=</td>
            <td class="attr-value">/^(?!\/)[^\/:]*:.*$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PARENT1</td>
            <td>=</td>
            <td class="attr-value">'.'</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Resolves paths to their simplest form.
</p>
<p>
@param [String] path The path to normalize.
</p>
<p>
@return [String] The normalized path.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PARENT2</td>
            <td>=</td>
            <td class="attr-value">'..'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NPATH1</td>
            <td>=</td>
            <td class="attr-value">/\/\.\/|\/\.$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NPATH2</td>
            <td>=</td>
            <td class="attr-value">/\/([^\/]+)\/\.\.\/|\/([^\/]+)\/\.\.$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NPATH3</td>
            <td>=</td>
            <td class="attr-value">/^\.\.?\/?/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NPATH4</td>
            <td>=</td>
            <td class="attr-value">/^\/\.\.?\/|^(\/\.\.?)+\/?$/</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000051">
                    
                    <a name="M000051"></a><b>convert_path</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
Converts a path to a file scheme <a href="URI.html">URI</a>. If the path
supplied is relative, it will be returned as a relative <a
href="URI.html">URI</a>. If the path supplied is actually a non-file <a
href="URI.html">URI</a>, it will parse the <a href="URI.html">URI</a> as if
it had been parsed with <tt><a
href="URI.html#M000042">Addressable::URI.parse</a></tt>. Handles all of the
various Microsoft-specific formats for specifying paths.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] path
</p>
<pre>
  Typically a &lt;code&gt;String&lt;/code&gt; path to a file or directory, but
  will return a sensible return value if an absolute URI is supplied
  instead.
</pre>
<p>
@return [Addressable::URI]
</p>
<pre>
  The parsed file scheme URI or the original URI if some other URI
  scheme was provided.
</pre>
<p>
@example
</p>
<pre>
  base = Addressable::URI.convert_path(&quot;/absolute/path/&quot;)
  uri = Addressable::URI.convert_path(&quot;relative/path&quot;)
  (base + uri).to_s
  #=&gt; &quot;file:///absolute/path/relative/path&quot;

  Addressable::URI.convert_path(
    &quot;c:\\windows\\My Documents 100%20\\foo.txt&quot;
  ).to_s
  #=&gt; &quot;file:///c:/windows/My%20Documents%20100%20/foo.txt&quot;

  Addressable::URI.convert_path(&quot;http://example.com/&quot;).to_s
  #=&gt; &quot;http://example.com/&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000051_source')" id="l_M000051_source">show</a>
                        
                    </p>
                    <div id="M000051_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 229</span>
229:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">convert_path</span>(<span class="ruby-identifier">path</span>)
230:       <span class="ruby-comment cmt"># If we were given nil, return nil.</span>
231:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">path</span>
232:       <span class="ruby-comment cmt"># If a URI object is passed, just return itself.</span>
233:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>)
234:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
235:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{path.class} into String.&quot;</span>
236:       <span class="ruby-keyword kw">end</span>
237:       <span class="ruby-comment cmt"># Otherwise, convert to a String</span>
238:       <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">strip</span>
239: 
240:       <span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^file:\/?\/?/</span>, <span class="ruby-constant">EMPTYSTR</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^file:\/?\/?/</span>
241:       <span class="ruby-identifier">path</span> = <span class="ruby-constant">SLASH</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^([a-zA-Z])[\|:]/</span>
242:       <span class="ruby-identifier">uri</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">path</span>)
243: 
244:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
245:         <span class="ruby-comment cmt"># Adjust windows-style uris</span>
246:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^\/?([a-zA-Z])[\|:][\\\/]/</span>) <span class="ruby-keyword kw">do</span>
247:           <span class="ruby-node">&quot;/#{$1.downcase}:/&quot;</span>
248:         <span class="ruby-keyword kw">end</span>
249:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\\/</span>, <span class="ruby-constant">SLASH</span>)
250:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>) <span class="ruby-operator">&amp;&amp;</span>
251:             <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>).<span class="ruby-identifier">directory?</span>
252:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\/$/</span>, <span class="ruby-constant">EMPTYSTR</span>)
253:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/'</span>
254:         <span class="ruby-keyword kw">end</span>
255: 
256:         <span class="ruby-comment cmt"># If the path is absolute, set the scheme and host.</span>
257:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\//</span>
258:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-value str">&quot;file&quot;</span>
259:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span> = <span class="ruby-constant">EMPTYSTR</span>
260:         <span class="ruby-keyword kw">end</span>
261:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">normalize!</span>
262:       <span class="ruby-keyword kw">end</span>
263: 
264:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>
265:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000056">
                    
                    <a name="M000056"></a><b>encode</b>(uri, returning=String)
                    
                </div>
                
                <div class="description">
                  <p>
Percent encodes any special characters in the <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] uri
</p>
<pre>
  The URI to encode.
</pre>
<p>
@param [Class] returning
</p>
<pre>
  The type of object to return.
  This value may only be set to &lt;code&gt;String&lt;/code&gt; or
  &lt;code&gt;Addressable::URI&lt;/code&gt;. All other values are invalid. Defaults
  to &lt;code&gt;String&lt;/code&gt;.
</pre>
<p>
@return [String, Addressable::URI]
</p>
<pre>
  The encoded URI.
  The return type is determined by the &lt;code&gt;returning&lt;/code&gt; parameter.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000056_source')" id="l_M000056_source">show</a>
                        
                    </p>
                    <div id="M000056_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 486</span>
486:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">returning</span>=<span class="ruby-constant">String</span>)
487:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">nil?</span>
488: 
489:       <span class="ruby-keyword kw">begin</span>
490:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>
491:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">TypeError</span>
492:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
493:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
494: 
495:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">returning</span>)
496:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
497:           <span class="ruby-value str">&quot;Expected Class (String or Addressable::URI), &quot;</span> <span class="ruby-operator">+</span>
498:           <span class="ruby-node">&quot;got #{returning.inspect}&quot;</span>
499:       <span class="ruby-keyword kw">end</span>
500:       <span class="ruby-identifier">uri_object</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">uri</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
501:       <span class="ruby-identifier">encoded_uri</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
502:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">scheme</span>,
503:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">SCHEME</span>),
504:         <span class="ruby-identifier">:authority</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">authority</span>,
505:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">AUTHORITY</span>),
506:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">path</span>,
507:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH</span>),
508:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">query</span>,
509:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">QUERY</span>),
510:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">fragment</span>,
511:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">FRAGMENT</span>)
512:       )
513:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>
514:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded_uri</span>.<span class="ruby-identifier">to_s</span>
515:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>
516:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded_uri</span>
517:       <span class="ruby-keyword kw">end</span>
518:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000053">
                    
                    <a name="M000053"></a><b>encode_component</b>(component, character_class= CharacterClasses::RESERVED + CharacterClasses::UNRESERVED)
                    
                </div>
                
                <div class="description">
                  <p>
Percent encodes a <a href="URI.html">URI</a> component.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] component The <a
href="URI.html">URI</a> component to encode.
</p>
<p>
@param [String, Regexp] character_class
</p>
<pre>
  The characters which are not percent encoded. If a &lt;code&gt;String&lt;/code&gt;
  is passed, the &lt;code&gt;String&lt;/code&gt; must be formatted as a regular
  expression character class. (Do not include the surrounding square
  brackets.)  For example, &lt;code&gt;&quot;b-zB-Z0-9&quot;&lt;/code&gt; would cause
  everything but the letters 'b' through 'z' and the numbers '0' through
 '9' to be percent encoded. If a &lt;code&gt;Regexp&lt;/code&gt; is passed, the
  value &lt;code&gt;/[^b-zB-Z0-9]/&lt;/code&gt; would have the same effect. A set of
  useful &lt;code&gt;String&lt;/code&gt; values may be found in the
  &lt;code&gt;Addressable::URI::CharacterClasses&lt;/code&gt; module. The default
  value is the reserved plus unreserved character classes specified in
  &lt;a href=&quot;http://www.ietf.org/rfc/rfc3986.txt&quot;&gt;RFC 3986&lt;/a&gt;.
</pre>
<p>
@return [String] The encoded component.
</p>
<p>
@example
</p>
<pre>
  Addressable::URI.encode_component(&quot;simple/example&quot;, &quot;b-zB-Z0-9&quot;)
  =&gt; &quot;simple%2Fex%61mple&quot;
  Addressable::URI.encode_component(&quot;simple/example&quot;, /[^b-zB-Z0-9]/)
  =&gt; &quot;simple%2Fex%61mple&quot;
  Addressable::URI.encode_component(
    &quot;simple/example&quot;, Addressable::URI::CharacterClasses::UNRESERVED
  )
  =&gt; &quot;simple%2Fexample&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000053_source')" id="l_M000053_source">show</a>
                        
                    </p>
                    <div id="M000053_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 323</span>
323:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">component</span>, <span class="ruby-identifier">character_class</span>=
324:         <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">RESERVED</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>)
325:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">nil?</span>
326: 
327:       <span class="ruby-keyword kw">begin</span>
328:         <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">to_str</span>
329:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-constant">NoMethodError</span>
330:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{component.class} into String.&quot;</span>
331:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">component</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
332: 
333:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-constant">Regexp</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">character_class</span>.<span class="ruby-identifier">class</span>)
334:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
335:           <span class="ruby-node">&quot;Expected String or Regexp, got #{character_class.inspect}&quot;</span>
336:       <span class="ruby-keyword kw">end</span>
337:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">character_class</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
338:         <span class="ruby-identifier">character_class</span> = <span class="ruby-node">/[^#{character_class}]/</span>
339:       <span class="ruby-keyword kw">end</span>
340:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
341:         <span class="ruby-comment cmt"># We can't perform regexps on invalid UTF sequences, but</span>
342:         <span class="ruby-comment cmt"># here we need to, so switch to ASCII.</span>
343:         <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">dup</span>
344:         <span class="ruby-identifier">component</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
345:       <span class="ruby-keyword kw">end</span>
346:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">character_class</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sequence</span><span class="ruby-operator">|</span>
347:         (<span class="ruby-identifier">sequence</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">'C*'</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-value str">&quot;%&quot;</span> <span class="ruby-operator">+</span> (<span class="ruby-value str">&quot;%02x&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">c</span>).<span class="ruby-identifier">upcase</span> }).<span class="ruby-identifier">join</span>
348:       <span class="ruby-keyword kw">end</span>
349:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000058">
                    
                    <a name="M000058"></a><b>form_encode</b>(form_values, sort=false)
                    
                </div>
                
                <div class="description">
                  <p>
Encodes a set of key/value pairs according to the rules for the
<tt>application/x-www-form-urlencoded</tt> MIME type.
</p>
<p>
@param [<a href="URI.html#M000127">to_hash</a>, to_ary] form_values
</p>
<pre>
  The form values to encode.
</pre>
<p>
@param [TrueClass, FalseClass] sort
</p>
<pre>
  Sort the key/value pairs prior to encoding.
  Defaults to &lt;code&gt;false&lt;/code&gt;.
</pre>
<p>
@return [String]
</p>
<pre>
  The encoded value.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000058_source')" id="l_M000058_source">show</a>
                        
                    </p>
                    <div id="M000058_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 610</span>
610:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">form_encode</span>(<span class="ruby-identifier">form_values</span>, <span class="ruby-identifier">sort</span>=<span class="ruby-keyword kw">false</span>)
611:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_hash</span>)
612:         <span class="ruby-identifier">form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">to_hash</span>.<span class="ruby-identifier">to_a</span>
613:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_ary</span>)
614:         <span class="ruby-identifier">form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">to_ary</span>
615:       <span class="ruby-keyword kw">else</span>
616:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{form_values.class} into Array.&quot;</span>
617:       <span class="ruby-keyword kw">end</span>
618:       <span class="ruby-identifier">form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
619:         [<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>]
620:       <span class="ruby-keyword kw">end</span>
621:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sort</span>
622:         <span class="ruby-comment cmt"># Useful for OAuth and optimizing caching systems</span>
623:         <span class="ruby-identifier">form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">sort</span>
624:       <span class="ruby-keyword kw">end</span>
625:       <span class="ruby-identifier">escaped_form_values</span> = <span class="ruby-identifier">form_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
626:         <span class="ruby-comment cmt"># Line breaks are CRLF pairs</span>
627:         [
628:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(
629:             <span class="ruby-identifier">key</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)/</span>, <span class="ruby-value str">&quot;\r\n&quot;</span>),
630:             <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
631:           ).<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;%20&quot;</span>, <span class="ruby-value str">&quot;+&quot;</span>),
632:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(
633:             <span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)/</span>, <span class="ruby-value str">&quot;\r\n&quot;</span>),
634:             <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
635:           ).<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;%20&quot;</span>, <span class="ruby-value str">&quot;+&quot;</span>)
636:         ]
637:       <span class="ruby-keyword kw">end</span>
638:       <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">escaped_form_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
639:         <span class="ruby-node">&quot;#{key}=#{value}&quot;</span>
640:       <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>)
641:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000059">
                    
                    <a name="M000059"></a><b>form_unencode</b>(encoded_value)
                    
                </div>
                
                <div class="description">
                  <p>
Decodes a <tt>String</tt> according to the rules for the
<tt>application/x-www-form-urlencoded</tt> MIME type.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] encoded_value
</p>
<pre>
  The form values to decode.
</pre>
<p>
@return [Array]
</p>
<pre>
  The decoded values.
  This is not a &lt;code&gt;Hash&lt;/code&gt; because of the possibility for
  duplicate keys.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000059_source')" id="l_M000059_source">show</a>
                        
                    </p>
                    <div id="M000059_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 654</span>
654:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">form_unencode</span>(<span class="ruby-identifier">encoded_value</span>)
655:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">encoded_value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
656:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{encoded_value.class} into String.&quot;</span>
657:       <span class="ruby-keyword kw">end</span>
658:       <span class="ruby-identifier">encoded_value</span> = <span class="ruby-identifier">encoded_value</span>.<span class="ruby-identifier">to_str</span>
659:       <span class="ruby-identifier">split_values</span> = <span class="ruby-identifier">encoded_value</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span><span class="ruby-operator">|</span>
660:         <span class="ruby-identifier">pair</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-value">2</span>)
661:       <span class="ruby-keyword kw">end</span>
662:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">split_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
663:         [
664:           <span class="ruby-identifier">key</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(
665:             <span class="ruby-identifier">key</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;+&quot;</span>, <span class="ruby-value str">&quot;%20&quot;</span>)).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)/</span>, <span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
666:           <span class="ruby-identifier">value</span> <span class="ruby-value">? </span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(
667:             <span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;+&quot;</span>, <span class="ruby-value str">&quot;%20&quot;</span>)).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\r\n|\n|\r)/</span>, <span class="ruby-value str">&quot;\n&quot;</span>)) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
668:         ]
669:       <span class="ruby-keyword kw">end</span>
670:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000046">
                    
                    <a name="M000046"></a><b>heuristic_parse</b>(uri, hints={})
                    
                </div>
                
                <div class="description">
                  <p>
Converts an input to a <a href="URI.html">URI</a>. The input does not have
to be a valid <a href="URI.html">URI</a> — the method will use heuristics
to guess what <a href="URI.html">URI</a> was intended. This is not
standards-compliant, merely user-friendly.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] uri
</p>
<pre>
  The URI string to parse.
  No parsing is performed if the object is already an
  &lt;code&gt;Addressable::URI&lt;/code&gt;.
</pre>
<p>
@param [Hash] hints
</p>
<pre>
  A &lt;code&gt;Hash&lt;/code&gt; of hints to the heuristic parser.
  Defaults to &lt;code&gt;{:scheme =&gt; &quot;http&quot;}&lt;/code&gt;.
</pre>
<p>
@return [Addressable::URI] The parsed <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000046_source')" id="l_M000046_source">show</a>
                        
                    </p>
                    <div id="M000046_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 156</span>
156:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">heuristic_parse</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">hints</span>={})
157:       <span class="ruby-comment cmt"># If we were given nil, return nil.</span>
158:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uri</span>
159:       <span class="ruby-comment cmt"># If a URI object is passed, just return itself.</span>
160:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>)
161:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
162:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
163:       <span class="ruby-keyword kw">end</span>
164:       <span class="ruby-comment cmt"># Otherwise, convert to a String</span>
165:       <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">dup</span>
166:       <span class="ruby-identifier">hints</span> = {
167:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http&quot;</span>
168:       }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">hints</span>)
169:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">uri</span>
170:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^http:\/+/</span>
171:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^http:\/+/</span>, <span class="ruby-value str">&quot;http://&quot;</span>)
172:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^https:\/+/</span>
173:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^https:\/+/</span>, <span class="ruby-value str">&quot;https://&quot;</span>)
174:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^feed:\/+http:\/+/</span>
175:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^feed:\/+http:\/+/</span>, <span class="ruby-value str">&quot;feed:http://&quot;</span>)
176:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^feed:\/+/</span>
177:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^feed:\/+/</span>, <span class="ruby-value str">&quot;feed://&quot;</span>)
178:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^file:\/+/</span>
179:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^file:\/+/</span>, <span class="ruby-value str">&quot;file:///&quot;</span>)
180:       <span class="ruby-keyword kw">end</span>
181:       <span class="ruby-identifier">parsed</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
182:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^[^\/?#\.]+\.[^\/?#]+$/</span>
183:         <span class="ruby-identifier">parsed</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">hints</span>[<span class="ruby-identifier">:scheme</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;://&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">uri</span>)
184:       <span class="ruby-keyword kw">end</span>
185:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;.&quot;</span>)
186:         <span class="ruby-identifier">new_host</span> = <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">path</span>[<span class="ruby-regexp re">/^([^\/]+\.[^\/]*)/</span>, <span class="ruby-value">1</span>]
187:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_host</span>
188:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">defer_validation</span> <span class="ruby-keyword kw">do</span>
189:             <span class="ruby-identifier">new_path</span> = <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub</span>(
190:               <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;^&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">new_host</span>)), <span class="ruby-constant">EMPTYSTR</span>)
191:             <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">host</span> = <span class="ruby-identifier">new_host</span>
192:             <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">new_path</span>
193:             <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">hints</span>[<span class="ruby-identifier">:scheme</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">scheme</span>
194:           <span class="ruby-keyword kw">end</span>
195:         <span class="ruby-keyword kw">end</span>
196:       <span class="ruby-keyword kw">end</span>
197:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parsed</span>
198:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000081">
                    
                    <a name="M000081"></a><b>ip_based_schemes</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of known ip-based schemes. These schemes typically use a
similar <a href="URI.html">URI</a> form:
<tt>//&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;url-path&gt;</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000081_source')" id="l_M000081_source">show</a>
                        
                    </p>
                    <div id="M000081_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1115</span>
1115:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ip_based_schemes</span>
1116:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port_mapping</span>.<span class="ruby-identifier">keys</span>
1117:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000052">
                    
                    <a name="M000052"></a><b>join</b>(*uris)
                    
                </div>
                
                <div class="description">
                  <p>
Joins several URIs together.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] *uris
</p>
<pre>
  The URIs to join.
</pre>
<p>
@return [Addressable::URI] The joined <a href="URI.html">URI</a>.
</p>
<p>
@example
</p>
<pre>
  base = &quot;http://example.com/&quot;
  uri = Addressable::URI.parse(&quot;relative/path&quot;)
  Addressable::URI.join(base, uri)
  #=&gt; #&lt;Addressable::URI:0xcab390 URI:http://example.com/relative/path&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000052_source')" id="l_M000052_source">show</a>
                        
                    </p>
                    <div id="M000052_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 280</span>
280:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">uris</span>)
281:       <span class="ruby-identifier">uri_objects</span> = <span class="ruby-identifier">uris</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">uri</span><span class="ruby-operator">|</span>
282:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
283:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
284:         <span class="ruby-keyword kw">end</span>
285:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">uri</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>)
286:       <span class="ruby-keyword kw">end</span>
287:       <span class="ruby-identifier">result</span> = <span class="ruby-identifier">uri_objects</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">dup</span>
288:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">uri</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">uri_objects</span>
289:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">join!</span>(<span class="ruby-identifier">uri</span>)
290:       <span class="ruby-keyword kw">end</span>
291:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
292:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000060">
                    
                    <a name="M000060"></a><b>new</b>(options={})
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new uri object from component parts.
</p>
<p>
@option [String, <a href="URI.html#M000126">to_str</a>] scheme The scheme
component. @option [String, <a href="URI.html#M000126">to_str</a>] user The
user component. @option [String, <a href="URI.html#M000126">to_str</a>]
password The password component. @option [String, <a
href="URI.html#M000126">to_str</a>] userinfo
</p>
<pre>
  The userinfo component. If this is supplied, the user and password
  components must be omitted.
</pre>
<p>
@option [String, <a href="URI.html#M000126">to_str</a>] host The host
component. @option [String, <a href="URI.html#M000126">to_str</a>] port The
port component. @option [String, <a href="URI.html#M000126">to_str</a>]
authority
</p>
<pre>
  The authority component. If this is supplied, the user, password,
  userinfo, host, and port components must be omitted.
</pre>
<p>
@option [String, <a href="URI.html#M000126">to_str</a>] path The path
component. @option [String, <a href="URI.html#M000126">to_str</a>] query
The query component. @option [String, <a
href="URI.html#M000126">to_str</a>] fragment The fragment component.
</p>
<p>
@return [Addressable::URI] The constructed <a href="URI.html">URI</a>
object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000060_source')" id="l_M000060_source">show</a>
                        
                    </p>
                    <div id="M000060_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 691</span>
691:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span>={})
692:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
693:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">:userinfo</span>, <span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>, <span class="ruby-identifier">:host</span>, <span class="ruby-identifier">:port</span>]).<span class="ruby-identifier">any?</span>
694:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
695:             <span class="ruby-value str">&quot;Cannot specify both an authority and any of the components &quot;</span> <span class="ruby-operator">+</span>
696:             <span class="ruby-value str">&quot;within the authority.&quot;</span>
697:         <span class="ruby-keyword kw">end</span>
698:       <span class="ruby-keyword kw">end</span>
699:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>)
700:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>]).<span class="ruby-identifier">any?</span>
701:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
702:             <span class="ruby-value str">&quot;Cannot specify both a userinfo and either the user or password.&quot;</span>
703:         <span class="ruby-keyword kw">end</span>
704:       <span class="ruby-keyword kw">end</span>
705: 
706:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">defer_validation</span> <span class="ruby-keyword kw">do</span>
707:         <span class="ruby-comment cmt"># Bunch of crazy logic required because of the composite components</span>
708:         <span class="ruby-comment cmt"># like userinfo and authority.</span>
709:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:scheme</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:scheme</span>]
710:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:user</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:user</span>]
711:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:password</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:password</span>]
712:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">userinfo</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:userinfo</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:userinfo</span>]
713:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:host</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:host</span>]
714:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:port</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:port</span>]
715:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:authority</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:authority</span>]
716:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:path</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:path</span>]
717:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:query</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:query</span>]
718:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:fragment</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:fragment</span>]
719:       <span class="ruby-keyword kw">end</span>
720:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000055">
                    
                    <a name="M000055"></a><b>normalize_component</b>(component, character_class= CharacterClasses::RESERVED + CharacterClasses::UNRESERVED)
                    
                </div>
                
                <div class="description">
                  <p>
Normalizes the encoding of a <a href="URI.html">URI</a> component.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] component The <a
href="URI.html">URI</a> component to encode.
</p>
<p>
@param [String, Regexp] character_class
</p>
<pre>
  The characters which are not percent encoded. If a &lt;code&gt;String&lt;/code&gt;
  is passed, the &lt;code&gt;String&lt;/code&gt; must be formatted as a regular
  expression character class. (Do not include the surrounding square
  brackets.)  For example, &lt;code&gt;&quot;b-zB-Z0-9&quot;&lt;/code&gt; would cause
  everything but the letters 'b' through 'z' and the numbers '0'
  through '9' to be percent encoded. If a &lt;code&gt;Regexp&lt;/code&gt; is passed,
  the value &lt;code&gt;/[^b-zB-Z0-9]/&lt;/code&gt; would have the same effect. A
  set of useful &lt;code&gt;String&lt;/code&gt; values may be found in the
  &lt;code&gt;Addressable::URI::CharacterClasses&lt;/code&gt; module. The default
  value is the reserved plus unreserved character classes specified in
  &lt;a href=&quot;http://www.ietf.org/rfc/rfc3986.txt&quot;&gt;RFC 3986&lt;/a&gt;.
</pre>
<p>
@return [String] The normalized component.
</p>
<p>
@example
</p>
<pre>
  Addressable::URI.normalize_component(&quot;simpl%65/%65xampl%65&quot;, &quot;b-zB-Z&quot;)
  =&gt; &quot;simple%2Fex%61mple&quot;
  Addressable::URI.normalize_component(
    &quot;simpl%65/%65xampl%65&quot;, /[^b-zB-Z]/
  )
  =&gt; &quot;simple%2Fex%61mple&quot;
  Addressable::URI.normalize_component(
    &quot;simpl%65/%65xampl%65&quot;,
    Addressable::URI::CharacterClasses::UNRESERVED
  )
  =&gt; &quot;simple%2Fexample&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000055_source')" id="l_M000055_source">show</a>
                        
                    </p>
                    <div id="M000055_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 436</span>
436:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize_component</span>(<span class="ruby-identifier">component</span>, <span class="ruby-identifier">character_class</span>=
437:         <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">RESERVED</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>)
438:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">nil?</span>
439: 
440:       <span class="ruby-keyword kw">begin</span>
441:         <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">to_str</span>
442:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">TypeError</span>
443:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{component.class} into String.&quot;</span>
444:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">component</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
445: 
446:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-constant">Regexp</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">character_class</span>.<span class="ruby-identifier">class</span>)
447:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
448:           <span class="ruby-node">&quot;Expected String or Regexp, got #{character_class.inspect}&quot;</span>
449:       <span class="ruby-keyword kw">end</span>
450:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">character_class</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
451:         <span class="ruby-identifier">character_class</span> = <span class="ruby-node">/[^#{character_class}]/</span>
452:       <span class="ruby-keyword kw">end</span>
453:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
454:         <span class="ruby-comment cmt"># We can't perform regexps on invalid UTF sequences, but</span>
455:         <span class="ruby-comment cmt"># here we need to, so switch to ASCII.</span>
456:         <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">dup</span>
457:         <span class="ruby-identifier">component</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
458:       <span class="ruby-keyword kw">end</span>
459:       <span class="ruby-identifier">unencoded</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">component</span>)
460:       <span class="ruby-keyword kw">begin</span>
461:         <span class="ruby-identifier">encoded</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(
462:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">IDNA</span>.<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">unencoded</span>),
463:           <span class="ruby-identifier">character_class</span>
464:         )
465:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
466:         <span class="ruby-identifier">encoded</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">unencoded</span>)
467:       <span class="ruby-keyword kw">end</span>
468:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded</span>
469:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000057">
                    
                    <a name="M000057"></a><b>normalized_encode</b>(uri, returning=String)
                    
                </div>
                
                <div class="description">
                  <p>
Normalizes the encoding of a <a href="URI.html">URI</a>. Characters within
a hostname are not percent encoded to allow for internationalized domain
names.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] uri
</p>
<pre>
  The URI to encode.
</pre>
<p>
@param [Class] returning
</p>
<pre>
  The type of object to return.
  This value may only be set to &lt;code&gt;String&lt;/code&gt; or
  &lt;code&gt;Addressable::URI&lt;/code&gt;. All other values are invalid. Defaults
  to &lt;code&gt;String&lt;/code&gt;.
</pre>
<p>
@return [String, Addressable::URI]
</p>
<pre>
  The encoded URI.
  The return type is determined by the &lt;code&gt;returning&lt;/code&gt; parameter.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000057_source')" id="l_M000057_source">show</a>
                        
                    </p>
                    <div id="M000057_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 540</span>
540:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_encode</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">returning</span>=<span class="ruby-constant">String</span>)
541:       <span class="ruby-keyword kw">begin</span>
542:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>
543:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">TypeError</span>
544:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
545:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
546: 
547:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">returning</span>)
548:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
549:           <span class="ruby-value str">&quot;Expected Class (String or Addressable::URI), &quot;</span> <span class="ruby-operator">+</span>
550:           <span class="ruby-node">&quot;got #{returning.inspect}&quot;</span>
551:       <span class="ruby-keyword kw">end</span>
552:       <span class="ruby-identifier">uri_object</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">uri</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
553:       <span class="ruby-identifier">components</span> = {
554:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">scheme</span>),
555:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">user</span>),
556:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">password</span>),
557:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">host</span>),
558:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">port</span>,
559:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">path</span>),
560:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">query</span>),
561:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">uri_object</span>.<span class="ruby-identifier">fragment</span>)
562:       }
563:       <span class="ruby-identifier">components</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
564:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
565:           <span class="ruby-keyword kw">begin</span>
566:             <span class="ruby-identifier">components</span>[<span class="ruby-identifier">key</span>] =
567:               <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">IDNA</span>.<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_str</span>)
568:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
569:             <span class="ruby-comment cmt"># Likely a malformed UTF-8 character, skip unicode normalization</span>
570:             <span class="ruby-identifier">components</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_str</span>
571:           <span class="ruby-keyword kw">end</span>
572:         <span class="ruby-keyword kw">end</span>
573:       <span class="ruby-keyword kw">end</span>
574:       <span class="ruby-identifier">encoded_uri</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
575:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:scheme</span>],
576:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">SCHEME</span>),
577:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:user</span>],
578:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>),
579:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:password</span>],
580:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>),
581:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:host</span>],
582:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:port</span>],
583:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:path</span>],
584:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH</span>),
585:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:query</span>],
586:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">QUERY</span>),
587:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">components</span>[<span class="ruby-identifier">:fragment</span>],
588:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">FRAGMENT</span>)
589:       )
590:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>
591:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded_uri</span>.<span class="ruby-identifier">to_s</span>
592:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>
593:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">encoded_uri</span>
594:       <span class="ruby-keyword kw">end</span>
595:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000042">
                    
                    <a name="M000042"></a><b>parse</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <a href="URI.html">URI</a> object based on the parsed string.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] uri
</p>
<pre>
  The URI string to parse.
  No parsing is performed if the object is already an
  &lt;code&gt;Addressable::URI&lt;/code&gt;.
</pre>
<p>
@return [Addressable::URI] The parsed <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000042_source')" id="l_M000042_source">show</a>
                        
                    </p>
                    <div id="M000042_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 83</span>
 83:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
 84:       <span class="ruby-comment cmt"># If we were given nil, return nil.</span>
 85:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uri</span>
 86:       <span class="ruby-comment cmt"># If a URI object is passed, just return itself.</span>
 87:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-keyword kw">self</span>)
 88: 
 89:       <span class="ruby-comment cmt"># If a URI object of the Ruby standard library variety is passed,</span>
 90:       <span class="ruby-comment cmt"># convert it to a string, then parse the string.</span>
 91:       <span class="ruby-comment cmt"># We do the check this way because we don't want to accidentally</span>
 92:       <span class="ruby-comment cmt"># cause a missing constant exception to be thrown.</span>
 93:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^URI\b/</span>
 94:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>
 95:       <span class="ruby-keyword kw">end</span>
 96: 
 97:       <span class="ruby-comment cmt"># Otherwise, convert to a String</span>
 98:       <span class="ruby-keyword kw">begin</span>
 99:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>
100:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-constant">NoMethodError</span>
101:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
102:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
103: 
104:       <span class="ruby-comment cmt"># This Regexp supplied as an example in RFC 3986, and it works great.</span>
105:       <span class="ruby-identifier">scan</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">URIREGEX</span>)
106:       <span class="ruby-identifier">fragments</span> = <span class="ruby-identifier">scan</span>[<span class="ruby-value">0</span>]
107:       <span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">1</span>]
108:       <span class="ruby-identifier">authority</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">3</span>]
109:       <span class="ruby-identifier">path</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">4</span>]
110:       <span class="ruby-identifier">query</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">6</span>]
111:       <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">fragments</span>[<span class="ruby-value">8</span>]
112:       <span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">nil</span>
113:       <span class="ruby-identifier">password</span> = <span class="ruby-keyword kw">nil</span>
114:       <span class="ruby-identifier">host</span> = <span class="ruby-keyword kw">nil</span>
115:       <span class="ruby-identifier">port</span> = <span class="ruby-keyword kw">nil</span>
116:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
117:         <span class="ruby-comment cmt"># The Regexp above doesn't split apart the authority.</span>
118:         <span class="ruby-identifier">userinfo</span> = <span class="ruby-identifier">authority</span>[<span class="ruby-regexp re">/^([^\[\]]*)@/</span>, <span class="ruby-value">1</span>]
119:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">userinfo</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
120:           <span class="ruby-identifier">user</span> = <span class="ruby-identifier">userinfo</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/^([^:]*):?/</span>, <span class="ruby-value">1</span>]
121:           <span class="ruby-identifier">password</span> = <span class="ruby-identifier">userinfo</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/:(.*)$/</span>, <span class="ruby-value">1</span>]
122:         <span class="ruby-keyword kw">end</span>
123:         <span class="ruby-identifier">host</span> = <span class="ruby-identifier">authority</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^([^\[\]]*)@/</span>, <span class="ruby-constant">EMPTYSTR</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/:([^:@\[\]]*?)$/</span>, <span class="ruby-constant">EMPTYSTR</span>)
124:         <span class="ruby-identifier">port</span> = <span class="ruby-identifier">authority</span>[<span class="ruby-regexp re">/:([^:@\[\]]*?)$/</span>, <span class="ruby-value">1</span>]
125:       <span class="ruby-keyword kw">end</span>
126:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">port</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EMPTYSTR</span>
127:         <span class="ruby-identifier">port</span> = <span class="ruby-keyword kw">nil</span>
128:       <span class="ruby-keyword kw">end</span>
129: 
130:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
131:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">scheme</span>,
132:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>,
133:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">password</span>,
134:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">host</span>,
135:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">port</span>,
136:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">path</span>,
137:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">query</span>,
138:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">fragment</span>
139:       )
140:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000082">
                    
                    <a name="M000082"></a><b>port_mapping</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a hash of common IP-based schemes and their default port numbers.
Adding new schemes to this hash, as necessary, will allow for better <a
href="URI.html">URI</a> normalization.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000082_source')" id="l_M000082_source">show</a>
                        
                    </p>
                    <div id="M000082_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1122</span>
1122:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port_mapping</span>
1123:       <span class="ruby-constant">PORT_MAPPING</span>
1124:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000054">
                    
                    <a name="M000054"></a><b>unencode</b>(uri, returning=String)
                    
                </div>
                
                <div class="description">
                  <p>
Unencodes any percent encoded characters within a <a
href="URI.html">URI</a> component. This method may be used for unencoding
either components or full URIs, however, it is recommended to use the
<tt>unencode_component</tt> alias when unencoding components.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] uri
</p>
<pre>
  The URI or component to unencode.
</pre>
<p>
@param [Class] returning
</p>
<pre>
  The type of object to return.
  This value may only be set to &lt;code&gt;String&lt;/code&gt; or
  &lt;code&gt;Addressable::URI&lt;/code&gt;. All other values are invalid. Defaults
  to &lt;code&gt;String&lt;/code&gt;.
</pre>
<p>
@return [String, Addressable::URI]
</p>
<pre>
  The unencoded component or URI.
  The return type is determined by the &lt;code&gt;returning&lt;/code&gt; parameter.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000054_source')" id="l_M000054_source">show</a>
                        
                    </p>
                    <div id="M000054_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 373</span>
373:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">unencode</span>(<span class="ruby-identifier">uri</span>, <span class="ruby-identifier">returning</span>=<span class="ruby-constant">String</span>)
374:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">nil?</span>
375: 
376:       <span class="ruby-keyword kw">begin</span>
377:         <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>
378:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">TypeError</span>
379:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
380:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
381:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">returning</span>)
382:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
383:           <span class="ruby-value str">&quot;Expected Class (String or Addressable::URI), &quot;</span> <span class="ruby-operator">+</span>
384:           <span class="ruby-node">&quot;got #{returning.inspect}&quot;</span>
385:       <span class="ruby-keyword kw">end</span>
386:       <span class="ruby-identifier">result</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/%[0-9a-f]{2}/i</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sequence</span><span class="ruby-operator">|</span>
387:         <span class="ruby-identifier">sequence</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>].<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>).<span class="ruby-identifier">chr</span>
388:       <span class="ruby-keyword kw">end</span>
389:       <span class="ruby-identifier">result</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;utf-8&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
390:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>
391:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
392:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">returning</span> <span class="ruby-operator">==</span> <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>
393:         <span class="ruby-keyword kw">return</span> <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">result</span>)
394:       <span class="ruby-keyword kw">end</span>
395:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Private methods</div>
            
            <div class="method">
                <div class="title" id="M000130">
                    
                    <a name="M000130"></a><b>normalize_path</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show</a>
                        
                    </p>
                    <div id="M000130_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2173</span>
2173:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">path</span>)
2174:       <span class="ruby-comment cmt"># Section 5.2.4 of RFC 3986</span>
2175: 
2176:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">nil?</span>
2177:       <span class="ruby-identifier">normalized_path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">dup</span>
2178:       <span class="ruby-keyword kw">begin</span>
2179:         <span class="ruby-identifier">mod</span> = <span class="ruby-keyword kw">nil</span>
2180:         <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-constant">NPATH1</span>, <span class="ruby-constant">SLASH</span>)
2181: 
2182:         <span class="ruby-identifier">parent</span> = <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">match</span>(<span class="ruby-constant">NPATH2</span>)
2183:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">&amp;&amp;</span> ((<span class="ruby-identifier">parent</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">PARENT1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">parent</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">PARENT2</span>) \
2184:                       <span class="ruby-operator">||</span> (<span class="ruby-identifier">parent</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">PARENT1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">parent</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">PARENT2</span>))
2185:           <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/\/#{parent[1]}\/\.\.\/|(\/#{parent[2]}\/\.\.$)/</span>, <span class="ruby-constant">SLASH</span>)
2186:         <span class="ruby-keyword kw">end</span>
2187: 
2188:         <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-constant">NPATH3</span>, <span class="ruby-constant">EMPTYSTR</span>)
2189:         <span class="ruby-identifier">mod</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">normalized_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-constant">NPATH4</span>, <span class="ruby-constant">SLASH</span>)
2190:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">nil?</span>
2191: 
2192:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">normalized_path</span>
2193:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000109">
                    
                    <a name="M000109"></a><b>+</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="URI.html#M000052">join</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000119">
                    
                    <a name="M000119"></a><b>==</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the <a href="URI.html">URI</a> objects are equal.
This method normalizes both URIs before doing the comparison.
</p>
<p>
@param [Object] uri The <a href="URI.html">URI</a> to compare.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URIs are equivalent, &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000119_source')" id="l_M000119_source">show</a>
                        
                    </p>
                    <div id="M000119_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1998</span>
1998:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">uri</span>)
1999:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">URI</span>)
2000:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span>
2001:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000118">
                    
                    <a name="M000118"></a><b>===</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the <a href="URI.html">URI</a> objects are equal.
This method normalizes both URIs before doing the comparison, and allows
comparison against <tt>Strings</tt>.
</p>
<p>
@param [Object] uri The <a href="URI.html">URI</a> to compare.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URIs are equivalent, &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000118_source')" id="l_M000118_source">show</a>
                        
                    </p>
                    <div id="M000118_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1976</span>
1976:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">===</span>(<span class="ruby-identifier">uri</span>)
1977:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:normalize</span>)
1978:         <span class="ruby-identifier">uri_string</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span>
1979:       <span class="ruby-keyword kw">else</span>
1980:         <span class="ruby-keyword kw">begin</span>
1981:           <span class="ruby-identifier">uri_string</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span>
1982:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">InvalidURIError</span>, <span class="ruby-constant">TypeError</span>
1983:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
1984:         <span class="ruby-keyword kw">end</span>
1985:       <span class="ruby-keyword kw">end</span>
1986:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri_string</span>
1987:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000107">
                    
                    <a name="M000107"></a><b>absolute?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determines if the <a href="URI.html">URI</a> is absolute.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URI is absolute. &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000107_source')" id="l_M000107_source">show</a>
                        
                    </p>
                    <div id="M000107_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1645</span>
1645:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">absolute?</span>
1646:       <span class="ruby-keyword kw">return</span> <span class="ruby-operator">!</span><span class="ruby-identifier">relative?</span>
1647:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000077">
                    
                    <a name="M000077"></a><b>authority</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The authority component for this <a href="URI.html">URI</a>. Combines the
user, password, host, and port components.
</p>
<p>
@return [String] The authority component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000077_source')" id="l_M000077_source">show</a>
                        
                    </p>
                    <div id="M000077_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1023</span>
1023:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authority</span>
1024:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@authority</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1025:         <span class="ruby-identifier">authority</span> = <span class="ruby-value str">&quot;&quot;</span>
1026:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">userinfo</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1027:           <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.userinfo}@&quot;</span>
1028:         <span class="ruby-keyword kw">end</span>
1029:         <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>
1030:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1031:           <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;:#{self.port}&quot;</span>
1032:         <span class="ruby-keyword kw">end</span>
1033:         <span class="ruby-identifier">authority</span>
1034:       <span class="ruby-keyword kw">end</span>)
1035:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000079">
                    
                    <a name="M000079"></a><b>authority=</b>(new_authority)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the authority component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_authority The
new authority component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000079_source')" id="l_M000079_source">show</a>
                        
                    </p>
                    <div id="M000079_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1059</span>
1059:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authority=</span>(<span class="ruby-identifier">new_authority</span>)
1060:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_authority</span>
1061:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_authority</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1062:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_authority.class} into String.&quot;</span>
1063:         <span class="ruby-keyword kw">end</span>
1064:         <span class="ruby-identifier">new_authority</span> = <span class="ruby-identifier">new_authority</span>.<span class="ruby-identifier">to_str</span>
1065:         <span class="ruby-identifier">new_userinfo</span> = <span class="ruby-identifier">new_authority</span>[<span class="ruby-regexp re">/^([^\[\]]*)@/</span>, <span class="ruby-value">1</span>]
1066:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_userinfo</span>
1067:           <span class="ruby-identifier">new_user</span> = <span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/^([^:]*):?/</span>, <span class="ruby-value">1</span>]
1068:           <span class="ruby-identifier">new_password</span> = <span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/:(.*)$/</span>, <span class="ruby-value">1</span>]
1069:         <span class="ruby-keyword kw">end</span>
1070:         <span class="ruby-identifier">new_host</span> =
1071:           <span class="ruby-identifier">new_authority</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^([^\[\]]*)@/</span>, <span class="ruby-constant">EMPTYSTR</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/:([^:@\[\]]*?)$/</span>, <span class="ruby-constant">EMPTYSTR</span>)
1072:         <span class="ruby-identifier">new_port</span> =
1073:           <span class="ruby-identifier">new_authority</span>[<span class="ruby-regexp re">/:([^:@\[\]]*?)$/</span>, <span class="ruby-value">1</span>]
1074:       <span class="ruby-keyword kw">end</span>
1075: 
1076:       <span class="ruby-comment cmt"># Password assigned first to ensure validity in case of nil</span>
1077:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">new_password</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">new_password</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1078:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">new_user</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">new_user</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1079:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">new_host</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">new_host</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1080:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">new_port</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">new_port</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1081: 
1082:       <span class="ruby-comment cmt"># Reset dependant values</span>
1083:       <span class="ruby-ivar">@userinfo</span> = <span class="ruby-keyword kw">nil</span>
1084:       <span class="ruby-ivar">@normalized_userinfo</span> = <span class="ruby-keyword kw">nil</span>
1085:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1086:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1087: 
1088:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
1089:       <span class="ruby-identifier">validate</span>()
1090:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000093">
                    
                    <a name="M000093"></a><b>basename</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The basename, if any, of the file in the path component.
</p>
<p>
@return [String] The path&#8217;s basename.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000093_source')" id="l_M000093_source">show</a>
                        
                    </p>
                    <div id="M000093_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1315</span>
1315:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">basename</span>
1316:       <span class="ruby-comment cmt"># Path cannot be nil</span>
1317:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/;[^\/]*$/</span>, <span class="ruby-constant">EMPTYSTR</span>)
1318:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000129">
                    
                    <a name="M000129"></a><b>defer_validation</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
This method allows you to make several changes to a <a
href="URI.html">URI</a> simultaneously, which separately would cause
validation errors, but in conjunction, are valid. The <a
href="URI.html">URI</a> will be revalidated as soon as the entire block has
been executed.
</p>
<p>
@param [Proc] block
</p>
<pre>
  A set of operations to perform on a given URI.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show</a>
                        
                    </p>
                    <div id="M000129_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2148</span>
2148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">defer_validation</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
2149:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">LocalJumpError</span>, <span class="ruby-value str">&quot;No block given.&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block</span>
2150:       <span class="ruby-ivar">@validation_deferred</span> = <span class="ruby-keyword kw">true</span>
2151:       <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>()
2152:       <span class="ruby-ivar">@validation_deferred</span> = <span class="ruby-keyword kw">false</span>
2153:       <span class="ruby-identifier">validate</span>
2154:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
2155:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000117">
                    
                    <a name="M000117"></a><b>display_uri</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Creates a <a href="URI.html">URI</a> suitable for display to users. If
semantic attacks are likely, the application should try to detect these and
warn the user. See <a href=&#8220;<a
href="http://www.ietf.org/rfc/rfc3986.txt">RFC">www.ietf.org/rfc/rfc3986.txt">RFC</a>
3986</a>, section 7.6 for more information.
</p>
<p>
@return [Addressable::URI] A <a href="URI.html">URI</a> suitable for
display purposes.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000117_source')" id="l_M000117_source">show</a>
                        
                    </p>
                    <div id="M000117_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1960</span>
1960:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_uri</span>
1961:       <span class="ruby-identifier">display_uri</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>
1962:       <span class="ruby-identifier">display_uri</span>.<span class="ruby-identifier">host</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">IDNA</span>.<span class="ruby-identifier">to_unicode</span>(<span class="ruby-identifier">display_uri</span>.<span class="ruby-identifier">host</span>)
1963:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">display_uri</span>
1964:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000122">
                    
                    <a name="M000122"></a><b>dup</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Clones the <a href="URI.html">URI</a> object.
</p>
<p>
@return [Addressable::URI] The cloned <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000122_source')" id="l_M000122_source">show</a>
                        
                    </p>
                    <div id="M000122_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2030</span>
2030:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dup</span>
2031:       <span class="ruby-identifier">duplicated_uri</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
2032:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2033:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2034:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2035:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2036:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>,
2037:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2038:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>,
2039:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
2040:       )
2041:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">duplicated_uri</span>
2042:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000120">
                    
                    <a name="M000120"></a><b>eql?</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the <a href="URI.html">URI</a> objects are equal.
This method does NOT normalize either <a href="URI.html">URI</a> before
doing the comparison.
</p>
<p>
@param [Object] uri The <a href="URI.html">URI</a> to compare.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URIs are equivalent, &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000120_source')" id="l_M000120_source">show</a>
                        
                    </p>
                    <div id="M000120_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2012</span>
2012:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">uri</span>)
2013:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">URI</span>)
2014:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>
2015:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000094">
                    
                    <a name="M000094"></a><b>extname</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The extname, if any, of the file in the path component. Empty string if
there is no extension.
</p>
<p>
@return [String] The path&#8217;s extname.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000094_source')" id="l_M000094_source">show</a>
                        
                    </p>
                    <div id="M000094_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1325</span>
1325:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extname</span>
1326:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>
1327:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">extname</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">basename</span>)
1328:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000102">
                    
                    <a name="M000102"></a><b>fragment</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The fragment component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The fragment component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show</a>
                        
                    </p>
                    <div id="M000102_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1579</span>
1579:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fragment</span>
1580:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@fragment</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@fragment</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1581:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000104">
                    
                    <a name="M000104"></a><b>fragment=</b>(new_fragment)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the fragment component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_fragment The new
fragment component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show</a>
                        
                    </p>
                    <div id="M000104_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1600</span>
1600:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fragment=</span>(<span class="ruby-identifier">new_fragment</span>)
1601:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_fragment</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_fragment</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1602:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_fragment.class} into String.&quot;</span>
1603:       <span class="ruby-keyword kw">end</span>
1604:       <span class="ruby-ivar">@fragment</span> = <span class="ruby-identifier">new_fragment</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_fragment</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1605: 
1606:       <span class="ruby-comment cmt"># Reset dependant values</span>
1607:       <span class="ruby-ivar">@normalized_fragment</span> = <span class="ruby-keyword kw">nil</span>
1608:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1609:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1610: 
1611:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
1612:       <span class="ruby-identifier">validate</span>()
1613:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000061">
                    
                    <a name="M000061"></a><b>freeze</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Freeze <a href="URI.html">URI</a>, initializing instance variables.
</p>
<p>
@return [Addressable::URI] The frozen <a href="URI.html">URI</a> object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000061_source')" id="l_M000061_source">show</a>
                        
                    </p>
                    <div id="M000061_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 726</span>
726:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">freeze</span>
727:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span>
728:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_user</span>
729:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_password</span>
730:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_userinfo</span>
731:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_host</span>
732:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_port</span>
733:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_authority</span>
734:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_site</span>
735:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_path</span>
736:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_query</span>
737:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_fragment</span>
738:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">hash</span>
739:       <span class="ruby-keyword kw">super</span>
740:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000121">
                    
                    <a name="M000121"></a><b>hash</b>()
                    
                </div>
                
                <div class="description">
                  <p>
A hash value that will make a <a href="URI.html">URI</a> equivalent to its
normalized form.
</p>
<p>
@return [Integer] A hash of the <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000121_source')" id="l_M000121_source">show</a>
                        
                    </p>
                    <div id="M000121_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2022</span>
2022:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
2023:       <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@hash</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">hash</span> <span class="ruby-operator">*</span> <span class="ruby-value">-1</span>)
2024:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000074">
                    
                    <a name="M000074"></a><b>host</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The host component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The host component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show</a>
                        
                    </p>
                    <div id="M000074_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 969</span>
969:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">host</span>
970:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@host</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@host</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
971:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000076">
                    
                    <a name="M000076"></a><b>host=</b>(new_host)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the host component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_host The new
host component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000076_source')" id="l_M000076_source">show</a>
                        
                    </p>
                    <div id="M000076_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1002</span>
1002:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">host=</span>(<span class="ruby-identifier">new_host</span>)
1003:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_host</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_host</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1004:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_host.class} into String.&quot;</span>
1005:       <span class="ruby-keyword kw">end</span>
1006:       <span class="ruby-ivar">@host</span> = <span class="ruby-identifier">new_host</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_host</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1007: 
1008:       <span class="ruby-comment cmt"># Reset dependant values</span>
1009:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
1010:       <span class="ruby-ivar">@normalized_host</span> = <span class="ruby-keyword kw">nil</span>
1011:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1012:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1013: 
1014:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
1015:       <span class="ruby-identifier">validate</span>()
1016:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000086">
                    
                    <a name="M000086"></a><b>inferred_port</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The inferred port component for this <a href="URI.html">URI</a>. This
method will normalize to the default port for the URI&#8217;s scheme if the
port isn&#8217;t explicitly specified in the <a href="URI.html">URI</a>.
</p>
<p>
@return [Integer] The inferred port component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show</a>
                        
                    </p>
                    <div id="M000086_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1180</span>
1180:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inferred_port</span>
1181:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1182:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>
1183:           <span class="ruby-constant">URI</span>.<span class="ruby-identifier">port_mapping</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">downcase</span>]
1184:         <span class="ruby-keyword kw">else</span>
1185:           <span class="ruby-keyword kw">nil</span>
1186:         <span class="ruby-keyword kw">end</span>
1187:       <span class="ruby-keyword kw">else</span>
1188:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>.<span class="ruby-identifier">to_i</span>
1189:       <span class="ruby-keyword kw">end</span>
1190:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000128">
                    
                    <a name="M000128"></a><b>inspect</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <tt>String</tt> representation of the <a href="URI.html">URI</a>
object&#8217;s state.
</p>
<p>
@return [String] The <a href="URI.html">URI</a> object&#8217;s state, as a
<tt>String</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000128_source')" id="l_M000128_source">show</a>
                        
                    </p>
                    <div id="M000128_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2136</span>
2136:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
2137:       <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;#&lt;%s:%#0x URI:%s&gt;&quot;</span>, <span class="ruby-constant">URI</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">object_id</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>)
2138:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000105">
                    
                    <a name="M000105"></a><b>ip_based?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determines if the scheme indicates an IP-based protocol.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the scheme indicates an IP-based protocol.
  &lt;code&gt;false&lt;/code&gt; otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show</a>
                        
                    </p>
                    <div id="M000105_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1621</span>
1621:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip_based?</span>
1622:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>
1623:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">ip_based_schemes</span>.<span class="ruby-identifier">include?</span>(
1624:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">downcase</span>)
1625:       <span class="ruby-keyword kw">end</span>
1626:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
1627:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000108">
                    
                    <a name="M000108"></a><b>join</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Joins two URIs together.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] The <a href="URI.html">URI</a> to join
with.
</p>
<p>
@return [Addressable::URI] The joined <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="URI.html#M000109">+</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show</a>
                        
                    </p>
                    <div id="M000108_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1655</span>
1655:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join</span>(<span class="ruby-identifier">uri</span>)
1656:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1657:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{uri.class} into String.&quot;</span>
1658:       <span class="ruby-keyword kw">end</span>
1659:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">URI</span>)
1660:         <span class="ruby-comment cmt"># Otherwise, convert to a String, then parse.</span>
1661:         <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_str</span>)
1662:       <span class="ruby-keyword kw">end</span>
1663:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">empty?</span>
1664:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">dup</span>
1665:       <span class="ruby-keyword kw">end</span>
1666: 
1667:       <span class="ruby-identifier">joined_scheme</span> = <span class="ruby-keyword kw">nil</span>
1668:       <span class="ruby-identifier">joined_user</span> = <span class="ruby-keyword kw">nil</span>
1669:       <span class="ruby-identifier">joined_password</span> = <span class="ruby-keyword kw">nil</span>
1670:       <span class="ruby-identifier">joined_host</span> = <span class="ruby-keyword kw">nil</span>
1671:       <span class="ruby-identifier">joined_port</span> = <span class="ruby-keyword kw">nil</span>
1672:       <span class="ruby-identifier">joined_path</span> = <span class="ruby-keyword kw">nil</span>
1673:       <span class="ruby-identifier">joined_query</span> = <span class="ruby-keyword kw">nil</span>
1674:       <span class="ruby-identifier">joined_fragment</span> = <span class="ruby-keyword kw">nil</span>
1675: 
1676:       <span class="ruby-comment cmt"># Section 5.2.2 of RFC 3986</span>
1677:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1678:         <span class="ruby-identifier">joined_scheme</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
1679:         <span class="ruby-identifier">joined_user</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span>
1680:         <span class="ruby-identifier">joined_password</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span>
1681:         <span class="ruby-identifier">joined_host</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>
1682:         <span class="ruby-identifier">joined_port</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>
1683:         <span class="ruby-identifier">joined_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)
1684:         <span class="ruby-identifier">joined_query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1685:       <span class="ruby-keyword kw">else</span>
1686:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1687:           <span class="ruby-identifier">joined_user</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span>
1688:           <span class="ruby-identifier">joined_password</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span>
1689:           <span class="ruby-identifier">joined_host</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>
1690:           <span class="ruby-identifier">joined_port</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>
1691:           <span class="ruby-identifier">joined_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)
1692:           <span class="ruby-identifier">joined_query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1693:         <span class="ruby-keyword kw">else</span>
1694:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span>
1695:             <span class="ruby-identifier">joined_path</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>
1696:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1697:               <span class="ruby-identifier">joined_query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1698:             <span class="ruby-keyword kw">else</span>
1699:               <span class="ruby-identifier">joined_query</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>
1700:             <span class="ruby-keyword kw">end</span>
1701:           <span class="ruby-keyword kw">else</span>
1702:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">SLASH</span>
1703:               <span class="ruby-identifier">joined_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)
1704:             <span class="ruby-keyword kw">else</span>
1705:               <span class="ruby-identifier">base_path</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">dup</span>
1706:               <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">EMPTYSTR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">base_path</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
1707:               <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">base_path</span>)
1708: 
1709:               <span class="ruby-comment cmt"># Section 5.2.3 of RFC 3986</span>
1710:               <span class="ruby-comment cmt">#</span>
1711:               <span class="ruby-comment cmt"># Removes the right-most path segment from the base path.</span>
1712:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">base_path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\//</span>
1713:                 <span class="ruby-identifier">base_path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\/[^\/]+$/</span>, <span class="ruby-constant">SLASH</span>)
1714:               <span class="ruby-keyword kw">else</span>
1715:                 <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">EMPTYSTR</span>
1716:               <span class="ruby-keyword kw">end</span>
1717: 
1718:               <span class="ruby-comment cmt"># If the base path is empty and an authority segment has been</span>
1719:               <span class="ruby-comment cmt"># defined, use a base path of SLASH</span>
1720:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">base_path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1721:                 <span class="ruby-identifier">base_path</span> = <span class="ruby-constant">SLASH</span>
1722:               <span class="ruby-keyword kw">end</span>
1723: 
1724:               <span class="ruby-identifier">joined_path</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">base_path</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)
1725:             <span class="ruby-keyword kw">end</span>
1726:             <span class="ruby-identifier">joined_query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1727:           <span class="ruby-keyword kw">end</span>
1728:           <span class="ruby-identifier">joined_user</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>
1729:           <span class="ruby-identifier">joined_password</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>
1730:           <span class="ruby-identifier">joined_host</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>
1731:           <span class="ruby-identifier">joined_port</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>
1732:         <span class="ruby-keyword kw">end</span>
1733:         <span class="ruby-identifier">joined_scheme</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>
1734:       <span class="ruby-keyword kw">end</span>
1735:       <span class="ruby-identifier">joined_fragment</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">fragment</span>
1736: 
1737:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
1738:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_scheme</span>,
1739:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_user</span>,
1740:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_password</span>,
1741:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_host</span>,
1742:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_port</span>,
1743:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_path</span>,
1744:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_query</span>,
1745:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">joined_fragment</span>
1746:       )
1747:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000110">
                    
                    <a name="M000110"></a><b>join!</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Destructive form of <tt>join</tt>.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] The <a href="URI.html">URI</a> to join
with.
</p>
<p>
@return [Addressable::URI] The joined <a href="URI.html">URI</a>.
</p>
<p>
@see <a href="URI.html#M000052">Addressable::URI#join</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show</a>
                        
                    </p>
                    <div id="M000110_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1758</span>
1758:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join!</span>(<span class="ruby-identifier">uri</span>)
1759:       <span class="ruby-identifier">replace_self</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">uri</span>))
1760:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000111">
                    
                    <a name="M000111"></a><b>merge</b>(hash)
                    
                </div>
                
                <div class="description">
                  <p>
Merges a <a href="URI.html">URI</a> with a <tt>Hash</tt> of components.
This method has different behavior from <tt>join</tt>. Any components
present in the <tt>hash</tt> parameter will override the original
components. The path component is not treated specially.
</p>
<p>
@param [Hash, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000127">to_hash</a>] The components to merge with.
</p>
<p>
@return [Addressable::URI] The merged <a href="URI.html">URI</a>.
</p>
<p>
@see Hash#merge
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000111_source')" id="l_M000111_source">show</a>
                        
                    </p>
                    <div id="M000111_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1773</span>
1773:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge</span>(<span class="ruby-identifier">hash</span>)
1774:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_hash</span>)
1775:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{hash.class} into Hash.&quot;</span>
1776:       <span class="ruby-keyword kw">end</span>
1777:       <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">to_hash</span>
1778: 
1779:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
1780:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">:userinfo</span>, <span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>, <span class="ruby-identifier">:host</span>, <span class="ruby-identifier">:port</span>]).<span class="ruby-identifier">any?</span>
1781:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
1782:             <span class="ruby-value str">&quot;Cannot specify both an authority and any of the components &quot;</span> <span class="ruby-operator">+</span>
1783:             <span class="ruby-value str">&quot;within the authority.&quot;</span>
1784:         <span class="ruby-keyword kw">end</span>
1785:       <span class="ruby-keyword kw">end</span>
1786:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>)
1787:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&amp;</span> [<span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>]).<span class="ruby-identifier">any?</span>
1788:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
1789:             <span class="ruby-value str">&quot;Cannot specify both a userinfo and either the user or password.&quot;</span>
1790:         <span class="ruby-keyword kw">end</span>
1791:       <span class="ruby-keyword kw">end</span>
1792: 
1793:       <span class="ruby-identifier">uri</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>
1794:       <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">defer_validation</span> <span class="ruby-keyword kw">do</span>
1795:         <span class="ruby-comment cmt"># Bunch of crazy logic required because of the composite components</span>
1796:         <span class="ruby-comment cmt"># like userinfo and authority.</span>
1797:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> =
1798:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:scheme</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:scheme</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>
1799:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
1800:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">authority</span> =
1801:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:authority</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span>
1802:         <span class="ruby-keyword kw">end</span>
1803:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>)
1804:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">userinfo</span> =
1805:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:userinfo</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">userinfo</span>
1806:         <span class="ruby-keyword kw">end</span>
1807:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:userinfo</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
1808:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span> =
1809:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:user</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:user</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>
1810:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span> =
1811:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:password</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:password</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>
1812:         <span class="ruby-keyword kw">end</span>
1813:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:authority</span>)
1814:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span> =
1815:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:host</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:host</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>
1816:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span> =
1817:             <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:port</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:port</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>
1818:         <span class="ruby-keyword kw">end</span>
1819:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> =
1820:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:path</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:path</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>
1821:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span> =
1822:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:query</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:query</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>
1823:         <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">fragment</span> =
1824:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:fragment</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:fragment</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span>
1825:       <span class="ruby-keyword kw">end</span>
1826: 
1827:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>
1828:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000112">
                    
                    <a name="M000112"></a><b>merge!</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Destructive form of <tt>merge</tt>.
</p>
<p>
@param [Hash, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000127">to_hash</a>] The components to merge with.
</p>
<p>
@return [Addressable::URI] The merged <a href="URI.html">URI</a>.
</p>
<p>
@see <a href="URI.html#M000111">Addressable::URI#merge</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show</a>
                        
                    </p>
                    <div id="M000112_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1838</span>
1838:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">uri</span>)
1839:       <span class="ruby-identifier">replace_self</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">uri</span>))
1840:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000115">
                    
                    <a name="M000115"></a><b>normalize</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a normalized <a href="URI.html">URI</a> object.
</p>
<p>
NOTE: This method does not attempt to fully conform to specifications. It
exists largely to correct other people&#8217;s failures to read the
specifications, and also to deal with caching issues since several
different URIs may represent the same resource and should not be cached
multiple times.
</p>
<p>
@return [Addressable::URI] The normalized <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show</a>
                        
                    </p>
                    <div id="M000115_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1923</span>
1923:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalize</span>
1924:       <span class="ruby-comment cmt"># This is a special exception for the frequently misused feed</span>
1925:       <span class="ruby-comment cmt"># URI scheme.</span>
1926:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_scheme</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;feed&quot;</span>
1927:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^feed:\/*http:\/*/</span>
1928:           <span class="ruby-keyword kw">return</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(
1929:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-regexp re">/^feed:\/*(http:\/*.*)/</span>, <span class="ruby-value">1</span>]
1930:           ).<span class="ruby-identifier">normalize</span>
1931:         <span class="ruby-keyword kw">end</span>
1932:       <span class="ruby-keyword kw">end</span>
1933: 
1934:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
1935:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_scheme</span>,
1936:         <span class="ruby-identifier">:authority</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_authority</span>,
1937:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_path</span>,
1938:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_query</span>,
1939:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">normalized_fragment</span>
1940:       )
1941:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000116">
                    
                    <a name="M000116"></a><b>normalize!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Destructively normalizes this <a href="URI.html">URI</a> object.
</p>
<p>
@return [Addressable::URI] The normalized <a href="URI.html">URI</a>.
</p>
<p>
@see <a href="URI.html#M000115">Addressable::URI#normalize</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000116_source')" id="l_M000116_source">show</a>
                        
                    </p>
                    <div id="M000116_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1949</span>
1949:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalize!</span>
1950:       <span class="ruby-identifier">replace_self</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>)
1951:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000078">
                    
                    <a name="M000078"></a><b>normalized_authority</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The authority component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The authority component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000078_source')" id="l_M000078_source">show</a>
                        
                    </p>
                    <div id="M000078_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1041</span>
1041:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_authority</span>
1042:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_authority</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1043:         <span class="ruby-identifier">authority</span> = <span class="ruby-value str">&quot;&quot;</span>
1044:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_userinfo</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1045:           <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.normalized_userinfo}@&quot;</span>
1046:         <span class="ruby-keyword kw">end</span>
1047:         <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_host</span>
1048:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1049:           <span class="ruby-identifier">authority</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;:#{self.normalized_port}&quot;</span>
1050:         <span class="ruby-keyword kw">end</span>
1051:         <span class="ruby-identifier">authority</span>
1052:       <span class="ruby-keyword kw">end</span>)
1053:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000103">
                    
                    <a name="M000103"></a><b>normalized_fragment</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The fragment component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The fragment component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show</a>
                        
                    </p>
                    <div id="M000103_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1587</span>
1587:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_fragment</span>
1588:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_fragment</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1589:         <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
1590:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">strip</span>,
1591:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">FRAGMENT</span>
1592:         )
1593:       <span class="ruby-keyword kw">end</span>)
1594:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000075">
                    
                    <a name="M000075"></a><b>normalized_host</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The host component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The host component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show</a>
                        
                    </p>
                    <div id="M000075_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 977</span>
977:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_host</span>
978:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_host</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
979:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
980:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
981:             <span class="ruby-identifier">result</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">IDNA</span>.<span class="ruby-identifier">to_ascii</span>(
982:               <span class="ruby-constant">URI</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">downcase</span>)
983:             )
984:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>[<span class="ruby-value">-1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;.&quot;</span>
985:               <span class="ruby-comment cmt"># Trailing dots are unnecessary</span>
986:               <span class="ruby-identifier">result</span> = <span class="ruby-identifier">result</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>]
987:             <span class="ruby-keyword kw">end</span>
988:             <span class="ruby-identifier">result</span>
989:           <span class="ruby-keyword kw">else</span>
990:             <span class="ruby-constant">EMPTYSTR</span>
991:           <span class="ruby-keyword kw">end</span>
992:         <span class="ruby-keyword kw">else</span>
993:           <span class="ruby-keyword kw">nil</span>
994:         <span class="ruby-keyword kw">end</span>
995:       <span class="ruby-keyword kw">end</span>)
996:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000069">
                    
                    <a name="M000069"></a><b>normalized_password</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The password component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The password component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show</a>
                        
                    </p>
                    <div id="M000069_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 857</span>
857:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_password</span>
858:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_password</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
859:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/https?/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
860:             (<span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>)
861:           <span class="ruby-keyword kw">nil</span>
862:         <span class="ruby-keyword kw">else</span>
863:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
864:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">strip</span>,
865:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
866:           )
867:         <span class="ruby-keyword kw">end</span>
868:       <span class="ruby-keyword kw">end</span>)
869:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000091">
                    
                    <a name="M000091"></a><b>normalized_path</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The path component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The path component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000091_source')" id="l_M000091_source">show</a>
                        
                    </p>
                    <div id="M000091_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1267</span>
1267:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_path</span>
1268:       <span class="ruby-ivar">@normalized_path</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1269:         <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_s</span>
1270:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">NORMPATH</span>
1271:           <span class="ruby-comment cmt"># Relative paths with colons in the first segment are ambiguous.</span>
1272:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">&quot;:&quot;</span>, <span class="ruby-value str">&quot;%2F&quot;</span>)
1273:         <span class="ruby-keyword kw">end</span>
1274:         <span class="ruby-comment cmt"># String#split(delimeter, -1) uses the more strict splitting behavior</span>
1275:         <span class="ruby-comment cmt"># found by default in Python.</span>
1276:         <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">path</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">SLASH</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">segment</span><span class="ruby-operator">|</span>
1277:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
1278:             <span class="ruby-identifier">segment</span>,
1279:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">PCHAR</span>
1280:           )
1281:         <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">join</span>(<span class="ruby-constant">SLASH</span>)
1282: 
1283:         <span class="ruby-identifier">result</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_path</span>(<span class="ruby-identifier">result</span>)
1284:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
1285:             [<span class="ruby-value str">&quot;http&quot;</span>, <span class="ruby-value str">&quot;https&quot;</span>, <span class="ruby-value str">&quot;ftp&quot;</span>, <span class="ruby-value str">&quot;tftp&quot;</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span>)
1286:           <span class="ruby-identifier">result</span> = <span class="ruby-constant">SLASH</span>
1287:         <span class="ruby-keyword kw">end</span>
1288:         <span class="ruby-identifier">result</span>
1289:       <span class="ruby-keyword kw">end</span>)
1290:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000084">
                    
                    <a name="M000084"></a><b>normalized_port</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The port component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [Integer] The port component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show</a>
                        
                    </p>
                    <div id="M000084_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1140</span>
1140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_port</span>
1141:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">port_mapping</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>
1142:         <span class="ruby-keyword kw">nil</span>
1143:       <span class="ruby-keyword kw">else</span>
1144:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>
1145:       <span class="ruby-keyword kw">end</span>
1146:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000096">
                    
                    <a name="M000096"></a><b>normalized_query</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The query component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The query component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show</a>
                        
                    </p>
                    <div id="M000096_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1342</span>
1342:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_query</span>
1343:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_query</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1344:         (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span><span class="ruby-operator">|</span>
1345:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
1346:             <span class="ruby-identifier">pair</span>,
1347:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">QUERY</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">&quot;\\&amp;&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>)
1348:           )
1349:         <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>)
1350:       <span class="ruby-keyword kw">end</span>)
1351:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000063">
                    
                    <a name="M000063"></a><b>normalized_scheme</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The scheme component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The scheme component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000063_source')" id="l_M000063_source">show</a>
                        
                    </p>
                    <div id="M000063_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 754</span>
754:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_scheme</span>
755:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_scheme</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
756:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*ssh\+svn\s*$/i</span>
757:           <span class="ruby-value str">&quot;svn+ssh&quot;</span>
758:         <span class="ruby-keyword kw">else</span>
759:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
760:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">downcase</span>,
761:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">SCHEME</span>
762:           )
763:         <span class="ruby-keyword kw">end</span>
764:       <span class="ruby-keyword kw">end</span>)
765:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000088">
                    
                    <a name="M000088"></a><b>normalized_site</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The normalized combination of components that represent a site. Combines
the scheme, user, password, host, and port components. Primarily useful for
HTTP and HTTPS.
</p>
<p>
For example, <tt>&quot;<a
href="http://example.com/path?query">example.com/path?query</a>&quot;</tt>
would have a <tt>site</tt> value of <tt>&quot;<a
href="http://example.com">example.com</a>&quot;</tt>.
</p>
<p>
@return [String] The normalized components that identify a site.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show</a>
                        
                    </p>
                    <div id="M000088_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1219</span>
1219:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_site</span>
1220:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">site</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_site</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1221:         <span class="ruby-identifier">site_string</span> = <span class="ruby-value str">&quot;&quot;</span>
1222:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1223:           <span class="ruby-identifier">site_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.normalized_scheme}:&quot;</span>
1224:         <span class="ruby-keyword kw">end</span>
1225:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1226:           <span class="ruby-identifier">site_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;//#{self.normalized_authority}&quot;</span>
1227:         <span class="ruby-keyword kw">end</span>
1228:         <span class="ruby-identifier">site_string</span>
1229:       <span class="ruby-keyword kw">end</span>)
1230:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000066">
                    
                    <a name="M000066"></a><b>normalized_user</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The user component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The user component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000066_source')" id="l_M000066_source">show</a>
                        
                    </p>
                    <div id="M000066_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 804</span>
804:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_user</span>
805:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_user</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
806:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_scheme</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/https?/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
807:             (<span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>)
808:           <span class="ruby-keyword kw">nil</span>
809:         <span class="ruby-keyword kw">else</span>
810:           <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">normalize_component</span>(
811:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">strip</span>,
812:             <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span><span class="ruby-operator">::</span><span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>
813:           )
814:         <span class="ruby-keyword kw">end</span>
815:       <span class="ruby-keyword kw">end</span>)
816:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000072">
                    
                    <a name="M000072"></a><b>normalized_userinfo</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The userinfo component for this <a href="URI.html">URI</a>, normalized.
</p>
<p>
@return [String] The userinfo component, normalized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000072_source')" id="l_M000072_source">show</a>
                        
                    </p>
                    <div id="M000072_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 921</span>
921:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalized_userinfo</span>
922:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">userinfo</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@normalized_userinfo</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
923:         <span class="ruby-identifier">current_user</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_user</span>
924:         <span class="ruby-identifier">current_password</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_password</span>
925:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_password</span>
926:           <span class="ruby-keyword kw">nil</span>
927:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_password</span>
928:           <span class="ruby-node">&quot;#{current_user}:#{current_password}&quot;</span>
929:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_password</span>
930:           <span class="ruby-node">&quot;#{current_user}&quot;</span>
931:         <span class="ruby-keyword kw">end</span>
932:       <span class="ruby-keyword kw">end</span>)
933:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000123">
                    
                    <a name="M000123"></a><b>omit</b>(*components)
                    
                </div>
                
                <div class="description">
                  <p>
Omits components from a <a href="URI.html">URI</a>.
</p>
<p>
@param [Symbol] *components The components to be omitted.
</p>
<p>
@return [Addressable::URI] The <a href="URI.html">URI</a> with components
omitted.
</p>
<p>
@example
</p>
<pre>
  uri = Addressable::URI.parse(&quot;http://example.com/path?query&quot;)
  #=&gt; #&lt;Addressable::URI:0xcc5e7a URI:http://example.com/path?query&gt;
  uri.omit(:scheme, :authority)
  #=&gt; #&lt;Addressable::URI:0xcc4d86 URI:/path?query&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show</a>
                        
                    </p>
                    <div id="M000123_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2056</span>
2056:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">omit</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">components</span>)
2057:       <span class="ruby-identifier">invalid_components</span> = <span class="ruby-identifier">components</span> <span class="ruby-operator">-</span> [
2058:         <span class="ruby-identifier">:scheme</span>, <span class="ruby-identifier">:user</span>, <span class="ruby-identifier">:password</span>, <span class="ruby-identifier">:userinfo</span>, <span class="ruby-identifier">:host</span>, <span class="ruby-identifier">:port</span>, <span class="ruby-identifier">:authority</span>,
2059:         <span class="ruby-identifier">:path</span>, <span class="ruby-identifier">:query</span>, <span class="ruby-identifier">:fragment</span>
2060:       ]
2061:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">invalid_components</span>.<span class="ruby-identifier">empty?</span>
2062:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
2063:           <span class="ruby-node">&quot;Invalid component names: #{invalid_components.inspect}.&quot;</span>
2064:       <span class="ruby-keyword kw">end</span>
2065:       <span class="ruby-identifier">duplicated_uri</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">dup</span>
2066:       <span class="ruby-identifier">duplicated_uri</span>.<span class="ruby-identifier">defer_validation</span> <span class="ruby-keyword kw">do</span>
2067:         <span class="ruby-identifier">components</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span>
2068:           <span class="ruby-identifier">duplicated_uri</span>.<span class="ruby-identifier">send</span>((<span class="ruby-identifier">component</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;=&quot;</span>).<span class="ruby-identifier">to_sym</span>, <span class="ruby-keyword kw">nil</span>)
2069:         <span class="ruby-keyword kw">end</span>
2070:         <span class="ruby-identifier">duplicated_uri</span>.<span class="ruby-identifier">user</span> = <span class="ruby-identifier">duplicated_uri</span>.<span class="ruby-identifier">normalized_user</span>
2071:       <span class="ruby-keyword kw">end</span>
2072:       <span class="ruby-identifier">duplicated_uri</span>
2073:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000124">
                    
                    <a name="M000124"></a><b>omit!</b>(*components)
                    
                </div>
                
                <div class="description">
                  <p>
Destructive form of omit.
</p>
<p>
@param [Symbol] *components The components to be omitted.
</p>
<p>
@return [Addressable::URI] The <a href="URI.html">URI</a> with components
omitted.
</p>
<p>
@see <a href="URI.html#M000123">Addressable::URI#omit</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show</a>
                        
                    </p>
                    <div id="M000124_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2083</span>
2083:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">omit!</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">components</span>)
2084:       <span class="ruby-identifier">replace_self</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">omit</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">components</span>))
2085:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000080">
                    
                    <a name="M000080"></a><b>origin</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The origin for this <a href="URI.html">URI</a>, serialized to ASCII, as per
draft-ietf-websec-origin-00, section 5.2.
</p>
<p>
@return [String] The serialized origin.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000080_source')" id="l_M000080_source">show</a>
                        
                    </p>
                    <div id="M000080_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1097</span>
1097:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">origin</span>
1098:       <span class="ruby-keyword kw">return</span> (<span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span>
1099:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalized_port</span>
1100:           (
1101:             <span class="ruby-node">&quot;#{self.normalized_scheme}://#{self.normalized_host}&quot;</span> <span class="ruby-operator">+</span>
1102:             <span class="ruby-node">&quot;:#{self.normalized_port}&quot;</span>
1103:           )
1104:         <span class="ruby-keyword kw">else</span>
1105:           <span class="ruby-node">&quot;#{self.normalized_scheme}://#{self.normalized_host}&quot;</span>
1106:         <span class="ruby-keyword kw">end</span>
1107:       <span class="ruby-keyword kw">else</span>
1108:         <span class="ruby-value str">&quot;null&quot;</span>
1109:       <span class="ruby-keyword kw">end</span>)
1110:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000068">
                    
                    <a name="M000068"></a><b>password</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The password component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The password component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000068_source')" id="l_M000068_source">show</a>
                        
                    </p>
                    <div id="M000068_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 849</span>
849:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">password</span>
850:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@password</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@password</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
851:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000070">
                    
                    <a name="M000070"></a><b>password=</b>(new_password)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the password component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_password The new
password component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show</a>
                        
                    </p>
                    <div id="M000070_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 875</span>
875:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">password=</span>(<span class="ruby-identifier">new_password</span>)
876:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_password</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_password</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
877:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_password.class} into String.&quot;</span>
878:       <span class="ruby-keyword kw">end</span>
879:       <span class="ruby-ivar">@password</span> = <span class="ruby-identifier">new_password</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_password</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
880: 
881:       <span class="ruby-comment cmt"># You can't have a nil user with a non-nil password</span>
882:       <span class="ruby-ivar">@password</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">nil</span>
883:       <span class="ruby-ivar">@user</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">nil</span>
884:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@password</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
885:         <span class="ruby-ivar">@user</span> = <span class="ruby-constant">EMPTYSTR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">nil?</span>
886:       <span class="ruby-keyword kw">end</span>
887: 
888:       <span class="ruby-comment cmt"># Reset dependant values</span>
889:       <span class="ruby-ivar">@userinfo</span> = <span class="ruby-keyword kw">nil</span>
890:       <span class="ruby-ivar">@normalized_userinfo</span> = <span class="ruby-keyword kw">nil</span>
891:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
892:       <span class="ruby-ivar">@normalized_password</span> = <span class="ruby-keyword kw">nil</span>
893:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
894:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
895: 
896:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
897:       <span class="ruby-identifier">validate</span>()
898:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000090">
                    
                    <a name="M000090"></a><b>path</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The path component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The path component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000090_source')" id="l_M000090_source">show</a>
                        
                    </p>
                    <div id="M000090_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1258</span>
1258:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">path</span>
1259:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@path</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@path</span> <span class="ruby-operator">:</span> <span class="ruby-constant">EMPTYSTR</span>
1260:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000092">
                    
                    <a name="M000092"></a><b>path=</b>(new_path)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the path component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_path The new
path component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000092_source')" id="l_M000092_source">show</a>
                        
                    </p>
                    <div id="M000092_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1296</span>
1296:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">path=</span>(<span class="ruby-identifier">new_path</span>)
1297:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_path</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1298:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_path.class} into String.&quot;</span>
1299:       <span class="ruby-keyword kw">end</span>
1300:       <span class="ruby-ivar">@path</span> = (<span class="ruby-identifier">new_path</span> <span class="ruby-operator">||</span> <span class="ruby-constant">EMPTYSTR</span>).<span class="ruby-identifier">to_str</span>
1301:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@path</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">SLASH</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">host</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1302:         <span class="ruby-ivar">@path</span> = <span class="ruby-node">&quot;/#{@path}&quot;</span>
1303:       <span class="ruby-keyword kw">end</span>
1304: 
1305:       <span class="ruby-comment cmt"># Reset dependant values</span>
1306:       <span class="ruby-ivar">@normalized_path</span> = <span class="ruby-keyword kw">nil</span>
1307:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1308:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1309:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000083">
                    
                    <a name="M000083"></a><b>port</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The port component for this <a href="URI.html">URI</a>. This is the port
number actually given in the <a href="URI.html">URI</a>. This does not
infer port numbers from default values.
</p>
<p>
@return [Integer] The port component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show</a>
                        
                    </p>
                    <div id="M000083_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1132</span>
1132:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">port</span>
1133:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@port</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@port</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1134:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000085">
                    
                    <a name="M000085"></a><b>port=</b>(new_port)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the port component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, Integer, <a href="URI.html#M000125">to_s</a>] new_port The
new port component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show</a>
                        
                    </p>
                    <div id="M000085_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1152</span>
1152:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">port=</span>(<span class="ruby-identifier">new_port</span>)
1153:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">new_port</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1154:         <span class="ruby-identifier">new_port</span> = <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">new_port</span>.<span class="ruby-identifier">to_str</span>)
1155:       <span class="ruby-keyword kw">end</span>
1156:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">new_port</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span>)
1157:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
1158:           <span class="ruby-node">&quot;Invalid port number: #{new_port.inspect}&quot;</span>
1159:       <span class="ruby-keyword kw">end</span>
1160: 
1161:       <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">new_port</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_i</span>
1162:       <span class="ruby-ivar">@port</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@port</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1163: 
1164:       <span class="ruby-comment cmt"># Reset dependant values</span>
1165:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
1166:       <span class="ruby-ivar">@normalized_port</span> = <span class="ruby-keyword kw">nil</span>
1167:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1168:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1169: 
1170:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
1171:       <span class="ruby-identifier">validate</span>()
1172:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000095">
                    
                    <a name="M000095"></a><b>query</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The query component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The query component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show</a>
                        
                    </p>
                    <div id="M000095_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1334</span>
1334:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query</span>
1335:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@query</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@query</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1336:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000097">
                    
                    <a name="M000097"></a><b>query=</b>(new_query)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the query component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_query The new
query component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show</a>
                        
                    </p>
                    <div id="M000097_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1357</span>
1357:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query=</span>(<span class="ruby-identifier">new_query</span>)
1358:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_query</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_query</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1359:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_query.class} into String.&quot;</span>
1360:       <span class="ruby-keyword kw">end</span>
1361:       <span class="ruby-ivar">@query</span> = <span class="ruby-identifier">new_query</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_query</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1362: 
1363:       <span class="ruby-comment cmt"># Reset dependant values</span>
1364:       <span class="ruby-ivar">@normalized_query</span> = <span class="ruby-keyword kw">nil</span>
1365:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1366:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1367:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000098">
                    
                    <a name="M000098"></a><b>query_values</b>(options={})
                    
                </div>
                
                <div class="description">
                  <p>
Converts the query component to a Hash value.
</p>
<p>
@option [Symbol] notation
</p>
<pre>
  May be one of &lt;code&gt;:flat&lt;/code&gt;, &lt;code&gt;:dot&lt;/code&gt;, or
  &lt;code&gt;:subscript&lt;/code&gt;. The &lt;code&gt;:dot&lt;/code&gt; notation is not
  supported for assignment. Default value is &lt;code&gt;:subscript&lt;/code&gt;.
</pre>
<p>
@return [Hash, Array] The query string parsed as a Hash or Array object.
</p>
<p>
@example
</p>
<pre>
  Addressable::URI.parse(&quot;?one=1&amp;two=2&amp;three=3&quot;).query_values
  #=&gt; {&quot;one&quot; =&gt; &quot;1&quot;, &quot;two&quot; =&gt; &quot;2&quot;, &quot;three&quot; =&gt; &quot;3&quot;}
  Addressable::URI.parse(&quot;?one[two][three]=four&quot;).query_values
  #=&gt; {&quot;one&quot; =&gt; {&quot;two&quot; =&gt; {&quot;three&quot; =&gt; &quot;four&quot;}}}
  Addressable::URI.parse(&quot;?one.two.three=four&quot;).query_values(
    :notation =&gt; :dot
  )
  #=&gt; {&quot;one&quot; =&gt; {&quot;two&quot; =&gt; {&quot;three&quot; =&gt; &quot;four&quot;}}}
  Addressable::URI.parse(&quot;?one[two][three]=four&quot;).query_values(
    :notation =&gt; :flat
  )
  #=&gt; {&quot;one[two][three]&quot; =&gt; &quot;four&quot;}
  Addressable::URI.parse(&quot;?one.two.three=four&quot;).query_values(
    :notation =&gt; :flat
  )
  #=&gt; {&quot;one.two.three&quot; =&gt; &quot;four&quot;}
  Addressable::URI.parse(
    &quot;?one[two][three][]=four&amp;one[two][three][]=five&quot;
  ).query_values
  #=&gt; {&quot;one&quot; =&gt; {&quot;two&quot; =&gt; {&quot;three&quot; =&gt; [&quot;four&quot;, &quot;five&quot;]}}}
  Addressable::URI.parse(
    &quot;?one=two&amp;one=three&quot;).query_values(:notation =&gt; :flat_array)
  #=&gt; [['one', 'two'], ['one', 'three']]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show</a>
                        
                    </p>
                    <div id="M000098_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1403</span>
1403:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query_values</span>(<span class="ruby-identifier">options</span>={})
1404:       <span class="ruby-identifier">defaults</span> = {<span class="ruby-identifier">:notation</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:subscript</span>}
1405:       <span class="ruby-identifier">options</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
1406:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>[<span class="ruby-identifier">:flat</span>, <span class="ruby-identifier">:dot</span>, <span class="ruby-identifier">:subscript</span>, <span class="ruby-identifier">:flat_array</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>])
1407:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>,
1408:           <span class="ruby-value str">&quot;Invalid notation. Must be one of: &quot;</span> <span class="ruby-operator">+</span>
1409:           <span class="ruby-value str">&quot;[:flat, :dot, :subscript, :flat_array].&quot;</span>
1410:       <span class="ruby-keyword kw">end</span>
1411:       <span class="ruby-identifier">dehash</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
1412:         <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1413:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
1414:             <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">dehash</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">value</span>)
1415:           <span class="ruby-keyword kw">end</span>
1416:         <span class="ruby-keyword kw">end</span>
1417:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span> <span class="ruby-operator">!=</span> {} <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span> }
1418:           <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">accu</span>, (<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1419:             <span class="ruby-identifier">accu</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">value</span>; <span class="ruby-identifier">accu</span>
1420:           <span class="ruby-keyword kw">end</span>
1421:         <span class="ruby-keyword kw">else</span>
1422:           <span class="ruby-identifier">hash</span>
1423:         <span class="ruby-keyword kw">end</span>
1424:       <span class="ruby-keyword kw">end</span>
1425:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
1426:       <span class="ruby-identifier">empty_accumulator</span> = <span class="ruby-identifier">:flat_array</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">?</span> [] <span class="ruby-operator">:</span> {}
1427:       <span class="ruby-keyword kw">return</span> ((<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;&amp;&quot;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span><span class="ruby-operator">|</span>
1428:         <span class="ruby-identifier">pair</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-value">2</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pair</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">pair</span>.<span class="ruby-identifier">empty?</span>
1429:       <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">empty_accumulator</span>.<span class="ruby-identifier">dup</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">accumulator</span>, (<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1430:         <span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
1431:         <span class="ruby-identifier">key</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">key</span>)
1432:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">true</span>
1433:           <span class="ruby-identifier">value</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">unencode_component</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\+/</span>, <span class="ruby-value str">&quot; &quot;</span>))
1434:         <span class="ruby-keyword kw">end</span>
1435:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:flat</span>
1436:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">accumulator</span>[<span class="ruby-identifier">key</span>]
1437:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Key was repeated: #{key.inspect}&quot;</span>
1438:           <span class="ruby-keyword kw">end</span>
1439:           <span class="ruby-identifier">accumulator</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
1440:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:flat_array</span>
1441:           <span class="ruby-identifier">accumulator</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
1442:         <span class="ruby-keyword kw">else</span>
1443:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:dot</span>
1444:             <span class="ruby-identifier">array_value</span> = <span class="ruby-keyword kw">false</span>
1445:             <span class="ruby-identifier">subkeys</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;.&quot;</span>)
1446:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:subscript</span>
1447:             <span class="ruby-identifier">array_value</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span>(<span class="ruby-identifier">key</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\[\]$/</span>)
1448:             <span class="ruby-identifier">subkeys</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/[\[\]]+/</span>)
1449:           <span class="ruby-keyword kw">end</span>
1450:           <span class="ruby-identifier">current_hash</span> = <span class="ruby-identifier">accumulator</span>
1451:           <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">0</span><span class="ruby-operator">...</span>(<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
1452:             <span class="ruby-identifier">subkey</span> = <span class="ruby-identifier">subkeys</span>[<span class="ruby-identifier">i</span>]
1453:             <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkey</span>] = {} <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkey</span>]
1454:             <span class="ruby-identifier">current_hash</span> = <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkey</span>]
1455:           <span class="ruby-keyword kw">end</span>
1456:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">array_value</span>
1457:             <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">last</span>] = [] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">last</span>]
1458:             <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">last</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">value</span>
1459:           <span class="ruby-keyword kw">else</span>
1460:             <span class="ruby-identifier">current_hash</span>[<span class="ruby-identifier">subkeys</span>.<span class="ruby-identifier">last</span>] = <span class="ruby-identifier">value</span>
1461:           <span class="ruby-keyword kw">end</span>
1462:         <span class="ruby-keyword kw">end</span>
1463:         <span class="ruby-identifier">accumulator</span>
1464:       <span class="ruby-keyword kw">end</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">empty_accumulator</span>.<span class="ruby-identifier">dup</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">accumulator</span>, (<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1465:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:notation</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:flat_array</span>
1466:           <span class="ruby-identifier">accumulator</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
1467:         <span class="ruby-keyword kw">else</span>
1468:           <span class="ruby-identifier">accumulator</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">dehash</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">value</span>
1469:         <span class="ruby-keyword kw">end</span>
1470:         <span class="ruby-identifier">accumulator</span>
1471:       <span class="ruby-keyword kw">end</span>
1472:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000099">
                    
                    <a name="M000099"></a><b>query_values=</b>(new_query_values)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the query component for this <a href="URI.html">URI</a> from a Hash
object. This method produces a query string using the :subscript notation.
An empty Hash will result in a nil query.
</p>
<p>
@param [Hash, <a href="URI.html#M000127">to_hash</a>, Array]
new_query_values The new query values.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show</a>
                        
                    </p>
                    <div id="M000099_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1480</span>
1480:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query_values=</span>(<span class="ruby-identifier">new_query_values</span>)
1481:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_query_values</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
1482:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> = <span class="ruby-keyword kw">nil</span>
1483:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
1484:       <span class="ruby-keyword kw">end</span>
1485: 
1486:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
1487:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_hash</span>)
1488:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>,
1489:             <span class="ruby-node">&quot;Can't convert #{new_query_values.class} into Hash.&quot;</span>
1490:         <span class="ruby-keyword kw">end</span>
1491:         <span class="ruby-identifier">new_query_values</span> = <span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">to_hash</span>
1492:         <span class="ruby-identifier">new_query_values</span> = <span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1493:           <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Symbol</span>)
1494:           [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
1495:         <span class="ruby-keyword kw">end</span>
1496:         <span class="ruby-comment cmt"># Useful default for OAuth and caching.</span>
1497:         <span class="ruby-comment cmt"># Only to be used for non-Array inputs. Arrays should preserve order.</span>
1498:         <span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">sort!</span>
1499:       <span class="ruby-keyword kw">end</span>
1500:       <span class="ruby-comment cmt"># new_query_values have form [['key1', 'value1'], ['key2', 'value2']]</span>
1501: 
1502:       <span class="ruby-comment cmt"># Algorithm shamelessly stolen from Julien Genestoux, slightly modified</span>
1503:       <span class="ruby-identifier">buffer</span> = <span class="ruby-value str">&quot;&quot;</span>
1504:       <span class="ruby-identifier">stack</span> = []
1505:       <span class="ruby-identifier">e</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span>
1506:         <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Symbol</span>)
1507:         <span class="ruby-constant">URI</span>.<span class="ruby-identifier">encode_component</span>(<span class="ruby-identifier">component</span>, <span class="ruby-constant">CharacterClasses</span><span class="ruby-operator">::</span><span class="ruby-constant">UNRESERVED</span>)
1508:       <span class="ruby-keyword kw">end</span>
1509:       <span class="ruby-identifier">new_query_values</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1510:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
1511:           <span class="ruby-identifier">stack</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
1512:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>)
1513:           <span class="ruby-identifier">stack</span> <span class="ruby-operator">&lt;&lt;</span> [
1514:             <span class="ruby-identifier">key</span>,
1515:             <span class="ruby-identifier">value</span>.<span class="ruby-identifier">inject</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">accu</span>, <span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">accu</span>[<span class="ruby-identifier">accu</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">x</span>; <span class="ruby-identifier">accu</span> }
1516:           ]
1517:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
1518:           <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{e.call(key)}&amp;&quot;</span>
1519:         <span class="ruby-keyword kw">else</span>
1520:           <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{e.call(key)}=#{e.call(value)}&amp;&quot;</span>
1521:         <span class="ruby-keyword kw">end</span>
1522:       <span class="ruby-keyword kw">end</span>
1523:       <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">hash</span>)<span class="ruby-operator">|</span>
1524:         (<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span> }).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
1525:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
1526:             <span class="ruby-identifier">stack</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-node">&quot;#{parent}[#{key}]&quot;</span>, <span class="ruby-identifier">value</span>]
1527:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
1528:             <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{parent}[#{e.call(key)}]&amp;&quot;</span>
1529:           <span class="ruby-keyword kw">else</span>
1530:             <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{parent}[#{e.call(key)}]=#{e.call(value)}&amp;&quot;</span>
1531:           <span class="ruby-keyword kw">end</span>
1532:         <span class="ruby-keyword kw">end</span>
1533:       <span class="ruby-keyword kw">end</span>
1534:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> = <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">chop</span>
1535:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000106">
                    
                    <a name="M000106"></a><b>relative?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determines if the <a href="URI.html">URI</a> is relative.
</p>
<p>
@return [TrueClass, FalseClass]
</p>
<pre>
  &lt;code&gt;true&lt;/code&gt; if the URI is relative. &lt;code&gt;false&lt;/code&gt;
  otherwise.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show</a>
                        
                    </p>
                    <div id="M000106_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1635</span>
1635:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relative?</span>
1636:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">nil?</span>
1637:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000100">
                    
                    <a name="M000100"></a><b>request_uri</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The HTTP request <a href="URI.html">URI</a> for this <a
href="URI.html">URI</a>. This is the path and the query string.
</p>
<p>
@return [String] The request <a href="URI.html">URI</a> required for an
HTTP request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show</a>
                        
                    </p>
                    <div id="M000100_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1542</span>
1542:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request_uri</span>
1543:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">absolute?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/^https?$/</span>
1544:       <span class="ruby-keyword kw">return</span> (
1545:         (<span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">:</span> <span class="ruby-constant">SLASH</span>) <span class="ruby-operator">+</span>
1546:         (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-value">? </span><span class="ruby-node">&quot;?#{self.query}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-constant">EMPTYSTR</span>)
1547:       )
1548:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000101">
                    
                    <a name="M000101"></a><b>request_uri=</b>(new_request_uri)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the HTTP request <a href="URI.html">URI</a> for this <a
href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_request_uri The
new HTTP request <a href="URI.html">URI</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show</a>
                        
                    </p>
                    <div id="M000101_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1554</span>
1554:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request_uri=</span>(<span class="ruby-identifier">new_request_uri</span>)
1555:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_request_uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1556:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_request_uri.class} into String.&quot;</span>
1557:       <span class="ruby-keyword kw">end</span>
1558:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">absolute?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/^https?$/</span>
1559:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
1560:           <span class="ruby-value str">&quot;Cannot set an HTTP request URI for a non-HTTP URI.&quot;</span>
1561:       <span class="ruby-keyword kw">end</span>
1562:       <span class="ruby-identifier">new_request_uri</span> = <span class="ruby-identifier">new_request_uri</span>.<span class="ruby-identifier">to_str</span>
1563:       <span class="ruby-identifier">path_component</span> = <span class="ruby-identifier">new_request_uri</span>[<span class="ruby-regexp re">/^([^\?]*)\?(?:.*)$/</span>, <span class="ruby-value">1</span>]
1564:       <span class="ruby-identifier">query_component</span> = <span class="ruby-identifier">new_request_uri</span>[<span class="ruby-regexp re">/^(?:[^\?]*)\?(.*)$/</span>, <span class="ruby-value">1</span>]
1565:       <span class="ruby-identifier">path_component</span> = <span class="ruby-identifier">path_component</span>.<span class="ruby-identifier">to_s</span>
1566:       <span class="ruby-identifier">path_component</span> = (<span class="ruby-operator">!</span><span class="ruby-identifier">path_component</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-identifier">path_component</span> <span class="ruby-operator">:</span> <span class="ruby-constant">SLASH</span>)
1567:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">path_component</span>
1568:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> = <span class="ruby-identifier">query_component</span>
1569: 
1570:       <span class="ruby-comment cmt"># Reset dependant values</span>
1571:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
1572:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
1573:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000113">
                    
                    <a name="M000113"></a><b>route_from</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the shortest normalized relative form of this <a
href="URI.html">URI</a> that uses the supplied <a href="URI.html">URI</a>
as a base for resolution. Returns an absolute <a href="URI.html">URI</a> if
necessary. This is effectively the opposite of <tt><a
href="URI.html#M000114">route_to</a></tt>.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] uri The <a href="URI.html">URI</a> to
route from.
</p>
<p>
@return [Addressable::URI]
</p>
<pre>
  The normalized relative URI that is equivalent to the original URI.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show</a>
                        
                    </p>
                    <div id="M000113_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1851</span>
1851:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">route_from</span>(<span class="ruby-identifier">uri</span>)
1852:       <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">normalize</span>
1853:       <span class="ruby-identifier">normalized_self</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">normalize</span>
1854:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">relative?</span>
1855:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Expected absolute URI, got: #{self.to_s}&quot;</span>
1856:       <span class="ruby-keyword kw">end</span>
1857:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">relative?</span>
1858:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Expected absolute URI, got: #{uri.to_s}&quot;</span>
1859:       <span class="ruby-keyword kw">end</span>
1860:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>
1861:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-node">&quot;##{normalized_self.fragment}&quot;</span>)
1862:       <span class="ruby-keyword kw">end</span>
1863:       <span class="ruby-identifier">components</span> = <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">to_hash</span>
1864:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
1865:         <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:scheme</span>] = <span class="ruby-keyword kw">nil</span>
1866:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">authority</span>
1867:           <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:user</span>] = <span class="ruby-keyword kw">nil</span>
1868:           <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:password</span>] = <span class="ruby-keyword kw">nil</span>
1869:           <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-keyword kw">nil</span>
1870:           <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:port</span>] = <span class="ruby-keyword kw">nil</span>
1871:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>
1872:             <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:path</span>] = <span class="ruby-keyword kw">nil</span>
1873:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
1874:               <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:query</span>] = <span class="ruby-keyword kw">nil</span>
1875:             <span class="ruby-keyword kw">end</span>
1876:           <span class="ruby-keyword kw">else</span>
1877:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">SLASH</span>
1878:               <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:path</span>].<span class="ruby-identifier">gsub!</span>(
1879:                 <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;^&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>)), <span class="ruby-constant">EMPTYSTR</span>)
1880:             <span class="ruby-keyword kw">end</span>
1881:           <span class="ruby-keyword kw">end</span>
1882:         <span class="ruby-keyword kw">end</span>
1883:       <span class="ruby-keyword kw">end</span>
1884:       <span class="ruby-comment cmt"># Avoid network-path references.</span>
1885:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:host</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1886:         <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:scheme</span>] = <span class="ruby-identifier">normalized_self</span>.<span class="ruby-identifier">scheme</span>
1887:       <span class="ruby-keyword kw">end</span>
1888:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Addressable</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>.<span class="ruby-identifier">new</span>(
1889:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:scheme</span>],
1890:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:user</span>],
1891:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:password</span>],
1892:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:host</span>],
1893:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:port</span>],
1894:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:path</span>],
1895:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:query</span>],
1896:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">components</span>[<span class="ruby-identifier">:fragment</span>]
1897:       )
1898:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000114">
                    
                    <a name="M000114"></a><b>route_to</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the shortest normalized relative form of the supplied <a
href="URI.html">URI</a> that uses this <a href="URI.html">URI</a> as a base
for resolution. Returns an absolute <a href="URI.html">URI</a> if
necessary. This is effectively the opposite of <tt><a
href="URI.html#M000113">route_from</a></tt>.
</p>
<p>
@param [String, <a href="URI.html">Addressable::URI</a>, <a
href="URI.html#M000126">to_str</a>] uri The <a href="URI.html">URI</a> to
route to.
</p>
<p>
@return [Addressable::URI]
</p>
<pre>
  The normalized relative URI that is equivalent to the supplied URI.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000114_source')" id="l_M000114_source">show</a>
                        
                    </p>
                    <div id="M000114_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1909</span>
1909:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">route_to</span>(<span class="ruby-identifier">uri</span>)
1910:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">route_from</span>(<span class="ruby-keyword kw">self</span>)
1911:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000062">
                    
                    <a name="M000062"></a><b>scheme</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The scheme component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The scheme component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000062_source')" id="l_M000062_source">show</a>
                        
                    </p>
                    <div id="M000062_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 746</span>
746:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scheme</span>
747:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@scheme</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@scheme</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
748:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000064">
                    
                    <a name="M000064"></a><b>scheme=</b>(new_scheme)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the scheme component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_scheme The new
scheme component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000064_source')" id="l_M000064_source">show</a>
                        
                    </p>
                    <div id="M000064_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 771</span>
771:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scheme=</span>(<span class="ruby-identifier">new_scheme</span>)
772:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_scheme</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
773:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_scheme.class} into String.&quot;</span>
774:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">new_scheme</span>
775:         <span class="ruby-identifier">new_scheme</span> = <span class="ruby-identifier">new_scheme</span>.<span class="ruby-identifier">to_str</span>
776:       <span class="ruby-keyword kw">end</span>
777:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_scheme</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">new_scheme</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/[a-z][a-z0-9\.\+\-]*/i</span>
778:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>, <span class="ruby-value str">&quot;Invalid scheme format.&quot;</span>
779:       <span class="ruby-keyword kw">end</span>
780:       <span class="ruby-ivar">@scheme</span> = <span class="ruby-identifier">new_scheme</span>
781:       <span class="ruby-ivar">@scheme</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scheme</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
782: 
783:       <span class="ruby-comment cmt"># Reset dependant values</span>
784:       <span class="ruby-ivar">@normalized_scheme</span> = <span class="ruby-keyword kw">nil</span>
785:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
786:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
787: 
788:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
789:       <span class="ruby-identifier">validate</span>()
790:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000087">
                    
                    <a name="M000087"></a><b>site</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The combination of components that represent a site. Combines the scheme,
user, password, host, and port components. Primarily useful for HTTP and
HTTPS.
</p>
<p>
For example, <tt>&quot;<a
href="http://example.com/path?query">example.com/path?query</a>&quot;</tt>
would have a <tt>site</tt> value of <tt>&quot;<a
href="http://example.com">example.com</a>&quot;</tt>.
</p>
<p>
@return [String] The components that identify a site.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show</a>
                        
                    </p>
                    <div id="M000087_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1201</span>
1201:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site</span>
1202:       (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@site</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
1203:         <span class="ruby-identifier">site_string</span> = <span class="ruby-value str">&quot;&quot;</span>
1204:         <span class="ruby-identifier">site_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.scheme}:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1205:         <span class="ruby-identifier">site_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;//#{self.authority}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
1206:         <span class="ruby-identifier">site_string</span>
1207:       <span class="ruby-keyword kw">end</span>)
1208:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000089">
                    
                    <a name="M000089"></a><b>site=</b>(new_site)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the site value for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_site The new
site value.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show</a>
                        
                    </p>
                    <div id="M000089_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 1236</span>
1236:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site=</span>(<span class="ruby-identifier">new_site</span>)
1237:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_site</span>
1238:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_site</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
1239:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_site.class} into String.&quot;</span>
1240:         <span class="ruby-keyword kw">end</span>
1241:         <span class="ruby-identifier">new_site</span> = <span class="ruby-identifier">new_site</span>.<span class="ruby-identifier">to_str</span>
1242:         <span class="ruby-comment cmt"># These two regular expressions derived from the primary parsing</span>
1243:         <span class="ruby-comment cmt"># expression</span>
1244:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">new_site</span>[<span class="ruby-regexp re">/^(?:([^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?$/</span>, <span class="ruby-value">1</span>]
1245:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> = <span class="ruby-identifier">new_site</span>[
1246:           <span class="ruby-regexp re">/^(?:(?:[^:\/?#]+):)?(?:\/\/([^\/?#]*))?$/</span>, <span class="ruby-value">1</span>
1247:         ]
1248:       <span class="ruby-keyword kw">else</span>
1249:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-keyword kw">nil</span>
1250:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> = <span class="ruby-keyword kw">nil</span>
1251:       <span class="ruby-keyword kw">end</span>
1252:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000127">
                    
                    <a name="M000127"></a><b>to_hash</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a Hash of the <a href="URI.html">URI</a> components.
</p>
<p>
@return [Hash] The <a href="URI.html">URI</a> as a <tt>Hash</tt> of
components.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000127_source')" id="l_M000127_source">show</a>
                        
                    </p>
                    <div id="M000127_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2119</span>
2119:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hash</span>
2120:       <span class="ruby-keyword kw">return</span> {
2121:         <span class="ruby-identifier">:scheme</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span>,
2122:         <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>,
2123:         <span class="ruby-identifier">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>,
2124:         <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>,
2125:         <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>,
2126:         <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>,
2127:         <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span>,
2128:         <span class="ruby-identifier">:fragment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span>
2129:       }
2130:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000125">
                    
                    <a name="M000125"></a><b>to_s</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Converts the <a href="URI.html">URI</a> to a <tt>String</tt>.
</p>
<p>
@return [String] The URI&#8217;s <tt>String</tt> representation.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="URI.html#M000126">to_str</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000125_source')" id="l_M000125_source">show</a>
                        
                    </p>
                    <div id="M000125_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2091</span>
2091:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
2092:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span>
2093:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">NORMPATH</span>
2094:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
2095:           <span class="ruby-node">&quot;Cannot assemble URI string with ambiguous path: '#{self.path}'&quot;</span>
2096:       <span class="ruby-keyword kw">end</span>
2097:       <span class="ruby-ivar">@uri_string</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
2098:         <span class="ruby-identifier">uri_string</span> = <span class="ruby-value str">&quot;&quot;</span>
2099:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{self.scheme}:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2100:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;//#{self.authority}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2101:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_s</span>
2102:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;?#{self.query}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">query</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2103:         <span class="ruby-identifier">uri_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;##{self.fragment}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fragment</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2104:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uri_string</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
2105:           <span class="ruby-identifier">uri_string</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
2106:         <span class="ruby-keyword kw">end</span>
2107:         <span class="ruby-identifier">uri_string</span>
2108:       <span class="ruby-keyword kw">end</span>)
2109:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000126">
                    
                    <a name="M000126"></a><b>to_str</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="URI.html#M000125">to_s</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000065">
                    
                    <a name="M000065"></a><b>user</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The user component for this <a href="URI.html">URI</a>.
</p>
<p>
@return [String] The user component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000065_source')" id="l_M000065_source">show</a>
                        
                    </p>
                    <div id="M000065_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 796</span>
796:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user</span>
797:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-identifier">:@user</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@user</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
798:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000067">
                    
                    <a name="M000067"></a><b>user=</b>(new_user)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the user component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_user The new
user component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000067_source')" id="l_M000067_source">show</a>
                        
                    </p>
                    <div id="M000067_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 822</span>
822:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user=</span>(<span class="ruby-identifier">new_user</span>)
823:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
824:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_user.class} into String.&quot;</span>
825:       <span class="ruby-keyword kw">end</span>
826:       <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">new_user</span> <span class="ruby-value">? </span><span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
827: 
828:       <span class="ruby-comment cmt"># You can't have a nil user with a non-nil password</span>
829:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">password</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
830:         <span class="ruby-ivar">@user</span> = <span class="ruby-constant">EMPTYSTR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">nil?</span>
831:       <span class="ruby-keyword kw">end</span>
832: 
833:       <span class="ruby-comment cmt"># Reset dependant values</span>
834:       <span class="ruby-ivar">@userinfo</span> = <span class="ruby-keyword kw">nil</span>
835:       <span class="ruby-ivar">@normalized_userinfo</span> = <span class="ruby-keyword kw">nil</span>
836:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
837:       <span class="ruby-ivar">@normalized_user</span> = <span class="ruby-keyword kw">nil</span>
838:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
839:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
840: 
841:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
842:       <span class="ruby-identifier">validate</span>()
843:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000071">
                    
                    <a name="M000071"></a><b>userinfo</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The userinfo component for this <a href="URI.html">URI</a>. Combines the
user and password components.
</p>
<p>
@return [String] The userinfo component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show</a>
                        
                    </p>
                    <div id="M000071_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 905</span>
905:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">userinfo</span>
906:       <span class="ruby-identifier">current_user</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span>
907:       <span class="ruby-identifier">current_password</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span>
908:       (<span class="ruby-identifier">current_user</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">current_password</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@userinfo</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">begin</span>
909:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_password</span>
910:           <span class="ruby-node">&quot;#{current_user}:#{current_password}&quot;</span>
911:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">current_user</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_password</span>
912:           <span class="ruby-node">&quot;#{current_user}&quot;</span>
913:         <span class="ruby-keyword kw">end</span>
914:       <span class="ruby-keyword kw">end</span>)
915:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000073">
                    
                    <a name="M000073"></a><b>userinfo=</b>(new_userinfo)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the userinfo component for this <a href="URI.html">URI</a>.
</p>
<p>
@param [String, <a href="URI.html#M000126">to_str</a>] new_userinfo The new
userinfo component.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show</a>
                        
                    </p>
                    <div id="M000073_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 939</span>
939:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">userinfo=</span>(<span class="ruby-identifier">new_userinfo</span>)
940:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_userinfo</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)
941:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;Can't convert #{new_userinfo.class} into String.&quot;</span>
942:       <span class="ruby-keyword kw">end</span>
943:       <span class="ruby-identifier">new_user</span>, <span class="ruby-identifier">new_password</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_userinfo</span>
944:         [
945:           <span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/^(.*):/</span>, <span class="ruby-value">1</span>],
946:           <span class="ruby-identifier">new_userinfo</span>.<span class="ruby-identifier">to_str</span>.<span class="ruby-identifier">strip</span>[<span class="ruby-regexp re">/:(.*)$/</span>, <span class="ruby-value">1</span>]
947:         ]
948:       <span class="ruby-keyword kw">else</span>
949:         [<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>]
950:       <span class="ruby-keyword kw">end</span>
951: 
952:       <span class="ruby-comment cmt"># Password assigned first to ensure validity in case of nil</span>
953:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> = <span class="ruby-identifier">new_password</span>
954:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> = <span class="ruby-identifier">new_user</span>
955: 
956:       <span class="ruby-comment cmt"># Reset dependant values</span>
957:       <span class="ruby-ivar">@authority</span> = <span class="ruby-keyword kw">nil</span>
958:       <span class="ruby-ivar">@uri_string</span> = <span class="ruby-keyword kw">nil</span>
959:       <span class="ruby-ivar">@hash</span> = <span class="ruby-keyword kw">nil</span>
960: 
961:       <span class="ruby-comment cmt"># Ensure we haven't created an invalid URI</span>
962:       <span class="ruby-identifier">validate</span>()
963:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000132">
                    
                    <a name="M000132"></a><b>replace_self</b>(uri)
                    
                </div>
                
                <div class="description">
                  <p>
Replaces the internal state of self with the specified URI&#8217;s state.
Used in destructive operations to avoid massive code repetition.
</p>
<p>
@param [Addressable::URI] uri The <a href="URI.html">URI</a> to replace
<tt>self</tt> with.
</p>
<p>
@return [Addressable::URI] <tt>self</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show</a>
                        
                    </p>
                    <div id="M000132_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2227</span>
2227:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">replace_self</span>(<span class="ruby-identifier">uri</span>)
2228:       <span class="ruby-comment cmt"># Reset dependant values</span>
2229:       <span class="ruby-identifier">instance_variables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">var</span><span class="ruby-operator">|</span>
2230:         <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-identifier">var</span>, <span class="ruby-keyword kw">nil</span>)
2231:       <span class="ruby-keyword kw">end</span>
2232: 
2233:       <span class="ruby-ivar">@scheme</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
2234:       <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">user</span>
2235:       <span class="ruby-ivar">@password</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">password</span>
2236:       <span class="ruby-ivar">@host</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>
2237:       <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>
2238:       <span class="ruby-ivar">@path</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span>
2239:       <span class="ruby-ivar">@query</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span>
2240:       <span class="ruby-ivar">@fragment</span> = <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">fragment</span>
2241:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
2242:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000131">
                    
                    <a name="M000131"></a><b>validate</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Ensures that the <a href="URI.html">URI</a> is valid.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show</a>
                        
                    </p>
                    <div id="M000131_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/addressable/uri.rb, line 2197</span>
2197:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate</span>
2198:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@validation_deferred</span>
2199:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span>
2200:           (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span>.<span class="ruby-identifier">empty?</span>) <span class="ruby-operator">&amp;&amp;</span>
2201:           (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span>)
2202:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
2203:           <span class="ruby-node">&quot;Absolute URI missing hierarchical segment: '#{self.to_s}'&quot;</span>
2204:       <span class="ruby-keyword kw">end</span>
2205:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">host</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
2206:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span>
2207:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span>
2208:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">password</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2209:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>, <span class="ruby-node">&quot;Hostname not supplied: '#{self.to_s}'&quot;</span>
2210:         <span class="ruby-keyword kw">end</span>
2211:       <span class="ruby-keyword kw">end</span>
2212:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">path</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">SLASH</span> <span class="ruby-operator">&amp;&amp;</span>
2213:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">authority</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
2214:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidURIError</span>,
2215:           <span class="ruby-node">&quot;Cannot have a relative path with an authority set: '#{self.to_s}'&quot;</span>
2216:       <span class="ruby-keyword kw">end</span>
2217:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
2218:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    