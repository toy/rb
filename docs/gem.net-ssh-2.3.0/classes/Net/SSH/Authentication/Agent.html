<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Net::SSH::Authentication::Agent</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Net::SSH::Authentication::Agent 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../../files/lib/net/ssh/authentication/agent_rb.html">lib/net/ssh/authentication/agent.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
This class implements a simple client for the ssh-agent protocol. It does
not implement any specific protocol, but instead copies the behavior of the
ssh-agent functions in the OpenSSH library (3.8).
</p>
<p>
This means that although it behaves like a SSH1 client, it also has some
SSH2 functionality (like signing data).
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000011">agent_failed</a>,</li>
                
                <li><a href="#M000007">agent_socket_factory</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000005">close</a>,</li>
                
                <li><a href="#M000000">connect</a>,</li>
                
                <li><a href="#M000002">connect!</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000004">identities</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000003">negotiate!</a>,</li>
                
                <li><a href="#M000001">new</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000009">read_packet</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000010">send_and_wait</a>,</li>
                
                <li><a href="#M000008">send_packet</a>,</li>
                
                <li><a href="#M000006">sign</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../PromptMethods/Termios.html">Net::SSH::PromptMethods::Termios</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="Agent/Comment.html">Net::SSH::Authentication::Agent::Comment</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">SSH2_AGENT_REQUEST_VERSION</td>
            <td>=</td>
            <td class="attr-value">1</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH2_AGENT_REQUEST_IDENTITIES</td>
            <td>=</td>
            <td class="attr-value">11</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH2_AGENT_IDENTITIES_ANSWER</td>
            <td>=</td>
            <td class="attr-value">12</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH2_AGENT_SIGN_REQUEST</td>
            <td>=</td>
            <td class="attr-value">13</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH2_AGENT_SIGN_RESPONSE</td>
            <td>=</td>
            <td class="attr-value">14</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH2_AGENT_FAILURE</td>
            <td>=</td>
            <td class="attr-value">30</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH2_AGENT_VERSION_RESPONSE</td>
            <td>=</td>
            <td class="attr-value">103</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH_COM_AGENT2_FAILURE</td>
            <td>=</td>
            <td class="attr-value">102</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH_AGENT_REQUEST_RSA_IDENTITIES</td>
            <td>=</td>
            <td class="attr-value">1</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH_AGENT_RSA_IDENTITIES_ANSWER1</td>
            <td>=</td>
            <td class="attr-value">2</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH_AGENT_RSA_IDENTITIES_ANSWER2</td>
            <td>=</td>
            <td class="attr-value">5</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SSH_AGENT_FAILURE</td>
            <td>=</td>
            <td class="attr-value">5</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>socket</td>
            <td class='attr-desc'><p>
The underlying socket being used to communicate with the <a
href="../../SSH.html">SSH</a> agent.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000000">
                    
                    <a name="M000000"></a><b>connect</b>(logger=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Instantiates a new agent object, connects to a running <a
href="../../SSH.html">SSH</a> agent, negotiates the agent protocol version,
and returns the agent object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000000_source')" id="l_M000000_source">show</a>
                        
                    </p>
                    <div id="M000000_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 54</span>
54:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-identifier">logger</span>=<span class="ruby-keyword kw">nil</span>)
55:       <span class="ruby-identifier">agent</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">logger</span>)
56:       <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">connect!</span>
57:       <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">negotiate!</span>
58:       <span class="ruby-identifier">agent</span>
59:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000001">
                    
                    <a name="M000001"></a><b>new</b>(logger=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Agent.html">Agent</a> object, using the optional
logger instance to report status.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000001_source')" id="l_M000001_source">show</a>
                        
                    </p>
                    <div id="M000001_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 63</span>
63:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">logger</span>=<span class="ruby-keyword kw">nil</span>)
64:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">logger</span>
65:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000005">
                    
                    <a name="M000005"></a><b>close</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Closes this socket. This agent reference is no longer able to query the
agent.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000005_source')" id="l_M000005_source">show</a>
                        
                    </p>
                    <div id="M000005_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 115</span>
115:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span>
116:       <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">close</span>
117:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000002">
                    
                    <a name="M000002"></a><b>connect!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Connect to the agent process using the socket factory and socket name given
by the attribute writers. If the agent on the other end of the socket
reports that it is an SSH2-compatible agent, this will fail (it only
supports the ssh-agent distributed by OpenSSH).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000002_source')" id="l_M000002_source">show</a>
                        
                    </p>
                    <div id="M000002_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 71</span>
71:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect!</span>
72:       <span class="ruby-keyword kw">begin</span>
73:         <span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;connecting to ssh-agent&quot;</span> }
74:         <span class="ruby-ivar">@socket</span> = <span class="ruby-identifier">agent_socket_factory</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">ENV</span>[<span class="ruby-value str">'SSH_AUTH_SOCK'</span>])
75:       <span class="ruby-keyword kw">rescue</span>
76:         <span class="ruby-identifier">error</span> { <span class="ruby-value str">&quot;could not connect to ssh-agent&quot;</span> }
77:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">AgentNotAvailable</span>, <span class="ruby-identifier">$!</span>.<span class="ruby-identifier">message</span>
78:       <span class="ruby-keyword kw">end</span>
79:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000004">
                    
                    <a name="M000004"></a><b>identities</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return an array of all identities (public keys) known to the agent. Each
key returned is augmented with a <tt>comment</tt> property which is set to
the comment returned by the agent for that key.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000004_source')" id="l_M000004_source">show</a>
                        
                    </p>
                    <div id="M000004_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 97</span>
 97:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identities</span>
 98:       <span class="ruby-identifier">type</span>, <span class="ruby-identifier">body</span> = <span class="ruby-identifier">send_and_wait</span>(<span class="ruby-constant">SSH2_AGENT_REQUEST_IDENTITIES</span>)
 99:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">AgentError</span>, <span class="ruby-value str">&quot;could not get identity count&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">agent_failed</span>(<span class="ruby-identifier">type</span>)
100:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">AgentError</span>, <span class="ruby-node">&quot;bad authentication reply: #{type}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">SSH2_AGENT_IDENTITIES_ANSWER</span>
101: 
102:       <span class="ruby-identifier">identities</span> = []
103:       <span class="ruby-identifier">body</span>.<span class="ruby-identifier">read_long</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
104:         <span class="ruby-identifier">key</span> = <span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">body</span>.<span class="ruby-identifier">read_string</span>).<span class="ruby-identifier">read_key</span>
105:         <span class="ruby-identifier">key</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-constant">Comment</span>)
106:         <span class="ruby-identifier">key</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">body</span>.<span class="ruby-identifier">read_string</span>
107:         <span class="ruby-identifier">identities</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">key</span>
108:       <span class="ruby-keyword kw">end</span>
109: 
110:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">identities</span>
111:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000003">
                    
                    <a name="M000003"></a><b>negotiate!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to negotiate the <a href="../../SSH.html">SSH</a> agent protocol
version. Raises an error if the version could not be negotiated
successfully.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000003_source')" id="l_M000003_source">show</a>
                        
                    </p>
                    <div id="M000003_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 83</span>
83:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">negotiate!</span>
84:       <span class="ruby-comment cmt"># determine what type of agent we're communicating with</span>
85:       <span class="ruby-identifier">type</span>, <span class="ruby-identifier">body</span> = <span class="ruby-identifier">send_and_wait</span>(<span class="ruby-constant">SSH2_AGENT_REQUEST_VERSION</span>, <span class="ruby-identifier">:string</span>, <span class="ruby-constant">Transport</span><span class="ruby-operator">::</span><span class="ruby-constant">ServerVersion</span><span class="ruby-operator">::</span><span class="ruby-constant">PROTO_VERSION</span>)
86: 
87:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SSH2_AGENT_VERSION_RESPONSE</span>
88:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-value str">&quot;SSH2 agents are not yet supported&quot;</span>
89:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">SSH_AGENT_RSA_IDENTITIES_ANSWER1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">SSH_AGENT_RSA_IDENTITIES_ANSWER2</span>
90:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">AgentError</span>, <span class="ruby-node">&quot;unknown response from agent: #{type}, #{body.to_s.inspect}&quot;</span>
91:       <span class="ruby-keyword kw">end</span>
92:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000006">
                    
                    <a name="M000006"></a><b>sign</b>(key, data)
                    
                </div>
                
                <div class="description">
                  <p>
Using the agent and the given public key, sign the given data. The
signature is returned in SSH2 format.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000006_source')" id="l_M000006_source">show</a>
                        
                    </p>
                    <div id="M000006_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 121</span>
121:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sign</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">data</span>)
122:       <span class="ruby-identifier">type</span>, <span class="ruby-identifier">reply</span> = <span class="ruby-identifier">send_and_wait</span>(<span class="ruby-constant">SSH2_AGENT_SIGN_REQUEST</span>, <span class="ruby-identifier">:string</span>, <span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">:key</span>, <span class="ruby-identifier">key</span>), <span class="ruby-identifier">:string</span>, <span class="ruby-identifier">data</span>, <span class="ruby-identifier">:long</span>, <span class="ruby-value">0</span>)
123: 
124:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">agent_failed</span>(<span class="ruby-identifier">type</span>)
125:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">AgentError</span>, <span class="ruby-value str">&quot;agent could not sign data with requested identity&quot;</span>
126:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">SSH2_AGENT_SIGN_RESPONSE</span>
127:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">AgentError</span>, <span class="ruby-node">&quot;bad authentication response #{type}&quot;</span>
128:       <span class="ruby-keyword kw">end</span>
129: 
130:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">read_string</span>
131:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000011">
                    
                    <a name="M000011"></a><b>agent_failed</b>(type)
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the parameter indicates a &#8220;failure&#8221;
response from the agent, and <tt>false</tt> otherwise.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000011_source')" id="l_M000011_source">show</a>
                        
                    </p>
                    <div id="M000011_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 172</span>
172:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">agent_failed</span>(<span class="ruby-identifier">type</span>)
173:         <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SSH_AGENT_FAILURE</span> <span class="ruby-operator">||</span>
174:         <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SSH2_AGENT_FAILURE</span> <span class="ruby-operator">||</span>
175:         <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SSH_COM_AGENT2_FAILURE</span>
176:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000007">
                    
                    <a name="M000007"></a><b>agent_socket_factory</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the agent socket factory to use.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000007_source')" id="l_M000007_source">show</a>
                        
                    </p>
                    <div id="M000007_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 136</span>
136:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">agent_socket_factory</span>
137:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">ALT_SEPARATOR</span>
138:           <span class="ruby-constant">Pageant</span><span class="ruby-operator">::</span><span class="ruby-constant">Socket</span>
139:         <span class="ruby-keyword kw">else</span>
140:           <span class="ruby-constant">UNIXSocket</span>
141:         <span class="ruby-keyword kw">end</span>
142:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000009">
                    
                    <a name="M000009"></a><b>read_packet</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Read the next packet from the agent. This will return a two-part tuple
consisting of the packet type, and the packet&#8217;s body (which is
returned as a <a href="../Buffer.html">Net::SSH::Buffer</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000009_source')" id="l_M000009_source">show</a>
                        
                    </p>
                    <div id="M000009_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 155</span>
155:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_packet</span>
156:         <span class="ruby-identifier">buffer</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value">4</span>))
157:         <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">append</span>(<span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">read_long</span>))
158:         <span class="ruby-identifier">type</span> = <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">read_byte</span>
159:         <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;received agent packet #{type} len #{buffer.length-4}&quot;</span> }
160:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">type</span>, <span class="ruby-identifier">buffer</span>
161:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000010">
                    
                    <a name="M000010"></a><b>send_and_wait</b>(type, *args)
                    
                </div>
                
                <div class="description">
                  <p>
Send the given packet and return the subsequent reply from the agent. (See
<a href="Agent.html#M000008">send_packet</a> and <a
href="Agent.html#M000009">read_packet</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000010_source')" id="l_M000010_source">show</a>
                        
                    </p>
                    <div id="M000010_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 165</span>
165:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">send_and_wait</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
166:         <span class="ruby-identifier">send_packet</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
167:         <span class="ruby-identifier">read_packet</span>
168:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000008">
                    
                    <a name="M000008"></a><b>send_packet</b>(type, *args)
                    
                </div>
                
                <div class="description">
                  <p>
Send a new packet of the given type, with the associated data.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000008_source')" id="l_M000008_source">show</a>
                        
                    </p>
                    <div id="M000008_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ssh/authentication/agent.rb, line 145</span>
145:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">send_packet</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
146:         <span class="ruby-identifier">buffer</span> = <span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
147:         <span class="ruby-identifier">data</span> = [<span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-value str">&quot;NCA*&quot;</span>)
148:         <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;sending agent request #{type} len #{buffer.length}&quot;</span> }
149:         <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">data</span>, <span class="ruby-value">0</span>
150:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    