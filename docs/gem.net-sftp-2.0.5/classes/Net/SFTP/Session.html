<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Net::SFTP::Session</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Net::SFTP::Session 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/net/sftp/session_rb.html">lib/net/sftp/session.rb</a></li>
            
            <li><a href="../../../files/lib/net/sftp/session_rb.html">lib/net/sftp/session.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
The <a href="Session.html">Session</a> class encapsulates a single <a
href="../SFTP.html">SFTP</a> channel on a <a
href="../SSH.html">Net::SSH</a> connection. Instances of this class are
what most applications will interact with most, as it provides access to
both low-level (mkdir, rename, remove, symlink, etc.) and high-level
(upload, download, etc.) <a href="../SFTP.html">SFTP</a> operations.
</p>
<p>
Although <a href="Session.html">Session</a> makes it easy to do <a
href="../SFTP.html">SFTP</a> operations serially, you can also set up
multiple operations to be done in parallel, too, without needing to resort
to threading. You merely need to fire off the requests, and then run the
event loop until all of the requests have completed:
</p>
<pre>
  handle1 = sftp.open!(&quot;/path/to/file1&quot;)
  handle2 = sftp.open!(&quot;/path/to/file2&quot;)

  r1 = sftp.read(handle1, 0, 1024)
  r2 = sftp.read(handle2, 0, 1024)
  sftp.loop { [r1, r2].any? { |r| r.pending? } }

  puts &quot;chunk #1: #{r1.response[:data]}&quot;
  puts &quot;chunk #2: #{r2.response[:data]}&quot;
</pre>
<p>
By passing blocks to the operations, you can set up powerful state
machines, to fire off subsequent operations. In fact, the <a
href="Operations/Upload.html">Net::SFTP::Operations::Upload</a> and <a
href="Operations/Download.html">Net::SFTP::Operations::Download</a> classes
set up such state machines, so that multiple uploads and/or downloads can
be running simultaneously.
</p>
<p>
The convention with the names of the operations is as follows: if the
method name ends with an exclamation mark, like <a
href="Session.html#M000176">read!</a>, it will be synchronous (e.g., it
will block until the server responds). Methods without an exclamation mark
(e.g. <a href="Session.html#M000175">read</a>) are asynchronous, and return
before the server has responded. You will need to make sure the <a
href="../SSH.html">SSH</a> event loop is run in order to process these
requests. (See <a href="Session.html#M000226">loop</a>.)
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000440">block</a>,</li>
                
                <li><a href="#M000216">block</a>,</li>
                
                <li><a href="#M000441">block!</a>,</li>
                
                <li><a href="#M000217">block!</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000404">close</a>,</li>
                
                <li><a href="#M000173">close</a>,</li>
                
                <li><a href="#M000174">close!</a>,</li>
                
                <li><a href="#M000405">close!</a>,</li>
                
                <li><a href="#M000220">close_channel</a>,</li>
                
                <li><a href="#M000444">close_channel</a>,</li>
                
                <li><a href="#M000222">closed?</a>,</li>
                
                <li><a href="#M000446">closed?</a>,</li>
                
                <li><a href="#M000224">connect</a>,</li>
                
                <li><a href="#M000448">connect</a>,</li>
                
                <li><a href="#M000449">connect!</a>,</li>
                
                <li><a href="#M000225">connect!</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000401">dir</a>,</li>
                
                <li><a href="#M000170">dir</a>,</li>
                
                <li><a href="#M000249">dispatch_request</a>,</li>
                
                <li><a href="#M000461">dispatch_request</a>,</li>
                
                <li><a href="#M000460">do_version</a>,</li>
                
                <li><a href="#M000244">do_version</a>,</li>
                
                <li><a href="#M000398">download</a>,</li>
                
                <li><a href="#M000167">download</a>,</li>
                
                <li><a href="#M000168">download!</a>,</li>
                
                <li><a href="#M000399">download!</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000169">file</a>,</li>
                
                <li><a href="#M000400">file</a>,</li>
                
                <li><a href="#M000185">fsetstat</a>,</li>
                
                <li><a href="#M000416">fsetstat</a>,</li>
                
                <li><a href="#M000417">fsetstat!</a>,</li>
                
                <li><a href="#M000186">fsetstat!</a>,</li>
                
                <li><a href="#M000181">fstat</a>,</li>
                
                <li><a href="#M000412">fstat</a>,</li>
                
                <li><a href="#M000182">fstat!</a>,</li>
                
                <li><a href="#M000413">fstat!</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000453">input</a>,</li>
                
                <li><a href="#M000229">input</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000214">link</a>,</li>
                
                <li><a href="#M000438">link</a>,</li>
                
                <li><a href="#M000215">link!</a>,</li>
                
                <li><a href="#M000439">link!</a>,</li>
                
                <li><a href="#M000451">loop</a>,</li>
                
                <li><a href="#M000226">loop</a>,</li>
                
                <li><a href="#M000450">loop_forever</a>,</li>
                
                <li><a href="#M000227">loop_forever</a>,</li>
                
                <li><a href="#M000410">lstat</a>,</li>
                
                <li><a href="#M000179">lstat</a>,</li>
                
                <li><a href="#M000411">lstat!</a>,</li>
                
                <li><a href="#M000180">lstat!</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000424">mkdir</a>,</li>
                
                <li><a href="#M000195">mkdir</a>,</li>
                
                <li><a href="#M000425">mkdir!</a>,</li>
                
                <li><a href="#M000196">mkdir!</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000395">new</a>,</li>
                
                <li><a href="#M000164">new</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000402">open</a>,</li>
                
                <li><a href="#M000171">open</a>,</li>
                
                <li><a href="#M000172">open!</a>,</li>
                
                <li><a href="#M000403">open!</a>,</li>
                
                <li><a href="#M000445">open?</a>,</li>
                
                <li><a href="#M000221">open?</a>,</li>
                
                <li><a href="#M000187">opendir</a>,</li>
                
                <li><a href="#M000418">opendir</a>,</li>
                
                <li><a href="#M000419">opendir!</a>,</li>
                
                <li><a href="#M000189">opendir!</a>,</li>
                
                <li><a href="#M000447">opening?</a>,</li>
                
                <li><a href="#M000223">opening?</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000175">read</a>,</li>
                
                <li><a href="#M000406">read</a>,</li>
                
                <li><a href="#M000176">read!</a>,</li>
                
                <li><a href="#M000407">read!</a>,</li>
                
                <li><a href="#M000191">readdir</a>,</li>
                
                <li><a href="#M000420">readdir</a>,</li>
                
                <li><a href="#M000421">readdir!</a>,</li>
                
                <li><a href="#M000192">readdir!</a>,</li>
                
                <li><a href="#M000209">readlink</a>,</li>
                
                <li><a href="#M000434">readlink</a>,</li>
                
                <li><a href="#M000210">readlink!</a>,</li>
                
                <li><a href="#M000435">readlink!</a>,</li>
                
                <li><a href="#M000199">realpath</a>,</li>
                
                <li><a href="#M000428">realpath</a>,</li>
                
                <li><a href="#M000429">realpath!</a>,</li>
                
                <li><a href="#M000200">realpath!</a>,</li>
                
                <li><a href="#M000193">remove</a>,</li>
                
                <li><a href="#M000422">remove</a>,</li>
                
                <li><a href="#M000423">remove!</a>,</li>
                
                <li><a href="#M000194">remove!</a>,</li>
                
                <li><a href="#M000206">rename</a>,</li>
                
                <li><a href="#M000432">rename</a>,</li>
                
                <li><a href="#M000207">rename!</a>,</li>
                
                <li><a href="#M000433">rename!</a>,</li>
                
                <li><a href="#M000230">request</a>,</li>
                
                <li><a href="#M000454">request</a>,</li>
                
                <li><a href="#M000197">rmdir</a>,</li>
                
                <li><a href="#M000426">rmdir</a>,</li>
                
                <li><a href="#M000198">rmdir!</a>,</li>
                
                <li><a href="#M000427">rmdir!</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000228">send_packet</a>,</li>
                
                <li><a href="#M000452">send_packet</a>,</li>
                
                <li><a href="#M000183">setstat</a>,</li>
                
                <li><a href="#M000414">setstat</a>,</li>
                
                <li><a href="#M000415">setstat!</a>,</li>
                
                <li><a href="#M000184">setstat!</a>,</li>
                
                <li><a href="#M000430">stat</a>,</li>
                
                <li><a href="#M000203">stat</a>,</li>
                
                <li><a href="#M000431">stat!</a>,</li>
                
                <li><a href="#M000204">stat!</a>,</li>
                
                <li><a href="#M000436">symlink</a>,</li>
                
                <li><a href="#M000211">symlink</a>,</li>
                
                <li><a href="#M000437">symlink!</a>,</li>
                
                <li><a href="#M000213">symlink!</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000218">unblock</a>,</li>
                
                <li><a href="#M000442">unblock</a>,</li>
                
                <li><a href="#M000219">unblock!</a>,</li>
                
                <li><a href="#M000443">unblock!</a>,</li>
                
                <li><a href="#M000396">upload</a>,</li>
                
                <li><a href="#M000165">upload</a>,</li>
                
                <li><a href="#M000166">upload!</a>,</li>
                
                <li><a href="#M000397">upload!</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000455">wait_for</a>,</li>
                
                <li><a href="#M000231">wait_for</a>,</li>
                
                <li><a href="#M000235">when_channel_closed</a>,</li>
                
                <li><a href="#M000458">when_channel_closed</a>,</li>
                
                <li><a href="#M000232">when_channel_confirmed</a>,</li>
                
                <li><a href="#M000456">when_channel_confirmed</a>,</li>
                
                <li><a href="#M000459">when_channel_polled</a>,</li>
                
                <li><a href="#M000237">when_channel_polled</a>,</li>
                
                <li><a href="#M000233">when_subsystem_started</a>,</li>
                
                <li><a href="#M000457">when_subsystem_started</a>,</li>
                
                <li><a href="#M000177">write</a>,</li>
                
                <li><a href="#M000408">write</a>,</li>
                
                <li><a href="#M000409">write!</a>,</li>
                
                <li><a href="#M000178">write!</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <span>Net::SSH::Loggable</span>
            
            START:includes
        </li>
        
        <li>
            
            <a href="../SSH/Connection.html">Net::SSH::Connection</a>
            
            START:includes
        </li>
        
        <li>
            
            <span>Net::SSH::Loggable</span>
            
            START:includes
        </li>
        
        <li>
            
            <a href="../SSH/Connection.html">Net::SSH::Connection</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">HIGHEST_PROTOCOL_VERSION_SUPPORTED</td>
            <td>=</td>
            <td class="attr-value">6</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The highest protocol version supported by the <a
href="../SFTP.html">Net::SFTP</a> library.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">HIGHEST_PROTOCOL_VERSION_SUPPORTED</td>
            <td>=</td>
            <td class="attr-value">6</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The highest protocol version supported by the <a
href="../SFTP.html">Net::SFTP</a> library.
</p>
</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>session</td>
            <td class='attr-desc'><p>
A reference to the <a href="../SSH.html">Net::SSH</a> session object that
powers this <a href="../SFTP.html">SFTP</a> session.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>channel</td>
            <td class='attr-desc'><p>
The Net::SSH::Connection::Channel object that the <a
href="../SFTP.html">SFTP</a> session is being processed by.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>state</td>
            <td class='attr-desc'><p>
The state of the <a href="../SFTP.html">SFTP</a> connection. It will be
:opening, :subsystem, :init, :open, or :closed.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>protocol</td>
            <td class='attr-desc'><p>
The protocol instance being used by this <a href="../SFTP.html">SFTP</a>
session. Useful for querying the protocol version in effect.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>pending_requests</td>
            <td class='attr-desc'><p>
The hash of pending requests. Any requests that have been sent and which
the server has not yet responded to will be represented here.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>session</td>
            <td class='attr-desc'><p>
A reference to the <a href="../SSH.html">Net::SSH</a> session object that
powers this <a href="../SFTP.html">SFTP</a> session.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>channel</td>
            <td class='attr-desc'><p>
The Net::SSH::Connection::Channel object that the <a
href="../SFTP.html">SFTP</a> session is being processed by.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>state</td>
            <td class='attr-desc'><p>
The state of the <a href="../SFTP.html">SFTP</a> connection. It will be
:opening, :subsystem, :init, :open, or :closed.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>protocol</td>
            <td class='attr-desc'><p>
The protocol instance being used by this <a href="../SFTP.html">SFTP</a>
session. Useful for querying the protocol version in effect.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>pending_requests</td>
            <td class='attr-desc'><p>
The hash of pending requests. Any requests that have been sent and which
the server has not yet responded to will be represented here.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000164">
                    
                    <a name="M000164"></a><b>new</b>(session, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="../SFTP.html">Net::SFTP</a> instance atop the given
<a href="../SSH.html">Net::SSH</a> connection. This will return
immediately, before the <a href="../SFTP.html">SFTP</a> connection has been
properly initialized. Once the connection is ready, the given block will be
called. If you want to block until the connection has been initialized, try
this:
</p>
<pre>
  sftp = Net::SFTP::Session.new(ssh)
  sftp.loop { sftp.opening? }
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000164_source')" id="l_M000164_source">show</a>
                        
                    </p>
                    <div id="M000164_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 78</span>
78:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
79:       <span class="ruby-ivar">@session</span>    = <span class="ruby-identifier">session</span>
80:       <span class="ruby-ivar">@input</span>      = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">new</span>
81:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">logger</span>
82:       <span class="ruby-ivar">@state</span>      = <span class="ruby-identifier">:closed</span>
83: 
84:       <span class="ruby-identifier">connect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
85:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000395">
                    
                    <a name="M000395"></a><b>new</b>(session, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="../SFTP.html">Net::SFTP</a> instance atop the given
<a href="../SSH.html">Net::SSH</a> connection. This will return
immediately, before the <a href="../SFTP.html">SFTP</a> connection has been
properly initialized. Once the connection is ready, the given block will be
called. If you want to block until the connection has been initialized, try
this:
</p>
<pre>
  sftp = Net::SFTP::Session.new(ssh)
  sftp.loop { sftp.opening? }
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000395_source')" id="l_M000395_source">show</a>
                        
                    </p>
                    <div id="M000395_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 78</span>
78:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
79:       <span class="ruby-ivar">@session</span>    = <span class="ruby-identifier">session</span>
80:       <span class="ruby-ivar">@input</span>      = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">new</span>
81:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">logger</span>
82:       <span class="ruby-ivar">@state</span>      = <span class="ruby-identifier">:closed</span>
83: 
84:       <span class="ruby-identifier">connect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
85:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000216">
                    
                    <a name="M000216"></a><b>block(handle, offset, length, mask) &rarr; request
block(handle, offset, length, mask) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a byte-range lock on the file specified by the given
<tt>handle</tt>. This operation is only available in <a
href="../SFTP.html">SFTP</a> protocol versions 6 and higher. The lock may
be either mandatory or advisory.
</p>
<p>
The <tt>handle</tt> parameter is a file handle, as obtained by the <a
href="Session.html#M000171">open</a> method.
</p>
<p>
The <tt>offset</tt> and <tt>length</tt> parameters describe the location
and size of the byte range.
</p>
<p>
The <tt>mask</tt> describes how the lock should be defined, and consists of
some combination of the following bit masks:
</p>
<ul>
<li>0x0040 - Read lock. The byte range may not be accessed for reading by via
any other handle, though it may be written to.

</li>
<li>0x0080 - Write lock. The byte range may not be written to via any other
handle, though it may be read from.

</li>
<li>0x0100 - Delete lock. No other handle may delete this file.

</li>
<li>0x0200 - Advisory lock. The server need not honor the lock instruction.

</li>
</ul>
<p>
Once created, the lock may be removed via the <a
href="Session.html#M000218">unblock</a> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000216_source')" id="l_M000216_source">show</a>
                        
                    </p>
                    <div id="M000216_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 691</span>
691:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">block</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
692:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:block</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
693:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000440">
                    
                    <a name="M000440"></a><b>block(handle, offset, length, mask) &rarr; request
block(handle, offset, length, mask) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a byte-range lock on the file specified by the given
<tt>handle</tt>. This operation is only available in <a
href="../SFTP.html">SFTP</a> protocol versions 6 and higher. The lock may
be either mandatory or advisory.
</p>
<p>
The <tt>handle</tt> parameter is a file handle, as obtained by the <a
href="Session.html#M000171">open</a> method.
</p>
<p>
The <tt>offset</tt> and <tt>length</tt> parameters describe the location
and size of the byte range.
</p>
<p>
The <tt>mask</tt> describes how the lock should be defined, and consists of
some combination of the following bit masks:
</p>
<ul>
<li>0x0040 - Read lock. The byte range may not be accessed for reading by via
any other handle, though it may be written to.

</li>
<li>0x0080 - Write lock. The byte range may not be written to via any other
handle, though it may be read from.

</li>
<li>0x0100 - Delete lock. No other handle may delete this file.

</li>
<li>0x0200 - Advisory lock. The server need not honor the lock instruction.

</li>
</ul>
<p>
Once created, the lock may be removed via the <a
href="Session.html#M000218">unblock</a> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000440_source')" id="l_M000440_source">show</a>
                        
                    </p>
                    <div id="M000440_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 691</span>
691:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">block</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
692:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:block</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
693:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000441">
                    
                    <a name="M000441"></a><b>block!</b>(handle, offset, length, mask, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000216">block</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000441_source')" id="l_M000441_source">show</a>
                        
                    </p>
                    <div id="M000441_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 698</span>
698:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">block!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
699:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">block</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
700:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000217">
                    
                    <a name="M000217"></a><b>block!</b>(handle, offset, length, mask, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000216">block</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000217_source')" id="l_M000217_source">show</a>
                        
                    </p>
                    <div id="M000217_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 698</span>
698:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">block!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
699:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">block</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
700:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000404">
                    
                    <a name="M000404"></a><b>close(handle) &rarr; request
close(handle) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Closes an open handle, whether obtained via <a
href="Session.html#M000171">open</a>, or <a
href="Session.html#M000187">opendir</a>. Returns immediately with a <a
href="Request.html">Request</a> object. If a block is given, it will be
invoked when the server responds.
</p>
<pre>
  sftp.open(&quot;/path/to/file&quot;) do |response|
    raise &quot;fail!&quot; unless response.ok?
    sftp.close(response[:handle])
  end
  sftp.loop
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000404_source')" id="l_M000404_source">show</a>
                        
                    </p>
                    <div id="M000404_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 207</span>
207:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
208:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:close</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
209:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000173">
                    
                    <a name="M000173"></a><b>close(handle) &rarr; request
close(handle) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Closes an open handle, whether obtained via <a
href="Session.html#M000171">open</a>, or <a
href="Session.html#M000187">opendir</a>. Returns immediately with a <a
href="Request.html">Request</a> object. If a block is given, it will be
invoked when the server responds.
</p>
<pre>
  sftp.open(&quot;/path/to/file&quot;) do |response|
    raise &quot;fail!&quot; unless response.ok?
    sftp.close(response[:handle])
  end
  sftp.loop
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000173_source')" id="l_M000173_source">show</a>
                        
                    </p>
                    <div id="M000173_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 207</span>
207:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
208:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:close</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
209:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000174">
                    
                    <a name="M000174"></a><b>close!</b>(handle, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000173">close</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it returns the <a
href="Response.html">Response</a> object for this request.
</p>
<pre>
  sftp.close!(handle)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000174_source')" id="l_M000174_source">show</a>
                        
                    </p>
                    <div id="M000174_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 216</span>
216:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
217:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">close</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
218:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000405">
                    
                    <a name="M000405"></a><b>close!</b>(handle, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000173">close</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it returns the <a
href="Response.html">Response</a> object for this request.
</p>
<pre>
  sftp.close!(handle)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000405_source')" id="l_M000405_source">show</a>
                        
                    </p>
                    <div id="M000405_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 216</span>
216:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
217:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">close</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
218:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000444">
                    
                    <a name="M000444"></a><b>close_channel</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Closes the <a href="../SFTP.html">SFTP</a> connection, but not the <a
href="../SSH.html">SSH</a> connection. Blocks until the session has
terminated. Once the session has terminated, further operations on this
object will result in errors. You can reopen the <a
href="../SFTP.html">SFTP</a> session via the <a
href="Session.html#M000224">connect</a> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000444_source')" id="l_M000444_source">show</a>
                        
                    </p>
                    <div id="M000444_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 727</span>
727:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close_channel</span>
728:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">open?</span>
729:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">close</span>
730:         <span class="ruby-identifier">loop</span> { <span class="ruby-operator">!</span><span class="ruby-identifier">closed?</span> }
731:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000220">
                    
                    <a name="M000220"></a><b>close_channel</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Closes the <a href="../SFTP.html">SFTP</a> connection, but not the <a
href="../SSH.html">SSH</a> connection. Blocks until the session has
terminated. Once the session has terminated, further operations on this
object will result in errors. You can reopen the <a
href="../SFTP.html">SFTP</a> session via the <a
href="Session.html#M000224">connect</a> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000220_source')" id="l_M000220_source">show</a>
                        
                    </p>
                    <div id="M000220_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 727</span>
727:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close_channel</span>
728:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">open?</span>
729:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">close</span>
730:         <span class="ruby-identifier">loop</span> { <span class="ruby-operator">!</span><span class="ruby-identifier">closed?</span> }
731:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000446">
                    
                    <a name="M000446"></a><b>closed?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the connection has been closed.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000446_source')" id="l_M000446_source">show</a>
                        
                    </p>
                    <div id="M000446_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 739</span>
739:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">closed?</span>
740:         <span class="ruby-identifier">state</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:closed</span>
741:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000222">
                    
                    <a name="M000222"></a><b>closed?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the connection has been closed.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000222_source')" id="l_M000222_source">show</a>
                        
                    </p>
                    <div id="M000222_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 739</span>
739:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">closed?</span>
740:         <span class="ruby-identifier">state</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:closed</span>
741:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000224">
                    
                    <a name="M000224"></a><b>connect</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to establish an <a href="../SFTP.html">SFTP</a> connection over
the <a href="../SSH.html">SSH</a> session given when this object was
instantiated. If the object is already open, this will simply execute the
given block (if any), passing the <a href="../SFTP.html">SFTP</a> session
itself as argument. If the session is currently being opened, this will add
the given block to the list of callbacks, to be executed when the session
is fully open.
</p>
<p>
This method does not block, and will return immediately. If you pass a
block to it, that block will be invoked when the connection has been fully
established. Thus, you can do something like this:
</p>
<pre>
  sftp.connect do
    puts &quot;open!&quot;
  end
</pre>
<p>
If you just want to block until the connection is ready, see the <a
href="Session.html#M000225">connect!</a> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000224_source')" id="l_M000224_source">show</a>
                        
                    </p>
                    <div id="M000224_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 766</span>
766:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
767:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">state</span>
768:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:open</span>
769:           <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
770:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:closed</span>
771:           <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:opening</span>
772:           <span class="ruby-ivar">@channel</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">open_channel</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:when_channel_confirmed</span>))
773:           <span class="ruby-ivar">@packet_length</span> = <span class="ruby-keyword kw">nil</span>
774:           <span class="ruby-ivar">@protocol</span> = <span class="ruby-keyword kw">nil</span>
775:           <span class="ruby-ivar">@on_ready</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">block</span>)
776:         <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># opening</span>
777:           <span class="ruby-ivar">@on_ready</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">block</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
778:         <span class="ruby-keyword kw">end</span>
779: 
780:         <span class="ruby-keyword kw">self</span>
781:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000448">
                    
                    <a name="M000448"></a><b>connect</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to establish an <a href="../SFTP.html">SFTP</a> connection over
the <a href="../SSH.html">SSH</a> session given when this object was
instantiated. If the object is already open, this will simply execute the
given block (if any), passing the <a href="../SFTP.html">SFTP</a> session
itself as argument. If the session is currently being opened, this will add
the given block to the list of callbacks, to be executed when the session
is fully open.
</p>
<p>
This method does not block, and will return immediately. If you pass a
block to it, that block will be invoked when the connection has been fully
established. Thus, you can do something like this:
</p>
<pre>
  sftp.connect do
    puts &quot;open!&quot;
  end
</pre>
<p>
If you just want to block until the connection is ready, see the <a
href="Session.html#M000225">connect!</a> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000448_source')" id="l_M000448_source">show</a>
                        
                    </p>
                    <div id="M000448_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 766</span>
766:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
767:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">state</span>
768:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:open</span>
769:           <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
770:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:closed</span>
771:           <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:opening</span>
772:           <span class="ruby-ivar">@channel</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">open_channel</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:when_channel_confirmed</span>))
773:           <span class="ruby-ivar">@packet_length</span> = <span class="ruby-keyword kw">nil</span>
774:           <span class="ruby-ivar">@protocol</span> = <span class="ruby-keyword kw">nil</span>
775:           <span class="ruby-ivar">@on_ready</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">block</span>)
776:         <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># opening</span>
777:           <span class="ruby-ivar">@on_ready</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">block</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
778:         <span class="ruby-keyword kw">end</span>
779: 
780:         <span class="ruby-keyword kw">self</span>
781:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000225">
                    
                    <a name="M000225"></a><b>connect!</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Same as the <a href="Session.html#M000224">connect</a> method, but blocks
until the <a href="../SFTP.html">SFTP</a> connection has been fully
initialized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000225_source')" id="l_M000225_source">show</a>
                        
                    </p>
                    <div id="M000225_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 785</span>
785:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
786:         <span class="ruby-identifier">connect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
787:         <span class="ruby-identifier">loop</span> { <span class="ruby-identifier">opening?</span> }
788:         <span class="ruby-keyword kw">self</span>
789:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000449">
                    
                    <a name="M000449"></a><b>connect!</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Same as the <a href="Session.html#M000224">connect</a> method, but blocks
until the <a href="../SFTP.html">SFTP</a> connection has been fully
initialized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000449_source')" id="l_M000449_source">show</a>
                        
                    </p>
                    <div id="M000449_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 785</span>
785:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
786:         <span class="ruby-identifier">connect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
787:         <span class="ruby-identifier">loop</span> { <span class="ruby-identifier">opening?</span> }
788:         <span class="ruby-keyword kw">self</span>
789:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000401">
                    
                    <a name="M000401"></a><b>dir</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <a href="Operations/Dir.html">Net::SFTP::Operations::Dir</a>
instance, which can be used to conveniently iterate over and search
directories on the remote server.
</p>
<pre>
 sftp.dir.glob(&quot;/base/path&quot;, &quot;*/**/*.rb&quot;) do |entry|
   p entry.name
 end
</pre>
<p>
See <a href="Operations/Dir.html">Net::SFTP::Operations::Dir</a> for a more
detailed discussion of how to use this.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000401_source')" id="l_M000401_source">show</a>
                        
                    </p>
                    <div id="M000401_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 153</span>
153:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dir</span>
154:         <span class="ruby-ivar">@dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>)
155:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000170">
                    
                    <a name="M000170"></a><b>dir</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <a href="Operations/Dir.html">Net::SFTP::Operations::Dir</a>
instance, which can be used to conveniently iterate over and search
directories on the remote server.
</p>
<pre>
 sftp.dir.glob(&quot;/base/path&quot;, &quot;*/**/*.rb&quot;) do |entry|
   p entry.name
 end
</pre>
<p>
See <a href="Operations/Dir.html">Net::SFTP::Operations::Dir</a> for a more
detailed discussion of how to use this.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show</a>
                        
                    </p>
                    <div id="M000170_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 153</span>
153:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dir</span>
154:         <span class="ruby-ivar">@dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Dir</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>)
155:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000167">
                    
                    <a name="M000167"></a><b>download</b>(remote, local, options={}, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Initiates a download from <tt>remote</tt> to <tt>local</tt>,
asynchronously. This method will return a new <a
href="Operations/Download.html">Net::SFTP::Operations::Download</a>
instance, and requires that the event loop be run in order for the download
to progress. See <a
href="Operations/Download.html">Net::SFTP::Operations::Download</a> for a
full discussion of hos this method can be used.
</p>
<pre>
  download = sftp.download(&quot;/remote/path&quot;, &quot;/local/path&quot;)
  download.wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000167_source')" id="l_M000167_source">show</a>
                        
                    </p>
                    <div id="M000167_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 114</span>
114:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">download</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
115:         <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Download</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
116:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000398">
                    
                    <a name="M000398"></a><b>download</b>(remote, local, options={}, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Initiates a download from <tt>remote</tt> to <tt>local</tt>,
asynchronously. This method will return a new <a
href="Operations/Download.html">Net::SFTP::Operations::Download</a>
instance, and requires that the event loop be run in order for the download
to progress. See <a
href="Operations/Download.html">Net::SFTP::Operations::Download</a> for a
full discussion of hos this method can be used.
</p>
<pre>
  download = sftp.download(&quot;/remote/path&quot;, &quot;/local/path&quot;)
  download.wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000398_source')" id="l_M000398_source">show</a>
                        
                    </p>
                    <div id="M000398_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 114</span>
114:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">download</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
115:         <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Download</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
116:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000399">
                    
                    <a name="M000399"></a><b>download!</b>(remote, local=nil, options={}, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000167">download</a>, but blocks until
the download is complete. If <tt>local</tt> is omitted, downloads the file
to an in-memory buffer and returns the result as a string; otherwise,
returns the <a
href="Operations/Download.html">Net::SFTP::Operations::Download</a>
instance.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000399_source')" id="l_M000399_source">show</a>
                        
                    </p>
                    <div id="M000399_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 122</span>
122:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">download!</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">local</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
123:         <span class="ruby-identifier">require</span> <span class="ruby-value str">'stringio'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">StringIO</span>)
124:         <span class="ruby-identifier">destination</span> = <span class="ruby-identifier">local</span> <span class="ruby-operator">||</span> <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
125:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">download</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">destination</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>).<span class="ruby-identifier">wait</span>
126:         <span class="ruby-identifier">local</span> <span class="ruby-value">? </span><span class="ruby-identifier">result</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">destination</span>.<span class="ruby-identifier">string</span>
127:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000168">
                    
                    <a name="M000168"></a><b>download!</b>(remote, local=nil, options={}, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000167">download</a>, but blocks until
the download is complete. If <tt>local</tt> is omitted, downloads the file
to an in-memory buffer and returns the result as a string; otherwise,
returns the <a
href="Operations/Download.html">Net::SFTP::Operations::Download</a>
instance.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000168_source')" id="l_M000168_source">show</a>
                        
                    </p>
                    <div id="M000168_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 122</span>
122:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">download!</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">local</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
123:         <span class="ruby-identifier">require</span> <span class="ruby-value str">'stringio'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">StringIO</span>)
124:         <span class="ruby-identifier">destination</span> = <span class="ruby-identifier">local</span> <span class="ruby-operator">||</span> <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
125:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">download</span>(<span class="ruby-identifier">remote</span>, <span class="ruby-identifier">destination</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>).<span class="ruby-identifier">wait</span>
126:         <span class="ruby-identifier">local</span> <span class="ruby-value">? </span><span class="ruby-identifier">result</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">destination</span>.<span class="ruby-identifier">string</span>
127:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000400">
                    
                    <a name="M000400"></a><b>file</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an <a
href="Operations/FileFactory.html">Net::SFTP::Operations::FileFactory</a>
instance, which can be used to mimic synchronous, IO-like file operations
on a remote file via <a href="../SFTP.html">SFTP</a>.
</p>
<pre>
  sftp.file.open(&quot;/path/to/file&quot;) do |file|
    while line = file.gets
      puts line
    end
  end
</pre>
<p>
See <a
href="Operations/FileFactory.html">Net::SFTP::Operations::FileFactory</a>
and <a href="Operations/File.html">Net::SFTP::Operations::File</a> for more
details.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000400_source')" id="l_M000400_source">show</a>
                        
                    </p>
                    <div id="M000400_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 140</span>
140:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">file</span>
141:         <span class="ruby-ivar">@file</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">FileFactory</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>)
142:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000169">
                    
                    <a name="M000169"></a><b>file</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an <a
href="Operations/FileFactory.html">Net::SFTP::Operations::FileFactory</a>
instance, which can be used to mimic synchronous, IO-like file operations
on a remote file via <a href="../SFTP.html">SFTP</a>.
</p>
<pre>
  sftp.file.open(&quot;/path/to/file&quot;) do |file|
    while line = file.gets
      puts line
    end
  end
</pre>
<p>
See <a
href="Operations/FileFactory.html">Net::SFTP::Operations::FileFactory</a>
and <a href="Operations/File.html">Net::SFTP::Operations::File</a> for more
details.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000169_source')" id="l_M000169_source">show</a>
                        
                    </p>
                    <div id="M000169_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 140</span>
140:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">file</span>
141:         <span class="ruby-ivar">@file</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">FileFactory</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>)
142:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000416">
                    
                    <a name="M000416"></a><b>fsetstat</b>(handle, attrs, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
The fsetstat method is identical to the <a
href="Session.html#M000183">setstat</a> method, with the exception that it
takes a <tt>handle</tt> as the first parameter, such as would be obtained
via the <a href="Session.html#M000171">open</a> or <a
href="Session.html#M000187">opendir</a> methods. (See the <a
href="Session.html#M000183">setstat</a> method for full documentation.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000416_source')" id="l_M000416_source">show</a>
                        
                    </p>
                    <div id="M000416_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 378</span>
378:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fsetstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
379:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:fsetstat</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
380:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000185">
                    
                    <a name="M000185"></a><b>fsetstat</b>(handle, attrs, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
The fsetstat method is identical to the <a
href="Session.html#M000183">setstat</a> method, with the exception that it
takes a <tt>handle</tt> as the first parameter, such as would be obtained
via the <a href="Session.html#M000171">open</a> or <a
href="Session.html#M000187">opendir</a> methods. (See the <a
href="Session.html#M000183">setstat</a> method for full documentation.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000185_source')" id="l_M000185_source">show</a>
                        
                    </p>
                    <div id="M000185_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 378</span>
378:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fsetstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
379:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:fsetstat</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
380:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000186">
                    
                    <a name="M000186"></a><b>fsetstat!</b>(handle, attrs, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000185">fsetstat</a> method, but
blocks until the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.fsetstat!(handle, :permissions =&gt; 0644)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000186_source')" id="l_M000186_source">show</a>
                        
                    </p>
                    <div id="M000186_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 387</span>
387:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fsetstat!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
388:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">fsetstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
389:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000417">
                    
                    <a name="M000417"></a><b>fsetstat!</b>(handle, attrs, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000185">fsetstat</a> method, but
blocks until the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.fsetstat!(handle, :permissions =&gt; 0644)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000417_source')" id="l_M000417_source">show</a>
                        
                    </p>
                    <div id="M000417_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 387</span>
387:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fsetstat!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
388:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">fsetstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
389:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000412">
                    
                    <a name="M000412"></a><b>fstat</b>(handle, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
The fstat method is identical to the <a
href="Session.html#M000203">stat</a> and <a
href="Session.html#M000179">lstat</a> methods, with the exception that it
takes a <tt>handle</tt> as the first parameter, such as would be obtained
via the <a href="Session.html#M000171">open</a> or <a
href="Session.html#M000187">opendir</a> methods. (See the <a
href="Session.html#M000179">lstat</a> method for full documentation).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000412_source')" id="l_M000412_source">show</a>
                        
                    </p>
                    <div id="M000412_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 327</span>
327:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
328:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:fstat</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
329:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000181">
                    
                    <a name="M000181"></a><b>fstat</b>(handle, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
The fstat method is identical to the <a
href="Session.html#M000203">stat</a> and <a
href="Session.html#M000179">lstat</a> methods, with the exception that it
takes a <tt>handle</tt> as the first parameter, such as would be obtained
via the <a href="Session.html#M000171">open</a> or <a
href="Session.html#M000187">opendir</a> methods. (See the <a
href="Session.html#M000179">lstat</a> method for full documentation).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000181_source')" id="l_M000181_source">show</a>
                        
                    </p>
                    <div id="M000181_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 327</span>
327:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
328:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:fstat</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
329:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000413">
                    
                    <a name="M000413"></a><b>fstat!</b>(handle, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000181">fstat</a> method, but
blocks until the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the attribute object describing the
path.
</p>
<pre>
  puts sftp.fstat!(handle).permissions
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000413_source')" id="l_M000413_source">show</a>
                        
                    </p>
                    <div id="M000413_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 336</span>
336:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fstat!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
337:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">fstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:attrs</span>)
338:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000182">
                    
                    <a name="M000182"></a><b>fstat!</b>(handle, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000181">fstat</a> method, but
blocks until the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the attribute object describing the
path.
</p>
<pre>
  puts sftp.fstat!(handle).permissions
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000182_source')" id="l_M000182_source">show</a>
                        
                    </p>
                    <div id="M000182_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 336</span>
336:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fstat!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
337:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">fstat</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:attrs</span>)
338:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000438">
                    
                    <a name="M000438"></a><b>link(new_link_path, existing_path, symlink=true) &rarr; request
link(new_link_path, existing_path, symlink=true) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to create a link, either hard or symbolic. This operation is only
available in <a href="../SFTP.html">SFTP</a> protocol versions 6 and
higher. If the <tt>symlink</tt> paramter is true, a symbolic link will be
created, otherwise a hard link will be created. The link will be named
<tt>new_link_path</tt>, and will point to the path <tt>existing_path</tt>.
</p>
<pre>
  sftp.link(&quot;/path/to/symlink&quot;, &quot;/path/to/file&quot;, true).wait
</pre>
<p>
Note that <a href="Session.html#M000214">link</a> is only available for <a
href="../SFTP.html">SFTP</a> protocol 6 and higher. You can use <a
href="Session.html#M000211">symlink</a> for protocols 3 and higher.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000438_source')" id="l_M000438_source">show</a>
                        
                    </p>
                    <div id="M000438_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 654</span>
654:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>=<span class="ruby-keyword kw">true</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
655:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:link</span>, <span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
656:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000214">
                    
                    <a name="M000214"></a><b>link(new_link_path, existing_path, symlink=true) &rarr; request
link(new_link_path, existing_path, symlink=true) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to create a link, either hard or symbolic. This operation is only
available in <a href="../SFTP.html">SFTP</a> protocol versions 6 and
higher. If the <tt>symlink</tt> paramter is true, a symbolic link will be
created, otherwise a hard link will be created. The link will be named
<tt>new_link_path</tt>, and will point to the path <tt>existing_path</tt>.
</p>
<pre>
  sftp.link(&quot;/path/to/symlink&quot;, &quot;/path/to/file&quot;, true).wait
</pre>
<p>
Note that <a href="Session.html#M000214">link</a> is only available for <a
href="../SFTP.html">SFTP</a> protocol 6 and higher. You can use <a
href="Session.html#M000211">symlink</a> for protocols 3 and higher.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000214_source')" id="l_M000214_source">show</a>
                        
                    </p>
                    <div id="M000214_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 654</span>
654:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>=<span class="ruby-keyword kw">true</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
655:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:link</span>, <span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
656:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000215">
                    
                    <a name="M000215"></a><b>link!</b>(new_link_path, existing_path, symlink=true, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000214">link</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.link!(&quot;/path/to/symlink&quot;, &quot;/path/to/file&quot;, true)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000215_source')" id="l_M000215_source">show</a>
                        
                    </p>
                    <div id="M000215_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 663</span>
663:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link!</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>=<span class="ruby-keyword kw">true</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
664:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">link</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
665:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000439">
                    
                    <a name="M000439"></a><b>link!</b>(new_link_path, existing_path, symlink=true, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000214">link</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.link!(&quot;/path/to/symlink&quot;, &quot;/path/to/file&quot;, true)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000439_source')" id="l_M000439_source">show</a>
                        
                    </p>
                    <div id="M000439_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 663</span>
663:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link!</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>=<span class="ruby-keyword kw">true</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
664:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">link</span>(<span class="ruby-identifier">new_link_path</span>, <span class="ruby-identifier">existing_path</span>, <span class="ruby-identifier">symlink</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
665:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000451">
                    
                    <a name="M000451"></a><b>loop</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Runs the <a href="../SSH.html">SSH</a> event loop while the given block
returns true. This lets you set up a state machine and then &#8220;fire it
off&#8221;. If you do not specify a block, the event loop will run for as
long as there are any pending <a href="../SFTP.html">SFTP</a> requests.
This makes it easy to do thing like this:
</p>
<pre>
  sftp.remove(&quot;/path/to/file&quot;)
  sftp.loop
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000451_source')" id="l_M000451_source">show</a>
                        
                    </p>
                    <div id="M000451_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 800</span>
800:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">loop</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
801:         <span class="ruby-identifier">block</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">pending_requests</span>.<span class="ruby-identifier">any?</span> }
802:         <span class="ruby-identifier">session</span>.<span class="ruby-identifier">loop</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
803:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000226">
                    
                    <a name="M000226"></a><b>loop</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Runs the <a href="../SSH.html">SSH</a> event loop while the given block
returns true. This lets you set up a state machine and then &#8220;fire it
off&#8221;. If you do not specify a block, the event loop will run for as
long as there are any pending <a href="../SFTP.html">SFTP</a> requests.
This makes it easy to do thing like this:
</p>
<pre>
  sftp.remove(&quot;/path/to/file&quot;)
  sftp.loop
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Session.html#M000227">loop_forever</a>
                    
                    <a href="Session.html#M000450">loop_forever</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000226_source')" id="l_M000226_source">show</a>
                        
                    </p>
                    <div id="M000226_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 800</span>
800:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">loop</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
801:         <span class="ruby-identifier">block</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">pending_requests</span>.<span class="ruby-identifier">any?</span> }
802:         <span class="ruby-identifier">session</span>.<span class="ruby-identifier">loop</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
803:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000227">
                    
                    <a name="M000227"></a><b>loop_forever</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Session.html#M000226">loop</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000450">
                    
                    <a name="M000450"></a><b>loop_forever</b>(&amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Session.html#M000226">loop</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000179">
                    
                    <a name="M000179"></a><b>lstat(path, flags=nil) &rarr; request
lstat(path, flags=nil) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
This method is identical to the <a href="Session.html#M000203">stat</a>
method, with the exception that it will not follow symbolic links (thus
allowing you to stat the link itself, rather than what it refers to). The
<tt>flags</tt> parameter is not used in <a href="../SFTP.html">SFTP</a>
protocol versions prior to 4, and will be ignored in those versions of the
protocol that do not use it. For those that do, however, you may provide
hints as to which file proprties you wish to query (e.g., if all you want
is permissions, you could pass the
Net::SFTP::Protocol::V04::Attributes::F_PERMISSIONS flag as the value for
the <tt>flags</tt> parameter).
</p>
<p>
The method returns immediately with a <a href="Request.html">Request</a>
object. If a block is given, it will be invoked when the server responds.
The :attrs property of the response will contain an Attributes instance
appropriate for the the protocol version (see <a
href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a>).
</p>
<pre>
  request = sftp.lstat(&quot;/path/to/file&quot;) do |response|
    raise &quot;fail!&quot; unless response.ok?
    puts &quot;permissions: %04o&quot; % response[:attrs].permissions
  end
  request.wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000179_source')" id="l_M000179_source">show</a>
                        
                    </p>
                    <div id="M000179_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 310</span>
310:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
311:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:lstat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
312:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000410">
                    
                    <a name="M000410"></a><b>lstat(path, flags=nil) &rarr; request
lstat(path, flags=nil) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
This method is identical to the <a href="Session.html#M000203">stat</a>
method, with the exception that it will not follow symbolic links (thus
allowing you to stat the link itself, rather than what it refers to). The
<tt>flags</tt> parameter is not used in <a href="../SFTP.html">SFTP</a>
protocol versions prior to 4, and will be ignored in those versions of the
protocol that do not use it. For those that do, however, you may provide
hints as to which file proprties you wish to query (e.g., if all you want
is permissions, you could pass the
Net::SFTP::Protocol::V04::Attributes::F_PERMISSIONS flag as the value for
the <tt>flags</tt> parameter).
</p>
<p>
The method returns immediately with a <a href="Request.html">Request</a>
object. If a block is given, it will be invoked when the server responds.
The :attrs property of the response will contain an Attributes instance
appropriate for the the protocol version (see <a
href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a>).
</p>
<pre>
  request = sftp.lstat(&quot;/path/to/file&quot;) do |response|
    raise &quot;fail!&quot; unless response.ok?
    puts &quot;permissions: %04o&quot; % response[:attrs].permissions
  end
  request.wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000410_source')" id="l_M000410_source">show</a>
                        
                    </p>
                    <div id="M000410_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 310</span>
310:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
311:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:lstat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
312:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000411">
                    
                    <a name="M000411"></a><b>lstat!</b>(path, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000179">lstat</a> method, but
blocks until the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the attribute object describing the
path.
</p>
<pre>
  puts sftp.lstat!(&quot;/path/to/file&quot;).permissions
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000411_source')" id="l_M000411_source">show</a>
                        
                    </p>
                    <div id="M000411_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 319</span>
319:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lstat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
320:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:attrs</span>)
321:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000180">
                    
                    <a name="M000180"></a><b>lstat!</b>(path, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000179">lstat</a> method, but
blocks until the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the attribute object describing the
path.
</p>
<pre>
  puts sftp.lstat!(&quot;/path/to/file&quot;).permissions
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000180_source')" id="l_M000180_source">show</a>
                        
                    </p>
                    <div id="M000180_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 319</span>
319:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lstat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
320:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:attrs</span>)
321:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000424">
                    
                    <a name="M000424"></a><b>mkdir(path, attrs={}) &rarr; request
mkdir(path, attrs={}) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates the named directory on the remote server. If an attribute hash is
given, it must map to the set of attributes supported by the version of the
<a href="../SFTP.html">SFTP</a> protocol in use. (See <a
href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a>.)
</p>
<pre>
  sftp.mkdir(&quot;/path/to/directory&quot;, :permissions =&gt; 0550).wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000424_source')" id="l_M000424_source">show</a>
                        
                    </p>
                    <div id="M000424_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 488</span>
488:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
489:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:mkdir</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
490:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000195">
                    
                    <a name="M000195"></a><b>mkdir(path, attrs={}) &rarr; request
mkdir(path, attrs={}) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates the named directory on the remote server. If an attribute hash is
given, it must map to the set of attributes supported by the version of the
<a href="../SFTP.html">SFTP</a> protocol in use. (See <a
href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a>.)
</p>
<pre>
  sftp.mkdir(&quot;/path/to/directory&quot;, :permissions =&gt; 0550).wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000195_source')" id="l_M000195_source">show</a>
                        
                    </p>
                    <div id="M000195_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 488</span>
488:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
489:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:mkdir</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
490:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000425">
                    
                    <a name="M000425"></a><b>mkdir!</b>(path, attrs={}, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000195">mkdir</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.mkdir!(&quot;/path/to/directory&quot;, :permissions =&gt; 0550)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000425_source')" id="l_M000425_source">show</a>
                        
                    </p>
                    <div id="M000425_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 497</span>
497:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
498:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
499:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000196">
                    
                    <a name="M000196"></a><b>mkdir!</b>(path, attrs={}, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000195">mkdir</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.mkdir!(&quot;/path/to/directory&quot;, :permissions =&gt; 0550)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000196_source')" id="l_M000196_source">show</a>
                        
                    </p>
                    <div id="M000196_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 497</span>
497:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
498:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
499:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000171">
                    
                    <a name="M000171"></a><b>open(path, flags="r", options={}) &rarr; request
open(path, flags="r", options={}) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Opens a file on the remote server. The <tt>flags</tt> parameter determines
how the flag is open, and accepts the same format as IO#open (e.g., either
a string like &#8220;r&#8221; or &#8220;w&#8221;, or a combination of the
IO constants). The <tt>options</tt> parameter is a hash of attributes to be
associated with the file, and varies greatly depending on the <a
href="../SFTP.html">SFTP</a> protocol version in use, but some (like
:permissions) are always available.
</p>
<p>
Returns immediately with a <a href="Request.html">Request</a> object. If a
block is given, it will be invoked when the server responds, with a <a
href="Response.html">Response</a> object as the only parameter. The :handle
property of the response is the handle of the opened file, and may be
passed to other methods (like <a href="Session.html#M000173">close</a>, <a
href="Session.html#M000175">read</a>, <a
href="Session.html#M000177">write</a>, and so forth).
</p>
<pre>
  sftp.open(&quot;/path/to/file&quot;) do |response|
    raise &quot;fail!&quot; unless response.ok?
    sftp.close(response[:handle])
  end
  sftp.loop
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000171_source')" id="l_M000171_source">show</a>
                        
                    </p>
                    <div id="M000171_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 181</span>
181:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-value str">&quot;r&quot;</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
182:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:open</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
183:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000402">
                    
                    <a name="M000402"></a><b>open(path, flags="r", options={}) &rarr; request
open(path, flags="r", options={}) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Opens a file on the remote server. The <tt>flags</tt> parameter determines
how the flag is open, and accepts the same format as IO#open (e.g., either
a string like &#8220;r&#8221; or &#8220;w&#8221;, or a combination of the
IO constants). The <tt>options</tt> parameter is a hash of attributes to be
associated with the file, and varies greatly depending on the <a
href="../SFTP.html">SFTP</a> protocol version in use, but some (like
:permissions) are always available.
</p>
<p>
Returns immediately with a <a href="Request.html">Request</a> object. If a
block is given, it will be invoked when the server responds, with a <a
href="Response.html">Response</a> object as the only parameter. The :handle
property of the response is the handle of the opened file, and may be
passed to other methods (like <a href="Session.html#M000173">close</a>, <a
href="Session.html#M000175">read</a>, <a
href="Session.html#M000177">write</a>, and so forth).
</p>
<pre>
  sftp.open(&quot;/path/to/file&quot;) do |response|
    raise &quot;fail!&quot; unless response.ok?
    sftp.close(response[:handle])
  end
  sftp.loop
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000402_source')" id="l_M000402_source">show</a>
                        
                    </p>
                    <div id="M000402_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 181</span>
181:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-value str">&quot;r&quot;</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
182:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:open</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
183:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000403">
                    
                    <a name="M000403"></a><b>open!</b>(path, flags=&quot;r&quot;, options={}, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000171">open</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the handle of the newly opened
file.
</p>
<pre>
  handle = sftp.open!(&quot;/path/to/file&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000403_source')" id="l_M000403_source">show</a>
                        
                    </p>
                    <div id="M000403_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 190</span>
190:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-value str">&quot;r&quot;</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
191:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:handle</span>)
192:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000172">
                    
                    <a name="M000172"></a><b>open!</b>(path, flags=&quot;r&quot;, options={}, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000171">open</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the handle of the newly opened
file.
</p>
<pre>
  handle = sftp.open!(&quot;/path/to/file&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000172_source')" id="l_M000172_source">show</a>
                        
                    </p>
                    <div id="M000172_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 190</span>
190:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-value str">&quot;r&quot;</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
191:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:handle</span>)
192:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000445">
                    
                    <a name="M000445"></a><b>open?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the connection has been initialized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000445_source')" id="l_M000445_source">show</a>
                        
                    </p>
                    <div id="M000445_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 734</span>
734:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open?</span>
735:         <span class="ruby-identifier">state</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:open</span>
736:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000221">
                    
                    <a name="M000221"></a><b>open?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the connection has been initialized.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000221_source')" id="l_M000221_source">show</a>
                        
                    </p>
                    <div id="M000221_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 734</span>
734:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open?</span>
735:         <span class="ruby-identifier">state</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:open</span>
736:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000418">
                    
                    <a name="M000418"></a><b>opendir(path) &rarr; request
opendir(path) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to open a directory on the remote host for reading. Once the
handle is obtained, directory entries may be retrieved using the <a
href="Session.html#M000191">readdir</a> method. The method returns
immediately with a <a href="Request.html">Request</a> object. If a block is
given, it will be invoked when the server responds.
</p>
<pre>
  sftp.opendir(&quot;/path/to/directory&quot;) do |response|
    raise &quot;fail!&quot; unless response.ok?
    sftp.close(response[:handle])
  end
  sftp.loop
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000418_source')" id="l_M000418_source">show</a>
                        
                    </p>
                    <div id="M000418_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 405</span>
405:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opendir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
406:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:opendir</span>, <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
407:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000187">
                    
                    <a name="M000187"></a><b>opendir(path) &rarr; request
opendir(path) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to open a directory on the remote host for reading. Once the
handle is obtained, directory entries may be retrieved using the <a
href="Session.html#M000191">readdir</a> method. The method returns
immediately with a <a href="Request.html">Request</a> object. If a block is
given, it will be invoked when the server responds.
</p>
<pre>
  sftp.opendir(&quot;/path/to/directory&quot;) do |response|
    raise &quot;fail!&quot; unless response.ok?
    sftp.close(response[:handle])
  end
  sftp.loop
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000187_source')" id="l_M000187_source">show</a>
                        
                    </p>
                    <div id="M000187_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 405</span>
405:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opendir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
406:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:opendir</span>, <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
407:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000189">
                    
                    <a name="M000189"></a><b>opendir!</b>(path, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000187">opendir</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return a handle to the given path.
</p>
<pre>
  handle = sftp.opendir!(&quot;/path/to/directory&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000189_source')" id="l_M000189_source">show</a>
                        
                    </p>
                    <div id="M000189_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 414</span>
414:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opendir!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
415:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">opendir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:handle</span>)
416:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000419">
                    
                    <a name="M000419"></a><b>opendir!</b>(path, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000187">opendir</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return a handle to the given path.
</p>
<pre>
  handle = sftp.opendir!(&quot;/path/to/directory&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000419_source')" id="l_M000419_source">show</a>
                        
                    </p>
                    <div id="M000419_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 414</span>
414:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opendir!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
415:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">opendir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:handle</span>)
416:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000223">
                    
                    <a name="M000223"></a><b>opening?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the connection is in the process of being initialized
(e.g., it is not closed, but is not yet fully open).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000223_source')" id="l_M000223_source">show</a>
                        
                    </p>
                    <div id="M000223_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 745</span>
745:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opening?</span>
746:         <span class="ruby-operator">!</span>(<span class="ruby-identifier">open?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">closed?</span>)
747:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000447">
                    
                    <a name="M000447"></a><b>opening?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the connection is in the process of being initialized
(e.g., it is not closed, but is not yet fully open).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000447_source')" id="l_M000447_source">show</a>
                        
                    </p>
                    <div id="M000447_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 745</span>
745:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opening?</span>
746:         <span class="ruby-operator">!</span>(<span class="ruby-identifier">open?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">closed?</span>)
747:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000175">
                    
                    <a name="M000175"></a><b>read(handle, offset, length) &rarr; request
read(handle, offset, length) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Requests that <tt>length</tt> bytes, starting at <tt>offset</tt> bytes from
the beginning of the file, be read from the file identified by
<tt>handle</tt>. (The <tt>handle</tt> should be a value obtained via the <a
href="Session.html#M000171">open</a> method.) Returns immediately with a <a
href="Request.html">Request</a> object. If a block is given, it will be
invoked when the server responds.
</p>
<p>
The :data property of the response will contain the requested data,
assuming the call was successful.
</p>
<pre>
  request = sftp.read(handle, 0, 1024) do |response|
    if response.eof?
      puts &quot;end of file reached before reading any data&quot;
    elsif !response.ok?
      puts &quot;error (#{response})&quot;
    else
      print(response[:data])
    end
  end
  request.wait
</pre>
<p>
To read an entire file will usually require multiple calls to <a
href="Session.html#M000175">read</a>, unless you know in advance how large
the file is.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000175_source')" id="l_M000175_source">show</a>
                        
                    </p>
                    <div id="M000175_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 246</span>
246:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
247:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:read</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
248:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000406">
                    
                    <a name="M000406"></a><b>read(handle, offset, length) &rarr; request
read(handle, offset, length) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Requests that <tt>length</tt> bytes, starting at <tt>offset</tt> bytes from
the beginning of the file, be read from the file identified by
<tt>handle</tt>. (The <tt>handle</tt> should be a value obtained via the <a
href="Session.html#M000171">open</a> method.) Returns immediately with a <a
href="Request.html">Request</a> object. If a block is given, it will be
invoked when the server responds.
</p>
<p>
The :data property of the response will contain the requested data,
assuming the call was successful.
</p>
<pre>
  request = sftp.read(handle, 0, 1024) do |response|
    if response.eof?
      puts &quot;end of file reached before reading any data&quot;
    elsif !response.ok?
      puts &quot;error (#{response})&quot;
    else
      print(response[:data])
    end
  end
  request.wait
</pre>
<p>
To read an entire file will usually require multiple calls to <a
href="Session.html#M000175">read</a>, unless you know in advance how large
the file is.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000406_source')" id="l_M000406_source">show</a>
                        
                    </p>
                    <div id="M000406_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 246</span>
246:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
247:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:read</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
248:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000176">
                    
                    <a name="M000176"></a><b>read!</b>(handle, offset, length, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000175">read</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. If the end of the file was reached, <tt>nil</tt> will be
returned. Otherwise, it returns the data that was read, as a String.
</p>
<pre>
  data = sftp.read!(handle, 0, 1024)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000176_source')" id="l_M000176_source">show</a>
                        
                    </p>
                    <div id="M000176_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 256</span>
256:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
257:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:data</span>)
258:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000407">
                    
                    <a name="M000407"></a><b>read!</b>(handle, offset, length, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000175">read</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. If the end of the file was reached, <tt>nil</tt> will be
returned. Otherwise, it returns the data that was read, as a String.
</p>
<pre>
  data = sftp.read!(handle, 0, 1024)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000407_source')" id="l_M000407_source">show</a>
                        
                    </p>
                    <div id="M000407_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 256</span>
256:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
257:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">read</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:data</span>)
258:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000191">
                    
                    <a name="M000191"></a><b>readdir(handle) &rarr; request
raeddir(handle) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Reads a set of entries from the given directory handle (which must have
been obtained via <a href="Session.html#M000187">opendir</a>). If the
response is EOF, then there are no more entries in the directory.
Otherwise, the entries will be in the :names property of the response:
</p>
<pre>
  loop do
    request = sftp.readdir(handle).wait
    break if request.response.eof?
    raise &quot;fail!&quot; unless request.response.ok?
    request.response[:names].each do |entry|
       puts entry.name
    end
  end
</pre>
<p>
See also <a href="Protocol/V01/Name.html">Protocol::V01::Name</a> and <a
href="Protocol/V04/Name.html">Protocol::V04::Name</a> for the specific
properties of each individual entry (which vary based on the <a
href="../SFTP.html">SFTP</a> protocol version in use).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000191_source')" id="l_M000191_source">show</a>
                        
                    </p>
                    <div id="M000191_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 439</span>
439:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readdir</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
440:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:readdir</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
441:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000420">
                    
                    <a name="M000420"></a><b>readdir(handle) &rarr; request
raeddir(handle) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Reads a set of entries from the given directory handle (which must have
been obtained via <a href="Session.html#M000187">opendir</a>). If the
response is EOF, then there are no more entries in the directory.
Otherwise, the entries will be in the :names property of the response:
</p>
<pre>
  loop do
    request = sftp.readdir(handle).wait
    break if request.response.eof?
    raise &quot;fail!&quot; unless request.response.ok?
    request.response[:names].each do |entry|
       puts entry.name
    end
  end
</pre>
<p>
See also <a href="Protocol/V01/Name.html">Protocol::V01::Name</a> and <a
href="Protocol/V04/Name.html">Protocol::V04::Name</a> for the specific
properties of each individual entry (which vary based on the <a
href="../SFTP.html">SFTP</a> protocol version in use).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000420_source')" id="l_M000420_source">show</a>
                        
                    </p>
                    <div id="M000420_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 439</span>
439:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readdir</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
440:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:readdir</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
441:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000421">
                    
                    <a name="M000421"></a><b>readdir!</b>(handle, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000191">readdir</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return nil if there were no more names to
read, or an array of name entries.
</p>
<pre>
  while (entries = sftp.readdir!(handle)) do
    entries.each { |entry| puts(entry.name) }
  end
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000421_source')" id="l_M000421_source">show</a>
                        
                    </p>
                    <div id="M000421_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 451</span>
451:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readdir!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
452:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">readdir</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:names</span>)
453:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000192">
                    
                    <a name="M000192"></a><b>readdir!</b>(handle, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000191">readdir</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return nil if there were no more names to
read, or an array of name entries.
</p>
<pre>
  while (entries = sftp.readdir!(handle)) do
    entries.each { |entry| puts(entry.name) }
  end
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000192_source')" id="l_M000192_source">show</a>
                        
                    </p>
                    <div id="M000192_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 451</span>
451:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readdir!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
452:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">readdir</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:names</span>)
453:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000209">
                    
                    <a name="M000209"></a><b>readlink(path) &rarr; request
readlink(path) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Queries the server for the target of the specified symbolic link. This
operation is only available in protocol versions 3 and higher. The response
to this request will include a names property, a one-element array naming
the target of the symlink.
</p>
<pre>
  request = sftp.readlink(&quot;/path/to/symlink&quot;).wait
  puts request.response[:names].first.name
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000209_source')" id="l_M000209_source">show</a>
                        
                    </p>
                    <div id="M000209_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 604</span>
604:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
605:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:readlink</span>, <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
606:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000434">
                    
                    <a name="M000434"></a><b>readlink(path) &rarr; request
readlink(path) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Queries the server for the target of the specified symbolic link. This
operation is only available in protocol versions 3 and higher. The response
to this request will include a names property, a one-element array naming
the target of the symlink.
</p>
<pre>
  request = sftp.readlink(&quot;/path/to/symlink&quot;).wait
  puts request.response[:names].first.name
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000434_source')" id="l_M000434_source">show</a>
                        
                    </p>
                    <div id="M000434_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 604</span>
604:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
605:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:readlink</span>, <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
606:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000435">
                    
                    <a name="M000435"></a><b>readlink!</b>(path, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000209">readlink</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the Name object for the path that
the symlink targets.
</p>
<pre>
  item = sftp.readlink!(&quot;/path/to/symlink&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000435_source')" id="l_M000435_source">show</a>
                        
                    </p>
                    <div id="M000435_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 613</span>
613:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readlink!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
614:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:names</span>).<span class="ruby-identifier">first</span>
615:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000210">
                    
                    <a name="M000210"></a><b>readlink!</b>(path, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000209">readlink</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the Name object for the path that
the symlink targets.
</p>
<pre>
  item = sftp.readlink!(&quot;/path/to/symlink&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000210_source')" id="l_M000210_source">show</a>
                        
                    </p>
                    <div id="M000210_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 613</span>
613:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readlink!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
614:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:names</span>).<span class="ruby-identifier">first</span>
615:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000199">
                    
                    <a name="M000199"></a><b>realpath(path) &rarr; request
realpath(path) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Tries to canonicalize the given path, turning any given path into an
absolute path. This is primarily useful for converting a path with
&#8220;..&#8221; or &#8220;.&#8221; segments into an identical path without
those segments. The answer will be in the response&#8217;s :names
attribute, as a one-element array.
</p>
<pre>
  request = sftp.realpath(&quot;/path/../to/../directory&quot;).wait
  puts request[:names].first.name
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000199_source')" id="l_M000199_source">show</a>
                        
                    </p>
                    <div id="M000199_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 534</span>
534:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
535:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:realpath</span>, <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
536:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000428">
                    
                    <a name="M000428"></a><b>realpath(path) &rarr; request
realpath(path) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Tries to canonicalize the given path, turning any given path into an
absolute path. This is primarily useful for converting a path with
&#8220;..&#8221; or &#8220;.&#8221; segments into an identical path without
those segments. The answer will be in the response&#8217;s :names
attribute, as a one-element array.
</p>
<pre>
  request = sftp.realpath(&quot;/path/../to/../directory&quot;).wait
  puts request[:names].first.name
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000428_source')" id="l_M000428_source">show</a>
                        
                    </p>
                    <div id="M000428_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 534</span>
534:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
535:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:realpath</span>, <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
536:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000200">
                    
                    <a name="M000200"></a><b>realpath!</b>(path, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000199">realpath</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return a name object identifying the path.
</p>
<pre>
  puts(sftp.realpath!(&quot;/path/../to/../directory&quot;))
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000200_source')" id="l_M000200_source">show</a>
                        
                    </p>
                    <div id="M000200_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 543</span>
543:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">realpath!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
544:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:names</span>).<span class="ruby-identifier">first</span>
545:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000429">
                    
                    <a name="M000429"></a><b>realpath!</b>(path, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000199">realpath</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return a name object identifying the path.
</p>
<pre>
  puts(sftp.realpath!(&quot;/path/../to/../directory&quot;))
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000429_source')" id="l_M000429_source">show</a>
                        
                    </p>
                    <div id="M000429_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 543</span>
543:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">realpath!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
544:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:names</span>).<span class="ruby-identifier">first</span>
545:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000193">
                    
                    <a name="M000193"></a><b>remove(filename) &rarr; request
remove(filename) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to remove the given file from the remote file system. Returns
immediately with a <a href="Request.html">Request</a> object. If a block is
given, the block will be invoked when the server responds, and will be
passed a <a href="Response.html">Response</a> object.
</p>
<pre>
  sftp.remove(&quot;/path/to/file&quot;).wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000193_source')" id="l_M000193_source">show</a>
                        
                    </p>
                    <div id="M000193_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 465</span>
465:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
466:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:remove</span>, <span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
467:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000422">
                    
                    <a name="M000422"></a><b>remove(filename) &rarr; request
remove(filename) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to remove the given file from the remote file system. Returns
immediately with a <a href="Request.html">Request</a> object. If a block is
given, the block will be invoked when the server responds, and will be
passed a <a href="Response.html">Response</a> object.
</p>
<pre>
  sftp.remove(&quot;/path/to/file&quot;).wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000422_source')" id="l_M000422_source">show</a>
                        
                    </p>
                    <div id="M000422_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 465</span>
465:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
466:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:remove</span>, <span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
467:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000423">
                    
                    <a name="M000423"></a><b>remove!</b>(filename, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000193">remove</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.remove!(&quot;/path/to/file&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000423_source')" id="l_M000423_source">show</a>
                        
                    </p>
                    <div id="M000423_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 474</span>
474:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove!</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
475:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">remove</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
476:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000194">
                    
                    <a name="M000194"></a><b>remove!</b>(filename, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000193">remove</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.remove!(&quot;/path/to/file&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000194_source')" id="l_M000194_source">show</a>
                        
                    </p>
                    <div id="M000194_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 474</span>
474:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove!</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
475:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">remove</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
476:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000206">
                    
                    <a name="M000206"></a><b>rename(name, new_name, flags=nil) &rarr; request
rename(name, new_name, flags=nil) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Renames the given file. This operation is only available in <a
href="../SFTP.html">SFTP</a> protocol versions two and higher. The
<tt>flags</tt> parameter is ignored in versions prior to 5. In versions 5
and higher, the <tt>flags</tt> parameter can be used to specify how the
rename should be performed (atomically, etc.).
</p>
<p>
The following flags are defined in protocol version 5:
</p>
<ul>
<li>0x0001 - overwrite an existing file if the new name specifies a file that
already exists.

</li>
<li>0x0002 - perform the rewrite atomically.

</li>
<li>0x0004 - allow the server to perform the rename as it prefers.

</li>
</ul>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000206_source')" id="l_M000206_source">show</a>
                        
                    </p>
                    <div id="M000206_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 580</span>
580:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
581:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:rename</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
582:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000432">
                    
                    <a name="M000432"></a><b>rename(name, new_name, flags=nil) &rarr; request
rename(name, new_name, flags=nil) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Renames the given file. This operation is only available in <a
href="../SFTP.html">SFTP</a> protocol versions two and higher. The
<tt>flags</tt> parameter is ignored in versions prior to 5. In versions 5
and higher, the <tt>flags</tt> parameter can be used to specify how the
rename should be performed (atomically, etc.).
</p>
<p>
The following flags are defined in protocol version 5:
</p>
<ul>
<li>0x0001 - overwrite an existing file if the new name specifies a file that
already exists.

</li>
<li>0x0002 - perform the rewrite atomically.

</li>
<li>0x0004 - allow the server to perform the rename as it prefers.

</li>
</ul>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000432_source')" id="l_M000432_source">show</a>
                        
                    </p>
                    <div id="M000432_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 580</span>
580:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
581:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:rename</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
582:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000207">
                    
                    <a name="M000207"></a><b>rename!</b>(name, new_name, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000206">rename</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.rename!(&quot;/path/to/old&quot;, &quot;/path/to/new&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000207_source')" id="l_M000207_source">show</a>
                        
                    </p>
                    <div id="M000207_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 589</span>
589:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename!</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
590:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">rename</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
591:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000433">
                    
                    <a name="M000433"></a><b>rename!</b>(name, new_name, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000206">rename</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.rename!(&quot;/path/to/old&quot;, &quot;/path/to/new&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000433_source')" id="l_M000433_source">show</a>
                        
                    </p>
                    <div id="M000433_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 589</span>
589:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename!</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
590:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">rename</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
591:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000197">
                    
                    <a name="M000197"></a><b>rmdir(path) &rarr; request
rmdir(path) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Removes the named directory on the remote server. The directory must be
empty before it can be removed.
</p>
<pre>
  sftp.rmdir(&quot;/path/to/directory&quot;).wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000197_source')" id="l_M000197_source">show</a>
                        
                    </p>
                    <div id="M000197_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 509</span>
509:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
510:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:rmdir</span>, <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
511:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000426">
                    
                    <a name="M000426"></a><b>rmdir(path) &rarr; request
rmdir(path) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Removes the named directory on the remote server. The directory must be
empty before it can be removed.
</p>
<pre>
  sftp.rmdir(&quot;/path/to/directory&quot;).wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000426_source')" id="l_M000426_source">show</a>
                        
                    </p>
                    <div id="M000426_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 509</span>
509:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
510:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:rmdir</span>, <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
511:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000198">
                    
                    <a name="M000198"></a><b>rmdir!</b>(path, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000197">rmdir</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.rmdir!(&quot;/path/to/directory&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000198_source')" id="l_M000198_source">show</a>
                        
                    </p>
                    <div id="M000198_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 518</span>
518:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
519:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
520:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000427">
                    
                    <a name="M000427"></a><b>rmdir!</b>(path, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000197">rmdir</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.rmdir!(&quot;/path/to/directory&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000427_source')" id="l_M000427_source">show</a>
                        
                    </p>
                    <div id="M000427_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 518</span>
518:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
519:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
520:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000228">
                    
                    <a name="M000228"></a><b>send_packet</b>(type, *args)
                    
                </div>
                
                <div class="description">
                  <p>
Formats, constructs, and sends an <a href="../SFTP.html">SFTP</a> packet of
the given type and with the given data. This does not block, but merely
enqueues the packet for sending and returns.
</p>
<p>
You should probably use the operation methods, rather than building and
sending the packet directly. (See <a href="Session.html#M000171">open</a>,
<a href="Session.html#M000173">close</a>, etc.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000228_source')" id="l_M000228_source">show</a>
                        
                    </p>
                    <div id="M000228_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 811</span>
811:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">send_packet</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
812:         <span class="ruby-identifier">data</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
813:         <span class="ruby-identifier">msg</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">:long</span>, <span class="ruby-identifier">data</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-identifier">:byte</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">:raw</span>, <span class="ruby-identifier">data</span>)
814:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">send_data</span>(<span class="ruby-identifier">msg</span>.<span class="ruby-identifier">to_s</span>)
815:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000452">
                    
                    <a name="M000452"></a><b>send_packet</b>(type, *args)
                    
                </div>
                
                <div class="description">
                  <p>
Formats, constructs, and sends an <a href="../SFTP.html">SFTP</a> packet of
the given type and with the given data. This does not block, but merely
enqueues the packet for sending and returns.
</p>
<p>
You should probably use the operation methods, rather than building and
sending the packet directly. (See <a href="Session.html#M000171">open</a>,
<a href="Session.html#M000173">close</a>, etc.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000452_source')" id="l_M000452_source">show</a>
                        
                    </p>
                    <div id="M000452_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 811</span>
811:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">send_packet</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
812:         <span class="ruby-identifier">data</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
813:         <span class="ruby-identifier">msg</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-identifier">:long</span>, <span class="ruby-identifier">data</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-identifier">:byte</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">:raw</span>, <span class="ruby-identifier">data</span>)
814:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">send_data</span>(<span class="ruby-identifier">msg</span>.<span class="ruby-identifier">to_s</span>)
815:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000183">
                    
                    <a name="M000183"></a><b>setstat(path, attrs) &rarr; request
setstat(path, attrs) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
This method may be used to set file metadata (such as permissions, or
user/group information) on a remote file. The exact metadata that may be
tweaked is dependent on the <a href="../SFTP.html">SFTP</a> protocol
version in use, but in general you may set at least the permissions, user,
and group. (See <a
href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a> for the
full lists of attributes that may be set for the different protocols.)
</p>
<p>
The <tt>attrs</tt> parameter is a hash, where the keys are symbols
identifying the attributes to set.
</p>
<p>
The method returns immediately with a <a href="Request.html">Request</a>
object. If a block is given, it will be invoked when the server responds.
</p>
<pre>
  request = sftp.setstat(&quot;/path/to/file&quot;, :permissions =&gt; 0644)
  request.wait
  puts &quot;success: #{request.response.ok?}&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000183_source')" id="l_M000183_source">show</a>
                        
                    </p>
                    <div id="M000183_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 361</span>
361:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
362:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:setstat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
363:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000414">
                    
                    <a name="M000414"></a><b>setstat(path, attrs) &rarr; request
setstat(path, attrs) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
This method may be used to set file metadata (such as permissions, or
user/group information) on a remote file. The exact metadata that may be
tweaked is dependent on the <a href="../SFTP.html">SFTP</a> protocol
version in use, but in general you may set at least the permissions, user,
and group. (See <a
href="Protocol/V01/Attributes.html">Protocol::V01::Attributes</a>, <a
href="Protocol/V04/Attributes.html">Protocol::V04::Attributes</a>, and <a
href="Protocol/V06/Attributes.html">Protocol::V06::Attributes</a> for the
full lists of attributes that may be set for the different protocols.)
</p>
<p>
The <tt>attrs</tt> parameter is a hash, where the keys are symbols
identifying the attributes to set.
</p>
<p>
The method returns immediately with a <a href="Request.html">Request</a>
object. If a block is given, it will be invoked when the server responds.
</p>
<pre>
  request = sftp.setstat(&quot;/path/to/file&quot;, :permissions =&gt; 0644)
  request.wait
  puts &quot;success: #{request.response.ok?}&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000414_source')" id="l_M000414_source">show</a>
                        
                    </p>
                    <div id="M000414_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 361</span>
361:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
362:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:setstat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
363:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000415">
                    
                    <a name="M000415"></a><b>setstat!</b>(path, attrs, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000183">setstat</a> method, but
blocks until the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.setstat!(&quot;/path/to/file&quot;, :permissions =&gt; 0644)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000415_source')" id="l_M000415_source">show</a>
                        
                    </p>
                    <div id="M000415_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 370</span>
370:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setstat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
371:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">setstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
372:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000184">
                    
                    <a name="M000184"></a><b>setstat!</b>(path, attrs, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000183">setstat</a> method, but
blocks until the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.setstat!(&quot;/path/to/file&quot;, :permissions =&gt; 0644)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000184_source')" id="l_M000184_source">show</a>
                        
                    </p>
                    <div id="M000184_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 370</span>
370:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setstat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
371:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">setstat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
372:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000203">
                    
                    <a name="M000203"></a><b>stat</b>(path, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000179">lstat</a> method, except
that it follows symlinks (e.g., if you give it the path to a symlink, it
will stat the target of the symlink rather than the symlink itself). See
the <a href="Session.html#M000179">lstat</a> method for full documentation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000203_source')" id="l_M000203_source">show</a>
                        
                    </p>
                    <div id="M000203_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 551</span>
551:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
552:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:stat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
553:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000430">
                    
                    <a name="M000430"></a><b>stat</b>(path, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to the <a href="Session.html#M000179">lstat</a> method, except
that it follows symlinks (e.g., if you give it the path to a symlink, it
will stat the target of the symlink rather than the symlink itself). See
the <a href="Session.html#M000179">lstat</a> method for full documentation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000430_source')" id="l_M000430_source">show</a>
                        
                    </p>
                    <div id="M000430_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 551</span>
551:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
552:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:stat</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
553:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000431">
                    
                    <a name="M000431"></a><b>stat!</b>(path, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000203">stat</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return an attribute object for the named
path.
</p>
<pre>
  attrs = sftp.stat!(&quot;/path/to/file&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000431_source')" id="l_M000431_source">show</a>
                        
                    </p>
                    <div id="M000431_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 560</span>
560:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
561:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:attrs</span>)
562:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000204">
                    
                    <a name="M000204"></a><b>stat!</b>(path, flags=nil, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000203">stat</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return an attribute object for the named
path.
</p>
<pre>
  attrs = sftp.stat!(&quot;/path/to/file&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000204_source')" id="l_M000204_source">show</a>
                        
                    </p>
                    <div id="M000204_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 560</span>
560:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stat!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
561:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">flags</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>), <span class="ruby-identifier">:attrs</span>)
562:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000211">
                    
                    <a name="M000211"></a><b>symlink(path, target) &rarr; request
symlink(path, target) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to create a symlink to <tt>path</tt> at <tt>target</tt>. This
operation is only available in protocol versions 3, 4, and 5, but the <a
href="../SFTP.html">Net::SFTP</a> library mimics the symlink behavior in
protocol version 6 using the <a href="Session.html#M000214">link</a>
method, so it is safe to use this method in protocol version 6.
</p>
<pre>
  sftp.symlink(&quot;/path/to/file&quot;, &quot;/path/to/symlink&quot;).wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000211_source')" id="l_M000211_source">show</a>
                        
                    </p>
                    <div id="M000211_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 627</span>
627:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">symlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
628:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:symlink</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
629:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000436">
                    
                    <a name="M000436"></a><b>symlink(path, target) &rarr; request
symlink(path, target) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Attempts to create a symlink to <tt>path</tt> at <tt>target</tt>. This
operation is only available in protocol versions 3, 4, and 5, but the <a
href="../SFTP.html">Net::SFTP</a> library mimics the symlink behavior in
protocol version 6 using the <a href="Session.html#M000214">link</a>
method, so it is safe to use this method in protocol version 6.
</p>
<pre>
  sftp.symlink(&quot;/path/to/file&quot;, &quot;/path/to/symlink&quot;).wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000436_source')" id="l_M000436_source">show</a>
                        
                    </p>
                    <div id="M000436_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 627</span>
627:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">symlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
628:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:symlink</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
629:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000213">
                    
                    <a name="M000213"></a><b>symlink!</b>(path, target, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000211">symlink</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.symlink!(&quot;/path/to/file&quot;, &quot;/path/to/symlink&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000213_source')" id="l_M000213_source">show</a>
                        
                    </p>
                    <div id="M000213_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 636</span>
636:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">symlink!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
637:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">symlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
638:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000437">
                    
                    <a name="M000437"></a><b>symlink!</b>(path, target, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000211">symlink</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>
<pre>
  sftp.symlink!(&quot;/path/to/file&quot;, &quot;/path/to/symlink&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000437_source')" id="l_M000437_source">show</a>
                        
                    </p>
                    <div id="M000437_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 636</span>
636:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">symlink!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
637:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">symlink</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">target</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
638:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000442">
                    
                    <a name="M000442"></a><b>unblock(handle, offset, length) &rarr; request
unblock(handle, offset, length) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Removes a previously created byte-range lock. This operation is only
available in protocol versions 6 and higher. The <tt>offset</tt> and
<tt>length</tt> parameters must exactly match those that were given to <a
href="Session.html#M000216">block</a> when the lock was acquired.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000442_source')" id="l_M000442_source">show</a>
                        
                    </p>
                    <div id="M000442_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 710</span>
710:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unblock</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
711:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:unblock</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
712:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000218">
                    
                    <a name="M000218"></a><b>unblock(handle, offset, length) &rarr; request
unblock(handle, offset, length) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Removes a previously created byte-range lock. This operation is only
available in protocol versions 6 and higher. The <tt>offset</tt> and
<tt>length</tt> parameters must exactly match those that were given to <a
href="Session.html#M000216">block</a> when the lock was acquired.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000218_source')" id="l_M000218_source">show</a>
                        
                    </p>
                    <div id="M000218_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 710</span>
710:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unblock</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
711:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:unblock</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
712:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000443">
                    
                    <a name="M000443"></a><b>unblock!</b>(handle, offset, length, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000218">unblock</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000443_source')" id="l_M000443_source">show</a>
                        
                    </p>
                    <div id="M000443_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 717</span>
717:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unblock!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
718:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">unblock</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
719:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000219">
                    
                    <a name="M000219"></a><b>unblock!</b>(handle, offset, length, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000218">unblock</a>, but blocks until
the server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful. Otherwise, it will return the <a
href="Response.html">Response</a> object for the request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000219_source')" id="l_M000219_source">show</a>
                        
                    </p>
                    <div id="M000219_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 717</span>
717:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unblock!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
718:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">unblock</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">length</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
719:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000396">
                    
                    <a name="M000396"></a><b>upload</b>(local, remote, options={}, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Initiates an upload from <tt>local</tt> to <tt>remote</tt>, asynchronously.
This method will return a new <a
href="Operations/Upload.html">Net::SFTP::Operations::Upload</a> instance,
and requires the event loop to be run in order for the upload to progress.
See <a href="Operations/Upload.html">Net::SFTP::Operations::Upload</a> for
a full discussion of how this method can be used.
</p>
<pre>
  uploader = sftp.upload(&quot;/local/path&quot;, &quot;/remote/path&quot;)
  uploader.wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000396_source')" id="l_M000396_source">show</a>
                        
                    </p>
                    <div id="M000396_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 97</span>
97:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">upload</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
98:         <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Upload</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
99:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000165">
                    
                    <a name="M000165"></a><b>upload</b>(local, remote, options={}, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Initiates an upload from <tt>local</tt> to <tt>remote</tt>, asynchronously.
This method will return a new <a
href="Operations/Upload.html">Net::SFTP::Operations::Upload</a> instance,
and requires the event loop to be run in order for the upload to progress.
See <a href="Operations/Upload.html">Net::SFTP::Operations::Upload</a> for
a full discussion of how this method can be used.
</p>
<pre>
  uploader = sftp.upload(&quot;/local/path&quot;, &quot;/remote/path&quot;)
  uploader.wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show</a>
                        
                    </p>
                    <div id="M000165_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 97</span>
97:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">upload</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
98:         <span class="ruby-constant">Operations</span><span class="ruby-operator">::</span><span class="ruby-constant">Upload</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
99:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000166">
                    
                    <a name="M000166"></a><b>upload!</b>(local, remote, options={}, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000165">upload</a>, but blocks until
the upload is complete.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000166_source')" id="l_M000166_source">show</a>
                        
                    </p>
                    <div id="M000166_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 102</span>
102:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">upload!</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
103:         <span class="ruby-identifier">upload</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>).<span class="ruby-identifier">wait</span>
104:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000397">
                    
                    <a name="M000397"></a><b>upload!</b>(local, remote, options={}, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000165">upload</a>, but blocks until
the upload is complete.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000397_source')" id="l_M000397_source">show</a>
                        
                    </p>
                    <div id="M000397_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 102</span>
102:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">upload!</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
103:         <span class="ruby-identifier">upload</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">remote</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>).<span class="ruby-identifier">wait</span>
104:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000177">
                    
                    <a name="M000177"></a><b>write(handle, offset, data) &rarr; request
write(handle, offset, data) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Requests that <tt>data</tt> be written to the file identified by
<tt>handle</tt>, starting at <tt>offset</tt> bytes from the start of the
file. The file must have been opened for writing via <a
href="Session.html#M000171">open</a>. Returns immediately with a <a
href="Request.html">Request</a> object. If a block is given, it will be
invoked when the server responds.
</p>
<pre>
  request = sftp.write(handle, 0, &quot;hello, world!\n&quot;)
  request.wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000177_source')" id="l_M000177_source">show</a>
                        
                    </p>
                    <div id="M000177_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 272</span>
272:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
273:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:write</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
274:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000408">
                    
                    <a name="M000408"></a><b>write(handle, offset, data) &rarr; request
write(handle, offset, data) { |response| ... } &rarr; request
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Requests that <tt>data</tt> be written to the file identified by
<tt>handle</tt>, starting at <tt>offset</tt> bytes from the start of the
file. The file must have been opened for writing via <a
href="Session.html#M000171">open</a>. Returns immediately with a <a
href="Request.html">Request</a> object. If a block is given, it will be
invoked when the server responds.
</p>
<pre>
  request = sftp.write(handle, 0, &quot;hello, world!\n&quot;)
  request.wait
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000408_source')" id="l_M000408_source">show</a>
                        
                    </p>
                    <div id="M000408_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 272</span>
272:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
273:         <span class="ruby-identifier">request</span> <span class="ruby-identifier">:write</span>, <span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>
274:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000409">
                    
                    <a name="M000409"></a><b>write!</b>(handle, offset, data, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000177">write</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful, or the end of the file was reached. Otherwise, it returns the
<a href="Response.html">Response</a> object for this request.
</p>
<pre>
  sftp.write!(handle, 0, &quot;hello, world!\n&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000409_source')" id="l_M000409_source">show</a>
                        
                    </p>
                    <div id="M000409_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 281</span>
281:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
282:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">write</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
283:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000178">
                    
                    <a name="M000178"></a><b>write!</b>(handle, offset, data, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Identical to <a href="Session.html#M000177">write</a>, but blocks until the
server responds. It will raise a <a
href="StatusException.html">StatusException</a> if the request was
unsuccessful, or the end of the file was reached. Otherwise, it returns the
<a href="Response.html">Response</a> object for this request.
</p>
<pre>
  sftp.write!(handle, 0, &quot;hello, world!\n&quot;)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000178_source')" id="l_M000178_source">show</a>
                        
                    </p>
                    <div id="M000178_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 281</span>
281:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write!</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
282:         <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">write</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">data</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>))
283:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000249">
                    
                    <a name="M000249"></a><b>dispatch_request</b>(packet)
                    
                </div>
                
                <div class="description">
                  <p>
Parses the packet, finds the associated <a href="Request.html">Request</a>
instance, and tells the <a href="Request.html">Request</a> instance to
respond to the packet (see Request#respond_to).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000249_source')" id="l_M000249_source">show</a>
                        
                    </p>
                    <div id="M000249_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 945</span>
945:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dispatch_request</span>(<span class="ruby-identifier">packet</span>)
946:         <span class="ruby-identifier">id</span> = <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">read_long</span>
947:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">pending_requests</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SFTP</span><span class="ruby-operator">::</span><span class="ruby-constant">Exception</span>, <span class="ruby-node">&quot;no such request `#{id}'&quot;</span>
948:         <span class="ruby-identifier">request</span>.<span class="ruby-identifier">respond_to</span>(<span class="ruby-identifier">packet</span>)
949:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000461">
                    
                    <a name="M000461"></a><b>dispatch_request</b>(packet)
                    
                </div>
                
                <div class="description">
                  <p>
Parses the packet, finds the associated <a href="Request.html">Request</a>
instance, and tells the <a href="Request.html">Request</a> instance to
respond to the packet (see Request#respond_to).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000461_source')" id="l_M000461_source">show</a>
                        
                    </p>
                    <div id="M000461_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 945</span>
945:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dispatch_request</span>(<span class="ruby-identifier">packet</span>)
946:         <span class="ruby-identifier">id</span> = <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">read_long</span>
947:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">pending_requests</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SFTP</span><span class="ruby-operator">::</span><span class="ruby-constant">Exception</span>, <span class="ruby-node">&quot;no such request `#{id}'&quot;</span>
948:         <span class="ruby-identifier">request</span>.<span class="ruby-identifier">respond_to</span>(<span class="ruby-identifier">packet</span>)
949:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000460">
                    
                    <a name="M000460"></a><b>do_version</b>(packet)
                    
                </div>
                
                <div class="description">
                  <p>
Called to handle FXP_VERSION packets. This performs the <a
href="../SFTP.html">SFTP</a> protocol version negotiation, instantiating
the appropriate <a href="Protocol.html">Protocol</a> instance and invoking
the callback given to <a href="Session.html#M000224">connect</a>, if any.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000460_source')" id="l_M000460_source">show</a>
                        
                    </p>
                    <div id="M000460_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 919</span>
919:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">do_version</span>(<span class="ruby-identifier">packet</span>)
920:         <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;negotiating sftp protocol version, mine is #{HIGHEST_PROTOCOL_VERSION_SUPPORTED}&quot;</span> }
921: 
922:         <span class="ruby-identifier">server_version</span> = <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">read_long</span>
923:         <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;server reports sftp version #{server_version}&quot;</span> }
924: 
925:         <span class="ruby-identifier">negotiated_version</span> = [<span class="ruby-identifier">server_version</span>, <span class="ruby-constant">HIGHEST_PROTOCOL_VERSION_SUPPORTED</span>].<span class="ruby-identifier">min</span>
926:         <span class="ruby-identifier">info</span> { <span class="ruby-node">&quot;negotiated version is #{negotiated_version}&quot;</span> }
927: 
928:         <span class="ruby-identifier">extensions</span> = {}
929:         <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">eof?</span>
930:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">read_string</span>
931:           <span class="ruby-identifier">data</span> = <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">read_string</span>
932:           <span class="ruby-identifier">extensions</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">data</span>
933:         <span class="ruby-keyword kw">end</span>
934: 
935:         <span class="ruby-ivar">@protocol</span> = <span class="ruby-constant">Protocol</span>.<span class="ruby-identifier">load</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">negotiated_version</span>)
936:         <span class="ruby-ivar">@pending_requests</span> = {}
937: 
938:         <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:open</span>
939:         <span class="ruby-ivar">@on_ready</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">callback</span><span class="ruby-operator">|</span> <span class="ruby-identifier">callback</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword kw">self</span>) }
940:         <span class="ruby-ivar">@on_ready</span> = <span class="ruby-keyword kw">nil</span>
941:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000244">
                    
                    <a name="M000244"></a><b>do_version</b>(packet)
                    
                </div>
                
                <div class="description">
                  <p>
Called to handle FXP_VERSION packets. This performs the <a
href="../SFTP.html">SFTP</a> protocol version negotiation, instantiating
the appropriate <a href="Protocol.html">Protocol</a> instance and invoking
the callback given to <a href="Session.html#M000224">connect</a>, if any.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000244_source')" id="l_M000244_source">show</a>
                        
                    </p>
                    <div id="M000244_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 919</span>
919:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">do_version</span>(<span class="ruby-identifier">packet</span>)
920:         <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;negotiating sftp protocol version, mine is #{HIGHEST_PROTOCOL_VERSION_SUPPORTED}&quot;</span> }
921: 
922:         <span class="ruby-identifier">server_version</span> = <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">read_long</span>
923:         <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;server reports sftp version #{server_version}&quot;</span> }
924: 
925:         <span class="ruby-identifier">negotiated_version</span> = [<span class="ruby-identifier">server_version</span>, <span class="ruby-constant">HIGHEST_PROTOCOL_VERSION_SUPPORTED</span>].<span class="ruby-identifier">min</span>
926:         <span class="ruby-identifier">info</span> { <span class="ruby-node">&quot;negotiated version is #{negotiated_version}&quot;</span> }
927: 
928:         <span class="ruby-identifier">extensions</span> = {}
929:         <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">eof?</span>
930:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">read_string</span>
931:           <span class="ruby-identifier">data</span> = <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">read_string</span>
932:           <span class="ruby-identifier">extensions</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">data</span>
933:         <span class="ruby-keyword kw">end</span>
934: 
935:         <span class="ruby-ivar">@protocol</span> = <span class="ruby-constant">Protocol</span>.<span class="ruby-identifier">load</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">negotiated_version</span>)
936:         <span class="ruby-ivar">@pending_requests</span> = {}
937: 
938:         <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:open</span>
939:         <span class="ruby-ivar">@on_ready</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">callback</span><span class="ruby-operator">|</span> <span class="ruby-identifier">callback</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword kw">self</span>) }
940:         <span class="ruby-ivar">@on_ready</span> = <span class="ruby-keyword kw">nil</span>
941:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000453">
                    
                    <a name="M000453"></a><b>input</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The input buffer used to accumulate packet data
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000453_source')" id="l_M000453_source">show</a>
                        
                    </p>
                    <div id="M000453_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 824</span>
824:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">input</span>; <span class="ruby-ivar">@input</span>; <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000229">
                    
                    <a name="M000229"></a><b>input</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The input buffer used to accumulate packet data
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000229_source')" id="l_M000229_source">show</a>
                        
                    </p>
                    <div id="M000229_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 824</span>
824:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">input</span>; <span class="ruby-ivar">@input</span>; <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000230">
                    
                    <a name="M000230"></a><b>request</b>(type, *args, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Create and enqueue a new <a href="../SFTP.html">SFTP</a> request of the
given type, with the given arguments. Returns a new <a
href="Request.html">Request</a> instance that encapsulates the request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000230_source')" id="l_M000230_source">show</a>
                        
                    </p>
                    <div id="M000230_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 829</span>
829:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
830:         <span class="ruby-identifier">request</span> = <span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">protocol</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
831:         <span class="ruby-identifier">info</span> { <span class="ruby-node">&quot;sending #{type} packet (#{request.id})&quot;</span> }
832:         <span class="ruby-identifier">pending_requests</span>[<span class="ruby-identifier">request</span>.<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">request</span>
833:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000454">
                    
                    <a name="M000454"></a><b>request</b>(type, *args, &amp;callback)
                    
                </div>
                
                <div class="description">
                  <p>
Create and enqueue a new <a href="../SFTP.html">SFTP</a> request of the
given type, with the given arguments. Returns a new <a
href="Request.html">Request</a> instance that encapsulates the request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000454_source')" id="l_M000454_source">show</a>
                        
                    </p>
                    <div id="M000454_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 829</span>
829:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
830:         <span class="ruby-identifier">request</span> = <span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">protocol</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">callback</span>)
831:         <span class="ruby-identifier">info</span> { <span class="ruby-node">&quot;sending #{type} packet (#{request.id})&quot;</span> }
832:         <span class="ruby-identifier">pending_requests</span>[<span class="ruby-identifier">request</span>.<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">request</span>
833:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000455">
                    
                    <a name="M000455"></a><b>wait_for</b>(request, property=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Waits for the given request to complete. If the response is EOF, nil is
returned. If the response was not successful (e.g., !response.ok?), a <a
href="StatusException.html">StatusException</a> will be raised. If
<tt>property</tt> is given, the corresponding property from the response
will be returned; otherwise, the response object itself will be returned.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000455_source')" id="l_M000455_source">show</a>
                        
                    </p>
                    <div id="M000455_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 841</span>
841:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">property</span>=<span class="ruby-keyword kw">nil</span>)
842:         <span class="ruby-identifier">request</span>.<span class="ruby-identifier">wait</span>
843:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">eof?</span>
844:           <span class="ruby-keyword kw">nil</span>
845:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">ok?</span>
846:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">StatusException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>)
847:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">property</span>
848:           <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>[<span class="ruby-identifier">property</span>.<span class="ruby-identifier">to_sym</span>]
849:         <span class="ruby-keyword kw">else</span>
850:           <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>
851:         <span class="ruby-keyword kw">end</span>
852:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000231">
                    
                    <a name="M000231"></a><b>wait_for</b>(request, property=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Waits for the given request to complete. If the response is EOF, nil is
returned. If the response was not successful (e.g., !response.ok?), a <a
href="StatusException.html">StatusException</a> will be raised. If
<tt>property</tt> is given, the corresponding property from the response
will be returned; otherwise, the response object itself will be returned.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000231_source')" id="l_M000231_source">show</a>
                        
                    </p>
                    <div id="M000231_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 841</span>
841:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wait_for</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">property</span>=<span class="ruby-keyword kw">nil</span>)
842:         <span class="ruby-identifier">request</span>.<span class="ruby-identifier">wait</span>
843:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">eof?</span>
844:           <span class="ruby-keyword kw">nil</span>
845:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">ok?</span>
846:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">StatusException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>)
847:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">property</span>
848:           <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>[<span class="ruby-identifier">property</span>.<span class="ruby-identifier">to_sym</span>]
849:         <span class="ruby-keyword kw">else</span>
850:           <span class="ruby-identifier">request</span>.<span class="ruby-identifier">response</span>
851:         <span class="ruby-keyword kw">end</span>
852:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000458">
                    
                    <a name="M000458"></a><b>when_channel_closed</b>(channel)
                    
                </div>
                
                <div class="description">
                  <p>
Called when the <a href="../SSH.html">SSH</a> server closes the underlying
channel.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000458_source')" id="l_M000458_source">show</a>
                        
                    </p>
                    <div id="M000458_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 883</span>
883:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">when_channel_closed</span>(<span class="ruby-identifier">channel</span>)
884:         <span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;sftp channel closed&quot;</span> }
885:         <span class="ruby-ivar">@channel</span> = <span class="ruby-keyword kw">nil</span>
886:         <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:closed</span>
887:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000235">
                    
                    <a name="M000235"></a><b>when_channel_closed</b>(channel)
                    
                </div>
                
                <div class="description">
                  <p>
Called when the <a href="../SSH.html">SSH</a> server closes the underlying
channel.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000235_source')" id="l_M000235_source">show</a>
                        
                    </p>
                    <div id="M000235_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 883</span>
883:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">when_channel_closed</span>(<span class="ruby-identifier">channel</span>)
884:         <span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;sftp channel closed&quot;</span> }
885:         <span class="ruby-ivar">@channel</span> = <span class="ruby-keyword kw">nil</span>
886:         <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:closed</span>
887:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000232">
                    
                    <a name="M000232"></a><b>when_channel_confirmed</b>(channel)
                    
                </div>
                
                <div class="description">
                  <p>
Called when the <a href="../SSH.html">SSH</a> channel is confirmed as
&#8220;open&#8221; by the server. This is one of the states of the <a
href="../SFTP.html">SFTP</a> state machine, and is followed by the <a
href="Session.html#M000233">when_subsystem_started</a> state.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000232_source')" id="l_M000232_source">show</a>
                        
                    </p>
                    <div id="M000232_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 857</span>
857:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">when_channel_confirmed</span>(<span class="ruby-identifier">channel</span>)
858:         <span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;requesting sftp subsystem&quot;</span> }
859:         <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:subsystem</span>
860:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">subsystem</span>(<span class="ruby-value str">&quot;sftp&quot;</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:when_subsystem_started</span>))
861:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000456">
                    
                    <a name="M000456"></a><b>when_channel_confirmed</b>(channel)
                    
                </div>
                
                <div class="description">
                  <p>
Called when the <a href="../SSH.html">SSH</a> channel is confirmed as
&#8220;open&#8221; by the server. This is one of the states of the <a
href="../SFTP.html">SFTP</a> state machine, and is followed by the <a
href="Session.html#M000233">when_subsystem_started</a> state.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000456_source')" id="l_M000456_source">show</a>
                        
                    </p>
                    <div id="M000456_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 857</span>
857:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">when_channel_confirmed</span>(<span class="ruby-identifier">channel</span>)
858:         <span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;requesting sftp subsystem&quot;</span> }
859:         <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:subsystem</span>
860:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">subsystem</span>(<span class="ruby-value str">&quot;sftp&quot;</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:when_subsystem_started</span>))
861:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000459">
                    
                    <a name="M000459"></a><b>when_channel_polled</b>(channel)
                    
                </div>
                
                <div class="description">
                  <p>
Called whenever <a href="../SSH.html">Net::SSH</a> polls the <a
href="../SFTP.html">SFTP</a> channel for pending activity. This basically
checks the input buffer to see if enough input has been accumulated to
handle. If there has, the packet is parsed and dispatched, according to its
type (see <a href="Session.html#M000244">do_version</a> and <a
href="Session.html#M000249">dispatch_request</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000459_source')" id="l_M000459_source">show</a>
                        
                    </p>
                    <div id="M000459_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 893</span>
893:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">when_channel_polled</span>(<span class="ruby-identifier">channel</span>)
894:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
895:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@packet_length</span>.<span class="ruby-identifier">nil?</span>
896:             <span class="ruby-comment cmt"># make sure we've read enough data to tell how long the packet is</span>
897:             <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">4</span>
898:             <span class="ruby-ivar">@packet_length</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">read_long</span>
899:           <span class="ruby-keyword kw">end</span>
900: 
901:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@packet_length</span>
902:           <span class="ruby-identifier">packet</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SFTP</span><span class="ruby-operator">::</span><span class="ruby-constant">Packet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">input</span>.<span class="ruby-identifier">read</span>(<span class="ruby-ivar">@packet_length</span>))
903:           <span class="ruby-identifier">input</span>.<span class="ruby-identifier">consume!</span>
904:           <span class="ruby-ivar">@packet_length</span> = <span class="ruby-keyword kw">nil</span>
905: 
906:           <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;received sftp packet #{packet.type} len #{packet.length}&quot;</span> }
907: 
908:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">FXP_VERSION</span>
909:             <span class="ruby-identifier">do_version</span>(<span class="ruby-identifier">packet</span>)
910:           <span class="ruby-keyword kw">else</span>
911:             <span class="ruby-identifier">dispatch_request</span>(<span class="ruby-identifier">packet</span>)
912:           <span class="ruby-keyword kw">end</span>
913:         <span class="ruby-keyword kw">end</span>
914:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000237">
                    
                    <a name="M000237"></a><b>when_channel_polled</b>(channel)
                    
                </div>
                
                <div class="description">
                  <p>
Called whenever <a href="../SSH.html">Net::SSH</a> polls the <a
href="../SFTP.html">SFTP</a> channel for pending activity. This basically
checks the input buffer to see if enough input has been accumulated to
handle. If there has, the packet is parsed and dispatched, according to its
type (see <a href="Session.html#M000244">do_version</a> and <a
href="Session.html#M000249">dispatch_request</a>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000237_source')" id="l_M000237_source">show</a>
                        
                    </p>
                    <div id="M000237_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 893</span>
893:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">when_channel_polled</span>(<span class="ruby-identifier">channel</span>)
894:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
895:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@packet_length</span>.<span class="ruby-identifier">nil?</span>
896:             <span class="ruby-comment cmt"># make sure we've read enough data to tell how long the packet is</span>
897:             <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">4</span>
898:             <span class="ruby-ivar">@packet_length</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">read_long</span>
899:           <span class="ruby-keyword kw">end</span>
900: 
901:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@packet_length</span>
902:           <span class="ruby-identifier">packet</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SFTP</span><span class="ruby-operator">::</span><span class="ruby-constant">Packet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">input</span>.<span class="ruby-identifier">read</span>(<span class="ruby-ivar">@packet_length</span>))
903:           <span class="ruby-identifier">input</span>.<span class="ruby-identifier">consume!</span>
904:           <span class="ruby-ivar">@packet_length</span> = <span class="ruby-keyword kw">nil</span>
905: 
906:           <span class="ruby-identifier">debug</span> { <span class="ruby-node">&quot;received sftp packet #{packet.type} len #{packet.length}&quot;</span> }
907: 
908:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">packet</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">FXP_VERSION</span>
909:             <span class="ruby-identifier">do_version</span>(<span class="ruby-identifier">packet</span>)
910:           <span class="ruby-keyword kw">else</span>
911:             <span class="ruby-identifier">dispatch_request</span>(<span class="ruby-identifier">packet</span>)
912:           <span class="ruby-keyword kw">end</span>
913:         <span class="ruby-keyword kw">end</span>
914:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000457">
                    
                    <a name="M000457"></a><b>when_subsystem_started</b>(channel, success)
                    
                </div>
                
                <div class="description">
                  <p>
Called when the <a href="../SSH.html">SSH</a> server confirms that the <a
href="../SFTP.html">SFTP</a> subsystem was successfully started. This sets
up the appropriate callbacks on the <a href="../SSH.html">SSH</a> channel
and then starts the <a href="../SFTP.html">SFTP</a> protocol version
negotiation process.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000457_source')" id="l_M000457_source">show</a>
                        
                    </p>
                    <div id="M000457_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 867</span>
867:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">when_subsystem_started</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">success</span>)
868:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SFTP</span><span class="ruby-operator">::</span><span class="ruby-constant">Exception</span>, <span class="ruby-value str">&quot;could not start SFTP subsystem&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">success</span>
869: 
870:         <span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;sftp subsystem successfully started&quot;</span> }
871:         <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:init</span>
872: 
873:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_data</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">data</span><span class="ruby-operator">|</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">data</span>) }
874:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_extended_data</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">t</span>,<span class="ruby-identifier">data</span><span class="ruby-operator">|</span> <span class="ruby-identifier">debug</span> { <span class="ruby-identifier">data</span> } }
875: 
876:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_close</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:when_channel_closed</span>))
877:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_process</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:when_channel_polled</span>))
878: 
879:         <span class="ruby-identifier">send_packet</span>(<span class="ruby-constant">FXP_INIT</span>, <span class="ruby-identifier">:long</span>, <span class="ruby-constant">HIGHEST_PROTOCOL_VERSION_SUPPORTED</span>)
880:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000233">
                    
                    <a name="M000233"></a><b>when_subsystem_started</b>(channel, success)
                    
                </div>
                
                <div class="description">
                  <p>
Called when the <a href="../SSH.html">SSH</a> server confirms that the <a
href="../SFTP.html">SFTP</a> subsystem was successfully started. This sets
up the appropriate callbacks on the <a href="../SSH.html">SSH</a> channel
and then starts the <a href="../SFTP.html">SFTP</a> protocol version
negotiation process.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000233_source')" id="l_M000233_source">show</a>
                        
                    </p>
                    <div id="M000233_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/sftp/session.rb, line 867</span>
867:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">when_subsystem_started</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">success</span>)
868:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SFTP</span><span class="ruby-operator">::</span><span class="ruby-constant">Exception</span>, <span class="ruby-value str">&quot;could not start SFTP subsystem&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">success</span>
869: 
870:         <span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;sftp subsystem successfully started&quot;</span> }
871:         <span class="ruby-ivar">@state</span> = <span class="ruby-identifier">:init</span>
872: 
873:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_data</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">data</span><span class="ruby-operator">|</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">data</span>) }
874:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_extended_data</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">t</span>,<span class="ruby-identifier">data</span><span class="ruby-operator">|</span> <span class="ruby-identifier">debug</span> { <span class="ruby-identifier">data</span> } }
875: 
876:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_close</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:when_channel_closed</span>))
877:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_process</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:when_channel_polled</span>))
878: 
879:         <span class="ruby-identifier">send_packet</span>(<span class="ruby-constant">FXP_INIT</span>, <span class="ruby-identifier">:long</span>, <span class="ruby-constant">HIGHEST_PROTOCOL_VERSION_SUPPORTED</span>)
880:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    