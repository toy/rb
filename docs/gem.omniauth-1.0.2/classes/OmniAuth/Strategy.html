<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>OmniAuth::Strategy</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            OmniAuth::Strategy 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/omniauth/strategy_rb.html">lib/omniauth/strategy.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
The <a href="Strategy.html">Strategy</a> is the base unit of
OmniAuth&#8217;s ability to wrangle multiple providers. Each strategy
provided by <a href="../OmniAuth.html">OmniAuth</a> includes this mixin to
gain the default functionality necessary to be compatible with the <a
href="../OmniAuth.html">OmniAuth</a> library.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000066">auth_hash</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000042">call</a>,</li>
                
                <li><a href="#M000044">call!</a>,</li>
                
                <li><a href="#M000077">call_app!</a>,</li>
                
                <li><a href="#M000076">call_through_to_app</a>,</li>
                
                <li><a href="#M000048">callback_call</a>,</li>
                
                <li><a href="#M000071">callback_path</a>,</li>
                
                <li><a href="#M000068">callback_phase</a>,</li>
                
                <li><a href="#M000083">callback_url</a>,</li>
                
                <li><a href="#M000064">credentials</a>,</li>
                
                <li><a href="#M000073">current_path</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000065">extra</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000090">fail!</a>,</li>
                
                <li><a href="#M000078">full_host</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000031">included</a>,</li>
                
                <li><a href="#M000063">info</a>,</li>
                
                <li><a href="#M000041">inspect</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000091">merge_stack</a>,</li>
                
                <li><a href="#M000057">mock_call!</a>,</li>
                
                <li><a href="#M000059">mock_callback_call</a>,</li>
                
                <li><a href="#M000058">mock_request_call</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000087">name</a>,</li>
                
                <li><a href="#M000037">new</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000049">on_auth_path?</a>,</li>
                
                <li><a href="#M000054">on_callback_path?</a>,</li>
                
                <li><a href="#M000055">on_path?</a>,</li>
                
                <li><a href="#M000050">on_request_path?</a>,</li>
                
                <li><a href="#M000045">options_call</a>,</li>
                
                <li><a href="#M000056">options_request?</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000069">path_prefix</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M000075">query_string</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000088">redirect</a>,</li>
                
                <li><a href="#M000086">request</a>,</li>
                
                <li><a href="#M000046">request_call</a>,</li>
                
                <li><a href="#M000070">request_path</a>,</li>
                
                <li><a href="#M000061">request_phase</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000084">script_name</a>,</li>
                
                <li><a href="#M000085">session</a>,</li>
                
                <li><a href="#M000072">setup_path</a>,</li>
                
                <li><a href="#M000060">setup_phase</a>,</li>
                
                <li><a href="#M000067">skip_info?</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000062">uid</a>,</li>
                
                <li><a href="#M000089">user_info</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="Strategy/ClassMethods.html">OmniAuth::Strategy::ClassMethods</a></li>
        
        <li><span class="type">CLASS</span> <a href="Strategy/Options.html">OmniAuth::Strategy::Options</a></li>
        
    </ul>
    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000066">
                    
                    <a name="M000066"></a><b>auth_hash</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000066_source')" id="l_M000066_source">show</a>
                        
                    </p>
                    <div id="M000066_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 301</span>
301:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">auth_hash</span>
302:       <span class="ruby-identifier">hash</span> = <span class="ruby-constant">AuthHash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:provider</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">:uid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">uid</span>)
303:       <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">info</span> = <span class="ruby-identifier">info</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">skip_info?</span>
304:       <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">credentials</span> = <span class="ruby-identifier">credentials</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">credentials</span>
305:       <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">extra</span> = <span class="ruby-identifier">extra</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">extra</span>
306:       <span class="ruby-identifier">hash</span>
307:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000042">
                    
                    <a name="M000042"></a><b>call</b>(env)
                    
                </div>
                
                <div class="description">
                  <p>
Duplicates this instance and runs <a href="Strategy.html#M000044">call!</a>
on it. @param [Hash] The Rack environment.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000042_source')" id="l_M000042_source">show</a>
                        
                    </p>
                    <div id="M000042_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 148</span>
148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">call</span>(<span class="ruby-identifier">env</span>)
149:       <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">call!</span>(<span class="ruby-identifier">env</span>)
150:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000044">
                    
                    <a name="M000044"></a><b>call!</b>(env)
                    
                </div>
                
                <div class="description">
                  <p>
The logic for dispatching any additional actions that need to be taken. For
instance, calling the request phase if the request path is recognized.
</p>
<p>
@param env [Hash] The Rack environment.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000044_source')" id="l_M000044_source">show</a>
                        
                    </p>
                    <div id="M000044_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 157</span>
157:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">call!</span>(<span class="ruby-identifier">env</span>)
158:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">OmniAuth</span><span class="ruby-operator">::</span><span class="ruby-constant">NoSessionError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;You must provide a session to use OmniAuth.&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">env</span>[<span class="ruby-value str">'rack.session'</span>]
159: 
160:       <span class="ruby-ivar">@env</span> = <span class="ruby-identifier">env</span>
161:       <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'omniauth.strategy'</span>] = <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">on_auth_path?</span>
162: 
163:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">mock_call!</span>(<span class="ruby-identifier">env</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">test_mode</span>
164: 
165:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">options_call</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">on_auth_path?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options_request?</span>
166:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">request_call</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">on_request_path?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">allowed_request_methods</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">request</span>.<span class="ruby-identifier">request_method</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">to_sym</span>)
167:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">callback_call</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">on_callback_path?</span>
168:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">other_phase</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:other_phase</span>)
169:       <span class="ruby-ivar">@app</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">env</span>)
170:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000077">
                    
                    <a name="M000077"></a><b>call_app!</b>(env = @env)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000077_source')" id="l_M000077_source">show</a>
                        
                    </p>
                    <div id="M000077_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 366</span>
366:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">call_app!</span>(<span class="ruby-identifier">env</span> = <span class="ruby-ivar">@env</span>)
367:       <span class="ruby-ivar">@app</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">env</span>)
368:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000076">
                    
                    <a name="M000076"></a><b>call_through_to_app</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000076_source')" id="l_M000076_source">show</a>
                        
                    </p>
                    <div id="M000076_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 358</span>
358:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">call_through_to_app</span>
359:       <span class="ruby-identifier">status</span>, <span class="ruby-identifier">headers</span>, <span class="ruby-identifier">body</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">call_app!</span>
360:       <span class="ruby-identifier">session</span>[<span class="ruby-value str">'query_params'</span>] = <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">env</span>).<span class="ruby-identifier">params</span>
361:       <span class="ruby-ivar">@response</span> = <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Response</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">body</span>, <span class="ruby-identifier">status</span>, <span class="ruby-identifier">headers</span>)
362: 
363:       <span class="ruby-identifier">status</span> <span class="ruby-operator">==</span> <span class="ruby-value">404</span> <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">finish</span>
364:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000048">
                    
                    <a name="M000048"></a><b>callback_call</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Performs the steps necessary to run the callback phase of a strategy.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000048_source')" id="l_M000048_source">show</a>
                        
                    </p>
                    <div id="M000048_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 200</span>
200:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">callback_call</span>
201:       <span class="ruby-identifier">setup_phase</span>
202:       <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'omniauth.origin'</span>] = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'omniauth.origin'</span>)
203:       <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'omniauth.origin'</span>] = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">env</span>[<span class="ruby-value str">'omniauth.origin'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">''</span>
204:       <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'omniauth.params'</span>] = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'omniauth.params'</span>) <span class="ruby-operator">||</span> {}
205:       <span class="ruby-identifier">callback_phase</span>
206:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000071">
                    
                    <a name="M000071"></a><b>callback_path</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show</a>
                        
                    </p>
                    <div id="M000071_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 342</span>
342:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">callback_path</span>
343:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:callback_path</span>] <span class="ruby-operator">||</span> <span class="ruby-node">&quot;#{path_prefix}/#{name}/callback&quot;</span>
344:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000068">
                    
                    <a name="M000068"></a><b>callback_phase</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000068_source')" id="l_M000068_source">show</a>
                        
                    </p>
                    <div id="M000068_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 329</span>
329:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">callback_phase</span>
330:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">'omniauth.auth'</span>] = <span class="ruby-identifier">auth_hash</span>
331:       <span class="ruby-identifier">call_app!</span>
332:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000083">
                    
                    <a name="M000083"></a><b>callback_url</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show</a>
                        
                    </p>
                    <div id="M000083_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 384</span>
384:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">callback_url</span>
385:       <span class="ruby-identifier">full_host</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">script_name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">callback_path</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">query_string</span>
386:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000064">
                    
                    <a name="M000064"></a><b>credentials</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000064_source')" id="l_M000064_source">show</a>
                        
                    </p>
                    <div id="M000064_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 293</span>
293:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">credentials</span>
294:       <span class="ruby-identifier">merge_stack</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">credentials_stack</span>(<span class="ruby-keyword kw">self</span>))
295:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000073">
                    
                    <a name="M000073"></a><b>current_path</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show</a>
                        
                    </p>
                    <div id="M000073_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 350</span>
350:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_path</span>
351:       <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_info</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\/$/</span>,<span class="ruby-value str">''</span>)
352:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000065">
                    
                    <a name="M000065"></a><b>extra</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000065_source')" id="l_M000065_source">show</a>
                        
                    </p>
                    <div id="M000065_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 297</span>
297:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extra</span>
298:       <span class="ruby-identifier">merge_stack</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">extra_stack</span>(<span class="ruby-keyword kw">self</span>))
299:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000090">
                    
                    <a name="M000090"></a><b>fail!</b>(message_key, exception = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000090_source')" id="l_M000090_source">show</a>
                        
                    </p>
                    <div id="M000090_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 419</span>
419:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fail!</span>(<span class="ruby-identifier">message_key</span>, <span class="ruby-identifier">exception</span> = <span class="ruby-keyword kw">nil</span>)
420:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">'omniauth.error'</span>] = <span class="ruby-identifier">exception</span>
421:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">'omniauth.error.type'</span>] = <span class="ruby-identifier">message_key</span>.<span class="ruby-identifier">to_sym</span>
422:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">'omniauth.error.strategy'</span>] = <span class="ruby-keyword kw">self</span>
423: 
424:       <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">on_failure</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">env</span>)
425:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000078">
                    
                    <a name="M000078"></a><b>full_host</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000078_source')" id="l_M000078_source">show</a>
                        
                    </p>
                    <div id="M000078_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 370</span>
370:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">full_host</span>
371:       <span class="ruby-keyword kw">case</span> <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">full_host</span>
372:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
373:           <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">full_host</span>
374:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Proc</span>
375:           <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">full_host</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">env</span>)
376:         <span class="ruby-keyword kw">else</span>
377:           <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">request</span>.<span class="ruby-identifier">url</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\?.*$/</span>,<span class="ruby-value str">''</span>))
378:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> = <span class="ruby-value str">''</span>
379:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">query</span> = <span class="ruby-keyword kw">nil</span>
380:           <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>
381:       <span class="ruby-keyword kw">end</span>
382:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000063">
                    
                    <a name="M000063"></a><b>info</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000063_source')" id="l_M000063_source">show</a>
                        
                    </p>
                    <div id="M000063_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 289</span>
289:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">info</span>
290:       <span class="ruby-identifier">merge_stack</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">info_stack</span>(<span class="ruby-keyword kw">self</span>))
291:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000041">
                    
                    <a name="M000041"></a><b>inspect</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000041_source')" id="l_M000041_source">show</a>
                        
                    </p>
                    <div id="M000041_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 142</span>
142:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
143:       <span class="ruby-node">&quot;#&lt;#{self.class.to_s}&gt;&quot;</span>
144:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000057">
                    
                    <a name="M000057"></a><b>mock_call!</b>(env)
                    
                </div>
                
                <div class="description">
                  <p>
This is called in lieu of the normal request process in the event that <a
href="../OmniAuth.html">OmniAuth</a> has been configured to be in test
mode.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000057_source')" id="l_M000057_source">show</a>
                        
                    </p>
                    <div id="M000057_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 233</span>
233:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mock_call!</span>(<span class="ruby-identifier">env</span>)
234:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">mock_request_call</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">on_request_path?</span>
235:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">mock_callback_call</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">on_callback_path?</span>
236:       <span class="ruby-identifier">call_app!</span>
237:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000059">
                    
                    <a name="M000059"></a><b>mock_callback_call</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000059_source')" id="l_M000059_source">show</a>
                        
                    </p>
                    <div id="M000059_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 251</span>
251:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mock_callback_call</span>
252:       <span class="ruby-identifier">setup_phase</span>
253:       <span class="ruby-identifier">mocked_auth</span> = <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">mock_auth_for</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>)
254:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mocked_auth</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
255:         <span class="ruby-identifier">fail!</span>(<span class="ruby-identifier">mocked_auth</span>)
256:       <span class="ruby-keyword kw">else</span>
257:         <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'omniauth.auth'</span>] = <span class="ruby-identifier">mocked_auth</span>
258:         <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'omniauth.params'</span>] = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'query_params'</span>) <span class="ruby-operator">||</span> {}
259:         <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'omniauth.origin'</span>] = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'omniauth.origin'</span>)
260:         <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'omniauth.origin'</span>] = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">env</span>[<span class="ruby-value str">'omniauth.origin'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">''</span>
261:         <span class="ruby-identifier">call_app!</span>
262:       <span class="ruby-keyword kw">end</span>
263:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000058">
                    
                    <a name="M000058"></a><b>mock_request_call</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000058_source')" id="l_M000058_source">show</a>
                        
                    </p>
                    <div id="M000058_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 239</span>
239:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mock_request_call</span>
240:       <span class="ruby-identifier">setup_phase</span>
241:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">response</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">response</span> = <span class="ruby-identifier">call_through_to_app</span>
242: 
243:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'origin'</span>]
244:         <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'rack.session'</span>][<span class="ruby-value str">'omniauth.origin'</span>] = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'origin'</span>]
245:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">env</span>[<span class="ruby-value str">'HTTP_REFERER'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">env</span>[<span class="ruby-value str">'HTTP_REFERER'</span>].<span class="ruby-identifier">match</span>(<span class="ruby-node">/#{request_path}$/</span>)
246:         <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'rack.session'</span>][<span class="ruby-value str">'omniauth.origin'</span>] = <span class="ruby-identifier">env</span>[<span class="ruby-value str">'HTTP_REFERER'</span>]
247:       <span class="ruby-keyword kw">end</span>
248:       <span class="ruby-identifier">redirect</span>(<span class="ruby-identifier">script_name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">callback_path</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">query_string</span>)
249:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000087">
                    
                    <a name="M000087"></a><b>name</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show</a>
                        
                    </p>
                    <div id="M000087_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 400</span>
400:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">name</span>
401:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">name</span>
402:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000049">
                    
                    <a name="M000049"></a><b>on_auth_path?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the environment recognizes either the request or callback
path.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000049_source')" id="l_M000049_source">show</a>
                        
                    </p>
                    <div id="M000049_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 210</span>
210:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on_auth_path?</span>
211:       <span class="ruby-identifier">on_request_path?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">on_callback_path?</span>
212:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000054">
                    
                    <a name="M000054"></a><b>on_callback_path?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000054_source')" id="l_M000054_source">show</a>
                        
                    </p>
                    <div id="M000054_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 218</span>
218:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on_callback_path?</span>
219:       <span class="ruby-identifier">on_path?</span>(<span class="ruby-identifier">callback_path</span>)
220:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000055">
                    
                    <a name="M000055"></a><b>on_path?</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000055_source')" id="l_M000055_source">show</a>
                        
                    </p>
                    <div id="M000055_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 222</span>
222:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on_path?</span>(<span class="ruby-identifier">path</span>)
223:       <span class="ruby-identifier">current_path</span>.<span class="ruby-identifier">casecmp</span>(<span class="ruby-identifier">path</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
224:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000050">
                    
                    <a name="M000050"></a><b>on_request_path?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000050_source')" id="l_M000050_source">show</a>
                        
                    </p>
                    <div id="M000050_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 214</span>
214:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on_request_path?</span>
215:       <span class="ruby-identifier">on_path?</span>(<span class="ruby-identifier">request_path</span>)
216:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000045">
                    
                    <a name="M000045"></a><b>options_call</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Responds to an OPTIONS request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000045_source')" id="l_M000045_source">show</a>
                        
                    </p>
                    <div id="M000045_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 173</span>
173:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_call</span>
174:       <span class="ruby-identifier">verbs</span> = <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">allowed_request_methods</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:upcase</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)
175:       <span class="ruby-keyword kw">return</span> [ <span class="ruby-value">200</span>, { <span class="ruby-value str">'Allow'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">verbs</span> }, [] ]
176:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000056">
                    
                    <a name="M000056"></a><b>options_request?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000056_source')" id="l_M000056_source">show</a>
                        
                    </p>
                    <div id="M000056_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 226</span>
226:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_request?</span>
227:       <span class="ruby-identifier">request</span>.<span class="ruby-identifier">request_method</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'OPTIONS'</span>
228:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000069">
                    
                    <a name="M000069"></a><b>path_prefix</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show</a>
                        
                    </p>
                    <div id="M000069_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 334</span>
334:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">path_prefix</span>
335:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:path_prefix</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">path_prefix</span>
336:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000075">
                    
                    <a name="M000075"></a><b>query_string</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show</a>
                        
                    </p>
                    <div id="M000075_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 354</span>
354:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query_string</span>
355:       <span class="ruby-identifier">request</span>.<span class="ruby-identifier">query_string</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;?#{request.query_string}&quot;</span>
356:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000088">
                    
                    <a name="M000088"></a><b>redirect</b>(uri)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show</a>
                        
                    </p>
                    <div id="M000088_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 404</span>
404:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">redirect</span>(<span class="ruby-identifier">uri</span>)
405:       <span class="ruby-identifier">r</span> = <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Response</span>.<span class="ruby-identifier">new</span>
406: 
407:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:iframe</span>]
408:         <span class="ruby-identifier">r</span>.<span class="ruby-identifier">write</span>(<span class="ruby-node">&quot;&lt;script type='text/javascript' charset='utf-8'&gt;top.location.href = '#{uri}';&lt;/script&gt;&quot;</span>)
409:       <span class="ruby-keyword kw">else</span>
410:         <span class="ruby-identifier">r</span>.<span class="ruby-identifier">write</span>(<span class="ruby-node">&quot;Redirecting to #{uri}...&quot;</span>)
411:         <span class="ruby-identifier">r</span>.<span class="ruby-identifier">redirect</span>(<span class="ruby-identifier">uri</span>)
412:       <span class="ruby-keyword kw">end</span>
413: 
414:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">finish</span>
415:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000086">
                    
                    <a name="M000086"></a><b>request</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show</a>
                        
                    </p>
                    <div id="M000086_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 396</span>
396:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request</span>
397:       <span class="ruby-ivar">@request</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Request</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@env</span>)
398:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000046">
                    
                    <a name="M000046"></a><b>request_call</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Performs the steps necessary to run the request phase of a strategy.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000046_source')" id="l_M000046_source">show</a>
                        
                    </p>
                    <div id="M000046_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 179</span>
179:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request_call</span>
180:       <span class="ruby-identifier">setup_phase</span>
181: 
182:       <span class="ruby-comment cmt">#store query params from the request url, extracted in the callback_phase</span>
183:       <span class="ruby-identifier">session</span>[<span class="ruby-value str">'omniauth.params'</span>] = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">params</span>
184: 
185:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">form</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:call</span>)
186:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">form</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">env</span>)
187:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">form</span>
188:         <span class="ruby-identifier">call_app!</span>
189:       <span class="ruby-keyword kw">else</span>
190:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'origin'</span>]
191:           <span class="ruby-identifier">env</span>[<span class="ruby-value str">'rack.session'</span>][<span class="ruby-value str">'omniauth.origin'</span>] = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'origin'</span>]
192:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">env</span>[<span class="ruby-value str">'HTTP_REFERER'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">env</span>[<span class="ruby-value str">'HTTP_REFERER'</span>].<span class="ruby-identifier">match</span>(<span class="ruby-node">/#{request_path}$/</span>)
193:           <span class="ruby-identifier">env</span>[<span class="ruby-value str">'rack.session'</span>][<span class="ruby-value str">'omniauth.origin'</span>] = <span class="ruby-identifier">env</span>[<span class="ruby-value str">'HTTP_REFERER'</span>]
194:         <span class="ruby-keyword kw">end</span>
195:         <span class="ruby-identifier">request_phase</span>
196:       <span class="ruby-keyword kw">end</span>
197:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000070">
                    
                    <a name="M000070"></a><b>request_path</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show</a>
                        
                    </p>
                    <div id="M000070_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 338</span>
338:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request_path</span>
339:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:request_path</span>] <span class="ruby-operator">||</span> <span class="ruby-node">&quot;#{path_prefix}/#{name}&quot;</span>
340:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000061">
                    
                    <a name="M000061"></a><b>request_phase</b>()
                    
                </div>
                
                <div class="description">
                  <p>
@abstract This method is called when the user is on the request path. You
should perform any information gathering you need to be able to
authenticate the user in this phase.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000061_source')" id="l_M000061_source">show</a>
                        
                    </p>
                    <div id="M000061_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 281</span>
281:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">request_phase</span>
282:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
283:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000084">
                    
                    <a name="M000084"></a><b>script_name</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show</a>
                        
                    </p>
                    <div id="M000084_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 388</span>
388:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">script_name</span>
389:       <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'SCRIPT_NAME'</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>
390:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000085">
                    
                    <a name="M000085"></a><b>session</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show</a>
                        
                    </p>
                    <div id="M000085_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 392</span>
392:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">session</span>
393:       <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'rack.session'</span>]
394:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000072">
                    
                    <a name="M000072"></a><b>setup_path</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000072_source')" id="l_M000072_source">show</a>
                        
                    </p>
                    <div id="M000072_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 346</span>
346:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_path</span>
347:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:setup_path</span>] <span class="ruby-operator">||</span> <span class="ruby-node">&quot;#{path_prefix}/#{name}/setup&quot;</span>
348:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000060">
                    
                    <a name="M000060"></a><b>setup_phase</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The setup phase looks for the `:setup` option to exist and, if it is, will
call either the Rack endpoint supplied to the `:setup` option or it will
call out to the setup path of the underlying application. This will default
to `/auth/:provider/setup`.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000060_source')" id="l_M000060_source">show</a>
                        
                    </p>
                    <div id="M000060_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 269</span>
269:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_phase</span>
270:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:setup</span>].<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:call</span>)
271:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:setup</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">env</span>)
272:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">setup?</span>
273:         <span class="ruby-identifier">setup_env</span> = <span class="ruby-identifier">env</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value str">'PATH_INFO'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">setup_path</span>, <span class="ruby-value str">'REQUEST_METHOD'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'GET'</span>)
274:         <span class="ruby-identifier">call_app!</span>(<span class="ruby-identifier">setup_env</span>)
275:       <span class="ruby-keyword kw">end</span>
276:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000067">
                    
                    <a name="M000067"></a><b>skip_info?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determines whether or not user info should be retrieved. This allows some
strategies to save a call to an external API service for existing users.
You can use it either by setting the `:skip_info` to true or by setting
`:skip_info` to a Proc that takes a uid and evaluates to true when you
would like to skip info.
</p>
<p>
@example
</p>
<pre>
  use MyStrategy, :skip_info =&gt; lambda{|uid| User.find_by_uid(uid)}
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000067_source')" id="l_M000067_source">show</a>
                        
                    </p>
                    <div id="M000067_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 318</span>
318:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_info?</span>
319:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">skip_info?</span>
320:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">skip_info</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:call</span>)
321:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">skip_info</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">uid</span>)
322:         <span class="ruby-keyword kw">else</span>
323:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
324:         <span class="ruby-keyword kw">end</span>
325:       <span class="ruby-keyword kw">end</span>
326:       <span class="ruby-keyword kw">false</span>
327:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000062">
                    
                    <a name="M000062"></a><b>uid</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000062_source')" id="l_M000062_source">show</a>
                        
                    </p>
                    <div id="M000062_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 285</span>
285:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uid</span>
286:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">uid_stack</span>(<span class="ruby-keyword kw">self</span>).<span class="ruby-identifier">last</span>
287:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000089">
                    
                    <a name="M000089"></a><b>user_info</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show</a>
                        
                    </p>
                    <div id="M000089_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 417</span>
417:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user_info</span>; {} <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M000091">
                    
                    <a name="M000091"></a><b>merge_stack</b>(stack)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000091_source')" id="l_M000091_source">show</a>
                        
                    </p>
                    <div id="M000091_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 431</span>
431:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge_stack</span>(<span class="ruby-identifier">stack</span>)
432:       <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">inject</span>({}){<span class="ruby-operator">|</span><span class="ruby-identifier">c</span>,<span class="ruby-identifier">h</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">h</span>); <span class="ruby-identifier">c</span>}
433:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000031">
                    
                    <a name="M000031"></a><b>included</b>(base)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000031_source')" id="l_M000031_source">show</a>
                        
                    </p>
                    <div id="M000031_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 11</span>
11:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">included</span>(<span class="ruby-identifier">base</span>)
12:       <span class="ruby-constant">OmniAuth</span>.<span class="ruby-identifier">strategies</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">base</span>
13: 
14:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">extend</span> <span class="ruby-constant">ClassMethods</span>
15:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">class_eval</span> <span class="ruby-keyword kw">do</span>
16:         <span class="ruby-identifier">attr_reader</span> <span class="ruby-identifier">:app</span>, <span class="ruby-identifier">:env</span>, <span class="ruby-identifier">:options</span>, <span class="ruby-identifier">:response</span>
17: 
18:         <span class="ruby-identifier">option</span> <span class="ruby-identifier">:setup</span>, <span class="ruby-keyword kw">false</span>
19:         <span class="ruby-identifier">option</span> <span class="ruby-identifier">:skip_info</span>, <span class="ruby-keyword kw">false</span>
20:       <span class="ruby-keyword kw">end</span>
21:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000037">
                    
                    <a name="M000037"></a><b>new</b>(app, *args, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Initializes the strategy by passing in the Rack endpoint, the unique URL
segment name for this strategy, and any additional arguments. An `options`
hash is automatically created from the last argument if it is a hash.
</p>
<p>
@param app [Rack application] The application on which this middleware is
applied.
</p>
<p>
@overload new(app, options = {})
</p>
<pre>
  If nothing but a hash is supplied, initialized with the supplied options
  overriding the strategy's default options via a deep merge.
</pre>
<p>
@overload new(app, *args, options = {})
</p>
<pre>
  If the strategy has supplied custom arguments that it accepts, they may
  will be passed through and set to the appropriate values.
</pre>
<p>
@yield [Options] Yields options to block for further configuration.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000037_source')" id="l_M000037_source">show</a>
                        
                    </p>
                    <div id="M000037_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/omniauth/strategy.rb, line 125</span>
125:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">app</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
126:       <span class="ruby-ivar">@app</span> = <span class="ruby-identifier">app</span>
127:       <span class="ruby-ivar">@options</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">default_options</span>.<span class="ruby-identifier">dup</span>
128: 
129:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">deep_merge!</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
130:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'::'</span>).<span class="ruby-identifier">last</span>.<span class="ruby-identifier">downcase</span>
131: 
132:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
133:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">arg</span>] = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
134:       <span class="ruby-keyword kw">end</span>
135: 
136:       <span class="ruby-comment cmt"># Make sure that all of the args have been dealt with, otherwise error out.</span>
137:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Received wrong number of arguments. #{args.inspect}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>
138: 
139:       <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">options</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
140:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    