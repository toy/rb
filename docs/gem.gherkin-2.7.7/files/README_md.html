<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.md</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README.md
        </h1>
        <ul class="files">
            <li>README.md</li>
            <li>Last modified: Mon Feb 13 07:34:13 +0100 2012</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
[![Build Status](<a
href="https://secure.travis-ci.org/cucumber/gherkin.png)](http://travis-ci.org/cucumber/gherkin">secure.travis-ci.org/cucumber/gherkin.png)](http://travis-ci.org/cucumber/gherkin</a>)
</p>
<p>
A fast lexer and parser for the <a
href="../classes/Gherkin.html">Gherkin</a> language based on Ragel. <a
href="../classes/Gherkin.html">Gherkin</a> is two things:
</p>
<ul>
<li>The language that has evolved out of the Cucumber project.

</li>
<li>This library.

</li>
</ul>
<p>
Supported platforms:
</p>
<ul>
<li>[Ruby](<a
href="https://rubygems.org/gems/gherkin">rubygems.org/gems/gherkin</a>)
1.8.6-1.9.3 (MRI, JRuby, REE, Rubinius)

</li>
<li>[Pure Java](<a
href="http://search.maven.org/#search%7Cga%7C1%7Cgherkin">search.maven.org/#search%7Cga%7C1%7Cgherkin</a>)
(jar file)

</li>
<li>[JavaScript](<a
href="http://search.npmjs.org/#/gherkin">search.npmjs.org/#/gherkin</a>)
(Tested with V8/node.js/Chrome, but might work on other JavaScript engines)

</li>
<li>[.NET](<a
href="http://nuget.org/List/Packages/gherkin">nuget.org/List/Packages/gherkin</a>)
(dll file)

</li>
</ul>
<p>
## Installation
</p>
<p>
### Ruby/JRuby
</p>
<pre>
    gem install gherkin
</pre>
<p>
#### Troubleshooting
</p>
<p>
On JRuby you may get an error saying:
</p>
<pre>
    ERROR:  While executing gem ... (ArgumentError)
    undefined class/module YAML::Syck::DefaultKey
</pre>
<p>
You can get around this problem by upgrading rubygems:
</p>
<pre>
    jruby -S gem install rubygems-update
    gem update --system
</pre>
<p>
Another problem you might encounter is:
</p>
<pre>
    ERROR: While executing gem ... (ArgumentError)
    invalid byte sequence in US-ASCII
</pre>
<p>
If this happens, try defining your shell&#8217;s encoding:
</p>
<pre>
    # Linux
    export LANG=en_US.UTF-8

    # OS X
    export LC_CTYPE=en_US.UTF-8
</pre>
<p>
### Node.js
</p>
<pre>
    npm install gherkin
</pre>
<p>
### Java
</p>
<p>
The jar file is in the central Maven repo.
</p>
<pre>
    &lt;dependency&gt;
        &lt;groupId&gt;info.cukes&lt;/groupId&gt;
        &lt;artifactId&gt;gherkin&lt;/artifactId&gt;
        &lt;version&gt;2.7.7&lt;/version&gt;
    &lt;/dependency&gt;
</pre>
<p>
You can get it manually from [Maven Central](<a
href="http://search.maven.org/#browse%7C-2073395818">search.maven.org/#browse%7C-2073395818</a>)
</p>
<p>
### .NET
</p>
<p>
Get the dll from [NuGet](<a
href="http://nuget.org/List/Packages/gherkin">nuget.org/List/Packages/gherkin</a>)
</p>
<p>
## API Docs
</p>
<ul>
<li>[Ruby](<a
href="http://cukes.info/gherkin/api/ruby/latest/">cukes.info/gherkin/api/ruby/latest/</a>)

</li>
<li>[Java](<a
href="http://cukes.info/gherkin/api/java/latest/apidocs/index.html">cukes.info/gherkin/api/java/latest/apidocs/index.html</a>)

</li>
</ul>
<p>
## Hacking: Installing the toolchain
</p>
<p>
Due to the cross-platform nature of this library, you have to install a lot
of tools to build gherkin yourself. In order to make it easier for
occasional contributors to get the development environment up and running,
you don&#8217;t have to install everything up front. The build scripts
should tell you if you are missing something. For example, you
shouldn&#8217;t have to install MinGW to build windows binaries if you are
a Linux user and just want to fix a bug in the C code.
</p>
<p>
### Common dependencies
</p>
<p>
These are the minimal tools you need to install:
</p>
<ul>
<li>Ragel (brew install ragel or apt-get install ragel)

</li>
<li>Ruby (any version should do).

</li>
<li>A clone of the cucumber git repo to a &#8220;cucumber&#8221; sibling folder
of your gherkin folder. (Only needed to run cucumber tests)

</li>
<li>RVM (you may not need this if you are only building for a single platform)

</li>
</ul>
<p>
With this minimal tool chain installed, install Ruby gems needed by the
build:
</p>
<pre>
    gem install bundler
    bundle install
</pre>
<p>
Running RSpec and Cucumber tests
</p>
<pre>
    rake clean spec cucumber
</pre>
<p>
If the RL_LANGS environment variable is set, only the parsers for the
languages specified there will be built. E.g. in Bash, export
RL_LANGS=&#8220;en,fr,no&#8221;. This can be quite helpful when modifying
the Ragel grammar.
</p>
<p>
See subsections for building for a specific platform.
</p>
<p>
### MRI, REE or Rubinius
</p>
<p>
You&#8217;ll need GCC installed.
</p>
<p>
Build the gem with:
</p>
<pre>
    rake build
</pre>
<p>
### Pure Java and JRuby
</p>
<p>
You must install JRuby to build the pure Java jar or the JRuby gem:
</p>
<pre>
    rvm install jruby
    rvm use jruby
    rvm gemset create cucumber
    rvm gemset use cucumber
    gem install bundler
    bundle install
</pre>
<p>
Now you can build the jar with:
</p>
<pre>
    rake clean jar
</pre>
<p>
### JavaScript
</p>
<p>
In order to build and test <a href="../classes/Gherkin.html">Gherkin</a>
for JavaScript you must install:
</p>
<ul>
<li>Node.js (0.4.6 or higher)

</li>
<li>NPM (0.3.18 or higher)

</li>
<li>Ragel with JavaScript support: <a
href="http://github.com/dominicmarks/ragel-js">github.com/dominicmarks/ragel-js</a>

</li>
<li>Define the GHERKIN_JS environment variable in your shell (any value will
do)

</li>
</ul>
<p>
Prepare the environment:
</p>
<pre>
    pushd js
    npm link
    popd
</pre>
<p>
Now you can build the JavaScript with:
</p>
<pre>
    rake js
</pre>
<p>
And you can try it out with node.js:
</p>
<pre>
    node js/example/print.js spec/gherkin/fixtures/1.feature
</pre>
<p>
If you&#8217;re hacking and just want to rebuild the English parser:
</p>
<pre>
  rake js/lib/gherkin/lexer/en.js
</pre>
<p>
TODO: Make all specs pass with js lexer - replace &#8216;c(listener)&#8217;
with &#8216;js(listener)&#8217; in i18n.rb
</p>
<p>
### .NET dll
</p>
<p>
You must install Mono from source, or use a release of Mono after November
18 2011.
</p>
<p>
You must also download NuGet.exe from [CodePlex](<a
href="http://nuget.codeplex.com/releases">nuget.codeplex.com/releases</a>)
and place it in `/usr/local/nuget/NuGet.exe`. When it&#8217;s installed,
update it and register your NuGet API Key:
</p>
<pre>
    # In case we need to update
    mono /usr/local/nuget/NuGet.exe Update -self

    # The key is at http://nuget.org/Contribute/MyAccount
    mono /usr/local/nuget/NuGet.exe SetApiKey xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx
</pre>
<p>
Now you can build the .NET dll with:
</p>
<pre>
    rake ikvm
</pre>
<p>
This should put the dll into `release/nuspec/lib/gherkin.dll`
</p>
<p>
### MinGW Rubies (for Windows gems)
</p>
<p>
In order to build Windows binaries (so we can release Windows gems from OS
X/Linux) we first need to install MinGW. On OS X, download prebuilt
binaries (version 4.3.0) from <a
href="http://crossgcc.rts-software.org/doku.php.">crossgcc.rts-software.org/doku.php.</a>
Unpack it under /usr/local and add it to your PATH, typically in your
`~/.bashrc`:
</p>
<pre>
    export PATH=$PATH:/usr/local/i386-mingw32-4.3.0/bin
</pre>
<p>
Now we need to set up [rake-compiler](<a
href="http://github.com/luislavena/rake-compiler">github.com/luislavena/rake-compiler</a>/)
We&#8217;ll start by installing some rubies.
</p>
<p>
Make sure you have openssl installed first.
</p>
<pre>
    brew install openssl

    # 1.8.7
    rvm install 1.8.7-p352
    rvm use 1.8.7-p352
    rvm gemset create cucumber
    rvm gemset use cucumber
    gem install bundler
    unset GHERKIN_JS
    bundle install
    rake-compiler cross-ruby VERSION=1.8.7-p352

    # 1.9.3
    rvm install 1.9.3-p0
    rvm use 1.9.3-p0
    rvm gemset create cucumber
    rvm gemset use cucumber
    gem install bundler
    unset GHERKIN_JS
    bundle install
    rake-compiler cross-ruby VERSION=1.9.3-p0
</pre>
<p>
Now you can build Windows gems:
</p>
<pre>
    rake compile
    rake gems:win
</pre>
<p>
## Release process
</p>
<ul>
<li>Make sure GHERKIN_JS is defined (see JavaScript section above)

</li>
<li>Bump version in:

<ul>
<li>This file (Installation/Java section)

</li>
<li>gherkin.gemspec

</li>
<li>java/pom.xml

</li>
<li>js/package.json

</li>
</ul>
</li>
<li>Run `bundle update`, so Gemfile.lock gets updated with the changes.

</li>
<li>Commit changes, otherwise you will get an error at the end when a tag is
made.

</li>
<li>Run `bundle exec rake gems:prepare &amp;&amp; ./build_native_gems.sh
&amp;&amp; bundle exec rake release:ALL`

</li>
</ul>
<p>
## Note on Patches/Pull Requests
</p>
<ul>
<li>Fork the project.

</li>
<li>Run rake ragel:rb to generate all the I18n lexers

</li>
<li>Make your feature addition or bug fix.

</li>
<li>Add tests for it. This is important so I don&#8217;t break it in a future
version unintentionally.

</li>
<li>Commit, do not mess with Rakefile, VERSION, or History.txt. (if you want to
have your own version, that is fine but bump version in a commit by itself
I can ignore when I pull)

</li>
<li>Send me a pull request. Bonus points for topic branches.

</li>
</ul>
<p>
## Copyright
</p>
<p>
Copyright &#169; 2009-2011 Mike Sassak, Gregory Hnatiuk, Aslak Hellesøy.
See <a href="LICENSE.html">LICENSE</a> for details.
</p>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>