<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Capistrano::Deploy::Strategy::Remote</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Capistrano::Deploy::Strategy::Remote 
            
                <span class="parent">&lt; 
                    
                    Base
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../../files/lib/capistrano/recipes/deploy/strategy/remote_rb.html">lib/capistrano/recipes/deploy/strategy/remote.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
An abstract superclass, which forms the base for all deployment strategies
which work by grabbing the code from the repository directly from remote
host. This includes deploying by checkout (the default), and deploying by
export.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000344">check!</a>,</li>
                
                <li><a href="#M000346">command</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000343">deploy!</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000347">mark</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000345">scm_run</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000344">
                    
                    <a name="M000344"></a><b>check!</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000344_source')" id="l_M000344_source">show</a>
                        
                    </p>
                    <div id="M000344_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 18</span>
18:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check!</span>
19:           <span class="ruby-keyword kw">super</span>.<span class="ruby-identifier">check</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
20:             <span class="ruby-identifier">d</span>.<span class="ruby-identifier">remote</span>.<span class="ruby-identifier">command</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">command</span>)
21:           <span class="ruby-keyword kw">end</span>
22:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000343">
                    
                    <a name="M000343"></a><b>deploy!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Executes the <a href="../SCM.html">SCM</a> command for this strategy and
writes the REVISION mark file to each host.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000343_source')" id="l_M000343_source">show</a>
                        
                    </p>
                    <div id="M000343_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 14</span>
14:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deploy!</span>
15:           <span class="ruby-identifier">scm_run</span> <span class="ruby-node">&quot;#{command} &amp;&amp; #{mark}&quot;</span>
16:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M000346">
                    
                    <a name="M000346"></a><b>command</b>()
                    
                </div>
                
                <div class="description">
                  <p>
An abstract method which must be overridden in subclasses, to return the
actual <a href="../SCM.html">SCM</a> command(s) which must be executed on
each target host in order to perform the deployment.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000346_source')" id="l_M000346_source">show</a>
                        
                    </p>
                    <div id="M000346_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 39</span>
39:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">command</span>
40:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-node">&quot;`command' is not implemented by #{self.class.name}&quot;</span>
41:           <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000347">
                    
                    <a name="M000347"></a><b>mark</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the command which will write the identifier of the revision being
deployed to the REVISION file on each host.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000347_source')" id="l_M000347_source">show</a>
                        
                    </p>
                    <div id="M000347_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 45</span>
45:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mark</span>
46:             <span class="ruby-node">&quot;(echo #{revision} &gt; #{configuration[:release_path]}/REVISION)&quot;</span>
47:           <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000345">
                    
                    <a name="M000345"></a><b>scm_run</b>(command)
                    
                </div>
                
                <div class="description">
                  <p>
Runs the given command, filtering output back through the handle_data
filter of the <a href="../SCM.html">SCM</a> implementation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000345_source')" id="l_M000345_source">show</a>
                        
                    </p>
                    <div id="M000345_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/capistrano/recipes/deploy/strategy/remote.rb, line 28</span>
28:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scm_run</span>(<span class="ruby-identifier">command</span>)
29:             <span class="ruby-identifier">run</span>(<span class="ruby-identifier">command</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span>,<span class="ruby-identifier">stream</span>,<span class="ruby-identifier">text</span><span class="ruby-operator">|</span>
30:               <span class="ruby-identifier">ch</span>[<span class="ruby-identifier">:state</span>] <span class="ruby-operator">||=</span> { <span class="ruby-identifier">:channel</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ch</span> }
31:               <span class="ruby-identifier">output</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">handle_data</span>(<span class="ruby-identifier">ch</span>[<span class="ruby-identifier">:state</span>], <span class="ruby-identifier">stream</span>, <span class="ruby-identifier">text</span>)
32:               <span class="ruby-identifier">ch</span>.<span class="ruby-identifier">send_data</span>(<span class="ruby-identifier">output</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">output</span>
33:             <span class="ruby-keyword kw">end</span>
34:           <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    