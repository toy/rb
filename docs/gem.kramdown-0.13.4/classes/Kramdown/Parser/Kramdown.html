<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Kramdown::Parser::Kramdown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Kramdown::Parser::Kramdown 
            
                <span class="parent">&lt; 
                    
                    Base
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/abbreviation_rb.html">lib/kramdown/parser/kramdown/abbreviation.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/autolink_rb.html">lib/kramdown/parser/kramdown/autolink.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/blank_line_rb.html">lib/kramdown/parser/kramdown/blank_line.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/block_boundary_rb.html">lib/kramdown/parser/kramdown/block_boundary.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/blockquote_rb.html">lib/kramdown/parser/kramdown/blockquote.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/codeblock_rb.html">lib/kramdown/parser/kramdown/codeblock.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/codespan_rb.html">lib/kramdown/parser/kramdown/codespan.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/emphasis_rb.html">lib/kramdown/parser/kramdown/emphasis.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/eob_rb.html">lib/kramdown/parser/kramdown/eob.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/escaped_chars_rb.html">lib/kramdown/parser/kramdown/escaped_chars.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/extensions_rb.html">lib/kramdown/parser/kramdown/extensions.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/footnote_rb.html">lib/kramdown/parser/kramdown/footnote.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/header_rb.html">lib/kramdown/parser/kramdown/header.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/horizontal_rule_rb.html">lib/kramdown/parser/kramdown/horizontal_rule.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/html_rb.html">lib/kramdown/parser/kramdown/html.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/html_entity_rb.html">lib/kramdown/parser/kramdown/html_entity.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/line_break_rb.html">lib/kramdown/parser/kramdown/line_break.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/link_rb.html">lib/kramdown/parser/kramdown/link.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/list_rb.html">lib/kramdown/parser/kramdown/list.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/math_rb.html">lib/kramdown/parser/kramdown/math.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/paragraph_rb.html">lib/kramdown/parser/kramdown/paragraph.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/table_rb.html">lib/kramdown/parser/kramdown/table.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/smart_quotes_rb.html">lib/kramdown/parser/kramdown/smart_quotes.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown/typographic_symbol_rb.html">lib/kramdown/parser/kramdown/typographic_symbol.rb</a></li>
            
            <li><a href="../../../files/lib/kramdown/parser/kramdown_rb.html">lib/kramdown/parser/kramdown.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Used for parsing a document in kramdown format.
</p>
<p>
If you want to extend the functionality of the parser, you need to do the
following:
</p>
<ul>
<li>Create a new subclass

</li>
<li>add the needed parser methods

</li>
<li>modify the @block_parsers and @span_parsers variables and add the names of
your parser methods

</li>
</ul>
<p>
Here is a small example for an extended parser class that parses ERB style
tags as raw text if they are used as span-level elements (an equivalent
block-level parser should probably also be made to handle the block case):
</p>
<pre>
  require 'kramdown/parser/kramdown'

  class Kramdown::Parser::ERBKramdown &lt; Kramdown::Parser::Kramdown

     def initialize(source, options)
       super
       @span_parsers.unshift(:erb_tags)
     end

     ERB_TAGS_START = /&lt;%.*?%&gt;/

     def parse_erb_tags
       @src.pos += @src.matched_size
       @tree.children &lt;&lt; Element.new(:raw, @src.matched)
     end
     define_parser(:erb_tags, ERB_TAGS_START, '&lt;%')

  end
</pre>
<p>
The new parser can be used like this:
</p>
<pre>
  require 'kramdown/document'
  # require the file with the above parser class

  Kramdown::Document.new(input_text, :input =&gt; 'ERBKramdown').to_html
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000160">add_link</a>,</li>
                
                <li><a href="#M000132">after_block_boundary?</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000133">before_block_boundary?</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000174">configure_parser</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000185">define_parser</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000147">handle_extension</a>,</li>
                
                <li><a href="#M000153">handle_kramdown_html_tag</a>,</li>
                
                <li><a href="#M000187">has_parser?</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000172">new</a>,</li>
                
                <li><a href="#M000183">new_block_el</a>,</li>
                
                <li><a href="#M000158">normalize_link_id</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000173">parse</a>,</li>
                
                <li><a href="#M000125">parse_abbrev_definition</a>,</li>
                
                <li><a href="#M000142">parse_attribute_list</a>,</li>
                
                <li><a href="#M000151">parse_atx_header</a>,</li>
                
                <li><a href="#M000130">parse_autolink</a>,</li>
                
                <li><a href="#M000131">parse_blank_line</a>,</li>
                
                <li><a href="#M000148">parse_block_extensions</a>,</li>
                
                <li><a href="#M000154">parse_block_html</a>,</li>
                
                <li><a href="#M000165">parse_block_math</a>,</li>
                
                <li><a href="#M000134">parse_blockquote</a>,</li>
                
                <li><a href="#M000176">parse_blocks</a>,</li>
                
                <li><a href="#M000135">parse_codeblock</a>,</li>
                
                <li><a href="#M000136">parse_codeblock_fenced</a>,</li>
                
                <li><a href="#M000138">parse_codespan</a>,</li>
                
                <li><a href="#M000164">parse_definition_list</a>,</li>
                
                <li><a href="#M000139">parse_emphasis</a>,</li>
                
                <li><a href="#M000140">parse_eob_marker</a>,</li>
                
                <li><a href="#M000141">parse_escaped_chars</a>,</li>
                
                <li><a href="#M000145">parse_extension_start_tag</a>,</li>
                
                <li><a href="#M000162">parse_first_list_line</a>,</li>
                
                <li><a href="#M000143">parse_footnote_definition</a>,</li>
                
                <li><a href="#M000146">parse_footnote_marker</a>,</li>
                
                <li><a href="#M000152">parse_horizontal_rule</a>,</li>
                
                <li><a href="#M000155">parse_html_entity</a>,</li>
                
                <li><a href="#M000166">parse_inline_math</a>,</li>
                
                <li><a href="#M000157">parse_line_break</a>,</li>
                
                <li><a href="#M000161">parse_link</a>,</li>
                
                <li><a href="#M000159">parse_link_definition</a>,</li>
                
                <li><a href="#M000163">parse_list</a>,</li>
                
                <li><a href="#M000167">parse_paragraph</a>,</li>
                
                <li><a href="#M000149">parse_setext_header</a>,</li>
                
                <li><a href="#M000169">parse_smart_quotes</a>,</li>
                
                <li><a href="#M000150">parse_span_extensions</a>,</li>
                
                <li><a href="#M000156">parse_span_html</a>,</li>
                
                <li><a href="#M000178">parse_spans</a>,</li>
                
                <li><a href="#M000168">parse_table</a>,</li>
                
                <li><a href="#M000170">parse_typographic_syms</a>,</li>
                
                <li><a href="#M000186">parser</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000126">replace_abbreviations</a>,</li>
                
                <li><a href="#M000179">reset_env</a>,</li>
                
                <li><a href="#M000181">restore_env</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000180">save_env</a>,</li>
                
                <li><a href="#M000175">span_parser_regexps</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000182">update_attr_with_ial</a>,</li>
                
                <li><a href="#M000144">update_ial_with_ial</a>,</li>
                
                <li><a href="#M000177">update_tree</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../Utils/Entities.html">Kramdown::Utils::Entities</a>
            
            START:includes
        </li>
        
        <li>
            
            <span>::Kramdown</span>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">ABBREV_DEFINITION_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}\*\[(.+?)\]:(.*?)\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ACHARS</td>
            <td>=</td>
            <td class="attr-value">'\w\x80-\xFF'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ACHARS</td>
            <td>=</td>
            <td class="attr-value">'\w'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ACHARS</td>
            <td>=</td>
            <td class="attr-value">'[[:alnum:]]'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">AUTOLINK_START_STR</td>
            <td>=</td>
            <td class="attr-value">&quot;&lt;((mailto|https?|ftps?):.+?|[-.#{ACHARS}]+@[-#{ACHARS}]+(?:\.[-#{ACHARS}]+)*\.[a-z]+)&gt;&quot;</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">AUTOLINK_START</td>
            <td>=</td>
            <td class="attr-value">/#{AUTOLINK_START_STR}/u</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">AUTOLINK_START</td>
            <td>=</td>
            <td class="attr-value">/#{AUTOLINK_START_STR}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">BLANK_LINE</td>
            <td>=</td>
            <td class="attr-value">/(?:^\s*\n)+/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">BLOCK_BOUNDARY</td>
            <td>=</td>
            <td class="attr-value">/#{BLANK_LINE}|#{EOB_MARKER}|#{IAL_BLOCK_START}|\Z/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">BLOCKQUOTE_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}&gt; ?/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">CODEBLOCK_START</td>
            <td>=</td>
            <td class="attr-value">INDENT</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">CODEBLOCK_MATCH</td>
            <td>=</td>
            <td class="attr-value">/(?:#{BLANK_LINE}?(?:#{INDENT}[ \t]*\S.*\n)+(?:(?!#{BLANK_LINE} {0,3}\S|#{IAL_BLOCK_START}|#{EOB_MARKER}|^#{OPT_SPACE}#{LAZY_END_HTML_STOP}|^#{OPT_SPACE}#{LAZY_END_HTML_START})^[ \t]*\S.*\n)*)*/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">FENCED_CODEBLOCK_START</td>
            <td>=</td>
            <td class="attr-value">/^~{3,}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">FENCED_CODEBLOCK_MATCH</td>
            <td>=</td>
            <td class="attr-value">/^(~{3,})\s*?\n(.*?)^\1~*\s*?\n/m</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">CODESPAN_DELIMITER</td>
            <td>=</td>
            <td class="attr-value">/`+/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EMPHASIS_START</td>
            <td>=</td>
            <td class="attr-value">/(?:\*\*?|__?)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EOB_MARKER</td>
            <td>=</td>
            <td class="attr-value">/^\^\s*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ESCAPED_CHARS</td>
            <td>=</td>
            <td class="attr-value">/\\([\\.*_+`&lt;&gt;()\[\]{}#!:|&quot;'\$=-])/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IAL_CLASS_ATTR</td>
            <td>=</td>
            <td class="attr-value">'class'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">FOOTNOTE_DEFINITION_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}\[\^(#{ALD_ID_NAME})\]:\s*?(.*?\n#{CODEBLOCK_MATCH})/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">FOOTNOTE_MARKER_START</td>
            <td>=</td>
            <td class="attr-value">/\[\^(#{ALD_ID_NAME})\]/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_ID_CHARS</td>
            <td>=</td>
            <td class="attr-value">/[\w-]/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_ANY_CHARS</td>
            <td>=</td>
            <td class="attr-value">/\\\}|[^\}]/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_ID_NAME</td>
            <td>=</td>
            <td class="attr-value">/\w#{ALD_ID_CHARS}*/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_TYPE_KEY_VALUE_PAIR</td>
            <td>=</td>
            <td class="attr-value">/(#{ALD_ID_NAME})=(&quot;|')((?:\\\}|\\\2|[^\}\2])*?)\2/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_TYPE_CLASS_NAME</td>
            <td>=</td>
            <td class="attr-value">/\.(#{ALD_ID_NAME})/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_TYPE_ID_NAME</td>
            <td>=</td>
            <td class="attr-value">/#(\w[\w:-]*)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_TYPE_REF</td>
            <td>=</td>
            <td class="attr-value">/(#{ALD_ID_NAME})/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_TYPE_ANY</td>
            <td>=</td>
            <td class="attr-value">/(?:\A|\s)(?:#{ALD_TYPE_KEY_VALUE_PAIR}|#{ALD_TYPE_ID_NAME}|#{ALD_TYPE_CLASS_NAME}|#{ALD_TYPE_REF})(?=\s|\Z)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ALD_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}\{:(#{ALD_ID_NAME}):(#{ALD_ANY_CHARS}+)\}\s*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXT_STOP_STR</td>
            <td>=</td>
            <td class="attr-value">&quot;\\{:/(%s)?\\}&quot;</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXT_START_STR</td>
            <td>=</td>
            <td class="attr-value">&quot;\\{::(\\w+)(?:\\s(#{ALD_ANY_CHARS}*?)|)(\\/)?\\}&quot;</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXT_BLOCK_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}(?:#{EXT_START_STR}|#{EXT_STOP_STR % ALD_ID_NAME})\s*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXT_BLOCK_STOP_STR</td>
            <td>=</td>
            <td class="attr-value">&quot;^#{OPT_SPACE}#{EXT_STOP_STR}\s*?\n&quot;</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IAL_BLOCK</td>
            <td>=</td>
            <td class="attr-value">/\{:(?!:|\/)(#{ALD_ANY_CHARS}+)\}\s*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IAL_BLOCK_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}#{IAL_BLOCK}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">BLOCK_EXTENSIONS_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}\{:/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">HEADER_ID</td>
            <td>=</td>
            <td class="attr-value">/(?:[ \t]\{#(\w[\w-]*)\})?/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SETEXT_HEADER_START</td>
            <td>=</td>
            <td class="attr-value">/^(#{OPT_SPACE}[^ \t].*?)#{HEADER_ID}[ \t]*?\n(-|=)+\s*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">EXT_SPAN_START</td>
            <td>=</td>
            <td class="attr-value">/#{EXT_START_STR}|#{EXT_STOP_STR % ALD_ID_NAME}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IAL_SPAN_START</td>
            <td>=</td>
            <td class="attr-value">/\{:(#{ALD_ANY_CHARS}+)\}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SPAN_EXTENSIONS_START</td>
            <td>=</td>
            <td class="attr-value">/\{:/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ATX_HEADER_START</td>
            <td>=</td>
            <td class="attr-value">/^\#{1,6}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">ATX_HEADER_MATCH</td>
            <td>=</td>
            <td class="attr-value">/^(\#{1,6})(.+?)\s*?#*#{HEADER_ID}\s*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">HR_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}(\*|-|_)[ \t]*\1[ \t]*\1(\1|[ \t])*\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">HTML_MARKDOWN_ATTR_MAP</td>
            <td>=</td>
            <td class="attr-value">{&quot;0&quot; =&gt; :raw, &quot;1&quot; =&gt; :default, &quot;span&quot; =&gt; :span, &quot;block&quot; =&gt; :block}</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Mapping of markdown attribute value to content model. I.e. :raw when
&#8220;0&#8221;, :default when &#8220;1&#8221; (use default content model
for the HTML element), :span when &#8220;span&#8221;, :block when block and
for everything else <tt>nil</tt> is returned.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TRAILING_WHITESPACE</td>
            <td>=</td>
            <td class="attr-value">/[ \t]*\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">HTML_BLOCK_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}&lt;(#{REXML::Parsers::BaseParser::UNAME_STR}|\?|!--|\/)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">HTML_SPAN_START</td>
            <td>=</td>
            <td class="attr-value">/&lt;(#{REXML::Parsers::BaseParser::UNAME_STR}|\?|!--|\/)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LINE_BREAK</td>
            <td>=</td>
            <td class="attr-value">/(  |\\\\)(?=\n)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LINK_DEFINITION_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}\[([^\n\]]+)\]:[ \t]*(?:&lt;(.*?)&gt;|([^'&quot;\n]*?\S[^'&quot;\n]*?))[ \t]*?(?:\n?[ \t]*?([&quot;'])(.+?)\4[ \t]*?)?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LIST_ITEM_IAL</td>
            <td>=</td>
            <td class="attr-value">/^\s*(?:\{:(?!(?:#{ALD_ID_NAME})?:|\/)(#{ALD_ANY_CHARS}+)\})\s*/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LIST_ITEM_IAL_CHECK</td>
            <td>=</td>
            <td class="attr-value">/^#{LIST_ITEM_IAL}?\s*\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LINK_BRACKET_STOP_RE</td>
            <td>=</td>
            <td class="attr-value">/(\])|!?\[/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LINK_PAREN_STOP_RE</td>
            <td>=</td>
            <td class="attr-value">/(\()|(\))|\s(?=['&quot;])/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LINK_INLINE_ID_RE</td>
            <td>=</td>
            <td class="attr-value">/\s*?\[([^\]]+)?\]/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LINK_INLINE_TITLE_RE</td>
            <td>=</td>
            <td class="attr-value">/\s*?([&quot;'])(.+?)\1\s*?\)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LINK_START</td>
            <td>=</td>
            <td class="attr-value">/!?\[(?=[^^])/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LIST_START_UL</td>
            <td>=</td>
            <td class="attr-value">/^(#{OPT_SPACE}[+*-])([\t| ].*?\n)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LIST_START_OL</td>
            <td>=</td>
            <td class="attr-value">/^(#{OPT_SPACE}\d+\.)([\t| ].*?\n)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LIST_START</td>
            <td>=</td>
            <td class="attr-value">/#{LIST_START_UL}|#{LIST_START_OL}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">DEFINITION_LIST_START</td>
            <td>=</td>
            <td class="attr-value">/^(#{OPT_SPACE}:)([\t| ].*?\n)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">BLOCK_MATH_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}(\\)?\$\$(.*?)\$\$\s*?\n/m</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">INLINE_MATH_START</td>
            <td>=</td>
            <td class="attr-value">/\$\$(.*?)\$\$/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LAZY_END_HTML_SPAN_ELEMENTS</td>
            <td>=</td>
            <td class="attr-value">HTML_SPAN_ELEMENTS + %w{script}</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LAZY_END_HTML_START</td>
            <td>=</td>
            <td class="attr-value">/&lt;(?&gt;(?!(?:#{LAZY_END_HTML_SPAN_ELEMENTS.join('|')})\b)#{REXML::Parsers::BaseParser::UNAME_STR})\s*(?&gt;\s+#{REXML::Parsers::BaseParser::UNAME_STR}\s*=\s*([&quot;']).*?\1)*\s*\/?&gt;/m</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LAZY_END_HTML_STOP</td>
            <td>=</td>
            <td class="attr-value">/&lt;\/(?!(?:#{LAZY_END_HTML_SPAN_ELEMENTS.join('|')})\b)#{REXML::Parsers::BaseParser::UNAME_STR}\s*&gt;/m</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LAZY_END</td>
            <td>=</td>
            <td class="attr-value">/#{BLANK_LINE}|#{IAL_BLOCK_START}|#{EOB_MARKER}|^#{OPT_SPACE}#{LAZY_END_HTML_STOP}|^#{OPT_SPACE}#{LAZY_END_HTML_START}|\Z/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PARAGRAPH_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}[^ \t].*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PARAGRAPH_MATCH</td>
            <td>=</td>
            <td class="attr-value">/^.*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PARAGRAPH_END</td>
            <td>=</td>
            <td class="attr-value">/#{LAZY_END}|#{DEFINITION_LIST_START}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TABLE_SEP_LINE</td>
            <td>=</td>
            <td class="attr-value">/^([+|: -]*?-[+|: -]*?)[ \t]*\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TABLE_HSEP_ALIGN</td>
            <td>=</td>
            <td class="attr-value">/[ ]?(:?)-+(:?)[ ]?/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TABLE_FSEP_LINE</td>
            <td>=</td>
            <td class="attr-value">/^[+|: =]*?=[+|: =]*?[ \t]*\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TABLE_ROW_LINE</td>
            <td>=</td>
            <td class="attr-value">/^(.*?)[ \t]*\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SQ_PUNCT</td>
            <td>=</td>
            <td class="attr-value">'[!&quot;#\$\%\'()*+,\-.\/:;&lt;=&gt;?\@\[\\\\\]\^_`{|}~]'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SQ_CLOSE</td>
            <td>=</td>
            <td class="attr-value">%![^\ \\\\\t\r\n\\[{(-]!</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TABLE_PIPE_CHECK</td>
            <td>=</td>
            <td class="attr-value">/(?:\||.*?[^\\\n]\|)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TABLE_LINE</td>
            <td>=</td>
            <td class="attr-value">/#{TABLE_PIPE_CHECK}.*?\n/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TABLE_START</td>
            <td>=</td>
            <td class="attr-value">/^#{OPT_SPACE}(?=\S)#{TABLE_LINE}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SQ_RULES</td>
            <td>=</td>
            <td class="attr-value">[                   [/(&quot;|')(?=#{SQ_PUNCT}\B)/, [:rquote1]],                   # Special case for double sets of quotes, e.g.:                   #   &lt;p&gt;He said, &quot;'Quoted' words in a larger quote.&quot;&lt;/p&gt;                   [/(\s?)&quot;'(?=\w)/, [1, :ldquo, :lsquo]],                   [/(\s?)'&quot;(?=\w)/, [1, :lsquo, :ldquo]],                   # Special case for decade abbreviations (the '80s):                   [/(\s?)'(?=\d\ds)/, [1, :rsquo]],                    # Get most opening single/double quotes:                   [/(\s)('|&quot;)(?=\w)/, [1, :lquote2]],                   # Single/double closing quotes:                   [/(#{SQ_CLOSE})('|&quot;)/, [1, :rquote2]],                   # Special case for e.g. &quot;&lt;i&gt;Custer&lt;/i&gt;'s Last Stand.&quot;                   [/(&quot;|')(\s|s\b|$)/, [:rquote1, 2]],                   # Any remaining single quotes should be opening ones:                   [/(.?)'/m, [1, :lsquo]],                   [/(.?)&quot;/m, [1, :ldquo]],                  ]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SQ_SUBSTS</td>
            <td>=</td>
            <td class="attr-value">{         [:rquote1, '&quot;'] =&gt; :rdquo,         [:rquote1, &quot;'&quot;] =&gt; :rsquo,         [:rquote2, '&quot;'] =&gt; :rdquo,         [:rquote2, &quot;'&quot;] =&gt; :rsquo,         [:lquote1, '&quot;'] =&gt; :ldquo,         [:lquote1, &quot;'&quot;] =&gt; :lsquo,         [:lquote2, '&quot;'] =&gt; :ldquo,         [:lquote2, &quot;'&quot;] =&gt; :lsquo,       }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SMART_QUOTES_RE</td>
            <td>=</td>
            <td class="attr-value">/[^\\]?[&quot;']/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TYPOGRAPHIC_SYMS</td>
            <td>=</td>
            <td class="attr-value">[['---', :mdash], ['--', :ndash], ['...', :hellip],                           ['\\&lt;&lt;', '&amp;lt;&amp;lt;'], ['\\&gt;&gt;', '&amp;gt;&amp;gt;'],                           ['&lt;&lt; ', :laquo_space], [' &gt;&gt;', :raquo_space],                           ['&lt;&lt;', :laquo], ['&gt;&gt;', :raquo]]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TYPOGRAPHIC_SYMS_SUBST</td>
            <td>=</td>
            <td class="attr-value">Hash[*TYPOGRAPHIC_SYMS.flatten]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TYPOGRAPHIC_SYMS_RE</td>
            <td>=</td>
            <td class="attr-value">/#{TYPOGRAPHIC_SYMS.map {|k,v| Regexp.escape(k)}.join('|')}/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">Data</td>
            <td>=</td>
            <td class="attr-value">Struct.new(:name, :start_re, :span_start, :method)</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Struct class holding all the needed data for one block/span-level parser
method.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">INDENT</td>
            <td>=</td>
            <td class="attr-value">/^(?:\t| {4})/</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Regexp for matching indentation (one tab or four spaces)
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">OPT_SPACE</td>
            <td>=</td>
            <td class="attr-value">/ {0,3}/</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Regexp for matching the optional space (zero or up to three spaces)
</p>
</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Protected methods</div>
            
            <div class="method">
                <div class="title" id="M000185">
                    
                    <a name="M000185"></a><b>define_parser</b>(name, start_re, span_start = nil, meth_name = &quot;parse_#{name}&quot;)
                    
                </div>
                
                <div class="description">
                  <p>
Add a parser method
</p>
<ul>
<li>with the given <tt>name</tt>,

</li>
<li>using <tt>start_re</tt> as start regexp

</li>
<li>and, for span parsers, <tt>span_start</tt> as a String that can be used in
a regexp and which identifies the starting character(s)

</li>
</ul>
<p>
to the registry. The method name is automatically derived from the
<tt>name</tt> or can explicitly be set by using the <tt>meth_name</tt>
parameter.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000185_source')" id="l_M000185_source">show</a>
                        
                    </p>
                    <div id="M000185_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 290</span>
290:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">define_parser</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">start_re</span>, <span class="ruby-identifier">span_start</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">meth_name</span> = <span class="ruby-node">&quot;parse_#{name}&quot;</span>)
291:         <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;A parser with the name #{name} already exists!&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@parsers</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">name</span>)
292:         <span class="ruby-ivar">@@parsers</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-constant">Data</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">start_re</span>, <span class="ruby-identifier">span_start</span>, <span class="ruby-identifier">meth_name</span>)
293:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000187">
                    
                    <a name="M000187"></a><b>has_parser?</b>(name)
                    
                </div>
                
                <div class="description">
                  <p>
Return <tt>true</tt> if there is a parser called <tt>name</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000187_source')" id="l_M000187_source">show</a>
                        
                    </p>
                    <div id="M000187_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 301</span>
301:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">has_parser?</span>(<span class="ruby-identifier">name</span>)
302:         <span class="ruby-ivar">@@parsers</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">name</span>)
303:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000186">
                    
                    <a name="M000186"></a><b>parser</b>(name = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Return the <a href="Kramdown.html#Data">Data</a> structure for the parser
<tt>name</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000186_source')" id="l_M000186_source">show</a>
                        
                    </p>
                    <div id="M000186_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 296</span>
296:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parser</span>(<span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
297:         <span class="ruby-ivar">@@parsers</span>[<span class="ruby-identifier">name</span>]
298:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Private methods</div>
            
            <div class="method">
                <div class="title" id="M000172">
                    
                    <a name="M000172"></a><b>new</b>(source, options)
                    
                </div>
                
                <div class="description">
                  <p>
Create a new <a href="Kramdown.html">Kramdown</a> parser object with the
given <tt>options</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000172_source')" id="l_M000172_source">show</a>
                        
                    </p>
                    <div id="M000172_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 77</span>
77:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">source</span>, <span class="ruby-identifier">options</span>)
78:         <span class="ruby-keyword kw">super</span>
79: 
80:         <span class="ruby-identifier">reset_env</span>
81: 
82:         <span class="ruby-ivar">@root</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:abbrev_defs</span>] = {}
83:         <span class="ruby-ivar">@alds</span> = {}
84:         <span class="ruby-ivar">@link_defs</span> = {}
85:         <span class="ruby-ivar">@footnotes</span> = {}
86: 
87:         <span class="ruby-ivar">@block_parsers</span> = [<span class="ruby-identifier">:blank_line</span>, <span class="ruby-identifier">:codeblock</span>, <span class="ruby-identifier">:codeblock_fenced</span>, <span class="ruby-identifier">:blockquote</span>, <span class="ruby-identifier">:atx_header</span>,
88:                           <span class="ruby-identifier">:horizontal_rule</span>, <span class="ruby-identifier">:list</span>, <span class="ruby-identifier">:definition_list</span>, <span class="ruby-identifier">:block_html</span>, <span class="ruby-identifier">:setext_header</span>,
89:                           <span class="ruby-identifier">:table</span>, <span class="ruby-identifier">:footnote_definition</span>, <span class="ruby-identifier">:link_definition</span>, <span class="ruby-identifier">:abbrev_definition</span>,
90:                           <span class="ruby-identifier">:block_extensions</span>, <span class="ruby-identifier">:block_math</span>, <span class="ruby-identifier">:eob_marker</span>, <span class="ruby-identifier">:paragraph</span>]
91:         <span class="ruby-ivar">@span_parsers</span> =  [<span class="ruby-identifier">:emphasis</span>, <span class="ruby-identifier">:codespan</span>, <span class="ruby-identifier">:autolink</span>, <span class="ruby-identifier">:span_html</span>, <span class="ruby-identifier">:footnote_marker</span>, <span class="ruby-identifier">:link</span>, <span class="ruby-identifier">:smart_quotes</span>, <span class="ruby-identifier">:inline_math</span>,
92:                          <span class="ruby-identifier">:span_extensions</span>, <span class="ruby-identifier">:html_entity</span>, <span class="ruby-identifier">:typographic_syms</span>, <span class="ruby-identifier">:line_break</span>, <span class="ruby-identifier">:escaped_chars</span>]
93: 
94:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000160">
                    
                    <a name="M000160"></a><b>add_link</b>(el, href, title, alt_text = nil)
                    
                </div>
                
                <div class="description">
                  <p>
This helper methods adds the approriate attributes to the element
<tt>el</tt> of type <tt>a</tt> or <tt>img</tt> and the element itself to
the @tree.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show</a>
                        
                    </p>
                    <div id="M000160_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/link.rb, line 48</span>
48:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_link</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">href</span>, <span class="ruby-identifier">title</span>, <span class="ruby-identifier">alt_text</span> = <span class="ruby-keyword kw">nil</span>)
49:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:a</span>
50:           <span class="ruby-identifier">el</span>.<span class="ruby-identifier">attr</span>[<span class="ruby-value str">'href'</span>] = <span class="ruby-identifier">href</span>
51:         <span class="ruby-keyword kw">else</span>
52:           <span class="ruby-identifier">el</span>.<span class="ruby-identifier">attr</span>[<span class="ruby-value str">'src'</span>] = <span class="ruby-identifier">href</span>
53:           <span class="ruby-identifier">el</span>.<span class="ruby-identifier">attr</span>[<span class="ruby-value str">'alt'</span>] = <span class="ruby-identifier">alt_text</span>
54:           <span class="ruby-identifier">el</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">clear</span>
55:         <span class="ruby-keyword kw">end</span>
56:         <span class="ruby-identifier">el</span>.<span class="ruby-identifier">attr</span>[<span class="ruby-value str">'title'</span>] = <span class="ruby-identifier">title</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">title</span>
57:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">el</span>
58:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000132">
                    
                    <a name="M000132"></a><b>after_block_boundary?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return <tt>true</tt> if we are after a block boundary.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show</a>
                        
                    </p>
                    <div id="M000132_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/block_boundary.rb, line 34</span>
34:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_block_boundary?</span>
35:         <span class="ruby-operator">!</span><span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:blank</span> <span class="ruby-operator">||</span>
36:           (<span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:eob</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">||</span> <span class="ruby-ivar">@block_ial</span>
37:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000133">
                    
                    <a name="M000133"></a><b>before_block_boundary?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return <tt>true</tt> if we are before a block boundary.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000133_source')" id="l_M000133_source">show</a>
                        
                    </p>
                    <div id="M000133_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/block_boundary.rb, line 40</span>
40:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_block_boundary?</span>
41:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">BLOCK_BOUNDARY</span>)
42:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000147">
                    
                    <a name="M000147"></a><b>handle_extension</b>(name, opts, body, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000147_source')" id="l_M000147_source">show</a>
                        
                    </p>
                    <div id="M000147_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/extensions.rb, line 100</span>
100:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">handle_extension</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">body</span>, <span class="ruby-identifier">type</span>)
101:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name</span>
102:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'comment'</span>
103:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:comment</span>, <span class="ruby-identifier">body</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">type</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
104:           <span class="ruby-keyword kw">true</span>
105:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'nomarkdown'</span>
106:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:raw</span>, <span class="ruby-identifier">body</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">type</span>, <span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value str">'type'</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\s+/</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
107:           <span class="ruby-keyword kw">true</span>
108:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'options'</span>
109:           <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">select</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
110:             <span class="ruby-identifier">k</span> = <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_sym</span>
111:             <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Options</span>.<span class="ruby-identifier">defined?</span>(<span class="ruby-identifier">k</span>)
112:               <span class="ruby-keyword kw">begin</span>
113:                 <span class="ruby-identifier">val</span> = <span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Options</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span>)
114:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">val</span>
115:                 (<span class="ruby-ivar">@root</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:options</span>] <span class="ruby-operator">||=</span> {})[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">val</span>
116:               <span class="ruby-keyword kw">rescue</span>
117:               <span class="ruby-keyword kw">end</span>
118:               <span class="ruby-keyword kw">false</span>
119:             <span class="ruby-keyword kw">else</span>
120:               <span class="ruby-keyword kw">true</span>
121:             <span class="ruby-keyword kw">end</span>
122:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
123:             <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Unknown kramdown option '#{k}'&quot;</span>)
124:           <span class="ruby-keyword kw">end</span>
125:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:eob</span>, <span class="ruby-identifier">:extension</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:block</span>
126:           <span class="ruby-keyword kw">true</span>
127:         <span class="ruby-keyword kw">else</span>
128:           <span class="ruby-keyword kw">false</span>
129:         <span class="ruby-keyword kw">end</span>
130:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000153">
                    
                    <a name="M000153"></a><b>handle_kramdown_html_tag</b>(el, closed)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000153_source')" id="l_M000153_source">show</a>
                        
                    </p>
                    <div id="M000153_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/html.rb, line 38</span>
38:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">handle_kramdown_html_tag</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">closed</span>)
39:         <span class="ruby-identifier">el</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>] = <span class="ruby-ivar">@block_ial</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@block_ial</span>
40: 
41:         <span class="ruby-identifier">content_model</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:html_element</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:content_model</span>] <span class="ruby-operator">!=</span> <span class="ruby-identifier">:raw</span>
42:                           (<span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:parse_block_html</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">HTML_CONTENT_MODEL</span>[<span class="ruby-identifier">el</span>.<span class="ruby-identifier">value</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">:raw</span>)
43:                         <span class="ruby-keyword kw">else</span>
44:                           <span class="ruby-identifier">:raw</span>
45:                         <span class="ruby-keyword kw">end</span>
46:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span> = <span class="ruby-constant">HTML_MARKDOWN_ATTR_MAP</span>[<span class="ruby-identifier">el</span>.<span class="ruby-identifier">attr</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'markdown'</span>)]
47:           <span class="ruby-identifier">content_model</span> = (<span class="ruby-identifier">val</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:default</span> <span class="ruby-operator">?</span> <span class="ruby-constant">HTML_CONTENT_MODEL</span>[<span class="ruby-identifier">el</span>.<span class="ruby-identifier">value</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">val</span>)
48:         <span class="ruby-keyword kw">end</span>
49: 
50:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TRAILING_WHITESPACE</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">content_model</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:block</span>
51:         <span class="ruby-identifier">el</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:content_model</span>] = <span class="ruby-identifier">content_model</span>
52: 
53:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">closed</span>
54:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">content_model</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:block</span>
55:             <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parse_blocks</span>(<span class="ruby-identifier">el</span>)
56:               <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Found no end tag for '#{el.value}' - auto-closing it&quot;</span>)
57:             <span class="ruby-keyword kw">end</span>
58:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">content_model</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:span</span>
59:             <span class="ruby-identifier">curpos</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>
60:             <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan_until</span>(<span class="ruby-node">/(?=&lt;\/#{el.value}\s*&gt;)/</span><span class="ruby-identifier">mi</span>)
61:               <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">extract_string</span>(<span class="ruby-identifier">curpos</span><span class="ruby-operator">...</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>, <span class="ruby-ivar">@src</span>), <span class="ruby-identifier">el</span>)
62:               <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">HTML_TAG_CLOSE_RE</span>)
63:             <span class="ruby-keyword kw">else</span>
64:               <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">rest</span>, <span class="ruby-identifier">el</span>)
65:               <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">terminate</span>
66:               <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Found no end tag for '#{el.value}' - auto-closing it&quot;</span>)
67:             <span class="ruby-keyword kw">end</span>
68:           <span class="ruby-keyword kw">else</span>
69:             <span class="ruby-identifier">parse_raw_html</span>(<span class="ruby-identifier">el</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:handle_kramdown_html_tag</span>))
70:           <span class="ruby-keyword kw">end</span>
71:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TRAILING_WHITESPACE</span>) <span class="ruby-keyword kw">unless</span> (<span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:html_element</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:content_model</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:raw</span>)
72:         <span class="ruby-keyword kw">end</span>
73:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000158">
                    
                    <a name="M000158"></a><b>normalize_link_id</b>(id)
                    
                </div>
                
                <div class="description">
                  <p>
Normalize the link identifier.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show</a>
                        
                    </p>
                    <div id="M000158_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/link.rb, line 28</span>
28:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalize_link_id</span>(<span class="ruby-identifier">id</span>)
29:         <span class="ruby-identifier">id</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\s|\n)+/</span>, <span class="ruby-value str">' '</span>).<span class="ruby-identifier">downcase</span>
30:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000173">
                    
                    <a name="M000173"></a><b>parse</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The source string provided on initialization is parsed into the @root
element.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000173_source')" id="l_M000173_source">show</a>
                        
                    </p>
                    <div id="M000173_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 99</span>
 99:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse</span>
100:         <span class="ruby-identifier">configure_parser</span>
101:         <span class="ruby-identifier">parse_blocks</span>(<span class="ruby-ivar">@root</span>, <span class="ruby-identifier">adapt_source</span>(<span class="ruby-identifier">source</span>))
102:         <span class="ruby-identifier">update_tree</span>(<span class="ruby-ivar">@root</span>)
103:         <span class="ruby-identifier">replace_abbreviations</span>(<span class="ruby-ivar">@root</span>)
104:         <span class="ruby-ivar">@footnotes</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span>,<span class="ruby-identifier">data</span><span class="ruby-operator">|</span> <span class="ruby-identifier">update_tree</span>(<span class="ruby-identifier">data</span>[<span class="ruby-identifier">:marker</span>].<span class="ruby-identifier">value</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span>[<span class="ruby-identifier">:marker</span>]}
105:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000125">
                    
                    <a name="M000125"></a><b>parse_abbrev_definition</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the link definition at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000125_source')" id="l_M000125_source">show</a>
                        
                    </p>
                    <div id="M000125_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/abbreviation.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_abbrev_definition</span>
31:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
32:         <span class="ruby-identifier">abbrev_id</span>, <span class="ruby-identifier">abbrev_text</span> = <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>], <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>]
33:         <span class="ruby-identifier">abbrev_text</span>.<span class="ruby-identifier">strip!</span>
34:         <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Duplicate abbreviation ID '#{abbrev_id}' - overwriting&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@root</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:abbrev_defs</span>][<span class="ruby-identifier">abbrev_id</span>]
35:         <span class="ruby-ivar">@root</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:abbrev_defs</span>][<span class="ruby-identifier">abbrev_id</span>] = <span class="ruby-identifier">abbrev_text</span>
36:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:eob</span>, <span class="ruby-identifier">:abbrev_def</span>)
37:         <span class="ruby-keyword kw">true</span>
38:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000142">
                    
                    <a name="M000142"></a><b>parse_attribute_list</b>(str, opts)
                    
                </div>
                
                <div class="description">
                  <p>
Parse the string <tt>str</tt> and extract all attributes and add all found
attributes to the hash <tt>opts</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000142_source')" id="l_M000142_source">show</a>
                        
                    </p>
                    <div id="M000142_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/extensions.rb, line 31</span>
31:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attribute_list</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">opts</span>)
32:         <span class="ruby-identifier">str</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">ALD_TYPE_ANY</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">sep</span>, <span class="ruby-identifier">val</span>, <span class="ruby-identifier">id_attr</span>, <span class="ruby-identifier">class_attr</span>, <span class="ruby-identifier">ref</span><span class="ruby-operator">|</span>
33:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ref</span>
34:             (<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:refs</span>] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ref</span>
35:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">class_attr</span>
36:             <span class="ruby-identifier">opts</span>[<span class="ruby-constant">IAL_CLASS_ATTR</span>] = (<span class="ruby-identifier">opts</span>[<span class="ruby-constant">IAL_CLASS_ATTR</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{class_attr}&quot;</span>
37:             <span class="ruby-identifier">opts</span>[<span class="ruby-constant">IAL_CLASS_ATTR</span>].<span class="ruby-identifier">lstrip!</span>
38:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">id_attr</span>
39:             <span class="ruby-identifier">opts</span>[<span class="ruby-value str">'id'</span>] = <span class="ruby-identifier">id_attr</span>
40:           <span class="ruby-keyword kw">else</span>
41:             <span class="ruby-identifier">val</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/\\(\}|#{sep})/</span>, <span class="ruby-value str">&quot;\\1&quot;</span>)
42:             <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">val</span>
43:           <span class="ruby-keyword kw">end</span>
44:         <span class="ruby-keyword kw">end</span>
45:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000151">
                    
                    <a name="M000151"></a><b>parse_atx_header</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the Atx header at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000151_source')" id="l_M000151_source">show</a>
                        
                    </p>
                    <div id="M000151_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/header.rb, line 52</span>
52:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_atx_header</span>
53:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">after_block_boundary?</span>
54: 
55:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">ATX_HEADER_MATCH</span>)
56:         <span class="ruby-identifier">level</span>, <span class="ruby-identifier">text</span>, <span class="ruby-identifier">id</span> = <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>], <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>], <span class="ruby-ivar">@src</span>[<span class="ruby-value">3</span>]
57:         <span class="ruby-identifier">text</span>.<span class="ruby-identifier">strip!</span>
58:         <span class="ruby-identifier">el</span> = <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:header</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:level</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">level</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">:raw_text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">text</span>)
59:         <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">el</span>)
60:         <span class="ruby-identifier">el</span>.<span class="ruby-identifier">attr</span>[<span class="ruby-value str">'id'</span>] = <span class="ruby-identifier">id</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>
61:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">el</span>
62:         <span class="ruby-keyword kw">true</span>
63:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000130">
                    
                    <a name="M000130"></a><b>parse_autolink</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the autolink at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show</a>
                        
                    </p>
                    <div id="M000130_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/autolink.rb, line 42</span>
42:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_autolink</span>
43:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
44:         <span class="ruby-identifier">href</span> = (<span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-node">&quot;mailto:#{@src[1]}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>])
45:         <span class="ruby-identifier">el</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:a</span>, <span class="ruby-keyword kw">nil</span>, {<span class="ruby-value str">'href'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">href</span>})
46:         <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^mailto:/</span>, <span class="ruby-value str">''</span>), <span class="ruby-identifier">el</span>)
47:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">el</span>
48:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000131">
                    
                    <a name="M000131"></a><b>parse_blank_line</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the blank line at the current postition.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show</a>
                        
                    </p>
                    <div id="M000131_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/blank_line.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_blank_line</span>
31:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
32:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:blank</span>
33:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span>
34:         <span class="ruby-keyword kw">else</span>
35:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:blank</span>, <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span>)
36:         <span class="ruby-keyword kw">end</span>
37:         <span class="ruby-keyword kw">true</span>
38:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000148">
                    
                    <a name="M000148"></a><b>parse_block_extensions</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse one of the block extensions (ALD, block IAL or generic extension) at
the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show</a>
                        
                    </p>
                    <div id="M000148_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/extensions.rb, line 155</span>
155:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_block_extensions</span>
156:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">ALD_START</span>)
157:           <span class="ruby-identifier">parse_attribute_list</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>], <span class="ruby-ivar">@alds</span>[<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]] <span class="ruby-operator">||=</span> <span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderedHash</span>.<span class="ruby-identifier">new</span>)
158:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:eob</span>, <span class="ruby-identifier">:ald</span>)
159:           <span class="ruby-keyword kw">true</span>
160:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">EXT_BLOCK_START</span>)
161:           <span class="ruby-identifier">parse_extension_start_tag</span>(<span class="ruby-identifier">:block</span>)
162:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">IAL_BLOCK_START</span>)
163:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:blank</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:eob</span>
164:             <span class="ruby-identifier">parse_attribute_list</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>], <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderedHash</span>.<span class="ruby-identifier">new</span>)
165:             <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:eob</span>, <span class="ruby-identifier">:ial</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">IAL_BLOCK_START</span>)
166:           <span class="ruby-keyword kw">else</span>
167:             <span class="ruby-identifier">parse_attribute_list</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>], <span class="ruby-ivar">@block_ial</span> = <span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderedHash</span>.<span class="ruby-identifier">new</span>)
168:           <span class="ruby-keyword kw">end</span>
169:           <span class="ruby-keyword kw">true</span>
170:         <span class="ruby-keyword kw">else</span>
171:           <span class="ruby-keyword kw">false</span>
172:         <span class="ruby-keyword kw">end</span>
173:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000154">
                    
                    <a name="M000154"></a><b>parse_block_html</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the HTML at the current position as block-level HTML.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show</a>
                        
                    </p>
                    <div id="M000154_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/html.rb, line 79</span>
 79:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_block_html</span>
 80:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">HTML_COMMENT_RE</span>)
 81:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:xml_comment</span>, <span class="ruby-identifier">result</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:block</span>)
 82:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TRAILING_WHITESPACE</span>)
 83:           <span class="ruby-keyword kw">true</span>
 84:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">HTML_INSTRUCTION_RE</span>)
 85:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:xml_pi</span>, <span class="ruby-identifier">result</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:block</span>)
 86:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TRAILING_WHITESPACE</span>)
 87:           <span class="ruby-keyword kw">true</span>
 88:         <span class="ruby-keyword kw">else</span>
 89:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-node">/^#{OPT_SPACE}#{HTML_TAG_RE}/</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">HTML_SPAN_ELEMENTS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">downcase</span>)
 90:             <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
 91:             <span class="ruby-identifier">handle_html_start_tag</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">:handle_kramdown_html_tag</span>))
 92:             <span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Html</span><span class="ruby-operator">::</span><span class="ruby-constant">ElementConverter</span>.<span class="ruby-identifier">convert</span>(<span class="ruby-ivar">@root</span>, <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:html_to_native</span>]
 93:             <span class="ruby-keyword kw">true</span>
 94:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-node">/^#{OPT_SPACE}#{HTML_TAG_CLOSE_RE}/</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">HTML_SPAN_ELEMENTS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">downcase</span>)
 95:             <span class="ruby-identifier">name</span> = <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">downcase</span>
 96: 
 97:             <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:html_element</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span>
 98:               <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
 99:               <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:stop_block_parsing</span>, <span class="ruby-identifier">:found</span>
100:             <span class="ruby-keyword kw">else</span>
101:               <span class="ruby-keyword kw">false</span>
102:             <span class="ruby-keyword kw">end</span>
103:           <span class="ruby-keyword kw">else</span>
104:             <span class="ruby-keyword kw">false</span>
105:           <span class="ruby-keyword kw">end</span>
106:         <span class="ruby-keyword kw">end</span>
107:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000165">
                    
                    <a name="M000165"></a><b>parse_block_math</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the math block at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show</a>
                        
                    </p>
                    <div id="M000165_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/math.rb, line 32</span>
32:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_block_math</span>
33:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">after_block_boundary?</span>
34:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
35:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]
36:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-node">/^#{OPT_SPACE}\\/</span>)
37:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
38:         <span class="ruby-keyword kw">end</span>
39:         <span class="ruby-identifier">orig_pos</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>
40:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
41:         <span class="ruby-identifier">data</span> = <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>]
42:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">before_block_boundary?</span>
43:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:math</span>, <span class="ruby-identifier">data</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:block</span>)
44:           <span class="ruby-keyword kw">true</span>
45:         <span class="ruby-keyword kw">else</span>
46:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">orig_pos</span>
47:           <span class="ruby-keyword kw">false</span>
48:         <span class="ruby-keyword kw">end</span>
49:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000134">
                    
                    <a name="M000134"></a><b>parse_blockquote</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the blockquote at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000134_source')" id="l_M000134_source">show</a>
                        
                    </p>
                    <div id="M000134_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/blockquote.rb, line 34</span>
34:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_blockquote</span>
35:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">PARAGRAPH_MATCH</span>)
36:         <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">LAZY_END</span>)
37:           <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">PARAGRAPH_MATCH</span>)
38:         <span class="ruby-keyword kw">end</span>
39:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-constant">BLOCKQUOTE_START</span>, <span class="ruby-value str">''</span>)
40: 
41:         <span class="ruby-identifier">el</span> = <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:blockquote</span>)
42:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">el</span>
43:         <span class="ruby-identifier">parse_blocks</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">result</span>)
44:         <span class="ruby-keyword kw">true</span>
45:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000135">
                    
                    <a name="M000135"></a><b>parse_codeblock</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the indented codeblock at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000135_source')" id="l_M000135_source">show</a>
                        
                    </p>
                    <div id="M000135_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/codeblock.rb, line 36</span>
36:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_codeblock</span>
37:         <span class="ruby-identifier">data</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">CODEBLOCK_MATCH</span>)
38:         <span class="ruby-identifier">data</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\n( {0,3}\S)/</span>, <span class="ruby-value str">' \\1'</span>)
39:         <span class="ruby-identifier">data</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-constant">INDENT</span>, <span class="ruby-value str">''</span>)
40:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:codeblock</span>, <span class="ruby-identifier">data</span>)
41:         <span class="ruby-keyword kw">true</span>
42:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000136">
                    
                    <a name="M000136"></a><b>parse_codeblock_fenced</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the fenced codeblock at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000136_source')" id="l_M000136_source">show</a>
                        
                    </p>
                    <div id="M000136_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/codeblock.rb, line 50</span>
50:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_codeblock_fenced</span>
51:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">FENCED_CODEBLOCK_MATCH</span>)
52:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
53:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:codeblock</span>, <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>])
54:           <span class="ruby-keyword kw">true</span>
55:         <span class="ruby-keyword kw">else</span>
56:           <span class="ruby-keyword kw">false</span>
57:         <span class="ruby-keyword kw">end</span>
58:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000138">
                    
                    <a name="M000138"></a><b>parse_codespan</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the codespan at the current scanner location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000138_source')" id="l_M000138_source">show</a>
                        
                    </p>
                    <div id="M000138_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/codespan.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_codespan</span>
31:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">CODESPAN_DELIMITER</span>)
32:         <span class="ruby-identifier">simple</span> = (<span class="ruby-identifier">result</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>)
33:         <span class="ruby-identifier">reset_pos</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>
34: 
35:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">simple</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pre_match</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s\Z/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-regexp re">/\s/</span>)
36:           <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
37:           <span class="ruby-keyword kw">return</span>
38:         <span class="ruby-keyword kw">end</span>
39: 
40:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan_until</span>(<span class="ruby-node">/#{result}/</span>)
41:           <span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/#{result}\Z/</span>, <span class="ruby-value str">''</span>)
42:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">simple</span>
43:             <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">' '</span>
44:             <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>[<span class="ruby-value">-1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">' '</span>
45:           <span class="ruby-keyword kw">end</span>
46:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:codespan</span>, <span class="ruby-identifier">text</span>)
47:         <span class="ruby-keyword kw">else</span>
48:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">reset_pos</span>
49:           <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
50:         <span class="ruby-keyword kw">end</span>
51:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000164">
                    
                    <a name="M000164"></a><b>parse_definition_list</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the ordered or unordered list at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000164_source')" id="l_M000164_source">show</a>
                        
                    </p>
                    <div id="M000164_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/list.rb, line 148</span>
148:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_definition_list</span>
149:         <span class="ruby-identifier">children</span> = <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>
150:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:p</span> ) <span class="ruby-operator">||</span>
151:             (<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">children</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:p</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">children</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:blank</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">children</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">children</span>[<span class="ruby-value">-2</span>].<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:p</span>))
152:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
153:         <span class="ruby-keyword kw">end</span>
154: 
155:         <span class="ruby-identifier">first_as_para</span> = <span class="ruby-keyword kw">false</span>
156:         <span class="ruby-identifier">deflist</span> = <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:dl</span>)
157:         <span class="ruby-identifier">para</span> = <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">pop</span>
158:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">para</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:blank</span>
159:           <span class="ruby-identifier">para</span> = <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">pop</span>
160:           <span class="ruby-identifier">first_as_para</span> = <span class="ruby-keyword kw">true</span>
161:         <span class="ruby-keyword kw">end</span>
162:         <span class="ruby-identifier">para</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\n/</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">term</span><span class="ruby-operator">|</span>
163:           <span class="ruby-identifier">el</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:dt</span>)
164:           <span class="ruby-identifier">el</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:raw_text</span>, <span class="ruby-identifier">term</span>)
165:           <span class="ruby-identifier">deflist</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">el</span>
166:         <span class="ruby-keyword kw">end</span>
167: 
168:         <span class="ruby-identifier">item</span> = <span class="ruby-keyword kw">nil</span>
169:         <span class="ruby-identifier">content_re</span>, <span class="ruby-identifier">lazy_re</span>, <span class="ruby-identifier">indent_re</span> = <span class="ruby-keyword kw">nil</span>
170:         <span class="ruby-identifier">def_start_re</span> = <span class="ruby-constant">DEFINITION_LIST_START</span>
171:         <span class="ruby-identifier">last_is_blank</span> = <span class="ruby-keyword kw">false</span>
172:         <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">eos?</span>
173:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">def_start_re</span>)
174:             <span class="ruby-identifier">item</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:dd</span>)
175:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:first_as_para</span>] = <span class="ruby-identifier">first_as_para</span>
176:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span>, <span class="ruby-identifier">indentation</span>, <span class="ruby-identifier">content_re</span>, <span class="ruby-identifier">lazy_re</span>, <span class="ruby-identifier">indent_re</span> = <span class="ruby-identifier">parse_first_list_line</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">length</span>, <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>])
177:             <span class="ruby-identifier">deflist</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">item</span>
178: 
179:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">LIST_ITEM_IAL</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">match</span><span class="ruby-operator">|</span>
180:               <span class="ruby-identifier">parse_attribute_list</span>(<span class="ruby-identifier">$1</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>] <span class="ruby-operator">||=</span> {})
181:               <span class="ruby-value str">''</span>
182:             <span class="ruby-keyword kw">end</span>
183: 
184:             <span class="ruby-identifier">def_start_re</span> = <span class="ruby-node">/^( {0,#{[3, indentation - 1].min}}:)([\t| ].*?\n)/</span>
185:             <span class="ruby-identifier">first_as_para</span> = <span class="ruby-keyword kw">false</span>
186:             <span class="ruby-identifier">last_is_blank</span> = <span class="ruby-keyword kw">false</span>
187:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">EOB_MARKER</span>)
188:             <span class="ruby-keyword kw">break</span>
189:           <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">content_re</span>)) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">last_is_blank</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">lazy_re</span>)))
190:             <span class="ruby-identifier">result</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^(\t+)/</span>) { <span class="ruby-value str">&quot; &quot;</span><span class="ruby-operator">*</span>(<span class="ruby-identifier">$1</span> <span class="ruby-operator">?</span> <span class="ruby-value">4</span><span class="ruby-operator">*</span><span class="ruby-identifier">$1</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>) }
191:             <span class="ruby-identifier">result</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-identifier">indent_re</span>, <span class="ruby-value str">''</span>)
192:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">result</span>
193:             <span class="ruby-identifier">first_as_para</span> = <span class="ruby-keyword kw">false</span>
194:             <span class="ruby-identifier">last_is_blank</span> = <span class="ruby-keyword kw">false</span>
195:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">BLANK_LINE</span>)
196:             <span class="ruby-identifier">first_as_para</span> = <span class="ruby-keyword kw">true</span>
197:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">result</span>
198:             <span class="ruby-identifier">last_is_blank</span> = <span class="ruby-keyword kw">true</span>
199:           <span class="ruby-keyword kw">else</span>
200:             <span class="ruby-keyword kw">break</span>
201:           <span class="ruby-keyword kw">end</span>
202:         <span class="ruby-keyword kw">end</span>
203: 
204:         <span class="ruby-identifier">last</span> = <span class="ruby-keyword kw">nil</span>
205:         <span class="ruby-identifier">deflist</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">it</span><span class="ruby-operator">|</span>
206:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:dt</span>
207: 
208:           <span class="ruby-identifier">parse_blocks</span>(<span class="ruby-identifier">it</span>, <span class="ruby-identifier">it</span>.<span class="ruby-identifier">value</span>)
209:           <span class="ruby-identifier">it</span>.<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>
210:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
211: 
212:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:blank</span>
213:             <span class="ruby-identifier">last</span> = <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">pop</span>
214:           <span class="ruby-keyword kw">else</span>
215:             <span class="ruby-identifier">last</span> = <span class="ruby-keyword kw">nil</span>
216:           <span class="ruby-keyword kw">end</span>
217:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:p</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">it</span>.<span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:first_as_para</span>)
218:             <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
219:             <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:transparent</span>] = <span class="ruby-keyword kw">true</span>
220:           <span class="ruby-keyword kw">end</span>
221:         <span class="ruby-keyword kw">end</span>
222: 
223:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:dl</span>
224:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">children</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">deflist</span>.<span class="ruby-identifier">children</span>)
225:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:blank</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">-2</span>].<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:dl</span>
226:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">pop</span>
227:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">children</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">deflist</span>.<span class="ruby-identifier">children</span>)
228:         <span class="ruby-keyword kw">else</span>
229:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">deflist</span>
230:         <span class="ruby-keyword kw">end</span>
231: 
232:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">last</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">last</span>.<span class="ruby-identifier">nil?</span>
233: 
234:         <span class="ruby-keyword kw">true</span>
235:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000139">
                    
                    <a name="M000139"></a><b>parse_emphasis</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the emphasis at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000139_source')" id="l_M000139_source">show</a>
                        
                    </p>
                    <div id="M000139_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/emphasis.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_emphasis</span>
31:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">EMPHASIS_START</span>)
32:         <span class="ruby-identifier">element</span> = (<span class="ruby-identifier">result</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">:strong</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:em</span>)
33:         <span class="ruby-identifier">type</span> = <span class="ruby-identifier">result</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>]
34:         <span class="ruby-identifier">reset_pos</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>
35: 
36:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'_'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pre_match</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[[:alpha:]]\z/</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-regexp re">/[[:alpha:]]/</span>)) <span class="ruby-operator">||</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-regexp re">/\s/</span>) <span class="ruby-operator">||</span>
37:             <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">element</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@stack</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">el</span>, <span class="ruby-identifier">_</span><span class="ruby-operator">|</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">element</span>}
38:           <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
39:           <span class="ruby-keyword kw">return</span>
40:         <span class="ruby-keyword kw">end</span>
41: 
42:         <span class="ruby-identifier">sub_parse</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">delim</span>, <span class="ruby-identifier">elem</span><span class="ruby-operator">|</span>
43:           <span class="ruby-identifier">el</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">elem</span>)
44:           <span class="ruby-identifier">stop_re</span> = <span class="ruby-node">/#{Regexp.escape(delim)}/</span>
45:           <span class="ruby-identifier">found</span> = <span class="ruby-identifier">parse_spans</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">stop_re</span>) <span class="ruby-keyword kw">do</span>
46:             (<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pre_match</span>[<span class="ruby-value">-1</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\s/</span>) <span class="ruby-operator">&amp;&amp;</span>
47:               (<span class="ruby-identifier">elem</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:em</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-node">/#{Regexp.escape(delim*2)}(?!#{Regexp.escape(delim)})/</span>)) <span class="ruby-operator">&amp;&amp;</span>
48:               (<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">'_'</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-node">/#{Regexp.escape(delim)}[[:alpha:]]/</span>)) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
49:           <span class="ruby-keyword kw">end</span>
50:           [<span class="ruby-identifier">found</span>, <span class="ruby-identifier">el</span>, <span class="ruby-identifier">stop_re</span>]
51:         <span class="ruby-keyword kw">end</span>
52: 
53:         <span class="ruby-identifier">found</span>, <span class="ruby-identifier">el</span>, <span class="ruby-identifier">stop_re</span> = <span class="ruby-identifier">sub_parse</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">element</span>)
54:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">found</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">element</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:strong</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:em</span>
55:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">reset_pos</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
56:           <span class="ruby-identifier">found</span>, <span class="ruby-identifier">el</span>, <span class="ruby-identifier">stop_re</span> = <span class="ruby-identifier">sub_parse</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">:em</span>)
57:         <span class="ruby-keyword kw">end</span>
58:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">found</span>
59:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">stop_re</span>)
60:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">el</span>
61:         <span class="ruby-keyword kw">else</span>
62:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">reset_pos</span>
63:           <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
64:         <span class="ruby-keyword kw">end</span>
65:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000140">
                    
                    <a name="M000140"></a><b>parse_eob_marker</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the EOB marker at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000140_source')" id="l_M000140_source">show</a>
                        
                    </p>
                    <div id="M000140_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/eob.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_eob_marker</span>
31:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
32:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:eob</span>)
33:         <span class="ruby-keyword kw">true</span>
34:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000141">
                    
                    <a name="M000141"></a><b>parse_escaped_chars</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the backslash-escaped character at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000141_source')" id="l_M000141_source">show</a>
                        
                    </p>
                    <div id="M000141_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/escaped_chars.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_escaped_chars</span>
31:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
32:         <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>])
33:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000145">
                    
                    <a name="M000145"></a><b>parse_extension_start_tag</b>(type)
                    
                </div>
                
                <div class="description">
                  <p>
Parse the generic extension at the current point. The parameter
<tt>type</tt> can either be :block or :span depending whether we parse a
block or span extension tag.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000145_source')" id="l_M000145_source">show</a>
                        
                    </p>
                    <div id="M000145_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/extensions.rb, line 62</span>
62:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_extension_start_tag</span>(<span class="ruby-identifier">type</span>)
63:         <span class="ruby-identifier">orig_pos</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>
64:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
65: 
66:         <span class="ruby-identifier">error_block</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span>
67:           <span class="ruby-identifier">warning</span>(<span class="ruby-identifier">msg</span>)
68:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">orig_pos</span>
69:           <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">getch</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:span</span>
70:           <span class="ruby-keyword kw">false</span>
71:         <span class="ruby-keyword kw">end</span>
72: 
73:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">4</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'{:/}'</span>
74:           <span class="ruby-identifier">name</span> = (<span class="ruby-ivar">@src</span>[<span class="ruby-value">4</span>] <span class="ruby-operator">?</span> <span class="ruby-node">&quot;for '#{@src[4]}' &quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>)
75:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">error_block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-node">&quot;Invalid extension stop tag #{name}found - ignoring it&quot;</span>)
76:         <span class="ruby-keyword kw">end</span>
77: 
78:         <span class="ruby-identifier">ext</span> = <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]
79:         <span class="ruby-identifier">opts</span> = {}
80:         <span class="ruby-identifier">body</span> = <span class="ruby-keyword kw">nil</span>
81:         <span class="ruby-identifier">parse_attribute_list</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">opts</span>)
82: 
83:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>[<span class="ruby-value">3</span>]
84:           <span class="ruby-identifier">stop_re</span> = (<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:block</span> <span class="ruby-operator">?</span> <span class="ruby-node">/#{EXT_BLOCK_STOP_STR % ext}/</span> <span class="ruby-operator">:</span> <span class="ruby-node">/#{EXT_STOP_STR % ext}/</span>)
85:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan_until</span>(<span class="ruby-identifier">stop_re</span>)
86:             <span class="ruby-identifier">body</span> = <span class="ruby-identifier">result</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-identifier">stop_re</span>, <span class="ruby-value str">''</span>)
87:             <span class="ruby-identifier">body</span>.<span class="ruby-identifier">chomp!</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:block</span>
88:           <span class="ruby-keyword kw">else</span>
89:             <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">error_block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-node">&quot;No stop tag for extension '#{ext}' found - ignoring it&quot;</span>)
90:           <span class="ruby-keyword kw">end</span>
91:         <span class="ruby-keyword kw">end</span>
92: 
93:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">handle_extension</span>(<span class="ruby-identifier">ext</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">body</span>, <span class="ruby-identifier">type</span>)
94:           <span class="ruby-identifier">error_block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-node">&quot;Invalid extension with name '#{ext}' specified - ignoring it&quot;</span>)
95:         <span class="ruby-keyword kw">else</span>
96:           <span class="ruby-keyword kw">true</span>
97:         <span class="ruby-keyword kw">end</span>
98:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000162">
                    
                    <a name="M000162"></a><b>parse_first_list_line</b>(indentation, content)
                    
                </div>
                
                <div class="description">
                  <p>
Used for parsing the first line of a list item or a definition, i.e. the
line with list item marker or the definition marker.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000162_source')" id="l_M000162_source">show</a>
                        
                    </p>
                    <div id="M000162_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/list.rb, line 37</span>
37:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_first_list_line</span>(<span class="ruby-identifier">indentation</span>, <span class="ruby-identifier">content</span>)
38:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">content</span> <span class="ruby-operator">=~</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">LIST_ITEM_IAL_CHECK</span>
39:           <span class="ruby-identifier">indentation</span> = <span class="ruby-value">4</span>
40:         <span class="ruby-keyword kw">else</span>
41:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">content</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^ *\t/</span>
42:             <span class="ruby-identifier">temp</span> = <span class="ruby-identifier">content</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/^ */</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">indentation</span>
43:             <span class="ruby-identifier">content</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^( *)(\t+)/</span>) {<span class="ruby-identifier">$1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span><span class="ruby-operator">*</span>(<span class="ruby-value">4</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">temp</span> <span class="ruby-operator">%</span> <span class="ruby-value">4</span>) <span class="ruby-operator">+</span> (<span class="ruby-identifier">$2</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)<span class="ruby-operator">*</span><span class="ruby-value">4</span>)}
44:           <span class="ruby-keyword kw">end</span>
45:           <span class="ruby-identifier">indentation</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/^ */</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">length</span>
46:         <span class="ruby-keyword kw">end</span>
47:         <span class="ruby-identifier">content</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^\s*/</span>, <span class="ruby-value str">''</span>)
48: 
49:         <span class="ruby-identifier">indent_re</span> = <span class="ruby-node">/^ {#{indentation}}/</span>
50:         <span class="ruby-identifier">content_re</span> = <span class="ruby-node">/^(?:(?:\t| {4}){#{indentation / 4}} {#{indentation % 4}}|(?:\t| {4}){#{indentation / 4 + 1}}).*\S.*\n/</span>
51:         <span class="ruby-identifier">lazy_re</span> = <span class="ruby-node">/(?!^ {0,#{[indentation, 3].min}}(?:#{IAL_BLOCK}|#{LAZY_END_HTML_STOP}|#{LAZY_END_HTML_START})).*\S.*\n/</span>
52:         [<span class="ruby-identifier">content</span>, <span class="ruby-identifier">indentation</span>, <span class="ruby-identifier">content_re</span>, <span class="ruby-identifier">lazy_re</span>, <span class="ruby-identifier">indent_re</span>]
53:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000143">
                    
                    <a name="M000143"></a><b>parse_footnote_definition</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the foot note definition at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000143_source')" id="l_M000143_source">show</a>
                        
                    </p>
                    <div id="M000143_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/footnote.rb, line 34</span>
34:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_footnote_definition</span>
35:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
36: 
37:         <span class="ruby-identifier">el</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:footnote_def</span>)
38:         <span class="ruby-identifier">parse_blocks</span>(<span class="ruby-identifier">el</span>, <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-constant">INDENT</span>, <span class="ruby-value str">''</span>))
39:         <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Duplicate footnote name '#{@src[1]}' - overwriting&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@footnotes</span>[<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]]
40:         (<span class="ruby-ivar">@footnotes</span>[<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]] = {})[<span class="ruby-identifier">:content</span>] = <span class="ruby-identifier">el</span>
41:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:eob</span>, <span class="ruby-identifier">:footnote_def</span>)
42:         <span class="ruby-keyword kw">true</span>
43:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000146">
                    
                    <a name="M000146"></a><b>parse_footnote_marker</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the footnote marker at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show</a>
                        
                    </p>
                    <div id="M000146_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/footnote.rb, line 50</span>
50:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_footnote_marker</span>
51:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
52:         <span class="ruby-identifier">fn_def</span> = <span class="ruby-ivar">@footnotes</span>[<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]]
53:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fn_def</span>
54:           <span class="ruby-identifier">valid</span> = <span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:marker</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:stack</span>][<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>].<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:stack</span>][<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]).<span class="ruby-identifier">all?</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">par</span>, <span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
55:             <span class="ruby-identifier">par</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">child</span>)
56:           <span class="ruby-keyword kw">end</span>
57:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:marker</span>] <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">valid</span>
58:             <span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:marker</span>] = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:footnote</span>, <span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:content</span>], <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>])
59:             <span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:stack</span>] = [<span class="ruby-ivar">@stack</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">first</span>}, <span class="ruby-ivar">@tree</span>, <span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:marker</span>]].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">compact</span>
60:             <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fn_def</span>[<span class="ruby-identifier">:marker</span>]
61:           <span class="ruby-keyword kw">else</span>
62:             <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Footnote marker '#{@src[1]}' already appeared in document, ignoring newly found marker&quot;</span>)
63:             <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span>)
64:           <span class="ruby-keyword kw">end</span>
65:         <span class="ruby-keyword kw">else</span>
66:           <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Footnote definition for '#{@src[1]}' not found&quot;</span>)
67:           <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span>)
68:         <span class="ruby-keyword kw">end</span>
69:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000152">
                    
                    <a name="M000152"></a><b>parse_horizontal_rule</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the horizontal rule at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000152_source')" id="l_M000152_source">show</a>
                        
                    </p>
                    <div id="M000152_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/horizontal_rule.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_horizontal_rule</span>
31:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
32:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:hr</span>)
33:         <span class="ruby-keyword kw">true</span>
34:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000155">
                    
                    <a name="M000155"></a><b>parse_html_entity</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the HTML entity at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show</a>
                        
                    </p>
                    <div id="M000155_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/html_entity.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_html_entity</span>
31:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
32:         <span class="ruby-keyword kw">begin</span>
33:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:entity</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">Entities</span>.<span class="ruby-identifier">entity</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">||</span> (<span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">to_i</span>) <span class="ruby-operator">||</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">3</span>].<span class="ruby-identifier">hex</span>),
34:                                         <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:original</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span>)
35:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-operator">::</span><span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
36:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:entity</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">Entities</span>.<span class="ruby-identifier">entity</span>(<span class="ruby-value str">'amp'</span>))
37:           <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>])
38:         <span class="ruby-keyword kw">end</span>
39:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000166">
                    
                    <a name="M000166"></a><b>parse_inline_math</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the inline math at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000166_source')" id="l_M000166_source">show</a>
                        
                    </p>
                    <div id="M000166_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/math.rb, line 56</span>
56:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_inline_math</span>
57:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
58:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:math</span>, <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>], <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:span</span>)
59:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000157">
                    
                    <a name="M000157"></a><b>parse_line_break</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the line break at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show</a>
                        
                    </p>
                    <div id="M000157_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/line_break.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_line_break</span>
31:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
32:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:br</span>)
33:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000161">
                    
                    <a name="M000161"></a><b>parse_link</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the link at the current scanner position. This method is used to
parse normal links as well as image links.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show</a>
                        
                    </p>
                    <div id="M000161_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/link.rb, line 68</span>
 68:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_link</span>
 69:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">LINK_START</span>)
 70:         <span class="ruby-identifier">reset_pos</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>
 71: 
 72:         <span class="ruby-identifier">link_type</span> = (<span class="ruby-identifier">result</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^!/</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">:img</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:a</span>)
 73: 
 74:         <span class="ruby-comment cmt"># no nested links allowed</span>
 75:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">link_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:a</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:img</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:a</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@stack</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span>,<span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">t</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:img</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:a</span>)})
 76:           <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
 77:           <span class="ruby-keyword kw">return</span>
 78:         <span class="ruby-keyword kw">end</span>
 79:         <span class="ruby-identifier">el</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">link_type</span>)
 80: 
 81:         <span class="ruby-identifier">count</span> = <span class="ruby-value">1</span>
 82:         <span class="ruby-identifier">found</span> = <span class="ruby-identifier">parse_spans</span>(<span class="ruby-identifier">el</span>, <span class="ruby-constant">LINK_BRACKET_STOP_RE</span>) <span class="ruby-keyword kw">do</span>
 83:           <span class="ruby-identifier">count</span> = <span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> (<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">?</span> <span class="ruby-value">-1</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>)
 84:           <span class="ruby-identifier">count</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:img</span>}.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
 85:         <span class="ruby-keyword kw">end</span>
 86:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">found</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">link_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:a</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>)
 87:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">reset_pos</span>
 88:           <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
 89:           <span class="ruby-keyword kw">return</span>
 90:         <span class="ruby-keyword kw">end</span>
 91:         <span class="ruby-identifier">alt_text</span> = <span class="ruby-identifier">extract_string</span>(<span class="ruby-identifier">reset_pos</span><span class="ruby-operator">...</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>, <span class="ruby-ivar">@src</span>)
 92:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">LINK_BRACKET_STOP_RE</span>)
 93: 
 94:         <span class="ruby-comment cmt"># reference style link or no link url</span>
 95:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">LINK_INLINE_ID_RE</span>) <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-regexp re">/\(/</span>)
 96:           <span class="ruby-identifier">link_id</span> = <span class="ruby-identifier">normalize_link_id</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">alt_text</span>)
 97:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@link_defs</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">link_id</span>)
 98:             <span class="ruby-identifier">add_link</span>(<span class="ruby-identifier">el</span>, <span class="ruby-ivar">@link_defs</span>[<span class="ruby-identifier">link_id</span>].<span class="ruby-identifier">first</span>, <span class="ruby-ivar">@link_defs</span>[<span class="ruby-identifier">link_id</span>].<span class="ruby-identifier">last</span>, <span class="ruby-identifier">alt_text</span>)
 99:           <span class="ruby-keyword kw">else</span>
100:             <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;No link definition for link ID '#{link_id}' found&quot;</span>)
101:             <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">reset_pos</span>
102:             <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
103:           <span class="ruby-keyword kw">end</span>
104:           <span class="ruby-keyword kw">return</span>
105:         <span class="ruby-keyword kw">end</span>
106: 
107:         <span class="ruby-comment cmt"># link url in parentheses</span>
108:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\(&lt;(.*?)&gt;/</span>)
109:           <span class="ruby-identifier">link_url</span> = <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]
110:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\)/</span>)
111:             <span class="ruby-identifier">add_link</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">link_url</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">alt_text</span>)
112:             <span class="ruby-keyword kw">return</span>
113:           <span class="ruby-keyword kw">end</span>
114:         <span class="ruby-keyword kw">else</span>
115:           <span class="ruby-identifier">link_url</span> = <span class="ruby-value str">''</span>
116:           <span class="ruby-identifier">nr_of_brackets</span> = <span class="ruby-value">0</span>
117:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">temp</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan_until</span>(<span class="ruby-constant">LINK_PAREN_STOP_RE</span>)
118:             <span class="ruby-identifier">link_url</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">temp</span>
119:             <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>]
120:               <span class="ruby-identifier">nr_of_brackets</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
121:               <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nr_of_brackets</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
122:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]
123:               <span class="ruby-identifier">nr_of_brackets</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
124:             <span class="ruby-keyword kw">else</span>
125:               <span class="ruby-keyword kw">break</span>
126:             <span class="ruby-keyword kw">end</span>
127:           <span class="ruby-keyword kw">end</span>
128:           <span class="ruby-identifier">link_url</span> = <span class="ruby-identifier">link_url</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
129:           <span class="ruby-identifier">link_url</span>.<span class="ruby-identifier">strip!</span>
130: 
131:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nr_of_brackets</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
132:             <span class="ruby-identifier">add_link</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">link_url</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">alt_text</span>)
133:             <span class="ruby-keyword kw">return</span>
134:           <span class="ruby-keyword kw">end</span>
135:         <span class="ruby-keyword kw">end</span>
136: 
137:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">LINK_INLINE_TITLE_RE</span>)
138:           <span class="ruby-identifier">add_link</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">link_url</span>, <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>], <span class="ruby-identifier">alt_text</span>)
139:         <span class="ruby-keyword kw">else</span>
140:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">reset_pos</span>
141:           <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
142:         <span class="ruby-keyword kw">end</span>
143:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000159">
                    
                    <a name="M000159"></a><b>parse_link_definition</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the link definition at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show</a>
                        
                    </p>
                    <div id="M000159_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/link.rb, line 35</span>
35:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_link_definition</span>
36:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
37:         <span class="ruby-identifier">link_id</span>, <span class="ruby-identifier">link_url</span>, <span class="ruby-identifier">link_title</span> = <span class="ruby-identifier">normalize_link_id</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>]), <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@src</span>[<span class="ruby-value">3</span>], <span class="ruby-ivar">@src</span>[<span class="ruby-value">5</span>]
38:         <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Duplicate link ID '#{link_id}' - overwriting&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@link_defs</span>[<span class="ruby-identifier">link_id</span>]
39:         <span class="ruby-ivar">@link_defs</span>[<span class="ruby-identifier">link_id</span>] = [<span class="ruby-identifier">link_url</span>, <span class="ruby-identifier">link_title</span>]
40:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:eob</span>, <span class="ruby-identifier">:link_def</span>)
41:         <span class="ruby-keyword kw">true</span>
42:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000163">
                    
                    <a name="M000163"></a><b>parse_list</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the ordered or unordered list at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000163_source')" id="l_M000163_source">show</a>
                        
                    </p>
                    <div id="M000163_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/list.rb, line 61</span>
 61:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_list</span>
 62:         <span class="ruby-identifier">type</span>, <span class="ruby-identifier">list_start_re</span> = (<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">LIST_START_UL</span>) <span class="ruby-operator">?</span> [<span class="ruby-identifier">:ul</span>, <span class="ruby-constant">LIST_START_UL</span>] <span class="ruby-operator">:</span> [<span class="ruby-identifier">:ol</span>, <span class="ruby-constant">LIST_START_OL</span>])
 63:         <span class="ruby-identifier">list</span> = <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">type</span>)
 64: 
 65:         <span class="ruby-identifier">item</span> = <span class="ruby-keyword kw">nil</span>
 66:         <span class="ruby-identifier">content_re</span>, <span class="ruby-identifier">lazy_re</span>, <span class="ruby-identifier">indent_re</span> = <span class="ruby-keyword kw">nil</span>
 67:         <span class="ruby-identifier">eob_found</span> = <span class="ruby-keyword kw">false</span>
 68:         <span class="ruby-identifier">nested_list_found</span> = <span class="ruby-keyword kw">false</span>
 69:         <span class="ruby-identifier">last_is_blank</span> = <span class="ruby-keyword kw">false</span>
 70:         <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">eos?</span>
 71:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">last_is_blank</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">HR_START</span>)
 72:             <span class="ruby-keyword kw">break</span>
 73:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">EOB_MARKER</span>)
 74:             <span class="ruby-identifier">eob_found</span> = <span class="ruby-keyword kw">true</span>
 75:             <span class="ruby-keyword kw">break</span>
 76:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">list_start_re</span>)
 77:             <span class="ruby-identifier">item</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:li</span>)
 78:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span>, <span class="ruby-identifier">indentation</span>, <span class="ruby-identifier">content_re</span>, <span class="ruby-identifier">lazy_re</span>, <span class="ruby-identifier">indent_re</span> = <span class="ruby-identifier">parse_first_list_line</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">length</span>, <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>])
 79:             <span class="ruby-identifier">list</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">item</span>
 80: 
 81:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">LIST_ITEM_IAL</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">match</span><span class="ruby-operator">|</span>
 82:               <span class="ruby-identifier">parse_attribute_list</span>(<span class="ruby-identifier">$1</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>] <span class="ruby-operator">||=</span> {})
 83:               <span class="ruby-value str">''</span>
 84:             <span class="ruby-keyword kw">end</span>
 85: 
 86:             <span class="ruby-identifier">list_start_re</span> = (<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:ul</span> <span class="ruby-operator">?</span> <span class="ruby-node">/^( {0,#{[3, indentation - 1].min}}[+*-])([\t| ].*?\n)/</span> <span class="ruby-operator">:</span>
 87:                              <span class="ruby-node">/^( {0,#{[3, indentation - 1].min}}\d+\.)([\t| ].*?\n)/</span>)
 88:             <span class="ruby-identifier">nested_list_found</span> = (<span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">LIST_START</span>)
 89:             <span class="ruby-identifier">last_is_blank</span> = <span class="ruby-keyword kw">false</span>
 90:           <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">content_re</span>)) <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">last_is_blank</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">lazy_re</span>)))
 91:             <span class="ruby-identifier">result</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^(\t+)/</span>) { <span class="ruby-value str">&quot; &quot;</span><span class="ruby-operator">*</span>(<span class="ruby-identifier">$1</span> <span class="ruby-operator">?</span> <span class="ruby-value">4</span><span class="ruby-operator">*</span><span class="ruby-identifier">$1</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>) }
 92:             <span class="ruby-identifier">result</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-identifier">indent_re</span>, <span class="ruby-value str">''</span>)
 93:             <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">nested_list_found</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">LIST_START</span>
 94:               <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;^\n&quot;</span>
 95:               <span class="ruby-identifier">nested_list_found</span> = <span class="ruby-keyword kw">true</span>
 96:             <span class="ruby-keyword kw">end</span>
 97:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">result</span>
 98:             <span class="ruby-identifier">last_is_blank</span> = <span class="ruby-keyword kw">false</span>
 99:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">BLANK_LINE</span>)
100:             <span class="ruby-identifier">nested_list_found</span> = <span class="ruby-keyword kw">true</span>
101:             <span class="ruby-identifier">last_is_blank</span> = <span class="ruby-keyword kw">true</span>
102:             <span class="ruby-identifier">item</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">result</span>
103:           <span class="ruby-keyword kw">else</span>
104:             <span class="ruby-keyword kw">break</span>
105:           <span class="ruby-keyword kw">end</span>
106:         <span class="ruby-keyword kw">end</span>
107: 
108:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">list</span>
109: 
110:         <span class="ruby-identifier">last</span> = <span class="ruby-keyword kw">nil</span>
111:         <span class="ruby-identifier">list</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">it</span><span class="ruby-operator">|</span>
112:           <span class="ruby-identifier">temp</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:temp</span>)
113:           <span class="ruby-identifier">parse_blocks</span>(<span class="ruby-identifier">temp</span>, <span class="ruby-identifier">it</span>.<span class="ruby-identifier">value</span>)
114:           <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span> = <span class="ruby-identifier">temp</span>.<span class="ruby-identifier">children</span>
115:           <span class="ruby-identifier">it</span>.<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>
116:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
117: 
118:           <span class="ruby-comment cmt"># Handle the case where an EOB marker is inserted by a block IAL for the first paragraph</span>
119:           <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:p</span> <span class="ruby-operator">&amp;&amp;</span>
120:             <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:eob</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>]
121: 
122:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:p</span> <span class="ruby-operator">&amp;&amp;</span>
123:               (<span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:blank</span> <span class="ruby-operator">||</span>
124:                (<span class="ruby-identifier">it</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eob_found</span>)) <span class="ruby-operator">&amp;&amp;</span>
125:               (<span class="ruby-identifier">list</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">it</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span>
126:                <span class="ruby-identifier">list</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>].<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">cit</span><span class="ruby-operator">|</span> <span class="ruby-identifier">cit</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:p</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cit</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:transparent</span>]})
127:             <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:blank</span>
128:             <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:transparent</span>] = <span class="ruby-keyword kw">true</span>
129:           <span class="ruby-keyword kw">end</span>
130: 
131:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:blank</span>
132:             <span class="ruby-identifier">last</span> = <span class="ruby-identifier">it</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">pop</span>
133:           <span class="ruby-keyword kw">else</span>
134:             <span class="ruby-identifier">last</span> = <span class="ruby-keyword kw">nil</span>
135:           <span class="ruby-keyword kw">end</span>
136:         <span class="ruby-keyword kw">end</span>
137: 
138:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">last</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">last</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eob_found</span>
139: 
140:         <span class="ruby-keyword kw">true</span>
141:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000167">
                    
                    <a name="M000167"></a><b>parse_paragraph</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the paragraph at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000167_source')" id="l_M000167_source">show</a>
                        
                    </p>
                    <div id="M000167_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/paragraph.rb, line 44</span>
44:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_paragraph</span>
45:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">PARAGRAPH_MATCH</span>)
46:         <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">PARAGRAPH_END</span>)
47:           <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">PARAGRAPH_MATCH</span>)
48:         <span class="ruby-keyword kw">end</span>
49:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">chomp!</span>
50:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:p</span>
51:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">result</span>
52:         <span class="ruby-keyword kw">else</span>
53:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:p</span>)
54:           <span class="ruby-identifier">result</span>.<span class="ruby-identifier">lstrip!</span>
55:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@text_type</span>, <span class="ruby-identifier">result</span>)
56:         <span class="ruby-keyword kw">end</span>
57:         <span class="ruby-keyword kw">true</span>
58:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000149">
                    
                    <a name="M000149"></a><b>parse_setext_header</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the Setext header at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000149_source')" id="l_M000149_source">show</a>
                        
                    </p>
                    <div id="M000149_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/header.rb, line 33</span>
33:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_setext_header</span>
34:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">after_block_boundary?</span>
35: 
36:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
37:         <span class="ruby-identifier">text</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">level</span> = <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>], <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>], <span class="ruby-ivar">@src</span>[<span class="ruby-value">3</span>]
38:         <span class="ruby-identifier">text</span>.<span class="ruby-identifier">strip!</span>
39:         <span class="ruby-identifier">el</span> = <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:header</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:level</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">level</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'-'</span> <span class="ruby-operator">?</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>), <span class="ruby-identifier">:raw_text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">text</span>)
40:         <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">el</span>)
41:         <span class="ruby-identifier">el</span>.<span class="ruby-identifier">attr</span>[<span class="ruby-value str">'id'</span>] = <span class="ruby-identifier">id</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>
42:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">el</span>
43:         <span class="ruby-keyword kw">true</span>
44:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000169">
                    
                    <a name="M000169"></a><b>parse_smart_quotes</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the smart quotes at current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000169_source')" id="l_M000169_source">show</a>
                        
                    </p>
                    <div id="M000169_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/smart_quotes.rb, line 199</span>
199:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_smart_quotes</span>
200:         <span class="ruby-identifier">substs</span> = <span class="ruby-constant">SQ_RULES</span>.<span class="ruby-identifier">find</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">reg</span>, <span class="ruby-identifier">subst</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">reg</span>)}[<span class="ruby-value">1</span>]
201:         <span class="ruby-identifier">substs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">subst</span><span class="ruby-operator">|</span>
202:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">subst</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Integer</span>)
203:             <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-identifier">subst</span>])
204:           <span class="ruby-keyword kw">else</span>
205:             <span class="ruby-identifier">val</span> = <span class="ruby-constant">SQ_SUBSTS</span>[[<span class="ruby-identifier">subst</span>, <span class="ruby-ivar">@src</span>[<span class="ruby-identifier">subst</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-value">-1</span>,<span class="ruby-value">1</span>].<span class="ruby-identifier">to_i</span>]]] <span class="ruby-operator">||</span> <span class="ruby-identifier">subst</span>
206:             <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:smart_quote</span>, <span class="ruby-identifier">val</span>)
207:           <span class="ruby-keyword kw">end</span>
208:         <span class="ruby-keyword kw">end</span>
209:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000150">
                    
                    <a name="M000150"></a><b>parse_span_extensions</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the extension span at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000150_source')" id="l_M000150_source">show</a>
                        
                    </p>
                    <div id="M000150_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/extensions.rb, line 182</span>
182:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_span_extensions</span>
183:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">EXT_SPAN_START</span>)
184:           <span class="ruby-identifier">parse_extension_start_tag</span>(<span class="ruby-identifier">:span</span>)
185:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">IAL_SPAN_START</span>)
186:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:text</span>
187:             <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
188:             <span class="ruby-identifier">attr</span> = <span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderedHash</span>.<span class="ruby-identifier">new</span>
189:             <span class="ruby-identifier">parse_attribute_list</span>(<span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">attr</span>)
190:             <span class="ruby-identifier">update_ial_with_ial</span>(<span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderedHash</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">attr</span>)
191:             <span class="ruby-identifier">update_attr_with_ial</span>(<span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">attr</span>, <span class="ruby-identifier">attr</span>)
192:           <span class="ruby-keyword kw">else</span>
193:             <span class="ruby-identifier">warning</span>(<span class="ruby-value str">&quot;Found span IAL after text - ignoring it&quot;</span>)
194:             <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">getch</span>)
195:           <span class="ruby-keyword kw">end</span>
196:         <span class="ruby-keyword kw">else</span>
197:           <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">getch</span>)
198:         <span class="ruby-keyword kw">end</span>
199:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000156">
                    
                    <a name="M000156"></a><b>parse_span_html</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the HTML at the current position as span-level HTML.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000156_source')" id="l_M000156_source">show</a>
                        
                    </p>
                    <div id="M000156_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/html.rb, line 114</span>
114:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_span_html</span>
115:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">HTML_COMMENT_RE</span>)
116:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:xml_comment</span>, <span class="ruby-identifier">result</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:span</span>)
117:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">HTML_INSTRUCTION_RE</span>)
118:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:xml_pi</span>, <span class="ruby-identifier">result</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:span</span>)
119:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">HTML_TAG_CLOSE_RE</span>)
120:           <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Found invalidly used HTML closing tag for '#{@src[1]}'&quot;</span>)
121:           <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
122:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">HTML_TAG_RE</span>)
123:           <span class="ruby-identifier">tag_name</span> = <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">downcase</span>
124:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">HTML_BLOCK_ELEMENTS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">tag_name</span>)
125:             <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Found block HTML tag '#{tag_name}' in span-level text&quot;</span>)
126:             <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
127:             <span class="ruby-keyword kw">return</span>
128:           <span class="ruby-keyword kw">end</span>
129: 
130:           <span class="ruby-identifier">attrs</span> = <span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderedHash</span>.<span class="ruby-identifier">new</span>
131:           <span class="ruby-ivar">@src</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">scan</span>(<span class="ruby-constant">HTML_ATTRIBUTE_RE</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span>,<span class="ruby-identifier">sep</span>,<span class="ruby-identifier">val</span><span class="ruby-operator">|</span> <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">val</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\n+/</span>, <span class="ruby-value str">' '</span>)}
132: 
133:           <span class="ruby-identifier">do_parsing</span> = (<span class="ruby-constant">HTML_CONTENT_MODEL</span>[<span class="ruby-identifier">tag_name</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:raw</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:content_model</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:raw</span> <span class="ruby-operator">?</span> <span class="ruby-keyword kw">false</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:parse_span_html</span>])
134:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span> = <span class="ruby-constant">HTML_MARKDOWN_ATTR_MAP</span>[<span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'markdown'</span>)]
135:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:block</span>
136:               <span class="ruby-identifier">warning</span>(<span class="ruby-value str">&quot;Cannot use block-level parsing in span-level HTML tag - using default mode&quot;</span>)
137:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">val</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:span</span>
138:               <span class="ruby-identifier">do_parsing</span> = <span class="ruby-keyword kw">true</span>
139:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">val</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:default</span>
140:               <span class="ruby-identifier">do_parsing</span> = <span class="ruby-constant">HTML_CONTENT_MODEL</span>[<span class="ruby-identifier">tag_name</span>] <span class="ruby-operator">!=</span> <span class="ruby-identifier">:raw</span>
141:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">val</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:raw</span>
142:               <span class="ruby-identifier">do_parsing</span> = <span class="ruby-keyword kw">false</span>
143:             <span class="ruby-keyword kw">end</span>
144:           <span class="ruby-keyword kw">end</span>
145: 
146:           <span class="ruby-identifier">el</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:html_element</span>, <span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:span</span>, <span class="ruby-identifier">:content_model</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">do_parsing</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">span</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:raw</span>))
147:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">el</span>
148:           <span class="ruby-identifier">stop_re</span> = <span class="ruby-node">/&lt;\/#{Regexp.escape(tag_name)}\s*&gt;/i</span>
149:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>[<span class="ruby-value">4</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">HTML_ELEMENTS_WITHOUT_BODY</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">el</span>.<span class="ruby-identifier">value</span>)
150:             <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;The HTML tag '#{el.value}' cannot have any content - auto-closing it&quot;</span>)
151:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>[<span class="ruby-value">4</span>]
152:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parse_spans</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">stop_re</span>, (<span class="ruby-identifier">do_parsing</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">:span_html</span>]))
153:               <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">stop_re</span>)
154:             <span class="ruby-keyword kw">else</span>
155:               <span class="ruby-identifier">warning</span>(<span class="ruby-node">&quot;Found no end tag for '#{el.value}' - auto-closing it&quot;</span>)
156:               <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">rest</span>, <span class="ruby-identifier">el</span>)
157:               <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">terminate</span>
158:             <span class="ruby-keyword kw">end</span>
159:           <span class="ruby-keyword kw">end</span>
160:           <span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Html</span><span class="ruby-operator">::</span><span class="ruby-constant">ElementConverter</span>.<span class="ruby-identifier">convert</span>(<span class="ruby-ivar">@root</span>, <span class="ruby-identifier">el</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:html_to_native</span>]
161:         <span class="ruby-keyword kw">else</span>
162:           <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">getch</span>)
163:         <span class="ruby-keyword kw">end</span>
164:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000168">
                    
                    <a name="M000168"></a><b>parse_table</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the table at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000168_source')" id="l_M000168_source">show</a>
                        
                    </p>
                    <div id="M000168_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/table.rb, line 38</span>
 38:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_table</span>
 39:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">after_block_boundary?</span>
 40: 
 41:         <span class="ruby-identifier">orig_pos</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span>
 42:         <span class="ruby-identifier">table</span> = <span class="ruby-identifier">new_block_el</span>(<span class="ruby-identifier">:table</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:alignment</span> =<span class="ruby-operator">&gt;</span> [])
 43:         <span class="ruby-identifier">leading_pipe</span> = (<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">TABLE_LINE</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*\|/</span>)
 44:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TABLE_SEP_LINE</span>)
 45: 
 46:         <span class="ruby-identifier">rows</span> = []
 47:         <span class="ruby-identifier">has_footer</span> = <span class="ruby-keyword kw">false</span>
 48:         <span class="ruby-identifier">columns</span> = <span class="ruby-value">0</span>
 49: 
 50:         <span class="ruby-identifier">add_container</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">type</span>, <span class="ruby-identifier">force</span><span class="ruby-operator">|</span>
 51:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">has_footer</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:tbody</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">force</span>
 52:             <span class="ruby-identifier">cont</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">type</span>)
 53:             <span class="ruby-identifier">cont</span>.<span class="ruby-identifier">children</span>, <span class="ruby-identifier">rows</span> = <span class="ruby-identifier">rows</span>, []
 54:             <span class="ruby-identifier">table</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cont</span>
 55:           <span class="ruby-keyword kw">end</span>
 56:         <span class="ruby-keyword kw">end</span>
 57: 
 58:         <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">eos?</span>
 59:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-constant">TABLE_LINE</span>)
 60:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TABLE_SEP_LINE</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rows</span>.<span class="ruby-identifier">empty?</span>
 61:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">table</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:alignment</span>].<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">has_footer</span>
 62:               <span class="ruby-identifier">add_container</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">:thead</span>, <span class="ruby-keyword kw">false</span>)
 63:               <span class="ruby-identifier">table</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:alignment</span>] = <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TABLE_HSEP_ALIGN</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">left</span>, <span class="ruby-identifier">right</span><span class="ruby-operator">|</span>
 64:                 (<span class="ruby-identifier">left</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">right</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">:default</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">right</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">:left</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">left</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">:right</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">:center</span>
 65:               <span class="ruby-keyword kw">end</span>
 66:             <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># treat as normal separator line</span>
 67:               <span class="ruby-identifier">add_container</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">:tbody</span>, <span class="ruby-keyword kw">false</span>)
 68:             <span class="ruby-keyword kw">end</span>
 69:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TABLE_FSEP_LINE</span>)
 70:             <span class="ruby-identifier">add_container</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">:tbody</span>, <span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rows</span>.<span class="ruby-identifier">empty?</span>
 71:             <span class="ruby-identifier">has_footer</span> = <span class="ruby-keyword kw">true</span>
 72:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">TABLE_ROW_LINE</span>)
 73:             <span class="ruby-identifier">trow</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:tr</span>)
 74: 
 75:             <span class="ruby-comment cmt"># parse possible code spans on the line and correctly split the line into cells</span>
 76:             <span class="ruby-identifier">env</span> = <span class="ruby-identifier">save_env</span>
 77:             <span class="ruby-identifier">cells</span> = []
 78:             <span class="ruby-ivar">@src</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/(&lt;code.*?&gt;.*?&lt;\/code&gt;)/</span>).<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">str</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
 79:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
 80:                 (<span class="ruby-identifier">cells</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-identifier">cells</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">last</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
 81:               <span class="ruby-keyword kw">else</span>
 82:                 <span class="ruby-identifier">reset_env</span>(<span class="ruby-identifier">:src</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">StringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>))
 83:                 <span class="ruby-identifier">root</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:root</span>)
 84:                 <span class="ruby-identifier">parse_spans</span>(<span class="ruby-identifier">root</span>, <span class="ruby-keyword kw">nil</span>, [<span class="ruby-identifier">:codespan</span>])
 85: 
 86:                 <span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
 87:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:raw_text</span>
 88:                     <span class="ruby-comment cmt"># Only on Ruby 1.9: f, *l = c.value.split(/(?&lt;!\\)\|/).map {|t| t.gsub(/\\\|/, '|')}</span>
 89:                     <span class="ruby-identifier">f</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">l</span> = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\\\|/</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\|/</span>, <span class="ruby-value">-1</span>)}.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
 90:                       <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;|#{t.shift}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
 91:                       <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">t</span>)
 92:                     <span class="ruby-keyword kw">end</span>
 93:                     (<span class="ruby-identifier">cells</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-identifier">cells</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">last</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>
 94:                     <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">l</span>)
 95:                   <span class="ruby-keyword kw">else</span>
 96:                     <span class="ruby-identifier">delim</span> = (<span class="ruby-identifier">c</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/`+/</span>).<span class="ruby-identifier">max</span> <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'`'</span>
 97:                     <span class="ruby-identifier">tmp</span> = <span class="ruby-node">&quot;#{delim}#{' ' if delim.size &gt; 1}#{c.value}#{' ' if delim.size &gt; 1}#{delim}&quot;</span>
 98:                     (<span class="ruby-identifier">cells</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-identifier">cells</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">last</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tmp</span>
 99:                   <span class="ruby-keyword kw">end</span>
100:                 <span class="ruby-keyword kw">end</span>
101:               <span class="ruby-keyword kw">end</span>
102:             <span class="ruby-keyword kw">end</span>
103:             <span class="ruby-identifier">restore_env</span>(<span class="ruby-identifier">env</span>)
104: 
105:             <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">shift</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">leading_pipe</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
106:             <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">pop</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
107:             <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cell_text</span><span class="ruby-operator">|</span>
108:               <span class="ruby-identifier">tcell</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:td</span>)
109:               <span class="ruby-identifier">tcell</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:raw_text</span>, <span class="ruby-identifier">cell_text</span>.<span class="ruby-identifier">strip</span>)
110:               <span class="ruby-identifier">trow</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tcell</span>
111:             <span class="ruby-keyword kw">end</span>
112:             <span class="ruby-identifier">columns</span> = [<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">length</span>].<span class="ruby-identifier">max</span>
113:             <span class="ruby-identifier">rows</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">trow</span>
114:           <span class="ruby-keyword kw">else</span>
115:             <span class="ruby-keyword kw">break</span>
116:           <span class="ruby-keyword kw">end</span>
117:         <span class="ruby-keyword kw">end</span>
118: 
119:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">before_block_boundary?</span>
120:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">orig_pos</span>
121:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
122:         <span class="ruby-keyword kw">end</span>
123: 
124:         <span class="ruby-comment cmt"># Parse all lines of the table with the code span parser</span>
125:         <span class="ruby-identifier">env</span> = <span class="ruby-identifier">save_env</span>
126:         <span class="ruby-identifier">reset_env</span>(<span class="ruby-identifier">:src</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">StringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">extract_string</span>(<span class="ruby-identifier">orig_pos</span><span class="ruby-operator">...</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>), <span class="ruby-ivar">@src</span>)))
127:         <span class="ruby-identifier">root</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:root</span>)
128:         <span class="ruby-identifier">parse_spans</span>(<span class="ruby-identifier">root</span>, <span class="ruby-keyword kw">nil</span>, [<span class="ruby-identifier">:codespan</span>])
129:         <span class="ruby-identifier">restore_env</span>(<span class="ruby-identifier">env</span>)
130: 
131:         <span class="ruby-comment cmt"># Check if each line has at least one unescaped backslash that is not inside a code span</span>
132:         <span class="ruby-identifier">pipe_on_line</span> = <span class="ruby-keyword kw">false</span>
133:         <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">c</span> = <span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">shift</span>)
134:           <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\n/</span>)
135:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:codespan</span>
136:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">pipe_on_line</span>)
137:               <span class="ruby-keyword kw">break</span>
138:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">pipe_on_line</span>
139:               <span class="ruby-identifier">pipe_on_line</span> = <span class="ruby-keyword kw">false</span>
140:             <span class="ruby-keyword kw">end</span>
141:           <span class="ruby-keyword kw">else</span>
142:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">pipe_on_line</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">!~</span> <span class="ruby-node">/^#{TABLE_PIPE_CHECK}/</span>
143:             <span class="ruby-identifier">pipe_on_line</span> = (<span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-keyword kw">false</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">pipe_on_line</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">lines</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/^#{TABLE_PIPE_CHECK}/</span>)
144:           <span class="ruby-keyword kw">end</span>
145:         <span class="ruby-keyword kw">end</span>
146:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">orig_pos</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">pipe_on_line</span>
147: 
148:         <span class="ruby-identifier">add_container</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">has_footer</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">tfoot</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:tbody</span>, <span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">rows</span>.<span class="ruby-identifier">empty?</span>
149: 
150:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">table</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">el</span><span class="ruby-operator">|</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:tbody</span>}
151:           <span class="ruby-identifier">warning</span>(<span class="ruby-value str">&quot;Found table without body - ignoring it&quot;</span>)
152:           <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">orig_pos</span>
153:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
154:         <span class="ruby-keyword kw">end</span>
155: 
156:         <span class="ruby-comment cmt"># adjust all table rows to have equal number of columns, same for alignment defs</span>
157:         <span class="ruby-identifier">table</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">kind</span><span class="ruby-operator">|</span>
158:           <span class="ruby-identifier">kind</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
159:             (<span class="ruby-identifier">columns</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">row</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>).<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
160:               <span class="ruby-identifier">row</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:td</span>)
161:             <span class="ruby-keyword kw">end</span>
162:           <span class="ruby-keyword kw">end</span>
163:         <span class="ruby-keyword kw">end</span>
164:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">table</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:alignment</span>].<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">columns</span>
165:           <span class="ruby-identifier">table</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:alignment</span>] = <span class="ruby-identifier">table</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:alignment</span>][<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">columns</span>]
166:         <span class="ruby-keyword kw">else</span>
167:           <span class="ruby-identifier">table</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:alignment</span>] <span class="ruby-operator">+=</span> [<span class="ruby-identifier">:default</span>] <span class="ruby-operator">*</span> (<span class="ruby-identifier">columns</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">table</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:alignment</span>].<span class="ruby-identifier">length</span>)
168:         <span class="ruby-keyword kw">end</span>
169: 
170:         <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">table</span>
171: 
172:         <span class="ruby-keyword kw">true</span>
173:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000170">
                    
                    <a name="M000170"></a><b>parse_typographic_syms</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the typographic symbols at the current location.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show</a>
                        
                    </p>
                    <div id="M000170_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/typographic_symbol.rb, line 35</span>
35:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_typographic_syms</span>
36:         <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched_size</span>
37:         <span class="ruby-identifier">val</span> = <span class="ruby-constant">TYPOGRAPHIC_SYMS_SUBST</span>[<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span>]
38:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Symbol</span>)
39:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:typographic_sym</span>, <span class="ruby-identifier">val</span>)
40:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">matched</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'\\&lt;&lt;'</span>
41:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:entity</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">Entities</span>.<span class="ruby-identifier">entity</span>(<span class="ruby-value str">'lt'</span>))
42:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:entity</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">Entities</span>.<span class="ruby-identifier">entity</span>(<span class="ruby-value str">'lt'</span>))
43:         <span class="ruby-keyword kw">else</span>
44:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:entity</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">Entities</span>.<span class="ruby-identifier">entity</span>(<span class="ruby-value str">'gt'</span>))
45:           <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:entity</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">Entities</span>.<span class="ruby-identifier">entity</span>(<span class="ruby-value str">'gt'</span>))
46:         <span class="ruby-keyword kw">end</span>
47:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000126">
                    
                    <a name="M000126"></a><b>replace_abbreviations</b>(el, regexps = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Replace the abbreviation text with elements.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000126_source')" id="l_M000126_source">show</a>
                        
                    </p>
                    <div id="M000126_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/abbreviation.rb, line 42</span>
42:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">replace_abbreviations</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">regexps</span> = <span class="ruby-keyword kw">nil</span>)
43:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@root</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:abbrev_defs</span>].<span class="ruby-identifier">empty?</span>
44:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">regexps</span>
45:           <span class="ruby-identifier">regexps</span> = [<span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">union</span>(<span class="ruby-operator">*</span><span class="ruby-ivar">@root</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:abbrev_defs</span>].<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-node">/#{Regexp.escape(k)}/</span>})]
46:           <span class="ruby-identifier">regexps</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">/(?=(?:\W|^)#{regexps.first}(?!\w))/</span> <span class="ruby-comment cmt"># regexp should only match on word boundaries</span>
47:         <span class="ruby-keyword kw">end</span>
48:         <span class="ruby-identifier">el</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
49:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:text</span>
50:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">regexps</span>.<span class="ruby-identifier">first</span>
51:               <span class="ruby-identifier">result</span> = []
52:               <span class="ruby-identifier">strscan</span> = <span class="ruby-constant">StringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">child</span>.<span class="ruby-identifier">value</span>)
53:               <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">temp</span> = <span class="ruby-identifier">strscan</span>.<span class="ruby-identifier">scan_until</span>(<span class="ruby-identifier">regexps</span>.<span class="ruby-identifier">last</span>)
54:                 <span class="ruby-identifier">temp</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">strscan</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\W|^/</span>)
55:                 <span class="ruby-identifier">abbr</span> = <span class="ruby-identifier">strscan</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">regexps</span>.<span class="ruby-identifier">first</span>)
56:                 <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:text</span>, <span class="ruby-identifier">temp</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:abbreviation</span>, <span class="ruby-identifier">abbr</span>)
57:               <span class="ruby-keyword kw">end</span>
58:               <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:text</span>, <span class="ruby-identifier">strscan</span>.<span class="ruby-identifier">rest</span>)
59:             <span class="ruby-keyword kw">else</span>
60:               <span class="ruby-identifier">child</span>
61:             <span class="ruby-keyword kw">end</span>
62:           <span class="ruby-keyword kw">else</span>
63:             <span class="ruby-identifier">replace_abbreviations</span>(<span class="ruby-identifier">child</span>, <span class="ruby-identifier">regexps</span>)
64:             <span class="ruby-identifier">child</span>
65:           <span class="ruby-keyword kw">end</span>
66:         <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">flatten!</span>
67:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000144">
                    
                    <a name="M000144"></a><b>update_ial_with_ial</b>(ial, opts)
                    
                </div>
                
                <div class="description">
                  <p>
Update the <tt>ial</tt> with the information from the inline attribute list
<tt>opts</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000144_source')" id="l_M000144_source">show</a>
                        
                    </p>
                    <div id="M000144_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown/extensions.rb, line 48</span>
48:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_ial_with_ial</span>(<span class="ruby-identifier">ial</span>, <span class="ruby-identifier">opts</span>)
49:         (<span class="ruby-identifier">ial</span>[<span class="ruby-identifier">:refs</span>] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:refs</span>]
50:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
51:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-constant">IAL_CLASS_ATTR</span>
52:             <span class="ruby-identifier">ial</span>[<span class="ruby-identifier">k</span>] = (<span class="ruby-identifier">ial</span>[<span class="ruby-identifier">k</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{v}&quot;</span>
53:             <span class="ruby-identifier">ial</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">lstrip!</span>
54:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
55:             <span class="ruby-identifier">ial</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>
56:           <span class="ruby-keyword kw">end</span>
57:         <span class="ruby-keyword kw">end</span>
58:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M000174">
                    
                    <a name="M000174"></a><b>configure_parser</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Adapt the object to allow parsing like specified in the options.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000174_source')" id="l_M000174_source">show</a>
                        
                    </p>
                    <div id="M000174_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 112</span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">configure_parser</span>
113:         <span class="ruby-ivar">@parsers</span> = {}
114:         (<span class="ruby-ivar">@block_parsers</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@span_parsers</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
115:           <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">has_parser?</span>(<span class="ruby-identifier">name</span>)
116:             <span class="ruby-ivar">@parsers</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">parser</span>(<span class="ruby-identifier">name</span>)
117:           <span class="ruby-keyword kw">else</span>
118:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">Kramdown</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Unknown parser: #{name}&quot;</span>
119:           <span class="ruby-keyword kw">end</span>
120:         <span class="ruby-keyword kw">end</span>
121:         <span class="ruby-ivar">@span_start</span>, <span class="ruby-ivar">@span_start_re</span> = <span class="ruby-identifier">span_parser_regexps</span>
122:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000183">
                    
                    <a name="M000183"></a><b>new_block_el</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Create a new block-level element, taking care of applying a preceding block
IAL if it exists. This method should always be used for creating a
block-level element!
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000183_source')" id="l_M000183_source">show</a>
                        
                    </p>
                    <div id="M000183_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 270</span>
270:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_block_el</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
271:         <span class="ruby-identifier">el</span> = <span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
272:         <span class="ruby-identifier">el</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>] = <span class="ruby-ivar">@block_ial</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@block_ial</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:blank</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">el</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:eob</span>
273:         <span class="ruby-identifier">el</span>
274:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000176">
                    
                    <a name="M000176"></a><b>parse_blocks</b>(el, text = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Parse all block-level elements in <tt>text</tt> into the element
<tt>el</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000176_source')" id="l_M000176_source">show</a>
                        
                    </p>
                    <div id="M000176_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 131</span>
131:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_blocks</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">text</span> = <span class="ruby-keyword kw">nil</span>)
132:         <span class="ruby-ivar">@stack</span>.<span class="ruby-identifier">push</span>([<span class="ruby-ivar">@tree</span>, <span class="ruby-ivar">@src</span>, <span class="ruby-ivar">@block_ial</span>])
133:         <span class="ruby-ivar">@tree</span>, <span class="ruby-ivar">@src</span>, <span class="ruby-ivar">@block_ial</span> = <span class="ruby-identifier">el</span>, (<span class="ruby-identifier">text</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-ivar">@src</span> <span class="ruby-operator">:</span> <span class="ruby-constant">StringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>)), <span class="ruby-keyword kw">nil</span>
134: 
135:         <span class="ruby-identifier">status</span> = <span class="ruby-identifier">catch</span>(<span class="ruby-identifier">:stop_block_parsing</span>) <span class="ruby-keyword kw">do</span>
136:           <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">eos?</span>
137:             <span class="ruby-identifier">block_ial_set</span> = <span class="ruby-ivar">@block_ial</span>
138:             <span class="ruby-ivar">@block_parsers</span>.<span class="ruby-identifier">any?</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
139:               <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-ivar">@parsers</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">start_re</span>)
140:                 <span class="ruby-identifier">send</span>(<span class="ruby-ivar">@parsers</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">method</span>)
141:               <span class="ruby-keyword kw">else</span>
142:                 <span class="ruby-keyword kw">false</span>
143:               <span class="ruby-keyword kw">end</span>
144:             <span class="ruby-keyword kw">end</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">begin</span>
145:               <span class="ruby-identifier">warning</span>(<span class="ruby-value str">'Warning: this should not occur - no block parser handled the line'</span>)
146:               <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/.*\n/</span>))
147:             <span class="ruby-keyword kw">end</span>
148:             <span class="ruby-ivar">@block_ial</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_ial_set</span>
149:           <span class="ruby-keyword kw">end</span>
150:         <span class="ruby-keyword kw">end</span>
151: 
152:         <span class="ruby-ivar">@tree</span>, <span class="ruby-ivar">@src</span>, <span class="ruby-ivar">@block_ial</span> = <span class="ruby-operator">*</span><span class="ruby-ivar">@stack</span>.<span class="ruby-identifier">pop</span>
153:         <span class="ruby-identifier">status</span>
154:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000178">
                    
                    <a name="M000178"></a><b>parse_spans</b>(el, stop_re = nil, parsers = nil, text_type = @text_type)
                    
                </div>
                
                <div class="description">
                  <p>
Parse all span-level elements in the source string of @src into
<tt>el</tt>.
</p>
<p>
If the parameter <tt>stop_re</tt> (a regexp) is used, parsing is
immediately stopped if the regexp matches and if no block is given or if a
block is given and it returns <tt>true</tt>.
</p>
<p>
The parameter <tt>parsers</tt> can be used to specify the (span-level)
parsing methods that should be used for parsing.
</p>
<p>
The parameter <tt>text_type</tt> specifies the type which should be used
for created text nodes.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000178_source')" id="l_M000178_source">show</a>
                        
                    </p>
                    <div id="M000178_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 194</span>
194:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_spans</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">stop_re</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">parsers</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">text_type</span> = <span class="ruby-ivar">@text_type</span>)
195:         <span class="ruby-ivar">@stack</span>.<span class="ruby-identifier">push</span>([<span class="ruby-ivar">@tree</span>, <span class="ruby-ivar">@text_type</span>]) <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@tree</span>.<span class="ruby-identifier">nil?</span>
196:         <span class="ruby-ivar">@tree</span>, <span class="ruby-ivar">@text_type</span> = <span class="ruby-identifier">el</span>, <span class="ruby-identifier">text_type</span>
197: 
198:         <span class="ruby-identifier">span_start</span> = <span class="ruby-ivar">@span_start</span>
199:         <span class="ruby-identifier">span_start_re</span> = <span class="ruby-ivar">@span_start_re</span>
200:         <span class="ruby-identifier">span_start</span>, <span class="ruby-identifier">span_start_re</span> = <span class="ruby-identifier">span_parser_regexps</span>(<span class="ruby-identifier">parsers</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsers</span>
201:         <span class="ruby-identifier">parsers</span> = <span class="ruby-identifier">parsers</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@span_parsers</span>
202: 
203:         <span class="ruby-identifier">used_re</span> = (<span class="ruby-identifier">stop_re</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-identifier">span_start_re</span> <span class="ruby-operator">:</span> <span class="ruby-node">/(?=#{Regexp.union(stop_re, span_start)})/</span>)
204:         <span class="ruby-identifier">stop_re_found</span> = <span class="ruby-keyword kw">false</span>
205:         <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@src</span>.<span class="ruby-identifier">eos?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">stop_re_found</span>
206:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">scan_until</span>(<span class="ruby-identifier">used_re</span>)
207:             <span class="ruby-identifier">add_text</span>(<span class="ruby-identifier">result</span>)
208:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">stop_re</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-identifier">stop_re</span>)
209:               <span class="ruby-identifier">stop_re_found</span> = (<span class="ruby-identifier">block_given?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">yield</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">true</span>)
210:             <span class="ruby-keyword kw">end</span>
211:             <span class="ruby-identifier">processed</span> = <span class="ruby-identifier">parsers</span>.<span class="ruby-identifier">any?</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
212:               <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">check</span>(<span class="ruby-ivar">@parsers</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">start_re</span>)
213:                 <span class="ruby-identifier">send</span>(<span class="ruby-ivar">@parsers</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">method</span>)
214:                 <span class="ruby-keyword kw">true</span>
215:               <span class="ruby-keyword kw">else</span>
216:                 <span class="ruby-keyword kw">false</span>
217:               <span class="ruby-keyword kw">end</span>
218:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">stop_re_found</span>
219:             <span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">getch</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">processed</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">stop_re_found</span>
220:           <span class="ruby-keyword kw">else</span>
221:             (<span class="ruby-identifier">add_text</span>(<span class="ruby-ivar">@src</span>.<span class="ruby-identifier">rest</span>); <span class="ruby-ivar">@src</span>.<span class="ruby-identifier">terminate</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">stop_re</span>
222:             <span class="ruby-keyword kw">break</span>
223:           <span class="ruby-keyword kw">end</span>
224:         <span class="ruby-keyword kw">end</span>
225: 
226:         <span class="ruby-ivar">@tree</span>, <span class="ruby-ivar">@text_type</span> = <span class="ruby-ivar">@stack</span>.<span class="ruby-identifier">pop</span>
227: 
228:         <span class="ruby-identifier">stop_re_found</span>
229:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000179">
                    
                    <a name="M000179"></a><b>reset_env</b>(opts = {})
                    
                </div>
                
                <div class="description">
                  <p>
Reset the current parsing environment. The parameter <tt>env</tt> can be
used to set initial values for one or more environment variables.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000179_source')" id="l_M000179_source">show</a>
                        
                    </p>
                    <div id="M000179_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 233</span>
233:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_env</span>(<span class="ruby-identifier">opts</span> = {})
234:         <span class="ruby-identifier">opts</span> = {<span class="ruby-identifier">:text_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:raw_text</span>, <span class="ruby-identifier">:stack</span> =<span class="ruby-operator">&gt;</span> []}.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)
235:         <span class="ruby-ivar">@src</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:src</span>]
236:         <span class="ruby-ivar">@tree</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:tree</span>]
237:         <span class="ruby-ivar">@block_ial</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:block_ial</span>]
238:         <span class="ruby-ivar">@stack</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:stack</span>]
239:         <span class="ruby-ivar">@text_type</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:text_type</span>]
240:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000181">
                    
                    <a name="M000181"></a><b>restore_env</b>(env)
                    
                </div>
                
                <div class="description">
                  <p>
Restore the current parsing environment.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000181_source')" id="l_M000181_source">show</a>
                        
                    </p>
                    <div id="M000181_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 248</span>
248:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">restore_env</span>(<span class="ruby-identifier">env</span>)
249:         <span class="ruby-ivar">@src</span>, <span class="ruby-ivar">@tree</span>, <span class="ruby-ivar">@block_ial</span>, <span class="ruby-ivar">@stack</span>,  <span class="ruby-ivar">@text_type</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">env</span>
250:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000180">
                    
                    <a name="M000180"></a><b>save_env</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return the current parsing environment.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000180_source')" id="l_M000180_source">show</a>
                        
                    </p>
                    <div id="M000180_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 243</span>
243:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save_env</span>
244:         [<span class="ruby-ivar">@src</span>, <span class="ruby-ivar">@tree</span>, <span class="ruby-ivar">@block_ial</span>, <span class="ruby-ivar">@stack</span>,  <span class="ruby-ivar">@text_type</span>]
245:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000175">
                    
                    <a name="M000175"></a><b>span_parser_regexps</b>(parsers = @span_parsers)
                    
                </div>
                
                <div class="description">
                  <p>
Create the needed span parser regexps.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000175_source')" id="l_M000175_source">show</a>
                        
                    </p>
                    <div id="M000175_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 125</span>
125:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">span_parser_regexps</span>(<span class="ruby-identifier">parsers</span> = <span class="ruby-ivar">@span_parsers</span>)
126:         <span class="ruby-identifier">span_start</span> = <span class="ruby-node">/#{parsers.map {|name| @parsers[name].span_start}.join('|')}/</span>
127:         [<span class="ruby-identifier">span_start</span>, <span class="ruby-node">/(?=#{span_start})/</span>]
128:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000182">
                    
                    <a name="M000182"></a><b>update_attr_with_ial</b>(attr, ial)
                    
                </div>
                
                <div class="description">
                  <p>
Update the given attributes hash <tt>attr</tt> with the information from
the inline attribute list <tt>ial</tt> and all referenced ALDs.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000182_source')" id="l_M000182_source">show</a>
                        
                    </p>
                    <div id="M000182_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 254</span>
254:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attr_with_ial</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-identifier">ial</span>)
255:         <span class="ruby-identifier">ial</span>[<span class="ruby-identifier">:refs</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ref</span><span class="ruby-operator">|</span>
256:           <span class="ruby-identifier">update_attr_with_ial</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-identifier">ref</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ref</span> = <span class="ruby-ivar">@alds</span>[<span class="ruby-identifier">ref</span>]
257:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ial</span>[<span class="ruby-identifier">:refs</span>]
258:         <span class="ruby-identifier">ial</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
259:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-constant">IAL_CLASS_ATTR</span>
260:             <span class="ruby-identifier">attr</span>[<span class="ruby-identifier">k</span>] = (<span class="ruby-identifier">attr</span>[<span class="ruby-identifier">k</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{v}&quot;</span>
261:             <span class="ruby-identifier">attr</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">lstrip!</span>
262:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
263:             <span class="ruby-identifier">attr</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>
264:           <span class="ruby-keyword kw">end</span>
265:         <span class="ruby-keyword kw">end</span>
266:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000177">
                    
                    <a name="M000177"></a><b>update_tree</b>(element)
                    
                </div>
                
                <div class="description">
                  <p>
Update the tree by parsing all :<tt>raw_text</tt> elements with the
span-level parser (resets the environment) and by updating the attributes
from the IALs.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000177_source')" id="l_M000177_source">show</a>
                        
                    </p>
                    <div id="M000177_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/kramdown/parser/kramdown.rb, line 158</span>
158:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_tree</span>(<span class="ruby-identifier">element</span>)
159:         <span class="ruby-identifier">last_blank</span> = <span class="ruby-keyword kw">nil</span>
160:         <span class="ruby-identifier">element</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
161:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:raw_text</span>
162:             <span class="ruby-identifier">last_blank</span> = <span class="ruby-keyword kw">nil</span>
163:             <span class="ruby-identifier">reset_env</span>(<span class="ruby-identifier">:src</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">StringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">child</span>.<span class="ruby-identifier">value</span>), <span class="ruby-identifier">:text_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:text</span>)
164:             <span class="ruby-identifier">parse_spans</span>(<span class="ruby-identifier">child</span>)
165:             <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>
166:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:eob</span>
167:             []
168:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:blank</span>
169:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">last_blank</span>
170:               <span class="ruby-identifier">last_blank</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">value</span>
171:               []
172:             <span class="ruby-keyword kw">else</span>
173:               <span class="ruby-identifier">last_blank</span> = <span class="ruby-identifier">child</span>
174:               <span class="ruby-identifier">child</span>
175:             <span class="ruby-keyword kw">end</span>
176:           <span class="ruby-keyword kw">else</span>
177:             <span class="ruby-identifier">last_blank</span> = <span class="ruby-keyword kw">nil</span>
178:             <span class="ruby-identifier">update_tree</span>(<span class="ruby-identifier">child</span>)
179:             <span class="ruby-identifier">update_attr_with_ial</span>(<span class="ruby-identifier">child</span>.<span class="ruby-identifier">attr</span>, <span class="ruby-identifier">child</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>]) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:ial</span>]
180:             <span class="ruby-identifier">child</span>
181:           <span class="ruby-keyword kw">end</span>
182:         <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">flatten!</span>
183:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    