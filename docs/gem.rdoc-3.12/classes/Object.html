<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Object</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Object 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000852">encode_fallback</a>,</li>
                
                <li><a href="#M000853">expand_tabs</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000858">flush_left</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000862">markup</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000863">normalize_comment</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000864">parse</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000708">rdoc/ri/formatter</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000865">snippet</a>,</li>
                
                <li><a href="#M000866">strip_hashes</a>,</li>
                
                <li><a href="#M000867">strip_newlines</a>,</li>
                
                <li><a href="#M000868">strip_stars</a>,</li>
                
                <li><a href="#M000850">strscan</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000870">to_html</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000878">wrap</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000852">
                    
                    <a name="M000852"></a><b>encode_fallback</b>(character, encoding, fallback)
                    
                </div>
                
                <div class="description">
                  <p>
Transcodes <tt>character</tt> to <tt>encoding</tt> with a <tt>fallback</tt>
character.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000852_source')" id="l_M000852_source">show</a>
                        
                    </p>
                    <div id="M000852_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 58</span>
58:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">encode_fallback</span> <span class="ruby-identifier">character</span>, <span class="ruby-identifier">encoding</span>, <span class="ruby-identifier">fallback</span>
59:     <span class="ruby-identifier">character</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">encoding</span>, <span class="ruby-identifier">:fallback</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">fallback</span> },
60:                      <span class="ruby-identifier">:undef</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replace</span>, <span class="ruby-identifier">:replace</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">fallback</span>)
61:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000853">
                    
                    <a name="M000853"></a><b>expand_tabs</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Expands tab characters in <tt>text</tt> to eight spaces
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000853_source')" id="l_M000853_source">show</a>
                        
                    </p>
                    <div id="M000853_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 66</span>
66:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expand_tabs</span> <span class="ruby-identifier">text</span>
67:     <span class="ruby-identifier">expanded</span> = []
68: 
69:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
70:       <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^(.{8}*?)([^\t\r\n]{0,7})\t/</span>) <span class="ruby-keyword kw">do</span>
71:         <span class="ruby-identifier">r</span> = <span class="ruby-node">&quot;#{$1}#{$2}#{' ' * (8 - $2.size)}&quot;</span>
72:         <span class="ruby-identifier">r</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span>
73:         <span class="ruby-identifier">r</span>
74:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\t/</span>
75: 
76:       <span class="ruby-identifier">expanded</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
77:     <span class="ruby-keyword kw">end</span>
78: 
79:     <span class="ruby-identifier">expanded</span>.<span class="ruby-identifier">join</span>
80:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000858">
                    
                    <a name="M000858"></a><b>flush_left</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Flush <tt>text</tt> left based on the shortest line
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000858_source')" id="l_M000858_source">show</a>
                        
                    </p>
                    <div id="M000858_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 85</span>
85:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">flush_left</span> <span class="ruby-identifier">text</span>
86:     <span class="ruby-identifier">indent</span> = <span class="ruby-value">9999</span>
87: 
88:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
89:       <span class="ruby-identifier">line_indent</span> = <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\S/</span> <span class="ruby-operator">||</span> <span class="ruby-value">9999</span>
90:       <span class="ruby-identifier">indent</span> = <span class="ruby-identifier">line_indent</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">indent</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">line_indent</span>
91:     <span class="ruby-keyword kw">end</span>
92: 
93:     <span class="ruby-identifier">empty</span> = <span class="ruby-value str">''</span>
94:     <span class="ruby-identifier">empty</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span>
95: 
96:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/^ {0,#{indent}}/</span>, <span class="ruby-identifier">empty</span>)
97:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000862">
                    
                    <a name="M000862"></a><b>markup</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Convert a string in markup format into HTML.
</p>
<p>
Requires the including class to implement formatter
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000862_source')" id="l_M000862_source">show</a>
                        
                    </p>
                    <div id="M000862_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 104</span>
104:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">markup</span> <span class="ruby-identifier">text</span>
105:     <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">text</span>).<span class="ruby-identifier">accept</span> <span class="ruby-identifier">formatter</span>
106:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000863">
                    
                    <a name="M000863"></a><b>normalize_comment</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Strips hashes, expands tabs then flushes <tt>text</tt> to the left
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000863_source')" id="l_M000863_source">show</a>
                        
                    </p>
                    <div id="M000863_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalize_comment</span> <span class="ruby-identifier">text</span>
112:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">empty?</span>
113: 
114:     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">strip_stars</span>    <span class="ruby-identifier">text</span>
115:     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">strip_hashes</span>   <span class="ruby-identifier">text</span>
116:     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">expand_tabs</span>    <span class="ruby-identifier">text</span>
117:     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">flush_left</span>     <span class="ruby-identifier">text</span>
118:     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">strip_newlines</span> <span class="ruby-identifier">text</span>
119:     <span class="ruby-identifier">text</span>
120:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000864">
                    
                    <a name="M000864"></a><b>parse</b>(text, format = 'rdoc')
                    
                </div>
                
                <div class="description">
                  <p>
Normalizes <tt>text</tt> then builds a <a
href="RDoc/Markup/Document.html">RDoc::Markup::Document</a> from it
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000864_source')" id="l_M000864_source">show</a>
                        
                    </p>
                    <div id="M000864_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 125</span>
125:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse</span> <span class="ruby-identifier">text</span>, <span class="ruby-identifier">format</span> = <span class="ruby-value str">'rdoc'</span>
126:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Markup</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">text</span>
127:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">parse</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">text</span>
128: 
129:     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">normalize_comment</span> <span class="ruby-identifier">text</span> <span class="ruby-comment cmt"># TODO remove, should not be necessary</span>
130: 
131:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Markup</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A\n*\z/</span>
132: 
133:     <span class="ruby-constant">MARKUP_FORMAT</span>[<span class="ruby-identifier">format</span>].<span class="ruby-identifier">parse</span> <span class="ruby-identifier">text</span>
134:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000708">
                    
                    <a name="M000708"></a><b>rdoc/ri/formatter</b>
                    
                </div>
                
                <div class="description">
                  <p>
For RubyGems backwards compatibility
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000708_source')" id="l_M000708_source">show</a>
                        
                    </p>
                    <div id="M000708_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rdoc/ri/driver.rb, line 19</span>
19: <span class="ruby-identifier">require</span> <span class="ruby-value str">'rdoc/ri/formatter'</span>
</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000865">
                    
                    <a name="M000865"></a><b>snippet</b>(text, limit = 100)
                    
                </div>
                
                <div class="description">
                  <p>
The first <tt>limit</tt> characters of <tt>text</tt> as HTML
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000865_source')" id="l_M000865_source">show</a>
                        
                    </p>
                    <div id="M000865_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">snippet</span> <span class="ruby-identifier">text</span>, <span class="ruby-identifier">limit</span> = <span class="ruby-value">100</span>
140:     <span class="ruby-identifier">document</span> = <span class="ruby-identifier">parse</span> <span class="ruby-identifier">text</span>
141: 
142:     <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Markup</span><span class="ruby-operator">::</span><span class="ruby-constant">ToHtmlSnippet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">limit</span>).<span class="ruby-identifier">convert</span> <span class="ruby-identifier">document</span>
143:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000866">
                    
                    <a name="M000866"></a><b>strip_hashes</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Strips leading # characters from <tt>text</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000866_source')" id="l_M000866_source">show</a>
                        
                    </p>
                    <div id="M000866_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 148</span>
148:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strip_hashes</span> <span class="ruby-identifier">text</span>
149:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^(?&gt;\s*)[^\#]/</span>
150: 
151:     <span class="ruby-identifier">empty</span> = <span class="ruby-value str">''</span>
152:     <span class="ruby-identifier">empty</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span>
153: 
154:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^\s*(#+)/</span>) { <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">tr</span> <span class="ruby-value str">'#'</span>, <span class="ruby-value str">' '</span> }.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^\s+$/</span>, <span class="ruby-identifier">empty</span>)
155:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000867">
                    
                    <a name="M000867"></a><b>strip_newlines</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Strips leading and trailing n characters from <tt>text</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000867_source')" id="l_M000867_source">show</a>
                        
                    </p>
                    <div id="M000867_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 160</span>
160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strip_newlines</span> <span class="ruby-identifier">text</span>
161:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\A\n*(.*?)\n*\z/</span><span class="ruby-identifier">m</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">end</span> <span class="ruby-comment cmt"># block preserves String encoding</span>
162:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000868">
                    
                    <a name="M000868"></a><b>strip_stars</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Strips /* */ style comments
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000868_source')" id="l_M000868_source">show</a>
                        
                    </p>
                    <div id="M000868_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 167</span>
167:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strip_stars</span> <span class="ruby-identifier">text</span>
168:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">%r%/\*.*\*/%</span><span class="ruby-identifier">m</span>
169: 
170:     <span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span>
171: 
172:     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span> <span class="ruby-regexp re">%r%Document-method:\s+[\w:.#=!?]+%</span>, <span class="ruby-value str">''</span>
173: 
174:     <span class="ruby-identifier">space</span> = <span class="ruby-value str">' '</span>
175:     <span class="ruby-identifier">space</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">encoding</span>
176: 
177:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>  <span class="ruby-regexp re">%r%/\*+%</span>       <span class="ruby-keyword kw">do</span> <span class="ruby-identifier">space</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">$&amp;</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword kw">end</span>
178:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>  <span class="ruby-regexp re">%r%\*+/%</span>       <span class="ruby-keyword kw">do</span> <span class="ruby-identifier">space</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">$&amp;</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword kw">end</span>
179:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub!</span> <span class="ruby-regexp re">%r%^[ \t]*\*%</span><span class="ruby-identifier">m</span> <span class="ruby-keyword kw">do</span> <span class="ruby-identifier">space</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">$&amp;</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword kw">end</span>
180: 
181:     <span class="ruby-identifier">empty</span> = <span class="ruby-value str">''</span>
182:     <span class="ruby-identifier">empty</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">encoding</span>
183:     <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^\s+$/</span>, <span class="ruby-identifier">empty</span>)
184:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000850">
                    
                    <a name="M000850"></a><b>strscan</b>
                    
                </div>
                
                <div class="description">
                  <p>
For RDoc::Text#to_html
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000850_source')" id="l_M000850_source">show</a>
                        
                    </p>
                    <div id="M000850_source" class="dyn-source">
                        <pre>   <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 6</span>
6: <span class="ruby-identifier">require</span> <span class="ruby-value str">'strscan'</span>
</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000870">
                    
                    <a name="M000870"></a><b>to_html</b>(text)
                    
                </div>
                
                <div class="description">
                  <p>
Converts ampersand, dashes, ellipsis, quotes, copyright and registered
trademark symbols in <tt>text</tt> to properly encoded characters.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000870_source')" id="l_M000870_source">show</a>
                        
                    </p>
                    <div id="M000870_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 190</span>
190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_html</span> <span class="ruby-identifier">text</span>
191:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span> <span class="ruby-keyword kw">then</span>
192:       <span class="ruby-identifier">html</span> = <span class="ruby-value str">''</span>.<span class="ruby-identifier">encode</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">encoding</span>
193: 
194:       <span class="ruby-identifier">encoded</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-constant">TO_HTML_CHARACTERS</span>[<span class="ruby-identifier">text</span>.<span class="ruby-identifier">encoding</span>]
195:     <span class="ruby-keyword kw">else</span>
196:       <span class="ruby-identifier">html</span> = <span class="ruby-value str">''</span>
197:       <span class="ruby-identifier">encoded</span> = {
198:         <span class="ruby-identifier">:close_dquote</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'”'</span>,
199:         <span class="ruby-identifier">:close_squote</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'’'</span>,
200:         <span class="ruby-identifier">:copyright</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'©'</span>,
201:         <span class="ruby-identifier">:ellipsis</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'…'</span>,
202:         <span class="ruby-identifier">:em_dash</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'—'</span>,
203:         <span class="ruby-identifier">:en_dash</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'–'</span>,
204:         <span class="ruby-identifier">:open_dquote</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'“'</span>,
205:         <span class="ruby-identifier">:open_squote</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'‘'</span>,
206:         <span class="ruby-identifier">:trademark</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'®'</span>,
207:       }
208:     <span class="ruby-keyword kw">end</span>
209: 
210:     <span class="ruby-identifier">s</span> = <span class="ruby-constant">StringScanner</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">text</span>
211:     <span class="ruby-identifier">insquotes</span> = <span class="ruby-keyword kw">false</span>
212:     <span class="ruby-identifier">indquotes</span> = <span class="ruby-keyword kw">false</span>
213:     <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
214: 
215:     <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">eos?</span> <span class="ruby-keyword kw">do</span>
216:       <span class="ruby-keyword kw">case</span>
217:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/&lt;(tt|code)&gt;.*?&lt;\/\1&gt;/</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># skip contents of tt</span>
218:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">matched</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'\\\\'</span>, <span class="ruby-value str">'\\'</span>)
219:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/&lt;(tt|code)&gt;.*?/</span>) <span class="ruby-keyword kw">then</span>
220:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;mismatched &lt;#{s[1]}&gt; tag&quot;</span> <span class="ruby-comment cmt"># TODO signal file/line</span>
221:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">matched</span>
222:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/&lt;[^&gt;]+\/?s*&gt;/</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># skip HTML tags</span>
223:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">matched</span>
224:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\\(\S)/</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># unhandled suppressed crossref</span>
225:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>[<span class="ruby-value">1</span>]
226:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
227:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\.\.\.(\.?)/</span>) <span class="ruby-keyword kw">then</span>
228:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:ellipsis</span>]
229:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
230:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\(c\)/</span>) <span class="ruby-keyword kw">then</span>
231:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:copyright</span>]
232:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
233:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\(r\)/</span>) <span class="ruby-keyword kw">then</span>
234:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:trademark</span>]
235:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
236:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/---/</span>) <span class="ruby-keyword kw">then</span>
237:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:em_dash</span>]
238:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
239:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/--/</span>) <span class="ruby-keyword kw">then</span>
240:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:en_dash</span>]
241:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
242:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/&amp;quot;|&quot;/</span>) <span class="ruby-keyword kw">then</span>
243:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">indquotes</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">close_dquote</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:open_dquote</span>]
244:         <span class="ruby-identifier">indquotes</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">indquotes</span>
245:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
246:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/``/</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># backtick double quote</span>
247:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:open_dquote</span>]
248:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
249:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/''/</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># tick double quote</span>
250:         <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:close_dquote</span>]
251:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
252:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/'/</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># single quote</span>
253:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">insquotes</span>
254:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:close_squote</span>]
255:           <span class="ruby-identifier">insquotes</span> = <span class="ruby-keyword kw">false</span>
256:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">after_word</span>
257:           <span class="ruby-comment cmt"># Mary's dog, my parents' house: do not start paired quotes</span>
258:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:close_squote</span>]
259:         <span class="ruby-keyword kw">else</span>
260:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encoded</span>[<span class="ruby-identifier">:open_squote</span>]
261:           <span class="ruby-identifier">insquotes</span> = <span class="ruby-keyword kw">true</span>
262:         <span class="ruby-keyword kw">end</span>
263: 
264:         <span class="ruby-identifier">after_word</span> = <span class="ruby-keyword kw">nil</span>
265:       <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># advance to the next potentially significant character</span>
266:         <span class="ruby-identifier">match</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/.+?(?=[&lt;\\.(&quot;'`&amp;-])/</span>) <span class="ruby-comment cmt">#&quot;</span>
267: 
268:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">then</span>
269:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">match</span>
270:           <span class="ruby-identifier">after_word</span> = <span class="ruby-identifier">match</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\w$/</span>
271:         <span class="ruby-keyword kw">else</span>
272:           <span class="ruby-identifier">html</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">rest</span>
273:           <span class="ruby-keyword kw">break</span>
274:         <span class="ruby-keyword kw">end</span>
275:       <span class="ruby-keyword kw">end</span>
276:     <span class="ruby-keyword kw">end</span>
277: 
278:     <span class="ruby-identifier">html</span>
279:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000878">
                    
                    <a name="M000878"></a><b>wrap</b>(txt, line_len = 76)
                    
                </div>
                
                <div class="description">
                  <p>
Wraps <tt>txt</tt> to <tt>line_len</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000878_source')" id="l_M000878_source">show</a>
                        
                    </p>
                    <div id="M000878_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/text.rb, line 284</span>
284:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">txt</span>, <span class="ruby-identifier">line_len</span> = <span class="ruby-value">76</span>)
285:     <span class="ruby-identifier">res</span> = []
286:     <span class="ruby-identifier">sp</span> = <span class="ruby-value">0</span>
287:     <span class="ruby-identifier">ep</span> = <span class="ruby-identifier">txt</span>.<span class="ruby-identifier">length</span>
288: 
289:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">sp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">ep</span>
290:       <span class="ruby-comment cmt"># scan back for a space</span>
291:       <span class="ruby-identifier">p</span> = <span class="ruby-identifier">sp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line_len</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
292:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">ep</span>
293:         <span class="ruby-identifier">p</span> = <span class="ruby-identifier">ep</span>
294:       <span class="ruby-keyword kw">else</span>
295:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">sp</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">txt</span>[<span class="ruby-identifier">p</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?\s</span>
296:           <span class="ruby-identifier">p</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
297:         <span class="ruby-keyword kw">end</span>
298:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">sp</span>
299:           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">sp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line_len</span>
300:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">ep</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">txt</span>[<span class="ruby-identifier">p</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?\s</span>
301:             <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
302:           <span class="ruby-keyword kw">end</span>
303:         <span class="ruby-keyword kw">end</span>
304:       <span class="ruby-keyword kw">end</span>
305:       <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">txt</span>[<span class="ruby-identifier">sp</span><span class="ruby-operator">...</span><span class="ruby-identifier">p</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
306:       <span class="ruby-identifier">sp</span> = <span class="ruby-identifier">p</span>
307:       <span class="ruby-identifier">sp</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">sp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">ep</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">txt</span>[<span class="ruby-identifier">sp</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?\s</span>
308:     <span class="ruby-keyword kw">end</span>
309: 
310:     <span class="ruby-identifier">res</span>.<span class="ruby-identifier">join</span>.<span class="ruby-identifier">strip</span>
311:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    