<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RDoc::Parser::Ruby</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            RDoc::Parser::Ruby 
            
                <span class="parent">&lt; 
                    
                    <a href="../Parser.html">RDoc::Parser</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/rdoc/parser/ruby_rb.html">lib/rdoc/parser/ruby.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Extracts code elements from a source file returning a <a
href="../TopLevel.html">TopLevel</a> object containing the constituent file
elements.
</p>
<p>
This file is based on rtags
</p>
<p>
RubyParser understands how to document:
</p>
<ul>
<li>classes

</li>
<li>modules

</li>
<li>methods

</li>
<li>constants

</li>
<li>aliases

</li>
<li>private, public, protected

</li>
<li>private_class_function, public_class_function

</li>
<li>module_function

</li>
<li>attr, attr_reader, attr_writer, attr_accessor

</li>
<li>extra accessors given on the command line

</li>
<li>metaprogrammed methods

</li>
<li>require

</li>
<li>include

</li>
</ul>
<h2>Method Arguments</h2>
<p>
The parser extracts the arguments from the method definition. You can
override this with a custom argument definition using the :call-seq:
directive:
</p>
<pre>
  ##
  # This method can be called with a range or an offset and length
  #
  # :call-seq:
  #   my_method(Range)
  #   my_method(offset, length)

  def my_method(*args)
  end
</pre>
<p>
The parser extracts <tt>yield</tt> expressions from method bodies to gather
the yielded argument names. If your method manually calls a block instead
of yielding or you want to override the discovered argument names use the
:yields: directive:
</p>
<pre>
  ##
  # My method is awesome

  def my_method(&amp;block) # :yields: happy, times
    block.call 1, 2
  end
</pre>
<h2>Metaprogrammed Methods</h2>
<p>
To pick up a metaprogrammed method, the parser looks for a comment starting
with &#8217;##&#8217; before an identifier:
</p>
<pre>
  ##
  # This is a meta-programmed method!

  add_my_method :meta_method, :arg1, :arg2
</pre>
<p>
The parser looks at the token after the identifier to determine the name,
in this example, :meta_method. If a name cannot be found, a warning is
printed and &#8216;unknown is used.
</p>
<p>
You can force the name of a method using the :method: directive:
</p>
<pre>
  ##
  # :method: woo_hoo!
</pre>
<p>
By default, meta-methods are instance methods. To indicate that a method is
a singleton method instead use the :singleton-method: directive:
</p>
<pre>
  ##
  # :singleton-method:
</pre>
<p>
You can also use the :singleton-method: directive with a name:
</p>
<pre>
  ##
  # :singleton-method: woo_hoo!
</pre>
<p>
Additionally you can mark a method as an attribute by using :attr:,
:attr_reader:, :attr_writer: or :attr_accessor:. Just like for :method:,
the name is optional.
</p>
<pre>
  ##
  # :attr_reader: my_attr_name
</pre>
<h2>Hidden methods and attributes</h2>
<p>
You can provide documentation for methods that don&#8217;t appear using the
:method:, :singleton-method: and :attr: directives:
</p>
<pre>
  ##
  # :attr_writer: ghost_writer
  # There is an attribute here, but you can't see it!

  ##
  # :method: ghost_method
  # There is a method here, but you can't see it!

  ##
  # this is a comment for a regular method

  def regular_method() end
</pre>
<p>
Note that by default, the :method: directive will be ignored if there is a
standard rdocable item following it.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000621">collect_first_comment</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000622">error</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000623">get_bool</a>,</li>
                
                <li><a href="#M000624">get_class_or_module</a>,</li>
                
                <li><a href="#M000627">get_class_specification</a>,</li>
                
                <li><a href="#M000630">get_constant</a>,</li>
                
                <li><a href="#M000631">get_constant_with_optional_parens</a>,</li>
                
                <li><a href="#M000632">get_symbol_or_name</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000633">look_for_directives_in</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000634">make_message</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000619">new</a>,</li>
                
                <li><a href="#M000635">new_comment</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000638">parse_alias</a>,</li>
                
                <li><a href="#M000636">parse_attr</a>,</li>
                
                <li><a href="#M000637">parse_attr_accessor</a>,</li>
                
                <li><a href="#M000639">parse_call_parameters</a>,</li>
                
                <li><a href="#M000640">parse_class</a>,</li>
                
                <li><a href="#M000651">parse_comment</a>,</li>
                
                <li><a href="#M000652">parse_comment_tomdoc</a>,</li>
                
                <li><a href="#M000644">parse_constant</a>,</li>
                
                <li><a href="#M000653">parse_include</a>,</li>
                
                <li><a href="#M000654">parse_meta_attr</a>,</li>
                
                <li><a href="#M000655">parse_meta_method</a>,</li>
                
                <li><a href="#M000656">parse_method</a>,</li>
                
                <li><a href="#M000662">parse_method_or_yield_parameters</a>,</li>
                
                <li><a href="#M000663">parse_method_parameters</a>,</li>
                
                <li><a href="#M000664">parse_module</a>,</li>
                
                <li><a href="#M000665">parse_require</a>,</li>
                
                <li><a href="#M000666">parse_statements</a>,</li>
                
                <li><a href="#M000668">parse_symbol_arg</a>,</li>
                
                <li><a href="#M000669">parse_symbol_in_arg</a>,</li>
                
                <li><a href="#M000670">parse_top_level_statements</a>,</li>
                
                <li><a href="#M000671">parse_visibility</a>,</li>
                
                <li><a href="#M000674">parse_yield</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000679">read_directive</a>,</li>
                
                <li><a href="#M000680">read_documentation_modifiers</a>,</li>
                
                <li><a href="#M000683">remove_private_comments</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000684">scan</a>,</li>
                
                <li><a href="#M000690">skip_for_variable</a>,</li>
                
                <li><a href="#M000691">skip_method</a>,</li>
                
                <li><a href="#M000688">skip_optional_do_after_expression</a>,</li>
                
                <li><a href="#M000694">skip_tkspace_comment</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000695">warn</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../Generator/Markup.html">RDoc::Generator::Markup</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="../Generator/Markup.html">RDoc::Generator::Markup</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="../Generator/Markup.html">RDoc::Generator::Markup</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">NORMAL</td>
            <td>=</td>
            <td class="attr-value">&quot;::&quot;</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="../NormalClass.html">RDoc::NormalClass</a> type
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SINGLE</td>
            <td>=</td>
            <td class="attr-value">&quot;&lt;&lt;&quot;</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="../SingleClass.html">RDoc::SingleClass</a> type
</p>
</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000619">
                    
                    <a name="M000619"></a><b>new</b>(top_level, file_name, content, options, stats)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Ruby.html">Ruby</a> parser.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000619_source')" id="l_M000619_source">show</a>
                        
                    </p>
                    <div id="M000619_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 159</span>
159:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">top_level</span>, <span class="ruby-identifier">file_name</span>, <span class="ruby-identifier">content</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">stats</span>)
160:     <span class="ruby-keyword kw">super</span>
161: 
162:     <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>
163:     <span class="ruby-ivar">@token_listeners</span> = <span class="ruby-keyword kw">nil</span>
164:     <span class="ruby-ivar">@scanner</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">content</span>, <span class="ruby-ivar">@options</span>
165:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">exception_on_syntax_error</span> = <span class="ruby-keyword kw">false</span>
166:     <span class="ruby-ivar">@prev_seek</span> = <span class="ruby-keyword kw">nil</span>
167:     <span class="ruby-ivar">@markup</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">markup</span>
168: 
169:     <span class="ruby-ivar">@encoding</span> = <span class="ruby-keyword kw">nil</span>
170:     <span class="ruby-ivar">@encoding</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span>
171: 
172:     <span class="ruby-identifier">reset</span>
173:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000621">
                    
                    <a name="M000621"></a><b>collect_first_comment</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Look for the first comment in a file that isn&#8217;t a shebang line.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000621_source')" id="l_M000621_source">show</a>
                        
                    </p>
                    <div id="M000621_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 178</span>
178:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collect_first_comment</span>
179:     <span class="ruby-identifier">skip_tkspace</span>
180:     <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>
181:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@encoding</span>
182:     <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">true</span>
183: 
184:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
185: 
186:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
187:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">first_line</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A#!/</span> <span class="ruby-keyword kw">then</span>
188:         <span class="ruby-identifier">skip_tkspace</span>
189:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
190:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">first_line</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A#\s*-\*-/</span> <span class="ruby-keyword kw">then</span>
191:         <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">false</span>
192:         <span class="ruby-identifier">skip_tkspace</span>
193:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
194:       <span class="ruby-keyword kw">else</span>
195:         <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">false</span>
196:         <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
197:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
198: 
199:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkNL</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
200:           <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
201:           <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
202:         <span class="ruby-keyword kw">end</span>
203:       <span class="ruby-keyword kw">end</span>
204:     <span class="ruby-keyword kw">end</span>
205: 
206:     <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
207: 
208:     <span class="ruby-identifier">new_comment</span> <span class="ruby-identifier">comment</span>
209:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000622">
                    
                    <a name="M000622"></a><b>error</b>(msg)
                    
                </div>
                
                <div class="description">
                  <p>
Aborts with <tt>msg</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000622_source')" id="l_M000622_source">show</a>
                        
                    </p>
                    <div id="M000622_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 214</span>
214:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">error</span>(<span class="ruby-identifier">msg</span>)
215:     <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">msg</span>
216: 
217:     <span class="ruby-identifier">abort</span> <span class="ruby-identifier">msg</span>
218:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000623">
                    
                    <a name="M000623"></a><b>get_bool</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Looks for a true or false token. Returns false if TkFALSE or TkNIL are
found.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000623_source')" id="l_M000623_source">show</a>
                        
                    </p>
                    <div id="M000623_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 224</span>
224:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_bool</span>
225:     <span class="ruby-identifier">skip_tkspace</span>
226:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
227:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
228:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkTRUE</span>
229:       <span class="ruby-keyword kw">true</span>
230:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkFALSE</span>, <span class="ruby-constant">TkNIL</span>
231:       <span class="ruby-keyword kw">false</span>
232:     <span class="ruby-keyword kw">else</span>
233:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
234:       <span class="ruby-keyword kw">true</span>
235:     <span class="ruby-keyword kw">end</span>
236:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000624">
                    
                    <a name="M000624"></a><b>get_class_or_module</b>(container)
                    
                </div>
                
                <div class="description">
                  <table>
<tr><td valign="top">Look for the name of a class of module (optionally with a leading :</td><td>or

</td></tr>
<tr><td valign="top">with :</td><td>separated named) and return the ultimate name, the associated

</td></tr>
</table>
<p>
container, and the given name (with the ::).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000624_source')" id="l_M000624_source">show</a>
                        
                    </p>
                    <div id="M000624_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 243</span>
243:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_class_or_module</span>(<span class="ruby-identifier">container</span>)
244:     <span class="ruby-identifier">skip_tkspace</span>
245:     <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
246:     <span class="ruby-identifier">given_name</span> = <span class="ruby-value str">''</span>
247: 
248:     <span class="ruby-comment cmt"># class ::A -&gt; A is in the top level</span>
249:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
250:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOLON2</span>, <span class="ruby-constant">TkCOLON3</span> <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># bug</span>
251:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
252:       <span class="ruby-identifier">container</span> = <span class="ruby-ivar">@top_level</span>
253:       <span class="ruby-identifier">given_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'::'</span>
254:     <span class="ruby-keyword kw">end</span>
255: 
256:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
257:     <span class="ruby-identifier">given_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
258: 
259:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">do</span>
260:       <span class="ruby-identifier">prev_container</span> = <span class="ruby-identifier">container</span>
261:       <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
262:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">then</span>
263:         <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
264:       <span class="ruby-keyword kw">end</span>
265:       <span class="ruby-identifier">get_tk</span>
266:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
267:       <span class="ruby-identifier">given_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'::'</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
268:     <span class="ruby-keyword kw">end</span>
269:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
270:     <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>, <span class="ruby-identifier">given_name</span>]
271:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000627">
                    
                    <a name="M000627"></a><b>get_class_specification</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return a superclass, which can be either a constant of an expression
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000627_source')" id="l_M000627_source">show</a>
                        
                    </p>
                    <div id="M000627_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 276</span>
276:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_class_specification</span>
277:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
278:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;self&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkSELF</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
279: 
280:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
281:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON3</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
282:       <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
283:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
284:     <span class="ruby-keyword kw">end</span>
285: 
286:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
287:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
288: 
289:     <span class="ruby-identifier">get_tkread</span> <span class="ruby-comment cmt"># empty out read buffer</span>
290: 
291:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
292: 
293:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
294:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>, <span class="ruby-constant">TkCOMMENT</span>, <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
295:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
296:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
297:     <span class="ruby-keyword kw">end</span>
298: 
299:     <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">parse_call_parameters</span>(<span class="ruby-identifier">tk</span>)
300:     <span class="ruby-identifier">res</span>
301:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000630">
                    
                    <a name="M000630"></a><b>get_constant</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse a constant, which might be qualified by one or more class or module
names
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000630_source')" id="l_M000630_source">show</a>
                        
                    </p>
                    <div id="M000630_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 307</span>
307:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_constant</span>
308:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
309:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
310:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
311: 
312:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON3</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
313:       <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
314:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
315:     <span class="ruby-keyword kw">end</span>
316: 
317: <span class="ruby-comment cmt">#      if res.empty?</span>
318: <span class="ruby-comment cmt">#        warn(&quot;Unexpected token #{tk} in constant&quot;)</span>
319: <span class="ruby-comment cmt">#      end</span>
320:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
321:     <span class="ruby-identifier">res</span>
322:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000631">
                    
                    <a name="M000631"></a><b>get_constant_with_optional_parens</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Get a constant that may be surrounded by parens
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000631_source')" id="l_M000631_source">show</a>
                        
                    </p>
                    <div id="M000631_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 327</span>
327:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_constant_with_optional_parens</span>
328:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
329: 
330:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
331: 
332:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> (<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">peek_tk</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
333:       <span class="ruby-identifier">get_tk</span>
334:       <span class="ruby-identifier">skip_tkspace</span>
335:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
336:     <span class="ruby-keyword kw">end</span>
337: 
338:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_constant</span>
339: 
340:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
341:       <span class="ruby-identifier">skip_tkspace</span>
342:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
343:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkRPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
344:     <span class="ruby-keyword kw">end</span>
345: 
346:     <span class="ruby-identifier">name</span>
347:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000632">
                    
                    <a name="M000632"></a><b>get_symbol_or_name</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Extracts a name or symbol from the token stream.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000632_source')" id="l_M000632_source">show</a>
                        
                    </p>
                    <div id="M000632_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 352</span>
352:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_symbol_or_name</span>
353:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
354:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
355:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span> <span class="ruby-keyword kw">then</span>
356:       <span class="ruby-identifier">text</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^:/</span>, <span class="ruby-value str">''</span>)
357: 
358:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkASSIGN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
359:         <span class="ruby-identifier">get_tk</span>
360:         <span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'='</span>
361:       <span class="ruby-keyword kw">end</span>
362: 
363:       <span class="ruby-identifier">text</span>
364:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkId</span>, <span class="ruby-constant">TkOp</span> <span class="ruby-keyword kw">then</span>
365:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
366:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkAMPER</span>,
367:          <span class="ruby-constant">TkDSTRING</span>,
368:          <span class="ruby-constant">TkSTAR</span>,
369:          <span class="ruby-constant">TkSTRING</span> <span class="ruby-keyword kw">then</span>
370:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
371:     <span class="ruby-keyword kw">else</span>
372:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Name or symbol expected (got #{tk})&quot;</span>
373:     <span class="ruby-keyword kw">end</span>
374:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000633">
                    
                    <a name="M000633"></a><b>look_for_directives_in</b>(context, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Look for directives in a normal comment block:
</p>
<pre>
  # :stopdoc:
  # Don't display comment from this point forward
</pre>
<p>
This routine modifies its <tt>comment</tt> parameter.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000633_source')" id="l_M000633_source">show</a>
                        
                    </p>
                    <div id="M000633_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 384</span>
384:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">look_for_directives_in</span> <span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>
385:     <span class="ruby-ivar">@preprocess</span>.<span class="ruby-identifier">handle</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">context</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directive</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
386:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">directive</span>
387:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'method'</span>, <span class="ruby-value str">'singleton-method'</span>,
388:            <span class="ruby-value str">'attr'</span>, <span class="ruby-value str">'attr_accessor'</span>, <span class="ruby-value str">'attr_reader'</span>, <span class="ruby-value str">'attr_writer'</span> <span class="ruby-keyword kw">then</span>
389:         <span class="ruby-keyword kw">false</span> <span class="ruby-comment cmt"># handled elsewhere</span>
390:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'section'</span> <span class="ruby-keyword kw">then</span>
391:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">set_current_section</span> <span class="ruby-identifier">param</span>, <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">dup</span>
392:         <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">text</span> = <span class="ruby-value str">''</span>
393:         <span class="ruby-keyword kw">break</span>
394:       <span class="ruby-keyword kw">end</span>
395:     <span class="ruby-keyword kw">end</span>
396: 
397:     <span class="ruby-identifier">remove_private_comments</span> <span class="ruby-identifier">comment</span>
398:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000634">
                    
                    <a name="M000634"></a><b>make_message</b>(message)
                    
                </div>
                
                <div class="description">
                  <p>
Adds useful info about the parser to <tt>message</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000634_source')" id="l_M000634_source">show</a>
                        
                    </p>
                    <div id="M000634_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 403</span>
403:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">message</span>
404:     <span class="ruby-identifier">prefix</span> = <span class="ruby-node">&quot;#{@file_name}:&quot;</span>
405: 
406:     <span class="ruby-identifier">prefix</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{@scanner.line_no}:#{@scanner.char_no}:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>
407: 
408:     <span class="ruby-node">&quot;#{prefix} #{message}&quot;</span>
409:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000635">
                    
                    <a name="M000635"></a><b>new_comment</b>(comment)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a comment with the correct format
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000635_source')" id="l_M000635_source">show</a>
                        
                    </p>
                    <div id="M000635_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 414</span>
414:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_comment</span> <span class="ruby-identifier">comment</span>
415:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">comment</span>, <span class="ruby-ivar">@top_level</span>
416:     <span class="ruby-identifier">c</span>.<span class="ruby-identifier">format</span> = <span class="ruby-ivar">@markup</span>
417:     <span class="ruby-identifier">c</span>
418:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000638">
                    
                    <a name="M000638"></a><b>parse_alias</b>(context, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses an <tt>alias</tt> in <tt>context</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000638_source')" id="l_M000638_source">show</a>
                        
                    </p>
                    <div id="M000638_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 495</span>
495:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_alias</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
496:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
497:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
498: 
499:     <span class="ruby-identifier">skip_tkspace</span>
500: 
501:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
502:       <span class="ruby-identifier">get_tk</span>
503:       <span class="ruby-identifier">skip_tkspace</span>
504:     <span class="ruby-keyword kw">end</span>
505: 
506:     <span class="ruby-identifier">new_name</span> = <span class="ruby-identifier">get_symbol_or_name</span>
507: 
508:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span> }
509: 
510:     <span class="ruby-identifier">skip_tkspace</span>
511:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
512:       <span class="ruby-identifier">get_tk</span>
513:       <span class="ruby-identifier">skip_tkspace</span>
514:     <span class="ruby-keyword kw">end</span>
515: 
516:     <span class="ruby-keyword kw">begin</span>
517:       <span class="ruby-identifier">old_name</span> = <span class="ruby-identifier">get_symbol_or_name</span>
518:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
519:       <span class="ruby-keyword kw">return</span>
520:     <span class="ruby-keyword kw">end</span>
521: 
522:     <span class="ruby-identifier">al</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Alias</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">old_name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">comment</span>,
523:                          <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
524:     <span class="ruby-identifier">al</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
525:     <span class="ruby-identifier">al</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
526:     <span class="ruby-identifier">al</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
527: 
528:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">al</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
529:     <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_alias</span> <span class="ruby-identifier">al</span>
530:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_alias</span> <span class="ruby-identifier">al</span>
531: 
532:     <span class="ruby-identifier">al</span>
533:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000636">
                    
                    <a name="M000636"></a><b>parse_attr</b>(context, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Creates an <a href="../Attr.html">RDoc::Attr</a> for the name following
<tt>tk</tt>, setting the comment to <tt>comment</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000636_source')" id="l_M000636_source">show</a>
                        
                    </p>
                    <div id="M000636_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 424</span>
424:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attr</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
425:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
426:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
427: 
428:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span> <span class="ruby-value">1</span>
429:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span>
430:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>]
431:       <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;R&quot;</span>
432:       <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
433:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
434: 
435:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
436:         <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;RW&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">get_bool</span>
437:       <span class="ruby-keyword kw">else</span>
438:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
439:       <span class="ruby-keyword kw">end</span>
440: 
441:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>
442:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
443:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
444:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
445: 
446:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">att</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
447: 
448:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
449: 
450:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
451:     <span class="ruby-keyword kw">else</span>
452:       <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;'attr' ignored - looks like a variable&quot;</span>
453:     <span class="ruby-keyword kw">end</span>
454:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000637">
                    
                    <a name="M000637"></a><b>parse_attr_accessor</b>(context, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Creates an <a href="../Attr.html">RDoc::Attr</a> for each attribute listed
after <tt>tk</tt>, setting the comment for each to <tt>comment</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000637_source')" id="l_M000637_source">show</a>
                        
                    </p>
                    <div id="M000637_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 460</span>
460:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attr_accessor</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
461:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
462:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
463: 
464:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
465:     <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;?&quot;</span>
466: 
467:     <span class="ruby-identifier">tmp</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeObject</span>.<span class="ruby-identifier">new</span>
468:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">tmp</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
469:     <span class="ruby-comment cmt"># TODO In most other places we let the context keep track of document_self</span>
470:     <span class="ruby-comment cmt"># and add found items appropriately but here we do not.  I'm not sure why.</span>
471:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tmp</span>.<span class="ruby-identifier">document_self</span>
472: 
473:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
474:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_reader&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;R&quot;</span>
475:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_writer&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;W&quot;</span>
476:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_accessor&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;RW&quot;</span>
477:     <span class="ruby-keyword kw">else</span>
478:       <span class="ruby-identifier">rw</span> = <span class="ruby-value str">'?'</span>
479:     <span class="ruby-keyword kw">end</span>
480: 
481:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">args</span>
482:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>
483:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
484:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
485:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
486: 
487:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
488:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
489:     <span class="ruby-keyword kw">end</span>
490:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000639">
                    
                    <a name="M000639"></a><b>parse_call_parameters</b>(tk)
                    
                </div>
                
                <div class="description">
                  <p>
Extracts call parameters from the token stream.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000639_source')" id="l_M000639_source">show</a>
                        
                    </p>
                    <div id="M000639_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 538</span>
538:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_call_parameters</span>(<span class="ruby-identifier">tk</span>)
539:     <span class="ruby-identifier">end_token</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
540:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
541:                   <span class="ruby-constant">TkRPAREN</span>
542:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
543:                   <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
544:                 <span class="ruby-keyword kw">else</span>
545:                   <span class="ruby-constant">TkNL</span>
546:                 <span class="ruby-keyword kw">end</span>
547:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
548: 
549:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
550:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
551:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
552:         <span class="ruby-keyword kw">break</span>
553:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
554:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
555:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span>
556:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
557:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
558:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
559:         <span class="ruby-keyword kw">else</span>
560:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
561:         <span class="ruby-keyword kw">end</span>
562:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span>, <span class="ruby-constant">TkASSIGN</span>, <span class="ruby-constant">TkOPASGN</span>
563:         <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
564:         <span class="ruby-keyword kw">break</span>
565:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">then</span>
566:         <span class="ruby-keyword kw">break</span>
567:       <span class="ruby-keyword kw">end</span>
568:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
569:     <span class="ruby-keyword kw">end</span>
570:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">strip</span>
571:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
572:     <span class="ruby-identifier">res</span>
573:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000640">
                    
                    <a name="M000640"></a><b>parse_class</b>(container, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a class in <tt>context</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000640_source')" id="l_M000640_source">show</a>
                        
                    </p>
                    <div id="M000640_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 578</span>
578:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_class</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
579:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
580:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
581: 
582:     <span class="ruby-identifier">declaration_context</span> = <span class="ruby-identifier">container</span>
583:     <span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>, <span class="ruby-identifier">given_name</span> = <span class="ruby-identifier">get_class_or_module</span> <span class="ruby-identifier">container</span>
584: 
585:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
586:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span>
587:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
588:       <span class="ruby-identifier">superclass</span> = <span class="ruby-value str">'::Object'</span>
589: 
590:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
591:         <span class="ruby-identifier">get_tk</span>
592:         <span class="ruby-identifier">skip_tkspace</span>
593:         <span class="ruby-identifier">superclass</span> = <span class="ruby-identifier">get_class_specification</span>
594:         <span class="ruby-identifier">superclass</span> = <span class="ruby-value str">'(unknown)'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">empty?</span>
595:       <span class="ruby-keyword kw">end</span>
596: 
597:       <span class="ruby-identifier">cls_type</span> = <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span> <span class="ruby-value">? </span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">SingleClass</span> <span class="ruby-operator">:</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span>
598:       <span class="ruby-identifier">cls</span> = <span class="ruby-identifier">declaration_context</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">cls_type</span>, <span class="ruby-identifier">given_name</span>, <span class="ruby-identifier">superclass</span>
599:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">ignore</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_children</span>
600: 
601:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">cls</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
602:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
603:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
604:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
605: 
606:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">add_comment</span> <span class="ruby-identifier">comment</span>, <span class="ruby-ivar">@top_level</span>
607: 
608:       <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_to_classes_or_modules</span> <span class="ruby-identifier">cls</span>
609:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">cls</span>
610: 
611:       <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">cls</span>
612:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLSHFT</span>
613:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_class_specification</span>
614:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;self&quot;</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>
615:         <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-constant">SINGLE</span>
616:       <span class="ruby-keyword kw">else</span>
617:         <span class="ruby-identifier">other</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">find_class_named</span> <span class="ruby-identifier">name</span>
618: 
619:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">other</span> <span class="ruby-keyword kw">then</span>
620:           <span class="ruby-identifier">other</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name</span>
621:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
622:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">offset</span>
623:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">line</span>    = <span class="ruby-identifier">line_no</span>
624: 
625:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">add_comment</span> <span class="ruby-identifier">comment</span>, <span class="ruby-ivar">@top_level</span>
626:         <span class="ruby-keyword kw">end</span>
627: 
628:         <span class="ruby-comment cmt"># notify :nodoc: all if not a constant-named class/module</span>
629:         <span class="ruby-comment cmt"># (and remove any comment)</span>
630:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A(::)?[A-Z]/</span> <span class="ruby-keyword kw">then</span>
631:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">nil</span>
632:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">document_children</span> = <span class="ruby-keyword kw">false</span>
633:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">clear_comment</span>
634:         <span class="ruby-keyword kw">end</span>
635: 
636:         <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_to_classes_or_modules</span> <span class="ruby-identifier">other</span>
637:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">other</span>
638: 
639:         <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">other</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
640:         <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">other</span>, <span class="ruby-constant">SINGLE</span>)
641:       <span class="ruby-keyword kw">end</span>
642:     <span class="ruby-keyword kw">else</span>
643:       <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Expected class name or '&lt;&lt;'. Got #{name_t.class}: #{name_t.text.inspect}&quot;</span>)
644:     <span class="ruby-keyword kw">end</span>
645:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000651">
                    
                    <a name="M000651"></a><b>parse_comment</b>(container, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Generates an RDoc::Method or <a href="../Attr.html">RDoc::Attr</a> from
<tt>comment</tt> by looking for :method: or :attr: directives in
<tt>comment</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000651_source')" id="l_M000651_source">show</a>
                        
                    </p>
                    <div id="M000651_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 745</span>
745:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_comment</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
746:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parse_comment_tomdoc</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@markup</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'tomdoc'</span>
747:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
748:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
749:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
750: 
751:     <span class="ruby-identifier">text</span> = <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">text</span>
752: 
753:     <span class="ruby-identifier">singleton</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/(^# +:?)(singleton-)(method:)/</span>, <span class="ruby-value str">'\1\3'</span>)
754: 
755:     <span class="ruby-comment cmt"># REFACTOR</span>
756:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^# +:?method: *(\S*).*?\n/i</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
757:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">empty?</span>
758: 
759:       <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">GhostMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
760:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
761:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-identifier">singleton</span>
762:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">offset</span>    = <span class="ruby-identifier">offset</span>
763:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">line</span>      = <span class="ruby-identifier">line_no</span>
764: 
765:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
766:       <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">0</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
767:       <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">column</span>
768: 
769:       <span class="ruby-identifier">position_comment</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>
770:       <span class="ruby-identifier">position_comment</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-node">&quot;# File #{@top_level.absolute_name}, line #{line_no}&quot;</span>
771:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">position_comment</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
772: 
773:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">params</span> = <span class="ruby-value str">''</span>
774: 
775:       <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">normalize</span>
776:       <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">meth</span>
777: 
778:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span>
779: 
780:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
781: 
782:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
783: 
784:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
785:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/# +:?(attr(_reader|_writer|_accessor)?): *(\S*).*?\n/i</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
786:       <span class="ruby-identifier">rw</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">$1</span>
787:            <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr_reader'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'R'</span>
788:            <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr_writer'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'W'</span>
789:            <span class="ruby-keyword kw">else</span> <span class="ruby-value str">'RW'</span>
790:            <span class="ruby-keyword kw">end</span>
791: 
792:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$3</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">empty?</span>
793: 
794:       <span class="ruby-comment cmt"># TODO authorize 'singleton-attr...'?</span>
795:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>
796:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
797:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">offset</span>    = <span class="ruby-identifier">offset</span>
798:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">line</span>      = <span class="ruby-identifier">line_no</span>
799: 
800:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
801:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
802:     <span class="ruby-keyword kw">end</span>
803: 
804:     <span class="ruby-keyword kw">true</span>
805:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000652">
                    
                    <a name="M000652"></a><b>parse_comment_tomdoc</b>(container, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Creates an RDoc::Method on <tt>container</tt> from <tt>comment</tt> if
there is a Signature section in the comment
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000652_source')" id="l_M000652_source">show</a>
                        
                    </p>
                    <div id="M000652_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 811</span>
811:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_comment_tomdoc</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
812:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">signature</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TomDoc</span>.<span class="ruby-identifier">signature</span>(<span class="ruby-identifier">comment</span>)
813:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
814:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
815: 
816:     <span class="ruby-identifier">name</span>, = <span class="ruby-identifier">signature</span>.<span class="ruby-identifier">split</span> <span class="ruby-regexp re">%r%[ \(]%</span>, <span class="ruby-value">2</span>
817: 
818:     <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">GhostMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
819:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
820:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">offset</span>    = <span class="ruby-identifier">offset</span>
821:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">line</span>      = <span class="ruby-identifier">line_no</span>
822: 
823:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
824:     <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">0</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
825:     <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">offset</span>
826: 
827:     <span class="ruby-identifier">position_comment</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>
828:     <span class="ruby-identifier">position_comment</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-node">&quot;# File #{@top_level.absolute_name}, line #{line_no}&quot;</span>
829:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">position_comment</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
830: 
831:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">call_seq</span> = <span class="ruby-identifier">signature</span>
832: 
833:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">normalize</span>
834: 
835:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span>
836: 
837:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
838: 
839:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
840: 
841:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
842:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000644">
                    
                    <a name="M000644"></a><b>parse_constant</b>(container, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a constant in <tt>context</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000644_source')" id="l_M000644_source">show</a>
                        
                    </p>
                    <div id="M000644_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 650</span>
650:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_constant</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
651:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
652:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
653: 
654:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
655:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
656: 
657:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\w+$/</span>
658: 
659:     <span class="ruby-identifier">eq_tk</span> = <span class="ruby-identifier">get_tk</span>
660: 
661:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkASSIGN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">eq_tk</span> <span class="ruby-keyword kw">then</span>
662:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">eq_tk</span>
663:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
664:     <span class="ruby-keyword kw">end</span>
665: 
666:     <span class="ruby-identifier">value</span> = <span class="ruby-value str">''</span>
667:     <span class="ruby-identifier">con</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Constant</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">comment</span>
668:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
669:     <span class="ruby-identifier">get_tkread</span>
670: 
671:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
672: 
673:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkGT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
674:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
675:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">eq_tk</span>
676:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
677:     <span class="ruby-keyword kw">end</span>
678: 
679:     <span class="ruby-identifier">rhs_name</span> = <span class="ruby-value str">''</span>
680: 
681:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
682:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
683:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
684:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
685:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>, <span class="ruby-constant">TkLBRACE</span>, <span class="ruby-constant">TkfLBRACE</span>, <span class="ruby-constant">TkLBRACK</span>, <span class="ruby-constant">TkfLBRACK</span>,
686:            <span class="ruby-constant">TkDO</span>, <span class="ruby-constant">TkIF</span>, <span class="ruby-constant">TkUNLESS</span>, <span class="ruby-constant">TkCASE</span>, <span class="ruby-constant">TkDEF</span>, <span class="ruby-constant">TkBEGIN</span> <span class="ruby-keyword kw">then</span>
687:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
688:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>, <span class="ruby-constant">TkRBRACE</span>, <span class="ruby-constant">TkRBRACK</span>, <span class="ruby-constant">TkEND</span> <span class="ruby-keyword kw">then</span>
689:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
690:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-keyword kw">then</span>
691:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span>
692:            (<span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>) <span class="ruby-keyword kw">then</span>
693:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
694:           <span class="ruby-keyword kw">break</span>
695:         <span class="ruby-keyword kw">else</span>
696:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
697:           <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">con</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CONSTANT_MODIFIERS</span>
698:         <span class="ruby-keyword kw">end</span>
699:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-keyword kw">then</span>
700:         <span class="ruby-identifier">rhs_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
701: 
702:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-constant">TkNL</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
703:           <span class="ruby-identifier">mod</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rhs_name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^::/</span> <span class="ruby-keyword kw">then</span>
704:                   <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">find_class_or_module</span> <span class="ruby-identifier">rhs_name</span>
705:                 <span class="ruby-keyword kw">else</span>
706:                   <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span> <span class="ruby-identifier">rhs_name</span>
707:                 <span class="ruby-keyword kw">end</span>
708: 
709:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_module_alias</span> <span class="ruby-identifier">mod</span>, <span class="ruby-identifier">name</span>, <span class="ruby-ivar">@top_level</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mod</span>
710:           <span class="ruby-keyword kw">break</span>
711:         <span class="ruby-keyword kw">end</span>
712:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span> <span class="ruby-keyword kw">then</span>
713:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span>
714:            (<span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>) <span class="ruby-keyword kw">then</span>
715:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
716:           <span class="ruby-keyword kw">break</span>
717:         <span class="ruby-keyword kw">end</span>
718:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOLON2</span>, <span class="ruby-constant">TkCOLON3</span> <span class="ruby-keyword kw">then</span>
719:         <span class="ruby-identifier">rhs_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'::'</span>
720:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">then</span>
721:         <span class="ruby-keyword kw">break</span>
722:       <span class="ruby-keyword kw">end</span>
723:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
724:     <span class="ruby-keyword kw">end</span>
725: 
726:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^[ \t]+/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">strip</span>
727:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
728: 
729:     <span class="ruby-identifier">value</span>.<span class="ruby-identifier">replace</span> <span class="ruby-identifier">res</span>
730:     <span class="ruby-identifier">con</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
731:     <span class="ruby-identifier">con</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
732:     <span class="ruby-identifier">con</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
733:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">con</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CONSTANT_MODIFIERS</span>
734: 
735:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_constant</span> <span class="ruby-identifier">con</span>
736:     <span class="ruby-identifier">con</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_constant</span> <span class="ruby-identifier">con</span>
737: 
738:     <span class="ruby-keyword kw">true</span>
739:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000653">
                    
                    <a name="M000653"></a><b>parse_include</b>(context, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses an <tt>include</tt> in <tt>context</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000653_source')" id="l_M000653_source">show</a>
                        
                    </p>
                    <div id="M000653_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 847</span>
847:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_include</span> <span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>
848:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
849:       <span class="ruby-identifier">skip_tkspace_comment</span>
850: 
851:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_constant_with_optional_parens</span>
852: 
853:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
854:         <span class="ruby-identifier">incl</span> = <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_include</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Include</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">comment</span>)
855:         <span class="ruby-identifier">incl</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
856:       <span class="ruby-keyword kw">end</span>
857: 
858:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
859: 
860:       <span class="ruby-identifier">get_tk</span>
861:     <span class="ruby-keyword kw">end</span>
862:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000654">
                    
                    <a name="M000654"></a><b>parse_meta_attr</b>(context, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a meta-programmed attribute and creates an <a
href="../Attr.html">RDoc::Attr</a>.
</p>
<p>
To create foo and bar attributes on class <a href="C.html">C</a> with
comment &#8220;My attributes&#8221;:
</p>
<pre>
  class C

    ##
    # :attr:
    #
    # My attributes

    my_attr :foo, :bar

  end
</pre>
<p>
To create a foo attribute on class <a href="C.html">C</a> with comment
&#8220;My attribute&#8221;:
</p>
<pre>
  class C

    ##
    # :attr: foo
    #
    # My attribute

    my_attr :foo, :bar

  end
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000654_source')" id="l_M000654_source">show</a>
                        
                    </p>
                    <div id="M000654_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 893</span>
893:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_meta_attr</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
894:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
895:     <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;?&quot;</span>
896: 
897:     <span class="ruby-comment cmt"># If nodoc is given, don't document any of them</span>
898: 
899:     <span class="ruby-identifier">tmp</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeObject</span>.<span class="ruby-identifier">new</span>
900:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">tmp</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
901: 
902:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^# +:?(attr(_reader|_writer|_accessor)?): *(\S*).*?\n/i</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
903:       <span class="ruby-identifier">rw</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">$1</span>
904:            <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr_reader'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'R'</span>
905:            <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr_writer'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'W'</span>
906:            <span class="ruby-keyword kw">else</span> <span class="ruby-value str">'RW'</span>
907:            <span class="ruby-keyword kw">end</span>
908:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$3</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">empty?</span>
909:     <span class="ruby-keyword kw">end</span>
910: 
911:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">then</span>
912:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>
913:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
914: 
915:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
916:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
917:     <span class="ruby-keyword kw">else</span>
918:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr_name</span><span class="ruby-operator">|</span>
919:         <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>,
920:                              <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
921:         <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
922: 
923:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
924:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
925:       <span class="ruby-keyword kw">end</span>
926:     <span class="ruby-keyword kw">end</span>
927:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000655">
                    
                    <a name="M000655"></a><b>parse_meta_method</b>(container, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a meta-programmed method
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000655_source')" id="l_M000655_source">show</a>
                        
                    </p>
                    <div id="M000655_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 932</span>
 932:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_meta_method</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
 933:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
 934:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
 935:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
 936: 
 937:     <span class="ruby-identifier">start_collecting_tokens</span>
 938:     <span class="ruby-identifier">add_token</span> <span class="ruby-identifier">tk</span>
 939:     <span class="ruby-identifier">add_token_listener</span> <span class="ruby-keyword kw">self</span>
 940: 
 941:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
 942: 
 943:     <span class="ruby-identifier">singleton</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">comment</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/(^# +:?)(singleton-)(method:)/</span>, <span class="ruby-value str">'\1\3'</span>)
 944: 
 945:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^# +:?method: *(\S*).*?\n/i</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
 946:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">empty?</span>
 947:     <span class="ruby-keyword kw">end</span>
 948: 
 949:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
 950:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
 951:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
 952:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span> <span class="ruby-keyword kw">then</span>
 953:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
 954:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span> <span class="ruby-keyword kw">then</span>
 955:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">value</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
 956:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkASSIGN</span> <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># ignore</span>
 957:         <span class="ruby-identifier">remove_token_listener</span> <span class="ruby-keyword kw">self</span>
 958:         <span class="ruby-keyword kw">return</span>
 959:       <span class="ruby-keyword kw">else</span>
 960:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;unknown name token #{name_t.inspect} for meta-method '#{tk.name}'&quot;</span>
 961:         <span class="ruby-identifier">name</span> = <span class="ruby-value str">'unknown'</span>
 962:       <span class="ruby-keyword kw">end</span>
 963:     <span class="ruby-keyword kw">end</span>
 964: 
 965:     <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">MetaMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
 966:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
 967:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
 968:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
 969:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-identifier">singleton</span>
 970: 
 971:     <span class="ruby-identifier">remove_token_listener</span> <span class="ruby-keyword kw">self</span>
 972: 
 973:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
 974:     <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">0</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
 975:     <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">column</span>
 976: 
 977:     <span class="ruby-identifier">position_comment</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>
 978:     <span class="ruby-identifier">position_comment</span>.<span class="ruby-identifier">value</span> = <span class="ruby-node">&quot;# File #{@top_level.absolute_name}, line #{line_no}&quot;</span>
 979:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">position_comment</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
 980:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> <span class="ruby-ivar">@token_stream</span>
 981: 
 982:     <span class="ruby-identifier">token_listener</span> <span class="ruby-identifier">meth</span> <span class="ruby-keyword kw">do</span>
 983:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">params</span> = <span class="ruby-value str">''</span>
 984: 
 985:       <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">normalize</span>
 986:       <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">meth</span>
 987: 
 988:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
 989: 
 990:       <span class="ruby-identifier">last_tk</span> = <span class="ruby-identifier">tk</span>
 991: 
 992:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">do</span>
 993:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
 994:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
 995:           <span class="ruby-keyword kw">break</span>
 996:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span> <span class="ruby-keyword kw">then</span>
 997:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">last_tk</span> <span class="ruby-keyword kw">and</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">last_tk</span>
 998:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSPACE</span> <span class="ruby-keyword kw">then</span>
 999:           <span class="ruby-comment cmt"># expression continues</span>
1000:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDO</span> <span class="ruby-keyword kw">then</span>
1001:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1002:           <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">meth</span>
1003:           <span class="ruby-keyword kw">break</span>
1004:         <span class="ruby-keyword kw">else</span>
1005:           <span class="ruby-identifier">last_tk</span> = <span class="ruby-identifier">tk</span>
1006:         <span class="ruby-keyword kw">end</span>
1007:       <span class="ruby-keyword kw">end</span>
1008:     <span class="ruby-keyword kw">end</span>
1009: 
1010:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
1011: 
1012:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
1013:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000656">
                    
                    <a name="M000656"></a><b>parse_method</b>(container, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a normal method defined by <tt>def</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000656_source')" id="l_M000656_source">show</a>
                        
                    </p>
                    <div id="M000656_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1018</span>
1018:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1019:     <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">nil</span>
1020:     <span class="ruby-identifier">meth</span> = <span class="ruby-keyword kw">nil</span>
1021:     <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>
1022:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
1023:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
1024:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
1025: 
1026:     <span class="ruby-identifier">start_collecting_tokens</span>
1027:     <span class="ruby-identifier">add_token</span> <span class="ruby-identifier">tk</span>
1028: 
1029:     <span class="ruby-identifier">token_listener</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">do</span>
1030:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span> <span class="ruby-keyword kw">end</span>
1031: 
1032:       <span class="ruby-identifier">skip_tkspace</span>
1033:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1034:       <span class="ruby-identifier">back_tk</span> = <span class="ruby-identifier">skip_tkspace</span>
1035:       <span class="ruby-identifier">meth</span> = <span class="ruby-keyword kw">nil</span>
1036:       <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">false</span>
1037: 
1038:       <span class="ruby-identifier">dot</span> = <span class="ruby-identifier">get_tk</span>
1039:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkDOT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">dot</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">dot</span> <span class="ruby-keyword kw">then</span>
1040:         <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span> <span class="ruby-keyword kw">end</span>
1041:         <span class="ruby-identifier">skip_tkspace</span>
1042:         <span class="ruby-identifier">name_t2</span> = <span class="ruby-identifier">get_tk</span>
1043: 
1044:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
1045:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSELF</span>, <span class="ruby-constant">TkMOD</span> <span class="ruby-keyword kw">then</span>
1046:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
1047:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-keyword kw">then</span>
1048:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
1049:           <span class="ruby-identifier">prev_container</span> = <span class="ruby-identifier">container</span>
1050:           <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span>(<span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
1051:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">then</span>
1052:             <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">true</span>
1053:             <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;::&quot;</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-constant">Object</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span>, <span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
1054:               <span class="ruby-identifier">state</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">item</span>)
1055:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1056: 
1057:             <span class="ruby-identifier">type</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Class</span> <span class="ruby-value">? </span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span> <span class="ruby-operator">:</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>
1058: 
1059:             <span class="ruby-keyword kw">unless</span> [<span class="ruby-constant">Class</span>, <span class="ruby-constant">Module</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span>) <span class="ruby-keyword kw">then</span>
1060:               <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Couldn't find #{name_t.name}. Assuming it's a module&quot;</span>)
1061:             <span class="ruby-keyword kw">end</span>
1062: 
1063:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span> <span class="ruby-keyword kw">then</span>
1064:               <span class="ruby-identifier">sclass</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-value">? </span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1065:               <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">type</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">sclass</span>
1066:             <span class="ruby-keyword kw">else</span>
1067:               <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-identifier">type</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1068:             <span class="ruby-keyword kw">end</span>
1069: 
1070:             <span class="ruby-identifier">container</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1071:           <span class="ruby-keyword kw">end</span>
1072:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkIDENTIFIER</span>, <span class="ruby-constant">TkIVAR</span>, <span class="ruby-constant">TkGVAR</span> <span class="ruby-keyword kw">then</span>
1073:           <span class="ruby-identifier">dummy</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">new</span>
1074:           <span class="ruby-identifier">dummy</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-identifier">container</span>
1075:           <span class="ruby-identifier">skip_method</span> <span class="ruby-identifier">dummy</span>
1076:           <span class="ruby-keyword kw">return</span>
1077:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkTRUE</span>, <span class="ruby-constant">TkFALSE</span>, <span class="ruby-constant">TkNIL</span> <span class="ruby-keyword kw">then</span>
1078:           <span class="ruby-identifier">klass_name</span> = <span class="ruby-node">&quot;#{name_t.name.capitalize}Class&quot;</span>
1079:           <span class="ruby-identifier">container</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">find_class_named</span> <span class="ruby-identifier">klass_name</span>
1080:           <span class="ruby-identifier">container</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span>, <span class="ruby-identifier">klass_name</span>
1081: 
1082:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
1083:         <span class="ruby-keyword kw">else</span>
1084:           <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;unexpected method name token #{name_t.inspect}&quot;</span>
1085:           <span class="ruby-comment cmt"># break</span>
1086:           <span class="ruby-identifier">skip_method</span> <span class="ruby-identifier">container</span>
1087:           <span class="ruby-keyword kw">return</span>
1088:         <span class="ruby-keyword kw">end</span>
1089: 
1090:         <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>)
1091:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1092:       <span class="ruby-keyword kw">else</span>
1093:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">dot</span>
1094:         <span class="ruby-identifier">back_tk</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">token</span><span class="ruby-operator">|</span>
1095:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">token</span>
1096:         <span class="ruby-keyword kw">end</span>
1097: 
1098:         <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
1099:                <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTAR</span>, <span class="ruby-constant">TkAMPER</span> <span class="ruby-keyword kw">then</span>
1100:                  <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">text</span>
1101:                <span class="ruby-keyword kw">else</span>
1102:                  <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:name</span> <span class="ruby-keyword kw">then</span>
1103:                    <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;expected method name token, . or ::, got #{name_t.inspect}&quot;</span>
1104:                    <span class="ruby-identifier">skip_method</span> <span class="ruby-identifier">container</span>
1105:                    <span class="ruby-keyword kw">return</span>
1106:                  <span class="ruby-keyword kw">end</span>
1107:                  <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1108:                <span class="ruby-keyword kw">end</span>
1109: 
1110:         <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
1111:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = (<span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
1112:       <span class="ruby-keyword kw">end</span>
1113:     <span class="ruby-keyword kw">end</span>
1114: 
1115:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1116:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
1117:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
1118: 
1119:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
1120:     <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">0</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
1121:     <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">column</span>
1122: 
1123:     <span class="ruby-identifier">token</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>
1124:     <span class="ruby-identifier">token</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-node">&quot;# File #{@top_level.absolute_name}, line #{line_no}&quot;</span>
1125:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">token</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
1126:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> <span class="ruby-ivar">@token_stream</span>
1127: 
1128:     <span class="ruby-identifier">token_listener</span> <span class="ruby-identifier">meth</span> <span class="ruby-keyword kw">do</span>
1129:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">end</span>
1130:       <span class="ruby-identifier">parse_method_parameters</span> <span class="ruby-identifier">meth</span>
1131: 
1132:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">then</span>
1133:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
1134:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">added_container</span> <span class="ruby-keyword kw">then</span>
1135:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">false</span>
1136:       <span class="ruby-keyword kw">end</span>
1137: 
1138:       <span class="ruby-comment cmt"># Having now read the method parameters and documentation modifiers, we</span>
1139:       <span class="ruby-comment cmt"># now know whether we have to rename #initialize to ::new</span>
1140: 
1141:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;initialize&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> <span class="ruby-keyword kw">then</span>
1142:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">dont_rename_initialize</span> <span class="ruby-keyword kw">then</span>
1143:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">:protected</span>
1144:         <span class="ruby-keyword kw">else</span>
1145:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1146:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;new&quot;</span>
1147:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">:public</span>
1148:         <span class="ruby-keyword kw">end</span>
1149:       <span class="ruby-keyword kw">end</span>
1150: 
1151:       <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">meth</span>
1152:     <span class="ruby-keyword kw">end</span>
1153: 
1154:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">normalize</span>
1155:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">meth</span>
1156: 
1157:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
1158: 
1159:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
1160:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000662">
                    
                    <a name="M000662"></a><b>parse_method_or_yield_parameters</b>(method = nil, modifiers = RDoc::METHOD_MODIFIERS)
                    
                </div>
                
                <div class="description">
                  <p>
Extracts <tt>yield</tt> parameters from <tt>method</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000662_source')" id="l_M000662_source">show</a>
                        
                    </p>
                    <div id="M000662_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1165</span>
1165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method_or_yield_parameters</span>(<span class="ruby-identifier">method</span> = <span class="ruby-keyword kw">nil</span>,
1166:                                        <span class="ruby-identifier">modifiers</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">METHOD_MODIFIERS</span>)
1167:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1168:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1169: 
1170:     <span class="ruby-comment cmt"># Little hack going on here. In the statement</span>
1171:     <span class="ruby-comment cmt">#  f = 2*(1+yield)</span>
1172:     <span class="ruby-comment cmt"># We see the RPAREN as the next token, so we need</span>
1173:     <span class="ruby-comment cmt"># to exit early. This still won't catch all cases</span>
1174:     <span class="ruby-comment cmt"># (such as &quot;a = yield + 1&quot;</span>
1175:     <span class="ruby-identifier">end_token</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1176:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
1177:                   <span class="ruby-constant">TkRPAREN</span>
1178:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
1179:                   <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
1180:                 <span class="ruby-keyword kw">else</span>
1181:                   <span class="ruby-constant">TkNL</span>
1182:                 <span class="ruby-keyword kw">end</span>
1183:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1184: 
1185:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1186:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1187:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
1188:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1189:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLBRACE</span>, <span class="ruby-constant">TkfLBRACE</span> <span class="ruby-keyword kw">then</span>
1190:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1191:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRBRACE</span> <span class="ruby-keyword kw">then</span>
1192:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1193:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1194:           <span class="ruby-comment cmt"># we might have a.each { |i| yield i }</span>
1195:           <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
1196:           <span class="ruby-keyword kw">break</span>
1197:         <span class="ruby-keyword kw">end</span>
1198:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-keyword kw">then</span>
1199:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1200:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span> <span class="ruby-keyword kw">then</span>
1201:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
1202:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1203:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1204:         <span class="ruby-keyword kw">else</span>
1205:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
1206:         <span class="ruby-keyword kw">end</span>
1207:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span> <span class="ruby-keyword kw">then</span>
1208:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1209:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-keyword kw">then</span>
1210:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1211:         <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">modifiers</span>
1212:         <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">pop</span>
1213:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-keyword kw">then</span>
1214:         <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">pop</span>
1215:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">then</span>
1216:         <span class="ruby-keyword kw">break</span>
1217:       <span class="ruby-keyword kw">end</span>
1218:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1219:     <span class="ruby-keyword kw">end</span>
1220: 
1221:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\s+/</span>, <span class="ruby-value str">' '</span>).<span class="ruby-identifier">strip</span>
1222:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">''</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">';'</span>
1223:     <span class="ruby-identifier">res</span>
1224:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000663">
                    
                    <a name="M000663"></a><b>parse_method_parameters</b>(method)
                    
                </div>
                
                <div class="description">
                  <p>
Capture the method&#8217;s parameters. Along the way, look for a comment
containing:
</p>
<pre>
   # yields: ....
</pre>
<p>
and add this as the block_params for the method
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000663_source')" id="l_M000663_source">show</a>
                        
                    </p>
                    <div id="M000663_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1234</span>
1234:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method_parameters</span>(<span class="ruby-identifier">method</span>)
1235:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">parse_method_or_yield_parameters</span> <span class="ruby-identifier">method</span>
1236: 
1237:     <span class="ruby-identifier">res</span> = <span class="ruby-node">&quot;(#{res})&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A\(/</span>
1238:     <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span> = <span class="ruby-identifier">res</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span>
1239: 
1240:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
1241:       <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1242:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">method</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">METHOD_MODIFIERS</span>
1243:     <span class="ruby-keyword kw">end</span>
1244:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000664">
                    
                    <a name="M000664"></a><b>parse_module</b>(container, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses an <a href="../NormalModule.html">RDoc::NormalModule</a> in
<tt>container</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000664_source')" id="l_M000664_source">show</a>
                        
                    </p>
                    <div id="M000664_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1249</span>
1249:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_module</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1250:     <span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>, = <span class="ruby-identifier">get_class_or_module</span> <span class="ruby-identifier">container</span>
1251: 
1252:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1253: 
1254:     <span class="ruby-identifier">mod</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name</span>
1255:     <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">ignore</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_children</span>
1256:     <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1257: 
1258:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">mod</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
1259:     <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">add_comment</span> <span class="ruby-identifier">comment</span>, <span class="ruby-ivar">@top_level</span>
1260:     <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">mod</span>
1261: 
1262:     <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_to_classes_or_modules</span> <span class="ruby-identifier">mod</span>
1263:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-identifier">mod</span>
1264:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000665">
                    
                    <a name="M000665"></a><b>parse_require</b>(context, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses an <a href="../Require.html">RDoc::Require</a> in <tt>context</tt>
containing <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000665_source')" id="l_M000665_source">show</a>
                        
                    </p>
                    <div id="M000665_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1269</span>
1269:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_require</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>)
1270:     <span class="ruby-identifier">skip_tkspace_comment</span>
1271:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1272: 
1273:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1274:       <span class="ruby-identifier">skip_tkspace_comment</span>
1275:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1276:     <span class="ruby-keyword kw">end</span>
1277: 
1278:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkSTRING</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1279: 
1280:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">then</span>
1281:       <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_require</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">comment</span>)
1282:     <span class="ruby-keyword kw">else</span>
1283:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1284:     <span class="ruby-keyword kw">end</span>
1285:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000666">
                    
                    <a name="M000666"></a><b>parse_statements</b>(container, single = NORMAL, current_method = nil, comment = new_comment(''))
                    
                </div>
                
                <div class="description">
                  <p>
The core of the ruby parser.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000666_source')" id="l_M000666_source">show</a>
                        
                    </p>
                    <div id="M000666_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1290</span>
1290:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span> = <span class="ruby-constant">NORMAL</span>, <span class="ruby-identifier">current_method</span> = <span class="ruby-keyword kw">nil</span>,
1291:                        <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">new_comment</span>(<span class="ruby-value str">''</span>))
1292:     <span class="ruby-identifier">raise</span> <span class="ruby-value str">'no'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">comment</span>
1293:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@encoding</span>
1294: 
1295:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">1</span>
1296:     <span class="ruby-identifier">save_visibility</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">visibility</span>
1297: 
1298:     <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span>
1299: 
1300:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">do</span>
1301:       <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">false</span>
1302:       <span class="ruby-identifier">try_parse_comment</span> = <span class="ruby-keyword kw">false</span>
1303: 
1304:       <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1305: 
1306:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1307:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span> <span class="ruby-keyword kw">then</span>
1308:         <span class="ruby-identifier">skip_tkspace</span>
1309:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1310: 
1311:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1312:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_comment_seen</span> <span class="ruby-keyword kw">then</span>
1313:             <span class="ruby-comment cmt"># Look for RDoc in a comment about to be thrown away</span>
1314:             <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-identifier">parse_comment</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span>
1315:               <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1316: 
1317:             <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>
1318:             <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@encoding</span>
1319:           <span class="ruby-keyword kw">end</span>
1320: 
1321:           <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
1322:             <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1323: 
1324:             <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1325: 
1326:             <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkNL</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1327:               <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span> <span class="ruby-comment cmt"># leading spaces</span>
1328:               <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1329:             <span class="ruby-keyword kw">end</span>
1330:           <span class="ruby-keyword kw">end</span>
1331: 
1332:           <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">new_comment</span> <span class="ruby-identifier">comment</span>
1333: 
1334:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
1335:             <span class="ruby-identifier">look_for_directives_in</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
1336: 
1337:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">done_documenting</span> <span class="ruby-keyword kw">then</span>
1338:               <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">save_visibility</span>
1339:             <span class="ruby-keyword kw">end</span>
1340:           <span class="ruby-keyword kw">end</span>
1341: 
1342:           <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1343:         <span class="ruby-keyword kw">else</span>
1344:           <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span>
1345:         <span class="ruby-keyword kw">end</span>
1346: 
1347:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span> <span class="ruby-comment cmt"># TODO peek instead of get then unget</span>
1348:         <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1349: 
1350:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCLASS</span> <span class="ruby-keyword kw">then</span>
1351:         <span class="ruby-identifier">parse_class</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1352: 
1353:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkMODULE</span> <span class="ruby-keyword kw">then</span>
1354:         <span class="ruby-identifier">parse_module</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1355: 
1356:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDEF</span> <span class="ruby-keyword kw">then</span>
1357:         <span class="ruby-identifier">parse_method</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1358: 
1359:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-keyword kw">then</span>
1360:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parse_constant</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">then</span>
1361:           <span class="ruby-identifier">try_parse_comment</span> = <span class="ruby-keyword kw">true</span>
1362:         <span class="ruby-keyword kw">end</span>
1363: 
1364:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkALIAS</span> <span class="ruby-keyword kw">then</span>
1365:         <span class="ruby-identifier">parse_alias</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_method</span>
1366: 
1367:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkYIELD</span> <span class="ruby-keyword kw">then</span>
1368:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_method</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
1369:           <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;Warning: yield outside of method&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span>
1370:         <span class="ruby-keyword kw">else</span>
1371:           <span class="ruby-identifier">parse_yield</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">current_method</span>
1372:         <span class="ruby-keyword kw">end</span>
1373: 
1374:       <span class="ruby-comment cmt"># Until and While can have a 'do', which shouldn't increase the nesting.</span>
1375:       <span class="ruby-comment cmt"># We can't solve the general case, but we can handle most occurrences by</span>
1376:       <span class="ruby-comment cmt"># ignoring a do at the end of a line.</span>
1377: 
1378:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkUNTIL</span>, <span class="ruby-constant">TkWHILE</span> <span class="ruby-keyword kw">then</span>
1379:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1380:         <span class="ruby-identifier">skip_optional_do_after_expression</span>
1381: 
1382:       <span class="ruby-comment cmt"># 'for' is trickier</span>
1383:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkFOR</span> <span class="ruby-keyword kw">then</span>
1384:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1385:         <span class="ruby-identifier">skip_for_variable</span>
1386:         <span class="ruby-identifier">skip_optional_do_after_expression</span>
1387: 
1388:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCASE</span>, <span class="ruby-constant">TkDO</span>, <span class="ruby-constant">TkIF</span>, <span class="ruby-constant">TkUNLESS</span>, <span class="ruby-constant">TkBEGIN</span> <span class="ruby-keyword kw">then</span>
1389:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1390: 
1391:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkIDENTIFIER</span> <span class="ruby-keyword kw">then</span>
1392:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">current_method</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
1393:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1394:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private'</span>, <span class="ruby-value str">'protected'</span>, <span class="ruby-value str">'public'</span>, <span class="ruby-value str">'private_class_method'</span>,
1395:                <span class="ruby-value str">'public_class_method'</span>, <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
1396:             <span class="ruby-identifier">parse_visibility</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>
1397:             <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1398:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr'</span> <span class="ruby-keyword kw">then</span>
1399:             <span class="ruby-identifier">parse_attr</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1400:           <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^attr_(reader|writer|accessor)$/</span> <span class="ruby-keyword kw">then</span>
1401:             <span class="ruby-identifier">parse_attr_accessor</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1402:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'alias_method'</span> <span class="ruby-keyword kw">then</span>
1403:             <span class="ruby-identifier">parse_alias</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1404:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'require'</span>, <span class="ruby-value str">'include'</span> <span class="ruby-keyword kw">then</span>
1405:             <span class="ruby-comment cmt"># ignore</span>
1406:           <span class="ruby-keyword kw">else</span>
1407:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A#\#$/</span> <span class="ruby-keyword kw">then</span>
1408:               <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">text</span>
1409:               <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^# +:?attr(_reader|_writer|_accessor)?:/</span> <span class="ruby-keyword kw">then</span>
1410:                 <span class="ruby-identifier">parse_meta_attr</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1411:               <span class="ruby-keyword kw">else</span>
1412:                 <span class="ruby-identifier">parse_meta_method</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1413:               <span class="ruby-keyword kw">end</span>
1414:             <span class="ruby-keyword kw">end</span>
1415:           <span class="ruby-keyword kw">end</span>
1416:         <span class="ruby-keyword kw">end</span>
1417: 
1418:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1419:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;require&quot;</span> <span class="ruby-keyword kw">then</span>
1420:           <span class="ruby-identifier">parse_require</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
1421:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;include&quot;</span> <span class="ruby-keyword kw">then</span>
1422:           <span class="ruby-identifier">parse_include</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
1423:         <span class="ruby-keyword kw">end</span>
1424: 
1425:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkEND</span> <span class="ruby-keyword kw">then</span>
1426:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1427:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span>
1428:           <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">container</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
1429:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">save_visibility</span>
1430: 
1431:           <span class="ruby-identifier">parse_comment</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1432: 
1433:           <span class="ruby-keyword kw">return</span>
1434:         <span class="ruby-keyword kw">end</span>
1435:       <span class="ruby-keyword kw">else</span>
1436:         <span class="ruby-identifier">try_parse_comment</span> = <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
1437:       <span class="ruby-keyword kw">end</span>
1438: 
1439:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">try_parse_comment</span> <span class="ruby-keyword kw">then</span>
1440:         <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-identifier">parse_comment</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span>
1441:           <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1442: 
1443:         <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">false</span>
1444:       <span class="ruby-keyword kw">end</span>
1445: 
1446:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">keep_comment</span> <span class="ruby-keyword kw">then</span>
1447:         <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">new_comment</span> <span class="ruby-value str">''</span>
1448:         <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@encoding</span>
1449:       <span class="ruby-keyword kw">end</span>
1450: 
1451:       <span class="ruby-keyword kw">begin</span>
1452:         <span class="ruby-identifier">get_tkread</span>
1453:         <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1454:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkNL</span>
1455:     <span class="ruby-keyword kw">end</span>
1456:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000668">
                    
                    <a name="M000668"></a><b>parse_symbol_arg</b>(no = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Parse up to <tt>no</tt> symbol arguments
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000668_source')" id="l_M000668_source">show</a>
                        
                    </p>
                    <div id="M000668_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1461</span>
1461:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_symbol_arg</span>(<span class="ruby-identifier">no</span> = <span class="ruby-keyword kw">nil</span>)
1462:     <span class="ruby-identifier">args</span> = []
1463: 
1464:     <span class="ruby-identifier">skip_tkspace_comment</span>
1465: 
1466:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1467:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>
1468:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1469:         <span class="ruby-identifier">skip_tkspace_comment</span>
1470:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
1471:           <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk1</span>
1472:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
1473:         <span class="ruby-keyword kw">end</span>
1474: 
1475:         <span class="ruby-identifier">skip_tkspace_comment</span>
1476:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk2</span> = <span class="ruby-identifier">get_tk</span>
1477:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
1478:           <span class="ruby-keyword kw">break</span>
1479:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMA</span>
1480:         <span class="ruby-keyword kw">else</span>
1481:           <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;unexpected token: '#{tk2.inspect}'&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>
1482:           <span class="ruby-keyword kw">break</span>
1483:         <span class="ruby-keyword kw">end</span>
1484:       <span class="ruby-keyword kw">end</span>
1485:     <span class="ruby-keyword kw">else</span>
1486:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1487:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
1488:         <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
1489:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">args</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
1490:       <span class="ruby-keyword kw">end</span>
1491: 
1492:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1493:         <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1494: 
1495:         <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">get_tk</span>
1496:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk1</span> <span class="ruby-keyword kw">then</span>
1497:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk1</span>
1498:           <span class="ruby-keyword kw">break</span>
1499:         <span class="ruby-keyword kw">end</span>
1500: 
1501:         <span class="ruby-identifier">skip_tkspace_comment</span>
1502:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
1503:           <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
1504:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
1505:         <span class="ruby-keyword kw">end</span>
1506:       <span class="ruby-keyword kw">end</span>
1507:     <span class="ruby-keyword kw">end</span>
1508: 
1509:     <span class="ruby-identifier">args</span>
1510:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000669">
                    
                    <a name="M000669"></a><b>parse_symbol_in_arg</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns symbol text from the next token
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000669_source')" id="l_M000669_source">show</a>
                        
                    </p>
                    <div id="M000669_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1515</span>
1515:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_symbol_in_arg</span>
1516:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1517:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span>
1518:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^:/</span>, <span class="ruby-value str">''</span>)
1519:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span>
1520:       <span class="ruby-identifier">eval</span> <span class="ruby-ivar">@read</span>[<span class="ruby-value">-1</span>]
1521:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDSTRING</span>, <span class="ruby-constant">TkIDENTIFIER</span> <span class="ruby-keyword kw">then</span>
1522:       <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># ignore</span>
1523:     <span class="ruby-keyword kw">else</span>
1524:       <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Expected symbol or string, got #{tk.inspect}&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>
1525:       <span class="ruby-keyword kw">nil</span>
1526:     <span class="ruby-keyword kw">end</span>
1527:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000670">
                    
                    <a name="M000670"></a><b>parse_top_level_statements</b>(container)
                    
                </div>
                
                <div class="description">
                  <p>
Parses statements in the top-level <tt>container</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000670_source')" id="l_M000670_source">show</a>
                        
                    </p>
                    <div id="M000670_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1532</span>
1532:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_top_level_statements</span> <span class="ruby-identifier">container</span>
1533:     <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">collect_first_comment</span>
1534: 
1535:     <span class="ruby-identifier">look_for_directives_in</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
1536: 
1537:     <span class="ruby-ivar">@markup</span> = <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">format</span>
1538: 
1539:     <span class="ruby-comment cmt"># HACK move if to RDoc::Context#comment=</span>
1540:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1541: 
1542:     <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-constant">NORMAL</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">comment</span>
1543:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000671">
                    
                    <a name="M000671"></a><b>parse_visibility</b>(container, single, tk)
                    
                </div>
                
                <div class="description">
                  <p>
Determines the visibility in <tt>container</tt> from <tt>tk</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000671_source')" id="l_M000671_source">show</a>
                        
                    </p>
                    <div id="M000671_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1548</span>
1548:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>)
1549:     <span class="ruby-identifier">singleton</span> = (<span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
1550: 
1551:     <span class="ruby-identifier">vis_type</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1552: 
1553:     <span class="ruby-identifier">vis</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">vis_type</span>
1554:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private'</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:private</span>
1555:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'protected'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:protected</span>
1556:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'public'</span>    <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:public</span>
1557:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private_class_method'</span> <span class="ruby-keyword kw">then</span>
1558:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1559:             <span class="ruby-identifier">:private</span>
1560:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'public_class_method'</span> <span class="ruby-keyword kw">then</span>
1561:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1562:             <span class="ruby-identifier">:public</span>
1563:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
1564:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1565:             <span class="ruby-identifier">:public</span>
1566:           <span class="ruby-keyword kw">else</span>
1567:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Invalid visibility: #{tk.name}&quot;</span>
1568:           <span class="ruby-keyword kw">end</span>
1569: 
1570:     <span class="ruby-identifier">skip_tkspace_comment</span> <span class="ruby-keyword kw">false</span>
1571: 
1572:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">peek_tk</span>
1573:       <span class="ruby-comment cmt"># Ryan Davis suggested the extension to ignore modifiers, because he</span>
1574:       <span class="ruby-comment cmt"># often writes</span>
1575:       <span class="ruby-comment cmt">#</span>
1576:       <span class="ruby-comment cmt">#   protected unless $TESTING</span>
1577:       <span class="ruby-comment cmt">#</span>
1578:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>, <span class="ruby-constant">TkUNLESS_MOD</span>, <span class="ruby-constant">TkIF_MOD</span>, <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
1579:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">vis</span>
1580:     <span class="ruby-keyword kw">else</span>
1581:       <span class="ruby-identifier">new_methods</span> = []
1582: 
1583:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">vis_type</span>
1584:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
1585:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
1586:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span> <span class="ruby-identifier">args</span>, <span class="ruby-identifier">:private</span>, <span class="ruby-keyword kw">false</span>
1587: 
1588:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">methods_matching</span> <span class="ruby-identifier">args</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
1589:           <span class="ruby-identifier">s_m</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">dup</span>
1590:           <span class="ruby-identifier">s_m</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1591:           <span class="ruby-identifier">s_m</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1592:           <span class="ruby-identifier">new_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s_m</span>
1593:         <span class="ruby-keyword kw">end</span>
1594:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'public_class_method'</span>, <span class="ruby-value str">'private_class_method'</span> <span class="ruby-keyword kw">then</span>
1595:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
1596: 
1597:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">methods_matching</span> <span class="ruby-identifier">args</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
1598:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">parent</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">then</span>
1599:             <span class="ruby-identifier">m</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">dup</span>
1600:             <span class="ruby-identifier">m</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1601:             <span class="ruby-identifier">new_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">m</span>
1602:           <span class="ruby-keyword kw">end</span>
1603: 
1604:           <span class="ruby-identifier">m</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">vis</span>
1605:         <span class="ruby-keyword kw">end</span>
1606:       <span class="ruby-keyword kw">else</span>
1607:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
1608:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span> <span class="ruby-identifier">args</span>, <span class="ruby-identifier">vis</span>, <span class="ruby-identifier">singleton</span>
1609:       <span class="ruby-keyword kw">end</span>
1610: 
1611:       <span class="ruby-identifier">new_methods</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
1612:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">method</span>
1613:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span> <span class="ruby-keyword kw">then</span>
1614:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">method</span>
1615:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span> <span class="ruby-keyword kw">then</span>
1616:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">method</span>
1617:         <span class="ruby-keyword kw">end</span>
1618:         <span class="ruby-identifier">method</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">vis</span>
1619:       <span class="ruby-keyword kw">end</span>
1620:     <span class="ruby-keyword kw">end</span>
1621:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000674">
                    
                    <a name="M000674"></a><b>parse_yield</b>(context, single, tk, method)
                    
                </div>
                
                <div class="description">
                  <p>
Determines the block parameter for <tt>context</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000674_source')" id="l_M000674_source">show</a>
                        
                    </p>
                    <div id="M000674_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1626</span>
1626:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_yield</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">method</span>)
1627:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>
1628: 
1629:     <span class="ruby-identifier">get_tkread</span>
1630:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span> }
1631:     <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span> = <span class="ruby-identifier">parse_method_or_yield_parameters</span>
1632:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000679">
                    
                    <a name="M000679"></a><b>read_directive</b>(allowed)
                    
                </div>
                
                <div class="description">
                  <p>
Directives are modifier comments that can appear after class, module, or
method names. For example:
</p>
<pre>
  def fred # :yields: a, b
</pre>
<p>
or:
</p>
<pre>
  class MyClass # :nodoc:
</pre>
<p>
We return the directive name and any parameters as a two element array
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000679_source')" id="l_M000679_source">show</a>
                        
                    </p>
                    <div id="M000679_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1646</span>
1646:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_directive</span> <span class="ruby-identifier">allowed</span>
1647:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1648: 
1649:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1650:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s*:?(\w+):\s*(.*)/</span>
1651: 
1652:       <span class="ruby-identifier">directive</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">downcase</span>
1653: 
1654:       <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">directive</span>, <span class="ruby-identifier">$2</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">allowed</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">directive</span>
1655:     <span class="ruby-keyword kw">else</span>
1656:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1657:     <span class="ruby-keyword kw">end</span>
1658:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000680">
                    
                    <a name="M000680"></a><b>read_documentation_modifiers</b>(context, allow)
                    
                </div>
                
                <div class="description">
                  <p>
Handles the directive for <tt>context</tt> if the directive is listed in
<tt>allow</tt>. This method is called for directives following a
definition.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000680_source')" id="l_M000680_source">show</a>
                        
                    </p>
                    <div id="M000680_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1664</span>
1664:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">context</span>, <span class="ruby-identifier">allow</span>
1665:     <span class="ruby-identifier">directive</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_directive</span> <span class="ruby-identifier">allow</span>
1666: 
1667:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">directive</span>
1668: 
1669:     <span class="ruby-ivar">@preprocess</span>.<span class="ruby-identifier">handle_directive</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">directive</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">context</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
1670:       <span class="ruby-keyword kw">if</span> <span class="ruby-node">%w[notnew not_new not-new]</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword kw">then</span>
1671:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">dont_rename_initialize</span> = <span class="ruby-keyword kw">true</span>
1672: 
1673:         <span class="ruby-keyword kw">true</span>
1674:       <span class="ruby-keyword kw">end</span>
1675:     <span class="ruby-keyword kw">end</span>
1676:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000683">
                    
                    <a name="M000683"></a><b>remove_private_comments</b>(comment)
                    
                </div>
                
                <div class="description">
                  <p>
Removes private comments from <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000683_source')" id="l_M000683_source">show</a>
                        
                    </p>
                    <div id="M000683_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1683</span>
1683:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_private_comments</span> <span class="ruby-identifier">comment</span>
1684:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">remove_private</span>
1685:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000684">
                    
                    <a name="M000684"></a><b>scan</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Scans this ruby file for ruby constructs
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000684_source')" id="l_M000684_source">show</a>
                        
                    </p>
                    <div id="M000684_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1690</span>
1690:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan</span>
1691:     <span class="ruby-identifier">reset</span>
1692: 
1693:     <span class="ruby-identifier">catch</span> <span class="ruby-identifier">:eof</span> <span class="ruby-keyword kw">do</span>
1694:       <span class="ruby-keyword kw">begin</span>
1695:         <span class="ruby-identifier">parse_top_level_statements</span> <span class="ruby-ivar">@top_level</span>
1696: 
1697:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">StandardError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1698:         <span class="ruby-identifier">bytes</span> = <span class="ruby-value str">''</span>
1699: 
1700:         <span class="ruby-value">20</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">ungetc</span> <span class="ruby-keyword kw">end</span>
1701:         <span class="ruby-identifier">count</span> = <span class="ruby-value">0</span>
1702:         <span class="ruby-value">60</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
1703:           <span class="ruby-identifier">count</span> = <span class="ruby-identifier">i</span>
1704:           <span class="ruby-identifier">byte</span> = <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">getc</span>
1705:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">byte</span>
1706:           <span class="ruby-identifier">bytes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">byte</span>
1707:         <span class="ruby-keyword kw">end</span>
1708:         <span class="ruby-identifier">count</span> <span class="ruby-operator">-=</span> <span class="ruby-value">20</span>
1709:         <span class="ruby-identifier">count</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">ungetc</span> <span class="ruby-keyword kw">end</span>
1710: 
1711:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;\n\#{self.class} failure around line \#{@scanner.line_no} of\n\#{@file_name}\n\n&quot;</span>
1712: 
1713:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">bytes</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
1714:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>
1715:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">bytes</span>.<span class="ruby-identifier">inspect</span>
1716:         <span class="ruby-keyword kw">end</span>
1717: 
1718:         <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
1719:       <span class="ruby-keyword kw">end</span>
1720:     <span class="ruby-keyword kw">end</span>
1721: 
1722:     <span class="ruby-ivar">@top_level</span>
1723:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000690">
                    
                    <a name="M000690"></a><b>skip_for_variable</b>()
                    
                </div>
                
                <div class="description">
                  <p>
skip the var [in] part of a &#8216;for&#8217; statement
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000690_source')" id="l_M000690_source">show</a>
                        
                    </p>
                    <div id="M000690_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1781</span>
1781:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_for_variable</span>
1782:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1783:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1784:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1785:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1786:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkIN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1787:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000691">
                    
                    <a name="M000691"></a><b>skip_method</b>(container)
                    
                </div>
                
                <div class="description">
                  <p>
Skips the next method in <tt>container</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000691_source')" id="l_M000691_source">show</a>
                        
                    </p>
                    <div id="M000691_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1792</span>
1792:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_method</span> <span class="ruby-identifier">container</span>
1793:     <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;anon&quot;</span>
1794:     <span class="ruby-identifier">parse_method_parameters</span> <span class="ruby-identifier">meth</span>
1795:     <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">meth</span>
1796:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000688">
                    
                    <a name="M000688"></a><b>skip_optional_do_after_expression</b>()
                    
                </div>
                
                <div class="description">
                  <p>
while, until, and for have an optional do
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000688_source')" id="l_M000688_source">show</a>
                        
                    </p>
                    <div id="M000688_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1734</span>
1734:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_optional_do_after_expression</span>
1735:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1736:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1737:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1738:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-keyword kw">then</span>
1739:       <span class="ruby-identifier">end_token</span> = <span class="ruby-constant">TkRPAREN</span>
1740:     <span class="ruby-keyword kw">else</span>
1741:       <span class="ruby-identifier">end_token</span> = <span class="ruby-constant">TkNL</span>
1742:     <span class="ruby-keyword kw">end</span>
1743: 
1744:     <span class="ruby-identifier">b_nest</span> = <span class="ruby-value">0</span>
1745:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1746:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span> }
1747: 
1748:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1749:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1750:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
1751:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b_nest</span>.<span class="ruby-identifier">zero?</span>
1752:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-keyword kw">then</span>
1753:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1754:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkBEGIN</span> <span class="ruby-keyword kw">then</span>
1755:         <span class="ruby-identifier">b_nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1756:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkEND</span> <span class="ruby-keyword kw">then</span>
1757:         <span class="ruby-identifier">b_nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1758:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDO</span>
1759:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
1760:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span> <span class="ruby-keyword kw">then</span>
1761:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
1762:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1763:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
1764:         <span class="ruby-keyword kw">else</span>
1765:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
1766:         <span class="ruby-keyword kw">end</span>
1767:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">then</span>
1768:         <span class="ruby-keyword kw">break</span>
1769:       <span class="ruby-keyword kw">end</span>
1770:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1771:     <span class="ruby-keyword kw">end</span>
1772: 
1773:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1774: 
1775:     <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkDO</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
1776:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000694">
                    
                    <a name="M000694"></a><b>skip_tkspace_comment</b>(skip_nl = true)
                    
                </div>
                
                <div class="description">
                  <p>
Skip spaces until a comment is found
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000694_source')" id="l_M000694_source">show</a>
                        
                    </p>
                    <div id="M000694_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1801</span>
1801:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_tkspace_comment</span>(<span class="ruby-identifier">skip_nl</span> = <span class="ruby-keyword kw">true</span>)
1802:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1803:       <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-identifier">skip_nl</span>
1804:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
1805:       <span class="ruby-identifier">get_tk</span>
1806:     <span class="ruby-keyword kw">end</span>
1807:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000695">
                    
                    <a name="M000695"></a><b>warn</b>(message)
                    
                </div>
                
                <div class="description">
                  <p>
Prints <tt>message</tt> to +$stderr+ unless we&#8217;re being quiet
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000695_source')" id="l_M000695_source">show</a>
                        
                    </p>
                    <div id="M000695_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1812</span>
1812:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">warn</span> <span class="ruby-identifier">message</span>
1813:     <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">warn</span> <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">message</span>
1814:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    