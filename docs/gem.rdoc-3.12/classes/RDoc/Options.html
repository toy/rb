<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RDoc::Options</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            RDoc::Options 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/rdoc/options_rb.html">lib/rdoc/options.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="Options.html">RDoc::Options</a> handles the parsing and storage of
options
</p>
<h2>Saved <a href="Options.html">Options</a></h2>
<p>
You can save some options like the markup format in the
<tt>.rdoc_options</tt> file in your gem. The easiest way to do this is:
</p>
<pre>
  rdoc --markup tomdoc --write-options
</pre>
<p>
Which will automatically create the file and fill it with the options you
specified.
</p>
<p>
The following options will not be saved since they interfere with the
user&#8217;s preferences or with the normal operation of RDoc:
</p>
<ul>
<li><tt>--coverage-report</tt>

</li>
<li><tt>--dry-run</tt>

</li>
<li><tt>--encoding</tt>

</li>
<li><tt>--force-update</tt>

</li>
<li><tt>--format</tt>

</li>
<li><tt>--pipe</tt>

</li>
<li><tt>--quiet</tt>

</li>
<li><tt>--template</tt>

</li>
<li><tt>--verbose</tt>

</li>
</ul>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000574">check_files</a>,</li>
                
                <li><a href="#M000575">check_generator</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000576">default_title=</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000580">finish</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000581">generator_descriptions</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000583">parse</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M000598">quiet</a>,</li>
                
                <li><a href="#M000599">quiet=</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000600">sanitize_path</a>,</li>
                
                <li><a href="#M000601">setup_generator</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000602">template_dir_for</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000604">warn</a>,</li>
                
                <li><a href="#M000605">write_options</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">DEPRECATED</td>
            <td>=</td>
            <td class="attr-value">{     '--accessor'      =&gt; 'support discontinued',     '--diagram'       =&gt; 'support discontinued',     '--help-output'   =&gt; 'support discontinued',     '--image-format'  =&gt; 'was an option for --diagram',     '--inline-source' =&gt; 'source code is now always inlined',     '--merge'         =&gt; 'ri now always merges class information',     '--one-file'      =&gt; 'support discontinued',     '--op-name'       =&gt; 'support discontinued',     '--opname'        =&gt; 'support discontinued',     '--promiscuous'   =&gt; 'files always only document their content',     '--ri-system'     =&gt; 'Ruby installers use other techniques',   }</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The deprecated options.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SPECIAL</td>
            <td>=</td>
            <td class="attr-value">%w[     coverage_report     dry_run     encoding     files     force_output     force_update     generator     generator_name     generator_options     generators     op_dir     option_parser     pipe     rdoc_include     static_path     stylesheet_url     template     template_dir     update_output_dir     verbosity     write_options   ]</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="RDoc.html">RDoc</a> options ignored (or handled specially) by
&#8212;write-options
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">Path</td>
            <td>=</td>
            <td class="attr-value">Object.new</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="Options.html#Path">Path</a> option validator for OptionParser
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PathArray</td>
            <td>=</td>
            <td class="attr-value">Object.new</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Array of Paths option validator for OptionParser
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">Template</td>
            <td>=</td>
            <td class="attr-value">Object.new</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="Options.html#Template">Template</a> option validator for
OptionParser
</p>
</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>charset</td>
            <td class='attr-desc'><p>
Character-set for HTML output. <a href="Options.html#encoding">encoding</a>
is preferred over <a href="Options.html#charset">charset</a>
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>dry_run</td>
            <td class='attr-desc'><p>
If true, <a href="RDoc.html">RDoc</a> will not write any files.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>encoding</td>
            <td class='attr-desc'><p>
<a href="Encoding.html">Encoding</a> of output where. This is set via
&#8212;encoding.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>exclude</td>
            <td class='attr-desc'><p>
Files matching this pattern will be excluded
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>files</td>
            <td class='attr-desc'><p>
The list of files to be processed
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>force_output</td>
            <td class='attr-desc'><p>
Create the output even if the output directory does not look like an rdoc
output directory
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>force_update</td>
            <td class='attr-desc'><p>
Scan newer sources than the flag file if true.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>formatter</td>
            <td class='attr-desc'><p>
Formatter to mark up text with
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>generator</td>
            <td class='attr-desc'><p>
Description of the output generator (set with the <tt>--fmt</tt> option)
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>generator_options</td>
            <td class='attr-desc'><p>
Loaded generator options. Used to prevent &#8212;help from loading the same
options multiple times.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>hyperlink_all</td>
            <td class='attr-desc'><p>
Old rdoc behavior: hyperlink all words that match a method name, even if
not preceded by &#8217;#&#8217; or &#8217;::&#8217;
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>line_numbers</td>
            <td class='attr-desc'><p>
<a href="Include.html">Include</a> line numbers in the source code
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>main_page</td>
            <td class='attr-desc'><p>
Name of the file, class or module to display in the initial index page (if
not specified the first file we encounter is used)
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>markup</td>
            <td class='attr-desc'><p>
The default markup format. The default is &#8216;rdoc&#8217;.
&#8216;tomdoc&#8217; and &#8216;rd&#8217; are also built-in.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>coverage_report</td>
            <td class='attr-desc'><p>
If true, only report on undocumented files
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>op_dir</td>
            <td class='attr-desc'><p>
The name of the output directory
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>option_parser</td>
            <td class='attr-desc'><p>
The OptionParser for this instance
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>pipe</td>
            <td class='attr-desc'><p>
Is <a href="RDoc.html">RDoc</a> in pipe mode?
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>rdoc_include</td>
            <td class='attr-desc'><p>
Array of directories to search for files to satisfy an :include:
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>show_hash</td>
            <td class='attr-desc'><p>
<a href="Include.html">Include</a> the &#8217;#&#8217; at the front of
hyperlinked instance method names
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>static_path</td>
            <td class='attr-desc'><p>
Directory to copy static files from
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>tab_width</td>
            <td class='attr-desc'><p>
The number of columns in a tab
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>template</td>
            <td class='attr-desc'><p>
<a href="Options.html#Template">Template</a> to be used when generating
output
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>template_dir</td>
            <td class='attr-desc'><p>
Directory the template lives in
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>title</td>
            <td class='attr-desc'><p>
Documentation title
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>update_output_dir</td>
            <td class='attr-desc'><p>
Should <a href="RDoc.html">RDoc</a> update the timestamps in the output
dir?
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>verbosity</td>
            <td class='attr-desc'><p>
Verbosity, zero means quiet
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>webcvs</td>
            <td class='attr-desc'><p>
URL of web cvs frontend
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>visibility</td>
            <td class='attr-desc'><p>
Minimum visibility of a documented method. One of <tt>:public</tt>,
<tt>:protected</tt>, <tt>:private</tt>. May be overridden on a per-method
basis with the :doc: directive.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000574">
                    
                    <a name="M000574"></a><b>check_files</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Check that the files on the command line exist
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000574_source')" id="l_M000574_source">show</a>
                        
                    </p>
                    <div id="M000574_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 344</span>
344:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_files</span>
345:     <span class="ruby-ivar">@files</span>.<span class="ruby-identifier">delete_if</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
346:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">file</span> <span class="ruby-keyword kw">then</span>
347:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">readable?</span> <span class="ruby-identifier">file</span> <span class="ruby-keyword kw">then</span>
348:           <span class="ruby-keyword kw">false</span>
349:         <span class="ruby-keyword kw">else</span>
350:           <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;file '#{file}' not readable&quot;</span>
351: 
352:           <span class="ruby-keyword kw">true</span>
353:         <span class="ruby-keyword kw">end</span>
354:       <span class="ruby-keyword kw">else</span>
355:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;file '#{file}' not found&quot;</span>
356: 
357:         <span class="ruby-keyword kw">true</span>
358:       <span class="ruby-keyword kw">end</span>
359:     <span class="ruby-keyword kw">end</span>
360:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000575">
                    
                    <a name="M000575"></a><b>check_generator</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Ensure only one generator is loaded
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000575_source')" id="l_M000575_source">show</a>
                        
                    </p>
                    <div id="M000575_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 365</span>
365:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_generator</span>
366:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@generator</span> <span class="ruby-keyword kw">then</span>
367:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidOption</span>,
368:         <span class="ruby-node">&quot;generator already set to #{@generator_name}&quot;</span>
369:     <span class="ruby-keyword kw">end</span>
370:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000576">
                    
                    <a name="M000576"></a><b>default_title=</b>(string)
                    
                </div>
                
                <div class="description">
                  <p>
Set the title, but only if not already set. Used to set the title from a
source file, so that a title set from the command line will have the
priority.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000576_source')" id="l_M000576_source">show</a>
                        
                    </p>
                    <div id="M000576_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 377</span>
377:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_title=</span>(<span class="ruby-identifier">string</span>)
378:     <span class="ruby-ivar">@title</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">string</span>
379:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000580">
                    
                    <a name="M000580"></a><b>finish</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Completes any unfinished option setup business such as filtering for
existent files, creating a regexp for <a
href="Options.html#exclude">exclude</a> and setting a default <a
href="Options.html#template">template</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000580_source')" id="l_M000580_source">show</a>
                        
                    </p>
                    <div id="M000580_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 404</span>
404:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">finish</span>
405:     <span class="ruby-ivar">@op_dir</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">'doc'</span>
406: 
407:     <span class="ruby-ivar">@rdoc_include</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;.&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@rdoc_include</span>.<span class="ruby-identifier">empty?</span>
408: 
409:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@exclude</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">Regexp</span> <span class="ruby-operator">===</span> <span class="ruby-ivar">@exclude</span> <span class="ruby-keyword kw">then</span>
410:       <span class="ruby-comment cmt"># done, #finish is being re-run</span>
411:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@exclude</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
412:       <span class="ruby-ivar">@exclude</span> = <span class="ruby-keyword kw">nil</span>
413:     <span class="ruby-keyword kw">else</span>
414:       <span class="ruby-ivar">@exclude</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@exclude</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;|&quot;</span>))
415:     <span class="ruby-keyword kw">end</span>
416: 
417:     <span class="ruby-identifier">check_files</span>
418: 
419:     <span class="ruby-comment cmt"># If no template was specified, use the default template for the output</span>
420:     <span class="ruby-comment cmt"># formatter</span>
421: 
422:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@template</span> <span class="ruby-keyword kw">then</span>
423:       <span class="ruby-ivar">@template</span>     = <span class="ruby-ivar">@generator_name</span>
424:       <span class="ruby-ivar">@template_dir</span> = <span class="ruby-identifier">template_dir_for</span> <span class="ruby-ivar">@template</span>
425:     <span class="ruby-keyword kw">end</span>
426: 
427:     <span class="ruby-keyword kw">self</span>
428:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000581">
                    
                    <a name="M000581"></a><b>generator_descriptions</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a properly-space list of generators and their descriptions.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000581_source')" id="l_M000581_source">show</a>
                        
                    </p>
                    <div id="M000581_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 433</span>
433:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generator_descriptions</span>
434:     <span class="ruby-identifier">lengths</span> = []
435: 
436:     <span class="ruby-identifier">generators</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">GENERATORS</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">generator</span><span class="ruby-operator">|</span>
437:       <span class="ruby-identifier">lengths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">length</span>
438: 
439:       <span class="ruby-identifier">description</span> = <span class="ruby-identifier">generator</span><span class="ruby-operator">::</span><span class="ruby-constant">DESCRIPTION</span> <span class="ruby-keyword kw">if</span>
440:         <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:DESCRIPTION</span>
441: 
442:       [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">description</span>]
443:     <span class="ruby-keyword kw">end</span>
444: 
445:     <span class="ruby-identifier">longest</span> = <span class="ruby-identifier">lengths</span>.<span class="ruby-identifier">max</span>
446: 
447:     <span class="ruby-identifier">generators</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">description</span><span class="ruby-operator">|</span>
448:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">description</span> <span class="ruby-keyword kw">then</span>
449:         <span class="ruby-value str">&quot;  %-*s - %s&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">longest</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">description</span>]
450:       <span class="ruby-keyword kw">else</span>
451:         <span class="ruby-node">&quot;  #{name}&quot;</span>
452:       <span class="ruby-keyword kw">end</span>
453:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span> <span class="ruby-value str">&quot;\n&quot;</span>
454:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000583">
                    
                    <a name="M000583"></a><b>parse</b>(argv)
                    
                </div>
                
                <div class="description">
                  <p>
Parses command line options.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000583_source')" id="l_M000583_source">show</a>
                        
                    </p>
                    <div id="M000583_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 459</span>
459:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse</span> <span class="ruby-identifier">argv</span>
460:     <span class="ruby-identifier">ignore_invalid</span> = <span class="ruby-keyword kw">true</span>
461: 
462:     <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-value">0</span>, <span class="ruby-operator">*</span><span class="ruby-constant">ENV</span>[<span class="ruby-value str">'RDOCOPT'</span>].<span class="ruby-identifier">split</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'RDOCOPT'</span>]
463: 
464:     <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OptionParser</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">opt</span><span class="ruby-operator">|</span>
465:       <span class="ruby-ivar">@option_parser</span> = <span class="ruby-identifier">opt</span>
466:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">program_name</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span> <span class="ruby-identifier">$0</span>
467:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">version</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>
468:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">release</span> = <span class="ruby-keyword kw">nil</span>
469:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">summary_indent</span> = <span class="ruby-value str">' '</span> <span class="ruby-operator">*</span> <span class="ruby-value">4</span>
470:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">banner</span> = <span class="ruby-value str">&quot;Usage: \#{opt.program_name} [options] [names...]\n\nFiles are parsed, and the information they contain collected, before any\noutput is produced. This allows cross references between all files to be\nresolved. If a name is a directory, it is traversed. If no names are\nspecified, all Ruby files in the current directory (and subdirectories) are\nprocessed.\n\nHow RDoc generates output depends on the output formatter being used, and on\nthe options you give.\n\nOptions can be specified via the RDOCOPT environment variable, which\nfunctions similar to the RUBYOPT environment variable for ruby.\n\n$ export RDOCOPT=\&quot;--show-hash\&quot;\n\nwill make rdoc show hashes in method links by default.  Command-line options\nalways will override those in RDOCOPT.\n\nAvailable formatters:\n\n\#{generator_descriptions}\n\nRDoc understands the following file formats:\n\n&quot;</span>
471: 
472:       <span class="ruby-identifier">parsers</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>,<span class="ruby-identifier">parser</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">parser</span>] = [] }
473: 
474:       <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">parsers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">regexp</span>, <span class="ruby-identifier">parser</span><span class="ruby-operator">|</span>
475:         <span class="ruby-identifier">parsers</span>[<span class="ruby-identifier">parser</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'RDoc::Parser::'</span>, <span class="ruby-value str">''</span>)] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">regexp</span>.<span class="ruby-identifier">source</span>
476:       <span class="ruby-keyword kw">end</span>
477: 
478:       <span class="ruby-identifier">parsers</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">parser</span>, <span class="ruby-identifier">regexp</span><span class="ruby-operator">|</span>
479:         <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">banner</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  - #{parser}: #{regexp.join ', '}\n&quot;</span>
480:       <span class="ruby-keyword kw">end</span>
481: 
482:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">banner</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n  The following options are deprecated:\n\n&quot;</span>
483: 
484:       <span class="ruby-identifier">name_length</span> = <span class="ruby-constant">DEPRECATED</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">length</span> }.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">length</span>
485: 
486:       <span class="ruby-constant">DEPRECATED</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">reason</span><span class="ruby-operator">|</span>
487:         <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">banner</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;    %*1$2$s  %3$s\n&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-operator">-</span><span class="ruby-identifier">name_length</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">reason</span>]
488:       <span class="ruby-keyword kw">end</span>
489: 
490:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">accept</span> <span class="ruby-constant">Template</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">template</span><span class="ruby-operator">|</span>
491:         <span class="ruby-identifier">template_dir</span> = <span class="ruby-identifier">template_dir_for</span> <span class="ruby-identifier">template</span>
492: 
493:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">template_dir</span> <span class="ruby-keyword kw">then</span>
494:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;could not find template #{template}&quot;</span>
495:           <span class="ruby-keyword kw">nil</span>
496:         <span class="ruby-keyword kw">else</span>
497:           [<span class="ruby-identifier">template</span>, <span class="ruby-identifier">template_dir</span>]
498:         <span class="ruby-keyword kw">end</span>
499:       <span class="ruby-keyword kw">end</span>
500: 
501:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">accept</span> <span class="ruby-constant">Path</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directory</span><span class="ruby-operator">|</span>
502:         <span class="ruby-identifier">directory</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span> <span class="ruby-identifier">directory</span>
503: 
504:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidArgument</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">directory</span>
505: 
506:         <span class="ruby-identifier">directory</span>
507:       <span class="ruby-keyword kw">end</span>
508: 
509:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">accept</span> <span class="ruby-constant">PathArray</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directories</span>,<span class="ruby-operator">|</span>
510:         <span class="ruby-identifier">directories</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">directories</span> <span class="ruby-keyword kw">then</span>
511:                         <span class="ruby-identifier">directories</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">','</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">empty?</span> }
512:                       <span class="ruby-keyword kw">end</span>
513: 
514:         <span class="ruby-identifier">directories</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directory</span><span class="ruby-operator">|</span>
515:           <span class="ruby-identifier">directory</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span> <span class="ruby-identifier">directory</span>
516: 
517:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidArgument</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">directory</span>
518: 
519:           <span class="ruby-identifier">directory</span>
520:         <span class="ruby-keyword kw">end</span>
521:       <span class="ruby-keyword kw">end</span>
522: 
523:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
524:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-value str">&quot;Parsing options:&quot;</span>
525:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
526: 
527:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span> <span class="ruby-keyword kw">then</span>
528:         <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--encoding=ENCODING&quot;</span>, <span class="ruby-value str">&quot;-e&quot;</span>, <span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span> },
529:                <span class="ruby-value str">&quot;Specifies the output encoding.  All files&quot;</span>,
530:                <span class="ruby-value str">&quot;read will be converted to this encoding.&quot;</span>,
531:                <span class="ruby-value str">&quot;Preferred over --charset&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
532:                  <span class="ruby-ivar">@encoding</span> = <span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">value</span>
533:                  <span class="ruby-ivar">@charset</span> = <span class="ruby-ivar">@encoding</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment cmt"># may not be valid value</span>
534:                <span class="ruby-keyword kw">end</span>
535: 
536:         <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
537:       <span class="ruby-keyword kw">end</span>
538: 
539:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--all&quot;</span>, <span class="ruby-value str">&quot;-a&quot;</span>,
540:              <span class="ruby-value str">&quot;Synonym for --visibility=private.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
541:         <span class="ruby-ivar">@visibility</span> = <span class="ruby-identifier">:private</span>
542:       <span class="ruby-keyword kw">end</span>
543: 
544:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
545: 
546:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--exclude=PATTERN&quot;</span>, <span class="ruby-value str">&quot;-x&quot;</span>, <span class="ruby-constant">Regexp</span>,
547:              <span class="ruby-value str">&quot;Do not process files or directories&quot;</span>,
548:              <span class="ruby-value str">&quot;matching PATTERN.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
549:         <span class="ruby-ivar">@exclude</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">value</span>
550:       <span class="ruby-keyword kw">end</span>
551: 
552:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
553: 
554:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--extension=NEW=OLD&quot;</span>, <span class="ruby-value str">&quot;-E&quot;</span>,
555:              <span class="ruby-value str">&quot;Treat files ending with .new as if they&quot;</span>,
556:              <span class="ruby-value str">&quot;ended with .old. Using '-E cgi=rb' will&quot;</span>,
557:              <span class="ruby-value str">&quot;cause xxx.cgi to be parsed as a Ruby file.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
558:         <span class="ruby-identifier">new</span>, <span class="ruby-identifier">old</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/=/</span>, <span class="ruby-value">2</span>)
559: 
560:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">old</span> <span class="ruby-keyword kw">then</span>
561:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidArgument</span>, <span class="ruby-value str">&quot;Invalid parameter to '-E'&quot;</span>
562:         <span class="ruby-keyword kw">end</span>
563: 
564:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">alias_extension</span> <span class="ruby-identifier">old</span>, <span class="ruby-identifier">new</span> <span class="ruby-keyword kw">then</span>
565:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidArgument</span>, <span class="ruby-node">&quot;Unknown extension .#{old} to -E&quot;</span>
566:         <span class="ruby-keyword kw">end</span>
567:       <span class="ruby-keyword kw">end</span>
568: 
569:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
570: 
571:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--[no-]force-update&quot;</span>, <span class="ruby-value str">&quot;-U&quot;</span>,
572:              <span class="ruby-value str">&quot;Forces rdoc to scan all sources even if&quot;</span>,
573:              <span class="ruby-value str">&quot;newer than the flag file.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
574:         <span class="ruby-ivar">@force_update</span> = <span class="ruby-identifier">value</span>
575:       <span class="ruby-keyword kw">end</span>
576: 
577:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
578: 
579:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--pipe&quot;</span>,
580:              <span class="ruby-value str">&quot;Convert RDoc on stdin to HTML&quot;</span>) <span class="ruby-keyword kw">do</span>
581:         <span class="ruby-ivar">@pipe</span> = <span class="ruby-keyword kw">true</span>
582:       <span class="ruby-keyword kw">end</span>
583: 
584:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
585: 
586:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--tab-width=WIDTH&quot;</span>, <span class="ruby-value str">&quot;-w&quot;</span>, <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">DecimalInteger</span>,
587:              <span class="ruby-value str">&quot;Set the width of tab characters.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
588:         <span class="ruby-ivar">@tab_width</span> = <span class="ruby-identifier">value</span>
589:       <span class="ruby-keyword kw">end</span>
590: 
591:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
592: 
593:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--visibility=VISIBILITY&quot;</span>, <span class="ruby-value str">&quot;-V&quot;</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">VISIBILITIES</span>,
594:              <span class="ruby-value str">&quot;Minimum visibility to document a method.&quot;</span>,
595:              <span class="ruby-value str">&quot;One of 'public', 'protected' (the default)&quot;</span>,
596:              <span class="ruby-value str">&quot;or 'private'. Can be abbreviated.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
597:         <span class="ruby-ivar">@visibility</span> = <span class="ruby-identifier">value</span>
598:       <span class="ruby-keyword kw">end</span>
599: 
600:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
601: 
602:       <span class="ruby-identifier">markup_formats</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-constant">MARKUP_FORMAT</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
603: 
604:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--markup=MARKUP&quot;</span>, <span class="ruby-identifier">markup_formats</span>,
605:              <span class="ruby-value str">&quot;The markup format for the named files.&quot;</span>,
606:              <span class="ruby-value str">&quot;The default is rdoc.  Valid values are:&quot;</span>,
607:              <span class="ruby-identifier">markup_formats</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
608:         <span class="ruby-ivar">@markup</span> = <span class="ruby-identifier">value</span>
609:       <span class="ruby-keyword kw">end</span>
610: 
611:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
612:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-value str">&quot;Common generator options:&quot;</span>
613:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
614: 
615:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--force-output&quot;</span>, <span class="ruby-value str">&quot;-O&quot;</span>,
616:              <span class="ruby-value str">&quot;Forces rdoc to write the output files,&quot;</span>,
617:              <span class="ruby-value str">&quot;even if the output directory exists&quot;</span>,
618:              <span class="ruby-value str">&quot;and does not seem to have been created&quot;</span>,
619:              <span class="ruby-value str">&quot;by rdoc.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
620:         <span class="ruby-ivar">@force_output</span> = <span class="ruby-identifier">value</span>
621:       <span class="ruby-keyword kw">end</span>
622: 
623:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
624: 
625:       <span class="ruby-identifier">generator_text</span> = <span class="ruby-ivar">@generators</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;  #{name}&quot;</span> }.<span class="ruby-identifier">sort</span>
626: 
627:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-f&quot;</span>, <span class="ruby-value str">&quot;--fmt=FORMAT&quot;</span>, <span class="ruby-value str">&quot;--format=FORMAT&quot;</span>, <span class="ruby-ivar">@generators</span>.<span class="ruby-identifier">keys</span>,
628:              <span class="ruby-value str">&quot;Set the output formatter.  One of:&quot;</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">generator_text</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
629:         <span class="ruby-identifier">check_generator</span>
630: 
631:         <span class="ruby-ivar">@generator_name</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">downcase</span>
632:         <span class="ruby-identifier">setup_generator</span>
633:       <span class="ruby-keyword kw">end</span>
634: 
635:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
636: 
637:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--include=DIRECTORIES&quot;</span>, <span class="ruby-value str">&quot;-i&quot;</span>, <span class="ruby-constant">PathArray</span>,
638:              <span class="ruby-value str">&quot;Set (or add to) the list of directories to&quot;</span>,
639:              <span class="ruby-value str">&quot;be searched when satisfying :include:&quot;</span>,
640:              <span class="ruby-value str">&quot;requests. Can be used more than once.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
641:         <span class="ruby-ivar">@rdoc_include</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">strip</span> }
642:       <span class="ruby-keyword kw">end</span>
643: 
644:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
645: 
646:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--[no-]coverage-report=[LEVEL]&quot;</span>, <span class="ruby-value str">&quot;--[no-]dcov&quot;</span>, <span class="ruby-value str">&quot;-C&quot;</span>, <span class="ruby-constant">Integer</span>,
647:              <span class="ruby-value str">&quot;Prints a report on undocumented items.&quot;</span>,
648:              <span class="ruby-value str">&quot;Does not generate files.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
649:         <span class="ruby-identifier">value</span> = <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-comment cmt"># Integer converts -C to nil</span>
650: 
651:         <span class="ruby-ivar">@coverage_report</span> = <span class="ruby-identifier">value</span>
652:         <span class="ruby-ivar">@force_update</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>
653:       <span class="ruby-keyword kw">end</span>
654: 
655:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
656: 
657:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--output=DIR&quot;</span>, <span class="ruby-value str">&quot;--op&quot;</span>, <span class="ruby-value str">&quot;-o&quot;</span>,
658:              <span class="ruby-value str">&quot;Set the output directory.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
659:         <span class="ruby-ivar">@op_dir</span> = <span class="ruby-identifier">value</span>
660:       <span class="ruby-keyword kw">end</span>
661: 
662:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
663: 
664:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-d&quot;</span>,
665:              <span class="ruby-value str">&quot;Deprecated --diagram option.&quot;</span>,
666:              <span class="ruby-value str">&quot;Prevents firing debug mode&quot;</span>,
667:              <span class="ruby-value str">&quot;with legacy invocation.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
668:       <span class="ruby-keyword kw">end</span>
669: 
670:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
671:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-value str">'HTML generator options:'</span>
672:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
673: 
674:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--charset=CHARSET&quot;</span>, <span class="ruby-value str">&quot;-c&quot;</span>,
675:              <span class="ruby-value str">&quot;Specifies the output HTML character-set.&quot;</span>,
676:              <span class="ruby-value str">&quot;Use --encoding instead of --charset if&quot;</span>,
677:              <span class="ruby-value str">&quot;available.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
678:         <span class="ruby-ivar">@charset</span> = <span class="ruby-identifier">value</span>
679:       <span class="ruby-keyword kw">end</span>
680: 
681:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
682: 
683:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--hyperlink-all&quot;</span>, <span class="ruby-value str">&quot;-A&quot;</span>,
684:              <span class="ruby-value str">&quot;Generate hyperlinks for all words that&quot;</span>,
685:              <span class="ruby-value str">&quot;correspond to known methods, even if they&quot;</span>,
686:              <span class="ruby-value str">&quot;do not start with '#' or '::' (legacy&quot;</span>,
687:              <span class="ruby-value str">&quot;behavior).&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
688:         <span class="ruby-ivar">@hyperlink_all</span> = <span class="ruby-identifier">value</span>
689:       <span class="ruby-keyword kw">end</span>
690: 
691:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
692: 
693:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--main=NAME&quot;</span>, <span class="ruby-value str">&quot;-m&quot;</span>,
694:              <span class="ruby-value str">&quot;NAME will be the initial page displayed.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
695:         <span class="ruby-ivar">@main_page</span> = <span class="ruby-identifier">value</span>
696:       <span class="ruby-keyword kw">end</span>
697: 
698:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
699: 
700:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--[no-]line-numbers&quot;</span>, <span class="ruby-value str">&quot;-N&quot;</span>,
701:              <span class="ruby-value str">&quot;Include line numbers in the source code.&quot;</span>,
702:              <span class="ruby-value str">&quot;By default, only the number of the first&quot;</span>,
703:              <span class="ruby-value str">&quot;line is displayed, in a leading comment.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
704:         <span class="ruby-ivar">@line_numbers</span> = <span class="ruby-identifier">value</span>
705:       <span class="ruby-keyword kw">end</span>
706: 
707:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
708: 
709:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--show-hash&quot;</span>, <span class="ruby-value str">&quot;-H&quot;</span>,
710:              <span class="ruby-value str">&quot;A name of the form #name in a comment is a&quot;</span>,
711:              <span class="ruby-value str">&quot;possible hyperlink to an instance method&quot;</span>,
712:              <span class="ruby-value str">&quot;name. When displayed, the '#' is removed&quot;</span>,
713:              <span class="ruby-value str">&quot;unless this option is specified.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
714:         <span class="ruby-ivar">@show_hash</span> = <span class="ruby-identifier">value</span>
715:       <span class="ruby-keyword kw">end</span>
716: 
717:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
718: 
719:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--template=NAME&quot;</span>, <span class="ruby-value str">&quot;-T&quot;</span>, <span class="ruby-constant">Template</span>,
720:              <span class="ruby-value str">&quot;Set the template used when generating&quot;</span>,
721:              <span class="ruby-value str">&quot;output. The default depends on the&quot;</span>,
722:              <span class="ruby-value str">&quot;formatter used.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">template</span>, <span class="ruby-identifier">template_dir</span>)<span class="ruby-operator">|</span>
723:         <span class="ruby-ivar">@template</span>     = <span class="ruby-identifier">template</span>
724:         <span class="ruby-ivar">@template_dir</span> = <span class="ruby-identifier">template_dir</span>
725:       <span class="ruby-keyword kw">end</span>
726: 
727:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
728: 
729:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--title=TITLE&quot;</span>, <span class="ruby-value str">&quot;-t&quot;</span>,
730:              <span class="ruby-value str">&quot;Set TITLE as the title for HTML output.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
731:         <span class="ruby-ivar">@title</span> = <span class="ruby-identifier">value</span>
732:       <span class="ruby-keyword kw">end</span>
733: 
734:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
735: 
736:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--copy-files=PATH&quot;</span>, <span class="ruby-constant">Path</span>,
737:              <span class="ruby-value str">&quot;Specify a file or directory to copy static&quot;</span>,
738:              <span class="ruby-value str">&quot;files from.&quot;</span>,
739:              <span class="ruby-value str">&quot;If a file is given it will be copied into&quot;</span>,
740:              <span class="ruby-value str">&quot;the output dir.  If a directory is given the&quot;</span>,
741:              <span class="ruby-value str">&quot;entire directory will be copied.&quot;</span>,
742:              <span class="ruby-value str">&quot;You can use this multiple times&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
743:         <span class="ruby-ivar">@static_path</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">value</span>
744:       <span class="ruby-keyword kw">end</span>
745: 
746:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
747: 
748:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--webcvs=URL&quot;</span>, <span class="ruby-value str">&quot;-W&quot;</span>,
749:              <span class="ruby-value str">&quot;Specify a URL for linking to a web frontend&quot;</span>,
750:              <span class="ruby-value str">&quot;to CVS. If the URL contains a '\%s', the&quot;</span>,
751:              <span class="ruby-value str">&quot;name of the current file will be&quot;</span>,
752:              <span class="ruby-value str">&quot;substituted; if the URL doesn't contain a&quot;</span>,
753:              <span class="ruby-value str">&quot;'\%s', the filename will be appended to it.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
754:         <span class="ruby-ivar">@webcvs</span> = <span class="ruby-identifier">value</span>
755:       <span class="ruby-keyword kw">end</span>
756: 
757:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
758:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-value str">&quot;ri generator options:&quot;</span>
759:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
760: 
761:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--ri&quot;</span>, <span class="ruby-value str">&quot;-r&quot;</span>,
762:              <span class="ruby-value str">&quot;Generate output for use by `ri`. The files&quot;</span>,
763:              <span class="ruby-value str">&quot;are stored in the '.rdoc' directory under&quot;</span>,
764:              <span class="ruby-value str">&quot;your home directory unless overridden by a&quot;</span>,
765:              <span class="ruby-value str">&quot;subsequent --op parameter, so no special&quot;</span>,
766:              <span class="ruby-value str">&quot;privileges are needed.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
767:         <span class="ruby-identifier">check_generator</span>
768: 
769:         <span class="ruby-ivar">@generator_name</span> = <span class="ruby-value str">&quot;ri&quot;</span>
770:         <span class="ruby-ivar">@op_dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RI</span><span class="ruby-operator">::</span><span class="ruby-constant">Paths</span><span class="ruby-operator">::</span><span class="ruby-constant">HOMEDIR</span>
771:         <span class="ruby-identifier">setup_generator</span>
772:       <span class="ruby-keyword kw">end</span>
773: 
774:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
775: 
776:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--ri-site&quot;</span>, <span class="ruby-value str">&quot;-R&quot;</span>,
777:              <span class="ruby-value str">&quot;Generate output for use by `ri`. The files&quot;</span>,
778:              <span class="ruby-value str">&quot;are stored in a site-wide directory,&quot;</span>,
779:              <span class="ruby-value str">&quot;making them accessible to others, so&quot;</span>,
780:              <span class="ruby-value str">&quot;special privileges are needed.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
781:         <span class="ruby-identifier">check_generator</span>
782: 
783:         <span class="ruby-ivar">@generator_name</span> = <span class="ruby-value str">&quot;ri&quot;</span>
784:         <span class="ruby-ivar">@op_dir</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RI</span><span class="ruby-operator">::</span><span class="ruby-constant">Paths</span><span class="ruby-operator">::</span><span class="ruby-constant">SITEDIR</span>
785:         <span class="ruby-identifier">setup_generator</span>
786:       <span class="ruby-keyword kw">end</span>
787: 
788:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
789:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-value str">&quot;Generic options:&quot;</span>
790:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
791: 
792:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--write-options&quot;</span>,
793:              <span class="ruby-value str">&quot;Write .rdoc_options to the current&quot;</span>,
794:              <span class="ruby-value str">&quot;directory with the given options.  Not all&quot;</span>,
795:              <span class="ruby-value str">&quot;options will be used.  See RDoc::Options&quot;</span>,
796:              <span class="ruby-value str">&quot;for details.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
797:         <span class="ruby-ivar">@write_options</span> = <span class="ruby-keyword kw">true</span>
798:       <span class="ruby-keyword kw">end</span>
799: 
800:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
801: 
802:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--[no-]dry-run&quot;</span>,
803:              <span class="ruby-value str">&quot;Don't write any files&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
804:         <span class="ruby-ivar">@dry_run</span> = <span class="ruby-identifier">value</span>
805:       <span class="ruby-keyword kw">end</span>
806: 
807:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
808: 
809:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;-D&quot;</span>, <span class="ruby-value str">&quot;--[no-]debug&quot;</span>,
810:              <span class="ruby-value str">&quot;Displays lots on internal stuff.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
811:         <span class="ruby-identifier">$DEBUG_RDOC</span> = <span class="ruby-identifier">value</span>
812:       <span class="ruby-keyword kw">end</span>
813: 
814:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
815: 
816:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--[no-]ignore-invalid&quot;</span>,
817:              <span class="ruby-value str">&quot;Ignore invalid options and continue&quot;</span>,
818:              <span class="ruby-value str">&quot;(default true).&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
819:         <span class="ruby-identifier">ignore_invalid</span> = <span class="ruby-identifier">value</span>
820:       <span class="ruby-keyword kw">end</span>
821: 
822:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
823: 
824:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--quiet&quot;</span>, <span class="ruby-value str">&quot;-q&quot;</span>,
825:              <span class="ruby-value str">&quot;Don't show progress as we parse.&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
826:         <span class="ruby-ivar">@verbosity</span> = <span class="ruby-value">0</span>
827:       <span class="ruby-keyword kw">end</span>
828: 
829:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
830: 
831:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--verbose&quot;</span>, <span class="ruby-value str">&quot;-v&quot;</span>,
832:              <span class="ruby-value str">&quot;Display extra progress as RDoc parses&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
833:         <span class="ruby-ivar">@verbosity</span> = <span class="ruby-value">2</span>
834:       <span class="ruby-keyword kw">end</span>
835: 
836:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
837: 
838:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">on</span>(<span class="ruby-value str">&quot;--help&quot;</span>,
839:              <span class="ruby-value str">&quot;Display this help&quot;</span>) <span class="ruby-keyword kw">do</span>
840:         <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">GENERATORS</span>.<span class="ruby-identifier">each_key</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">generator</span><span class="ruby-operator">|</span>
841:           <span class="ruby-identifier">setup_generator</span> <span class="ruby-identifier">generator</span>
842:         <span class="ruby-keyword kw">end</span>
843: 
844:         <span class="ruby-identifier">puts</span> <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">help</span>
845:         <span class="ruby-identifier">exit</span>
846:       <span class="ruby-keyword kw">end</span>
847: 
848:       <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">separator</span> <span class="ruby-keyword kw">nil</span>
849:     <span class="ruby-keyword kw">end</span>
850: 
851:     <span class="ruby-identifier">setup_generator</span> <span class="ruby-value str">'darkfish'</span> <span class="ruby-keyword kw">if</span>
852:       <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">grep</span>(<span class="ruby-regexp re">/\A(-f|--fmt|--format|-r|-R|--ri|--ri-site)\b/</span>).<span class="ruby-identifier">empty?</span>
853: 
854:     <span class="ruby-identifier">deprecated</span> = []
855:     <span class="ruby-identifier">invalid</span> = []
856: 
857:     <span class="ruby-keyword kw">begin</span>
858:       <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">parse!</span> <span class="ruby-identifier">argv</span>
859:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidArgument</span>, <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidOption</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
860:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">DEPRECATED</span>[<span class="ruby-identifier">e</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>] <span class="ruby-keyword kw">then</span>
861:         <span class="ruby-identifier">deprecated</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>
862:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-node">%w[--format --ri -r --ri-site -R]</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword kw">then</span>
863:         <span class="ruby-identifier">raise</span>
864:       <span class="ruby-keyword kw">else</span>
865:         <span class="ruby-identifier">invalid</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)
866:       <span class="ruby-keyword kw">end</span>
867: 
868:       <span class="ruby-keyword kw">retry</span>
869:     <span class="ruby-keyword kw">end</span>
870: 
871:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@generator</span> <span class="ruby-keyword kw">then</span>
872:       <span class="ruby-ivar">@generator</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Generator</span><span class="ruby-operator">::</span><span class="ruby-constant">Darkfish</span>
873:       <span class="ruby-ivar">@generator_name</span> = <span class="ruby-value str">'darkfish'</span>
874:     <span class="ruby-keyword kw">end</span>
875: 
876:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@pipe</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
877:       <span class="ruby-ivar">@pipe</span> = <span class="ruby-keyword kw">false</span>
878:       <span class="ruby-identifier">invalid</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'-p (with files)'</span>
879:     <span class="ruby-keyword kw">end</span>
880: 
881:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">quiet</span> <span class="ruby-keyword kw">then</span>
882:       <span class="ruby-identifier">deprecated</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">opt</span><span class="ruby-operator">|</span>
883:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">'option '</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">' is deprecated: '</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">DEPRECATED</span>[<span class="ruby-identifier">opt</span>]
884:       <span class="ruby-keyword kw">end</span>
885: 
886:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">invalid</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
887:         <span class="ruby-identifier">invalid</span> = <span class="ruby-node">&quot;invalid options: #{invalid.join ', '}&quot;</span>
888: 
889:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ignore_invalid</span> <span class="ruby-keyword kw">then</span>
890:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">invalid</span>
891:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">'(invalid options are ignored)'</span>
892:         <span class="ruby-keyword kw">else</span>
893:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">opts</span>
894:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">invalid</span>
895:           <span class="ruby-identifier">exit</span> <span class="ruby-value">1</span>
896:         <span class="ruby-keyword kw">end</span>
897:       <span class="ruby-keyword kw">end</span>
898:     <span class="ruby-keyword kw">end</span>
899: 
900:     <span class="ruby-ivar">@files</span> = <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">dup</span>
901: 
902:     <span class="ruby-identifier">finish</span>
903: 
904:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@write_options</span> <span class="ruby-keyword kw">then</span>
905:       <span class="ruby-identifier">write_options</span>
906:       <span class="ruby-identifier">exit</span>
907:     <span class="ruby-keyword kw">end</span>
908: 
909:     <span class="ruby-keyword kw">self</span>
910:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000598">
                    
                    <a name="M000598"></a><b>quiet</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Don&#8217;t display progress as we process the files
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000598_source')" id="l_M000598_source">show</a>
                        
                    </p>
                    <div id="M000598_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 942</span>
942:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quiet</span>
943:     <span class="ruby-ivar">@verbosity</span>.<span class="ruby-identifier">zero?</span>
944:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000599">
                    
                    <a name="M000599"></a><b>quiet=</b>(bool)
                    
                </div>
                
                <div class="description">
                  <p>
Set quietness to <tt>bool</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000599_source')" id="l_M000599_source">show</a>
                        
                    </p>
                    <div id="M000599_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 949</span>
949:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quiet=</span> <span class="ruby-identifier">bool</span>
950:     <span class="ruby-ivar">@verbosity</span> = <span class="ruby-identifier">bool</span> <span class="ruby-value">? </span><span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>
951:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000600">
                    
                    <a name="M000600"></a><b>sanitize_path</b>(path)
                    
                </div>
                
                <div class="description">
                  <p>
Removes directories from <tt>path</tt> that are outside the current
directory
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000600_source')" id="l_M000600_source">show</a>
                        
                    </p>
                    <div id="M000600_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 956</span>
956:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_path</span> <span class="ruby-identifier">path</span>
957:     <span class="ruby-identifier">require</span> <span class="ruby-value str">'pathname'</span>
958:     <span class="ruby-identifier">dot</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'.'</span>).<span class="ruby-identifier">expand_path</span>
959: 
960:     <span class="ruby-identifier">path</span>.<span class="ruby-identifier">reject</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
961:       <span class="ruby-identifier">path</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">item</span>).<span class="ruby-identifier">expand_path</span>
962:       <span class="ruby-identifier">relative</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">dot</span>).<span class="ruby-identifier">to_s</span>
963:       <span class="ruby-identifier">relative</span>.<span class="ruby-identifier">start_with?</span> <span class="ruby-value str">'..'</span>
964:     <span class="ruby-keyword kw">end</span>
965:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000601">
                    
                    <a name="M000601"></a><b>setup_generator</b>(generator_name = @generator_name)
                    
                </div>
                
                <div class="description">
                  <p>
Set up an output generator for the named <tt>generator_name</tt>.
</p>
<p>
If the found generator responds to :setup_options it will be called with
the options instance. This allows generators to add custom options or set
default options.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000601_source')" id="l_M000601_source">show</a>
                        
                    </p>
                    <div id="M000601_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 974</span>
974:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_generator</span> <span class="ruby-identifier">generator_name</span> = <span class="ruby-ivar">@generator_name</span>
975:     <span class="ruby-ivar">@generator</span> = <span class="ruby-ivar">@generators</span>[<span class="ruby-identifier">generator_name</span>]
976: 
977:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@generator</span> <span class="ruby-keyword kw">then</span>
978:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">OptionParser</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidArgument</span>,
979:             <span class="ruby-node">&quot;Invalid output formatter #{generator_name}&quot;</span>
980:     <span class="ruby-keyword kw">end</span>
981: 
982:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@generator_options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-ivar">@generator</span>
983: 
984:     <span class="ruby-ivar">@generator_name</span> = <span class="ruby-identifier">generator_name</span>
985:     <span class="ruby-ivar">@generator_options</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@generator</span>
986: 
987:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@generator</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:setup_options</span> <span class="ruby-keyword kw">then</span>
988:       <span class="ruby-ivar">@option_parser</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">OptionParser</span>.<span class="ruby-identifier">new</span>
989:       <span class="ruby-ivar">@generator</span>.<span class="ruby-identifier">setup_options</span> <span class="ruby-keyword kw">self</span>
990:     <span class="ruby-keyword kw">end</span>
991:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000602">
                    
                    <a name="M000602"></a><b>template_dir_for</b>(template)
                    
                </div>
                
                <div class="description">
                  <p>
Finds the template dir for <tt>template</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000602_source')" id="l_M000602_source">show</a>
                        
                    </p>
                    <div id="M000602_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 996</span>
 996:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">template_dir_for</span> <span class="ruby-identifier">template</span>
 997:     <span class="ruby-identifier">template_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-value str">'rdoc'</span>, <span class="ruby-value str">'generator'</span>, <span class="ruby-value str">'template'</span>, <span class="ruby-identifier">template</span>
 998: 
 999:     <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
1000:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>), <span class="ruby-identifier">template_path</span>
1001:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">find</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
1002:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-identifier">dir</span>
1003:     <span class="ruby-keyword kw">end</span>
1004:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000604">
                    
                    <a name="M000604"></a><b>warn</b>(message)
                    
                </div>
                
                <div class="description">
                  <p>
Displays a warning using Kernel#warn if we&#8217;re being verbose
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000604_source')" id="l_M000604_source">show</a>
                        
                    </p>
                    <div id="M000604_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 1022</span>
1022:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">warn</span> <span class="ruby-identifier">message</span>
1023:     <span class="ruby-keyword kw">super</span> <span class="ruby-identifier">message</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@verbosity</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
1024:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000605">
                    
                    <a name="M000605"></a><b>write_options</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Writes the YAML file .rdoc_options to the current directory containing the
parsed options.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000605_source')" id="l_M000605_source">show</a>
                        
                    </p>
                    <div id="M000605_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/options.rb, line 1030</span>
1030:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write_options</span>
1031:     <span class="ruby-constant">RDoc</span>.<span class="ruby-identifier">load_yaml</span>
1032: 
1033:     <span class="ruby-identifier">open</span> <span class="ruby-value str">'.rdoc_options'</span>, <span class="ruby-value str">'w'</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
1034:       <span class="ruby-identifier">io</span>.<span class="ruby-identifier">set_encoding</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span>
1035: 
1036:       <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">dump</span> <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">io</span>
1037:     <span class="ruby-keyword kw">end</span>
1038:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    