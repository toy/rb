<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README
        </h1>
        <ul class="files">
            <li>README</li>
            <li>Last modified: Sat Oct 01 23:39:14 +0200 2011</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="../classes/Wirble.html">Wirble</a> 0.1.3 <a
href="README.html">README</a>
</p>
<h6>=============</h6>
<p>
This document was last updated on 2009-05-30. See the file <a
href="COPYING.html">COPYING</a> for licensing and warranty information. The
latest version of this software is available at the following URL:
</p>
<pre>
    http://pablotron.org/software/wirble/
</pre>
<p>
Table of Contents
</p>
<h6>===========</h6>
<pre>
  * Introduction to Wirble
  * Installing Wirble
      o Via RubyGems
      o Via a Tarball
      o As a User
  * Using Wirble
      o Editing Your ~/.irbrc
      o Enabling Color
  * Configuring Wirble
  * Color Settings
      o Color Keys
      o Color Values
      o Default Color Map
  * Frequently Asked Questions (FAQ)
  * Reporting Bugs
  * About the Author
</pre>
<p>
Introduction to <a href="../classes/Wirble.html">Wirble</a>
</p>
<h6>================</h6>
<p>
<a href="../classes/Wirble.html">Wirble</a> is a set of enhancements to Irb
all included together in one easy-to-use package. Specifically, <a
href="../classes/Wirble.html">Wirble</a> adds a saved history, a couple of
useful shortcuts, and color to Irb. <a
href="../classes/Wirble.html">Wirble</a> also enables a Irb&#8217;s
built-in tab-completion and a simpler prompt.
</p>
<p>
Before we begin, I should mention that several of Wirble&#8217;s features
were shamelessly inspired (read: borrowed with extreme prejudice) from the
&#8220;Irb Tips and Tricks&#8221; page of the Ruby Garden Wiki, which you
can find at the following URL:
</p>
<pre>
    http://wiki.rubygarden.org/Ruby/page/show/Irb/TipsAndTricks
</pre>
<p>
In particular, the Irb history and ri features bear a striking resemblence
to their Ruby Garden counterparts.
</p>
<p>
Installing <a href="../classes/Wirble.html">Wirble</a>
</p>
<h6>===========</h6>
<p>
The easiest way to install <a href="../classes/Wirble.html">Wirble</a> is
via RubyGems (<a href="http://rubygems.org/">rubygems.org/</a>). If
you&#8217;ve already got RubyGems installed, simply do the following, then
skip to the &#8220;Using Wirble&#8221; section below:
</p>
<pre>
    # install wirble via RubyGems
    sudo gem install wirble
</pre>
<p>
If you don&#8217;t have RubyGems, you can also install the <a
href="../classes/Wirble.html">Wirble</a> using setup.rb:
</p>
<pre>
    # install wirble using setup.rb
    ruby ./setup.rb config &amp;&amp; ruby ./setup.rb setup
    sudo ruby ./setup.rb install
</pre>
<p>
Or, install <a href="../classes/Wirble.html">Wirble</a> by hand using sudo:
</p>
<pre>
    # install wirble to library directory
    sudo cp -v wirble.rb $(ruby -e 'puts $LOAD_PATH[0]')
</pre>
<p>
Or, if you don&#8217;t use sudo, you can do the same thing with su, like
so:
</p>
<pre>
    # install wirble to library directory
    su -c &quot;cp -v wirble.rb $(ruby -e 'puts $LOAD_PATH[0]')&quot;
</pre>
<p>
Finally, if you don&#8217;t have an administrator account, you can still
install <a href="../classes/Wirble.html">Wirble</a> in your local home
directory like so:
</p>
<pre>
    # create local ruby library directory
    mkdir ~/.ruby &amp;&amp; chmod 700 ~/.ruby
    cp -v wirble.rb ~/.ruby
</pre>
<p>
Then add the following line at the <em>top</em> of your ~/.irbrc file:
</p>
<pre>
    # add ~/.ruby to the library search path
    $LOAD_PATH &lt;&lt; File.expand_path('~/.ruby')
</pre>
<p>
Using <a href="../classes/Wirble.html">Wirble</a>
</p>
<h6>======</h6>
<p>
A sample ~/.irbrc is available in the file &#8220;_irbrc&#8221;. If you
just want to get <a href="../classes/Wirble.html">Wirble</a> up quickly,
copy that to your home directory and be done with it. Otherwise. read on:
</p>
<p>
Using <a href="../classes/Wirble.html">Wirble</a> is easy: just add the
following lines to your ~/.irbrc file:
</p>
<pre>
    begin
      require 'wirble'

      # init wirble
      Wirble.init
    rescue LoadError =&gt; err
      $stderr.puts &quot;Couldn't load Wirble: #{err}&quot;
    end
</pre>
<p>
A lot of people really don&#8217;t like colors, so I&#8217;ve kept the
color disabled by default. To enable it, add the following bit to your
~/.irbrc file immediately after the call to &#8220;<a
href="../classes/Wirble.html#M000025">Wirble.init</a>&#8220;:
</p>
<pre>
    # enable color
    Wirble.colorize
</pre>
<p>
If you want to terrify your grandmother and impress your buddies, your
entire ~/.irbrc can also be written like so:
</p>
<pre>
    %w{rubygems wirble}.each do |lib|
      begin
        require lib
      rescue LoadError =&gt; err
        $stderr.puts &quot;Couldn't load #{lib}: #{err}&quot;
      end
    end

    %w{init colorize}.each { |str| Wirble.send(str) }
</pre>
<p>
Configuring <a href="../classes/Wirble.html">Wirble</a>
</p>
<h6>============</h6>
<p>
You can pass a hash of options to <a
href="../classes/Wirble.html#M000025">Wirble.init</a> in order to adjust
the behavior of <a href="../classes/Wirble.html">Wirble</a>. Here&#8217;s a
full list of options and a brief description of each one:
</p>
<pre>
  * :skip_internals

    Don't load the internal Irb features.  Equivalent to setting both
    :skip_libraries and :skip_prompt (see below).

  * :skip_libraries

    Don't load any libraries.  At the moment, Wirble attempts to load
    the following libraries: &quot;pp&quot;, &quot;irb/completion&quot;, and &quot;rubygems&quot;.

  * :skip_prompt

    Down't load the simple prompt.  Shouldn't ever be necessary, but
    I've included it for the sake of completeness.  Wirble's default
    behavior is to the prompt setting before making any changes.  If the
    prompt is anything other than :DEFAULT, Wirble won't override it.

  * :skip_history

    Don't load the Irb history.  There are a few additional history
    options as well; see :history_path, :history_size, and
    :history_perms below.

  * :history_path

    Set the path to the Irb history file.  Defaults to &quot;~/.irb_history&quot;.
    If an environment variable named IRB_HISTORY_FILE is set, Wirble
    will use that instead of the default value.

  * :history_size

    Set the size (in lines) of the Irb history file.  Defaults to 1000
    lines.  If an environment variable named IRB_HISTORY_SIZE is set,
    Wirble will use that instead of the default value.

  * :history_perms

    Set the permissions of the Irb history file.  Defaults to
    File::WRONLY.

  * :skip_shortcuts

    Don't load any shortcut methods.  at the moment there are three
    shortcut methods: &quot;ri&quot;, &quot;po&quot;, and &quot;poc&quot;. The first calls the &quot;ri&quot;
    command on the specified value -- you&quot;ll need to use proper quoting
    to pass the name properly.  As for &quot;po&quot; and &quot;poc&quot;: the former lists
    an object's instance methods (excluding methods that belong to
    Object), sorted by name, and the latter lists an object's constants,
    sorted by name.

  * :init_colors

    Enable colors.  Equivalent to calling Wirble.colorize directly.

  * :colors

    A hash of colors.  Only makes sense in conjunction with the
    :init_colors option.  See below for additional information on
    customizing color settings.
</pre>
<p>
Here&#8217;s an example of passing a list of options to <a
href="../classes/Wirble.html#M000025">Wirble.init()</a>:
</p>
<pre>
    wirble_opts = {
      # skip shortcuts
      :skip_shortcuts =&gt; true,

      # don't set the prompt
      :skip_prompt    =&gt; true,

      # override some of the default colors
      :colors =&gt; {
        :open_hash    =&gt; :green.
        :close_hash   =&gt; :green.
        :string       =&gt; :blue,
      },

      # enable color
      :init_color     =&gt; true,
    }

    # initialize wirble with options above
    Wirble.init(wirble_opts)
</pre>
<p>
For a full description of the color options, see the next section.
</p>
<p>
Color Settings
</p>
<h6>========</h6>
<p>
You can set colors in <a href="../classes/Wirble.html">Wirble</a> by
passing a hash of color options via <a
href="../classes/Wirble.html#M000025">Wirble.init</a> (see the :color
option for <a href="../classes/Wirble.html#M000025">Wirble.init</a> above),
or by setting Wirble::Colorize.color directly. For example:
</p>
<pre>
    # get the default colors and add in your own
    colors = Wirble::Colorize.colors.merge({
      # set the comma color to blue
      :comma =&gt; :blue,
    })

    # set the colors used by Wirble
    Wirble::Colorize.colors = colors
</pre>
<p>
Below is a list of all the recognized color keys.
</p>
<pre>
  * :comma (',')

    A comma character.  The element delimiter in arrays and hashes.

  * :refers ('=&gt;')

    The hash reference operator.  The key/value delimiter in hashes.

  * :open_hash ('{')

    The opening curly brace for a hash.

  * :close_hash ('}')

    The opening curly brace for a hash.

  * :open_array ('[')

    The opening brace for a array.

  * :close_array (']')

    The opening brace for a array.

  * :open_object ('#&lt;')

    The opening delimiter for an object.

  * :close_object ('&gt;')

    The closing delimiter for an object inspection.

  * :object_class

    The class attribute of an object inspection.  For example, in the
    string &quot;#&lt;Proc:0xb7be4968@(irb):8&gt;&quot;, the string &quot;Proc&quot; is the class
    attribute.

  * :object_addr_prefix (':')

    The colon prefixing the address attribute of an object inspection.
    For example, in the string &quot;#&lt;Proc:0xb7be4968@(irb):8&gt;&quot;, the string
    &quot;0xb7be4968&quot; is the memory address attribute, so the ':' is the
    address prefix.

  * :object_addr

    The memory address attribute of an object inspection.  For example,
    in the string &quot;#&lt;Proc:0xb7be4968@(irb):8&gt;&quot;, the string &quot;0xb7be4968&quot;
    is the memory address attribute.

  * :object_addr_prefix ('@')

    The at symbol prefixing the line attribute of an object inspection.
    For example, in the string &quot;#&lt;Proc:0xb7be4968@(irb):8&gt;&quot;, the string
    &quot;(irb):8&quot; is the line attribute, so the '@' is the line attribute
    prefix.

  * :object_line

    The line number attribute of an object inspection.  For example,
    in the string &quot;#&lt;Proc:0xb7be4968@(irb):8&gt;&quot;, the string &quot;(irb):8&quot;
    is the line number attribute.

  * :symbol_prefix (':')

    The colon prefix for a symbol object.

  * :symbol

    The string of a symbol object.

  * :open_string ('&quot;')

    The opening quote of a string object.

  * :close_string ('&quot;')

    The closing quote of a string object.

  * :number

    A number (integer or float).

  * :range ('..')

    The delimeter of a range object.

  * :keyword

    A built-in Ruby keyword.  This includes values like &quot;true&quot;, &quot;false&quot;,
    and &quot;nil&quot;.

  * :class

    A class.  This includes strings like &quot;Class&quot; and &quot;Object&quot;.

  * :whitespace

    Whitespace character (i.e. space, newline, tab, etc).
</pre>
<p>
The highlighting is implemented with a simple hand-rolled state-based
tokenizer (wow, that was a mouthful). This should be adequate most of the
time, but since it&#8217;s not a actual LALR parser, <a
href="../classes/Wirble.html">Wirble</a> can get confused in a few specific
instances. If you find a serious highlighting problem, please let me know.
Oh yeah, before I forget, here&#8217;s a list of the valid color codes:
</p>
<pre>
        :nothing        :green            :light_purple
        :black          :light_blue       :purple
        :blue           :light_cyan       :red
        :brown          :light_gray       :white
        :cyan           :light_green      :yellow
        :dark_gray      :light_red
</pre>
<p>
Note that I&#8217;m not a designer, and I also use a terminal with a dark
background. I&#8217;ve also been accused of having a Vim color scheme that
looks like &#8220;a beat up clown&#8221;. With those caveats in mind,
here&#8217;s the default color scheme for Wirble:
</p>
<pre>
    #
    # Default Wirble color scheme.
    #
    DEFAULT_COLORS = {
      # delimiter colors
      :comma              =&gt; :blue,
      :refers             =&gt; :blue,

      # container colors (hash and array)
      :open_hash          =&gt; :green,
      :close_hash         =&gt; :green,
      :open_array         =&gt; :green,
      :close_array        =&gt; :green,

      # object colors
      :open_object        =&gt; :light_red,
      :object_class       =&gt; :white,
      :object_addr_prefix =&gt; :blue,
      :object_line_prefix =&gt; :blue,
      :close_object       =&gt; :light_red,

      # symbol colors
      :symbol             =&gt; :yellow,
      :symbol_prefix      =&gt; :yellow,

      # string colors
      :open_string        =&gt; :red,
      :string             =&gt; :cyan,
      :close_string       =&gt; :red,

      # misc colors
      :number             =&gt; :cyan,
      :keyword            =&gt; :green,
      :class              =&gt; :light_green,
      :range              =&gt; :red,
    }
</pre>
<p>
This map is also available via programmatically via
Wirble::Colorize::DEFAULT_COLORS.
</p>
<p>
Frequently Asked Questions (FAQ)
</p>
<h6>==========================</h6>
<ol>
<li type="A">Where did the name come from?

</li>
<li type="A">Beats me. It&#8217;s the only thing I could find in the dictionary, and the
only name I came up with that I could pronounce.

</li>
<li type="A">How do I use color in my Irb prompts?

</li>
<li type="A">You can use standard color escape codes in the format string used by Irb.
For example, to set the user prompt to cyan, you could do something like
this:

<pre>
    ctx = IRB.CurrentContext
    ctx.prompt_i = Wirble::Colorize.colorize_string(ctx.prompt_i, :cyan)
</pre>
</li>
<li type="A">How can I do syntax highlighting as I type?

</li>
<li type="A">I don&#8217;t know. If there is an answer, I suspect it&#8217;s not very
portable and probably requires some modification to Irb. There&#8217;s a
sneaky hack called eval.rb that seems to do a little bit of highlight, but
it doesn&#8217;t use Irb, and it doesn&#8217;t really do what you&#8217;re
asking. That said, you can find it here:

<pre>
    http://www.rubyist.net/~slagell/ruby/eval.txt
</pre>
<p>
Incidentally, part of the problem is that there&#8217;s no real easy way to
do the following:
</p>
<pre>
    1.  Access to the token stream or parser state incrementally.
    2.  Process partial strings in readline.
</pre>
<p>
A bit more about 1: both Irb and the internal Ruby lexer kind of muddle the
traditionally separate concepts of lexer and parser, so it&#8217;s
difficult to, say, parse a string into components and do syntax
highlighting on them. Vim and Emacs both handle this with sneaky regular
expressions, and a simple Ruby parser, respectively. <a
href="../classes/Wirble.html">Wirble</a> and Irb both roll their own
(albeit limited) Ruby lexers.
</p>
</li>
</ol>
<p>
Reporting Bugs
</p>
<h6>========</h6>
<p>
Have a bug to report or a feature you&#8217;d like me to add to <a
href="../classes/Wirble.html">Wirble</a>? Feel free to email me at the
address below. Alternatively, you can submit your feature request or bug
directly to my bug-tracking web interface at the following URL:
</p>
<pre>
    http://redmine.pablotron.org/projects/show/wirble
</pre>
<p>
Note: you&#8217;ll need to create an account in order to submit a feature
request or a bug report via the web interface. Also, I&#8217;m a busy guy!
I make every effort to respond quickly to bug reports, but detailed
descriptions and or patches really do make my life a whole lot easier.
</p>
<p>
About the Author
</p>
<h6>==========</h6>
<p>
Paul Duncan <pabs@pablotron.org> <a
href="http://pablotron.org/">pablotron.org/</a>
</p>
<p>
And of course, all the fine folks from the Ruby Garden Wiki. :)
</p>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>