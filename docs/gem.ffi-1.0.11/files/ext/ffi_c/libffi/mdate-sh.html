<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>mdate-sh</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            mdate-sh
        </h1>
        <ul class="files">
            <li>ext/ffi_c/libffi/mdate-sh</li>
            <li>Last modified: Sun Nov 27 22:44:59 +0100 2011</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
#!/bin/sh # Get modification time of a file or directory and pretty-print
it.
</p>
<p>
scriptversion=2005-06-29.22
</p>
<p>
# Copyright (C) 1995, 1996, 1997, 2003, 2004, 2005 Free Software #
Foundation, Inc. # written by Ulrich Drepper <drepper@gnu.ai.mit.edu>, June
1995 # # This program is free software; you can redistribute it and/or
modify # it under the terms of the GNU General Public License as published
by # the Free Software Foundation; either version 2, or (at your option) #
any later version. # # This program is distributed in the hope that it will
be useful, # but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the # GNU
General Public License for more details. # # You should have received a
copy of the GNU General Public License # along with this program; if not,
write to the Free Software Foundation, # Inc., 51 Franklin Street, Fifth
Floor, Boston, MA 02110-1301, USA.
</p>
<p>
# As a special exception to the GNU General Public License, if you #
distribute this file as part of a program that contains a # configuration
script generated by Autoconf, you may include it under # the same
distribution terms that you use for the rest of that program.
</p>
<p>
# This file is maintained in Automake, please report # bugs to
<bug-automake@gnu.org> or send patches to # <automake-patches@gnu.org>.
</p>
<p>
case $1 in
</p>
<pre>
  '')
     echo &quot;$0: No file.  Try \`$0 --help' for more information.&quot; 1&gt;&amp;2
     exit 1;
     ;;
  -h | --h*)
    cat &lt;&lt;\EOF
</pre>
<p>
Usage: mdate-sh [&#8212;help] [&#8212;version] FILE
</p>
<p>
Pretty-print the modification time of FILE.
</p>
<p>
Report bugs to <bug-automake@gnu.org>. EOF
</p>
<pre>
    exit $?
    ;;
  -v | --v*)
    echo &quot;mdate-sh $scriptversion&quot;
    exit $?
    ;;
</pre>
<p>
esac
</p>
<p>
# Prevent date giving response in another language. LANG=C export LANG
LC_ALL=C export LC_ALL LC_TIME=C export LC_TIME
</p>
<p>
# GNU ls changes its time format in response to the TIME_STYLE # variable.
Since we cannot assume `unset&#8217; works, revert this # variable to its
documented default. if test &#8220;${TIME_STYLE+set}&#8221; = set; then
</p>
<pre>
  TIME_STYLE=posix-long-iso
  export TIME_STYLE
</pre>
<p>
fi
</p>
<p>
save_arg1=$1
</p>
<p>
# Find out how to get the extended ls output of a file or directory. if ls
-L /dev/null 1>/dev/null 2>&amp;1; then
</p>
<pre>
  ls_command='ls -L -l -d'
</pre>
<p>
else
</p>
<pre>
  ls_command='ls -l -d'
</pre>
<p>
fi
</p>
<p>
# A `ls -l&#8217; line looks as follows on OS/2. # drwxrwx&#8212; 0 Aug 11
2001 foo # This differs from Unix, which adds ownership information. #
drwxrwx&#8212; 2 root root 4096 Aug 11 2001 foo # # To find the date, we
split the line on spaces and iterate on words # until we find a month. This
cannot work with files whose owner is a # user named `Jan&#8217;, or
`Feb&#8217;, etc. However, it&#8217;s unlikely that `/&#8217; # will be
owned by a user whose name is a month. So we first look at # the extended
ls output of the root directory to decide how many # words should be
skipped to get the date.
</p>
<p>
# On HPUX /bin/sh, &#8220;set&#8221; interprets
&#8220;-rw-r&#8212;r&#8212;&#8221; as options, so the &#8220;x&#8221;
below. set x`ls -l -d /`
</p>
<p>
# Find which argument is the month. month= command= until test $month do
</p>
<pre>
  shift
  # Add another shift to the command.
  command=&quot;$command shift;&quot;
  case $1 in
    Jan) month=January; nummonth=1;;
    Feb) month=February; nummonth=2;;
    Mar) month=March; nummonth=3;;
    Apr) month=April; nummonth=4;;
    May) month=May; nummonth=5;;
    Jun) month=June; nummonth=6;;
    Jul) month=July; nummonth=7;;
    Aug) month=August; nummonth=8;;
    Sep) month=September; nummonth=9;;
    Oct) month=October; nummonth=10;;
    Nov) month=November; nummonth=11;;
    Dec) month=December; nummonth=12;;
  esac
</pre>
<p>
done
</p>
<p>
# Get the extended ls output of the file or directory. set dummy x`eval
&#8220;$ls_command "\$save_arg1\"&#8220;`
</p>
<p>
# Remove all preceding arguments eval $command
</p>
<p>
# Because of the dummy argument above, month is in $2. # # On a POSIX
system, we should have # # $# = 5 # $1 = file size # $2 = month # $3 = day
# $4 = year or time # $5 = filename # # On Darwin 7.7.0 and 7.6.0, we have
# # $# = 4 # $1 = day # $2 = month # $3 = year or time # $4 = filename
</p>
<p>
# Get the month. case $2 in
</p>
<pre>
  Jan) month=January; nummonth=1;;
  Feb) month=February; nummonth=2;;
  Mar) month=March; nummonth=3;;
  Apr) month=April; nummonth=4;;
  May) month=May; nummonth=5;;
  Jun) month=June; nummonth=6;;
  Jul) month=July; nummonth=7;;
  Aug) month=August; nummonth=8;;
  Sep) month=September; nummonth=9;;
  Oct) month=October; nummonth=10;;
  Nov) month=November; nummonth=11;;
  Dec) month=December; nummonth=12;;
</pre>
<p>
esac
</p>
<p>
case $3 in
</p>
<pre>
  ???*) day=$1;;
  *) day=$3; shift;;
</pre>
<p>
esac
</p>
<p>
# Here we have to deal with the problem that the ls output gives either #
the time of day or the year. case $3 in
</p>
<pre>
  *:*) set `date`; eval year=\$$#
       case $2 in
         Jan) nummonthtod=1;;
         Feb) nummonthtod=2;;
         Mar) nummonthtod=3;;
         Apr) nummonthtod=4;;
         May) nummonthtod=5;;
         Jun) nummonthtod=6;;
         Jul) nummonthtod=7;;
         Aug) nummonthtod=8;;
         Sep) nummonthtod=9;;
         Oct) nummonthtod=10;;
         Nov) nummonthtod=11;;
         Dec) nummonthtod=12;;
       esac
       # For the first six month of the year the time notation can also
       # be used for files modified in the last year.
       if (expr $nummonth \&gt; $nummonthtod) &gt; /dev/null;
       then
         year=`expr $year - 1`
       fi;;
  *) year=$3;;
</pre>
<p>
esac
</p>
<p>
# The result. echo $day $month $year
</p>
<p>
# Local Variables: # mode: shell-script # sh-indentation: 2 # eval:
(add-hook &#8216;write-file-hooks &#8216;time-stamp) # time-stamp-start:
&#8220;scriptversion=&#8221; # time-stamp-format:
&#8220;%:y-%02m-%02d.%02H&#8221; # time-stamp-end: &#8220;$&#8221; # End:
</p>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>