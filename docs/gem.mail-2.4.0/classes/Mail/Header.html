<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Mail::Header</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Mail::Header 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/mail/header_rb.html">lib/mail/header.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Provides access to a header object.
</p>
<h3>Per <a href="RFC2822.html">RFC2822</a></h3>
<pre>
 2.2. Header Fields

  Header fields are lines composed of a field name, followed by a colon
  (&quot;:&quot;), followed by a field body, and terminated by CRLF.  A field
  name MUST be composed of printable US-ASCII characters (i.e.,
  characters that have values between 33 and 126, inclusive), except
  colon.  A field body may be composed of any US-ASCII characters,
  except for CR and LF.  However, a field body may contain CRLF when
  used in header &quot;folding&quot; and  &quot;unfolding&quot; as described in section
  2.2.3.  All field bodies MUST conform to the syntax described in
  sections 3 and 4 of this standard.
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000347">[]</a>,</li>
                
                <li><a href="#M000349">[]=</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000355">charset</a>,</li>
                
                <li><a href="#M000356">charset=</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000363">decoded</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000361">encoded</a>,</li>
                
                <li><a href="#M000344">errors</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000364">field_summary</a>,</li>
                
                <li><a href="#M000342">fields</a>,</li>
                
                <li><a href="#M000343">fields=</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000374">has_content_id?</a>,</li>
                
                <li><a href="#M000375">has_date?</a>,</li>
                
                <li><a href="#M000365">has_message_id?</a>,</li>
                
                <li><a href="#M000376">has_mime_version?</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000383">limited_field?</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000340">new</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000341">raw_source</a>,</li>
                
                <li><a href="#M000377">raw_source=</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000382">select_field_for</a>,</li>
                
                <li><a href="#M000381">split_header</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000362">to_s</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000379">unfold</a>,</li>
                
                <li><a href="#M000380">unfolded_header</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="RFC2822/MsgIdDomainText0.html">Mail::RFC2822::MsgIdDomainText0</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="RFC2822/MsgIdDomainText0.html">Mail::RFC2822::MsgIdDomainText0</a>
            
            START:includes
        </li>
        
        <li>
            
            <span>Enumerable</span>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">LIMITED_FIELDS</td>
            <td>=</td>
            <td class="attr-value">%w[ date from sender reply-to to cc bcc                             message-id in-reply-to references subject                            return-path content-type mime-version                            content-transfer-encoding content-description                             content-id content-disposition content-location]</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000340">
                    
                    <a name="M000340"></a><b>new</b>(header_text = nil, charset = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new header object.
</p>
<p>
Accepts raw text or nothing. If given raw text will attempt to parse it and
split it into the various fields, instantiating each field as it goes.
</p>
<p>
If it finds a field that should be a structured field (such as content
type), but it fails to parse it, it will simply make it an unstructured
field and leave it alone. This will mean that the data is preserved but no
automatic processing of that field will happen. If you find one of these
cases, please make a patch and send it in, or at the least, send me the
example so we can fix it.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000340_source')" id="l_M000340_source">show</a>
                        
                    </p>
                    <div id="M000340_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/mail/header.rb, line 36</span>
36:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">header_text</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">charset</span> = <span class="ruby-keyword kw">nil</span>)
37:       <span class="ruby-ivar">@errors</span> = []
38:       <span class="ruby-ivar">@charset</span> = <span class="ruby-identifier">charset</span>
39:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">raw_source</span> = <span class="ruby-identifier">header_text</span>.<span class="ruby-identifier">to_crlf</span>
40:       <span class="ruby-identifier">split_header</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">header_text</span>
41:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000347">
                    
                    <a name="M000347"></a><b>[]</b>(name)
                    
                </div>
                
                <div class="description">
                  <pre>
 3.6. Field definitions

  The following table indicates limits on the number of times each
  field may occur in a message header as well as any special
  limitations on the use of those fields.  An asterisk next to a value
  in the minimum or maximum column indicates that a special restriction
  appears in the Notes column.

  &lt;snip table from 3.6&gt;
</pre>
<p>
As per RFC, many fields can appear more than once, we will return a string
of the value if there is only one header, or if there is more than one
matching header, will return an array of values in order that they appear
in the header ordered from top to bottom.
</p>
<p>
Example:
</p>
<pre>
 h = Header.new
 h.fields = ['To: mikel@me.com', 'X-Mail-SPAM: 15', 'X-Mail-SPAM: 20']
 h['To']          #=&gt; 'mikel@me.com'
 h['X-Mail-SPAM'] #=&gt; ['15', '20']
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000347_source')" id="l_M000347_source">show</a>
                        
                    </p>
                    <div id="M000347_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 117</span>
117:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">name</span>)
118:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">dasherize</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">downcase</span>
119:       <span class="ruby-identifier">selected</span> = <span class="ruby-identifier">select_field_for</span>(<span class="ruby-identifier">name</span>)
120:       <span class="ruby-keyword kw">case</span>
121:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
122:         <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span> }
123:       <span class="ruby-keyword kw">when</span> <span class="ruby-operator">!</span><span class="ruby-identifier">selected</span>.<span class="ruby-identifier">blank?</span>
124:         <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">first</span>
125:       <span class="ruby-keyword kw">else</span>
126:         <span class="ruby-keyword kw">nil</span>
127:       <span class="ruby-keyword kw">end</span>
128:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000349">
                    
                    <a name="M000349"></a><b>[]=</b>(name, value)
                    
                </div>
                
                <div class="description">
                  <p>
Sets the FIRST matching field in the header to passed value, or deletes the
FIRST field matched from the header if passed nil
</p>
<p>
Example:
</p>
<pre>
 h = Header.new
 h.fields = ['To: mikel@me.com', 'X-Mail-SPAM: 15', 'X-Mail-SPAM: 20']
 h['To'] = 'bob@you.com'
 h['To']    #=&gt; 'bob@you.com'
 h['X-Mail-SPAM'] = '10000'
 h['X-Mail-SPAM'] # =&gt; ['15', '20', '10000']
 h['X-Mail-SPAM'] = nil
 h['X-Mail-SPAM'] # =&gt; nil
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000349_source')" id="l_M000349_source">show</a>
                        
                    </p>
                    <div id="M000349_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 143</span>
143:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
144:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">dasherize</span>(<span class="ruby-identifier">name</span>)
145:       <span class="ruby-identifier">fn</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span>
146:       <span class="ruby-identifier">selected</span> = <span class="ruby-identifier">select_field_for</span>(<span class="ruby-identifier">fn</span>)
147:       
148:       <span class="ruby-keyword kw">case</span>
149:       <span class="ruby-comment cmt"># User wants to delete the field</span>
150:       <span class="ruby-keyword kw">when</span> <span class="ruby-operator">!</span><span class="ruby-identifier">selected</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
151:         <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">f</span>) }
152:         
153:       <span class="ruby-comment cmt"># User wants to change the field</span>
154:       <span class="ruby-keyword kw">when</span> <span class="ruby-operator">!</span><span class="ruby-identifier">selected</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">limited_field?</span>(<span class="ruby-identifier">fn</span>)
155:         <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">fn</span>, <span class="ruby-identifier">value</span>)
156:         
157:       <span class="ruby-comment cmt"># User wants to create the field</span>
158:       <span class="ruby-keyword kw">else</span>
159:         <span class="ruby-comment cmt"># Need to insert in correct order for trace fields</span>
160:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Field</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">charset</span>)
161:       <span class="ruby-keyword kw">end</span>
162:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000355">
                    
                    <a name="M000355"></a><b>charset</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000355_source')" id="l_M000355_source">show</a>
                        
                    </p>
                    <div id="M000355_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 164</span>
164:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">charset</span>
165:       <span class="ruby-identifier">params</span> = <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:content_type</span>].<span class="ruby-identifier">parameters</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
166:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>
167:         <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:charset</span>]
168:       <span class="ruby-keyword kw">else</span>
169:         <span class="ruby-ivar">@charset</span>
170:       <span class="ruby-keyword kw">end</span>
171:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000356">
                    
                    <a name="M000356"></a><b>charset=</b>(val)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000356_source')" id="l_M000356_source">show</a>
                        
                    </p>
                    <div id="M000356_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 173</span>
173:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">charset=</span>(<span class="ruby-identifier">val</span>)
174:       <span class="ruby-identifier">params</span> = <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:content_type</span>].<span class="ruby-identifier">parameters</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
175:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>
176:         <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:charset</span>] = <span class="ruby-identifier">val</span>
177:       <span class="ruby-keyword kw">end</span>
178:       <span class="ruby-ivar">@charset</span> = <span class="ruby-identifier">val</span>
179:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000363">
                    
                    <a name="M000363"></a><b>decoded</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000363_source')" id="l_M000363_source">show</a>
                        
                    </p>
                    <div id="M000363_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 199</span>
199:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decoded</span>
200:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-value str">'Can not decode an entire header as there could be character set conflicts, try calling #decoded on the various fields.'</span>
201:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000361">
                    
                    <a name="M000361"></a><b>encoded</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000361_source')" id="l_M000361_source">show</a>
                        
                    </p>
                    <div id="M000361_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 187</span>
187:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encoded</span>
188:       <span class="ruby-identifier">buffer</span> = <span class="ruby-value str">''</span>
189:       <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
190:         <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">encoded</span>
191:       <span class="ruby-keyword kw">end</span>
192:       <span class="ruby-identifier">buffer</span>
193:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000344">
                    
                    <a name="M000344"></a><b>errors</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000344_source')" id="l_M000344_source">show</a>
                        
                    </p>
                    <div id="M000344_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/mail/header.rb, line 92</span>
92:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">errors</span>
93:       <span class="ruby-ivar">@errors</span>
94:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000364">
                    
                    <a name="M000364"></a><b>field_summary</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000364_source')" id="l_M000364_source">show</a>
                        
                    </p>
                    <div id="M000364_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 203</span>
203:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">field_summary</span>
204:       <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;&lt;#{f.name}: #{f.value}&gt;&quot;</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>)
205:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000342">
                    
                    <a name="M000342"></a><b>fields</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of all the fields in the header in order that they were
read in.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000342_source')" id="l_M000342_source">show</a>
                        
                    </p>
                    <div id="M000342_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/mail/header.rb, line 51</span>
51:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fields</span>
52:       <span class="ruby-ivar">@fields</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">FieldList</span>.<span class="ruby-identifier">new</span>
53:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000343">
                    
                    <a name="M000343"></a><b>fields=</b>(unfolded_fields)
                    
                </div>
                
                <div class="description">
                  <pre>
 3.6. Field definitions

  It is important to note that the header fields are not guaranteed to
  be in a particular order.  They may appear in any order, and they
  have been known to be reordered occasionally when transported over
  the Internet.  However, for the purposes of this standard, header
  fields SHOULD NOT be reordered when a message is transported or
  transformed.  More importantly, the trace header fields and resent
  header fields MUST NOT be reordered, and SHOULD be kept in blocks
  prepended to the message.  See sections 3.6.6 and 3.6.7 for more
  information.
</pre>
<p>
Populates the fields container with <a href="Field.html">Field</a> objects
in the order it receives them in.
</p>
<p>
Acceps an array of field string values, for example:
</p>
<pre>
 h = Header.new
 h.fields = ['From: mikel@me.com', 'To: bob@you.com']
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000343_source')" id="l_M000343_source">show</a>
                        
                    </p>
                    <div id="M000343_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/mail/header.rb, line 74</span>
74:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fields=</span>(<span class="ruby-identifier">unfolded_fields</span>)
75:       <span class="ruby-ivar">@fields</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">FieldList</span>.<span class="ruby-identifier">new</span>
76:       <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;Warning: more than 1000 header fields only using the first 1000&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">unfolded_fields</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1000</span>
77:       <span class="ruby-identifier">unfolded_fields</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1000</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
78: 
79:         <span class="ruby-identifier">field</span> = <span class="ruby-constant">Field</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">field</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">charset</span>)
80:         <span class="ruby-identifier">field</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">errors</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">error</span> }
81:         <span class="ruby-identifier">selected</span> = <span class="ruby-identifier">select_field_for</span>(<span class="ruby-identifier">field</span>.<span class="ruby-identifier">name</span>)
82: 
83:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">any?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">limited_field?</span>(<span class="ruby-identifier">field</span>.<span class="ruby-identifier">name</span>)
84:           <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">field</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">field</span>.<span class="ruby-identifier">value</span>)
85:         <span class="ruby-keyword kw">else</span>
86:           <span class="ruby-ivar">@fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span>
87:         <span class="ruby-keyword kw">end</span>
88:       <span class="ruby-keyword kw">end</span>
89: 
90:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000374">
                    
                    <a name="M000374"></a><b>has_content_id?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the header has a Content-ID defined (empty or not)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000374_source')" id="l_M000374_source">show</a>
                        
                    </p>
                    <div id="M000374_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 213</span>
213:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_content_id?</span>
214:       <span class="ruby-operator">!</span><span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">responsible_for?</span>(<span class="ruby-value str">'Content-ID'</span>) }.<span class="ruby-identifier">empty?</span>
215:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000375">
                    
                    <a name="M000375"></a><b>has_date?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the header has a Date defined (empty or not)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000375_source')" id="l_M000375_source">show</a>
                        
                    </p>
                    <div id="M000375_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 218</span>
218:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_date?</span>
219:       <span class="ruby-operator">!</span><span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">responsible_for?</span>(<span class="ruby-value str">'Date'</span>) }.<span class="ruby-identifier">empty?</span>
220:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000365">
                    
                    <a name="M000365"></a><b>has_message_id?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the header has a Message-ID defined (empty or not)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000365_source')" id="l_M000365_source">show</a>
                        
                    </p>
                    <div id="M000365_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 208</span>
208:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_message_id?</span>
209:       <span class="ruby-operator">!</span><span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">responsible_for?</span>(<span class="ruby-value str">'Message-ID'</span>) }.<span class="ruby-identifier">empty?</span>
210:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000376">
                    
                    <a name="M000376"></a><b>has_mime_version?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the header has a MIME version defined (empty or not)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000376_source')" id="l_M000376_source">show</a>
                        
                    </p>
                    <div id="M000376_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 223</span>
223:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_mime_version?</span>
224:       <span class="ruby-operator">!</span><span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">responsible_for?</span>(<span class="ruby-value str">'Mime-Version'</span>) }.<span class="ruby-identifier">empty?</span>
225:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000341">
                    
                    <a name="M000341"></a><b>raw_source</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The preserved raw source of the header as you passed it in, untouched for
your Regexing glory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000341_source')" id="l_M000341_source">show</a>
                        
                    </p>
                    <div id="M000341_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/mail/header.rb, line 45</span>
45:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">raw_source</span>
46:       <span class="ruby-ivar">@raw_source</span>
47:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000362">
                    
                    <a name="M000362"></a><b>to_s</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000362_source')" id="l_M000362_source">show</a>
                        
                    </p>
                    <div id="M000362_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 195</span>
195:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
196:       <span class="ruby-identifier">encoded</span>
197:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000383">
                    
                    <a name="M000383"></a><b>limited_field?</b>(name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000383_source')" id="l_M000383_source">show</a>
                        
                    </p>
                    <div id="M000383_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 260</span>
260:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">limited_field?</span>(<span class="ruby-identifier">name</span>)
261:       <span class="ruby-constant">LIMITED_FIELDS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>)
262:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000377">
                    
                    <a name="M000377"></a><b>raw_source=</b>(val)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000377_source')" id="l_M000377_source">show</a>
                        
                    </p>
                    <div id="M000377_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 229</span>
229:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">raw_source=</span>(<span class="ruby-identifier">val</span>)
230:       <span class="ruby-ivar">@raw_source</span> = <span class="ruby-identifier">val</span>
231:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000382">
                    
                    <a name="M000382"></a><b>select_field_for</b>(name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000382_source')" id="l_M000382_source">show</a>
                        
                    </p>
                    <div id="M000382_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 256</span>
256:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_field_for</span>(<span class="ruby-identifier">name</span>)
257:       <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">responsible_for?</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>) }
258:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000381">
                    
                    <a name="M000381"></a><b>split_header</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Splits an unfolded and line break cleaned header into individual field
strings.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000381_source')" id="l_M000381_source">show</a>
                        
                    </p>
                    <div id="M000381_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 252</span>
252:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">split_header</span>
253:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span> = <span class="ruby-identifier">unfolded_header</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">CRLF</span>)
254:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000379">
                    
                    <a name="M000379"></a><b>unfold</b>(string)
                    
                </div>
                
                <div class="description">
                  <p>
2.2.3. Long <a href="Header.html">Header</a> Fields
</p>
<pre>
 The process of moving from this folded multiple-line representation
 of a header field to its single line representation is called
 &quot;unfolding&quot;. Unfolding is accomplished by simply removing any CRLF
 that is immediately followed by WSP.  Each header field should be
 treated in its unfolded form for further syntactic and semantic
 evaluation.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000379_source')" id="l_M000379_source">show</a>
                        
                    </p>
                    <div id="M000379_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 241</span>
241:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unfold</span>(<span class="ruby-identifier">string</span>)
242:       <span class="ruby-identifier">string</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/#{CRLF}#{WSP}+/</span>, <span class="ruby-value str">' '</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/#{WSP}+/</span>, <span class="ruby-value str">' '</span>)
243:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000380">
                    
                    <a name="M000380"></a><b>unfolded_header</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the header with all the folds removed
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000380_source')" id="l_M000380_source">show</a>
                        
                    </p>
                    <div id="M000380_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/mail/header.rb, line 246</span>
246:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unfolded_header</span>
247:       <span class="ruby-ivar">@unfolded_header</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">unfold</span>(<span class="ruby-identifier">raw_source</span>)
248:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    