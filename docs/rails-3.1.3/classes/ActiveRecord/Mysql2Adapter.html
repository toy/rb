<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActiveRecord::Mysql2Adapter</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            ActiveRecord::Mysql2Adapter 
            
                <span class="parent">&lt; 
                    
                    AbstractAdapter
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/activerecord-3_1_3/lib/active_record/connection_adapters/mysql2_adapter_rb.html">activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M001079">active?</a>,</li>
                
                <li><a href="#M001066">adapter_name</a>,</li>
                
                <li><a href="#M001117">add_column</a>,</li>
                
                <li><a href="#M001140">add_column_position!</a>,</li>
                
                <li><a href="#M001099">add_limit_offset!</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M001093">begin_db_transaction</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M001147">case_sensitive_equality_operator</a>,</li>
                
                <li><a href="#M001153">case_sensitive_modifier</a>,</li>
                
                <li><a href="#M001120">change_column</a>,</li>
                
                <li><a href="#M001118">change_column_default</a>,</li>
                
                <li><a href="#M001119">change_column_null</a>,</li>
                
                <li><a href="#M001107">charset</a>,</li>
                
                <li><a href="#M001108">collation</a>,</li>
                
                <li><a href="#M001175">column_for</a>,</li>
                
                <li><a href="#M001113">columns</a>,</li>
                
                <li><a href="#M001094">commit_db_transaction</a>,</li>
                
                <li><a href="#M001166">configure_connection</a>,</li>
                
                <li><a href="#M001165">connect</a>,</li>
                
                <li><a href="#M001087">create</a>,</li>
                
                <li><a href="#M001104">create_database</a>,</li>
                
                <li><a href="#M001096">create_savepoint</a>,</li>
                
                <li><a href="#M001114">create_table</a>,</li>
                
                <li><a href="#M001106">current_database</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M001082">disconnect!</a>,</li>
                
                <li><a href="#M001111">drop_table</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M001089">exec_delete</a>,</li>
                
                <li><a href="#M001088">exec_insert</a>,</li>
                
                <li><a href="#M001168">exec_query</a>,</li>
                
                <li><a href="#M001090">exec_update</a>,</li>
                
                <li><a href="#M001085">execute</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M001112">indexes</a>,</li>
                
                <li><a href="#M001086">insert_sql</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M001091">last_inserted_id</a>,</li>
                
                <li><a href="#M001154">limited_update_conditions</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M001070">native_database_types</a>,</li>
                
                <li><a href="#M001064">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M001142">pk_and_sequence_for</a>,</li>
                
                <li><a href="#M001146">primary_key</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M001071">quote</a>,</li>
                
                <li><a href="#M001074">quote_string</a>,</li>
                
                <li><a href="#M001158">quoted_columns_for_index</a>,</li>
                
                <li><a href="#M001076">quoted_false</a>,</li>
                
                <li><a href="#M001075">quoted_true</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M001080">reconnect!</a>,</li>
                
                <li><a href="#M001103">recreate_database</a>,</li>
                
                <li><a href="#M001098">release_savepoint</a>,</li>
                
                <li><a href="#M001126">rename_column</a>,</li>
                
                <li><a href="#M001115">rename_table</a>,</li>
                
                <li><a href="#M001081">requires_reloading?</a>,</li>
                
                <li><a href="#M001083">reset!</a>,</li>
                
                <li><a href="#M001095">rollback_db_transaction</a>,</li>
                
                <li><a href="#M001097">rollback_to_savepoint</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M001167">select</a>,</li>
                
                <li><a href="#M001084">select_rows</a>,</li>
                
                <li><a href="#M001141">show_variable</a>,</li>
                
                <li><a href="#M001101">structure_dump</a>,</li>
                
                <li><a href="#M001077">substitute_at</a>,</li>
                
                <li><a href="#M001067">supports_migrations?</a>,</li>
                
                <li><a href="#M001068">supports_primary_key?</a>,</li>
                
                <li><a href="#M001069">supports_savepoints?</a>,</li>
                
                <li><a href="#M001169">supports_views?</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M001110">table_exists?</a>,</li>
                
                <li><a href="#M001163">translate_exception</a>,</li>
                
                <li><a href="#M001131">type_to_sql</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M001092">update_sql</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M001174">version</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">ADAPTER_NAME</td>
            <td>=</td>
            <td class="attr-value">'Mysql2'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PRIMARY</td>
            <td>=</td>
            <td class="attr-value">&quot;PRIMARY&quot;</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">LOST_CONNECTION_ERROR_MESSAGES</td>
            <td>=</td>
            <td class="attr-value">[         &quot;Server shutdown in progress&quot;,         &quot;Broken pipe&quot;,         &quot;Lost connection to MySQL server during query&quot;,         &quot;MySQL server has gone away&quot; ]</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">QUOTED_FALSE</td>
            <td>=</td>
            <td class="attr-value">'1', '0'</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NATIVE_DATABASE_TYPES</td>
            <td>=</td>
            <td class="attr-value">{         :primary_key =&gt; &quot;int(11) DEFAULT NULL auto_increment PRIMARY KEY&quot;,         :string      =&gt; { :name =&gt; &quot;varchar&quot;, :limit =&gt; 255 },         :text        =&gt; { :name =&gt; &quot;text&quot; },         :integer     =&gt; { :name =&gt; &quot;int&quot;, :limit =&gt; 4 },         :float       =&gt; { :name =&gt; &quot;float&quot; },         :decimal     =&gt; { :name =&gt; &quot;decimal&quot; },         :datetime    =&gt; { :name =&gt; &quot;datetime&quot; },         :timestamp   =&gt; { :name =&gt; &quot;datetime&quot; },         :time        =&gt; { :name =&gt; &quot;time&quot; },         :date        =&gt; { :name =&gt; &quot;date&quot; },         :binary      =&gt; { :name =&gt; &quot;blob&quot; },         :boolean     =&gt; { :name =&gt; &quot;tinyint&quot;, :limit =&gt; 1 }       }</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M001064">
                    
                    <a name="M001064"></a><b>new</b>(connection, logger, connection_options, config)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001064_source')" id="l_M001064_source">show</a>
                        
                    </p>
                    <div id="M001064_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 125</span>
125:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>, <span class="ruby-identifier">connection_options</span>, <span class="ruby-identifier">config</span>)
126:         <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>)
127:         <span class="ruby-ivar">@connection_options</span>, <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">connection_options</span>, <span class="ruby-identifier">config</span>
128:         <span class="ruby-ivar">@quoted_column_names</span>, <span class="ruby-ivar">@quoted_table_names</span> = {}, {}
129:         <span class="ruby-identifier">configure_connection</span>
130:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M001079">
                    
                    <a name="M001079"></a><b>active?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
CONNECTION MANAGEMENT ====================================
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001079_source')" id="l_M001079_source">show</a>
                        
                    </p>
                    <div id="M001079_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 210</span>
210:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">active?</span>
211:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@connection</span>
212:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">ping</span>
213:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001066">
                    
                    <a name="M001066"></a><b>adapter_name</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001066_source')" id="l_M001066_source">show</a>
                        
                    </p>
                    <div id="M001066_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 136</span>
136:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">adapter_name</span>
137:         <span class="ruby-constant">ADAPTER_NAME</span>
138:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001117">
                    
                    <a name="M001117"></a><b>add_column</b>(table_name, column_name, type, options = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001117_source')" id="l_M001117_source">show</a>
                        
                    </p>
                    <div id="M001117_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 492</span>
492:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
493:         <span class="ruby-identifier">add_column_sql</span> = <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} ADD #{quote_column_name(column_name)} #{type_to_sql(type, options[:limit], options[:precision], options[:scale])}&quot;</span>
494:         <span class="ruby-identifier">add_column_options!</span>(<span class="ruby-identifier">add_column_sql</span>, <span class="ruby-identifier">options</span>)
495:         <span class="ruby-identifier">add_column_position!</span>(<span class="ruby-identifier">add_column_sql</span>, <span class="ruby-identifier">options</span>)
496:         <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">add_column_sql</span>)
497:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001140">
                    
                    <a name="M001140"></a><b>add_column_position!</b>(sql, options)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001140_source')" id="l_M001140_source">show</a>
                        
                    </p>
                    <div id="M001140_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 559</span>
559:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_column_position!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">options</span>)
560:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:first</span>]
561:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; FIRST&quot;</span>
562:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:after</span>]
563:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; AFTER #{quote_column_name(options[:after])}&quot;</span>
564:         <span class="ruby-keyword kw">end</span>
565:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001099">
                    
                    <a name="M001099"></a><b>add_limit_offset!</b>(sql, options)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001099_source')" id="l_M001099_source">show</a>
                        
                    </p>
                    <div id="M001099_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 354</span>
354:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_limit_offset!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">options</span>)
355:         <span class="ruby-identifier">limit</span>, <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:limit</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:offset</span>]
356:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">limit</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">offset</span>
357:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; LIMIT #{offset.to_i}, #{sanitize_limit(limit)}&quot;</span>
358:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">limit</span>
359:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; LIMIT #{sanitize_limit(limit)}&quot;</span>
360:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">offset</span>
361:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; OFFSET #{offset.to_i}&quot;</span>
362:         <span class="ruby-keyword kw">end</span>
363:         <span class="ruby-identifier">sql</span>
364:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001093">
                    
                    <a name="M001093"></a><b>begin_db_transaction</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001093_source')" id="l_M001093_source">show</a>
                        
                    </p>
                    <div id="M001093_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 324</span>
324:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">begin_db_transaction</span>
325:         <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;BEGIN&quot;</span>
326:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
327:         <span class="ruby-comment cmt"># Transactions aren't supported</span>
328:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001147">
                    
                    <a name="M001147"></a><b>case_sensitive_equality_operator</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001147_source')" id="l_M001147_source">show</a>
                        
                    </p>
                    <div id="M001147_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 589</span>
589:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">case_sensitive_equality_operator</span>
590:         <span class="ruby-value str">&quot;= BINARY&quot;</span>
591:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001153">
                    
                    <a name="M001153"></a><b>case_sensitive_modifier</b>(node)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001153_source')" id="l_M001153_source">show</a>
                        
                    </p>
                    <div id="M001153_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 594</span>
594:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">case_sensitive_modifier</span>(<span class="ruby-identifier">node</span>)
595:         <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Bin</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">node</span>)
596:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001120">
                    
                    <a name="M001120"></a><b>change_column</b>(table_name, column_name, type, options = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001120_source')" id="l_M001120_source">show</a>
                        
                    </p>
                    <div id="M001120_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 514</span>
514:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
515:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
516: 
517:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options_include_default?</span>(<span class="ruby-identifier">options</span>)
518:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">default</span>
519:         <span class="ruby-keyword kw">end</span>
520: 
521:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:null</span>)
522:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:null</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">null</span>
523:         <span class="ruby-keyword kw">end</span>
524: 
525:         <span class="ruby-identifier">change_column_sql</span> = <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} CHANGE #{quote_column_name(column_name)} #{quote_column_name(column_name)} #{type_to_sql(type, options[:limit], options[:precision], options[:scale])}&quot;</span>
526:         <span class="ruby-identifier">add_column_options!</span>(<span class="ruby-identifier">change_column_sql</span>, <span class="ruby-identifier">options</span>)
527:         <span class="ruby-identifier">add_column_position!</span>(<span class="ruby-identifier">change_column_sql</span>, <span class="ruby-identifier">options</span>)
528:         <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">change_column_sql</span>)
529:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001118">
                    
                    <a name="M001118"></a><b>change_column_default</b>(table_name, column_name, default)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001118_source')" id="l_M001118_source">show</a>
                        
                    </p>
                    <div id="M001118_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 499</span>
499:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change_column_default</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">default</span>)
500:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
501:         <span class="ruby-identifier">change_column</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">sql_type</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">default</span>
502:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001119">
                    
                    <a name="M001119"></a><b>change_column_null</b>(table_name, column_name, null, default = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001119_source')" id="l_M001119_source">show</a>
                        
                    </p>
                    <div id="M001119_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 504</span>
504:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change_column_null</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">null</span>, <span class="ruby-identifier">default</span> = <span class="ruby-keyword kw">nil</span>)
505:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
506: 
507:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">null</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">nil?</span>
508:           <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;UPDATE #{quote_table_name(table_name)} SET #{quote_column_name(column_name)}=#{quote(default)} WHERE #{quote_column_name(column_name)} IS NULL&quot;</span>)
509:         <span class="ruby-keyword kw">end</span>
510: 
511:         <span class="ruby-identifier">change_column</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">sql_type</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">null</span>
512:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001107">
                    
                    <a name="M001107"></a><b>charset</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the database character set.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001107_source')" id="l_M001107_source">show</a>
                        
                    </p>
                    <div id="M001107_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 417</span>
417:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">charset</span>
418:         <span class="ruby-identifier">show_variable</span> <span class="ruby-value str">'character_set_database'</span>
419:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001108">
                    
                    <a name="M001108"></a><b>collation</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the database collation strategy.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001108_source')" id="l_M001108_source">show</a>
                        
                    </p>
                    <div id="M001108_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 422</span>
422:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collation</span>
423:         <span class="ruby-identifier">show_variable</span> <span class="ruby-value str">'collation_database'</span>
424:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001113">
                    
                    <a name="M001113"></a><b>columns</b>(table_name, name = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of <tt>Mysql2Column</tt> objects for the table specified
by <tt>table_name</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001113_source')" id="l_M001113_source">show</a>
                        
                    </p>
                    <div id="M001113_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 470</span>
470:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
471:         <span class="ruby-identifier">sql</span> = <span class="ruby-node">&quot;SHOW FIELDS FROM #{quote_table_name(table_name)}&quot;</span>
472:         <span class="ruby-identifier">columns</span> = []
473:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-value str">'SCHEMA'</span>)
474:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">each</span>(<span class="ruby-identifier">:symbolize_keys</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:hash</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
475:           <span class="ruby-identifier">columns</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Mysql2Column</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">field</span>[<span class="ruby-identifier">:Field</span>], <span class="ruby-identifier">field</span>[<span class="ruby-identifier">:Default</span>], <span class="ruby-identifier">field</span>[<span class="ruby-identifier">:Type</span>], <span class="ruby-identifier">field</span>[<span class="ruby-identifier">:Null</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;YES&quot;</span>)
476:         }
477:         <span class="ruby-identifier">columns</span>
478:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001094">
                    
                    <a name="M001094"></a><b>commit_db_transaction</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001094_source')" id="l_M001094_source">show</a>
                        
                    </p>
                    <div id="M001094_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 330</span>
330:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">commit_db_transaction</span>
331:         <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;COMMIT&quot;</span>
332:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
333:         <span class="ruby-comment cmt"># Transactions aren't supported</span>
334:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001087">
                    
                    <a name="M001087"></a><b>create</b>(sql, name = nil, pk = nil, id_value = nil, sequence_name = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Mysql2Adapter.html#M001086">insert_sql</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M001104">
                    
                    <a name="M001104"></a><b>create_database</b>(name, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Create a new MySQL database with optional <tt>:charset</tt> and
<tt>:collation</tt>. Charset defaults to utf8.
</p>
<p>
Example:
</p>
<pre>
  create_database 'charset_test', :charset =&gt; 'latin1', :collation =&gt; 'latin1_bin'
  create_database 'matt_development'
  create_database 'matt_development', :charset =&gt; :big5
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001104_source')" id="l_M001104_source">show</a>
                        
                    </p>
                    <div id="M001104_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 396</span>
396:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
397:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:collation</span>]
398:           <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE DATABASE `#{name}` DEFAULT CHARACTER SET `#{options[:charset] || 'utf8'}` COLLATE `#{options[:collation]}`&quot;</span>
399:         <span class="ruby-keyword kw">else</span>
400:           <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE DATABASE `#{name}` DEFAULT CHARACTER SET `#{options[:charset] || 'utf8'}`&quot;</span>
401:         <span class="ruby-keyword kw">end</span>
402:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001096">
                    
                    <a name="M001096"></a><b>create_savepoint</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001096_source')" id="l_M001096_source">show</a>
                        
                    </p>
                    <div id="M001096_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 342</span>
342:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_savepoint</span>
343:         <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;SAVEPOINT #{current_savepoint_name}&quot;</span>)
344:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001114">
                    
                    <a name="M001114"></a><b>create_table</b>(table_name, options = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001114_source')" id="l_M001114_source">show</a>
                        
                    </p>
                    <div id="M001114_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 480</span>
480:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
481:         <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">reverse_merge</span>(<span class="ruby-identifier">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ENGINE=InnoDB&quot;</span>))
482:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001106">
                    
                    <a name="M001106"></a><b>current_database</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001106_source')" id="l_M001106_source">show</a>
                        
                    </p>
                    <div id="M001106_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 412</span>
412:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_database</span>
413:         <span class="ruby-identifier">select_value</span> <span class="ruby-value str">'SELECT DATABASE() as db'</span>
414:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001082">
                    
                    <a name="M001082"></a><b>disconnect!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Disconnects from the database if already connected. Otherwise, this method
does nothing.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001082_source')" id="l_M001082_source">show</a>
                        
                    </p>
                    <div id="M001082_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 227</span>
227:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disconnect!</span>
228:         <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">nil?</span>
229:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">close</span>
230:           <span class="ruby-ivar">@connection</span> = <span class="ruby-keyword kw">nil</span>
231:         <span class="ruby-keyword kw">end</span>
232:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001111">
                    
                    <a name="M001111"></a><b>drop_table</b>(table_name, options = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001111_source')" id="l_M001111_source">show</a>
                        
                    </p>
                    <div id="M001111_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 447</span>
447:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">drop_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
448:         <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span>)
449:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001089">
                    
                    <a name="M001089"></a><b>exec_delete</b>(sql, name, binds)
                    
                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Mysql2Adapter.html#M001090">exec_update</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001089_source')" id="l_M001089_source">show</a>
                        
                    </p>
                    <div id="M001089_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 306</span>
306:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_delete</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">binds</span>)
307:         <span class="ruby-identifier">binds</span> = <span class="ruby-identifier">binds</span>.<span class="ruby-identifier">dup</span>
308: 
309:         <span class="ruby-comment cmt"># Pretend to support bind parameters</span>
310:         <span class="ruby-identifier">execute</span> <span class="ruby-identifier">sql</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;\0&quot;</span>) { <span class="ruby-identifier">quote</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">binds</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">reverse</span>) }, <span class="ruby-identifier">name</span>
311:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">affected_rows</span>
312:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001088">
                    
                    <a name="M001088"></a><b>exec_insert</b>(sql, name, binds)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001088_source')" id="l_M001088_source">show</a>
                        
                    </p>
                    <div id="M001088_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 299</span>
299:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_insert</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">binds</span>)
300:         <span class="ruby-identifier">binds</span> = <span class="ruby-identifier">binds</span>.<span class="ruby-identifier">dup</span>
301: 
302:         <span class="ruby-comment cmt"># Pretend to support bind parameters</span>
303:         <span class="ruby-identifier">execute</span> <span class="ruby-identifier">sql</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;\0&quot;</span>) { <span class="ruby-identifier">quote</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">binds</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">reverse</span>) }, <span class="ruby-identifier">name</span>
304:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001090">
                    
                    <a name="M001090"></a><b>exec_update</b>(sql, name, binds)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Mysql2Adapter.html#M001089">exec_delete</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M001085">
                    
                    <a name="M001085"></a><b>execute</b>(sql, name = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Executes the SQL statement in the context of this connection.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001085_source')" id="l_M001085_source">show</a>
                        
                    </p>
                    <div id="M001085_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 276</span>
276:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
277:         <span class="ruby-comment cmt"># make sure we carry over any changes to ActiveRecord::Base.default_timezone that have been</span>
278:         <span class="ruby-comment cmt"># made since we established the connection</span>
279:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query_options</span>[<span class="ruby-identifier">:database_timezone</span>] = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span>
280:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:skip_logging</span>
281:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span>(<span class="ruby-identifier">sql</span>)
282:         <span class="ruby-keyword kw">else</span>
283:           <span class="ruby-identifier">log</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>) { <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span>(<span class="ruby-identifier">sql</span>) }
284:         <span class="ruby-keyword kw">end</span>
285:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">exception</span>
286:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>).<span class="ruby-identifier">first</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/Packets out of order/</span>
287:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>, <span class="ruby-value str">&quot;'Packets out of order' error was received from the database. Please update your mysql bindings (gem install mysql) and read http://dev.mysql.com/doc/mysql/en/password-hashing.html for more information.  If you're on Windows, use the Instant Rails installer to get the updated mysql bindings.&quot;</span>
288:         <span class="ruby-keyword kw">else</span>
289:           <span class="ruby-identifier">raise</span>
290:         <span class="ruby-keyword kw">end</span>
291:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001112">
                    
                    <a name="M001112"></a><b>indexes</b>(table_name, name = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of indexes for the given table.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001112_source')" id="l_M001112_source">show</a>
                        
                    </p>
                    <div id="M001112_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 452</span>
452:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
453:         <span class="ruby-identifier">indexes</span> = []
454:         <span class="ruby-identifier">current_index</span> = <span class="ruby-keyword kw">nil</span>
455:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;SHOW KEYS FROM #{quote_table_name(table_name)}&quot;</span>, <span class="ruby-value str">'SCHEMA'</span>)
456:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">each</span>(<span class="ruby-identifier">:symbolize_keys</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:hash</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
457:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_index</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Key_name</span>]
458:             <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Key_name</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">PRIMARY</span> <span class="ruby-comment cmt"># skip the primary key</span>
459:             <span class="ruby-identifier">current_index</span> = <span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Key_name</span>]
460:             <span class="ruby-identifier">indexes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Mysql2IndexDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Table</span>], <span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Key_name</span>], <span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Non_unique</span>] <span class="ruby-operator">==</span> <span class="ruby-value">0</span>, [], [])
461:           <span class="ruby-keyword kw">end</span>
462: 
463:           <span class="ruby-identifier">indexes</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">columns</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Column_name</span>]
464:           <span class="ruby-identifier">indexes</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">lengths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Sub_part</span>]
465:         <span class="ruby-keyword kw">end</span>
466:         <span class="ruby-identifier">indexes</span>
467:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001086">
                    
                    <a name="M001086"></a><b>insert_sql</b>(sql, name = nil, pk = nil, id_value = nil, sequence_name = nil)
                    
                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Mysql2Adapter.html#M001087">create</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001086_source')" id="l_M001086_source">show</a>
                        
                    </p>
                    <div id="M001086_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 293</span>
293:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">insert_sql</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">pk</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">id_value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">sequence_name</span> = <span class="ruby-keyword kw">nil</span>)
294:         <span class="ruby-keyword kw">super</span>
295:         <span class="ruby-identifier">id_value</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">last_id</span>
296:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001091">
                    
                    <a name="M001091"></a><b>last_inserted_id</b>(result)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001091_source')" id="l_M001091_source">show</a>
                        
                    </p>
                    <div id="M001091_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 315</span>
315:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">last_inserted_id</span>(<span class="ruby-identifier">result</span>)
316:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">last_id</span>
317:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001154">
                    
                    <a name="M001154"></a><b>limited_update_conditions</b>(where_sql, quoted_table_name, quoted_primary_key)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001154_source')" id="l_M001154_source">show</a>
                        
                    </p>
                    <div id="M001154_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 598</span>
598:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">limited_update_conditions</span>(<span class="ruby-identifier">where_sql</span>, <span class="ruby-identifier">quoted_table_name</span>, <span class="ruby-identifier">quoted_primary_key</span>)
599:         <span class="ruby-identifier">where_sql</span>
600:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001070">
                    
                    <a name="M001070"></a><b>native_database_types</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001070_source')" id="l_M001070_source">show</a>
                        
                    </p>
                    <div id="M001070_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 154</span>
154:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">native_database_types</span>
155:         <span class="ruby-constant">NATIVE_DATABASE_TYPES</span>
156:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001142">
                    
                    <a name="M001142"></a><b>pk_and_sequence_for</b>(table)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a table&#8217;s primary key and belonging sequence.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001142_source')" id="l_M001142_source">show</a>
                        
                    </p>
                    <div id="M001142_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 574</span>
574:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pk_and_sequence_for</span>(<span class="ruby-identifier">table</span>)
575:         <span class="ruby-identifier">keys</span> = []
576:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;SHOW INDEX FROM #{quote_table_name(table)} WHERE Key_name = 'PRIMARY'&quot;</span>, <span class="ruby-value str">'SCHEMA'</span>)
577:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">each</span>(<span class="ruby-identifier">:symbolize_keys</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:hash</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
578:           <span class="ruby-identifier">keys</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>[<span class="ruby-identifier">:Column_name</span>]
579:         <span class="ruby-keyword kw">end</span>
580:         <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">first</span>, <span class="ruby-keyword kw">nil</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
581:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001146">
                    
                    <a name="M001146"></a><b>primary_key</b>(table)
                    
                </div>
                
                <div class="description">
                  <p>
Returns just a table&#8217;s primary key
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001146_source')" id="l_M001146_source">show</a>
                        
                    </p>
                    <div id="M001146_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 584</span>
584:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">primary_key</span>(<span class="ruby-identifier">table</span>)
585:         <span class="ruby-identifier">pk_and_sequence</span> = <span class="ruby-identifier">pk_and_sequence_for</span>(<span class="ruby-identifier">table</span>)
586:         <span class="ruby-identifier">pk_and_sequence</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">pk_and_sequence</span>.<span class="ruby-identifier">first</span>
587:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001071">
                    
                    <a name="M001071"></a><b>quote</b>(value, column = nil)
                    
                </div>
                
                <div class="description">
                  <p>
QUOTING ==================================================
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001071_source')" id="l_M001071_source">show</a>
                        
                    </p>
                    <div id="M001071_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 160</span>
160:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">column</span> = <span class="ruby-keyword kw">nil</span>)
161:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:binary</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:string_to_binary</span>)
162:           <span class="ruby-identifier">s</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">string_to_binary</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;H*&quot;</span>)[<span class="ruby-value">0</span>]
163:           <span class="ruby-node">&quot;x'#{s}'&quot;</span>
164:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">BigDecimal</span>)
165:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-value str">&quot;F&quot;</span>)
166:         <span class="ruby-keyword kw">else</span>
167:           <span class="ruby-keyword kw">super</span>
168:         <span class="ruby-keyword kw">end</span>
169:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001074">
                    
                    <a name="M001074"></a><b>quote_string</b>(string)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001074_source')" id="l_M001074_source">show</a>
                        
                    </p>
                    <div id="M001074_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 179</span>
179:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote_string</span>(<span class="ruby-identifier">string</span>)
180:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">string</span>)
181:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001076">
                    
                    <a name="M001076"></a><b>quoted_false</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001076_source')" id="l_M001076_source">show</a>
                        
                    </p>
                    <div id="M001076_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 187</span>
187:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_false</span>
188:         <span class="ruby-constant">QUOTED_FALSE</span>
189:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001075">
                    
                    <a name="M001075"></a><b>quoted_true</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001075_source')" id="l_M001075_source">show</a>
                        
                    </p>
                    <div id="M001075_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 183</span>
183:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_true</span>
184:         <span class="ruby-constant">QUOTED_TRUE</span>
185:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001080">
                    
                    <a name="M001080"></a><b>reconnect!</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001080_source')" id="l_M001080_source">show</a>
                        
                    </p>
                    <div id="M001080_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 215</span>
215:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reconnect!</span>
216:         <span class="ruby-identifier">disconnect!</span>
217:         <span class="ruby-identifier">connect</span>
218:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001103">
                    
                    <a name="M001103"></a><b>recreate_database</b>(name, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Drops the database specified on the <tt>name</tt> attribute and creates it
again using the provided <tt>options</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001103_source')" id="l_M001103_source">show</a>
                        
                    </p>
                    <div id="M001103_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 384</span>
384:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">recreate_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
385:         <span class="ruby-identifier">drop_database</span>(<span class="ruby-identifier">name</span>)
386:         <span class="ruby-identifier">create_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>)
387:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001098">
                    
                    <a name="M001098"></a><b>release_savepoint</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001098_source')" id="l_M001098_source">show</a>
                        
                    </p>
                    <div id="M001098_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 350</span>
350:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">release_savepoint</span>
351:         <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;RELEASE SAVEPOINT #{current_savepoint_name}&quot;</span>)
352:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001126">
                    
                    <a name="M001126"></a><b>rename_column</b>(table_name, column_name, new_column_name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001126_source')" id="l_M001126_source">show</a>
                        
                    </p>
                    <div id="M001126_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 531</span>
531:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">new_column_name</span>)
532:         <span class="ruby-identifier">options</span> = {}
533:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">column</span> = <span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span> }
534:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">default</span>
535:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:null</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">null</span>
536:         <span class="ruby-keyword kw">else</span>
537:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;No such column: #{table_name}.#{column_name}&quot;</span>
538:         <span class="ruby-keyword kw">end</span>
539:         <span class="ruby-identifier">current_type</span> = <span class="ruby-identifier">select_one</span>(<span class="ruby-node">&quot;SHOW COLUMNS FROM #{quote_table_name(table_name)} LIKE '#{column_name}'&quot;</span>)[<span class="ruby-value str">&quot;Type&quot;</span>]
540:         <span class="ruby-identifier">rename_column_sql</span> = <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} CHANGE #{quote_column_name(column_name)} #{quote_column_name(new_column_name)} #{current_type}&quot;</span>
541:         <span class="ruby-identifier">add_column_options!</span>(<span class="ruby-identifier">rename_column_sql</span>, <span class="ruby-identifier">options</span>)
542:         <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">rename_column_sql</span>)
543:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001115">
                    
                    <a name="M001115"></a><b>rename_table</b>(table_name, new_name)
                    
                </div>
                
                <div class="description">
                  <p>
Renames a table.
</p>
<p>
Example:
</p>
<pre>
  rename_table('octopuses', 'octopi')
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001115_source')" id="l_M001115_source">show</a>
                        
                    </p>
                    <div id="M001115_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 488</span>
488:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
489:         <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;RENAME TABLE #{quote_table_name(table_name)} TO #{quote_table_name(new_name)}&quot;</span>
490:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001081">
                    
                    <a name="M001081"></a><b>requires_reloading?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
this is set to true in 2.3, but we don&#8217;t want it to be
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001081_source')" id="l_M001081_source">show</a>
                        
                    </p>
                    <div id="M001081_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 221</span>
221:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">requires_reloading?</span>
222:         <span class="ruby-keyword kw">false</span>
223:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001083">
                    
                    <a name="M001083"></a><b>reset!</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001083_source')" id="l_M001083_source">show</a>
                        
                    </p>
                    <div id="M001083_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 234</span>
234:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset!</span>
235:         <span class="ruby-identifier">disconnect!</span>
236:         <span class="ruby-identifier">connect</span>
237:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001095">
                    
                    <a name="M001095"></a><b>rollback_db_transaction</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001095_source')" id="l_M001095_source">show</a>
                        
                    </p>
                    <div id="M001095_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 336</span>
336:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rollback_db_transaction</span>
337:         <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;ROLLBACK&quot;</span>
338:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
339:         <span class="ruby-comment cmt"># Transactions aren't supported</span>
340:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001097">
                    
                    <a name="M001097"></a><b>rollback_to_savepoint</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001097_source')" id="l_M001097_source">show</a>
                        
                    </p>
                    <div id="M001097_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 346</span>
346:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rollback_to_savepoint</span>
347:         <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;ROLLBACK TO SAVEPOINT #{current_savepoint_name}&quot;</span>)
348:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001084">
                    
                    <a name="M001084"></a><b>select_rows</b>(sql, name = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of arrays containing the field values. Order is the same
as that returned by <tt>columns</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001084_source')" id="l_M001084_source">show</a>
                        
                    </p>
                    <div id="M001084_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 271</span>
271:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_rows</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
272:         <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>).<span class="ruby-identifier">to_a</span>
273:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001141">
                    
                    <a name="M001141"></a><b>show_variable</b>(name)
                    
                </div>
                
                <div class="description">
                  <p>
SHOW VARIABLES LIKE &#8216;name&#8217;.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001141_source')" id="l_M001141_source">show</a>
                        
                    </p>
                    <div id="M001141_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 568</span>
568:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show_variable</span>(<span class="ruby-identifier">name</span>)
569:         <span class="ruby-identifier">variables</span> = <span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SHOW VARIABLES LIKE '#{name}'&quot;</span>)
570:         <span class="ruby-identifier">variables</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value str">'Value'</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">variables</span>.<span class="ruby-identifier">empty?</span>
571:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001101">
                    
                    <a name="M001101"></a><b>structure_dump</b>()
                    
                </div>
                
                <div class="description">
                  <p>
SCHEMA STATEMENTS ========================================
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001101_source')" id="l_M001101_source">show</a>
                        
                    </p>
                    <div id="M001101_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 369</span>
369:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">structure_dump</span>
370:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">supports_views?</span>
371:           <span class="ruby-identifier">sql</span> = <span class="ruby-value str">&quot;SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'&quot;</span>
372:         <span class="ruby-keyword kw">else</span>
373:           <span class="ruby-identifier">sql</span> = <span class="ruby-value str">&quot;SHOW TABLES&quot;</span>
374:         <span class="ruby-keyword kw">end</span>
375: 
376:         <span class="ruby-identifier">select_all</span>(<span class="ruby-identifier">sql</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">structure</span>, <span class="ruby-identifier">table</span><span class="ruby-operator">|</span>
377:           <span class="ruby-identifier">table</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'Table_type'</span>)
378:           <span class="ruby-identifier">structure</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">select_one</span>(<span class="ruby-node">&quot;SHOW CREATE TABLE #{quote_table_name(table.to_a.first.last)}&quot;</span>)[<span class="ruby-value str">&quot;Create Table&quot;</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;;\n\n&quot;</span>
379:         <span class="ruby-keyword kw">end</span>
380:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001077">
                    
                    <a name="M001077"></a><b>substitute_at</b>(column, index)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001077_source')" id="l_M001077_source">show</a>
                        
                    </p>
                    <div id="M001077_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 191</span>
191:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">substitute_at</span>(<span class="ruby-identifier">column</span>, <span class="ruby-identifier">index</span>)
192:         <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span> <span class="ruby-value str">&quot;\0&quot;</span>
193:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001067">
                    
                    <a name="M001067"></a><b>supports_migrations?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true, since this connection adapter supports migrations.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001067_source')" id="l_M001067_source">show</a>
                        
                    </p>
                    <div id="M001067_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 141</span>
141:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_migrations?</span>
142:         <span class="ruby-keyword kw">true</span>
143:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001068">
                    
                    <a name="M001068"></a><b>supports_primary_key?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001068_source')" id="l_M001068_source">show</a>
                        
                    </p>
                    <div id="M001068_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 145</span>
145:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_primary_key?</span>
146:         <span class="ruby-keyword kw">true</span>
147:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001069">
                    
                    <a name="M001069"></a><b>supports_savepoints?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true, since this connection adapter supports savepoints.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001069_source')" id="l_M001069_source">show</a>
                        
                    </p>
                    <div id="M001069_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 150</span>
150:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_savepoints?</span>
151:         <span class="ruby-keyword kw">true</span>
152:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001110">
                    
                    <a name="M001110"></a><b>table_exists?</b>(name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001110_source')" id="l_M001110_source">show</a>
                        
                    </p>
                    <div id="M001110_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 433</span>
433:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_exists?</span>(<span class="ruby-identifier">name</span>)
434:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">super</span>
435: 
436:         <span class="ruby-identifier">name</span>          = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
437:         <span class="ruby-identifier">schema</span>, <span class="ruby-identifier">table</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>, <span class="ruby-value">2</span>)
438: 
439:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">table</span> <span class="ruby-comment cmt"># A table was provided without a schema</span>
440:           <span class="ruby-identifier">table</span>  = <span class="ruby-identifier">schema</span>
441:           <span class="ruby-identifier">schema</span> = <span class="ruby-keyword kw">nil</span>
442:         <span class="ruby-keyword kw">end</span>
443: 
444:         <span class="ruby-identifier">tables</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">schema</span>).<span class="ruby-identifier">include?</span> <span class="ruby-identifier">table</span>
445:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001131">
                    
                    <a name="M001131"></a><b>type_to_sql</b>(type, limit = nil, precision = nil, scale = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Maps logical <a href="../Rails.html">Rails</a> types to MySQL-specific data
types.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001131_source')" id="l_M001131_source">show</a>
                        
                    </p>
                    <div id="M001131_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 546</span>
546:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">type_to_sql</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">limit</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">precision</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">scale</span> = <span class="ruby-keyword kw">nil</span>)
547:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">super</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'integer'</span>
548: 
549:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">limit</span>
550:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">1</span>; <span class="ruby-value str">'tinyint'</span>
551:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">2</span>; <span class="ruby-value str">'smallint'</span>
552:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">3</span>; <span class="ruby-value str">'mediumint'</span>
553:         <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">4</span>, <span class="ruby-value">11</span>; <span class="ruby-value str">'int(11)'</span>  <span class="ruby-comment cmt"># compatibility with MySQL default</span>
554:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">5</span><span class="ruby-operator">..</span><span class="ruby-value">8</span>; <span class="ruby-value str">'bigint'</span>
555:         <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;No integer type has byte size #{limit}&quot;</span>)
556:         <span class="ruby-keyword kw">end</span>
557:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001092">
                    
                    <a name="M001092"></a><b>update_sql</b>(sql, name = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001092_source')" id="l_M001092_source">show</a>
                        
                    </p>
                    <div id="M001092_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 319</span>
319:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_sql</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
320:         <span class="ruby-keyword kw">super</span>
321:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">affected_rows</span>
322:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M001158">
                    
                    <a name="M001158"></a><b>quoted_columns_for_index</b>(column_names, options = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001158_source')" id="l_M001158_source">show</a>
                        
                    </p>
                    <div id="M001158_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 624</span>
624:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_columns_for_index</span>(<span class="ruby-identifier">column_names</span>, <span class="ruby-identifier">options</span> = {})
625:           <span class="ruby-identifier">length</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:length</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
626: 
627:           <span class="ruby-identifier">quoted_column_names</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">length</span>
628:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
629:             <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">length</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{quote_column_name(name)}(#{length[name]})&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">quote_column_name</span>(<span class="ruby-identifier">name</span>) }
630:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Fixnum</span>
631:             <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{quote_column_name(name)}(#{length})&quot;</span>}
632:           <span class="ruby-keyword kw">else</span>
633:             <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">quote_column_name</span>(<span class="ruby-identifier">name</span>) }
634:           <span class="ruby-keyword kw">end</span>
635:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001163">
                    
                    <a name="M001163"></a><b>translate_exception</b>(exception, message)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001163_source')" id="l_M001163_source">show</a>
                        
                    </p>
                    <div id="M001163_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 637</span>
637:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">translate_exception</span>(<span class="ruby-identifier">exception</span>, <span class="ruby-identifier">message</span>)
638:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">super</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:error_number</span>)
639: 
640:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">error_number</span>
641:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">1062</span>
642:             <span class="ruby-constant">RecordNotUnique</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>, <span class="ruby-identifier">exception</span>)
643:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">1452</span>
644:             <span class="ruby-constant">InvalidForeignKey</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>, <span class="ruby-identifier">exception</span>)
645:           <span class="ruby-keyword kw">else</span>
646:             <span class="ruby-keyword kw">super</span>
647:           <span class="ruby-keyword kw">end</span>
648:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M001175">
                    
                    <a name="M001175"></a><b>column_for</b>(table_name, column_name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001175_source')" id="l_M001175_source">show</a>
                        
                    </p>
                    <div id="M001175_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 708</span>
708:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
709:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">column</span> = <span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span> }
710:             <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;No such column: #{table_name}.#{column_name}&quot;</span>
711:           <span class="ruby-keyword kw">end</span>
712:           <span class="ruby-identifier">column</span>
713:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001166">
                    
                    <a name="M001166"></a><b>configure_connection</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001166_source')" id="l_M001166_source">show</a>
                        
                    </p>
                    <div id="M001166_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 656</span>
656:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">configure_connection</span>
657:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query_options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:array</span>)
658: 
659:           <span class="ruby-comment cmt"># By default, MySQL 'where id is null' selects the last inserted id.</span>
660:           <span class="ruby-comment cmt"># Turn this off. http://dev.rubyonrails.org/ticket/6778</span>
661:           <span class="ruby-identifier">variable_assignments</span> = [<span class="ruby-value str">'SQL_AUTO_IS_NULL=0'</span>]
662:           <span class="ruby-identifier">encoding</span> = <span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:encoding</span>]
663: 
664:           <span class="ruby-comment cmt"># make sure we set the encoding</span>
665:           <span class="ruby-identifier">variable_assignments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;NAMES '#{encoding}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">encoding</span>
666: 
667:           <span class="ruby-comment cmt"># increase timeout so mysql server doesn't disconnect us</span>
668:           <span class="ruby-identifier">wait_timeout</span> = <span class="ruby-ivar">@config</span>[<span class="ruby-identifier">:wait_timeout</span>]
669:           <span class="ruby-identifier">wait_timeout</span> = <span class="ruby-value">2592000</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">wait_timeout</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fixnum</span>)
670:           <span class="ruby-identifier">variable_assignments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;@@wait_timeout = #{wait_timeout}&quot;</span>
671: 
672:           <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;SET #{variable_assignments.join(', ')}&quot;</span>, <span class="ruby-identifier">:skip_logging</span>)
673:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001165">
                    
                    <a name="M001165"></a><b>connect</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001165_source')" id="l_M001165_source">show</a>
                        
                    </p>
                    <div id="M001165_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 651</span>
651:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect</span>
652:           <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">Mysql2</span><span class="ruby-operator">::</span><span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@config</span>)
653:           <span class="ruby-identifier">configure_connection</span>
654:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001168">
                    
                    <a name="M001168"></a><b>exec_query</b>(sql, name = 'SQL', binds = [])
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001168_source')" id="l_M001168_source">show</a>
                        
                    </p>
                    <div id="M001168_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 682</span>
682:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_query</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-value str">'SQL'</span>, <span class="ruby-identifier">binds</span> = [])
683:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query_options</span>[<span class="ruby-identifier">:database_timezone</span>] = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span>
684: 
685:           <span class="ruby-identifier">log</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">binds</span>) <span class="ruby-keyword kw">do</span>
686:             <span class="ruby-keyword kw">begin</span>
687:               <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span>(<span class="ruby-identifier">sql</span>)
688:             <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">exception</span>
689:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>).<span class="ruby-identifier">first</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/Packets out of order/</span>
690:                 <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>, <span class="ruby-value str">&quot;'Packets out of order' error was received from the database. Please update your mysql bindings (gem install mysql) and read http://dev.mysql.com/doc/mysql/en/password-hashing.html for more information.  If you're on Windows, use the Instant Rails installer to get the updated mysql bindings.&quot;</span>
691:               <span class="ruby-keyword kw">else</span>
692:                 <span class="ruby-identifier">raise</span>
693:               <span class="ruby-keyword kw">end</span>
694:             <span class="ruby-keyword kw">end</span>
695: 
696:             <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Result</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>.<span class="ruby-identifier">fields</span>, <span class="ruby-identifier">result</span>.<span class="ruby-identifier">to_a</span>)
697:           <span class="ruby-keyword kw">end</span>
698:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001167">
                    
                    <a name="M001167"></a><b>select</b>(sql, name = nil, binds = [])
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of record hashes with the column names as keys and column
values as values.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001167_source')" id="l_M001167_source">show</a>
                        
                    </p>
                    <div id="M001167_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 677</span>
677:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">binds</span> = [])
678:           <span class="ruby-identifier">binds</span> = <span class="ruby-identifier">binds</span>.<span class="ruby-identifier">dup</span>
679:           <span class="ruby-identifier">exec_query</span>(<span class="ruby-identifier">sql</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">&quot;\0&quot;</span>) { <span class="ruby-identifier">quote</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">binds</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">reverse</span>) }, <span class="ruby-identifier">name</span>).<span class="ruby-identifier">to_a</span>
680:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001169">
                    
                    <a name="M001169"></a><b>supports_views?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001169_source')" id="l_M001169_source">show</a>
                        
                    </p>
                    <div id="M001169_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 700</span>
700:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_views?</span>
701:           <span class="ruby-identifier">version</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-value">5</span>
702:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001174">
                    
                    <a name="M001174"></a><b>version</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001174_source')" id="l_M001174_source">show</a>
                        
                    </p>
                    <div id="M001174_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File activerecord-3.1.3/lib/active_record/connection_adapters/mysql2_adapter.rb, line 704</span>
704:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version</span>
705:           <span class="ruby-ivar">@version</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">info</span>[<span class="ruby-identifier">:version</span>].<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/^(\d+)\.(\d+)\.(\d+)/</span>).<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_i</span> }
706:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    