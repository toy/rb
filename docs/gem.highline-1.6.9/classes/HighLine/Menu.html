<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>HighLine::Menu</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            HighLine::Menu 
            
                <span class="parent">&lt; 
                    
                    Question
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/highline/menu_rb.html">lib/highline/menu.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="Menu.html">Menu</a> objects encapsulate all the details of a call
to <a href="../HighLine.html#M000090">HighLine.choose()</a>. Using the
accessors and <a href="Menu.html#M000014">Menu.choice()</a> and <a
href="Menu.html#M000015">Menu.choices()</a>, the block passed to <a
href="../HighLine.html#M000090">HighLine.choose()</a> can detail all
aspects of menu display and control.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000014">choice</a>,</li>
                
                <li><a href="#M000015">choices</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000019">help</a>,</li>
                
                <li><a href="#M000016">hidden</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000017">index=</a>,</li>
                
                <li><a href="#M000018">init_help</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000022">layout=</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000012">new</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000023">options</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000025">select</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000027">to_ary</a>,</li>
                
                <li><a href="#M000029">to_str</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000032">update_responses</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>index</td>
            <td class='attr-desc'><p>
An <em>index</em> to append to each menu item in display. See <a
href="Menu.html#M000017">Menu.index=()</a> for details.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>index_suffix</td>
            <td class='attr-desc'><p>
The <a href="String.html">String</a> placed between an <em>index</em> and a
menu item. Defaults to &#8220;. &#8220;. Switches to &#8220; &#8220;, when
<em>index</em> is set to a <a href="String.html">String</a> (like
&#8220;-&#8221;).
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>select_by</td>
            <td class='attr-desc'><p>
The <em><a href="Menu.html#select_by">select_by</a></em> attribute controls
how the user is allowed to pick a menu item. The available choices are:
</p>
<table>
<tr><td valign="top"><tt>:index</tt>:</td><td>The user is allowed to type the numerical or alphetical index for their
selection.

</td></tr>
<tr><td valign="top"><tt>:index_or_name</tt>:</td><td>Allows both methods from the <tt>:index</tt> option and the <tt>:name</tt>
option.

</td></tr>
<tr><td valign="top"><tt>:name</tt>:</td><td><a href="Menu.html">Menu</a> items are selected by typing a portion of the
item name that will be auto-completed.

</td></tr>
</table></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>flow</td>
            <td class='attr-desc'><p>
This attribute is passed directly on as the mode to <a
href="../HighLine.html#M000097">HighLine.list()</a> by all the preset
layouts. See that method for appropriate settings.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>list_option</td>
            <td class='attr-desc'><p>
This setting is passed on as the third parameter to <a
href="../HighLine.html#M000097">HighLine.list()</a> by all the preset
layouts. See that method for details of its effects. Defaults to
<tt>nil</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>header</td>
            <td class='attr-desc'><p>
Used by all the preset layouts to display title and/or introductory
information, when set. Defaults to <tt>nil</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>prompt</td>
            <td class='attr-desc'><p>
Used by all the preset layouts to ask the actual question to fetch a menu
selection from the user. Defaults to &#8220;? &#8220;.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>layout</td>
            <td class='attr-desc'><p>
An ERb <em>layout</em> to use when displaying this <a
href="Menu.html">Menu</a> object. See <a
href="Menu.html#M000022">Menu.layout=()</a> for details.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>shell</td>
            <td class='attr-desc'><p>
When set to <tt>true</tt>, responses are allowed to be an entire line of
input, including details beyond the command itself. Only the first
&#8220;word&#8221; of input will be matched against the menu choices, but
both the command selected and the rest of the line will be passed to
provided action blocks. Defaults to <tt>false</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>nil_on_handled</td>
            <td class='attr-desc'><p>
When <tt>true</tt>, any selected item handled by provided action code, will
return <tt>nil</tt>, instead of the results to the action code. This may
prove handy when dealing with mixed menus where only the names of items
without any code (and <tt>nil</tt>, of course) will be returned. Defaults
to <tt>false</tt>.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000012">
                    
                    <a name="M000012"></a><b>new</b>( )
                    
                </div>
                
                <div class="description">
                  <p>
Create an instance of <a href="Menu.html">HighLine::Menu</a>. All
customization is done through the passed block, which should call accessors
and choice() and choices() as needed to define the <a
href="Menu.html">Menu</a>. Note that Menus are also Questions, so all that
functionality is available to the block as well.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000012_source')" id="l_M000012_source">show</a>
                        
                    </p>
                    <div id="M000012_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 26</span>
26:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(  )
27:       <span class="ruby-comment cmt">#</span>
28:       <span class="ruby-comment cmt"># Initialize Question objects with ignored values, we'll</span>
29:       <span class="ruby-comment cmt"># adjust ours as needed.</span>
30:       <span class="ruby-comment cmt"># </span>
31:       <span class="ruby-keyword kw">super</span>(<span class="ruby-value str">&quot;Ignored&quot;</span>, [ ], <span class="ruby-operator">&amp;</span><span class="ruby-keyword kw">nil</span>)    <span class="ruby-comment cmt"># avoiding passing the block along</span>
32:       
33:       <span class="ruby-ivar">@items</span>           = [ ]
34:       <span class="ruby-ivar">@hidden_items</span>    = [ ]
35:       <span class="ruby-ivar">@help</span>            = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;There's no help for that topic.&quot;</span>)
36: 
37:       <span class="ruby-ivar">@index</span>           = <span class="ruby-identifier">:number</span>
38:       <span class="ruby-ivar">@index_suffix</span>    = <span class="ruby-value str">&quot;. &quot;</span>
39:       <span class="ruby-ivar">@select_by</span>       = <span class="ruby-identifier">:index_or_name</span>
40:       <span class="ruby-ivar">@flow</span>            = <span class="ruby-identifier">:rows</span>
41:       <span class="ruby-ivar">@list_option</span>     = <span class="ruby-keyword kw">nil</span>
42:       <span class="ruby-ivar">@header</span>          = <span class="ruby-keyword kw">nil</span>
43:       <span class="ruby-ivar">@prompt</span>          = <span class="ruby-value str">&quot;?  &quot;</span>
44:       <span class="ruby-ivar">@layout</span>          = <span class="ruby-identifier">:list</span>
45:       <span class="ruby-ivar">@shell</span>           = <span class="ruby-keyword kw">false</span>
46:       <span class="ruby-ivar">@nil_on_handled</span>  = <span class="ruby-keyword kw">false</span>
47:       
48:       <span class="ruby-comment cmt"># Override Questions responses, we'll set our own.</span>
49:       <span class="ruby-ivar">@responses</span>       = { }
50:       <span class="ruby-comment cmt"># Context for action code.</span>
51:       <span class="ruby-ivar">@highline</span>        = <span class="ruby-keyword kw">nil</span>
52:       
53:       <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
54: 
55:       <span class="ruby-identifier">init_help</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@shell</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">empty?</span>
56:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000014">
                    
                    <a name="M000014"></a><b>choice</b>( name, help = nil, &amp;action )
                    
                </div>
                
                <div class="description">
                  <p>
Adds <em>name</em> to the list of available menu items. <a
href="Menu.html">Menu</a> items will be displayed in the order they are
added.
</p>
<p>
An optional <em>action</em> can be associated with this name and if
provided, it will be called if the item is selected. The result of the
method will be returned, unless <em><a
href="Menu.html#nil_on_handled">nil_on_handled</a></em> is set (when you
would get <tt>nil</tt> instead). In <em>shell</em> mode, a provided block
will be passed the command chosen and any details that followed the
command. Otherwise, just the command is passed. The <tt>@highline</tt>
variable is set to the current <a href="../HighLine.html">HighLine</a>
context before the action code is called and can thus be used for adding
output and the like.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000014_source')" id="l_M000014_source">show</a>
                        
                    </p>
                    <div id="M000014_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 138</span>
138:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">choice</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">help</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">action</span> )
139:       <span class="ruby-ivar">@items</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span>]
140:       
141:       <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>] = <span class="ruby-identifier">help</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">help</span>.<span class="ruby-identifier">nil?</span>
142:       <span class="ruby-identifier">update_responses</span>  <span class="ruby-comment cmt"># rebuild responses based on our settings</span>
143:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000015">
                    
                    <a name="M000015"></a><b>choices</b>( *names, &amp;action )
                    
                </div>
                
                <div class="description">
                  <p>
A shortcut for multiple calls to the sister method choice(). <b>Be
warned:</b> An <em>action</em> set here will apply to <b>all</b> provided
<em>names</em>. This is considered to be a feature, so you can easily
hand-off interface processing to a different chunk of code.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000015_source')" id="l_M000015_source">show</a>
                        
                    </p>
                    <div id="M000015_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 151</span>
151:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">choices</span>( <span class="ruby-operator">*</span><span class="ruby-identifier">names</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">action</span> )
152:       <span class="ruby-identifier">names</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">choice</span>(<span class="ruby-identifier">n</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">action</span>) }
153:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000019">
                    
                    <a name="M000019"></a><b>help</b>( topic, help )
                    
                </div>
                
                <div class="description">
                  <p>
Used to set help for arbitrary topics. Use the topic
<tt>&quot;help&quot;</tt> to override the default message.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000019_source')" id="l_M000019_source">show</a>
                        
                    </p>
                    <div id="M000019_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 216</span>
216:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>( <span class="ruby-identifier">topic</span>, <span class="ruby-identifier">help</span> )
217:       <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">topic</span>] = <span class="ruby-identifier">help</span>
218:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000016">
                    
                    <a name="M000016"></a><b>hidden</b>( name, help = nil, &amp;action )
                    
                </div>
                
                <div class="description">
                  <p>
Identical to choice(), but the item will not be listed for the user.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000016_source')" id="l_M000016_source">show</a>
                        
                    </p>
                    <div id="M000016_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 156</span>
156:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hidden</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">help</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">action</span> )
157:       <span class="ruby-ivar">@hidden_items</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span>]
158:       
159:       <span class="ruby-ivar">@help</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>] = <span class="ruby-identifier">help</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">help</span>.<span class="ruby-identifier">nil?</span>
160:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000017">
                    
                    <a name="M000017"></a><b>index=</b>( style )
                    
                </div>
                
                <div class="description">
                  <p>
Sets the indexing style for this <a href="Menu.html">Menu</a> object.
Indexes are appended to menu items, when displayed in list form. The
available settings are:
</p>
<table>
<tr><td valign="top"><tt>:number</tt>:</td><td><a href="Menu.html">Menu</a> items will be indexed numerically, starting
with 1. This is the default method of indexing.

</td></tr>
<tr><td valign="top"><tt>:letter</tt>:</td><td>Items will be indexed alphabetically, starting with a.

</td></tr>
<tr><td valign="top"><tt>:none</tt>:</td><td>No index will be appended to menu items.

</td></tr>
<tr><td valign="top"><em>any String</em>:</td><td>Will be used as the literal <em>index</em>.

</td></tr>
</table>
<p>
Setting the <em>index</em> to <tt>:none</tt> a literal <a
href="String.html">String</a>, also adjusts <em><a
href="Menu.html#index_suffix">index_suffix</a></em> to a single space and
<em><a href="Menu.html#select_by">select_by</a></em> to <tt>:none</tt>.
Because of this, you should make a habit of setting the <em>index</em>
first.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000017_source')" id="l_M000017_source">show</a>
                        
                    </p>
                    <div id="M000017_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 177</span>
177:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">index=</span>( <span class="ruby-identifier">style</span> )
178:       <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">style</span>
179:       
180:       <span class="ruby-comment cmt"># Default settings.</span>
181:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:none</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@index</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">String</span>)
182:         <span class="ruby-ivar">@index_suffix</span> = <span class="ruby-value str">&quot; &quot;</span>
183:         <span class="ruby-ivar">@select_by</span>    = <span class="ruby-identifier">:name</span>
184:       <span class="ruby-keyword kw">end</span>
185:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000018">
                    
                    <a name="M000018"></a><b>init_help</b>( )
                    
                </div>
                
                <div class="description">
                  <p>
Initializes the help system by adding a <tt>:help</tt> choice, some action
code, and the default help listing.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000018_source')" id="l_M000018_source">show</a>
                        
                    </p>
                    <div id="M000018_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 191</span>
191:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_help</span>(  )
192:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">:help</span>)
193:       
194:       <span class="ruby-identifier">topics</span>    = <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
195:       <span class="ruby-identifier">help_help</span> = <span class="ruby-ivar">@help</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;help&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@help</span>[<span class="ruby-value str">&quot;help&quot;</span>] <span class="ruby-operator">:</span>
196:                   <span class="ruby-value str">&quot;This command will display helpful messages about &quot;</span> <span class="ruby-operator">+</span>
197:                   <span class="ruby-value str">&quot;functionality, like this one.  To see the help for &quot;</span> <span class="ruby-operator">+</span>
198:                   <span class="ruby-value str">&quot;a specific topic enter:\n\thelp [TOPIC]\nTry asking &quot;</span> <span class="ruby-operator">+</span>
199:                   <span class="ruby-value str">&quot;for help on any of the following:\n\n&quot;</span> <span class="ruby-operator">+</span>
200:                   <span class="ruby-node">&quot;&lt;%= list(#{topics.inspect}, :columns_across) %&gt;&quot;</span>
201:       <span class="ruby-identifier">choice</span>(<span class="ruby-identifier">:help</span>, <span class="ruby-identifier">help_help</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">command</span>, <span class="ruby-identifier">topic</span><span class="ruby-operator">|</span>
202:         <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">strip!</span>
203:         <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">downcase!</span>
204:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">empty?</span>
205:           <span class="ruby-ivar">@highline</span>.<span class="ruby-identifier">say</span>(<span class="ruby-ivar">@help</span>[<span class="ruby-value str">&quot;help&quot;</span>])
206:         <span class="ruby-keyword kw">else</span>
207:           <span class="ruby-ivar">@highline</span>.<span class="ruby-identifier">say</span>(<span class="ruby-node">&quot;= #{topic}\n\n#{@help[topic]}&quot;</span>)
208:         <span class="ruby-keyword kw">end</span>
209:       <span class="ruby-keyword kw">end</span>
210:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000022">
                    
                    <a name="M000022"></a><b>layout=</b>( new_layout )
                    
                </div>
                
                <div class="description">
                  <p>
Setting a <em>layout</em> with this method also adjusts some other
attributes of the <a href="Menu.html">Menu</a> object, to ideal defaults
for the chosen <em>layout</em>. To account for that, you probably want to
set a <em>layout</em> first in your configuration block, if needed.
</p>
<p>
Accepted settings for <em>layout</em> are:
</p>
<table>
<tr><td valign="top"><tt>:list</tt>:</td><td>The default <em>layout</em>. The <em>header</em> if set will appear at the
top on its own line with a trailing colon. Then the list of menu items will
follow. Finally, the <em>prompt</em> will be used as the ask()-like
question.

</td></tr>
<tr><td valign="top"><tt>:one_line</tt>:</td><td>A shorter <em>layout</em> that fits on one line. The <em>header</em> comes
first followed by a colon and spaces, then the <em>prompt</em> with menu
items between trailing parenthesis.

</td></tr>
<tr><td valign="top"><tt>:menu_only</tt>:</td><td>Just the menu items, followed up by a likely short <em>prompt</em>.

</td></tr>
<tr><td valign="top"><em>any ERb String</em>:</td><td>Will be taken as the literal <em>layout</em>. This <a
href="String.html">String</a> can access <tt>@header</tt>, <tt>@menu</tt>
and <tt>@prompt</tt>, but is otherwise evaluated in the typical <a
href="../HighLine.html">HighLine</a> context, to provide access to
utilities like <a href="../HighLine.html#M000097">HighLine.list()</a>
primarily.

</td></tr>
</table>
<p>
If set to either <tt>:one_line</tt>, or <tt>:menu_only</tt>, <em>index</em>
will default to <tt>:none</tt> and <em>flow</em> will default to
<tt>:inline</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000022_source')" id="l_M000022_source">show</a>
                        
                    </p>
                    <div id="M000022_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 250</span>
250:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">layout=</span>( <span class="ruby-identifier">new_layout</span> )
251:       <span class="ruby-ivar">@layout</span> = <span class="ruby-identifier">new_layout</span>
252:       
253:       <span class="ruby-comment cmt"># Default settings.</span>
254:       <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@layout</span>
255:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:one_line</span>, <span class="ruby-identifier">:menu_only</span>
256:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">index</span> = <span class="ruby-identifier">:none</span>
257:         <span class="ruby-ivar">@flow</span>  = <span class="ruby-identifier">:inline</span>
258:       <span class="ruby-keyword kw">end</span>
259:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000023">
                    
                    <a name="M000023"></a><b>options</b>( )
                    
                </div>
                
                <div class="description">
                  <p>
This method returns all possible options for auto-completion, based on the
settings of <em>index</em> and <em><a
href="Menu.html#select_by">select_by</a></em>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000023_source')" id="l_M000023_source">show</a>
                        
                    </p>
                    <div id="M000023_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 265</span>
265:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options</span>(  )
266:       <span class="ruby-comment cmt"># add in any hidden menu commands</span>
267:       <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-ivar">@hidden_items</span>)
268:       
269:       <span class="ruby-identifier">by_index</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:letter</span>
270:         <span class="ruby-identifier">l_index</span> = <span class="ruby-value str">&quot;`&quot;</span>
271:         <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-node">&quot;#{l_index.succ!}&quot;</span> }
272:       <span class="ruby-keyword kw">else</span>
273:         (<span class="ruby-value">1</span> <span class="ruby-operator">..</span> <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-constant">String</span>(<span class="ruby-identifier">s</span>) }
274:       <span class="ruby-keyword kw">end</span>
275:       <span class="ruby-identifier">by_name</span> = <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">first</span> }
276: 
277:       <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@select_by</span>
278:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:index</span> <span class="ruby-keyword kw">then</span>
279:         <span class="ruby-identifier">by_index</span>
280:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:name</span>
281:         <span class="ruby-identifier">by_name</span>
282:       <span class="ruby-keyword kw">else</span>
283:         <span class="ruby-identifier">by_index</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">by_name</span>
284:       <span class="ruby-keyword kw">end</span>
285:     <span class="ruby-keyword kw">ensure</span>
286:       <span class="ruby-comment cmt"># make sure the hidden items are removed, before we return</span>
287:       <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>, <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>)
288:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000025">
                    
                    <a name="M000025"></a><b>select</b>( highline_context, selection, details = nil )
                    
                </div>
                
                <div class="description">
                  <p>
This method processes the auto-completed user selection, based on the rules
for this <a href="Menu.html">Menu</a> object. If an action was provided for
the selection, it will be executed as described in <a
href="Menu.html#M000014">Menu.choice()</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000025_source')" id="l_M000025_source">show</a>
                        
                    </p>
                    <div id="M000025_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 295</span>
295:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select</span>( <span class="ruby-identifier">highline_context</span>, <span class="ruby-identifier">selection</span>, <span class="ruby-identifier">details</span> = <span class="ruby-keyword kw">nil</span> )
296:       <span class="ruby-comment cmt"># add in any hidden menu commands</span>
297:       <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-ivar">@hidden_items</span>)
298:       
299:       <span class="ruby-comment cmt"># Find the selected action.</span>
300:       <span class="ruby-identifier">name</span>, <span class="ruby-identifier">action</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selection</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span>
301:         <span class="ruby-ivar">@items</span>[<span class="ruby-identifier">selection</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
302:       <span class="ruby-keyword kw">else</span>
303:         <span class="ruby-identifier">l_index</span> = <span class="ruby-value str">&quot;`&quot;</span>
304:         <span class="ruby-identifier">index</span> = <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-node">&quot;#{l_index.succ!}&quot;</span> }.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">selection</span>)
305:         <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">selection</span> } <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@items</span>[<span class="ruby-identifier">index</span>]
306:       <span class="ruby-keyword kw">end</span>
307:       
308:       <span class="ruby-comment cmt"># Run or return it.</span>
309:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">nil?</span>
310:         <span class="ruby-ivar">@highline</span> = <span class="ruby-identifier">highline_context</span>
311:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@shell</span>
312:           <span class="ruby-identifier">result</span> = <span class="ruby-identifier">action</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">details</span>)
313:         <span class="ruby-keyword kw">else</span>
314:           <span class="ruby-identifier">result</span> = <span class="ruby-identifier">action</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">name</span>)
315:         <span class="ruby-keyword kw">end</span>
316:         <span class="ruby-ivar">@nil_on_handled</span> <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">result</span>
317:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">nil?</span>
318:         <span class="ruby-identifier">name</span>
319:       <span class="ruby-keyword kw">else</span>
320:         <span class="ruby-keyword kw">nil</span>
321:       <span class="ruby-keyword kw">end</span>
322:     <span class="ruby-keyword kw">ensure</span>
323:       <span class="ruby-comment cmt"># make sure the hidden items are removed, before we return</span>
324:       <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-ivar">@items</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>, <span class="ruby-ivar">@hidden_items</span>.<span class="ruby-identifier">size</span>)
325:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000027">
                    
                    <a name="M000027"></a><b>to_ary</b>( )
                    
                </div>
                
                <div class="description">
                  <p>
Allows <a href="Menu.html">Menu</a> objects to pass as Arrays, for use with
<a href="../HighLine.html#M000097">HighLine.list()</a>. This method returns
all menu items to be displayed, complete with indexes.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000027_source')" id="l_M000027_source">show</a>
                        
                    </p>
                    <div id="M000027_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 332</span>
332:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_ary</span>(  )
333:       <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@index</span>
334:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:number</span>
335:         <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{@items.index(c) + 1}#{@index_suffix}#{c.first}&quot;</span> }
336:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:letter</span>
337:         <span class="ruby-identifier">l_index</span> = <span class="ruby-value str">&quot;`&quot;</span>
338:         <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{l_index.succ!}#{@index_suffix}#{c.first}&quot;</span> }
339:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:none</span>
340:         <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{c.first}&quot;</span> }
341:       <span class="ruby-keyword kw">else</span>
342:         <span class="ruby-ivar">@items</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{index}#{@index_suffix}#{c.first}&quot;</span> }
343:       <span class="ruby-keyword kw">end</span>
344:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000029">
                    
                    <a name="M000029"></a><b>to_str</b>( )
                    
                </div>
                
                <div class="description">
                  <p>
Allows <a href="Menu.html">Menu</a> to behave as a <a
href="String.html">String</a>, just like <a
href="Question.html">Question</a>. Returns the <em>layout</em> to be
rendered, which is used by <a
href="../HighLine.html#M000098">HighLine.say()</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000029_source')" id="l_M000029_source">show</a>
                        
                    </p>
                    <div id="M000029_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 350</span>
350:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_str</span>(  )
351:       <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@layout</span>
352:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:list</span>
353:         <span class="ruby-value str">'&lt;%= if @header.nil? then '</span><span class="ruby-value str">' else &quot;#{@header}:\n&quot; end %&gt;'</span> <span class="ruby-operator">+</span>
354:         <span class="ruby-node">&quot;&lt;%= list( @menu, #{@flow.inspect},
355:                           #{@list_option.inspect} ) %&gt;&quot;</span> <span class="ruby-operator">+</span>
356:         <span class="ruby-value str">&quot;&lt;%= @prompt %&gt;&quot;</span>
357:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:one_line</span>
358:         <span class="ruby-value str">'&lt;%= if @header.nil? then '</span><span class="ruby-value str">' else &quot;#{@header}:  &quot; end %&gt;'</span> <span class="ruby-operator">+</span>
359:         <span class="ruby-value str">&quot;&lt;%= @prompt %&gt;&quot;</span> <span class="ruby-operator">+</span>
360:         <span class="ruby-node">&quot;(&lt;%= list( @menu, #{@flow.inspect},
361:                            #{@list_option.inspect} ) %&gt;)&quot;</span> <span class="ruby-operator">+</span>
362:         <span class="ruby-value str">&quot;&lt;%= @prompt[/\s*$/] %&gt;&quot;</span>
363:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:menu_only</span>
364:         <span class="ruby-node">&quot;&lt;%= list( @menu, #{@flow.inspect},
365:                           #{@list_option.inspect} ) %&gt;&lt;%= @prompt %&gt;&quot;</span>
366:       <span class="ruby-keyword kw">else</span>
367:         <span class="ruby-ivar">@layout</span>
368:       <span class="ruby-keyword kw">end</span>
369:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000032">
                    
                    <a name="M000032"></a><b>update_responses</b>( )
                    
                </div>
                
                <div class="description">
                  <p>
This method will update the intelligent responses to account for <a
href="Menu.html">Menu</a> specific differences. This overrides the work
done by <a href="Question.html#M000021">Question.build_responses()</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000032_source')" id="l_M000032_source">show</a>
                        
                    </p>
                    <div id="M000032_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/highline/menu.rb, line 376</span>
376:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_responses</span>(  )
377:       <span class="ruby-identifier">append_default</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">nil?</span>
378:       <span class="ruby-ivar">@responses</span> = <span class="ruby-ivar">@responses</span>.<span class="ruby-identifier">merge</span>(
379:                      <span class="ruby-identifier">:ambiguous_completion</span> =<span class="ruby-operator">&gt;</span>
380:                        <span class="ruby-value str">&quot;Ambiguous choice.  &quot;</span> <span class="ruby-operator">+</span>
381:                        <span class="ruby-node">&quot;Please choose one of #{options.inspect}.&quot;</span>,
382:                      <span class="ruby-identifier">:ask_on_error</span>         =<span class="ruby-operator">&gt;</span>
383:                        <span class="ruby-value str">&quot;?  &quot;</span>,
384:                      <span class="ruby-identifier">:invalid_type</span>         =<span class="ruby-operator">&gt;</span>
385:                        <span class="ruby-node">&quot;You must enter a valid #{options}.&quot;</span>,
386:                      <span class="ruby-identifier">:no_completion</span>        =<span class="ruby-operator">&gt;</span>
387:                        <span class="ruby-value str">&quot;You must choose one of &quot;</span> <span class="ruby-operator">+</span>
388:                        <span class="ruby-node">&quot;#{options.inspect}.&quot;</span>,
389:                      <span class="ruby-identifier">:not_in_range</span>         =<span class="ruby-operator">&gt;</span>
390:                        <span class="ruby-value str">&quot;Your answer isn't within the expected range &quot;</span> <span class="ruby-operator">+</span>
391:                        <span class="ruby-node">&quot;(#{expected_range}).&quot;</span>,
392:                      <span class="ruby-identifier">:not_valid</span>            =<span class="ruby-operator">&gt;</span>
393:                        <span class="ruby-value str">&quot;Your answer isn't valid (must match &quot;</span> <span class="ruby-operator">+</span>
394:                        <span class="ruby-node">&quot;#{@validate.inspect}).&quot;</span>
395:                    )
396:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    