<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Sexp</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Sexp 
            
                <span class="parent">&lt; 
                    
                    Array
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/sexp_rb.html">lib/sexp.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Sexps are the basic storage mechanism of <a
href="SexpProcessor.html">SexpProcessor</a>. Sexps have a <tt>type</tt> (to
be renamed <tt>node_type</tt>) which is the first element of the <a
href="Sexp.html">Sexp</a>. The type is used by <a
href="SexpProcessor.html">SexpProcessor</a> to determine whom to dispatch
the <a href="Sexp.html">Sexp</a> to for processing.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000007">===</a>,</li>
                
                <li><a href="#M000008">=~</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000009">array_type?</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000011">each_of_type</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000012">find_and_replace_all</a>,</li>
                
                <li><a href="#M000015">find_node</a>,</li>
                
                <li><a href="#M000016">find_nodes</a>,</li>
                
                <li><a href="#M000005">from_array</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000013">gsub</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000017">line</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000018">mass</a>,</li>
                
                <li><a href="#M000019">method_missing</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000004">new</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000022">sexp_body</a>,</li>
                
                <li><a href="#M000021">sexp_type</a>,</li>
                
                <li><a href="#M000023">shift</a>,</li>
                
                <li><a href="#M000024">structure</a>,</li>
                
                <li><a href="#M000025">sub</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [W]
            </td>
            <td class='attr-name'>line</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>file</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>comments</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000005">
                    
                    <a name="M000005"></a><b>from_array</b>(a)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Sexp.html">Sexp</a> from Array <tt>a</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000005_source')" id="l_M000005_source">show</a>
                        
                    </p>
                    <div id="M000005_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/sexp.rb, line 27</span>
27:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from_array</span>(<span class="ruby-identifier">a</span>)
28:     <span class="ruby-identifier">ary</span> = <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">a</span> <span class="ruby-value">? </span><span class="ruby-identifier">a</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">a</span>]
29: 
30:     <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>
31: 
32:     <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
33:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">x</span>
34:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Sexp</span>
35:         <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">x</span>
36:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>
37:         <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">from_array</span>(<span class="ruby-identifier">x</span>)
38:       <span class="ruby-keyword kw">else</span>
39:         <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">x</span>
40:       <span class="ruby-keyword kw">end</span>
41:     <span class="ruby-keyword kw">end</span>
42: 
43:     <span class="ruby-identifier">result</span>
44:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000004">
                    
                    <a name="M000004"></a><b>new</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Create a new <a href="Sexp.html">Sexp</a> containing <tt>args</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000004_source')" id="l_M000004_source">show</a>
                        
                    </p>
                    <div id="M000004_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/sexp.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
21:     <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">args</span>)
22:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000007">
                    
                    <a name="M000007"></a><b>===</b>(sexp)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if this Sexp&#8217;s pattern matches <tt>sexp</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000007_source')" id="l_M000007_source">show</a>
                        
                    </p>
                    <div id="M000007_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/sexp.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">===</span>(<span class="ruby-identifier">sexp</span>)
58:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Sexp</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">sexp</span>
59:     <span class="ruby-identifier">pattern</span> = <span class="ruby-keyword kw">self</span> <span class="ruby-comment cmt"># this is just for my brain</span>
60: 
61:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pattern</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">sexp</span>
62: 
63:     <span class="ruby-identifier">sexp</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">subset</span><span class="ruby-operator">|</span>
64:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pattern</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">subset</span>
65:     <span class="ruby-keyword kw">end</span>
66: 
67:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
68:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000008">
                    
                    <a name="M000008"></a><b>=~</b>(pattern)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if this <a href="Sexp.html">Sexp</a> matches <tt>pattern</tt>.
(Opposite of #===.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000008_source')" id="l_M000008_source">show</a>
                        
                    </p>
                    <div id="M000008_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/sexp.rb, line 73</span>
73:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">=~</span>(<span class="ruby-identifier">pattern</span>)
74:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">pattern</span> <span class="ruby-operator">===</span> <span class="ruby-keyword kw">self</span>
75:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000009">
                    
                    <a name="M000009"></a><b>array_type?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the node_type is <tt>array</tt> or <tt>args</tt>.
</p>
<p>
REFACTOR: to TypedSexp - we only care when we have units.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000009_source')" id="l_M000009_source">show</a>
                        
                    </p>
                    <div id="M000009_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/sexp.rb, line 82</span>
82:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">array_type?</span>
83:     <span class="ruby-identifier">type</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first</span>
84:     <span class="ruby-ivar">@@array_types</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">type</span>
85:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000011">
                    
                    <a name="M000011"></a><b>each_of_type</b>(t, &amp;b)
                    
                </div>
                
                <div class="description">
                  <p>
Enumeratates the sexp yielding to <tt>b</tt> when the node_type ==
<tt>t</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000011_source')" id="l_M000011_source">show</a>
                        
                    </p>
                    <div id="M000011_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 94</span>
 94:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_of_type</span>(<span class="ruby-identifier">t</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">b</span>)
 95:     <span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">elem</span> <span class="ruby-operator">|</span>
 96:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Sexp</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">elem</span> <span class="ruby-keyword kw">then</span>
 97:         <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">each_of_type</span>(<span class="ruby-identifier">t</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">b</span>)
 98:         <span class="ruby-identifier">b</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">elem</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">t</span>
 99:       <span class="ruby-keyword kw">end</span>
100:     <span class="ruby-keyword kw">end</span>
101:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000012">
                    
                    <a name="M000012"></a><b>find_and_replace_all</b>(from, to)
                    
                </div>
                
                <div class="description">
                  <p>
Replaces all elements whose node_type is <tt>from</tt> with <tt>to</tt>.
Used only for the most trivial of rewrites.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000012_source')" id="l_M000012_source">show</a>
                        
                    </p>
                    <div id="M000012_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 107</span>
107:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_and_replace_all</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
108:     <span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">elem</span>, <span class="ruby-identifier">index</span> <span class="ruby-operator">|</span>
109:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Sexp</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">elem</span> <span class="ruby-keyword kw">then</span>
110:         <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">find_and_replace_all</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
111:       <span class="ruby-keyword kw">else</span>
112:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">index</span>] = <span class="ruby-identifier">to</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">elem</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">from</span>
113:       <span class="ruby-keyword kw">end</span>
114:     <span class="ruby-keyword kw">end</span>
115:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000015">
                    
                    <a name="M000015"></a><b>find_node</b>(name, delete = false)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000015_source')" id="l_M000015_source">show</a>
                        
                    </p>
                    <div id="M000015_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 144</span>
144:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_node</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">delete</span> = <span class="ruby-keyword kw">false</span>
145:     <span class="ruby-identifier">matches</span> = <span class="ruby-identifier">find_nodes</span> <span class="ruby-identifier">name</span>
146: 
147:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">size</span>
148:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span>
149:       <span class="ruby-keyword kw">nil</span>
150:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">then</span>
151:       <span class="ruby-identifier">match</span> = <span class="ruby-identifier">matches</span>.<span class="ruby-identifier">first</span>
152:       <span class="ruby-identifier">delete</span> <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">delete</span>
153:       <span class="ruby-identifier">match</span>
154:     <span class="ruby-keyword kw">else</span>
155:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-node">&quot;multiple nodes for #{name} were found in #{inspect}&quot;</span>
156:     <span class="ruby-keyword kw">end</span>
157:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000016">
                    
                    <a name="M000016"></a><b>find_nodes</b>(name)
                    
                </div>
                
                <div class="description">
                  <p>
Find every node with type <tt>name</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000016_source')" id="l_M000016_source">show</a>
                        
                    </p>
                    <div id="M000016_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 162</span>
162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_nodes</span> <span class="ruby-identifier">name</span>
163:     <span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span> <span class="ruby-identifier">sexp</span> <span class="ruby-operator">|</span> <span class="ruby-constant">Sexp</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">sexp</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sexp</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span> }
164:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000013">
                    
                    <a name="M000013"></a><b>gsub</b>(pattern, repl)
                    
                </div>
                
                <div class="description">
                  <p>
Replaces all Sexps matching <tt>pattern</tt> with <a
href="Sexp.html">Sexp</a> <tt>repl</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000013_source')" id="l_M000013_source">show</a>
                        
                    </p>
                    <div id="M000013_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 120</span>
120:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">repl</span>)
121:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">repl</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pattern</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>
122: 
123:     <span class="ruby-identifier">new</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">subset</span><span class="ruby-operator">|</span>
124:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">subset</span>
125:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Sexp</span> <span class="ruby-keyword kw">then</span>
126:         <span class="ruby-identifier">subset</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">repl</span>)
127:       <span class="ruby-keyword kw">else</span>
128:         <span class="ruby-identifier">subset</span>
129:       <span class="ruby-keyword kw">end</span>
130:     <span class="ruby-keyword kw">end</span>
131: 
132:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Sexp</span>.<span class="ruby-identifier">from_array</span>(<span class="ruby-identifier">new</span>)
133:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000017">
                    
                    <a name="M000017"></a><b>line</b>(n=nil)
                    
                </div>
                
                <div class="description">
                  <p>
If passed a line number, sets the line and returns self. Otherwise returns
the line number. This allows you to do message cascades and still get the
sexp back.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000017_source')" id="l_M000017_source">show</a>
                        
                    </p>
                    <div id="M000017_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 171</span>
171:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">line</span>(<span class="ruby-identifier">n</span>=<span class="ruby-keyword kw">nil</span>)
172:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">n</span> <span class="ruby-keyword kw">then</span>
173:       <span class="ruby-ivar">@line</span> = <span class="ruby-identifier">n</span>
174:       <span class="ruby-keyword kw">self</span>
175:     <span class="ruby-keyword kw">else</span>
176:       <span class="ruby-ivar">@line</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">nil</span>
177:     <span class="ruby-keyword kw">end</span>
178:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000018">
                    
                    <a name="M000018"></a><b>mass</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the size of the sexp, flattened.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000018_source')" id="l_M000018_source">show</a>
                        
                    </p>
                    <div id="M000018_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 183</span>
183:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mass</span>
184:     <span class="ruby-ivar">@mass</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">structure</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">size</span>
185:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000019">
                    
                    <a name="M000019"></a><b>method_missing</b>(meth, delete = false)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the node named <tt>node</tt>, deleting it if <tt>delete</tt> is
true.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000019_source')" id="l_M000019_source">show</a>
                        
                    </p>
                    <div id="M000019_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 190</span>
190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_missing</span> <span class="ruby-identifier">meth</span>, <span class="ruby-identifier">delete</span> = <span class="ruby-keyword kw">false</span>
191:     <span class="ruby-identifier">find_node</span> <span class="ruby-identifier">meth</span>, <span class="ruby-identifier">delete</span>
192:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000022">
                    
                    <a name="M000022"></a><b>sexp_body</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the <a href="Sexp.html">Sexp</a> body, ie the values without the
node type.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000022_source')" id="l_M000022_source">show</a>
                        
                    </p>
                    <div id="M000022_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 213</span>
213:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sexp_body</span>
214:     <span class="ruby-keyword kw">self</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
215:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000021">
                    
                    <a name="M000021"></a><b>sexp_type</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the node type of the <a href="Sexp.html">Sexp</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000021_source')" id="l_M000021_source">show</a>
                        
                    </p>
                    <div id="M000021_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 206</span>
206:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sexp_type</span>
207:     <span class="ruby-identifier">first</span>
208:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000023">
                    
                    <a name="M000023"></a><b>shift</b>()
                    
                </div>
                
                <div class="description">
                  <p>
If run with debug, <a href="Sexp.html">Sexp</a> will raise if you shift on
an empty <a href="Sexp.html">Sexp</a>. Helps with debugging.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000023_source')" id="l_M000023_source">show</a>
                        
                    </p>
                    <div id="M000023_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 221</span>
221:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shift</span>
222:     <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;I'm empty&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">empty?</span>
223:     <span class="ruby-keyword kw">super</span>
224:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000024">
                    
                    <a name="M000024"></a><b>structure</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the bare bones structure of the sexp. s(:a, :b, s(:c, :d), :e) =>
s(:a, s(:c))
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000024_source')" id="l_M000024_source">show</a>
                        
                    </p>
                    <div id="M000024_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 230</span>
230:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">structure</span>
231:     <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>
232:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword kw">then</span>
233:       <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">structure</span>
234:     <span class="ruby-keyword kw">else</span>
235:       <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">first</span>
236:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">grep</span>(<span class="ruby-constant">Array</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">subexp</span><span class="ruby-operator">|</span>
237:         <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">subexp</span>.<span class="ruby-identifier">structure</span>
238:       <span class="ruby-keyword kw">end</span>
239:     <span class="ruby-keyword kw">end</span>
240:     <span class="ruby-identifier">result</span>
241:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000025">
                    
                    <a name="M000025"></a><b>sub</b>(pattern, repl)
                    
                </div>
                
                <div class="description">
                  <p>
Replaces the <a href="Sexp.html">Sexp</a> matching <tt>pattern</tt> with
<tt>repl</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000025_source')" id="l_M000025_source">show</a>
                        
                    </p>
                    <div id="M000025_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sexp.rb, line 246</span>
246:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sub</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">repl</span>)
247:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">repl</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pattern</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>
248: 
249:     <span class="ruby-identifier">done</span> = <span class="ruby-keyword kw">false</span>
250: 
251:     <span class="ruby-identifier">new</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">subset</span><span class="ruby-operator">|</span>
252:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">done</span> <span class="ruby-keyword kw">then</span>
253:         <span class="ruby-identifier">subset</span>
254:       <span class="ruby-keyword kw">else</span>
255:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">subset</span>
256:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Sexp</span> <span class="ruby-keyword kw">then</span>
257:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pattern</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">subset</span> <span class="ruby-keyword kw">then</span>
258:             <span class="ruby-identifier">done</span> = <span class="ruby-keyword kw">true</span>
259:             <span class="ruby-identifier">repl</span>.<span class="ruby-identifier">dup</span>
260:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">pattern</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">subset</span> <span class="ruby-keyword kw">then</span>
261:             <span class="ruby-identifier">done</span> = <span class="ruby-keyword kw">true</span>
262:             <span class="ruby-identifier">subset</span>.<span class="ruby-identifier">sub</span> <span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">repl</span>
263:           <span class="ruby-keyword kw">else</span>
264:             <span class="ruby-identifier">subset</span>
265:           <span class="ruby-keyword kw">end</span>
266:         <span class="ruby-keyword kw">else</span>
267:           <span class="ruby-identifier">subset</span>
268:         <span class="ruby-keyword kw">end</span>
269:       <span class="ruby-keyword kw">end</span>
270:     <span class="ruby-keyword kw">end</span>
271: 
272:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Sexp</span>.<span class="ruby-identifier">from_array</span>(<span class="ruby-identifier">new</span>)
273:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    