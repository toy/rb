<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>PGresult</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            PGresult 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/ext/pg_c.html">ext/pg.c</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
The class to represent the query result tuples (rows). An instance of this
class is created as the result of every query. You may need to invoke the
<a href="PGresult.html#M000091">clear</a> method of the instance when
finished with the result for better memory performance.
</p>
<p>
Example:
</p>
<pre>
   require 'pg'
   conn = PGconn.open(:dbname =&gt; 'test')
   res  = conn.exec('SELECT 1 AS a, 2 AS b, NULL AS c')
   res.getvalue(0,0) # '1'
   res[0]['b']       # '2'
   res[0]['c']       # nil
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000110">[]</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000091">clear</a>,</li>
                
                <li><a href="#M000107">cmd_status</a>,</li>
                
                <li><a href="#M000108">cmd_tuples</a>,</li>
                
                <li><a href="#M000140">cmdtuples</a>,</li>
                
                <li><a href="#M000114">column_values</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000111">each</a>,</li>
                
                <li><a href="#M000090">error_field</a>,</li>
                
                <li><a href="#M000089">error_message</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000098">fformat</a>,</li>
                
                <li><a href="#M000115">field_values</a>,</li>
                
                <li><a href="#M000112">fields</a>,</li>
                
                <li><a href="#M000100">fmod</a>,</li>
                
                <li><a href="#M000094">fname</a>,</li>
                
                <li><a href="#M000095">fnumber</a>,</li>
                
                <li><a href="#M000101">fsize</a>,</li>
                
                <li><a href="#M000096">ftable</a>,</li>
                
                <li><a href="#M000097">ftablecol</a>,</li>
                
                <li><a href="#M000099">ftype</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000103">getisnull</a>,</li>
                
                <li><a href="#M000104">getlength</a>,</li>
                
                <li><a href="#M000102">getvalue</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000093">nfields</a>,</li>
                
                <li><a href="#M000105">nparams</a>,</li>
                
                <li><a href="#M000092">ntuples</a>,</li>
                
                <li><a href="#M000139">num_fields</a>,</li>
                
                <li><a href="#M000138">num_tuples</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000109">oid_value</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000106">paramtype</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000088">res_status</a>,</li>
                
                <li><a href="#M000137">result_error_field</a>,</li>
                
                <li><a href="#M000136">result_error_message</a>,</li>
                
                <li><a href="#M000087">result_status</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M000113">values</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <span>Enumerable</span>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">PGRES_EMPTY_QUERY</td>
            <td>=</td>
            <td class="attr-value">#result_status constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The string sent to the server was empty.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PGRES_COMMAND_OK</td>
            <td>=</td>
            <td class="attr-value">#result_status constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Successful completion of a command returning no data.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PGRES_TUPLES_OK</td>
            <td>=</td>
            <td class="attr-value">#result_status constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Successful completion of a command returning data (such as a SELECT or
SHOW).
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PGRES_COPY_OUT</td>
            <td>=</td>
            <td class="attr-value">#result_status constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Copy Out (from server) data transfer started.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PGRES_COPY_IN</td>
            <td>=</td>
            <td class="attr-value">#result_status constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Copy In (to server) data transfer started.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PGRES_BAD_RESPONSE</td>
            <td>=</td>
            <td class="attr-value">#result_status constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The serverâ€™s response was not understood.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PGRES_NONFATAL_ERROR</td>
            <td>=</td>
            <td class="attr-value">#result_status constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A nonfatal error (a notice or warning) occurred.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PGRES_FATAL_ERROR</td>
            <td>=</td>
            <td class="attr-value">#result_status constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A fatal error occurred.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_SEVERITY</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The severity; the field contents are ERROR, FATAL, or PANIC (in an error
message), or WARNING, NOTICE, DEBUG, INFO, or LOG (in a notice message), or
a localized translation of one of these. Always present.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_SQLSTATE</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The SQLSTATE code for the error. The SQLSTATE code identies the type of
error that has occurred; it can be used by front-end applications to
perform specic operations (such as er- ror handling) in response to a
particular database error. For a list of the possible SQLSTATE codes, see
Appendix A. This eld is not localizable, and is always present.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_MESSAGE_PRIMARY</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The primary human-readable error message (typically one line). Always
present.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_MESSAGE_DETAIL</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant: Detail</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
an optional secondary error message carrying more detail about the problem.
Might run to multiple lines.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_MESSAGE_HINT</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant: Hint</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
an optional suggestion what to do about the problem. This is intended to
differ from detail in that it offers advice (potentially inappropriate)
rather than hard facts. Might run to multiple lines.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_STATEMENT_POSITION</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A string containing a decimal integer indicating an error cursor position
as an index into the original statement string. The rst character has index
1, and positions are measured in characters not bytes.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_INTERNAL_POSITION</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
This is dened the same as the <a
href="PGresult.html#PG_DIAG_STATEMENT_POSITION">PG_DIAG_STATEMENT_POSITION</a>
eld, but it is used when the cursor position refers to an internally
generated command rather than the one submitted by the client. The <a
href="PGresult.html#PG_DIAG_INTERNAL_QUERY">PG_DIAG_INTERNAL_QUERY</a> eld
will always appear when this eld appears.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_INTERNAL_QUERY</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The text of a failed internally-generated command. This could be, for
example, a SQL query issued by a PL/pgSQL function.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_CONTEXT</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
An indication of the context in which the error occurred. Presently this
includes a call stack traceback of active procedural language functions and
internally-generated queries. The trace is one entry per line, most recent
rst.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_SOURCE_FILE</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The le name of the source-code location where the error was reported.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_SOURCE_LINE</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The line number of the source-code location where the error was reported.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PG_DIAG_SOURCE_FUNCTION</td>
            <td>=</td>
            <td class="attr-value">#result_error_field argument constant</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
The name of the source-code function reporting the error.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">InvalidOid</td>
            <td>=</td>
            <td class="attr-value">INT2FIX(InvalidOid)</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Invalid OID constant
</p>
</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000110">
                    
                    <a name="M000110"></a><b>res[ n ] &rarr; Hash
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns tuple <em>n</em> as a hash.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show</a>
                        
                    </p>
                    <div id="M000110_source" class="dyn-source">
                        <pre>static VALUE
pgresult_aref(VALUE self, VALUE index)
{
  PGresult *result = get_pgresult(self);
  int tuple_num = NUM2INT(index);
  int field_num;
  VALUE fname,val;
  VALUE tuple;

  if ( tuple_num &lt; 0 || tuple_num &gt;= PQntuples(result) )
    rb_raise( rb_eIndexError, &quot;Index %d is out of range&quot;, tuple_num );

  tuple = rb_hash_new();
  for ( field_num = 0; field_num &lt; PQnfields(result); field_num++ ) {
    fname = rb_tainted_str_new2( PQfname(result,field_num) );
    ASSOCIATE_INDEX(fname, self);
    if ( PQgetisnull(result, tuple_num, field_num) ) {
      rb_hash_aset( tuple, fname, Qnil );
    }
    else {
      val = rb_tainted_str_new( PQgetvalue(result, tuple_num, field_num ),
                                PQgetlength(result, tuple_num, field_num) );

      /* associate client encoding for text format only */
      if ( 0 == PQfformat(result, field_num) ) {
        ASSOCIATE_INDEX( val, self );
      } else {
#ifdef M17N_SUPPORTED
        rb_enc_associate( val, rb_ascii8bit_encoding() );
#endif
      }
      rb_hash_aset( tuple, fname, val );
    }
  }
  return tuple;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000091">
                    
                    <a name="M000091"></a><b>res.clear() &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Clears the <a href="PGresult.html">PGresult</a> object as the result of the
query.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000091_source')" id="l_M000091_source">show</a>
                        
                    </p>
                    <div id="M000091_source" class="dyn-source">
                        <pre>static VALUE
pgresult_clear(VALUE self)
{
  PQclear(get_pgresult(self));
  DATA_PTR(self) = NULL;
  return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000107">
                    
                    <a name="M000107"></a><b>res.cmd_status() &rarr; String
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the status string of the last query command.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000107_source')" id="l_M000107_source">show</a>
                        
                    </p>
                    <div id="M000107_source" class="dyn-source">
                        <pre>static VALUE
pgresult_cmd_status(VALUE self)
{
  VALUE ret = rb_tainted_str_new2(PQcmdStatus(get_pgresult(self)));
  ASSOCIATE_INDEX(ret, self);
  return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000108">
                    
                    <a name="M000108"></a><b>res.cmd_tuples() &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the number of tuples (rows) affected by the SQL command.
</p>
<p>
If the SQL command that generated the <a href="PGresult.html">PGresult</a>
was not one of:
</p>
<ul>
<li><tt>INSERT</tt>

</li>
<li><tt>UPDATE</tt>

</li>
<li><tt>DELETE</tt>

</li>
<li><tt>MOVE</tt>

</li>
<li><tt>FETCH</tt>

</li>
</ul>
<p>
or if no tuples were affected, <tt>0</tt> is returned.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="PGresult.html#M000140">cmdtuples</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show</a>
                        
                    </p>
                    <div id="M000108_source" class="dyn-source">
                        <pre>static VALUE
pgresult_cmd_tuples(VALUE self)
{
  long n;
  n = strtol(PQcmdTuples(get_pgresult(self)),NULL, 10);
  return INT2NUM(n);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000140">
                    
                    <a name="M000140"></a><b>cmdtuples</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="PGresult.html#M000108">cmd_tuples</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000114">
                    
                    <a name="M000114"></a><b>res.column_values( n )   &rarr; array
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns an Array of the values from the nth column of each tuple in the
result.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000114_source')" id="l_M000114_source">show</a>
                        
                    </p>
                    <div id="M000114_source" class="dyn-source">
                        <pre>static VALUE
pgresult_column_values(VALUE self, VALUE index)
{
  int col = NUM2INT( index );
  return make_column_result_array( self, col );
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000111">
                    
                    <a name="M000111"></a><b>res.each{ |tuple| ... }
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Invokes block for each tuple in the result set.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000111_source')" id="l_M000111_source">show</a>
                        
                    </p>
                    <div id="M000111_source" class="dyn-source">
                        <pre>static VALUE
pgresult_each(VALUE self)
{
  PGresult *result = get_pgresult(self);
  int tuple_num;

  for(tuple_num = 0; tuple_num &lt; PQntuples(result); tuple_num++) {
    rb_yield(pgresult_aref(self, INT2NUM(tuple_num)));
  }
  return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000090">
                    
                    <a name="M000090"></a><b>res.error_field(fieldcode) &rarr; String
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the individual field of an error.
</p>
<p>
<tt>fieldcode</tt> is one of:
</p>
<ul>
<li><tt><a href="PGresult.html#PG_DIAG_SEVERITY">PG_DIAG_SEVERITY</a></tt>

</li>
<li><tt><a href="PGresult.html#PG_DIAG_SQLSTATE">PG_DIAG_SQLSTATE</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_MESSAGE_PRIMARY">PG_DIAG_MESSAGE_PRIMARY</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_MESSAGE_DETAIL">PG_DIAG_MESSAGE_DETAIL</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_MESSAGE_HINT">PG_DIAG_MESSAGE_HINT</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_STATEMENT_POSITION">PG_DIAG_STATEMENT_POSITION</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_INTERNAL_POSITION">PG_DIAG_INTERNAL_POSITION</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_INTERNAL_QUERY">PG_DIAG_INTERNAL_QUERY</a></tt>

</li>
<li><tt><a href="PGresult.html#PG_DIAG_CONTEXT">PG_DIAG_CONTEXT</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_SOURCE_FILE">PG_DIAG_SOURCE_FILE</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_SOURCE_LINE">PG_DIAG_SOURCE_LINE</a></tt>

</li>
<li><tt><a
href="PGresult.html#PG_DIAG_SOURCE_FUNCTION">PG_DIAG_SOURCE_FUNCTION</a></tt>

</li>
</ul>
<p>
An example:
</p>
<pre>
  begin
      conn.exec( &quot;SELECT * FROM nonexistant_table&quot; )
  rescue PGError =&gt; err
      p [
          result.error_field( PGresult::PG_DIAG_SEVERITY ),
          result.error_field( PGresult::PG_DIAG_SQLSTATE ),
          result.error_field( PGresult::PG_DIAG_MESSAGE_PRIMARY ),
          result.error_field( PGresult::PG_DIAG_MESSAGE_DETAIL ),
          result.error_field( PGresult::PG_DIAG_MESSAGE_HINT ),
          result.error_field( PGresult::PG_DIAG_STATEMENT_POSITION ),
          result.error_field( PGresult::PG_DIAG_INTERNAL_POSITION ),
          result.error_field( PGresult::PG_DIAG_INTERNAL_QUERY ),
          result.error_field( PGresult::PG_DIAG_CONTEXT ),
          result.error_field( PGresult::PG_DIAG_SOURCE_FILE ),
          result.error_field( PGresult::PG_DIAG_SOURCE_LINE ),
          result.error_field( PGresult::PG_DIAG_SOURCE_FUNCTION ),
      ]
  end
</pre>
<p>
Outputs:
</p>
<pre>
  [&quot;ERROR&quot;, &quot;42P01&quot;, &quot;relation \&quot;nonexistant_table\&quot; does not exist&quot;, nil, nil,
   &quot;15&quot;, nil, nil, nil, &quot;path/to/parse_relation.c&quot;, &quot;857&quot;, &quot;parserOpenTable&quot;]
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="PGresult.html#M000137">result_error_field</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000090_source')" id="l_M000090_source">show</a>
                        
                    </p>
                    <div id="M000090_source" class="dyn-source">
                        <pre>static VALUE
pgresult_error_field(VALUE self, VALUE field)
{
  PGresult *result = get_pgresult( self );
  int fieldcode = NUM2INT( field );
  char * fieldstr = PQresultErrorField( result, fieldcode );
  VALUE ret = Qnil;

  if ( fieldstr ) {
    ret = rb_tainted_str_new2( fieldstr );
    ASSOCIATE_INDEX( ret, self );
  }

  return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000089">
                    
                    <a name="M000089"></a><b>res.error_message() &rarr; String
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the error message of the command as a string.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="PGresult.html#M000136">result_error_message</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show</a>
                        
                    </p>
                    <div id="M000089_source" class="dyn-source">
                        <pre>static VALUE
pgresult_error_message(VALUE self)
{
  VALUE ret = rb_tainted_str_new2(PQresultErrorMessage(get_pgresult(self)));
  ASSOCIATE_INDEX(ret, self);
  return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000098">
                    
                    <a name="M000098"></a><b>res.fformat( column_number ) &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the format (0 for text, 1 for binary) of column
<em>column_number</em>.
</p>
<p>
Raises ArgumentError if <em>column_number</em> is out of range.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show</a>
                        
                    </p>
                    <div id="M000098_source" class="dyn-source">
                        <pre>static VALUE
pgresult_fformat(VALUE self, VALUE column_number)
{
  PGresult *result = get_pgresult(self);
  int fnumber = NUM2INT(column_number);
  if (fnumber &lt; 0 || fnumber &gt;= PQnfields(result)) {
    rb_raise(rb_eArgError, &quot;Column number is out of range: %d&quot;, 
      fnumber);
  }
  return INT2FIX(PQfformat(result, fnumber));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000115">
                    
                    <a name="M000115"></a><b>res.field_values( field )   &rarr; array
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns an Array of the values from the given <em>field</em> of each tuple
in the result.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show</a>
                        
                    </p>
                    <div id="M000115_source" class="dyn-source">
                        <pre>static VALUE
pgresult_field_values( VALUE self, VALUE field )
{
  PGresult *result = get_pgresult( self );
  const char *fieldname = RSTRING_PTR( field );
  int fnum = PQfnumber( result, fieldname );

  if ( fnum &lt; 0 )
    rb_raise( rb_eIndexError, &quot;no such field '%s' in result&quot;, fieldname );

  return make_column_result_array( self, fnum );
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000112">
                    
                    <a name="M000112"></a><b>res.fields() &rarr; Array
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of Strings representing the names of the fields in the
result.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show</a>
                        
                    </p>
                    <div id="M000112_source" class="dyn-source">
                        <pre>static VALUE
pgresult_fields(VALUE self)
{
  PGresult *result;
  VALUE ary;
  int n, i;

  result = get_pgresult(self);
  n = PQnfields(result);
  ary = rb_ary_new2(n);
  for (i=0;i&lt;n;i++) {
    VALUE val = rb_tainted_str_new2(PQfname(result, i));
    ASSOCIATE_INDEX(val, self);
    rb_ary_push(ary, val);
  }
  return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000100">
                    
                    <a name="M000100"></a><b>res.fmod( column_number )
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the type modifier associated with column <em>column_number</em>.
See the <a href="PGresult.html#M000099">ftype</a> method for an example of
how to use this.
</p>
<p>
Raises an ArgumentError if <em>column_number</em> is out of range.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show</a>
                        
                    </p>
                    <div id="M000100_source" class="dyn-source">
                        <pre>static VALUE
pgresult_fmod(VALUE self, VALUE column_number)
{
  PGresult *result = get_pgresult(self);
  int fnumber = NUM2INT(column_number);
  int modifier;
  if (fnumber &lt; 0 || fnumber &gt;= PQnfields(result)) {
    rb_raise(rb_eArgError, &quot;Column number is out of range: %d&quot;, 
      fnumber);
  }
  modifier = PQfmod(result,fnumber);

  return INT2NUM(modifier);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000094">
                    
                    <a name="M000094"></a><b>res.fname( index ) &rarr; String
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the name of the column corresponding to <em>index</em>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000094_source')" id="l_M000094_source">show</a>
                        
                    </p>
                    <div id="M000094_source" class="dyn-source">
                        <pre>static VALUE
pgresult_fname(VALUE self, VALUE index)
{
  VALUE fname;
  PGresult *result;
  int i = NUM2INT(index);

  result = get_pgresult(self);
  if (i &lt; 0 || i &gt;= PQnfields(result)) {
    rb_raise(rb_eArgError,&quot;invalid field number %d&quot;, i);
  }
  fname = rb_tainted_str_new2(PQfname(result, i));
  ASSOCIATE_INDEX(fname, self);
  return fname;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000095">
                    
                    <a name="M000095"></a><b>res.fnumber( name ) &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the index of the field specified by the string <em>name</em>.
</p>
<p>
Raises an ArgumentError if the specified <em>name</em> isn&#8217;t one of
the field names; raises a TypeError if <em>name</em> is not a String.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show</a>
                        
                    </p>
                    <div id="M000095_source" class="dyn-source">
                        <pre>static VALUE
pgresult_fnumber(VALUE self, VALUE name)
{
  int n;

  Check_Type(name, T_STRING);

  n = PQfnumber(get_pgresult(self), StringValuePtr(name));
  if (n == -1) {
    rb_raise(rb_eArgError,&quot;Unknown field: %s&quot;, StringValuePtr(name));
  }
  return INT2FIX(n);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000101">
                    
                    <a name="M000101"></a><b>res.fsize( index )
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the size of the field type in bytes. Returns <tt>-1</tt> if the
field is variable sized.
</p>
<pre>
  res = conn.exec(&quot;SELECT myInt, myVarChar50 FROM foo&quot;)
  res.size(0) =&gt; 4
  res.size(1) =&gt; -1
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show</a>
                        
                    </p>
                    <div id="M000101_source" class="dyn-source">
                        <pre>static VALUE
pgresult_fsize(VALUE self, VALUE index)
{
  PGresult *result;
  int i = NUM2INT(index);

  result = get_pgresult(self);
  if (i &lt; 0 || i &gt;= PQnfields(result)) {
    rb_raise(rb_eArgError,&quot;invalid field number %d&quot;, i);
  }
  return INT2NUM(PQfsize(result, i));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000096">
                    
                    <a name="M000096"></a><b>res.ftable( column_number ) &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the Oid of the table from which the column <em>column_number</em>
was fetched.
</p>
<p>
Raises ArgumentError if <em>column_number</em> is out of range or if the
Oid is undefined for that column.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show</a>
                        
                    </p>
                    <div id="M000096_source" class="dyn-source">
                        <pre>static VALUE
pgresult_ftable(VALUE self, VALUE column_number)
{
  Oid n ;
  int col_number = NUM2INT(column_number);
  PGresult *pgresult = get_pgresult(self);

  if( col_number &lt; 0 || col_number &gt;= PQnfields(pgresult)) 
    rb_raise(rb_eArgError,&quot;Invalid column index: %d&quot;, col_number);

  n = PQftable(pgresult, col_number);
  return INT2FIX(n);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000097">
                    
                    <a name="M000097"></a><b>res.ftablecol( column_number ) &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the column number (within its table) of the table from which the
column <em>column_number</em> is made up.
</p>
<p>
Raises ArgumentError if <em>column_number</em> is out of range or if the
column number from its table is undefined for that column.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show</a>
                        
                    </p>
                    <div id="M000097_source" class="dyn-source">
                        <pre>static VALUE
pgresult_ftablecol(VALUE self, VALUE column_number)
{
  int col_number = NUM2INT(column_number);
  PGresult *pgresult = get_pgresult(self);

  int n;

  if( col_number &lt; 0 || col_number &gt;= PQnfields(pgresult)) 
    rb_raise(rb_eArgError,&quot;Invalid column index: %d&quot;, col_number);

  n = PQftablecol(pgresult, col_number);
  return INT2FIX(n);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000099">
                    
                    <a name="M000099"></a><b>res.ftype( column_number )
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the data type associated with <em>column_number</em>.
</p>
<p>
The integer returned is the internal <tt>OID</tt> number (in PostgreSQL) of
the type. To get a human-readable value for the type, use the returned OID
and the field&#8217;s <a href="PGresult.html#M000100">fmod</a> value with
the format_type() SQL function:
</p>
<pre>
  # Get the type of the second column of the result 'res'
  typename = conn.
    exec( &quot;SELECT format_type($1,$2)&quot;, [res.ftype(1), res.fmod(1)] ).
    getvalue( 0, 0 )
</pre>
<p>
Raises an ArgumentError if <em>column_number</em> is out of range.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show</a>
                        
                    </p>
                    <div id="M000099_source" class="dyn-source">
                        <pre>static VALUE
pgresult_ftype(VALUE self, VALUE index)
{
  PGresult* result = get_pgresult(self);
  int i = NUM2INT(index);
  if (i &lt; 0 || i &gt;= PQnfields(result)) {
    rb_raise(rb_eArgError, &quot;invalid field number %d&quot;, i);
  }
  return INT2NUM(PQftype(result, i));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000103">
                    
                    <a name="M000103"></a><b>res.getisnull(tuple_position, field_position) &rarr; boolean
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the specified value is <tt>nil</tt>;
<tt>false</tt> otherwise.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show</a>
                        
                    </p>
                    <div id="M000103_source" class="dyn-source">
                        <pre>static VALUE
pgresult_getisnull(VALUE self, VALUE tup_num, VALUE field_num)
{
  PGresult *result;
  int i = NUM2INT(tup_num);
  int j = NUM2INT(field_num);

  result = get_pgresult(self);
  if (i &lt; 0 || i &gt;= PQntuples(result)) {
    rb_raise(rb_eArgError,&quot;invalid tuple number %d&quot;, i);
  }
  if (j &lt; 0 || j &gt;= PQnfields(result)) {
    rb_raise(rb_eArgError,&quot;invalid field number %d&quot;, j);
  }
  return PQgetisnull(result, i, j) ? Qtrue : Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000104">
                    
                    <a name="M000104"></a><b>res.getlength( tup_num, field_num ) &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the (String) length of the field in bytes.
</p>
<p>
Equivalent to
<tt>res.value(<em>tup_num</em>,<em>field_num</em>).length</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show</a>
                        
                    </p>
                    <div id="M000104_source" class="dyn-source">
                        <pre>static VALUE
pgresult_getlength(VALUE self, VALUE tup_num, VALUE field_num)
{
  PGresult *result;
  int i = NUM2INT(tup_num);
  int j = NUM2INT(field_num);

  result = get_pgresult(self);
  if (i &lt; 0 || i &gt;= PQntuples(result)) {
    rb_raise(rb_eArgError,&quot;invalid tuple number %d&quot;, i);
  }
  if (j &lt; 0 || j &gt;= PQnfields(result)) {
    rb_raise(rb_eArgError,&quot;invalid field number %d&quot;, j);
  }
  return INT2FIX(PQgetlength(result, i, j));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000102">
                    
                    <a name="M000102"></a><b>res.getvalue( tup_num, field_num )
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the value in tuple number <em>tup_num</em>, field
<em>field_num</em>, or <tt>nil</tt> if the field is <tt>NULL</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show</a>
                        
                    </p>
                    <div id="M000102_source" class="dyn-source">
                        <pre>static VALUE
pgresult_getvalue(VALUE self, VALUE tup_num, VALUE field_num)
{
  VALUE ret;
  PGresult *result;
  int i = NUM2INT(tup_num);
  int j = NUM2INT(field_num);

  result = get_pgresult(self);
  if(i &lt; 0 || i &gt;= PQntuples(result)) {
    rb_raise(rb_eArgError,&quot;invalid tuple number %d&quot;, i);
  }
  if(j &lt; 0 || j &gt;= PQnfields(result)) {
    rb_raise(rb_eArgError,&quot;invalid field number %d&quot;, j);
  }
  if(PQgetisnull(result, i, j))
    return Qnil;
  ret = rb_tainted_str_new(PQgetvalue(result, i, j), 
        PQgetlength(result, i, j));
  ASSOCIATE_INDEX(ret, self);
  return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000093">
                    
                    <a name="M000093"></a><b>res.nfields() &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the number of columns in the query result.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="PGresult.html#M000139">num_fields</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000093_source')" id="l_M000093_source">show</a>
                        
                    </p>
                    <div id="M000093_source" class="dyn-source">
                        <pre>static VALUE
pgresult_nfields(VALUE self)
{
  return INT2NUM(PQnfields(get_pgresult(self)));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000105">
                    
                    <a name="M000105"></a><b>res.nparams() &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the number of parameters of a prepared statement. Only useful for
the result returned by conn.describePrepared
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show</a>
                        
                    </p>
                    <div id="M000105_source" class="dyn-source">
                        <pre>static VALUE
pgresult_nparams(VALUE self)
{
  PGresult *result;

  result = get_pgresult(self);
  return INT2FIX(PQnparams(result));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000092">
                    
                    <a name="M000092"></a><b>res.ntuples() &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the number of tuples in the query result.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="PGresult.html#M000138">num_tuples</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000092_source')" id="l_M000092_source">show</a>
                        
                    </p>
                    <div id="M000092_source" class="dyn-source">
                        <pre>static VALUE
pgresult_ntuples(VALUE self)
{
  return INT2FIX(PQntuples(get_pgresult(self)));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000139">
                    
                    <a name="M000139"></a><b>num_fields</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="PGresult.html#M000093">nfields</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000138">
                    
                    <a name="M000138"></a><b>num_tuples</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="PGresult.html#M000092">ntuples</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000109">
                    
                    <a name="M000109"></a><b>res.oid_value() &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the <tt>oid</tt> of the inserted row if applicable, otherwise
<tt>nil</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000109_source')" id="l_M000109_source">show</a>
                        
                    </p>
                    <div id="M000109_source" class="dyn-source">
                        <pre>static VALUE
pgresult_oid_value(VALUE self)
{
  Oid n = PQoidValue(get_pgresult(self));
  if (n == InvalidOid)
    return Qnil;
  else
    return INT2FIX(n);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000106">
                    
                    <a name="M000106"></a><b>res.paramtype( param_number ) &rarr; Oid
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the Oid of the data type of parameter <em>param_number</em>. Only
useful for the result returned by conn.describePrepared
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show</a>
                        
                    </p>
                    <div id="M000106_source" class="dyn-source">
                        <pre>static VALUE
pgresult_paramtype(VALUE self, VALUE param_number)
{
  PGresult *result;

  result = get_pgresult(self);
  return INT2FIX(PQparamtype(result,NUM2INT(param_number)));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000088">
                    
                    <a name="M000088"></a><b>res.res_status( status ) &rarr; String
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the string representation of status <tt>status</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show</a>
                        
                    </p>
                    <div id="M000088_source" class="dyn-source">
                        <pre>static VALUE
pgresult_res_status(VALUE self, VALUE status)
{
  VALUE ret = rb_tainted_str_new2(PQresStatus(NUM2INT(status)));
  ASSOCIATE_INDEX(ret, self);
  return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000137">
                    
                    <a name="M000137"></a><b>result_error_field</b>(p1)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="PGresult.html#M000090">error_field</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000136">
                    
                    <a name="M000136"></a><b>result_error_message</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="PGresult.html#M000089">error_message</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000087">
                    
                    <a name="M000087"></a><b>res.result_status() &rarr; Fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the status of the query. The status value is one of:
</p>
<ul>
<li><tt><a href="PGresult.html#PGRES_EMPTY_QUERY">PGRES_EMPTY_QUERY</a></tt>

</li>
<li><tt><a href="PGresult.html#PGRES_COMMAND_OK">PGRES_COMMAND_OK</a></tt>

</li>
<li><tt><a href="PGresult.html#PGRES_TUPLES_OK">PGRES_TUPLES_OK</a></tt>

</li>
<li><tt><a href="PGresult.html#PGRES_COPY_OUT">PGRES_COPY_OUT</a></tt>

</li>
<li><tt><a href="PGresult.html#PGRES_COPY_IN">PGRES_COPY_IN</a></tt>

</li>
<li><tt><a href="PGresult.html#PGRES_BAD_RESPONSE">PGRES_BAD_RESPONSE</a></tt>

</li>
<li><tt><a
href="PGresult.html#PGRES_NONFATAL_ERROR">PGRES_NONFATAL_ERROR</a></tt>

</li>
<li><tt><a href="PGresult.html#PGRES_FATAL_ERROR">PGRES_FATAL_ERROR</a></tt>

</li>
</ul>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show</a>
                        
                    </p>
                    <div id="M000087_source" class="dyn-source">
                        <pre>static VALUE
pgresult_result_status(VALUE self)
{
  return INT2FIX(PQresultStatus(get_pgresult(self)));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000113">
                    
                    <a name="M000113"></a><b>res.values &rarr; Array
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns all tuples as an array of arrays.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show</a>
                        
                    </p>
                    <div id="M000113_source" class="dyn-source">
                        <pre>static VALUE
pgresult_values(VALUE self, VALUE index)
{
  PGresult* result = (PGresult*) get_pgresult(self);
  int row;
  int field;
  int num_rows = PQntuples(result);
  int num_fields = PQnfields(result);
  VALUE ary = rb_ary_new2(num_rows);

  for ( row = 0; row &lt; num_rows; row++ ) {
    /* create new row */
    VALUE new_row = rb_ary_new2(num_fields);

    /* add to return array */
    rb_ary_store( ary, row, new_row );

    /* populate it */
    for ( field = 0; field &lt; num_fields; field++ ) {
      if ( PQgetisnull(result, row, field) ) {
        rb_ary_store( new_row, field, Qnil );
      }
      else {
        VALUE val = rb_tainted_str_new( PQgetvalue(result, row, field), 
                                        PQgetlength(result, row, field) );

        /* associate client encoding for text format only */
        if ( 0 == PQfformat(result, field) ) {
          ASSOCIATE_INDEX( val, self );
        } else {
#ifdef M17N_SUPPORTED
          rb_enc_associate( val, rb_ascii8bit_encoding() );
#endif
        }

        rb_ary_store( new_row, field, val );
      }
    }
  }
  return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    