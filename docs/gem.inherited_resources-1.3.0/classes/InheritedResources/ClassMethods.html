<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>InheritedResources::ClassMethods</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            InheritedResources::ClassMethods 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/inherited_resources/class_methods_rb.html">lib/inherited_resources/class_methods.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000053">actions</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000054">belongs_to</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000071">create_custom_action</a>,</li>
                
                <li><a href="#M000064">custom_actions</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000052">defaults</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000060">nested_belongs_to</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000063">optional_belongs_to</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000061">polymorphic_belongs_to</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000062">singleton_belongs_to</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000065">with_role</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="SingletonHelpers.html">InheritedResources::SingletonHelpers</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="SingletonHelpers.html">InheritedResources::SingletonHelpers</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="SingletonHelpers.html">InheritedResources::SingletonHelpers</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="SingletonHelpers.html">InheritedResources::SingletonHelpers</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="SingletonHelpers.html">InheritedResources::SingletonHelpers</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    

    

    
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M000053">
                    
                    <a name="M000053"></a><b>actions</b>(*actions_to_keep)
                    
                </div>
                
                <div class="description">
                  <p>
Defines wich actions to keep from the inherited controller. Syntax is
borrowed from resource_controller.
</p>
<pre>
  actions :index, :show, :edit
  actions :all, :except =&gt; :index
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000053_source')" id="l_M000053_source">show</a>
                        
                    </p>
                    <div id="M000053_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 71</span>
71:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">actions</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">actions_to_keep</span>)
72:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'Wrong number of arguments. You have to provide which actions you want to keep.'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">actions_to_keep</span>.<span class="ruby-identifier">empty?</span>
73: 
74:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">actions_to_keep</span>.<span class="ruby-identifier">extract_options!</span>
75:         <span class="ruby-identifier">actions_to_remove</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:except</span>])
76:         <span class="ruby-identifier">actions_to_remove</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">ACTIONS</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">actions_to_keep</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">to_sym</span> } <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">actions_to_keep</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:all</span>
77:         <span class="ruby-identifier">actions_to_remove</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">to_sym</span> }.<span class="ruby-identifier">uniq!</span>
78:         (<span class="ruby-identifier">instance_methods</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_sym</span> } <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">actions_to_remove</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">action</span><span class="ruby-operator">|</span>
79:           <span class="ruby-identifier">undef_method</span> <span class="ruby-identifier">action</span>, <span class="ruby-node">&quot;#{action}!&quot;</span>
80:         <span class="ruby-keyword kw">end</span>
81:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000054">
                    
                    <a name="M000054"></a><b>belongs_to</b>(*symbols, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Defines that this controller belongs to another resource.
</p>
<pre>
  belongs_to :projects
</pre>
<h2>Options</h2>
<ul>
<li><tt>:parent_class</tt> - Allows you to specify what is the parent class.

<pre>
  belongs_to :project, :parent_class =&gt; AdminProject
</pre>
</li>
<li><tt>:class_name</tt> - Also allows you to specify the parent class, but you
should

<pre>
                       give a string. Added for ActiveRecord belongs to compatibility.
</pre>
</li>
<li><tt>:instance_name</tt> - The instance variable name. By default is the
name of the association.

<pre>
  belongs_to :project, :instance_name =&gt; :my_project
</pre>
</li>
<li><tt>:finder</tt> - Specifies which method should be called to instantiate
the parent.

<pre>
  belongs_to :project, :finder =&gt; :find_by_title!
</pre>
<p>
This will make your projects be instantiated as:
</p>
<pre>
  Project.find_by_title!(params[:project_id])
</pre>
<p>
Instead of:
</p>
<pre>
  Project.find(params[:project_id])
</pre>
</li>
<li><tt>:param</tt> - Allows you to specify params key to retrieve the id.

<pre>
                  Default is :association_id, which in this case is :project_id.
</pre>
</li>
<li><tt>:route_name</tt> - Allows you to specify what is the route name in your
url

<pre>
                       helper. By default is association name.
</pre>
</li>
<li><tt>:collection_name</tt> - Tell how to retrieve the next collection.
Let&#8217;s

<pre>
                            suppose you have Tasks which belongs to Projects
                            which belongs to companies. This will do somewhere
                            down the road:

   @company.projects
</pre>
<p>
But if you want to retrieve instead:
</p>
<pre>
   @company.admin_projects
</pre>
<p>
You supply the collection name.
</p>
</li>
<li><tt>:polymorphic</tt> - Tell the association is polymorphic.

</li>
<li><tt>:singleton</tt> - Tell it&#8217;s a singleton association.

</li>
<li><tt>:optional</tt> - Tell the association is optional (it&#8217;s a special

<pre>
                     type of polymorphic association)
</pre>
</li>
</ul>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="ClassMethods.html#M000060">nested_belongs_to</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000054_source')" id="l_M000054_source">show</a>
                        
                    </p>
                    <div id="M000054_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 138</span>
138:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">belongs_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbols</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
139:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">symbols</span>.<span class="ruby-identifier">extract_options!</span>
140: 
141:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">symbolize_keys!</span>
142:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">assert_valid_keys</span>(<span class="ruby-identifier">:class_name</span>, <span class="ruby-identifier">:parent_class</span>, <span class="ruby-identifier">:instance_name</span>, <span class="ruby-identifier">:param</span>,
143:                                   <span class="ruby-identifier">:finder</span>, <span class="ruby-identifier">:route_name</span>, <span class="ruby-identifier">:collection_name</span>, <span class="ruby-identifier">:singleton</span>,
144:                                   <span class="ruby-identifier">:polymorphic</span>, <span class="ruby-identifier">:optional</span>, <span class="ruby-identifier">:shallow</span>)
145: 
146:         <span class="ruby-identifier">optional</span>    = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:optional</span>)
147:         <span class="ruby-identifier">shallow</span>     = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:shallow</span>)
148:         <span class="ruby-identifier">singleton</span>   = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:singleton</span>)
149:         <span class="ruby-identifier">polymorphic</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:polymorphic</span>)
150:         <span class="ruby-identifier">finder</span>      = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:finder</span>)
151: 
152:         <span class="ruby-identifier">include</span> <span class="ruby-constant">BelongsToHelpers</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parents_symbols</span>.<span class="ruby-identifier">empty?</span>
153: 
154:         <span class="ruby-identifier">acts_as_singleton!</span>   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">singleton</span>
155:         <span class="ruby-identifier">acts_as_polymorphic!</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">polymorphic</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">optional</span>
156:         <span class="ruby-identifier">acts_as_shallow!</span>     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">shallow</span>
157: 
158:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'You have to give me at least one association name.'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">symbols</span>.<span class="ruby-identifier">empty?</span>
159:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'You cannot define multiple associations with options: #{options.keys.inspect} to belongs to.'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">symbols</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">empty?</span>
160: 
161:         <span class="ruby-identifier">symbols</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">symbol</span><span class="ruby-operator">|</span>
162:           <span class="ruby-identifier">symbol</span> = <span class="ruby-identifier">symbol</span>.<span class="ruby-identifier">to_sym</span>
163: 
164:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">polymorphic</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">optional</span>
165:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parents_symbols</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:polymorphic</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parents_symbols</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">:polymorphic</span>)
166:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resources_configuration</span>[<span class="ruby-identifier">:polymorphic</span>][<span class="ruby-identifier">:symbols</span>]   <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">symbol</span>
167:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resources_configuration</span>[<span class="ruby-identifier">:polymorphic</span>][<span class="ruby-identifier">:optional</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">optional</span>
168:           <span class="ruby-keyword kw">else</span>
169:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parents_symbols</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">symbol</span>
170:           <span class="ruby-keyword kw">end</span>
171: 
172:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resources_configuration</span>[<span class="ruby-identifier">:self</span>][<span class="ruby-identifier">:shallow</span>] = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">shallow</span>
173: 
174:           <span class="ruby-identifier">config</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resources_configuration</span>[<span class="ruby-identifier">symbol</span>] = {}
175: 
176:           <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:parent_class</span>] = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:parent_class</span>) <span class="ruby-operator">||</span> <span class="ruby-keyword kw">begin</span>
177:             <span class="ruby-identifier">class_name</span> = (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:class_name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">symbol</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">pluralize</span>.<span class="ruby-identifier">classify</span>
178:             <span class="ruby-identifier">class_name</span>.<span class="ruby-identifier">constantize</span>
179:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
180:             <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">class_name</span>)
181:             <span class="ruby-keyword kw">nil</span>
182:           <span class="ruby-keyword kw">end</span>
183: 
184:           <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:collection_name</span>] = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:collection_name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">symbol</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">pluralize</span>.<span class="ruby-identifier">to_sym</span>
185:           <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:instance_name</span>]   = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:instance_name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">symbol</span>
186:           <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:param</span>]           = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:param</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">:&quot;#{symbol}_id&quot;</span>
187:           <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:route_name</span>]      = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:route_name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">symbol</span>
188:           <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:finder</span>]          = <span class="ruby-identifier">finder</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">:find</span>
189:         <span class="ruby-keyword kw">end</span>
190: 
191:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
192:           <span class="ruby-identifier">class_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
193:         <span class="ruby-keyword kw">else</span>
194:           <span class="ruby-identifier">create_resources_url_helpers!</span>
195:         <span class="ruby-keyword kw">end</span>
196:         <span class="ruby-identifier">helper_method</span> <span class="ruby-identifier">:parent</span>, <span class="ruby-identifier">:parent?</span>
197:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000064">
                    
                    <a name="M000064"></a><b>custom_actions</b>(options)
                    
                </div>
                
                <div class="description">
                  <p>
Defines custom restful actions by resource or collection basis.
</p>
<pre>
  custom_actions :resource =&gt; [:delete, :transit], :collection =&gt; :search
</pre>
<h2>Options</h2>
<ul>
<li><tt>:resource</tt> - Allows you to specify resource actions.

<pre>
  custom_actions :resource =&gt; :delete
                      This macro creates 'delete' method in controller and defines
                      delete_reource_{path,url} helpers. The body of generated 'delete'
                      method is same as 'show' method. So you can override it if need
</pre>
</li>
<li><tt>:collection</tt> - Allows you to specify collection actions.

<pre>
  custom_actions :collection =&gt; :search
                      This macro creates 'search' method in controller and defines
                      search_reources_{path,url} helpers. The body of generated 'search'
                      method is same as 'index' method. So you can override it if need
</pre>
</li>
</ul>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000064_source')" id="l_M000064_source">show</a>
                        
                    </p>
                    <div id="M000064_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 242</span>
242:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">custom_actions</span>(<span class="ruby-identifier">options</span>)
243:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resources_configuration</span>[<span class="ruby-identifier">:self</span>][<span class="ruby-identifier">:custom_actions</span>] = <span class="ruby-identifier">options</span>
244:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">resource_or_collection</span>, <span class="ruby-identifier">actions</span> <span class="ruby-operator">|</span>
245:           [<span class="ruby-operator">*</span><span class="ruby-identifier">actions</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">|</span>
246:             <span class="ruby-identifier">create_custom_action</span>(<span class="ruby-identifier">resource_or_collection</span>, <span class="ruby-identifier">action</span>)
247:           <span class="ruby-keyword kw">end</span>
248:         <span class="ruby-keyword kw">end</span>
249:         <span class="ruby-identifier">create_resources_url_helpers!</span>
250:         [<span class="ruby-operator">*</span><span class="ruby-identifier">options</span>[<span class="ruby-identifier">:resource</span>]].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">|</span>
251:           <span class="ruby-identifier">helper_method</span> <span class="ruby-node">&quot;#{action}_resource_path&quot;</span>, <span class="ruby-node">&quot;#{action}_resource_url&quot;</span>
252:         <span class="ruby-keyword kw">end</span>
253:         [<span class="ruby-operator">*</span><span class="ruby-identifier">options</span>[<span class="ruby-identifier">:collection</span>]].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">|</span>
254:           <span class="ruby-identifier">helper_method</span> <span class="ruby-node">&quot;#{action}_resources_path&quot;</span>, <span class="ruby-node">&quot;#{action}_resources_url&quot;</span>
255:         <span class="ruby-keyword kw">end</span>
256:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000052">
                    
                    <a name="M000052"></a><b>defaults</b>(options)
                    
                </div>
                
                <div class="description">
                  <p>
Used to overwrite the default assumptions <a
href="../InheritedResources.html">InheritedResources</a> do. Whenever this
method is called, it should be on the top of your controller, since almost
other methods depends on the values given to <<tt>&gt;defaults</tt>.
</p>
<h2>Options</h2>
<ul>
<li><tt>:resource_class</tt> - The resource class which by default is guessed

<pre>
                           by the controller name. Defaults to Project in
                           ProjectsController.
</pre>
</li>
<li><tt>:collection_name</tt> - The name of the collection instance variable
which

<pre>
                            is set on the index action. Defaults to :projects in
                            ProjectsController.
</pre>
</li>
<li><tt>:instance_name</tt> - The name of the singular instance variable which

<pre>
                          is set on all actions besides index action. Defaults to
                          :project in ProjectsController.
</pre>
</li>
<li><tt>:route_collection_name</tt> - The name of the collection route.
Defaults to :collection_name.

</li>
<li><tt>:route_instance_name</tt> - The name of the singular route. Defaults to
:instance_name.

</li>
<li><tt>:route_prefix</tt> - The route prefix which is automically set in
namespaced

<pre>
                         controllers. Default to :admin on Admin::ProjectsController.
</pre>
</li>
<li><tt>:singleton</tt> - Tells if this controller is singleton or not.

</li>
<li><tt>:finder</tt> - Specifies which method should be called to instantiate
the resource.

<pre>
  defaults :project, :finder =&gt; :find_by_slug
</pre>
</li>
</ul>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000052_source')" id="l_M000052_source">show</a>
                        
                    </p>
                    <div id="M000052_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 37</span>
37:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">defaults</span>(<span class="ruby-identifier">options</span>)
38:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'Class method :defaults expects a hash of options.'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hash</span>
39: 
40:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">symbolize_keys!</span>
41:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">assert_valid_keys</span>(<span class="ruby-identifier">:resource_class</span>, <span class="ruby-identifier">:collection_name</span>, <span class="ruby-identifier">:instance_name</span>,
42:                                   <span class="ruby-identifier">:class_name</span>, <span class="ruby-identifier">:route_prefix</span>, <span class="ruby-identifier">:route_collection_name</span>,
43:                                   <span class="ruby-identifier">:route_instance_name</span>, <span class="ruby-identifier">:singleton</span>, <span class="ruby-identifier">:finder</span>)
44: 
45:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resource_class</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:resource_class</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:resource_class</span>)
46:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resource_class</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>].<span class="ruby-identifier">constantize</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:class_name</span>)
47: 
48:         <span class="ruby-identifier">acts_as_singleton!</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:singleton</span>)
49: 
50:         <span class="ruby-identifier">config</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resources_configuration</span>[<span class="ruby-identifier">:self</span>]
51:         <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:route_prefix</span>] = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:route_prefix</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:route_prefix</span>)
52: 
53:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:resource_class</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:class_name</span>)
54:           <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:request_name</span>] = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resource_class</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">underscore</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-value str">'_'</span>)
55:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:resource_class</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:class_name</span>)
56:         <span class="ruby-keyword kw">end</span>
57: 
58:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
59:           <span class="ruby-identifier">config</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_sym</span>
60:         <span class="ruby-keyword kw">end</span>
61: 
62:         <span class="ruby-identifier">create_resources_url_helpers!</span>
63:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000060">
                    
                    <a name="M000060"></a><b>nested_belongs_to</b>(*symbols, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="ClassMethods.html#M000054">belongs_to</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000063">
                    
                    <a name="M000063"></a><b>optional_belongs_to</b>(*symbols, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
A quick method to declare optional belongs to.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000063_source')" id="l_M000063_source">show</a>
                        
                    </p>
                    <div id="M000063_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 218</span>
218:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">optional_belongs_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbols</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
219:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">symbols</span>.<span class="ruby-identifier">extract_options!</span>
220:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
221:         <span class="ruby-identifier">belongs_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbols</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
222:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000061">
                    
                    <a name="M000061"></a><b>polymorphic_belongs_to</b>(*symbols, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
A quick method to declare polymorphic belongs to.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000061_source')" id="l_M000061_source">show</a>
                        
                    </p>
                    <div id="M000061_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 202</span>
202:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">polymorphic_belongs_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbols</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
203:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">symbols</span>.<span class="ruby-identifier">extract_options!</span>
204:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
205:         <span class="ruby-identifier">belongs_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbols</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
206:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000062">
                    
                    <a name="M000062"></a><b>singleton_belongs_to</b>(*symbols, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
A quick method to declare singleton belongs to.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000062_source')" id="l_M000062_source">show</a>
                        
                    </p>
                    <div id="M000062_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 210</span>
210:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">singleton_belongs_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbols</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
211:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">symbols</span>.<span class="ruby-identifier">extract_options!</span>
212:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">:singleton</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
213:         <span class="ruby-identifier">belongs_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbols</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
214:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000065">
                    
                    <a name="M000065"></a><b>with_role</b>(role)
                    
                </div>
                
                <div class="description">
                  <p>
Defines the role to use when creating or updating resource. Makes sense
when using rails 3.1 mass assignment conventions
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000065_source')" id="l_M000065_source">show</a>
                        
                    </p>
                    <div id="M000065_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 260</span>
260:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_role</span>(<span class="ruby-identifier">role</span>)
261:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resources_configuration</span>[<span class="ruby-identifier">:self</span>][<span class="ruby-identifier">:role</span>] = <span class="ruby-identifier">role</span>.<span class="ruby-identifier">try</span>(<span class="ruby-identifier">:to_sym</span>)
262:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000071">
                    
                    <a name="M000071"></a><b>create_custom_action</b>(resource_or_collection, action)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show</a>
                        
                    </p>
                    <div id="M000071_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/inherited_resources/class_methods.rb, line 355</span>
355:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_custom_action</span>(<span class="ruby-identifier">resource_or_collection</span>, <span class="ruby-identifier">action</span>)
356:         <span class="ruby-identifier">class_eval</span> <span class="ruby-value str">&quot;def \#{action}(options={}, &amp;block)\nrespond_with(*(with_chain(\#{resource_or_collection}) &lt;&lt; options), &amp;block)\nend\nalias :\#{action}! :\#{action}\nprotected :\#{action}!\n&quot;</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>
357:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    