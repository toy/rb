<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ThinkingSphinx::Configuration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            ThinkingSphinx::Configuration 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/thinking_sphinx/configuration_rb.html">lib/thinking_sphinx/configuration.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
This class both keeps track of the configuration settings for Sphinx and
also generates the resulting file for Sphinx to use.
</p>
<p>
Here are the default settings, relative to Rails.root where relevant:
</p>
<table>
<tr><td valign="top">config file:</td><td>config/#{environment}.sphinx.conf

</td></tr>
<tr><td valign="top">searchd log file:</td><td>log/searchd.log

</td></tr>
<tr><td valign="top">query log file:</td><td>log/searchd.query.log

</td></tr>
<tr><td valign="top">pid file:</td><td>log/searchd.#{environment}.pid

</td></tr>
<tr><td valign="top">searchd files:</td><td>db/sphinx/#{environment}/

</td></tr>
<tr><td valign="top">address:</td><td>127.0.0.1

</td></tr>
<tr><td valign="top">port:</td><td>9312

</td></tr>
<tr><td valign="top">allow star:</td><td>false

</td></tr>
<tr><td valign="top">stop timeout:</td><td>5

</td></tr>
<tr><td valign="top">min prefix length:</td><td>1

</td></tr>
<tr><td valign="top">min infix length:</td><td>1

</td></tr>
<tr><td valign="top">mem limit:</td><td>64M

</td></tr>
<tr><td valign="top">max matches:</td><td>1000

</td></tr>
<tr><td valign="top">morphology:</td><td>nil

</td></tr>
<tr><td valign="top">charset type:</td><td>utf-8

</td></tr>
<tr><td valign="top">charset table:</td><td>nil

</td></tr>
<tr><td valign="top">ignore chars:</td><td>nil

</td></tr>
<tr><td valign="top">html strip:</td><td>false

</td></tr>
<tr><td valign="top">html remove elements:</td><td>&#8217;&#8217;

</td></tr>
<tr><td valign="top"><a href="Configuration.html#M000229">searchd_binary_name</a>:</td><td>searchd

</td></tr>
<tr><td valign="top"><a href="Configuration.html#M000232">indexer_binary_name</a>:</td><td>indexer

</td></tr>
</table>
<p>
If you want to change these settings, create a YAML file at
config/sphinx.yml with settings for each environment, in a similar fashion
to database.yml - using the following keys: <a
href="Configuration.html#M000225">config_file</a>, <a
href="Configuration.html#M000221">searchd_log_file</a>, <a
href="Configuration.html#M000223">query_log_file</a>, <a
href="Configuration.html#M000219">pid_file</a>, <a
href="Configuration.html#searchd_file_path">searchd_file_path</a>, port, <a
href="Configuration.html#allow_star">allow_star</a>, enable_star,
min_prefix_len, min_infix_len, mem_limit, max_matches, morphology,
charset_type, charset_table, ignore_chars, html_strip,
html_remove_elements, <a
href="Configuration.html#delayed_job_priority">delayed_job_priority</a>, <a
href="Configuration.html#M000229">searchd_binary_name</a>,
indexer_binary_name.
</p>
<p>
I think you&#8217;ve got the idea.
</p>
<p>
Each setting in the YAML file is optional - so only put in the ones you
want to change.
</p>
<p>
Keep in mind, if for some particular reason you&#8217;re using a version of
Sphinx older than 0.9.8 r871 (that&#8217;s prior to the proper 0.9.8
release), don&#8217;t set <a
href="Configuration.html#allow_star">allow_star</a> to true.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000215">address</a>,</li>
                
                <li><a href="#M000216">address=</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000227">bin_path</a>,</li>
                
                <li><a href="#M000228">bin_path=</a>,</li>
                
                <li><a href="#M000214">build</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000234">client</a>,</li>
                
                <li><a href="#M000225">config_file</a>,</li>
                
                <li><a href="#M000226">config_file=</a>,</li>
                
                <li><a href="#M000204">configure</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000245">enforce_common_attribute_types</a>,</li>
                
                <li><a href="#M000212">environment</a>,</li>
                
                <li><a href="#M000210">environment</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000213">generate</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000232">indexer_binary_name</a>,</li>
                
                <li><a href="#M000233">indexer_binary_name=</a>,</li>
                
                <li><a href="#M000250">initial_model_directories</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000235">models_by_crc</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000203">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000237">parse_config</a>,</li>
                
                <li><a href="#M000219">pid_file</a>,</li>
                
                <li><a href="#M000220">pid_file=</a>,</li>
                
                <li><a href="#M000217">port</a>,</li>
                
                <li><a href="#M000218">port=</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M000223">query_log_file</a>,</li>
                
                <li><a href="#M000224">query_log_file=</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000205">reset</a>,</li>
                
                <li><a href="#M000211">reset_environment</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000229">searchd_binary_name</a>,</li>
                
                <li><a href="#M000231">searchd_binary_name=</a>,</li>
                
                <li><a href="#M000221">searchd_log_file</a>,</li>
                
                <li><a href="#M000222">searchd_log_file=</a>,</li>
                
                <li><a href="#M000244">set_sphinx_setting</a>,</li>
                
                <li><a href="#M000249">shuffled_addresses</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000236">touch_reindex_file</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <span>Singleton</span>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">SourceOptions</td>
            <td>=</td>
            <td class="attr-value">Riddle::Configuration::SQLSource.settings.map { |setting|       setting.to_s</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IndexOptions</td>
            <td>=</td>
            <td class="attr-value">Riddle::Configuration::Index.settings.map     { |setting|       setting.to_s</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">CustomOptions</td>
            <td>=</td>
            <td class="attr-value">%w( disable_range use_64_bit )</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>searchd_file_path</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>allow_star</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>app_root</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>model_directories</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>delayed_job_priority</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>indexed_models</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>use_64_bit</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>touched_reindex_file</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>stop_timeout</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>version</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>shuffle</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>source_options</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>index_options</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>configuration</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>controller</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>timeout</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000204">
                    
                    <a name="M000204"></a><b>configure</b>(&amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000204_source')" id="l_M000204_source">show</a>
                        
                    </p>
                    <div id="M000204_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 82</span>
82:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">configure</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
83:       <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">instance</span>
84:       <span class="ruby-identifier">instance</span>.<span class="ruby-identifier">reset</span>(<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">app_root</span>)
85:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000210">
                    
                    <a name="M000210"></a><b>environment</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000210_source')" id="l_M000210_source">show</a>
                        
                    </p>
                    <div id="M000210_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 131</span>
131:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">environment</span>
132:       <span class="ruby-ivar">@@environment</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Merb</span>)
133:         <span class="ruby-constant">Merb</span>.<span class="ruby-identifier">environment</span>
134:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Rails</span>)
135:         <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>
136:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Sinatra</span>)
137:         <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>.<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_s</span>
138:       <span class="ruby-keyword kw">else</span>
139:         <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'RAILS_ENV'</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">'development'</span>
140:       <span class="ruby-keyword kw">end</span>
141:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000203">
                    
                    <a name="M000203"></a><b>new</b>(app_root = Dir.pwd)
                    
                </div>
                
                <div class="description">
                  <p>
Load in the configuration settings - this will look for config/sphinx.yml
and parse it according to the current environment.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000203_source')" id="l_M000203_source">show</a>
                        
                    </p>
                    <div id="M000203_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 78</span>
78:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">app_root</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
79:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reset</span>
80:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000211">
                    
                    <a name="M000211"></a><b>reset_environment</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000211_source')" id="l_M000211_source">show</a>
                        
                    </p>
                    <div id="M000211_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 143</span>
143:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reset_environment</span>
144:       <span class="ruby-constant">ThinkingSphinx</span>.<span class="ruby-identifier">mutex</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
145:         <span class="ruby-ivar">@@environment</span> = <span class="ruby-keyword kw">nil</span>
146:       <span class="ruby-keyword kw">end</span>
147:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000215">
                    
                    <a name="M000215"></a><b>address</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000215_source')" id="l_M000215_source">show</a>
                        
                    </p>
                    <div id="M000215_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 179</span>
179:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">address</span>
180:       <span class="ruby-ivar">@address</span>
181:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000216">
                    
                    <a name="M000216"></a><b>address=</b>(address)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000216_source')" id="l_M000216_source">show</a>
                        
                    </p>
                    <div id="M000216_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 183</span>
183:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">address=</span>(<span class="ruby-identifier">address</span>)
184:       <span class="ruby-ivar">@address</span> = <span class="ruby-identifier">address</span>
185:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">address</span> = <span class="ruby-identifier">address</span>
186:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000227">
                    
                    <a name="M000227"></a><b>bin_path</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000227_source')" id="l_M000227_source">show</a>
                        
                    </p>
                    <div id="M000227_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 229</span>
229:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bin_path</span>
230:       <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">bin_path</span>
231:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000228">
                    
                    <a name="M000228"></a><b>bin_path=</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000228_source')" id="l_M000228_source">show</a>
                        
                    </p>
                    <div id="M000228_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 233</span>
233:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bin_path=</span>(<span class="ruby-identifier">path</span>)
234:       <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">bin_path</span> = <span class="ruby-identifier">path</span>
235:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000214">
                    
                    <a name="M000214"></a><b>build</b>(file_path=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Generate the config file for Sphinx by using all the settings defined and
looping through all the models with indexes to build the relevant indexer
and searchd configuration, and sources and indexes details.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000214_source')" id="l_M000214_source">show</a>
                        
                    </p>
                    <div id="M000214_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 169</span>
169:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build</span>(<span class="ruby-identifier">file_path</span>=<span class="ruby-keyword kw">nil</span>)
170:       <span class="ruby-identifier">file_path</span> <span class="ruby-operator">||=</span> <span class="ruby-node">&quot;#{self.config_file}&quot;</span>
171: 
172:       <span class="ruby-identifier">generate</span>
173: 
174:       <span class="ruby-identifier">open</span>(<span class="ruby-identifier">file_path</span>, <span class="ruby-value str">&quot;w&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
175:         <span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span> <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">render</span>
176:       <span class="ruby-keyword kw">end</span>
177:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000234">
                    
                    <a name="M000234"></a><b>client</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000234_source')" id="l_M000234_source">show</a>
                        
                    </p>
                    <div id="M000234_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 255</span>
255:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">client</span>
256:       <span class="ruby-identifier">client</span> = <span class="ruby-constant">Riddle</span><span class="ruby-operator">::</span><span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">shuffled_addresses</span>, <span class="ruby-identifier">port</span>,
257:         <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">client_key</span>
258:       <span class="ruby-identifier">client</span>.<span class="ruby-identifier">max_matches</span> = <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">max_matches</span> <span class="ruby-operator">||</span> <span class="ruby-value">1000</span>
259:       <span class="ruby-identifier">client</span>.<span class="ruby-identifier">timeout</span> = <span class="ruby-identifier">timeout</span> <span class="ruby-operator">||</span> <span class="ruby-value">0</span>
260:       <span class="ruby-identifier">client</span>
261:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000225">
                    
                    <a name="M000225"></a><b>config_file</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000225_source')" id="l_M000225_source">show</a>
                        
                    </p>
                    <div id="M000225_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 221</span>
221:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">config_file</span>
222:       <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">path</span>
223:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000226">
                    
                    <a name="M000226"></a><b>config_file=</b>(file)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000226_source')" id="l_M000226_source">show</a>
                        
                    </p>
                    <div id="M000226_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 225</span>
225:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">config_file=</span>(<span class="ruby-identifier">file</span>)
226:       <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">path</span> = <span class="ruby-identifier">file</span>
227:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000212">
                    
                    <a name="M000212"></a><b>environment</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000212_source')" id="l_M000212_source">show</a>
                        
                    </p>
                    <div id="M000212_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 149</span>
149:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">environment</span>
150:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">environment</span>
151:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000213">
                    
                    <a name="M000213"></a><b>generate</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000213_source')" id="l_M000213_source">show</a>
                        
                    </p>
                    <div id="M000213_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 153</span>
153:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate</span>
154:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">indices</span>.<span class="ruby-identifier">clear</span>
155: 
156:       <span class="ruby-constant">ThinkingSphinx</span>.<span class="ruby-identifier">context</span>.<span class="ruby-identifier">indexed_models</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">model</span><span class="ruby-operator">|</span>
157:         <span class="ruby-identifier">model</span> = <span class="ruby-identifier">model</span>.<span class="ruby-identifier">constantize</span>
158:         <span class="ruby-identifier">model</span>.<span class="ruby-identifier">define_indexes</span>
159:         <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">indices</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">model</span>.<span class="ruby-identifier">to_riddle</span>
160: 
161:         <span class="ruby-identifier">enforce_common_attribute_types</span>
162:       <span class="ruby-keyword kw">end</span>
163:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000232">
                    
                    <a name="M000232"></a><b>indexer_binary_name</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000232_source')" id="l_M000232_source">show</a>
                        
                    </p>
                    <div id="M000232_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 245</span>
245:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">indexer_binary_name</span>
246:       <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">indexer_binary_name</span>
247:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000233">
                    
                    <a name="M000233"></a><b>indexer_binary_name=</b>(name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000233_source')" id="l_M000233_source">show</a>
                        
                    </p>
                    <div id="M000233_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 249</span>
249:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">indexer_binary_name=</span>(<span class="ruby-identifier">name</span>)
250:       <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">indexer_binary_name</span> = <span class="ruby-identifier">name</span>
251:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000235">
                    
                    <a name="M000235"></a><b>models_by_crc</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000235_source')" id="l_M000235_source">show</a>
                        
                    </p>
                    <div id="M000235_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 263</span>
263:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">models_by_crc</span>
264:       <span class="ruby-ivar">@models_by_crc</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">begin</span>
265:         <span class="ruby-constant">ThinkingSphinx</span>.<span class="ruby-identifier">context</span>.<span class="ruby-identifier">indexed_models</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, <span class="ruby-identifier">model</span><span class="ruby-operator">|</span>
266:           <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">model</span>.<span class="ruby-identifier">constantize</span>.<span class="ruby-identifier">to_crc32</span>] = <span class="ruby-identifier">model</span>
267:           <span class="ruby-identifier">model</span>.<span class="ruby-identifier">constantize</span>.<span class="ruby-identifier">descendants</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">subclass</span><span class="ruby-operator">|</span>
268:             <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">subclass</span>.<span class="ruby-identifier">to_crc32</span>] = <span class="ruby-identifier">subclass</span>.<span class="ruby-identifier">name</span>
269:           }
270:           <span class="ruby-identifier">hash</span>
271:         <span class="ruby-keyword kw">end</span>
272:       <span class="ruby-keyword kw">end</span>
273:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000219">
                    
                    <a name="M000219"></a><b>pid_file</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000219_source')" id="l_M000219_source">show</a>
                        
                    </p>
                    <div id="M000219_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 197</span>
197:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pid_file</span>
198:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">pid_file</span>
199:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000220">
                    
                    <a name="M000220"></a><b>pid_file=</b>(pid_file)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000220_source')" id="l_M000220_source">show</a>
                        
                    </p>
                    <div id="M000220_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 201</span>
201:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pid_file=</span>(<span class="ruby-identifier">pid_file</span>)
202:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">pid_file</span> = <span class="ruby-identifier">pid_file</span>
203:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000217">
                    
                    <a name="M000217"></a><b>port</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000217_source')" id="l_M000217_source">show</a>
                        
                    </p>
                    <div id="M000217_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 188</span>
188:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">port</span>
189:       <span class="ruby-ivar">@port</span>
190:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000218">
                    
                    <a name="M000218"></a><b>port=</b>(port)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000218_source')" id="l_M000218_source">show</a>
                        
                    </p>
                    <div id="M000218_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 192</span>
192:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">port=</span>(<span class="ruby-identifier">port</span>)
193:       <span class="ruby-ivar">@port</span> = <span class="ruby-identifier">port</span>
194:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">port</span> = <span class="ruby-identifier">port</span>
195:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000223">
                    
                    <a name="M000223"></a><b>query_log_file</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000223_source')" id="l_M000223_source">show</a>
                        
                    </p>
                    <div id="M000223_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 213</span>
213:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query_log_file</span>
214:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">query_log</span>
215:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000224">
                    
                    <a name="M000224"></a><b>query_log_file=</b>(file)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000224_source')" id="l_M000224_source">show</a>
                        
                    </p>
                    <div id="M000224_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 217</span>
217:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">query_log_file=</span>(<span class="ruby-identifier">file</span>)
218:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">query_log</span> = <span class="ruby-identifier">file</span>
219:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000205">
                    
                    <a name="M000205"></a><b>reset</b>(custom_app_root=nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000205_source')" id="l_M000205_source">show</a>
                        
                    </p>
                    <div id="M000205_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 87</span>
 87:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset</span>(<span class="ruby-identifier">custom_app_root</span>=<span class="ruby-keyword kw">nil</span>)
 88:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">custom_app_root</span>
 89:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">app_root</span> = <span class="ruby-identifier">custom_app_root</span>
 90:       <span class="ruby-keyword kw">else</span>
 91:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">app_root</span>   = <span class="ruby-constant">Merb</span>.<span class="ruby-identifier">root</span>                  <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Merb</span>)
 92:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">app_root</span>   = <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>.<span class="ruby-identifier">root</span>  <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Sinatra</span>)
 93:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">app_root</span>   = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>                 <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Rails</span>)
 94:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">app_root</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">app_root</span>
 95:       <span class="ruby-keyword kw">end</span>
 96: 
 97:       <span class="ruby-ivar">@configuration</span> = <span class="ruby-constant">Riddle</span><span class="ruby-operator">::</span><span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">new</span>
 98:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">pid_file</span>   = <span class="ruby-node">&quot;#{self.app_root}/log/searchd.#{environment}.pid&quot;</span>
 99:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">log</span>        = <span class="ruby-node">&quot;#{self.app_root}/log/searchd.log&quot;</span>
100:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">query_log</span>  = <span class="ruby-node">&quot;#{self.app_root}/log/searchd.query.log&quot;</span>
101: 
102:       <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">Riddle</span><span class="ruby-operator">::</span><span class="ruby-constant">Controller</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@configuration</span>,
103:         <span class="ruby-node">&quot;#{self.app_root}/config/#{environment}.sphinx.conf&quot;</span>
104: 
105:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">address</span>              = <span class="ruby-value str">&quot;127.0.0.1&quot;</span>
106:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">port</span>                 = <span class="ruby-value">9312</span>
107:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">searchd_file_path</span>    = <span class="ruby-node">&quot;#{self.app_root}/db/sphinx/#{environment}&quot;</span>
108:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">allow_star</span>           = <span class="ruby-keyword kw">false</span>
109:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">stop_timeout</span>         = <span class="ruby-value">5</span>
110:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">model_directories</span>    = <span class="ruby-identifier">initial_model_directories</span>
111:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">delayed_job_priority</span> = <span class="ruby-value">0</span>
112:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">indexed_models</span>       = []
113:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">shuffle</span>              = <span class="ruby-keyword kw">false</span>
114: 
115:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">source_options</span>  = {}
116:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">index_options</span>   = {
117:         <span class="ruby-identifier">:charset_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;utf-8&quot;</span>
118:       }
119: 
120:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">version</span> = <span class="ruby-keyword kw">nil</span>
121:       <span class="ruby-identifier">parse_config</span>
122:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">version</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">sphinx_version</span>
123: 
124:       <span class="ruby-constant">ThinkingSphinx</span><span class="ruby-operator">::</span><span class="ruby-constant">Attribute</span><span class="ruby-operator">::</span><span class="ruby-constant">SphinxTypeMappings</span>.<span class="ruby-identifier">merge!</span>(
125:         <span class="ruby-identifier">:string</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:sql_attr_string</span>
126:       ) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Riddle</span>.<span class="ruby-identifier">loaded_version</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
127: 
128:       <span class="ruby-keyword kw">self</span>
129:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000229">
                    
                    <a name="M000229"></a><b>searchd_binary_name</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000229_source')" id="l_M000229_source">show</a>
                        
                    </p>
                    <div id="M000229_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 237</span>
237:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">searchd_binary_name</span>
238:       <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">searchd_binary_name</span>
239:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000231">
                    
                    <a name="M000231"></a><b>searchd_binary_name=</b>(name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000231_source')" id="l_M000231_source">show</a>
                        
                    </p>
                    <div id="M000231_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 241</span>
241:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">searchd_binary_name=</span>(<span class="ruby-identifier">name</span>)
242:       <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">searchd_binary_name</span> = <span class="ruby-identifier">name</span>
243:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000221">
                    
                    <a name="M000221"></a><b>searchd_log_file</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000221_source')" id="l_M000221_source">show</a>
                        
                    </p>
                    <div id="M000221_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 205</span>
205:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">searchd_log_file</span>
206:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">log</span>
207:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000222">
                    
                    <a name="M000222"></a><b>searchd_log_file=</b>(file)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000222_source')" id="l_M000222_source">show</a>
                        
                    </p>
                    <div id="M000222_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 209</span>
209:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">searchd_log_file=</span>(<span class="ruby-identifier">file</span>)
210:       <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>.<span class="ruby-identifier">log</span> = <span class="ruby-identifier">file</span>
211:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000236">
                    
                    <a name="M000236"></a><b>touch_reindex_file</b>(output)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000236_source')" id="l_M000236_source">show</a>
                        
                    </p>
                    <div id="M000236_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 275</span>
275:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">touch_reindex_file</span>(<span class="ruby-identifier">output</span>)
276:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span>(<span class="ruby-ivar">@touched_reindex_file</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@touched_reindex_file</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">output</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/succesfully sent SIGHUP to searchd/</span>
277:       <span class="ruby-keyword kw">false</span>
278:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000245">
                    
                    <a name="M000245"></a><b>enforce_common_attribute_types</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000245_source')" id="l_M000245_source">show</a>
                        
                    </p>
                    <div id="M000245_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 318</span>
318:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">enforce_common_attribute_types</span>
319:       <span class="ruby-identifier">sql_indexes</span> = <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">indices</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
320:         <span class="ruby-identifier">index</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Riddle</span><span class="ruby-operator">::</span><span class="ruby-constant">Configuration</span><span class="ruby-operator">::</span><span class="ruby-constant">DistributedIndex</span>
321:       }
322: 
323:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">sql_indexes</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
324:         <span class="ruby-identifier">index</span>.<span class="ruby-identifier">sources</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">source</span><span class="ruby-operator">|</span>
325:           <span class="ruby-identifier">source</span>.<span class="ruby-identifier">sql_attr_bigint</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">:sphinx_internal_id</span>
326:         }
327:       }
328: 
329:       <span class="ruby-identifier">sql_indexes</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
330:         <span class="ruby-identifier">index</span>.<span class="ruby-identifier">sources</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">source</span><span class="ruby-operator">|</span>
331:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">sql_attr_bigint</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">:sphinx_internal_id</span>
332: 
333:           <span class="ruby-identifier">source</span>.<span class="ruby-identifier">sql_attr_bigint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:sphinx_internal_id</span>
334:           <span class="ruby-identifier">source</span>.<span class="ruby-identifier">sql_attr_uint</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">:sphinx_internal_id</span>
335:         }
336:       }
337:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000250">
                    
                    <a name="M000250"></a><b>initial_model_directories</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000250_source')" id="l_M000250_source">show</a>
                        
                    </p>
                    <div id="M000250_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 350</span>
350:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initial_model_directories</span>
351:       <span class="ruby-identifier">directories</span> = [<span class="ruby-node">&quot;#{app_root}/app/models/&quot;</span>] <span class="ruby-operator">+</span>
352:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-node">&quot;#{app_root}/vendor/plugins/*/app/models/&quot;</span>)
353: 
354:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Rails</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>
355:         <span class="ruby-identifier">directories</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-value str">'app/models'</span>].<span class="ruby-identifier">to_a</span>
356:         <span class="ruby-identifier">directories</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">railties</span>.<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">engine</span><span class="ruby-operator">|</span>
357:           <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-value str">'app/models'</span>].<span class="ruby-identifier">to_a</span>
358:         }.<span class="ruby-identifier">flatten</span>
359:       <span class="ruby-keyword kw">end</span>
360: 
361:       <span class="ruby-identifier">directories</span>
362:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000237">
                    
                    <a name="M000237"></a><b>parse_config</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse the config/sphinx.yml file - if it exists - then use the attribute
accessors to set the appropriate values. Nothing too clever.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000237_source')" id="l_M000237_source">show</a>
                        
                    </p>
                    <div id="M000237_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 285</span>
285:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_config</span>
286:       <span class="ruby-identifier">path</span> = <span class="ruby-node">&quot;#{app_root}/config/sphinx.yml&quot;</span>
287:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">path</span>)
288: 
289:       <span class="ruby-identifier">conf</span> = <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load</span>(<span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">IO</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">path</span>)).<span class="ruby-identifier">result</span>)[<span class="ruby-identifier">environment</span>]
290: 
291:       <span class="ruby-identifier">conf</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>,<span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
292:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{key}=&quot;</span>, <span class="ruby-identifier">value</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{key}=&quot;</span>)
293: 
294:         <span class="ruby-identifier">set_sphinx_setting</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">source_options</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>, <span class="ruby-constant">SourceOptions</span>
295:         <span class="ruby-identifier">set_sphinx_setting</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">index_options</span>,  <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>, <span class="ruby-constant">IndexOptions</span>
296:         <span class="ruby-identifier">set_sphinx_setting</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">index_options</span>,  <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>, <span class="ruby-constant">CustomOptions</span>
297:         <span class="ruby-identifier">set_sphinx_setting</span> <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">searchd</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>
298:         <span class="ruby-identifier">set_sphinx_setting</span> <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">indexer</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>
299:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">conf</span>.<span class="ruby-identifier">nil?</span>
300: 
301:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">bin_path</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">'/'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">bin_path</span>.<span class="ruby-identifier">blank?</span>
302: 
303:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">allow_star</span>
304:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">index_options</span>[<span class="ruby-identifier">:enable_star</span>]    = <span class="ruby-keyword kw">true</span>
305:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">index_options</span>[<span class="ruby-identifier">:min_prefix_len</span>] = <span class="ruby-value">1</span>
306:       <span class="ruby-keyword kw">end</span>
307:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000244">
                    
                    <a name="M000244"></a><b>set_sphinx_setting</b>(object, key, value, allowed = {})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000244_source')" id="l_M000244_source">show</a>
                        
                    </p>
                    <div id="M000244_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 309</span>
309:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_sphinx_setting</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">allowed</span> = {})
310:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
311:         <span class="ruby-identifier">object</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-identifier">value</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">allowed</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>)
312:       <span class="ruby-keyword kw">else</span>
313:         <span class="ruby-identifier">object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{key}=&quot;</span>, <span class="ruby-identifier">value</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{key}&quot;</span>)
314:         <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{key}=&quot;</span>, <span class="ruby-identifier">value</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{key}&quot;</span>)
315:       <span class="ruby-keyword kw">end</span>
316:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000249">
                    
                    <a name="M000249"></a><b>shuffled_addresses</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000249_source')" id="l_M000249_source">show</a>
                        
                    </p>
                    <div id="M000249_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/configuration.rb, line 339</span>
339:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shuffled_addresses</span>
340:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">address</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">shuffle</span>
341: 
342:       <span class="ruby-identifier">addresses</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">address</span>)
343:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addresses</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:shuffle</span>)
344:         <span class="ruby-identifier">addresses</span>.<span class="ruby-identifier">shuffle</span>
345:       <span class="ruby-keyword kw">else</span>
346:         <span class="ruby-identifier">address</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-identifier">rand</span> }
347:       <span class="ruby-keyword kw">end</span>
348:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    