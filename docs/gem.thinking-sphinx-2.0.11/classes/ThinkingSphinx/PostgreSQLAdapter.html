<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ThinkingSphinx::PostgreSQLAdapter</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            ThinkingSphinx::PostgreSQLAdapter 
            
                <span class="parent">&lt; 
                    
                    AbstractAdapter
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/thinking_sphinx/adapters/postgresql_adapter_rb.html">lib/thinking_sphinx/adapters/postgresql_adapter.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000135">boolean</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000129">cast_to_datetime</a>,</li>
                
                <li><a href="#M000131">cast_to_int</a>,</li>
                
                <li><a href="#M000128">cast_to_string</a>,</li>
                
                <li><a href="#M000130">cast_to_unsigned</a>,</li>
                
                <li><a href="#M000124">concatenate</a>,</li>
                
                <li><a href="#M000132">convert_nulls</a>,</li>
                
                <li><a href="#M000136">crc</a>,</li>
                
                <li><a href="#M000146">create_array_accum_function</a>,</li>
                
                <li><a href="#M000148">create_crc32_function</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000140">execute</a>,</li>
                
                <li><a href="#M000145">execute_command</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000125">group_concatenate</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000122">setup</a>,</li>
                
                <li><a href="#M000123">sphinx_identifier</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000138">time_difference</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000139">utc_query_pre</a>,</li>
                
                <li><a href="#M000137">utf8_query_pre</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000135">
                    
                    <a name="M000135"></a><b>boolean</b>(value)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000135_source')" id="l_M000135_source">show</a>
                        
                    </p>
                    <div id="M000135_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 65</span>
65:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">boolean</span>(<span class="ruby-identifier">value</span>)
66:       <span class="ruby-identifier">value</span> <span class="ruby-value">? </span><span class="ruby-value str">'TRUE'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'FALSE'</span>
67:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000129">
                    
                    <a name="M000129"></a><b>cast_to_datetime</b>(clause)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show</a>
                        
                    </p>
                    <div id="M000129_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 34</span>
34:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cast_to_datetime</span>(<span class="ruby-identifier">clause</span>)
35:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ThinkingSphinx</span><span class="ruby-operator">::</span><span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">use_64_bit</span>
36:         <span class="ruby-node">&quot;cast(extract(epoch from #{clause}) as bigint)&quot;</span>
37:       <span class="ruby-keyword kw">else</span>
38:         <span class="ruby-node">&quot;cast(extract(epoch from #{clause}) as int)&quot;</span>
39:       <span class="ruby-keyword kw">end</span>
40:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000131">
                    
                    <a name="M000131"></a><b>cast_to_int</b>(clause)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show</a>
                        
                    </p>
                    <div id="M000131_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 46</span>
46:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cast_to_int</span>(<span class="ruby-identifier">clause</span>)
47:       <span class="ruby-node">&quot;#{clause}::INT8&quot;</span>
48:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000128">
                    
                    <a name="M000128"></a><b>cast_to_string</b>(clause)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000128_source')" id="l_M000128_source">show</a>
                        
                    </p>
                    <div id="M000128_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 30</span>
30:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cast_to_string</span>(<span class="ruby-identifier">clause</span>)
31:       <span class="ruby-identifier">clause</span>
32:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000130">
                    
                    <a name="M000130"></a><b>cast_to_unsigned</b>(clause)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show</a>
                        
                    </p>
                    <div id="M000130_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 42</span>
42:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cast_to_unsigned</span>(<span class="ruby-identifier">clause</span>)
43:       <span class="ruby-identifier">clause</span>
44:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000124">
                    
                    <a name="M000124"></a><b>concatenate</b>(clause, separator = ' ')
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show</a>
                        
                    </p>
                    <div id="M000124_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 12</span>
12:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">concatenate</span>(<span class="ruby-identifier">clause</span>, <span class="ruby-identifier">separator</span> = <span class="ruby-value str">' '</span>)
13:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">clause</span>[<span class="ruby-regexp re">/^COALESCE/</span>]
14:         <span class="ruby-identifier">clause</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'), '</span>).<span class="ruby-identifier">join</span>(<span class="ruby-node">&quot;) || '#{separator}' || &quot;</span>)
15:       <span class="ruby-keyword kw">else</span>
16:         <span class="ruby-identifier">clause</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">', '</span>).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
17:           <span class="ruby-node">&quot;CAST(COALESCE(#{field}::varchar, '') as varchar)&quot;</span>
18:         }.<span class="ruby-identifier">join</span>(<span class="ruby-node">&quot; || '#{separator}' || &quot;</span>)
19:       <span class="ruby-keyword kw">end</span>
20:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000132">
                    
                    <a name="M000132"></a><b>convert_nulls</b>(clause, default = '')
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show</a>
                        
                    </p>
                    <div id="M000132_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 50</span>
50:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">convert_nulls</span>(<span class="ruby-identifier">clause</span>, <span class="ruby-identifier">default</span> = <span class="ruby-value str">''</span>)
51:       <span class="ruby-identifier">default</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">default</span>
52:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
53:         <span class="ruby-node">&quot;'#{default}'&quot;</span>
54:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">NilClass</span>
55:         <span class="ruby-value str">'NULL'</span>
56:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Fixnum</span>
57:         <span class="ruby-node">&quot;#{default}::bigint&quot;</span>
58:       <span class="ruby-keyword kw">else</span>
59:         <span class="ruby-identifier">default</span>
60:       <span class="ruby-keyword kw">end</span>
61: 
62:       <span class="ruby-node">&quot;COALESCE(#{clause}, #{default})&quot;</span>
63:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000136">
                    
                    <a name="M000136"></a><b>crc</b>(clause, blank_to_null = false)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000136_source')" id="l_M000136_source">show</a>
                        
                    </p>
                    <div id="M000136_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 69</span>
69:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">crc</span>(<span class="ruby-identifier">clause</span>, <span class="ruby-identifier">blank_to_null</span> = <span class="ruby-keyword kw">false</span>)
70:       <span class="ruby-identifier">clause</span> = <span class="ruby-node">&quot;NULLIF(#{clause},'')&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">blank_to_null</span>
71:       <span class="ruby-node">&quot;crc32(#{clause})&quot;</span>
72:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000125">
                    
                    <a name="M000125"></a><b>group_concatenate</b>(clause, separator = ' ')
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000125_source')" id="l_M000125_source">show</a>
                        
                    </p>
                    <div id="M000125_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 22</span>
22:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">group_concatenate</span>(<span class="ruby-identifier">clause</span>, <span class="ruby-identifier">separator</span> = <span class="ruby-value str">' '</span>)
23:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">raw_connection</span>.<span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">80400</span>
24:         <span class="ruby-node">&quot;array_to_string(array_agg(COALESCE(#{clause}, '0')), '#{separator}')&quot;</span>
25:       <span class="ruby-keyword kw">else</span>
26:         <span class="ruby-node">&quot;array_to_string(array_accum(COALESCE(#{clause}, '0')), '#{separator}')&quot;</span>
27:       <span class="ruby-keyword kw">end</span>
28:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000122">
                    
                    <a name="M000122"></a><b>setup</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000122_source')" id="l_M000122_source">show</a>
                        
                    </p>
                    <div id="M000122_source" class="dyn-source">
                        <pre>   <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 3</span>
3:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
4:       <span class="ruby-identifier">create_array_accum_function</span>
5:       <span class="ruby-identifier">create_crc32_function</span>
6:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000123">
                    
                    <a name="M000123"></a><b>sphinx_identifier</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show</a>
                        
                    </p>
                    <div id="M000123_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 8</span>
 8:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sphinx_identifier</span>
 9:       <span class="ruby-value str">&quot;pgsql&quot;</span>
10:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000138">
                    
                    <a name="M000138"></a><b>time_difference</b>(diff)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000138_source')" id="l_M000138_source">show</a>
                        
                    </p>
                    <div id="M000138_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 78</span>
78:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time_difference</span>(<span class="ruby-identifier">diff</span>)
79:       <span class="ruby-node">&quot;current_timestamp - interval '#{diff} seconds'&quot;</span>
80:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000139">
                    
                    <a name="M000139"></a><b>utc_query_pre</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000139_source')" id="l_M000139_source">show</a>
                        
                    </p>
                    <div id="M000139_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 82</span>
82:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">utc_query_pre</span>
83:       <span class="ruby-value str">&quot;SET TIME ZONE 'UTC'&quot;</span>
84:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000137">
                    
                    <a name="M000137"></a><b>utf8_query_pre</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000137_source')" id="l_M000137_source">show</a>
                        
                    </p>
                    <div id="M000137_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 74</span>
74:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">utf8_query_pre</span>
75:       <span class="ruby-keyword kw">nil</span>
76:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000146">
                    
                    <a name="M000146"></a><b>create_array_accum_function</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show</a>
                        
                    </p>
                    <div id="M000146_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 111</span>
111:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_array_accum_function</span>
112:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">raw_connection</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:server_version</span>) <span class="ruby-operator">&amp;&amp;</span>
113:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">raw_connection</span>.<span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">80400</span>
114:         <span class="ruby-keyword kw">return</span>
115:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">raw_connection</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:server_version</span>) <span class="ruby-operator">&amp;&amp;</span>
116:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">raw_connection</span>.<span class="ruby-identifier">server_version</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">80200</span>
117:         <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;CREATE AGGREGATE array_accum (anyelement)\n(\nsfunc = array_append,\nstype = anyarray,\ninitcond = '{}'\n);\n&quot;</span>
118:       <span class="ruby-keyword kw">else</span>
119:         <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;CREATE AGGREGATE array_accum\n(\nbasetype = anyelement,\nsfunc = array_append,\nstype = anyarray,\ninitcond = '{}'\n);\n&quot;</span>
120:       <span class="ruby-keyword kw">end</span>
121:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000148">
                    
                    <a name="M000148"></a><b>create_crc32_function</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show</a>
                        
                    </p>
                    <div id="M000148_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 140</span>
140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_crc32_function</span>
141:       <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;CREATE LANGUAGE 'plpgsql';&quot;</span>
142:       <span class="ruby-identifier">function</span> = <span class="ruby-value str">&quot;CREATE OR REPLACE FUNCTION crc32(word text)\nRETURNS bigint AS $$\nDECLARE tmp bigint;\nDECLARE i int;\nDECLARE j int;\nDECLARE byte_length int;\nDECLARE word_array bytea;\nBEGIN\nIF COALESCE(word, '') = '' THEN\nreturn 0;\nEND IF;\n\ni = 0;\ntmp = 4294967295;\nbyte_length = bit_length(word) / 8;\nword_array = decode(replace(word, E'\\\\\\\\', E'\\\\\\\\\\\\\\\\'), 'escape');\nLOOP\ntmp = (tmp # get_byte(word_array, i))::bigint;\ni = i + 1;\nj = 0;\nLOOP\ntmp = ((tmp &gt;&gt; 1) # (3988292384 * (tmp &amp; 1)))::bigint;\nj = j + 1;\nIF j &gt;= 8 THEN\nEXIT;\nEND IF;\nEND LOOP;\nIF i &gt;= byte_length THEN\nEXIT;\nEND IF;\nEND LOOP;\nreturn (tmp # 4294967295);\nEND\n$$ IMMUTABLE LANGUAGE plpgsql;\n&quot;</span>
143:       <span class="ruby-identifier">execute</span> <span class="ruby-identifier">function</span>, <span class="ruby-keyword kw">true</span>
144:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000140">
                    
                    <a name="M000140"></a><b>execute</b>(command, output_error = false)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000140_source')" id="l_M000140_source">show</a>
                        
                    </p>
                    <div id="M000140_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 88</span>
88:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">command</span>, <span class="ruby-identifier">output_error</span> = <span class="ruby-keyword kw">false</span>)
89:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_PLATFORM</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'java'</span>
90:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword kw">do</span>
91:           <span class="ruby-identifier">execute_command</span> <span class="ruby-identifier">command</span>, <span class="ruby-identifier">output_error</span>
92:         <span class="ruby-keyword kw">end</span>
93:       <span class="ruby-keyword kw">else</span>
94:         <span class="ruby-identifier">execute_command</span> <span class="ruby-identifier">command</span>, <span class="ruby-identifier">output_error</span>
95:       <span class="ruby-keyword kw">end</span>
96:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000145">
                    
                    <a name="M000145"></a><b>execute_command</b>(command, output_error = false)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000145_source')" id="l_M000145_source">show</a>
                        
                    </p>
                    <div id="M000145_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/thinking_sphinx/adapters/postgresql_adapter.rb, line 98</span>
 98:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execute_command</span>(<span class="ruby-identifier">command</span>, <span class="ruby-identifier">output_error</span> = <span class="ruby-keyword kw">false</span>)
 99:       <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;begin&quot;</span>
100:       <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;savepoint ts&quot;</span>
101:       <span class="ruby-keyword kw">begin</span>
102:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-identifier">command</span>
103:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">StandardError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">err</span>
104:         <span class="ruby-identifier">puts</span> <span class="ruby-identifier">err</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">output_error</span>
105:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;rollback to savepoint ts&quot;</span>
106:       <span class="ruby-keyword kw">end</span>
107:       <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;release savepoint ts&quot;</span>
108:       <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;commit&quot;</span>
109:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    