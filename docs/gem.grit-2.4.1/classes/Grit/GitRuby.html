<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Grit::GitRuby</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            Grit::GitRuby 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/grit/git-ruby/git_object_rb.html">lib/grit/git-ruby/git_object.rb</a></li>
            
            <li><a href="../../files/lib/grit/git-ruby/file_index_rb.html">lib/grit/git-ruby/file_index.rb</a></li>
            
            <li><a href="../../files/lib/grit/git-ruby/internal/file_window_rb.html">lib/grit/git-ruby/internal/file_window.rb</a></li>
            
            <li><a href="../../files/lib/grit/git-ruby/internal/loose_rb.html">lib/grit/git-ruby/internal/loose.rb</a></li>
            
            <li><a href="../../files/lib/grit/git-ruby/internal/pack_rb.html">lib/grit/git-ruby/internal/pack.rb</a></li>
            
            <li><a href="../../files/lib/grit/git-ruby/internal/raw_object_rb.html">lib/grit/git-ruby/internal/raw_object.rb</a></li>
            
            <li><a href="../../files/lib/grit/git-ruby/object_rb.html">lib/grit/git-ruby/object.rb</a></li>
            
            <li><a href="../../files/lib/grit/git-ruby/repository_rb.html">lib/grit/git-ruby/repository.rb</a></li>
            
            <li><a href="../../files/lib/grit/git-ruby_rb.html">lib/grit/git-ruby.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
the functions in this module intercept the calls to git binary made buy the
grit objects and attempts to run them in pure ruby if it will be faster, or
if the git binary is not available (!!TODO!!)
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000203">blame_tree</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000181">cat_file</a>,</li>
                
                <li><a href="#M000186">cat_ref</a>,</li>
                
                <li><a href="#M000208">clean_paths</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000188">diff</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000204">file_index</a>,</li>
                
                <li><a href="#M000200">file_size</a>,</li>
                
                <li><a href="#M000201">file_type</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000178">init</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000207">looking_for</a>,</li>
                
                <li><a href="#M000187">ls_tree</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000153">read_bytes_until</a>,</li>
                
                <li><a href="#M000089">read_bytes_until</a>,</li>
                
                <li><a href="#M000195">refs</a>,</li>
                
                <li><a href="#M000190">rev_list</a>,</li>
                
                <li><a href="#M000193">rev_parse</a>,</li>
                
                <li><a href="#M000205">ruby_git</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000196">tags</a>,</li>
                
                <li><a href="#M000206">try_run</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="GitRuby/Internal.html">Grit::GitRuby::Internal</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/Blob.html">Grit::GitRuby::Blob</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/Commit.html">Grit::GitRuby::Commit</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/DirectoryEntry.html">Grit::GitRuby::DirectoryEntry</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/FileIndex.html">Grit::GitRuby::FileIndex</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/GitObject.html">Grit::GitRuby::GitObject</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/Object.html">Grit::GitRuby::Object</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/Repository.html">Grit::GitRuby::Repository</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/Tag.html">Grit::GitRuby::Tag</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/Tree.html">Grit::GitRuby::Tree</a></li>
        
        <li><span class="type">CLASS</span> <a href="GitRuby/UserInfo.html">Grit::GitRuby::UserInfo</a></li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>ruby_git_repo</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>git_file_index</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000203">
                    
                    <a name="M000203"></a><b>blame_tree</b>(commit, path = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000203_source')" id="l_M000203_source">show</a>
                        
                    </p>
                    <div id="M000203_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 200</span>
200:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">blame_tree</span>(<span class="ruby-identifier">commit</span>, <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>)
201:       <span class="ruby-keyword kw">begin</span>
202:         <span class="ruby-identifier">path</span> = [<span class="ruby-identifier">path</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">'/'</span>).<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/'</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">''</span>)
203:         <span class="ruby-identifier">path</span> = <span class="ruby-value str">''</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
204:         <span class="ruby-identifier">commits</span> = <span class="ruby-identifier">file_index</span>.<span class="ruby-identifier">last_commits</span>(<span class="ruby-identifier">rev_parse</span>({}, <span class="ruby-identifier">commit</span>), <span class="ruby-identifier">looking_for</span>(<span class="ruby-identifier">commit</span>, <span class="ruby-identifier">path</span>))
205:         <span class="ruby-identifier">clean_paths</span>(<span class="ruby-identifier">commits</span>)
206:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">FileIndex</span><span class="ruby-operator">::</span><span class="ruby-constant">IndexFileNotFound</span>
207:         {}
208:       <span class="ruby-keyword kw">end</span>
209:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000181">
                    
                    <a name="M000181"></a><b>cat_file</b>(options, sha)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000181_source')" id="l_M000181_source">show</a>
                        
                    </p>
                    <div id="M000181_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 21</span>
21:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cat_file</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">sha</span>)
22:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:t</span>]
23:         <span class="ruby-identifier">file_type</span>(<span class="ruby-identifier">sha</span>)
24:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:s</span>]
25:         <span class="ruby-identifier">file_size</span>(<span class="ruby-identifier">sha</span>)
26:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:p</span>]
27:         <span class="ruby-identifier">try_run</span> { <span class="ruby-identifier">ruby_git</span>.<span class="ruby-identifier">cat_file</span>(<span class="ruby-identifier">sha</span>) }
28:       <span class="ruby-keyword kw">end</span>
29:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Grit</span><span class="ruby-operator">::</span><span class="ruby-constant">GitRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">Repository</span><span class="ruby-operator">::</span><span class="ruby-constant">NoSuchShaFound</span>
30:       <span class="ruby-value str">''</span>
31:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000186">
                    
                    <a name="M000186"></a><b>cat_ref</b>(options, ref)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000186_source')" id="l_M000186_source">show</a>
                        
                    </p>
                    <div id="M000186_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 33</span>
33:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cat_ref</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">ref</span>)
34:       <span class="ruby-identifier">sha</span> = <span class="ruby-identifier">rev_parse</span>({}, <span class="ruby-identifier">ref</span>)
35:       <span class="ruby-identifier">cat_file</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">sha</span>)
36:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000188">
                    
                    <a name="M000188"></a><b>diff</b>(options, sha1, sha2 = nil)
                    
                </div>
                
                <div class="description">
                  <p>
git diff &#8212;full-index
&#8216;ec037431382e83c3e95d4f2b3d145afbac8ea55d&#8217;
&#8216;f1ec1aea10986159456846b8a05615b87828d6c6&#8217;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000188_source')" id="l_M000188_source">show</a>
                        
                    </p>
                    <div id="M000188_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 47</span>
47:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">diff</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">sha1</span>, <span class="ruby-identifier">sha2</span> = <span class="ruby-keyword kw">nil</span>)
48:       <span class="ruby-identifier">try_run</span> { <span class="ruby-identifier">ruby_git</span>.<span class="ruby-identifier">diff</span>(<span class="ruby-identifier">sha1</span>, <span class="ruby-identifier">sha2</span>, <span class="ruby-identifier">options</span>) }
49:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000204">
                    
                    <a name="M000204"></a><b>file_index</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000204_source')" id="l_M000204_source">show</a>
                        
                    </p>
                    <div id="M000204_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 211</span>
211:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">file_index</span>
212:       <span class="ruby-ivar">@git_file_index</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">FileIndex</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@git_dir</span>)
213:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000200">
                    
                    <a name="M000200"></a><b>file_size</b>(ref)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000200_source')" id="l_M000200_source">show</a>
                        
                    </p>
                    <div id="M000200_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 192</span>
192:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">file_size</span>(<span class="ruby-identifier">ref</span>)
193:       <span class="ruby-identifier">try_run</span> { <span class="ruby-identifier">ruby_git</span>.<span class="ruby-identifier">cat_file_size</span>(<span class="ruby-identifier">ref</span>).<span class="ruby-identifier">to_s</span> }
194:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000201">
                    
                    <a name="M000201"></a><b>file_type</b>(ref)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000201_source')" id="l_M000201_source">show</a>
                        
                    </p>
                    <div id="M000201_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 196</span>
196:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">file_type</span>(<span class="ruby-identifier">ref</span>)
197:       <span class="ruby-identifier">try_run</span> { <span class="ruby-identifier">ruby_git</span>.<span class="ruby-identifier">cat_file_type</span>(<span class="ruby-identifier">ref</span>).<span class="ruby-identifier">to_s</span> }
198:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000178">
                    
                    <a name="M000178"></a><b>init</b>(options, *args)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000178_source')" id="l_M000178_source">show</a>
                        
                    </p>
                    <div id="M000178_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 13</span>
13:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init</span>(<span class="ruby-identifier">options</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
14:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
15:         <span class="ruby-constant">Grit</span><span class="ruby-operator">::</span><span class="ruby-constant">GitRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">Repository</span>.<span class="ruby-identifier">init</span>(<span class="ruby-ivar">@git_dir</span>)
16:       <span class="ruby-keyword kw">else</span>
17:         <span class="ruby-identifier">method_missing</span>(<span class="ruby-value str">'init'</span>, <span class="ruby-identifier">options</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
18:       <span class="ruby-keyword kw">end</span>
19:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000187">
                    
                    <a name="M000187"></a><b>ls_tree</b>(options, treeish, *paths)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="../../files/lib/grit/tree_rb.html">lib/grit/tree.rb</a>:16: output
= repo.git.ls_tree({}, treeish, *paths)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000187_source')" id="l_M000187_source">show</a>
                        
                    </p>
                    <div id="M000187_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 39</span>
39:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ls_tree</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">treeish</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">paths</span>)
40:       <span class="ruby-identifier">sha</span> = <span class="ruby-identifier">rev_parse</span>({}, <span class="ruby-identifier">treeish</span>)
41:       <span class="ruby-identifier">ruby_git</span>.<span class="ruby-identifier">ls_tree</span>(<span class="ruby-identifier">sha</span>, <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">flatten</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:r</span>))
42:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Grit</span><span class="ruby-operator">::</span><span class="ruby-constant">GitRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">Repository</span><span class="ruby-operator">::</span><span class="ruby-constant">NoSuchShaFound</span>
43:       <span class="ruby-value str">''</span>
44:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000195">
                    
                    <a name="M000195"></a><b>refs</b>(options, prefix)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000195_source')" id="l_M000195_source">show</a>
                        
                    </p>
                    <div id="M000195_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 111</span>
111:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">refs</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">prefix</span>)
112:       <span class="ruby-identifier">refs</span> = []
113:       <span class="ruby-identifier">already</span> = {}
114:       <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-ivar">@git_dir</span>) <span class="ruby-keyword kw">do</span>
115:         <span class="ruby-identifier">files</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/**/*'</span>)
116:         <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ref</span><span class="ruby-operator">|</span>
117:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">ref</span>)
118:           <span class="ruby-identifier">id</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">ref</span>).<span class="ruby-identifier">chomp</span>
119:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">ref</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-node">&quot;#{prefix}/&quot;</span>, <span class="ruby-value str">''</span>)
120:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">already</span>[<span class="ruby-identifier">name</span>]
121:             <span class="ruby-identifier">refs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{name} #{id}&quot;</span>
122:             <span class="ruby-identifier">already</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword kw">true</span>
123:           <span class="ruby-keyword kw">end</span>
124:         <span class="ruby-keyword kw">end</span>
125: 
126:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-value str">'packed-refs'</span>)
127:           <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-value str">'packed-refs'</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
128:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> = <span class="ruby-regexp re">/^(\w{40}) (.*?)$/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">line</span>)
129:               <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'^'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">prefix</span>).<span class="ruby-identifier">match</span>(<span class="ruby-identifier">m</span>[<span class="ruby-value">2</span>])
130:               <span class="ruby-identifier">name</span> = <span class="ruby-identifier">m</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">sub</span>(<span class="ruby-node">&quot;#{prefix}/&quot;</span>, <span class="ruby-value str">''</span>)
131:               <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">already</span>[<span class="ruby-identifier">name</span>]
132:                 <span class="ruby-identifier">refs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{name} #{m[1]}&quot;</span>
133:                 <span class="ruby-identifier">already</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword kw">true</span>
134:               <span class="ruby-keyword kw">end</span>
135:             <span class="ruby-keyword kw">end</span>
136:           <span class="ruby-keyword kw">end</span>
137:         <span class="ruby-keyword kw">end</span>
138:       <span class="ruby-keyword kw">end</span>
139: 
140:       <span class="ruby-identifier">refs</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
141:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000190">
                    
                    <a name="M000190"></a><b>rev_list</b>(options, ref = 'master')
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000190_source')" id="l_M000190_source">show</a>
                        
                    </p>
                    <div id="M000190_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 51</span>
51:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rev_list</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">ref</span> = <span class="ruby-value str">'master'</span>)
52:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:skip</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:skip</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
53:       <span class="ruby-identifier">allowed_options</span> = [<span class="ruby-identifier">:max_count</span>, <span class="ruby-identifier">:since</span>, <span class="ruby-identifier">:until</span>, <span class="ruby-identifier">:pretty</span>]  <span class="ruby-comment cmt"># this is all I can do right now</span>
54:       <span class="ruby-keyword kw">if</span> ((<span class="ruby-identifier">options</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">allowed_options</span>).<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
55:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-value str">'rev-list'</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">ref</span>)
56:       <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>)
57:         <span class="ruby-comment cmt"># pure rev-list</span>
58:         <span class="ruby-keyword kw">begin</span>
59:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">file_index</span>.<span class="ruby-identifier">commits_from</span>(<span class="ruby-identifier">rev_parse</span>({}, <span class="ruby-identifier">ref</span>)).<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span>
60:         <span class="ruby-keyword kw">rescue</span>
61:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-value str">'rev-list'</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">ref</span>)
62:         <span class="ruby-keyword kw">end</span>
63:       <span class="ruby-keyword kw">else</span>
64:         <span class="ruby-identifier">aref</span> = <span class="ruby-identifier">rev_parse</span>({}, <span class="ruby-identifier">ref</span>)
65:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">aref</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
66:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-value str">'rev-list'</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">ref</span>)
67:         <span class="ruby-keyword kw">else</span>
68:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">try_run</span> { <span class="ruby-identifier">ruby_git</span>.<span class="ruby-identifier">rev_list</span>(<span class="ruby-identifier">aref</span>, <span class="ruby-identifier">options</span>) }
69:         <span class="ruby-keyword kw">end</span>
70:       <span class="ruby-keyword kw">end</span>
71:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000193">
                    
                    <a name="M000193"></a><b>rev_parse</b>(options, string)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000193_source')" id="l_M000193_source">show</a>
                        
                    </p>
                    <div id="M000193_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 73</span>
 73:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rev_parse</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">string</span>)
 74:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">RuntimeError</span>, <span class="ruby-node">&quot;invalid string: #{string}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
 75: 
 76:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">string</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\.\./</span>
 77:         (<span class="ruby-identifier">sha1</span>, <span class="ruby-identifier">sha2</span>) = <span class="ruby-identifier">string</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'..'</span>)
 78:         <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">rev_parse</span>({}, <span class="ruby-identifier">sha1</span>), <span class="ruby-identifier">rev_parse</span>({}, <span class="ruby-identifier">sha2</span>)]
 79:       <span class="ruby-keyword kw">end</span>
 80: 
 81:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^[0-9a-f]{40}$/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">string</span>)  <span class="ruby-comment cmt"># passing in a sha - just no-op it</span>
 82:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">chomp</span>
 83:       <span class="ruby-keyword kw">end</span>
 84: 
 85:       <span class="ruby-identifier">head</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@git_dir</span>, <span class="ruby-value str">'refs'</span>, <span class="ruby-value str">'heads'</span>, <span class="ruby-identifier">string</span>)
 86:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">head</span>).<span class="ruby-identifier">chomp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">head</span>)
 87: 
 88:       <span class="ruby-identifier">head</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@git_dir</span>, <span class="ruby-value str">'refs'</span>, <span class="ruby-value str">'remotes'</span>, <span class="ruby-identifier">string</span>)
 89:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">head</span>).<span class="ruby-identifier">chomp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">head</span>)
 90: 
 91:       <span class="ruby-identifier">head</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@git_dir</span>, <span class="ruby-value str">'refs'</span>, <span class="ruby-value str">'tags'</span>, <span class="ruby-identifier">string</span>)
 92:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">head</span>).<span class="ruby-identifier">chomp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">head</span>)
 93: 
 94:       <span class="ruby-comment cmt">## check packed-refs file, too</span>
 95:       <span class="ruby-identifier">packref</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@git_dir</span>, <span class="ruby-value str">'packed-refs'</span>)
 96:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">packref</span>)
 97:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">packref</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
 98:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> = <span class="ruby-regexp re">/^(\w{40}) refs\/.+?\/(.*?)$/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">line</span>)
 99:             <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">string</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'$'</span>).<span class="ruby-identifier">match</span>(<span class="ruby-identifier">m</span>[<span class="ruby-value">3</span>])
100:             <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">m</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">chomp</span>
101:           <span class="ruby-keyword kw">end</span>
102:         <span class="ruby-keyword kw">end</span>
103:       <span class="ruby-keyword kw">end</span>
104: 
105:       <span class="ruby-comment cmt">## !! more - partials and such !!</span>
106: 
107:       <span class="ruby-comment cmt"># revert to calling git - grr</span>
108:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-value str">'rev-parse'</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">string</span>).<span class="ruby-identifier">chomp</span>
109:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000205">
                    
                    <a name="M000205"></a><b>ruby_git</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000205_source')" id="l_M000205_source">show</a>
                        
                    </p>
                    <div id="M000205_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 215</span>
215:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ruby_git</span>
216:       <span class="ruby-ivar">@ruby_git_repo</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Repository</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@git_dir</span>)
217:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000196">
                    
                    <a name="M000196"></a><b>tags</b>(options, prefix)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000196_source')" id="l_M000196_source">show</a>
                        
                    </p>
                    <div id="M000196_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 143</span>
143:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">prefix</span>)
144:       <span class="ruby-identifier">refs</span> = []
145:       <span class="ruby-identifier">already</span> = {}
146: 
147:       <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">repo</span>.<span class="ruby-identifier">path</span>) <span class="ruby-keyword kw">do</span>
148:         <span class="ruby-identifier">files</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/**/*'</span>)
149: 
150:         <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ref</span><span class="ruby-operator">|</span>
151:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">ref</span>)
152: 
153:           <span class="ruby-identifier">id</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">ref</span>).<span class="ruby-identifier">chomp</span>
154:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">ref</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-node">&quot;#{prefix}/&quot;</span>, <span class="ruby-value str">''</span>)
155: 
156:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">already</span>[<span class="ruby-identifier">name</span>]
157:             <span class="ruby-identifier">refs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{name} #{id}&quot;</span>
158:             <span class="ruby-identifier">already</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword kw">true</span>
159:           <span class="ruby-keyword kw">end</span>
160:         <span class="ruby-keyword kw">end</span>
161: 
162:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-value str">'packed-refs'</span>)
163:           <span class="ruby-identifier">lines</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-value str">'packed-refs'</span>)
164:           <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
165:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> = <span class="ruby-regexp re">/^(\w{40}) (.*?)$/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">line</span>)
166:               <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'^'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">prefix</span>).<span class="ruby-identifier">match</span>(<span class="ruby-identifier">m</span>[<span class="ruby-value">2</span>])
167:               <span class="ruby-identifier">name</span> = <span class="ruby-identifier">m</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">sub</span>(<span class="ruby-node">&quot;#{prefix}/&quot;</span>, <span class="ruby-value str">''</span>)
168: 
169:               <span class="ruby-comment cmt"># Annotated tags in packed-refs include a reference</span>
170:               <span class="ruby-comment cmt"># to the commit object on the following line.</span>
171:               <span class="ruby-identifier">next_line</span> = <span class="ruby-identifier">lines</span>[<span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>]
172: 
173:               <span class="ruby-identifier">id</span> =
174:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">next_line</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">next_line</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?^</span>
175:                 <span class="ruby-identifier">next_line</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">chomp</span>
176:               <span class="ruby-keyword kw">else</span>
177:                 <span class="ruby-identifier">m</span>[<span class="ruby-value">1</span>]
178:               <span class="ruby-keyword kw">end</span>
179: 
180:               <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">already</span>[<span class="ruby-identifier">name</span>]
181:                 <span class="ruby-identifier">refs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{name} #{id}&quot;</span>
182:                 <span class="ruby-identifier">already</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword kw">true</span>
183:               <span class="ruby-keyword kw">end</span>
184:             <span class="ruby-keyword kw">end</span>
185:           <span class="ruby-keyword kw">end</span>
186:         <span class="ruby-keyword kw">end</span>
187:       <span class="ruby-keyword kw">end</span>
188: 
189:       <span class="ruby-identifier">refs</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
190:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000208">
                    
                    <a name="M000208"></a><b>clean_paths</b>(commit_array)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000208_source')" id="l_M000208_source">show</a>
                        
                    </p>
                    <div id="M000208_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 257</span>
257:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clean_paths</span>(<span class="ruby-identifier">commit_array</span>)
258:         <span class="ruby-identifier">new_commits</span> = {}
259:         <span class="ruby-identifier">commit_array</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span>, <span class="ruby-identifier">sha</span><span class="ruby-operator">|</span>
260:           <span class="ruby-identifier">file</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">chop</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file</span>[<span class="ruby-identifier">file</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span> , <span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'/'</span>
261:           <span class="ruby-identifier">new_commits</span>[<span class="ruby-identifier">file</span>] = <span class="ruby-identifier">sha</span>
262:         <span class="ruby-keyword kw">end</span>
263:         <span class="ruby-identifier">new_commits</span>
264:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000207">
                    
                    <a name="M000207"></a><b>looking_for</b>(commit, path = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000207_source')" id="l_M000207_source">show</a>
                        
                    </p>
                    <div id="M000207_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 241</span>
241:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">looking_for</span>(<span class="ruby-identifier">commit</span>, <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>)
242:         <span class="ruby-identifier">tree_sha</span> = <span class="ruby-identifier">ruby_git</span>.<span class="ruby-identifier">get_subtree</span>(<span class="ruby-identifier">rev_parse</span>({}, <span class="ruby-identifier">commit</span>), <span class="ruby-identifier">path</span>)
243: 
244:         <span class="ruby-identifier">looking_for</span> = []
245:         <span class="ruby-identifier">ruby_git</span>.<span class="ruby-identifier">get_object_by_sha1</span>(<span class="ruby-identifier">tree_sha</span>).<span class="ruby-identifier">entry</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
246:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-value str">''</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'.'</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'./'</span>)
247:             <span class="ruby-identifier">file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>)
248:           <span class="ruby-keyword kw">else</span>
249:             <span class="ruby-identifier">file</span> = <span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>
250:           <span class="ruby-keyword kw">end</span>
251:           <span class="ruby-identifier">file</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">'/'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:directory</span>
252:           <span class="ruby-identifier">looking_for</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">file</span>
253:         <span class="ruby-keyword kw">end</span>
254:         <span class="ruby-identifier">looking_for</span>
255:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000206">
                    
                    <a name="M000206"></a><b>try_run</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000206_source')" id="l_M000206_source">show</a>
                        
                    </p>
                    <div id="M000206_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby.rb, line 221</span>
221:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">try_run</span>
222:         <span class="ruby-identifier">ret</span> = <span class="ruby-value str">''</span>
223:         <span class="ruby-constant">Timeout</span>.<span class="ruby-identifier">timeout</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">git_timeout</span>) <span class="ruby-keyword kw">do</span>
224:           <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">yield</span>
225:         <span class="ruby-keyword kw">end</span>
226:         <span class="ruby-ivar">@bytes_read</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">ret</span>.<span class="ruby-identifier">size</span>
227: 
228:         <span class="ruby-comment cmt">#if @bytes_read &gt; 5242880 # 5.megabytes</span>
229:         <span class="ruby-comment cmt">#  bytes = @bytes_read</span>
230:         <span class="ruby-comment cmt">#  @bytes_read = 0</span>
231:         <span class="ruby-comment cmt">#  raise Grit::Git::GitTimeout.new(command, bytes)</span>
232:         <span class="ruby-comment cmt">#end</span>
233: 
234:         <span class="ruby-identifier">ret</span>
235:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
236:         <span class="ruby-identifier">bytes</span> = <span class="ruby-ivar">@bytes_read</span>
237:         <span class="ruby-ivar">@bytes_read</span> = <span class="ruby-value">0</span>
238:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">Grit</span><span class="ruby-operator">::</span><span class="ruby-constant">Git</span><span class="ruby-operator">::</span><span class="ruby-constant">GitTimeout</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">command</span>, <span class="ruby-identifier">bytes</span>)
239:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000089">
                    
                    <a name="M000089"></a><b>read_bytes_until</b>(io, char)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show</a>
                        
                    </p>
                    <div id="M000089_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby/git_object.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">read_bytes_until</span>(<span class="ruby-identifier">io</span>, <span class="ruby-identifier">char</span>)
181:     <span class="ruby-identifier">string</span> = <span class="ruby-value str">''</span>
182:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1.9'</span>
183:       <span class="ruby-keyword kw">while</span> ((<span class="ruby-identifier">next_char</span> = <span class="ruby-identifier">io</span>.<span class="ruby-identifier">getc</span>) <span class="ruby-operator">!=</span> <span class="ruby-identifier">char</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">io</span>.<span class="ruby-identifier">eof</span>
184:         <span class="ruby-identifier">string</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">next_char</span>
185:       <span class="ruby-keyword kw">end</span>
186:     <span class="ruby-keyword kw">else</span>
187:       <span class="ruby-keyword kw">while</span> ((<span class="ruby-identifier">next_char</span> = <span class="ruby-identifier">io</span>.<span class="ruby-identifier">getc</span>.<span class="ruby-identifier">chr</span>) <span class="ruby-operator">!=</span> <span class="ruby-identifier">char</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">io</span>.<span class="ruby-identifier">eof</span>
188:         <span class="ruby-identifier">string</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">next_char</span>
189:       <span class="ruby-keyword kw">end</span>
190:     <span class="ruby-keyword kw">end</span>
191:     <span class="ruby-identifier">string</span>
192:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000153">
                    
                    <a name="M000153"></a><b>read_bytes_until</b>(io, char)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000153_source')" id="l_M000153_source">show</a>
                        
                    </p>
                    <div id="M000153_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/grit/git-ruby/object.rb, line 164</span>
164:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">read_bytes_until</span>(<span class="ruby-identifier">io</span>, <span class="ruby-identifier">char</span>)
165:     <span class="ruby-identifier">string</span> = <span class="ruby-value str">''</span>
166:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1.9'</span>
167:       <span class="ruby-keyword kw">while</span> ((<span class="ruby-identifier">next_char</span> = <span class="ruby-identifier">io</span>.<span class="ruby-identifier">getc</span>) <span class="ruby-operator">!=</span> <span class="ruby-identifier">char</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">io</span>.<span class="ruby-identifier">eof</span>
168:         <span class="ruby-identifier">string</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">next_char</span>
169:       <span class="ruby-keyword kw">end</span>
170:     <span class="ruby-keyword kw">else</span>
171:       <span class="ruby-keyword kw">while</span> ((<span class="ruby-identifier">next_char</span> = <span class="ruby-identifier">io</span>.<span class="ruby-identifier">getc</span>.<span class="ruby-identifier">chr</span>) <span class="ruby-operator">!=</span> <span class="ruby-identifier">char</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">io</span>.<span class="ruby-identifier">eof</span>
172:         <span class="ruby-identifier">string</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">next_char</span>
173:       <span class="ruby-keyword kw">end</span>
174:     <span class="ruby-keyword kw">end</span>
175:     <span class="ruby-identifier">string</span>
176:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    