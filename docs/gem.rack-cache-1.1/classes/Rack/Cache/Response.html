<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Rack::Cache::Response</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Rack::Cache::Response 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/rack/cache/response_rb.html">lib/rack/cache/response.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Provides access to the response generated by the downstream application.
The <tt>response</tt>, <tt>original_response</tt>, and <tt>entry</tt>
objects exposed by the Core caching engine are instances of this class.
</p>
<p>
<a href="Response.html">Response</a> objects respond to a variety of
convenience methods, including those defined in Rack::Response::Helpers,
Rack::Cache::Headers, and Rack::Cache::ResponseHeaders.
</p>
<p>
Note that <a href="Response.html">Rack::Cache::Response</a> is not a
subclass of Rack::Response and does not perform many of the same
initialization and finalization tasks. For example, the body is not slurped
during initialization and there are no facilities for generating response
output.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000147">age</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000137">cache_control</a>,</li>
                
                <li><a href="#M000138">cache_control=</a>,</li>
                
                <li><a href="#M000141">cacheable?</a>,</li>
                
                <li><a href="#M000155">client_ttl=</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000146">date</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000157">etag</a>,</li>
                
                <li><a href="#M000145">expire!</a>,</li>
                
                <li><a href="#M000150">expires</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000139">fresh?</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000130">initialize_copy</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000156">last_modified</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000148">max_age</a>,</li>
                
                <li><a href="#M000151">max_age=</a>,</li>
                
                <li><a href="#M000144">must_revalidate?</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000129">new</a>,</li>
                
                <li><a href="#M000158">not_modified!</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000143">private=</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000152">shared_max_age=</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000131">to_a</a>,</li>
                
                <li><a href="#M000153">ttl</a>,</li>
                
                <li><a href="#M000154">ttl=</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M000142">validateable?</a>,</li>
                
                <li><a href="#M000159">vary</a>,</li>
                
                <li><a href="#M000160">vary?</a>,</li>
                
                <li><a href="#M000161">vary_header_names</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <span>Rack::Response::Helpers</span>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">CACHEABLE_RESPONSE_CODES</td>
            <td>=</td>
            <td class="attr-value">[       200, # OK       203, # Non-Authoritative Information       300, # Multiple Choices       301, # Moved Permanently       302, # Found       404, # Not Found       410  # Gone     ].to_set</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Status codes of responses that MAY be stored by a cache or used in reply to
a subsequent request.
</p>
<p>
<a
href="http://tools.ietf.org/html/rfc2616#section-13.4">tools.ietf.org/html/rfc2616#section-13.4</a>
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NOT_MODIFIED_OMIT_HEADERS</td>
            <td>=</td>
            <td class="attr-value">%w[       Allow       Content-Encoding       Content-Language       Content-Length       Content-MD5       Content-Type       Last-Modified     ].to_set</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Headers that MUST NOT be included with 304 Not Modified responses.
</p>
<p>
<a
href="http://tools.ietf.org/html/rfc2616#section-10.3.5">tools.ietf.org/html/rfc2616#section-10.3.5</a>
</p>
</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>status</td>
            <td class='attr-desc'><p>
<a href="../../Rack.html">Rack</a> response tuple accessors.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>headers</td>
            <td class='attr-desc'><p>
<a href="../../Rack.html">Rack</a> response tuple accessors.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>body</td>
            <td class='attr-desc'><p>
<a href="../../Rack.html">Rack</a> response tuple accessors.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>now</td>
            <td class='attr-desc'><p>
The time when the <a href="Response.html">Response</a> object was
instantiated.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000129">
                    
                    <a name="M000129"></a><b>new</b>(status, headers, body)
                    
                </div>
                
                <div class="description">
                  <p>
Create a <a href="Response.html">Response</a> instance given the response
status code, header hash, and body.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show</a>
                        
                    </p>
                    <div id="M000129_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 32</span>
32:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">status</span>, <span class="ruby-identifier">headers</span>, <span class="ruby-identifier">body</span>)
33:       <span class="ruby-ivar">@status</span> = <span class="ruby-identifier">status</span>.<span class="ruby-identifier">to_i</span>
34:       <span class="ruby-ivar">@headers</span> = <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">HeaderHash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">headers</span>)
35:       <span class="ruby-ivar">@body</span> = <span class="ruby-identifier">body</span>
36:       <span class="ruby-ivar">@now</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
37:       <span class="ruby-ivar">@headers</span>[<span class="ruby-value str">'Date'</span>] <span class="ruby-operator">||=</span> <span class="ruby-ivar">@now</span>.<span class="ruby-identifier">httpdate</span>
38:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000147">
                    
                    <a name="M000147"></a><b>age</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The age of the response.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000147_source')" id="l_M000147_source">show</a>
                        
                    </p>
                    <div id="M000147_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 148</span>
148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">age</span>
149:       (<span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Age'</span>] <span class="ruby-operator">||</span>  [(<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">date</span>).<span class="ruby-identifier">to_i</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">max</span>).<span class="ruby-identifier">to_i</span>
150:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000137">
                    
                    <a name="M000137"></a><b>cache_control</b>()
                    
                </div>
                
                <div class="description">
                  <p>
A Hash of name=value pairs that correspond to the Cache-Control header.
Valueless parameters (e.g., must-revalidate, no-store) have a Hash value of
true. This method always returns a Hash, empty if no Cache-Control header
is present.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000137_source')" id="l_M000137_source">show</a>
                        
                    </p>
                    <div id="M000137_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 68</span>
68:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cache_control</span>
69:       <span class="ruby-ivar">@cache_control</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">CacheControl</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Cache-Control'</span>])
70:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000138">
                    
                    <a name="M000138"></a><b>cache_control=</b>(value)
                    
                </div>
                
                <div class="description">
                  <p>
Set the Cache-Control header to the values specified by the Hash. See the
<a href="Response.html#M000137">cache_control</a> method for information on
expected Hash structure.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000138_source')" id="l_M000138_source">show</a>
                        
                    </p>
                    <div id="M000138_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 74</span>
74:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cache_control=</span>(<span class="ruby-identifier">value</span>)
75:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:to_hash</span>
76:         <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">clear</span>
77:         <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">value</span>)
78:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">to_s</span>
79:       <span class="ruby-keyword kw">end</span>
80: 
81:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span>
82:         <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'Cache-Control'</span>)
83:       <span class="ruby-keyword kw">else</span>
84:         <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Cache-Control'</span>] = <span class="ruby-identifier">value</span>
85:       <span class="ruby-keyword kw">end</span>
86:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000141">
                    
                    <a name="M000141"></a><b>cacheable?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determine if the response is worth caching under any circumstance.
Responses marked &#8220;private&#8221; with an explicit Cache-Control
directive are considered uncacheable
</p>
<p>
Responses with neither a freshness lifetime (Expires, max-age) nor cache
validator (Last-Modified, ETag) are considered uncacheable.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000141_source')" id="l_M000141_source">show</a>
                        
                    </p>
                    <div id="M000141_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 102</span>
102:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cacheable?</span>
103:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">CACHEABLE_RESPONSE_CODES</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">status</span>)
104:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">no_store?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">private?</span>
105:       <span class="ruby-identifier">validateable?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">fresh?</span>
106:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000155">
                    
                    <a name="M000155"></a><b>client_ttl=</b>(seconds)
                    
                </div>
                
                <div class="description">
                  <p>
Set the response&#8217;s time-to-live for private/client caches. This
adjusts the Cache-Control/max-age directive.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show</a>
                        
                    </p>
                    <div id="M000155_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 196</span>
196:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">client_ttl=</span>(<span class="ruby-identifier">seconds</span>)
197:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">max_age</span> = <span class="ruby-identifier">age</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">seconds</span>
198:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000146">
                    
                    <a name="M000146"></a><b>date</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The date, as specified by the Date header. When no Date header is present,
set the Date header to Time.now and return.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show</a>
                        
                    </p>
                    <div id="M000146_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 138</span>
138:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">date</span>
139:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date</span> = <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Date'</span>]
140:         <span class="ruby-constant">Time</span>.<span class="ruby-identifier">httpdate</span>(<span class="ruby-identifier">date</span>)
141:       <span class="ruby-keyword kw">else</span>
142:         <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Date'</span>] = <span class="ruby-identifier">now</span>.<span class="ruby-identifier">httpdate</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">frozen?</span>
143:         <span class="ruby-identifier">now</span>
144:       <span class="ruby-keyword kw">end</span>
145:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000157">
                    
                    <a name="M000157"></a><b>etag</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The literal value of ETag HTTP header or nil if no ETag is specified.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show</a>
                        
                    </p>
                    <div id="M000157_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 207</span>
207:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">etag</span>
208:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'ETag'</span>]
209:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000145">
                    
                    <a name="M000145"></a><b>expire!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Mark the response stale by setting the Age header to be equal to the
maximum age of the response.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000145_source')" id="l_M000145_source">show</a>
                        
                    </p>
                    <div id="M000145_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 132</span>
132:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expire!</span>
133:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Age'</span>] = <span class="ruby-identifier">max_age</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fresh?</span>
134:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000150">
                    
                    <a name="M000150"></a><b>expires</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The value of the Expires header as a Time object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000150_source')" id="l_M000150_source">show</a>
                        
                    </p>
                    <div id="M000150_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 164</span>
164:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expires</span>
165:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Expires'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">httpdate</span>(<span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Expires'</span>])
166:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000139">
                    
                    <a name="M000139"></a><b>fresh?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determine if the response is &#8220;fresh&#8221;. Fresh responses may be
served from cache without any interaction with the origin. A response is
considered fresh when it includes a Cache-Control/max-age indicator or
Expiration header and the calculated age is less than the freshness
lifetime.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000139_source')" id="l_M000139_source">show</a>
                        
                    </p>
                    <div id="M000139_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 92</span>
92:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fresh?</span>
93:       <span class="ruby-identifier">ttl</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ttl</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
94:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000130">
                    
                    <a name="M000130"></a><b>initialize_copy</b>(other)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show</a>
                        
                    </p>
                    <div id="M000130_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 40</span>
40:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">other</span>)
41:       <span class="ruby-keyword kw">super</span>
42:       <span class="ruby-ivar">@headers</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">headers</span>.<span class="ruby-identifier">dup</span>
43:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000156">
                    
                    <a name="M000156"></a><b>last_modified</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The String value of the Last-Modified header exactly as it appears in the
response (i.e., no date parsing / conversion is performed).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000156_source')" id="l_M000156_source">show</a>
                        
                    </p>
                    <div id="M000156_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 202</span>
202:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">last_modified</span>
203:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Last-Modified'</span>]
204:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000148">
                    
                    <a name="M000148"></a><b>max_age</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The number of seconds after the time specified in the response&#8217;s Date
header when the the response should no longer be considered fresh. First
check for a s-maxage directive, then a max-age directive, and then fall
back on an expires header; return nil when no maximum age can be
established.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show</a>
                        
                    </p>
                    <div id="M000148_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 157</span>
157:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">max_age</span>
158:       <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">shared_max_age</span> <span class="ruby-operator">||</span>
159:         <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">max_age</span> <span class="ruby-operator">||</span>
160:         (<span class="ruby-identifier">expires</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">expires</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">date</span>))
161:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000151">
                    
                    <a name="M000151"></a><b>max_age=</b>(value)
                    
                </div>
                
                <div class="description">
                  <p>
The number of seconds after which the response should no longer be
considered fresh. Sets the Cache-Control max-age directive.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000151_source')" id="l_M000151_source">show</a>
                        
                    </p>
                    <div id="M000151_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 170</span>
170:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">max_age=</span>(<span class="ruby-identifier">value</span>)
171:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">cache_control</span> = <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value str">'max-age'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>)
172:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000144">
                    
                    <a name="M000144"></a><b>must_revalidate?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Indicates that the cache must not serve a stale response in any
circumstance without first revalidating with the origin. When present, the
TTL of the response should not be overriden to be greater than the value
provided by the origin.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000144_source')" id="l_M000144_source">show</a>
                        
                    </p>
                    <div id="M000144_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 126</span>
126:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">must_revalidate?</span>
127:       <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">must_revalidate</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">proxy_revalidate</span>
128:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000158">
                    
                    <a name="M000158"></a><b>not_modified!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Modify the response so that it conforms to the rules defined for &#8216;304
Not Modified&#8217;. This sets the status, removes the body, and discards
any headers that MUST NOT be included in 304 responses.
</p>
<p>
<a
href="http://tools.ietf.org/html/rfc2616#section-10.3.5">tools.ietf.org/html/rfc2616#section-10.3.5</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show</a>
                        
                    </p>
                    <div id="M000158_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 229</span>
229:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">not_modified!</span>
230:       <span class="ruby-identifier">body</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:close</span>)
231:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">status</span> = <span class="ruby-value">304</span>
232:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">body</span> = []
233:       <span class="ruby-constant">NOT_MODIFIED_OMIT_HEADERS</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">name</span>) }
234:       <span class="ruby-keyword kw">nil</span>
235:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000143">
                    
                    <a name="M000143"></a><b>private=</b>(value)
                    
                </div>
                
                <div class="description">
                  <p>
Mark the response &#8220;private&#8221;, making it ineligible for serving
other clients.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000143_source')" id="l_M000143_source">show</a>
                        
                    </p>
                    <div id="M000143_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 116</span>
116:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">private=</span>(<span class="ruby-identifier">value</span>)
117:       <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
118:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">cache_control</span> = <span class="ruby-identifier">cache_control</span>.
119:         <span class="ruby-identifier">merge</span>(<span class="ruby-value str">'public'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>, <span class="ruby-value str">'private'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>)
120:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000152">
                    
                    <a name="M000152"></a><b>shared_max_age=</b>(value)
                    
                </div>
                
                <div class="description">
                  <p>
Like <a href="Response.html#M000151">max_age=</a> but sets the s-maxage
directive, which applies only to shared caches.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000152_source')" id="l_M000152_source">show</a>
                        
                    </p>
                    <div id="M000152_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 176</span>
176:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shared_max_age=</span>(<span class="ruby-identifier">value</span>)
177:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">cache_control</span> = <span class="ruby-identifier">cache_control</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value str">'s-maxage'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>)
178:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000131">
                    
                    <a name="M000131"></a><b>to_a</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return the status, headers, and body in a three-tuple.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show</a>
                        
                    </p>
                    <div id="M000131_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 46</span>
46:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_a</span>
47:       [<span class="ruby-identifier">status</span>, <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">to_hash</span>, <span class="ruby-identifier">body</span>]
48:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000153">
                    
                    <a name="M000153"></a><b>ttl</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The response&#8217;s time-to-live in seconds, or nil when no freshness
information is present in the response. When the responses <a
href="Response.html#M000153">ttl</a> is <= 0, the response may not be
served from cache without first revalidating with the origin.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000153_source')" id="l_M000153_source">show</a>
                        
                    </p>
                    <div id="M000153_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 184</span>
184:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ttl</span>
185:       <span class="ruby-identifier">max_age</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">age</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">max_age</span>
186:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000154">
                    
                    <a name="M000154"></a><b>ttl=</b>(seconds)
                    
                </div>
                
                <div class="description">
                  <p>
Set the response&#8217;s time-to-live for shared caches to the specified
number of seconds. This adjusts the Cache-Control/s-maxage directive.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show</a>
                        
                    </p>
                    <div id="M000154_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 190</span>
190:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ttl=</span>(<span class="ruby-identifier">seconds</span>)
191:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">shared_max_age</span> = <span class="ruby-identifier">age</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">seconds</span>
192:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000142">
                    
                    <a name="M000142"></a><b>validateable?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Determine if the response includes headers that can be used to validate the
response with the origin using a conditional GET request.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000142_source')" id="l_M000142_source">show</a>
                        
                    </p>
                    <div id="M000142_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 110</span>
110:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validateable?</span>
111:       <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'Last-Modified'</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'ETag'</span>)
112:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000159">
                    
                    <a name="M000159"></a><b>vary</b>()
                    
                </div>
                
                <div class="description">
                  <p>
The literal value of the Vary header, or nil when no header is present.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show</a>
                        
                    </p>
                    <div id="M000159_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 238</span>
238:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vary</span>
239:       <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Vary'</span>]
240:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000160">
                    
                    <a name="M000160"></a><b>vary?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Does the response include a Vary header?
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show</a>
                        
                    </p>
                    <div id="M000160_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 243</span>
243:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vary?</span>
244:       <span class="ruby-operator">!</span> <span class="ruby-identifier">vary</span>.<span class="ruby-identifier">nil?</span>
245:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000161">
                    
                    <a name="M000161"></a><b>vary_header_names</b>()
                    
                </div>
                
                <div class="description">
                  <p>
An array of header names given in the Vary header or an empty array when no
Vary header is present.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show</a>
                        
                    </p>
                    <div id="M000161_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rack/cache/response.rb, line 249</span>
249:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">vary_header_names</span>
250:       <span class="ruby-keyword kw">return</span> [] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">vary</span> = <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Vary'</span>]
251:       <span class="ruby-identifier">vary</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/[\s,]+/</span>)
252:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    