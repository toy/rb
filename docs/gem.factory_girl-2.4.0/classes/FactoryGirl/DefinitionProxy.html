<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>FactoryGirl::DefinitionProxy</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            FactoryGirl::DefinitionProxy 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/factory_girl/definition_proxy_rb.html">lib/factory_girl/definition_proxy.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000066">add_attribute</a>,</li>
                
                <li><a href="#M000072">after_build</a>,</li>
                
                <li><a href="#M000073">after_create</a>,</li>
                
                <li><a href="#M000077">after_stub</a>,</li>
                
                <li><a href="#M000071">association</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000079">factory</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000067">ignore</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000068">method_missing</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000063">new</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000069">sequence</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000078">to_create</a>,</li>
                
                <li><a href="#M000080">trait</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">UNPROXIED_METHODS</td>
            <td>=</td>
            <td class="attr-value">%w(__send__ __id__ nil? send object_id extend instance_eval initialize block_given? raise)</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>child_factories</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000063">
                    
                    <a name="M000063"></a><b>new</b>(definition, ignore = false)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000063_source')" id="l_M000063_source">show</a>
                        
                    </p>
                    <div id="M000063_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 11</span>
11:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">definition</span>, <span class="ruby-identifier">ignore</span> = <span class="ruby-keyword kw">false</span>)
12:       <span class="ruby-ivar">@definition</span>      = <span class="ruby-identifier">definition</span>
13:       <span class="ruby-ivar">@ignore</span>          = <span class="ruby-identifier">ignore</span>
14:       <span class="ruby-ivar">@child_factories</span> = []
15:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000066">
                    
                    <a name="M000066"></a><b>add_attribute</b>(name, value = nil, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Adds an attribute that should be assigned on generated instances for this
factory.
</p>
<p>
This method should be called with either a value or block, but not both. If
called with a block, the attribute will be generated &#8220;lazily,&#8221;
whenever an instance is generated. Lazy attribute blocks will not be called
if that attribute is overridden for a specific instance.
</p>
<p>
When defining lazy attributes, an instance of FactoryGirl::Proxy will be
yielded, allowing associations to be built using the correct build
strategy.
</p>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> or <tt>String</tt> The name of this attribute. This
will be assigned using &#8220;name=&#8221; for generated instances.

</li>
<li>value: <tt>Object</tt> If no block is given, this value will be used for
this attribute.

</li>
</ul>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000066_source')" id="l_M000066_source">show</a>
                        
                    </p>
                    <div id="M000066_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 35</span>
35:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
36:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">AttributeDefinitionError</span>, <span class="ruby-value str">&quot;Both value and block given&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block_given?</span>
37: 
38:       <span class="ruby-identifier">declaration</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
39:         <span class="ruby-constant">Declaration</span><span class="ruby-operator">::</span><span class="ruby-constant">Dynamic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-ivar">@ignore</span>, <span class="ruby-identifier">block</span>)
40:       <span class="ruby-keyword kw">else</span>
41:         <span class="ruby-constant">Declaration</span><span class="ruby-operator">::</span><span class="ruby-constant">Static</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@ignore</span>)
42:       <span class="ruby-keyword kw">end</span>
43: 
44:       <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">declare_attribute</span>(<span class="ruby-identifier">declaration</span>)
45:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000072">
                    
                    <a name="M000072"></a><b>after_build</b>(&amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000072_source')" id="l_M000072_source">show</a>
                        
                    </p>
                    <div id="M000072_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 141</span>
141:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_build</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
142:       <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">add_callback</span>(<span class="ruby-constant">Callback</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:after_build</span>, <span class="ruby-identifier">block</span>))
143:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000073">
                    
                    <a name="M000073"></a><b>after_create</b>(&amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show</a>
                        
                    </p>
                    <div id="M000073_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 145</span>
145:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_create</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
146:       <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">add_callback</span>(<span class="ruby-constant">Callback</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:after_create</span>, <span class="ruby-identifier">block</span>))
147:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000077">
                    
                    <a name="M000077"></a><b>after_stub</b>(&amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000077_source')" id="l_M000077_source">show</a>
                        
                    </p>
                    <div id="M000077_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 149</span>
149:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_stub</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
150:       <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">add_callback</span>(<span class="ruby-constant">Callback</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:after_stub</span>, <span class="ruby-identifier">block</span>))
151:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000071">
                    
                    <a name="M000071"></a><b>association</b>(name, options = {})
                    
                </div>
                
                <div class="description">
                  <p>
Adds an attribute that builds an association. The associated instance will
be built using the same build strategy as the parent instance.
</p>
<p>
Example:
</p>
<pre>
  factory :user do
    name 'Joey'
  end

  factory :post do
    association :author, :factory =&gt; :user
  end
</pre>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> The name of this attribute.

</li>
<li>options: <tt>Hash</tt>

</li>
</ul>
<p>
Options:
</p>
<ul>
<li>factory: <tt>Symbol</tt> or <tt>String</tt>

<pre>
 The name of the factory to use when building the associated instance.
 If no name is given, the name of the attribute is assumed to be the
 name of the factory. For example, a &quot;user&quot; association will by
 default use the &quot;user&quot; factory.
</pre>
</li>
</ul>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show</a>
                        
                    </p>
                    <div id="M000071_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 137</span>
137:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">association</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
138:       <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">declare_attribute</span>(<span class="ruby-constant">Declaration</span><span class="ruby-operator">::</span><span class="ruby-constant">Association</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>))
139:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000079">
                    
                    <a name="M000079"></a><b>factory</b>(name, options = {}, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000079_source')" id="l_M000079_source">show</a>
                        
                    </p>
                    <div id="M000079_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 157</span>
157:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">factory</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
158:       <span class="ruby-ivar">@child_factories</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">block</span>]
159:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000067">
                    
                    <a name="M000067"></a><b>ignore</b>(&amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000067_source')" id="l_M000067_source">show</a>
                        
                    </p>
                    <div id="M000067_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 47</span>
47:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ignore</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
48:       <span class="ruby-identifier">proxy</span> = <span class="ruby-constant">DefinitionProxy</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@definition</span>, <span class="ruby-keyword kw">true</span>)
49:       <span class="ruby-identifier">proxy</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
50:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000068">
                    
                    <a name="M000068"></a><b>method_missing</b>(name, *args, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Calls <a href="DefinitionProxy.html#M000066">add_attribute</a> using the
missing method name as the name of the attribute, so that:
</p>
<pre>
  factory :user do
    name 'Billy Idol'
  end
</pre>
<p>
and:
</p>
<pre>
  factory :user do
    add_attribute :name, 'Billy Idol'
  end
</pre>
<p>
are equivalent.
</p>
<p>
If no argument or block is given, factory_girl will look for a sequence or
association with the same name. This means that:
</p>
<pre>
  factory :user do
    email { create(:email) }
    association :account
  end
</pre>
<p>
and:
</p>
<pre>
  factory :user do
    email
    account
  end
</pre>
<p>
are equivalent.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000068_source')" id="l_M000068_source">show</a>
                        
                    </p>
                    <div id="M000068_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 83</span>
83:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
84:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">nil?</span>
85:         <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">declare_attribute</span>(<span class="ruby-constant">Declaration</span><span class="ruby-operator">::</span><span class="ruby-constant">Implicit</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-ivar">@definition</span>, <span class="ruby-ivar">@ignore</span>))
86:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:factory</span>)
87:         <span class="ruby-identifier">association</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
88:       <span class="ruby-keyword kw">else</span>
89:         <span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
90:       <span class="ruby-keyword kw">end</span>
91:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000069">
                    
                    <a name="M000069"></a><b>sequence</b>(name, start_value = 1, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Adds an attribute that will have unique values generated by a sequence with
a specified format.
</p>
<p>
The result of:
</p>
<pre>
  factory :user do
    sequence(:email) { |n| &quot;person#{n}@example.com&quot; }
  end
</pre>
<p>
Is equal to:
</p>
<pre>
  sequence(:email) { |n| &quot;person#{n}@example.com&quot; }

  factory :user do
    email { FactoryGirl.create(:email) }
  end
</pre>
<p>
Except that no globally available sequence will be defined.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show</a>
                        
                    </p>
                    <div id="M000069_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 109</span>
109:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sequence</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">start_value</span> = <span class="ruby-value">1</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
110:       <span class="ruby-identifier">sequence</span> = <span class="ruby-constant">Sequence</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">start_value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
111:       <span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">name</span>) { <span class="ruby-identifier">sequence</span>.<span class="ruby-identifier">next</span> }
112:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000078">
                    
                    <a name="M000078"></a><b>to_create</b>(&amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000078_source')" id="l_M000078_source">show</a>
                        
                    </p>
                    <div id="M000078_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 153</span>
153:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_create</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
154:       <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">to_create</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
155:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000080">
                    
                    <a name="M000080"></a><b>trait</b>(name, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000080_source')" id="l_M000080_source">show</a>
                        
                    </p>
                    <div id="M000080_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/factory_girl/definition_proxy.rb, line 161</span>
161:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trait</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
162:       <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">define_trait</span>(<span class="ruby-constant">Trait</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>))
163:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    