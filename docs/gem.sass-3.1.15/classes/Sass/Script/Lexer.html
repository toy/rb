<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Sass::Script::Lexer</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Sass::Script::Lexer 
            
                <span class="parent">&lt; 
                    
                    <a href="../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/sass/script/lexer_rb.html">lib/sass/script/lexer.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
The lexical analyzer for SassScript. It takes a raw string and converts it
to individual tokens that are easier to parse.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000324">_variable</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000314">after_interpolation?</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000313">done?</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000315">expected!</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000326">ident</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000306">new</a>,</li>
                
                <li><a href="#M000307">next</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000310">peek</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000317">read_token</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000316">str</a>,</li>
                
                <li><a href="#M000327">string</a>,</li>
                
                <li><a href="#M000305">string_re</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000320">token</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000311">unpeek!</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M000323">variable</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000319">whitespace</a>,</li>
                
                <li><a href="#M000309">whitespace?</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../../Less/StyleSheet/Entity/Alpha1.html">Less::StyleSheet::Entity::Alpha1</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">Token</td>
            <td>=</td>
            <td class="attr-value">Struct.new(:type, :value, :line, :offset, :pos)</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A struct containing information about an individual token.
</p>
<p>
`type`: [`Symbol`] : The type of token.
</p>
<p>
`value`: [`Object`] : The Ruby object corresponding to the value of the
token.
</p>
<p>
`line`: [`Fixnum`] : The line of the source file on which the token
appears.
</p>
<p>
`offset`: [`Fixnum`] : The number of bytes into the line the SassScript
token appeared.
</p>
<p>
`pos`: [`Fixnum`] : The scanner position at which the SassScript token
appeared.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">OPERATORS</td>
            <td>=</td>
            <td class="attr-value">{         '+' =&gt; :plus,         '-' =&gt; :minus,         '*' =&gt; :times,         '/' =&gt; :div,         '%' =&gt; :mod,         '=' =&gt; :single_eq,         ':' =&gt; :colon,         '(' =&gt; :lparen,         ')' =&gt; :rparen,         ',' =&gt; :comma,         'and' =&gt; :and,         'or' =&gt; :or,         'not' =&gt; :not,         '==' =&gt; :eq,         '!=' =&gt; :neq,         '&gt;=' =&gt; :gte,         '&lt;=' =&gt; :lte,         '&gt;' =&gt; :gt,         '&lt;' =&gt; :lt,         '#{' =&gt; :begin_interpolation,         '}' =&gt; :end_interpolation,         ';' =&gt; :semicolon,         '{' =&gt; :lcurly,       }</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A hash from operator strings to the corresponding token types.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">OPERATORS_REVERSE</td>
            <td>=</td>
            <td class="attr-value">Sass::Util.map_hash(OPERATORS) {|k, v| [v, k]}</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">TOKEN_NAMES</td>
            <td>=</td>
            <td class="attr-value">Sass::Util.map_hash(OPERATORS_REVERSE) {|k, v| [k, v.inspect]}.merge({           :const =&gt; &quot;variable (e.g. $foo)&quot;,           :ident =&gt; &quot;identifier (e.g. middle)&quot;,           :bool =&gt; &quot;boolean (e.g. true, false)&quot;,         })</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">OP_NAMES</td>
            <td>=</td>
            <td class="attr-value">OPERATORS.keys.sort_by {|o| -o.size}</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A list of operator strings ordered with longer names first so that `>` and
`<` don&#8217;t clobber `>=` and `<=`.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IDENT_OP_NAMES</td>
            <td>=</td>
            <td class="attr-value">OP_NAMES.select {|k, v| k =~ /^\w+/}</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A sub-list of {<a href="Lexer.html#OP_NAMES">OP_NAMES</a>} that only
includes operators with identifier names.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">REGULAR_EXPRESSIONS</td>
            <td>=</td>
            <td class="attr-value">{         :whitespace =&gt; /\s+/,         :comment =&gt; COMMENT,         :single_line_comment =&gt; SINGLE_LINE_COMMENT,         :variable =&gt; /(\$)(#{IDENT})/,         :ident =&gt; /(#{IDENT})(\()?/,         :number =&gt; /(-)?(?:(\d*\.\d+)|(\d+))([a-zA-Z%]+)?/,         :color =&gt; HEXCOLOR,         :bool =&gt; /(true|false)\b/,         :ident_op =&gt; %r{(#{Regexp.union(*IDENT_OP_NAMES.map{|s| Regexp.new(Regexp.escape(s) + &quot;(?!#{NMCHAR}|\Z)&quot;)})})},         :op =&gt; %r{(#{Regexp.union(*OP_NAMES)})},       }</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A hash of regular expressions that are used for tokenizing.
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">STRING_REGULAR_EXPRESSIONS</td>
            <td>=</td>
            <td class="attr-value">{         [:double, false] =&gt; string_re('&quot;', '&quot;'),         [:single, false] =&gt; string_re(&quot;'&quot;, &quot;'&quot;),         [:double, true] =&gt; string_re('', '&quot;'),         [:single, true] =&gt; string_re('', &quot;'&quot;),         [:uri, false] =&gt; /url\(#{W}(#{URLCHAR}*?)(#{W}\)|#\{)/,         [:uri, true] =&gt; /(#{URLCHAR}*?)(#{W}\)|#\{)/,       }</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
A hash of regular expressions that are used for tokenizing strings.
</p>
<p>
The key is a `[Symbol, Boolean]` pair. The symbol represents which style of
quotation to use, while the boolean represents whether or not the string is
following an interpolated segment.
</p>
</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>line</td>
            <td class='attr-desc'><p>
The line number of the lexer&#8217;s current position.
</p>
<p>
@return [Fixnum]
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>offset</td>
            <td class='attr-desc'><p>
The number of bytes into the current line of the lexer&#8217;s current
position.
</p>
<p>
@return [Fixnum]
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000306">
                    
                    <a name="M000306"></a><b>new</b>(str, line, offset, options)
                    
                </div>
                
                <div class="description">
                  <p>
@param str [<a href="String.html">String</a>, StringScanner] The source
text to lex @param line [Fixnum] The line on which the SassScript appears.
</p>
<pre>
  Used for error reporting
</pre>
<p>
@param offset [Fixnum] The number of characters in on which the SassScript
appears.
</p>
<pre>
  Used for error reporting
</pre>
<p>
@param options [{Symbol => Object}] An options hash;
</p>
<pre>
  see {file:SASS_REFERENCE.md#sass_options the Sass options documentation}
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000306_source')" id="l_M000306_source">show</a>
                        
                    </p>
                    <div id="M000306_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 126</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">options</span>)
127:         <span class="ruby-ivar">@scanner</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">StringScanner</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span><span class="ruby-operator">::</span><span class="ruby-constant">MultibyteStringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>)
128:         <span class="ruby-ivar">@line</span> = <span class="ruby-identifier">line</span>
129:         <span class="ruby-ivar">@offset</span> = <span class="ruby-identifier">offset</span>
130:         <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
131:         <span class="ruby-ivar">@interpolation_stack</span> = []
132:         <span class="ruby-ivar">@prev</span> = <span class="ruby-keyword kw">nil</span>
133:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Private methods</div>
            
            <div class="method">
                <div class="title" id="M000305">
                    
                    <a name="M000305"></a><b>string_re</b>(open, close)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000305_source')" id="l_M000305_source">show</a>
                        
                    </p>
                    <div id="M000305_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 99</span>
 99:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">string_re</span>(<span class="ruby-identifier">open</span>, <span class="ruby-identifier">close</span>)
100:           <span class="ruby-node">/#{open}((?:\\.|\#(?!\{)|[^#{close}\\#])*)(#{close}|#\{)/</span>
101:         <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000314">
                    
                    <a name="M000314"></a><b>after_interpolation?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
@return [Boolean] Whether or not the last token lexed was
`:end_interpolation`.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000314_source')" id="l_M000314_source">show</a>
                        
                    </p>
                    <div id="M000314_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 177</span>
177:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_interpolation?</span>
178:         <span class="ruby-ivar">@prev</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@prev</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:end_interpolation</span>
179:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000313">
                    
                    <a name="M000313"></a><b>done?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
@return [Boolean] Whether or not there&#8217;s more source text to lex.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000313_source')" id="l_M000313_source">show</a>
                        
                    </p>
                    <div id="M000313_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 171</span>
171:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">done?</span>
172:         <span class="ruby-identifier">whitespace</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">after_interpolation?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@interpolation_stack</span>.<span class="ruby-identifier">last</span>
173:         <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">eos?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@tok</span>.<span class="ruby-identifier">nil?</span>
174:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000315">
                    
                    <a name="M000315"></a><b>expected!</b>(name)
                    
                </div>
                
                <div class="description">
                  <p>
Raise an error to the effect that `name` was expected in the input stream
and wasn&#8217;t found.
</p>
<p>
This calls {#unpeek!} to rewind the scanner to immediately after the last
returned token.
</p>
<p>
@param name [String] The name of the entity that was expected but not found
@raise [Sass::SyntaxError]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000315_source')" id="l_M000315_source">show</a>
                        
                    </p>
                    <div id="M000315_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 189</span>
189:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expected!</span>(<span class="ruby-identifier">name</span>)
190:         <span class="ruby-identifier">unpeek!</span>
191:         <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">expected</span>(<span class="ruby-ivar">@scanner</span>, <span class="ruby-identifier">name</span>, <span class="ruby-ivar">@line</span>)
192:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000307">
                    
                    <a name="M000307"></a><b>next</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Moves the lexer forward one token.
</p>
<p>
@return [Token] The token that was moved past
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000307_source')" id="l_M000307_source">show</a>
                        
                    </p>
                    <div id="M000307_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 138</span>
138:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">next</span>
139:         <span class="ruby-ivar">@tok</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">read_token</span>
140:         <span class="ruby-ivar">@tok</span>, <span class="ruby-identifier">tok</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@tok</span>
141:         <span class="ruby-ivar">@prev</span> = <span class="ruby-identifier">tok</span>
142:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">tok</span>
143:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000310">
                    
                    <a name="M000310"></a><b>peek</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the next token without moving the lexer forward.
</p>
<p>
@return [Token] The next token
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000310_source')" id="l_M000310_source">show</a>
                        
                    </p>
                    <div id="M000310_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 160</span>
160:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peek</span>
161:         <span class="ruby-ivar">@tok</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">read_token</span>
162:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000316">
                    
                    <a name="M000316"></a><b>str</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Records all non-comment text the lexer consumes within the block and
returns it as a string.
</p>
<p>
@yield A block in which text is recorded @return [String]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000316_source')" id="l_M000316_source">show</a>
                        
                    </p>
                    <div id="M000316_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 199</span>
199:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">str</span>
200:         <span class="ruby-identifier">old_pos</span> = <span class="ruby-ivar">@tok</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@tok</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">pos</span>
201:         <span class="ruby-keyword kw">yield</span>
202:         <span class="ruby-identifier">new_pos</span> = <span class="ruby-ivar">@tok</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@tok</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">pos</span>
203:         <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">string</span>[<span class="ruby-identifier">old_pos</span><span class="ruby-operator">...</span><span class="ruby-identifier">new_pos</span>]
204:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000311">
                    
                    <a name="M000311"></a><b>unpeek!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Rewinds the underlying StringScanner to before the token returned by
{#peek}.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000311_source')" id="l_M000311_source">show</a>
                        
                    </p>
                    <div id="M000311_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 166</span>
166:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unpeek!</span>
167:         <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-ivar">@tok</span>.<span class="ruby-identifier">pos</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@tok</span>
168:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000309">
                    
                    <a name="M000309"></a><b>whitespace?</b>(tok = @tok)
                    
                </div>
                
                <div class="description">
                  <p>
Returns whether or not there&#8217;s whitespace before the next token.
</p>
<p>
@return [Boolean]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000309_source')" id="l_M000309_source">show</a>
                        
                    </p>
                    <div id="M000309_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 148</span>
148:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">whitespace?</span>(<span class="ruby-identifier">tok</span> = <span class="ruby-ivar">@tok</span>)
149:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tok</span>
150:           <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">string</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">tok</span>.<span class="ruby-identifier">pos</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s\Z/</span>
151:         <span class="ruby-keyword kw">else</span>
152:           <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">string</span>[<span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">pos</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s/</span> <span class="ruby-operator">||</span>
153:             <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">string</span>[<span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s\Z/</span>
154:         <span class="ruby-keyword kw">end</span>
155:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000324">
                    
                    <a name="M000324"></a><b>_variable</b>(rx)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000324_source')" id="l_M000324_source">show</a>
                        
                    </p>
                    <div id="M000324_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 239</span>
239:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_variable</span>(<span class="ruby-identifier">rx</span>)
240:         <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@line</span>
241:         <span class="ruby-identifier">offset</span> = <span class="ruby-ivar">@offset</span>
242:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">scan</span>(<span class="ruby-identifier">rx</span>)
243: 
244:         [<span class="ruby-identifier">:const</span>, <span class="ruby-ivar">@scanner</span>[<span class="ruby-value">2</span>]]
245:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000326">
                    
                    <a name="M000326"></a><b>ident</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000326_source')" id="l_M000326_source">show</a>
                        
                    </p>
                    <div id="M000326_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 247</span>
247:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ident</span>
248:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">scan</span>(<span class="ruby-constant">REGULAR_EXPRESSIONS</span>[<span class="ruby-identifier">:ident</span>])
249:         [<span class="ruby-ivar">@scanner</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">:funcall</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:ident</span>, <span class="ruby-ivar">@scanner</span>[<span class="ruby-value">1</span>]]
250:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000317">
                    
                    <a name="M000317"></a><b>read_token</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000317_source')" id="l_M000317_source">show</a>
                        
                    </p>
                    <div id="M000317_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 208</span>
208:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_token</span>
209:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">done?</span>
210:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">value</span> = <span class="ruby-identifier">token</span>
211:         <span class="ruby-identifier">type</span>, <span class="ruby-identifier">val</span>, <span class="ruby-identifier">size</span> = <span class="ruby-identifier">value</span>
212:         <span class="ruby-identifier">size</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">matched_size</span>
213: 
214:         <span class="ruby-identifier">val</span>.<span class="ruby-identifier">line</span> = <span class="ruby-ivar">@line</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>)
215:         <span class="ruby-constant">Token</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">val</span>, <span class="ruby-ivar">@line</span>,
216:           <span class="ruby-identifier">current_position</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">size</span>, <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">size</span>)
217:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000327">
                    
                    <a name="M000327"></a><b>string</b>(re, open)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000327_source')" id="l_M000327_source">show</a>
                        
                    </p>
                    <div id="M000327_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 252</span>
252:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">string</span>(<span class="ruby-identifier">re</span>, <span class="ruby-identifier">open</span>)
253:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">scan</span>(<span class="ruby-constant">STRING_REGULAR_EXPRESSIONS</span>[[<span class="ruby-identifier">re</span>, <span class="ruby-identifier">open</span>]])
254:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'#{'</span> <span class="ruby-comment cmt">#'</span>
255:           <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">-=</span> <span class="ruby-value">2</span> <span class="ruby-comment cmt"># Don't actually consume the #{</span>
256:           <span class="ruby-ivar">@interpolation_stack</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">re</span>
257:         <span class="ruby-keyword kw">end</span>
258:         <span class="ruby-identifier">str</span> =
259:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">re</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:uri</span>
260:             <span class="ruby-constant">Script</span><span class="ruby-operator">::</span><span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{'url(' unless open}#{@scanner[1]}#{')' unless @scanner[2] == '#{'}&quot;)
261:           else
262:             Script::String.new(@scanner[1].gsub(/\\(['&quot;]|\#\{)/, '\1'), :string)
263:           end
264:         [:string, str]
265:       end
266: 
267:       def number
268:         return unless scan(REGULAR_EXPRESSIONS[:number])
269:         value = @scanner[2] ? @scanner[2].to_f : @scanner[3].to_i
270:         value = -value if @scanner[1]
271:         [:number, Script::Number.new(value, Array(@scanner[4]))]
272:       end
273: 
274:       def color
275:         return unless s = scan(REGULAR_EXPRESSIONS[:color])
276:         raise Sass::SyntaxError.new(&lt;&lt;MESSAGE.rstrip) unless s.size == 4 || s.size == 7
277: Colors must have either three or six digits: '#{s}'
278: MESSAGE
279:         value = s.scan(/^#(..?)(..?)(..?)$/).first.
280:           map {|num| num.ljust(2, num).to_i(16)}
281:         [:color, Script::Color.new(value)]
282:       end
283: 
284:       def bool
285:         return unless s = scan(REGULAR_EXPRESSIONS[:bool])
286:         [:bool, Script::Bool.new(s == 'true')]
287:       end
288: 
289:       def special_fun
290:         return unless str1 = scan(/((-[\w-]+-)?calc|expression|progid:[a-z\.]*)\(/i)
291:         str2, _ = Sass::Shared.balance(@scanner, ?(, ?), 1)
292:         c = str2.count(&quot;\n&quot;)
293:         old_line = @line
294:         old_offset = @offset
295:         @line += c
296:         @offset = (c == 0 ? @offset + str2.size : str2[/\n(.*)/, 1].size)
297:         [:special_fun,
298:           Sass::Util.merge_adjacent_strings(
299:             [str1] + Sass::Engine.parse_interp(str2, old_line, old_offset, @options)),
300:           str1.size + str2.size]
301:       end
302: 
303:       def special_val
304:         return unless scan(/!important/i)
305:         [:string, Script::String.new(&quot;!important&quot;)]
306:       end
307: 
308:       def ident_op
309:         return unless op = scan(REGULAR_EXPRESSIONS[:ident_op])
310:         [OPERATORS[op]]
311:       end
312: 
313:       def op
314:         return unless op = scan(REGULAR_EXPRESSIONS[:op])
315:         @interpolation_stack &lt;&lt; nil if op == :begin_interpolation
316:         [OPERATORS[op]]
317:       end
318: 
319:       def raw(rx)
320:         return unless val = scan(rx)
321:         [:raw, val]
322:       end
323: 
324:       def scan(re)
325:         return unless str = @scanner.scan(re)
326:         c = str.count(&quot;\n&quot;)
327:         @line += c
328:         @offset = (c == 0 ? @offset + str.size : str[/\n(.*)/, 1].size)
329:         str
330:       end
331: 
332:       def current_position
333:         @offset + 1
334:       end
335:     end
336:   end
337: end
338: </span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000320">
                    
                    <a name="M000320"></a><b>token</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000320_source')" id="l_M000320_source">show</a>
                        
                    </p>
                    <div id="M000320_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 225</span>
225:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">token</span>
226:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">after_interpolation?</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">interp_type</span> = <span class="ruby-ivar">@interpolation_stack</span>.<span class="ruby-identifier">pop</span>)
227:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">string</span>(<span class="ruby-identifier">interp_type</span>, <span class="ruby-keyword kw">true</span>)
228:         <span class="ruby-keyword kw">end</span>
229: 
230:         <span class="ruby-identifier">variable</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">string</span>(<span class="ruby-identifier">:double</span>, <span class="ruby-keyword kw">false</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">string</span>(<span class="ruby-identifier">:single</span>, <span class="ruby-keyword kw">false</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">number</span> <span class="ruby-operator">||</span>
231:           <span class="ruby-identifier">color</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">bool</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">string</span>(<span class="ruby-identifier">:uri</span>, <span class="ruby-keyword kw">false</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">raw</span>(<span class="ruby-constant">UNICODERANGE</span>) <span class="ruby-operator">||</span>
232:           <span class="ruby-identifier">special_fun</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">special_val</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">ident_op</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">ident</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">op</span>
233:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000323">
                    
                    <a name="M000323"></a><b>variable</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000323_source')" id="l_M000323_source">show</a>
                        
                    </p>
                    <div id="M000323_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 235</span>
235:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">variable</span>
236:         <span class="ruby-identifier">_variable</span>(<span class="ruby-constant">REGULAR_EXPRESSIONS</span>[<span class="ruby-identifier">:variable</span>])
237:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000319">
                    
                    <a name="M000319"></a><b>whitespace</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000319_source')" id="l_M000319_source">show</a>
                        
                    </p>
                    <div id="M000319_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/sass/script/lexer.rb, line 219</span>
219:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">whitespace</span>
220:         <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">scan</span>(<span class="ruby-constant">REGULAR_EXPRESSIONS</span>[<span class="ruby-identifier">:whitespace</span>]) <span class="ruby-operator">||</span>
221:           <span class="ruby-identifier">scan</span>(<span class="ruby-constant">REGULAR_EXPRESSIONS</span>[<span class="ruby-identifier">:comment</span>]) <span class="ruby-operator">||</span>
222:           <span class="ruby-identifier">scan</span>(<span class="ruby-constant">REGULAR_EXPRESSIONS</span>[<span class="ruby-identifier">:single_line_comment</span>])
223:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    