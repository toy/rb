<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>IPAddr</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            IPAddr 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/ipaddr_rb.html">lib/ipaddr.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="IPAddr.html">IPAddr</a> provides a set of methods to manipulate an
IP address. Both IPv4 and IPv6 are supported.
</p>
<h2>Example</h2>
<pre>
  require 'ipaddr'

  ipaddr1 = IPAddr.new &quot;3ffe:505:2::1&quot;

  p ipaddr1                   #=&gt; #&lt;IPAddr: IPv6:3ffe:0505:0002:0000:0000:0000:0000:0001/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&gt;

  p ipaddr1.to_s              #=&gt; &quot;3ffe:505:2::1&quot;

  ipaddr2 = ipaddr1.mask(48)  #=&gt; #&lt;IPAddr: IPv6:3ffe:0505:0002:0000:0000:0000:0000:0000/ffff:ffff:ffff:0000:0000:0000:0000:0000&gt;

  p ipaddr2.to_s              #=&gt; &quot;3ffe:505:2::&quot;

  ipaddr3 = IPAddr.new &quot;192.168.2.0/24&quot;

  p ipaddr3                   #=&gt; #&lt;IPAddr: IPv4:192.168.2.0/255.255.255.0&gt;
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M002289">&</a>,</li>
                
                <li><a href="#M002292"><<</a>,</li>
                
                <li><a href="#M002316"><=></a>,</li>
                
                <li><a href="#M002294">==</a>,</li>
                
                <li><a href="#M002297">===</a>,</li>
                
                <li><a href="#M002291">>></a>,</li>
                
                <li><a href="#M002331">_reverse</a>,</li>
                
                <li><a href="#M002333">_to_string</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M002330">addr_mask</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M002325">coerce_other</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M002317">eql?</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M002318">hash</a>,</li>
                
                <li><a href="#M002303">hton</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M002327">in6_addr</a>,</li>
                
                <li><a href="#M002326">in_addr</a>,</li>
                
                <li><a href="#M002296">include?</a>,</li>
                
                <li><a href="#M002320">inspect</a>,</li>
                
                <li><a href="#M002312">ip6_arpa</a>,</li>
                
                <li><a href="#M002314">ip6_int</a>,</li>
                
                <li><a href="#M002304">ipv4?</a>,</li>
                
                <li><a href="#M002309">ipv4_compat</a>,</li>
                
                <li><a href="#M002307">ipv4_compat?</a>,</li>
                
                <li><a href="#M002308">ipv4_mapped</a>,</li>
                
                <li><a href="#M002306">ipv4_mapped?</a>,</li>
                
                <li><a href="#M002305">ipv6?</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M002295">mask</a>,</li>
                
                <li><a href="#M002322">mask!</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M002310">native</a>,</li>
                
                <li><a href="#M002324">new</a>,</li>
                
                <li><a href="#M002287">new_ntoh</a>,</li>
                
                <li><a href="#M002288">ntop</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M002311">reverse</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M002321">set</a>,</li>
                
                <li><a href="#M002315">succ</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M002298">to_i</a>,</li>
                
                <li><a href="#M002319">to_range</a>,</li>
                
                <li><a href="#M002299">to_s</a>,</li>
                
                <li><a href="#M002302">to_string</a></li>
                
            </ul>
        </dd>
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M002290">|</a>,</li>
                
                <li><a href="#M002293">~</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="JSON.html">JSON</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">IN4MASK</td>
            <td>=</td>
            <td class="attr-value">0xffffffff</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
32 bit mask for IPv4
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IN6MASK</td>
            <td>=</td>
            <td class="attr-value">0xffffffffffffffffffffffffffffffff</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
128 bit mask for IPv4
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">IN6FORMAT</td>
            <td>=</td>
            <td class="attr-value">([&quot;%.4x&quot;] * 8).join(':')</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
Formatstring for IPv6
</p>
</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>family</td>
            <td class='attr-desc'><p>
Returns the address family of this IP address.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M002324">
                    
                    <a name="M002324"></a><b>new</b>(addr = '::', family = Socket::AF_UNSPEC)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new ipaddr object either from a human readable IP address
representation in string, or from a packed <a
href="IPAddr.html#M002326">in_addr</a> value followed by an address family.
</p>
<p>
In the former case, the following are the valid formats that will be
recognized: &#8220;address&#8221;, &#8220;address/prefixlen&#8220; and
&#8220;address/mask&#8220;, where IPv6 address may be enclosed in square
brackets (`[&#8217; and `]&#8217;). If a prefixlen or a mask is specified,
it returns a masked IP address. Although the address family is determined
automatically from a specified string, you can specify one explicitly by
the optional second argument.
</p>
<p>
Otherwise an IP address is generated from a packed <a
href="IPAddr.html#M002326">in_addr</a> value and an address family.
</p>
<p>
The <a href="IPAddr.html">IPAddr</a> class defines many methods and
operators, and some of those, such as &amp;, |, include? and ==, accept a
string, or a packed <a href="IPAddr.html#M002326">in_addr</a> value instead
of an <a href="IPAddr.html">IPAddr</a> object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002324_source')" id="l_M002324_source">show</a>
                        
                    </p>
                    <div id="M002324_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 472</span>
472:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">addr</span> = <span class="ruby-value str">'::'</span>, <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span>)
473:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">addr</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
474:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">family</span>
475:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
476:         <span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">family</span>)
477:         <span class="ruby-ivar">@mask_addr</span> = (<span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">:</span> <span class="ruby-constant">IN6MASK</span>
478:         <span class="ruby-keyword kw">return</span>
479:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span>
480:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family must be specified&quot;</span>
481:       <span class="ruby-keyword kw">else</span>
482:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unsupported address family: #{family}&quot;</span>
483:       <span class="ruby-keyword kw">end</span>
484:     <span class="ruby-keyword kw">end</span>
485:     <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>)
486:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\[(.*)\]$/i</span>
487:       <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">$1</span>
488:       <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
489:     <span class="ruby-keyword kw">end</span>
490:     <span class="ruby-comment cmt"># It seems AI_NUMERICHOST doesn't do the job.</span>
491:     <span class="ruby-comment cmt">#Socket.getaddrinfo(left, nil, Socket::AF_INET6, Socket::SOCK_STREAM, nil,</span>
492:     <span class="ruby-comment cmt">#                  Socket::AI_NUMERICHOST)</span>
493:     <span class="ruby-keyword kw">begin</span>
494:       <span class="ruby-constant">IPSocket</span>.<span class="ruby-identifier">getaddress</span>(<span class="ruby-identifier">prefix</span>)               <span class="ruby-comment cmt"># test if address is valid</span>
495:     <span class="ruby-keyword kw">rescue</span>
496:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
497:     <span class="ruby-keyword kw">end</span>
498:     <span class="ruby-ivar">@addr</span> = <span class="ruby-ivar">@family</span> = <span class="ruby-keyword kw">nil</span>
499:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
500:       <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">prefix</span>)
501:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@addr</span>
502:         <span class="ruby-ivar">@family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
503:       <span class="ruby-keyword kw">end</span>
504:     <span class="ruby-keyword kw">end</span>
505:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
506:       <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">in6_addr</span>(<span class="ruby-identifier">prefix</span>)
507:       <span class="ruby-ivar">@family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
508:     <span class="ruby-keyword kw">end</span>
509:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_UNSPEC</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">family</span>
510:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family mismatch&quot;</span>
511:     <span class="ruby-keyword kw">end</span>
512:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span>
513:       <span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">prefixlen</span>)
514:     <span class="ruby-keyword kw">else</span>
515:       <span class="ruby-ivar">@mask_addr</span> = (<span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">:</span> <span class="ruby-constant">IN6MASK</span>
516:     <span class="ruby-keyword kw">end</span>
517:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002287">
                    
                    <a name="M002287"></a><b>new_ntoh</b>(addr)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new ipaddr containing the given network byte ordered string form
of an IP address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002287_source')" id="l_M002287_source">show</a>
                        
                    </p>
                    <div id="M002287_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 110</span>
110:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">new_ntoh</span>(<span class="ruby-identifier">addr</span>)
111:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">IPAddr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">ntop</span>(<span class="ruby-identifier">addr</span>))
112:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002288">
                    
                    <a name="M002288"></a><b>ntop</b>(addr)
                    
                </div>
                
                <div class="description">
                  <p>
Convert a network byte ordered string form of an IP address into human
readable form.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002288_source')" id="l_M002288_source">show</a>
                        
                    </p>
                    <div id="M002288_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">IPAddr</span><span class="ruby-operator">::</span><span class="ruby-identifier">ntop</span>(<span class="ruby-identifier">addr</span>)
117:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">size</span>
118:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">4</span>
119:       <span class="ruby-identifier">s</span> = <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">'C4'</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
120:     <span class="ruby-keyword kw">when</span> <span class="ruby-value">16</span>
121:       <span class="ruby-identifier">s</span> = <span class="ruby-constant">IN6FORMAT</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">'n8'</span>)
122:     <span class="ruby-keyword kw">else</span>
123:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;unsupported address family&quot;</span>
124:     <span class="ruby-keyword kw">end</span>
125:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">s</span>
126:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M002289">
                    
                    <a name="M002289"></a><b>&amp;</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise AND.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002289_source')" id="l_M002289_source">show</a>
                        
                    </p>
                    <div id="M002289_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 129</span>
129:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&amp;</span>(<span class="ruby-identifier">other</span>)
130:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>).<span class="ruby-identifier">to_i</span>)
131:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002292">
                    
                    <a name="M002292"></a><b>&lt;&lt;</b>(num)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise left shift.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002292_source')" id="l_M002292_source">show</a>
                        
                    </p>
                    <div id="M002292_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 144</span>
144:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">num</span>)
145:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr_mask</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">num</span>))
146:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002316">
                    
                    <a name="M002316"></a><b>&lt;=&gt;</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Compares the ipaddr with another.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002316_source')" id="l_M002316_source">show</a>
                        
                    </p>
                    <div id="M002316_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 340</span>
340:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;=&gt;</span>(<span class="ruby-identifier">other</span>)
341:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
342: 
343:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@family</span>
344: 
345:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@addr</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
346:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002294">
                    
                    <a name="M002294"></a><b>==</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if two ipaddrs are equal.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002294_source')" id="l_M002294_source">show</a>
                        
                    </p>
                    <div id="M002294_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 154</span>
154:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
155:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
156:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@addr</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
157:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002297">
                    
                    <a name="M002297"></a><b>===</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="IPAddr.html#M002296">include?</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M002291">
                    
                    <a name="M002291"></a><b>&gt;&gt;</b>(num)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise right-shift.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002291_source')" id="l_M002291_source">show</a>
                        
                    </p>
                    <div id="M002291_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&gt;&gt;</span>(<span class="ruby-identifier">num</span>)
140:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">num</span>)
141:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002317">
                    
                    <a name="M002317"></a><b>eql?</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Checks equality used by <a href="Hash.html">Hash</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002317_source')" id="l_M002317_source">show</a>
                        
                    </p>
                    <div id="M002317_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 350</span>
350:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>)
351:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">hash</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">hash</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
352:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002318">
                    
                    <a name="M002318"></a><b>hash</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a hash value used by <a href="Hash.html">Hash</a>, <a
href="Set.html">Set</a>, and <a href="Array.html">Array</a> classes
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002318_source')" id="l_M002318_source">show</a>
                        
                    </p>
                    <div id="M002318_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 355</span>
355:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
356:     <span class="ruby-keyword kw">return</span> ([<span class="ruby-ivar">@addr</span>, <span class="ruby-ivar">@mask_addr</span>].<span class="ruby-identifier">hash</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">1</span>) <span class="ruby-operator">|</span> (<span class="ruby-identifier">ipv4?</span> <span class="ruby-value">? </span><span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>)
357:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002303">
                    
                    <a name="M002303"></a><b>hton</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a network byte ordered string form of the IP address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002303_source')" id="l_M002303_source">show</a>
                        
                    </p>
                    <div id="M002303_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 240</span>
240:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hton</span>
241:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
242:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
243:       <span class="ruby-keyword kw">return</span> [<span class="ruby-ivar">@addr</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-value str">'N'</span>)
244:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
245:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">7</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
246:         (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">112</span> <span class="ruby-operator">-</span> <span class="ruby-value">16</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffff</span>
247:       }.<span class="ruby-identifier">pack</span>(<span class="ruby-value str">'n8'</span>)
248:     <span class="ruby-keyword kw">else</span>
249:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
250:     <span class="ruby-keyword kw">end</span>
251:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002296">
                    
                    <a name="M002296"></a><b>include?</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the given ipaddr is in the range.
</p>
<p>
e.g.:
</p>
<pre>
  require 'ipaddr'
  net1 = IPAddr.new(&quot;192.168.2.0/24&quot;)
  net2 = IPAddr.new(&quot;192.168.2.100&quot;)
  net3 = IPAddr.new(&quot;192.168.3.0&quot;)
  p net1.include?(net2)     #=&gt; true
  p net1.include?(net3)     #=&gt; false
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="IPAddr.html#M002297">===</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002296_source')" id="l_M002296_source">show</a>
                        
                    </p>
                    <div id="M002296_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 174</span>
174:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">other</span>)
175:     <span class="ruby-identifier">other</span> = <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
176:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ipv4_mapped?</span>
177:       <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@mask_addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0xffffffffffffffffffffffff</span>
178:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
179:       <span class="ruby-keyword kw">end</span>
180:       <span class="ruby-identifier">mask_addr</span> = (<span class="ruby-ivar">@mask_addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
181:       <span class="ruby-identifier">addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
182:       <span class="ruby-identifier">family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
183:     <span class="ruby-keyword kw">else</span>
184:       <span class="ruby-identifier">mask_addr</span> = <span class="ruby-ivar">@mask_addr</span>
185:       <span class="ruby-identifier">addr</span> = <span class="ruby-ivar">@addr</span>
186:       <span class="ruby-identifier">family</span> = <span class="ruby-ivar">@family</span>
187:     <span class="ruby-keyword kw">end</span>
188:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">ipv4_mapped?</span>
189:       <span class="ruby-identifier">other_addr</span> = (<span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
190:       <span class="ruby-identifier">other_family</span> = <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
191:     <span class="ruby-keyword kw">else</span>
192:       <span class="ruby-identifier">other_addr</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_i</span>
193:       <span class="ruby-identifier">other_family</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">family</span>
194:     <span class="ruby-keyword kw">end</span>
195: 
196:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">other_family</span>
197:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
198:     <span class="ruby-keyword kw">end</span>
199:     <span class="ruby-keyword kw">return</span> ((<span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">mask_addr</span>) <span class="ruby-operator">==</span> (<span class="ruby-identifier">other_addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">mask_addr</span>))
200:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002320">
                    
                    <a name="M002320"></a><b>inspect</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing a human-readable representation of the ipaddr.
(&#8220;#<IPAddr: family:address/mask>&#8221;)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002320_source')" id="l_M002320_source">show</a>
                        
                    </p>
                    <div id="M002320_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 377</span>
377:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
378:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
379:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
380:       <span class="ruby-identifier">af</span> = <span class="ruby-value str">&quot;IPv4&quot;</span>
381:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
382:       <span class="ruby-identifier">af</span> = <span class="ruby-value str">&quot;IPv6&quot;</span>
383:     <span class="ruby-keyword kw">else</span>
384:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
385:     <span class="ruby-keyword kw">end</span>
386:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;#&lt;%s: %s:%s/%s&gt;&quot;</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>,
387:                    <span class="ruby-identifier">af</span>, <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@addr</span>), <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@mask_addr</span>))
388:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002312">
                    
                    <a name="M002312"></a><b>ip6_arpa</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup compatible with RFC3172.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002312_source')" id="l_M002312_source">show</a>
                        
                    </p>
                    <div id="M002312_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 319</span>
319:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip6_arpa</span>
320:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span>
321:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv6 address&quot;</span>
322:     <span class="ruby-keyword kw">end</span>
323:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.ip6.arpa&quot;</span>
324:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002314">
                    
                    <a name="M002314"></a><b>ip6_int</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup compatible with RFC1886.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002314_source')" id="l_M002314_source">show</a>
                        
                    </p>
                    <div id="M002314_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 327</span>
327:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ip6_int</span>
328:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span>
329:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv6 address&quot;</span>
330:     <span class="ruby-keyword kw">end</span>
331:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.ip6.int&quot;</span>
332:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002304">
                    
                    <a name="M002304"></a><b>ipv4?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002304_source')" id="l_M002304_source">show</a>
                        
                    </p>
                    <div id="M002304_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 254</span>
254:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4?</span>
255:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
256:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002309">
                    
                    <a name="M002309"></a><b>ipv4_compat</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the native IPv4 address into an
IPv4-compatible IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002309_source')" id="l_M002309_source">show</a>
                        
                    </p>
                    <div id="M002309_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 288</span>
288:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_compat</span>
289:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4?</span>
290:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv4 address&quot;</span>
291:     <span class="ruby-keyword kw">end</span>
292:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
293:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002307">
                    
                    <a name="M002307"></a><b>ipv4_compat?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4-compatible IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002307_source')" id="l_M002307_source">show</a>
                        
                    </p>
                    <div id="M002307_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 269</span>
269:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_compat?</span>
270:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv6?</span> <span class="ruby-operator">||</span> (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
271:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
272:     <span class="ruby-keyword kw">end</span>
273:     <span class="ruby-identifier">a</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>)
274:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">!=</span> <span class="ruby-value">1</span>
275:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002308">
                    
                    <a name="M002308"></a><b>ipv4_mapped</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the native IPv4 address into an
IPv4-mapped IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002308_source')" id="l_M002308_source">show</a>
                        
                    </p>
                    <div id="M002308_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 279</span>
279:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_mapped</span>
280:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4?</span>
281:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;not an IPv4 address&quot;</span>
282:     <span class="ruby-keyword kw">end</span>
283:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xffff00000000</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>)
284:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002306">
                    
                    <a name="M002306"></a><b>ipv4_mapped?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv4-mapped IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002306_source')" id="l_M002306_source">show</a>
                        
                    </p>
                    <div id="M002306_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 264</span>
264:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv4_mapped?</span>
265:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ipv6?</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">32</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0xffff</span>
266:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002305">
                    
                    <a name="M002305"></a><b>ipv6?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns true if the ipaddr is an IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002305_source')" id="l_M002305_source">show</a>
                        
                    </p>
                    <div id="M002305_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 259</span>
259:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipv6?</span>
260:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@family</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
261:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002295">
                    
                    <a name="M002295"></a><b>mask</b>(prefixlen)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by masking IP address with the given
prefixlen/netmask. (e.g. 8, 64, &#8220;255.255.255.0&#8220;, etc.)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002295_source')" id="l_M002295_source">show</a>
                        
                    </p>
                    <div id="M002295_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mask</span>(<span class="ruby-identifier">prefixlen</span>)
162:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">prefixlen</span>)
163:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002310">
                    
                    <a name="M002310"></a><b>native</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by converting the IPv6 address into a native
IPv4 address. If the IP address is not an IPv4-mapped or IPv4-compatible
IPv6 address, returns self.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002310_source')" id="l_M002310_source">show</a>
                        
                    </p>
                    <div id="M002310_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 298</span>
298:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">native</span>
299:     <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4_mapped?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ipv4_compat?</span>
300:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
301:     <span class="ruby-keyword kw">end</span>
302:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>)
303:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002311">
                    
                    <a name="M002311"></a><b>reverse</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string for DNS reverse lookup. It returns a string in RFC3172
form for an IPv6 address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002311_source')" id="l_M002311_source">show</a>
                        
                    </p>
                    <div id="M002311_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 307</span>
307:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reverse</span>
308:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
309:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
310:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_reverse</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.in-addr.arpa&quot;</span>
311:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
312:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ip6_arpa</span>
313:     <span class="ruby-keyword kw">else</span>
314:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
315:     <span class="ruby-keyword kw">end</span>
316:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002315">
                    
                    <a name="M002315"></a><b>succ</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the successor to the ipaddr.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002315_source')" id="l_M002315_source">show</a>
                        
                    </p>
                    <div id="M002315_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 335</span>
335:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">succ</span>
336:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@family</span>)
337:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002298">
                    
                    <a name="M002298"></a><b>to_i</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the integer representation of the ipaddr.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002298_source')" id="l_M002298_source">show</a>
                        
                    </p>
                    <div id="M002298_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 204</span>
204:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_i</span>
205:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@addr</span>
206:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002319">
                    
                    <a name="M002319"></a><b>to_range</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Creates a <a href="Range.html">Range</a> object for the network address.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002319_source')" id="l_M002319_source">show</a>
                        
                    </p>
                    <div id="M002319_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 360</span>
360:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_range</span>
361:     <span class="ruby-identifier">begin_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-ivar">@mask_addr</span>)
362: 
363:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
364:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
365:       <span class="ruby-identifier">end_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> (<span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">^</span> <span class="ruby-ivar">@mask_addr</span>))
366:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
367:       <span class="ruby-identifier">end_addr</span> = (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> (<span class="ruby-constant">IN6MASK</span> <span class="ruby-operator">^</span> <span class="ruby-ivar">@mask_addr</span>))
368:     <span class="ruby-keyword kw">else</span>
369:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
370:     <span class="ruby-keyword kw">end</span>
371: 
372:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">begin_addr</span>, <span class="ruby-ivar">@family</span>)<span class="ruby-operator">..</span><span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">end_addr</span>, <span class="ruby-ivar">@family</span>)
373:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002299">
                    
                    <a name="M002299"></a><b>to_s</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing the IP address representation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002299_source')" id="l_M002299_source">show</a>
                        
                    </p>
                    <div id="M002299_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 209</span>
209:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
210:     <span class="ruby-identifier">str</span> = <span class="ruby-identifier">to_string</span>
211:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">str</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ipv4?</span>
212: 
213:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\b0{1,3}([\da-f]+)\b/i</span>, <span class="ruby-value str">'\1'</span>)
214:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
215:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\A0:0:0:0:0:0:0:0\Z/</span>, <span class="ruby-value str">'::'</span>)
216:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
217:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
218:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
219:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
220:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0:0\b/</span>, <span class="ruby-value str">':'</span>)
221:       <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b0:0\b/</span>, <span class="ruby-value str">':'</span>)
222:       <span class="ruby-keyword kw">break</span>
223:     <span class="ruby-keyword kw">end</span>
224:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/:{3,}/</span>, <span class="ruby-value str">'::'</span>)
225: 
226:     <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A::(ffff:)?([\da-f]{1,4}):([\da-f]{1,4})\Z/i</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">str</span>
227:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'::%s%d.%d.%d.%d'</span>, <span class="ruby-identifier">$1</span>, <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">/</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">%</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">/</span> <span class="ruby-value">256</span>, <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">%</span> <span class="ruby-value">256</span>)
228:     <span class="ruby-keyword kw">end</span>
229: 
230:     <span class="ruby-identifier">str</span>
231:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002302">
                    
                    <a name="M002302"></a><b>to_string</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string containing the IP address representation in canonical
form.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002302_source')" id="l_M002302_source">show</a>
                        
                    </p>
                    <div id="M002302_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 235</span>
235:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_string</span>
236:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">_to_string</span>(<span class="ruby-ivar">@addr</span>)
237:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002290">
                    
                    <a name="M002290"></a><b>|</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise OR.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002290_source')" id="l_M002290_source">show</a>
                        
                    </p>
                    <div id="M002290_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">other</span>)
135:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-ivar">@addr</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>).<span class="ruby-identifier">to_i</span>)
136:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002293">
                    
                    <a name="M002293"></a><b>~</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new ipaddr built by bitwise negation.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002293_source')" id="l_M002293_source">show</a>
                        
                    </p>
                    <div id="M002293_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 149</span>
149:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">~</span>
150:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr_mask</span>(<span class="ruby-operator">~@</span><span class="ruby-identifier">addr</span>))
151:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M002322">
                    
                    <a name="M002322"></a><b>mask!</b>(mask)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="Set.html">Set</a> current netmask to given mask.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002322_source')" id="l_M002322_source">show</a>
                        
                    </p>
                    <div id="M002322_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 416</span>
416:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mask!</span>(<span class="ruby-identifier">mask</span>)
417:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mask</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>)
418:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mask</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span>
419:         <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">mask</span>.<span class="ruby-identifier">to_i</span>
420:       <span class="ruby-keyword kw">else</span>
421:         <span class="ruby-identifier">m</span> = <span class="ruby-constant">IPAddr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">mask</span>)
422:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">family</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@family</span>
423:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;address family is not same&quot;</span>
424:         <span class="ruby-keyword kw">end</span>
425:         <span class="ruby-ivar">@mask_addr</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_i</span>
426:         <span class="ruby-ivar">@addr</span> <span class="ruby-operator">&amp;=</span> <span class="ruby-ivar">@mask_addr</span>
427:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
428:       <span class="ruby-keyword kw">end</span>
429:     <span class="ruby-keyword kw">else</span>
430:       <span class="ruby-identifier">prefixlen</span> = <span class="ruby-identifier">mask</span>
431:     <span class="ruby-keyword kw">end</span>
432:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
433:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
434:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">32</span>
435:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid length&quot;</span>
436:       <span class="ruby-keyword kw">end</span>
437:       <span class="ruby-identifier">masklen</span> = <span class="ruby-value">32</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prefixlen</span>
438:       <span class="ruby-ivar">@mask_addr</span> = ((<span class="ruby-constant">IN4MASK</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
439:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
440:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefixlen</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">128</span>
441:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid length&quot;</span>
442:       <span class="ruby-keyword kw">end</span>
443:       <span class="ruby-identifier">masklen</span> = <span class="ruby-value">128</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prefixlen</span>
444:       <span class="ruby-ivar">@mask_addr</span> = ((<span class="ruby-constant">IN6MASK</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
445:     <span class="ruby-keyword kw">else</span>
446:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
447:     <span class="ruby-keyword kw">end</span>
448:     <span class="ruby-ivar">@addr</span> = ((<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">masklen</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">masklen</span>)
449:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
450:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002321">
                    
                    <a name="M002321"></a><b>set</b>(addr, *family)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="Set.html">Set</a> +@addr+, the internal stored ip address, to
given <tt>addr</tt>. The parameter <tt>addr</tt> is validated using the
first <tt>family</tt> member, which is +Socket::AF_INET+ or
+Socket::AF_INET6+.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002321_source')" id="l_M002321_source">show</a>
                        
                    </p>
                    <div id="M002321_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 395</span>
395:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">addr</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">family</span>)
396:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">:</span> <span class="ruby-ivar">@family</span>
397:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
398:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">IN4MASK</span>
399:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
400:       <span class="ruby-keyword kw">end</span>
401:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
402:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">IN6MASK</span>
403:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
404:       <span class="ruby-keyword kw">end</span>
405:     <span class="ruby-keyword kw">else</span>
406:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;unsupported address family&quot;</span>
407:     <span class="ruby-keyword kw">end</span>
408:     <span class="ruby-ivar">@addr</span> = <span class="ruby-identifier">addr</span>
409:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>]
410:       <span class="ruby-ivar">@family</span> = <span class="ruby-identifier">family</span>[<span class="ruby-value">0</span>]
411:     <span class="ruby-keyword kw">end</span>
412:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
413:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M002331">
                    
                    <a name="M002331"></a><b>_reverse</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002331_source')" id="l_M002331_source">show</a>
                        
                    </p>
                    <div id="M002331_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 574</span>
574:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_reverse</span>
575:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
576:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
577:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
578:         (<span class="ruby-ivar">@addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">8</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff</span>
579:       }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
580:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
581:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value str">&quot;%.32x&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-ivar">@addr</span>).<span class="ruby-identifier">reverse!</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.(?!$)/</span>, <span class="ruby-value str">'\&amp;.'</span>)
582:     <span class="ruby-keyword kw">else</span>
583:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
584:     <span class="ruby-keyword kw">end</span>
585:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002333">
                    
                    <a name="M002333"></a><b>_to_string</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002333_source')" id="l_M002333_source">show</a>
                        
                    </p>
                    <div id="M002333_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 587</span>
587:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_to_string</span>(<span class="ruby-identifier">addr</span>)
588:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
589:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
590:       <span class="ruby-keyword kw">return</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
591:         (<span class="ruby-identifier">addr</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-value">24</span> <span class="ruby-operator">-</span> <span class="ruby-value">8</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">i</span>)) <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff</span>
592:       }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)
593:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
594:       <span class="ruby-keyword kw">return</span> ((<span class="ruby-value str">&quot;%.32x&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">addr</span>).<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.{4}(?!$)/</span>, <span class="ruby-value str">'\&amp;:'</span>))
595:     <span class="ruby-keyword kw">else</span>
596:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
597:     <span class="ruby-keyword kw">end</span>
598:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002330">
                    
                    <a name="M002330"></a><b>addr_mask</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002330_source')" id="l_M002330_source">show</a>
                        
                    </p>
                    <div id="M002330_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 563</span>
563:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">addr_mask</span>(<span class="ruby-identifier">addr</span>)
564:     <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@family</span>
565:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET</span>
566:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN4MASK</span>
567:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">AF_INET6</span>
568:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">IN6MASK</span>
569:     <span class="ruby-keyword kw">else</span>
570:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;unsupported address family&quot;</span>
571:     <span class="ruby-keyword kw">end</span>
572:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002325">
                    
                    <a name="M002325"></a><b>coerce_other</b>(other)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002325_source')" id="l_M002325_source">show</a>
                        
                    </p>
                    <div id="M002325_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 519</span>
519:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">coerce_other</span>(<span class="ruby-identifier">other</span>)
520:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">other</span>
521:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">IPAddr</span>
522:       <span class="ruby-identifier">other</span>
523:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
524:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">other</span>)
525:     <span class="ruby-keyword kw">else</span>
526:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">other</span>, <span class="ruby-ivar">@family</span>)
527:     <span class="ruby-keyword kw">end</span>
528:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002327">
                    
                    <a name="M002327"></a><b>in6_addr</b>(left)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002327_source')" id="l_M002327_source">show</a>
                        
                    </p>
                    <div id="M002327_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 539</span>
539:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">in6_addr</span>(<span class="ruby-identifier">left</span>)
540:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">left</span>
541:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^::ffff:(\d+\.\d+\.\d+\.\d+)$/i</span>
542:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">$1</span>) <span class="ruby-operator">+</span> <span class="ruby-value">0xffff00000000</span>
543:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^::(\d+\.\d+\.\d+\.\d+)$/i</span>
544:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">$1</span>)
545:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/[^0-9a-f:]/i</span>
546:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;invalid address&quot;</span>
547:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^(.*)::(.*)$/</span>
548:       <span class="ruby-identifier">left</span>, <span class="ruby-identifier">right</span> = <span class="ruby-identifier">$1</span>, <span class="ruby-identifier">$2</span>
549:     <span class="ruby-keyword kw">else</span>
550:       <span class="ruby-identifier">right</span> = <span class="ruby-value str">''</span>
551:     <span class="ruby-keyword kw">end</span>
552:     <span class="ruby-identifier">l</span> = <span class="ruby-identifier">left</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">':'</span>)
553:     <span class="ruby-identifier">r</span> = <span class="ruby-identifier">right</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">':'</span>)
554:     <span class="ruby-identifier">rest</span> = <span class="ruby-value">8</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">size</span>
555:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
556:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
557:     <span class="ruby-keyword kw">end</span>
558:     <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">l</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">rest</span>, <span class="ruby-value str">'0'</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">r</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span>, <span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
559:       <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">hex</span>
560:     }
561:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002326">
                    
                    <a name="M002326"></a><b>in_addr</b>(addr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002326_source')" id="l_M002326_source">show</a>
                        
                    </p>
                    <div id="M002326_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/ipaddr.rb, line 530</span>
530:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">in_addr</span>(<span class="ruby-identifier">addr</span>)
531:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">addr</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+\.\d+\.\d+\.\d+$/</span>
532:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">addr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span>, <span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
533:         <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_i</span>
534:       }
535:     <span class="ruby-keyword kw">end</span>
536:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
537:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    