<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>MiniTest::Unit</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            MiniTest::Unit 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/minitest/benchmark_rb.html">lib/minitest/benchmark.rb</a></li>
            
            <li><a href="../../files/lib/minitest/unit_rb.html">lib/minitest/unit.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M002953">_run</a>,</li>
                
                <li><a href="#M002945">_run_anything</a>,</li>
                
                <li><a href="#M002947">_run_suite</a>,</li>
                
                <li><a href="#M002946">_run_suites</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M002934">after_tests</a>,</li>
                
                <li><a href="#M002935">autorun</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M002933">options</a>,</li>
                
                <li><a href="#M002937">out</a>,</li>
                
                <li><a href="#M002936">output</a>,</li>
                
                <li><a href="#M002942">output</a>,</li>
                
                <li><a href="#M002938">output=</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M002941">plugins</a>,</li>
                
                <li><a href="#M002951">process_args</a>,</li>
                
                <li><a href="#M002949">puke</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M002952">run</a>,</li>
                
                <li><a href="#M002954">run_tests</a>,</li>
                
                <li><a href="#M002940">runner</a>,</li>
                
                <li><a href="#M002939">runner=</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M002955">status</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">CLASS</span> <a href="Unit/TestCase.html">MiniTest::Unit::TestCase</a></li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>runner</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M002934">
                    
                    <a name="M002934"></a><b>after_tests</b>()
                    
                </div>
                
                <div class="description">
                  <p>
A simple hook allowing you to run a block of code after the tests are done.
Eg:
</p>
<pre>
  MiniTest::Unit.after_tests { p $debugging_info }
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002934_source')" id="l_M002934_source">show</a>
                        
                    </p>
                    <div id="M002934_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 645</span>
645:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">after_tests</span>
646:       <span class="ruby-identifier">at_exit</span> { <span class="ruby-identifier">at_exit</span> { <span class="ruby-keyword kw">yield</span> } }
647:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002935">
                    
                    <a name="M002935"></a><b>autorun</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Registers <a href="Unit.html">MiniTest::Unit</a> to run tests at process
exit
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002935_source')" id="l_M002935_source">show</a>
                        
                    </p>
                    <div id="M002935_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 652</span>
652:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">autorun</span>
653:       <span class="ruby-identifier">at_exit</span> {
654:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$!</span> <span class="ruby-comment cmt"># don't run if there was an exception</span>
655: 
656:         <span class="ruby-comment cmt"># the order here is important. The at_exit handler must be</span>
657:         <span class="ruby-comment cmt"># installed before anyone else gets a chance to install their</span>
658:         <span class="ruby-comment cmt"># own, that way we can be assured that our exit will be last</span>
659:         <span class="ruby-comment cmt"># to run (at_exit stacks).</span>
660:         <span class="ruby-identifier">exit_code</span> = <span class="ruby-keyword kw">nil</span>
661: 
662:         <span class="ruby-identifier">at_exit</span> { <span class="ruby-identifier">exit</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">exit_code</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">exit_code</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> }
663: 
664:         <span class="ruby-identifier">exit_code</span> = <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">run</span> <span class="ruby-constant">ARGV</span>
665:       } <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@@installed_at_exit</span>
666:       <span class="ruby-ivar">@@installed_at_exit</span> = <span class="ruby-keyword kw">true</span>
667:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002937">
                    
                    <a name="M002937"></a><b>out</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the stream to use for output.
</p>
<p>
DEPRECATED: use ::output instead.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002937_source')" id="l_M002937_source">show</a>
                        
                    </p>
                    <div id="M002937_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 681</span>
681:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">out</span>
682:       <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;::out deprecated, use ::output instead.&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
683:       <span class="ruby-identifier">output</span>
684:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002936">
                    
                    <a name="M002936"></a><b>output</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the stream to use for output.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002936_source')" id="l_M002936_source">show</a>
                        
                    </p>
                    <div id="M002936_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 672</span>
672:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">output</span>
673:       <span class="ruby-ivar">@@out</span>
674:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002938">
                    
                    <a name="M002938"></a><b>output=</b>(stream)
                    
                </div>
                
                <div class="description">
                  <p>
Sets <a href="Unit.html">MiniTest::Unit</a> to write output to
<tt>stream</tt>. $stdout is the default output
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002938_source')" id="l_M002938_source">show</a>
                        
                    </p>
                    <div id="M002938_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 690</span>
690:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">output=</span> <span class="ruby-identifier">stream</span>
691:       <span class="ruby-ivar">@@out</span> = <span class="ruby-identifier">stream</span>
692:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002941">
                    
                    <a name="M002941"></a><b>plugins</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return all plugins&#8217; run methods (methods that start with
&#8220;run_&#8221;).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002941_source')" id="l_M002941_source">show</a>
                        
                    </p>
                    <div id="M002941_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 714</span>
714:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">plugins</span>
715:       <span class="ruby-ivar">@@plugins</span> <span class="ruby-operator">||=</span> ([<span class="ruby-value str">&quot;run_tests&quot;</span>] <span class="ruby-operator">+</span>
716:                      <span class="ruby-identifier">public_instance_methods</span>(<span class="ruby-keyword kw">false</span>).
717:                      <span class="ruby-identifier">grep</span>(<span class="ruby-regexp re">/^run_/</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">to_s</span> }).<span class="ruby-identifier">uniq</span>
718:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002940">
                    
                    <a name="M002940"></a><b>runner</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the <a href="Unit.html">MiniTest::Unit</a> subclass instance that
will be used to run the tests. A <a href="Unit.html">MiniTest::Unit</a>
instance is the default runner.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002940_source')" id="l_M002940_source">show</a>
                        
                    </p>
                    <div id="M002940_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 707</span>
707:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">runner</span>
708:       <span class="ruby-ivar">@@runner</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>
709:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002939">
                    
                    <a name="M002939"></a><b>runner=</b>(runner)
                    
                </div>
                
                <div class="description">
                  <p>
Tells <a href="Unit.html">MiniTest::Unit</a> to delegate to
<tt>runner</tt>, an instance of a <a href="Unit.html">MiniTest::Unit</a>
subclass, when <a href="Unit.html#M002952">MiniTest::Unit#run</a> is
called.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002939_source')" id="l_M002939_source">show</a>
                        
                    </p>
                    <div id="M002939_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 698</span>
698:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">runner=</span> <span class="ruby-identifier">runner</span>
699:       <span class="ruby-ivar">@@runner</span> = <span class="ruby-identifier">runner</span>
700:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M002953">
                    
                    <a name="M002953"></a><b>_run</b>(args = [])
                    
                </div>
                
                <div class="description">
                  <p>
Top level driver, controls all output and filtering.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002953_source')" id="l_M002953_source">show</a>
                        
                    </p>
                    <div id="M002953_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 890</span>
890:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_run</span> <span class="ruby-identifier">args</span> = []
891:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">options</span> = <span class="ruby-identifier">process_args</span> <span class="ruby-identifier">args</span>
892: 
893:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Run options: #{help}&quot;</span>
894: 
895:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">plugins</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">plugin</span><span class="ruby-operator">|</span>
896:         <span class="ruby-identifier">send</span> <span class="ruby-identifier">plugin</span>
897:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">report</span>.<span class="ruby-identifier">empty?</span>
898:       <span class="ruby-keyword kw">end</span>
899: 
900:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">failures</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">errors</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@test_count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-comment cmt"># or return nil...</span>
901:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Interrupt</span>
902:       <span class="ruby-identifier">abort</span> <span class="ruby-value str">'Interrupted'</span>
903:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002945">
                    
                    <a name="M002945"></a><b>_run_anything</b>(type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002945_source')" id="l_M002945_source">show</a>
                        
                    </p>
                    <div id="M002945_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 732</span>
732:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_run_anything</span> <span class="ruby-identifier">type</span>
733:       <span class="ruby-identifier">suites</span> = <span class="ruby-constant">TestCase</span>.<span class="ruby-identifier">send</span> <span class="ruby-node">&quot;#{type}_suites&quot;</span>
734:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">suites</span>.<span class="ruby-identifier">empty?</span>
735: 
736:       <span class="ruby-identifier">start</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
737: 
738:       <span class="ruby-identifier">puts</span>
739:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;# Running #{type}s:&quot;</span>
740:       <span class="ruby-identifier">puts</span>
741: 
742:       <span class="ruby-ivar">@test_count</span>, <span class="ruby-ivar">@assertion_count</span> = <span class="ruby-value">0</span>, <span class="ruby-value">0</span>
743:       <span class="ruby-identifier">sync</span> = <span class="ruby-identifier">output</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:&quot;sync=&quot;</span> <span class="ruby-comment cmt"># stupid emacs</span>
744:       <span class="ruby-identifier">old_sync</span>, <span class="ruby-identifier">output</span>.<span class="ruby-identifier">sync</span> = <span class="ruby-identifier">output</span>.<span class="ruby-identifier">sync</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sync</span>
745: 
746:       <span class="ruby-identifier">results</span> = <span class="ruby-identifier">_run_suites</span> <span class="ruby-identifier">suites</span>, <span class="ruby-identifier">type</span>
747: 
748:       <span class="ruby-ivar">@test_count</span>      = <span class="ruby-identifier">results</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">sum</span>, (<span class="ruby-identifier">tc</span>, <span class="ruby-identifier">_</span>)<span class="ruby-operator">|</span> <span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">tc</span> }
749:       <span class="ruby-ivar">@assertion_count</span> = <span class="ruby-identifier">results</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">sum</span>, (<span class="ruby-identifier">_</span>, <span class="ruby-identifier">ac</span>)<span class="ruby-operator">|</span> <span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">ac</span> }
750: 
751:       <span class="ruby-identifier">output</span>.<span class="ruby-identifier">sync</span> = <span class="ruby-identifier">old_sync</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sync</span>
752: 
753:       <span class="ruby-identifier">t</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">start</span>
754: 
755:       <span class="ruby-identifier">puts</span>
756:       <span class="ruby-identifier">puts</span>
757:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Finished #{type}s in %.6fs, %.4f tests/s, %.4f assertions/s.&quot;</span> <span class="ruby-operator">%</span>
758:         [<span class="ruby-identifier">t</span>, <span class="ruby-identifier">test_count</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">t</span>, <span class="ruby-identifier">assertion_count</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">t</span>]
759: 
760:       <span class="ruby-identifier">report</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
761:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;\n%3d) %s&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">i</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">msg</span>]
762:       <span class="ruby-keyword kw">end</span>
763: 
764:       <span class="ruby-identifier">puts</span>
765: 
766:       <span class="ruby-identifier">status</span>
767:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002947">
                    
                    <a name="M002947"></a><b>_run_suite</b>(suite, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002947_source')" id="l_M002947_source">show</a>
                        
                    </p>
                    <div id="M002947_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 773</span>
773:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_run_suite</span> <span class="ruby-identifier">suite</span>, <span class="ruby-identifier">type</span>
774:       <span class="ruby-identifier">header</span> = <span class="ruby-node">&quot;#{type}_suite_header&quot;</span>
775:       <span class="ruby-identifier">puts</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">header</span>, <span class="ruby-identifier">suite</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">header</span>
776: 
777:       <span class="ruby-identifier">filter</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filter</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">'/./'</span>
778:       <span class="ruby-identifier">filter</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">filter</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\/(.*)\//</span>
779: 
780:       <span class="ruby-identifier">assertions</span> = <span class="ruby-identifier">suite</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{type}_methods&quot;</span>).<span class="ruby-identifier">grep</span>(<span class="ruby-identifier">filter</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
781:         <span class="ruby-identifier">inst</span> = <span class="ruby-identifier">suite</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">method</span>
782:         <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">_assertions</span> = <span class="ruby-value">0</span>
783: 
784:         <span class="ruby-identifier">print</span> <span class="ruby-node">&quot;#{suite}##{method} = &quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@verbose</span>
785: 
786:         <span class="ruby-ivar">@start_time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
787:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">run</span> <span class="ruby-keyword kw">self</span>
788:         <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@start_time</span>
789: 
790:         <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;%.2f s = &quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">time</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@verbose</span>
791:         <span class="ruby-identifier">print</span> <span class="ruby-identifier">result</span>
792:         <span class="ruby-identifier">puts</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@verbose</span>
793: 
794:         <span class="ruby-identifier">inst</span>.<span class="ruby-identifier">_assertions</span>
795:       }
796: 
797:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">assertions</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">assertions</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">sum</span>, <span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">n</span> }
798:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002946">
                    
                    <a name="M002946"></a><b>_run_suites</b>(suites, type)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002946_source')" id="l_M002946_source">show</a>
                        
                    </p>
                    <div id="M002946_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 769</span>
769:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_run_suites</span> <span class="ruby-identifier">suites</span>, <span class="ruby-identifier">type</span>
770:       <span class="ruby-identifier">suites</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">suite</span><span class="ruby-operator">|</span> <span class="ruby-identifier">_run_suite</span> <span class="ruby-identifier">suite</span>, <span class="ruby-identifier">type</span> }
771:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002933">
                    
                    <a name="M002933"></a><b>options</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002933_source')" id="l_M002933_source">show</a>
                        
                    </p>
                    <div id="M002933_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 632</span>
632:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options</span>
633:       <span class="ruby-ivar">@options</span> <span class="ruby-operator">||=</span> {}
634:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002942">
                    
                    <a name="M002942"></a><b>output</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002942_source')" id="l_M002942_source">show</a>
                        
                    </p>
                    <div id="M002942_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 720</span>
720:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">output</span>
721:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">output</span>
722:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002951">
                    
                    <a name="M002951"></a><b>process_args</b>(args = [])
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002951_source')" id="l_M002951_source">show</a>
                        
                    </p>
                    <div id="M002951_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 837</span>
837:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process_args</span> <span class="ruby-identifier">args</span> = []
838:       <span class="ruby-identifier">options</span> = {}
839:       <span class="ruby-identifier">orig_args</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">dup</span>
840: 
841:       <span class="ruby-constant">OptionParser</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">opts</span><span class="ruby-operator">|</span>
842:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">banner</span>  = <span class="ruby-value str">'minitest options:'</span>
843:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">version</span> = <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Unit</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>
844: 
845:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span> <span class="ruby-value str">'-h'</span>, <span class="ruby-value str">'--help'</span>, <span class="ruby-value str">'Display this help.'</span> <span class="ruby-keyword kw">do</span>
846:           <span class="ruby-identifier">puts</span> <span class="ruby-identifier">opts</span>
847:           <span class="ruby-identifier">exit</span>
848:         <span class="ruby-keyword kw">end</span>
849: 
850:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span> <span class="ruby-value str">'-s'</span>, <span class="ruby-value str">'--seed SEED'</span>, <span class="ruby-constant">Integer</span>, <span class="ruby-value str">&quot;Sets random seed&quot;</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
851:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:seed</span>] = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_i</span>
852:         <span class="ruby-keyword kw">end</span>
853: 
854:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span> <span class="ruby-value str">'-v'</span>, <span class="ruby-value str">'--verbose'</span>, <span class="ruby-value str">&quot;Verbose. Show progress processing files.&quot;</span> <span class="ruby-keyword kw">do</span>
855:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>] = <span class="ruby-keyword kw">true</span>
856:         <span class="ruby-keyword kw">end</span>
857: 
858:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">on</span> <span class="ruby-value str">'-n'</span>, <span class="ruby-value str">'--name PATTERN'</span>, <span class="ruby-value str">&quot;Filter test names on pattern.&quot;</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span>
859:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filter</span>] = <span class="ruby-identifier">a</span>
860:         <span class="ruby-keyword kw">end</span>
861: 
862:         <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">parse!</span> <span class="ruby-identifier">args</span>
863:         <span class="ruby-identifier">orig_args</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">args</span>
864:       <span class="ruby-keyword kw">end</span>
865: 
866:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:seed</span>] <span class="ruby-keyword kw">then</span>
867:         <span class="ruby-identifier">srand</span>
868:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:seed</span>] = <span class="ruby-identifier">srand</span> <span class="ruby-operator">%</span> <span class="ruby-value">0x</span><span class="ruby-constant">FFFF</span>
869:         <span class="ruby-identifier">orig_args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;--seed&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:seed</span>].<span class="ruby-identifier">to_s</span>
870:       <span class="ruby-keyword kw">end</span>
871: 
872:       <span class="ruby-identifier">srand</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:seed</span>]
873: 
874:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
875:       <span class="ruby-ivar">@help</span> = <span class="ruby-identifier">orig_args</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/[\s|&amp;&lt;&gt;$()]/</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">s</span> }.<span class="ruby-identifier">join</span> <span class="ruby-value str">&quot; &quot;</span>
876: 
877:       <span class="ruby-identifier">options</span>
878:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002949">
                    
                    <a name="M002949"></a><b>puke</b>(klass, meth, e)
                    
                </div>
                
                <div class="description">
                  <p>
Writes status for failed test <tt>meth</tt> in <tt>klass</tt> which
finished with exception <tt>e</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002949_source')" id="l_M002949_source">show</a>
                        
                    </p>
                    <div id="M002949_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 813</span>
813:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">puke</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">meth</span>, <span class="ruby-identifier">e</span>
814:       <span class="ruby-identifier">e</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">e</span>
815:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Skip</span> <span class="ruby-keyword kw">then</span>
816:             <span class="ruby-ivar">@skips</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
817:             <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;S&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@verbose</span>
818:             <span class="ruby-node">&quot;Skipped:\n#{meth}(#{klass}) [#{location e}]:\n#{e.message}\n&quot;</span>
819:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-constant">Assertion</span> <span class="ruby-keyword kw">then</span>
820:             <span class="ruby-ivar">@failures</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
821:             <span class="ruby-node">&quot;Failure:\n#{meth}(#{klass}) [#{location e}]:\n#{e.message}\n&quot;</span>
822:           <span class="ruby-keyword kw">else</span>
823:             <span class="ruby-ivar">@errors</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
824:             <span class="ruby-identifier">bt</span> = <span class="ruby-constant">MiniTest</span><span class="ruby-operator">::</span><span class="ruby-identifier">filter_backtrace</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>).<span class="ruby-identifier">join</span> <span class="ruby-value str">&quot;\n    &quot;</span>
825:             <span class="ruby-node">&quot;Error:\n#{meth}(#{klass}):\n#{e.class}: #{e.message}\n    #{bt}\n&quot;</span>
826:           <span class="ruby-keyword kw">end</span>
827:       <span class="ruby-ivar">@report</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">e</span>
828:       <span class="ruby-identifier">e</span>[<span class="ruby-value">0</span>, <span class="ruby-value">1</span>]
829:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002952">
                    
                    <a name="M002952"></a><b>run</b>(args = [])
                    
                </div>
                
                <div class="description">
                  <p>
Begins the full test run. Delegates to <tt>runner</tt>&#8217;s <a
href="Unit.html#M002953">_run</a> method.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002952_source')" id="l_M002952_source">show</a>
                        
                    </p>
                    <div id="M002952_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 883</span>
883:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">run</span> <span class="ruby-identifier">args</span> = []
884:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">runner</span>.<span class="ruby-identifier">_run</span>(<span class="ruby-identifier">args</span>)
885:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002954">
                    
                    <a name="M002954"></a><b>run_tests</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Runs test suites matching <tt>filter</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002954_source')" id="l_M002954_source">show</a>
                        
                    </p>
                    <div id="M002954_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 908</span>
908:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">run_tests</span>
909:       <span class="ruby-identifier">_run_anything</span> <span class="ruby-identifier">:test</span>
910:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M002955">
                    
                    <a name="M002955"></a><b>status</b>(io = self.output)
                    
                </div>
                
                <div class="description">
                  <p>
Writes status to <tt>io</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M002955_source')" id="l_M002955_source">show</a>
                        
                    </p>
                    <div id="M002955_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/minitest/unit.rb, line 915</span>
915:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">status</span> <span class="ruby-identifier">io</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">output</span>
916:       <span class="ruby-identifier">format</span> = <span class="ruby-value str">&quot;%d tests, %d assertions, %d failures, %d errors, %d skips&quot;</span>
917:       <span class="ruby-identifier">io</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">format</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">test_count</span>, <span class="ruby-identifier">assertion_count</span>, <span class="ruby-identifier">failures</span>, <span class="ruby-identifier">errors</span>, <span class="ruby-identifier">skips</span>]
918:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    