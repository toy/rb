<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>DateTime</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            DateTime 
            
                <span class="parent">&lt; 
                    
                    <a href="Date.html">Date</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/ext/date/date_core_c.html">ext/date/date_core.c</a></li>
            
            <li><a href="../files/ext/json/lib/json/add/core_rb.html">ext/json/lib/json/add/core.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="DateTime.html">DateTime</a> serialization/deserialization
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M008749">_strptime</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M009203">as_json</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M008739">civil</a>,</li>
                
                <li><a href="#M008741">commercial</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M008769">httpdate</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M008752">iso8601</a>,</li>
                
                <li><a href="#M008780">iso8601</a></li>
                
            </ul>
        </dd>
    
        <dt>J</dt>
        <dd>
            <ul>
                
                <li><a href="#M008730">jd</a>,</li>
                
                <li><a href="#M008770">jisx0301</a>,</li>
                
                <li><a href="#M008788">jisx0301</a>,</li>
                
                <li><a href="#M009202">json_create</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M008740">new</a>,</li>
                
                <li><a href="#M008742">now</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M008731">ordinal</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M008751">parse</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M008760">rfc2822</a>,</li>
                
                <li><a href="#M008758">rfc3339</a>,</li>
                
                <li><a href="#M008787">rfc3339</a>,</li>
                
                <li><a href="#M008768">rfc822</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M008779">strftime</a>,</li>
                
                <li><a href="#M008750">strptime</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M008808">to_date</a>,</li>
                
                <li><a href="#M008809">to_datetime</a>,</li>
                
                <li><a href="#M009204">to_json</a>,</li>
                
                <li><a href="#M008778">to_s</a>,</li>
                
                <li><a href="#M008807">to_time</a></li>
                
            </ul>
        </dd>
    
        <dt>X</dt>
        <dd>
            <ul>
                
                <li><a href="#M008759">xmlschema</a>,</li>
                
                <li><a href="#M008786">xmlschema</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M008749">
                    
                    <a name="M008749"></a><b>DateTime._strptime(string[, format='%FT%T%z'])  &rarr;  hash
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Parses the given representation of date and time with the given template,
and returns a hash of parsed elements.
</p>
<pre>
 See also strptime(3) and strftime.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008749_source')" id="l_M008749_source">show</a>
                        
                    </p>
                    <div id="M008749_source" class="dyn-source">
                        <pre>static VALUE
datetime_s__strptime(int argc, VALUE *argv, VALUE klass)
{
    return date_s__strptime_internal(argc, argv, klass, &quot;%FT%T%z&quot;);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008739">
                    
                    <a name="M008739"></a><b>DateTime.civil([year=-4712[, month=1[, mday=1[, hour=0[, minute=0[, second=0[, offset=0[, start=Date::ITALY]]]]]]]])  &rarr;  datetime
DateTime.new([year=-4712[, month=1[, mday=1[, hour=0[, minute=0[, second=0[, offset=0[, start=Date::ITALY]]]]]]]])    &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a date-time object denoting the given calendar date.
</p>
<p>
For example:
</p>
<pre>
   DateTime.new(2001,2,3)  #=&gt; #&lt;DateTime: 2001-02-03T00:00:00+00:00 ...&gt;
   DateTime.new(2001,2,3,4,5,6,'+7')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.new(2001,-11,-26,-20,-55,-54,'+7')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008739_source')" id="l_M008739_source">show</a>
                        
                    </p>
                    <div id="M008739_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_civil(int argc, VALUE *argv, VALUE klass)
{
    VALUE vy, vm, vd, vh, vmin, vs, vof, vsg, y, fr, fr2, ret;
    int m, d, h, min, s, rof;
    double sg;

    rb_scan_args(argc, argv, &quot;08&quot;, &amp;vy, &amp;vm, &amp;vd, &amp;vh, &amp;vmin, &amp;vs, &amp;vof, &amp;vsg);

    y = INT2FIX(-4712);
    m = 1;
    d = 1;

    h = min = s = 0;
    fr2 = INT2FIX(0);
    rof = 0;
    sg = DEFAULT_SG;

    switch (argc) {
      case 8:
  val2sg(vsg, sg);
      case 7:
  val2off(vof, rof);
      case 6:
  num2int_with_frac(s, positive_inf);
      case 5:
  num2int_with_frac(min, 5);
      case 4:
  num2int_with_frac(h, 4);
      case 3:
  num2int_with_frac(d, 3);
      case 2:
  m = NUM2INT(vm);
      case 1:
  y = vy;
    }

    if (guess_style(y, sg) &lt; 0) {
  VALUE nth;
  int ry, rm, rd, rh, rmin, rs;

  if (!valid_gregorian_p(y, m, d,
             &amp;nth, &amp;ry,
             &amp;rm, &amp;rd))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  if (!c_valid_time_p(h, min, s, &amp;rh, &amp;rmin, &amp;rs))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  canon24oc();

  ret = d_complex_new_internal(klass,
             nth, 0,
             0, INT2FIX(0),
             rof, sg,
             ry, rm, rd,
             rh, rmin, rs,
             HAVE_CIVIL | HAVE_TIME);
    }
    else {
  VALUE nth;
  int ry, rm, rd, rh, rmin, rs, rjd, rjd2, ns;

  if (!valid_civil_p(y, m, d, sg,
         &amp;nth, &amp;ry,
         &amp;rm, &amp;rd, &amp;rjd,
         &amp;ns))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  if (!c_valid_time_p(h, min, s, &amp;rh, &amp;rmin, &amp;rs))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  canon24oc();

  rjd2 = jd_local_to_utc(rjd,
             time_to_df(rh, rmin, rs),
             rof);

  ret = d_complex_new_internal(klass,
             nth, rjd2,
             0, INT2FIX(0),
             rof, sg,
             ry, rm, rd,
             rh, rmin, rs,
             HAVE_JD | HAVE_CIVIL | HAVE_TIME);
    }
    add_frac();
    return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008741">
                    
                    <a name="M008741"></a><b>DateTime.commercial([cwyear=-4712[, cweek=1[, cwday=1[, hour=0[, minute=0[, second=0[, offset=0[, start=Date::ITALY]]]]]]]])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a date-time object denoting the given week date.
</p>
<p>
For example:
</p>
<pre>
   DateTime.commercial(2001) #=&gt; #&lt;DateTime: 2001-01-01T00:00:00+00:00 ...&gt;
   DateTime.commercial(2002) #=&gt; #&lt;DateTime: 2001-12-31T00:00:00+00:00 ...&gt;
   DateTime.commercial(2001,5,6,4,5,6,'+7')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008741_source')" id="l_M008741_source">show</a>
                        
                    </p>
                    <div id="M008741_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_commercial(int argc, VALUE *argv, VALUE klass)
{
    VALUE vy, vw, vd, vh, vmin, vs, vof, vsg, y, fr, fr2, ret;
    int w, d, h, min, s, rof;
    double sg;

    rb_scan_args(argc, argv, &quot;08&quot;, &amp;vy, &amp;vw, &amp;vd, &amp;vh, &amp;vmin, &amp;vs, &amp;vof, &amp;vsg);

    y = INT2FIX(-4712);
    w = 1;
    d = 1;

    h = min = s = 0;
    fr2 = INT2FIX(0);
    rof = 0;
    sg = DEFAULT_SG;

    switch (argc) {
      case 8:
  val2sg(vsg, sg);
      case 7:
  val2off(vof, rof);
      case 6:
  num2int_with_frac(s, positive_inf);
      case 5:
  num2int_with_frac(min, 5);
      case 4:
  num2int_with_frac(h, 4);
      case 3:
  num2int_with_frac(d, 3);
      case 2:
  w = NUM2INT(vw);
      case 1:
  y = vy;
    }

    {
  VALUE nth;
  int ry, rw, rd, rh, rmin, rs, rjd, rjd2, ns;

  if (!valid_commercial_p(y, w, d, sg,
        &amp;nth, &amp;ry,
        &amp;rw, &amp;rd, &amp;rjd,
        &amp;ns))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  if (!c_valid_time_p(h, min, s, &amp;rh, &amp;rmin, &amp;rs))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  canon24oc();

  rjd2 = jd_local_to_utc(rjd,
             time_to_df(rh, rmin, rs),
             rof);

  ret = d_complex_new_internal(klass,
             nth, rjd2,
             0, INT2FIX(0),
             rof, sg,
             0, 0, 0,
             rh, rmin, rs,
             HAVE_JD | HAVE_TIME);
    }
    add_frac();
    return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008769">
                    
                    <a name="M008769"></a><b>DateTime.httpdate(string='Mon, 01 Jan -4712 00:00:00 GMT'[, start=ITALY])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Date.html">Date</a> object by parsing from a string
according to some RFC 2616 format.
</p>
<p>
For example:
</p>
<pre>
   DateTime.httpdate('Sat, 03 Feb 2001 04:05:06 GMT')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+00:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008769_source')" id="l_M008769_source">show</a>
                        
                    </p>
                    <div id="M008769_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_httpdate(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, sg;

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;str, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;Mon, 01 Jan -4712 00:00:00 GMT&quot;);
      case 1:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE hash = date_s__httpdate(klass, str);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008752">
                    
                    <a name="M008752"></a><b>DateTime.iso8601(string='-4712-01-01T00:00:00+00:00'[, start=ITALY])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Date.html">Date</a> object by parsing from a string
according to some typical ISO 8601 formats.
</p>
<p>
For example:
</p>
<pre>
   DateTime.iso8601('2001-02-03T04:05:06+07:00')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.iso8601('20010203T040506+0700')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.iso8601('2001-W05-6T04:05:06+07:00')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008752_source')" id="l_M008752_source">show</a>
                        
                    </p>
                    <div id="M008752_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_iso8601(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, sg;

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;str, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;-4712-01-01T00:00:00+00:00&quot;);
      case 1:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE hash = date_s__iso8601(klass, str);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008730">
                    
                    <a name="M008730"></a><b>DateTime.jd([jd=0[, hour=0[, minute=0[, second=0[, offset=0[, start=Date::ITALY]]]]]])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a datetime object denoting the given chronological Julian day
number.
</p>
<p>
For example:
</p>
<pre>
   DateTime.jd(2451944)  #=&gt; #&lt;DateTime: 2001-02-03T00:00:00+00:00 ...&gt;
   DateTime.jd(2451945)  #=&gt; #&lt;DateTime: 2001-02-04T00:00:00+00:00 ...&gt;
   DateTime.jd(Rational('0.5'))
       #=&gt; #&lt;DateTime: -4712-01-01T12:00:00+00:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008730_source')" id="l_M008730_source">show</a>
                        
                    </p>
                    <div id="M008730_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_jd(int argc, VALUE *argv, VALUE klass)
{
    VALUE vjd, vh, vmin, vs, vof, vsg, jd, fr, fr2, ret;
    int h, min, s, rof;
    double sg;

    rb_scan_args(argc, argv, &quot;06&quot;, &amp;vjd, &amp;vh, &amp;vmin, &amp;vs, &amp;vof, &amp;vsg);

    jd = INT2FIX(0);

    h = min = s = 0;
    fr2 = INT2FIX(0);
    rof = 0;
    sg = DEFAULT_SG;

    switch (argc) {
      case 6:
  val2sg(vsg, sg);
      case 5:
  val2off(vof, rof);
      case 4:
  num2int_with_frac(s, positive_inf);
      case 3:
  num2int_with_frac(min, 3);
      case 2:
  num2int_with_frac(h, 2);
      case 1:
  num2num_with_frac(jd, 1);
    }

    {
  VALUE nth;
  int rh, rmin, rs, rjd, rjd2;

  if (!c_valid_time_p(h, min, s, &amp;rh, &amp;rmin, &amp;rs))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  canon24oc();

  decode_jd(jd, &amp;nth, &amp;rjd);
  rjd2 = jd_local_to_utc(rjd,
             time_to_df(rh, rmin, rs),
             rof);

  ret = d_complex_new_internal(klass,
             nth, rjd2,
             0, INT2FIX(0),
             rof, sg,
             0, 0, 0,
             rh, rmin, rs,
             HAVE_JD | HAVE_TIME);
    }
    add_frac();
    return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008770">
                    
                    <a name="M008770"></a><b>DateTime.jisx0301(string='-4712-01-01T00:00:00+00:00'[, start=ITALY])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Date.html">Date</a> object by parsing from a string
according to some typical JIS X 0301 formats.
</p>
<p>
For example:
</p>
<pre>
   DateTime.jisx0301('H13.02.03T04:05:06+07:00')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008770_source')" id="l_M008770_source">show</a>
                        
                    </p>
                    <div id="M008770_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_jisx0301(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, sg;

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;str, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;-4712-01-01T00:00:00+00:00&quot;);
      case 1:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE hash = date_s__jisx0301(klass, str);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M009202">
                    
                    <a name="M009202"></a><b>json_create</b>(object)
                    
                </div>
                
                <div class="description">
                  <p>
Deserializes <a href="JSON.html">JSON</a> string by converting year
<tt>y</tt>, month <tt>m</tt>, day <tt>d</tt>, hour <tt>H</tt>, minute
<tt>M</tt>, second <tt>S</tt>, offset <tt>of</tt> and Day of Calendar
Reform <tt>sg</tt> to <a href="DateTime.html">DateTime</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M009202_source')" id="l_M009202_source">show</a>
                        
                    </p>
                    <div id="M009202_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/json/lib/json/add/core.rb, line 99</span>
 99:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">json_create</span>(<span class="ruby-identifier">object</span>)
100:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">object</span>.<span class="ruby-identifier">values_at</span>(<span class="ruby-value str">'y'</span>, <span class="ruby-value str">'m'</span>, <span class="ruby-value str">'d'</span>, <span class="ruby-value str">'H'</span>, <span class="ruby-value str">'M'</span>, <span class="ruby-value str">'S'</span>)
101:     <span class="ruby-identifier">of_a</span>, <span class="ruby-identifier">of_b</span> = <span class="ruby-identifier">object</span>[<span class="ruby-value str">'of'</span>].<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>)
102:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">of_b</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">of_b</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">'0'</span>
103:       <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">of_a</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">of_b</span>.<span class="ruby-identifier">to_i</span>)
104:     <span class="ruby-keyword kw">else</span>
105:       <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">of_a</span>
106:     <span class="ruby-keyword kw">end</span>
107:     <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">object</span>[<span class="ruby-value str">'sg'</span>]
108:     <span class="ruby-identifier">civil</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
109:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008740">
                    
                    <a name="M008740"></a><b>DateTime.civil([year=-4712[, month=1[, mday=1[, hour=0[, minute=0[, second=0[, offset=0[, start=Date::ITALY]]]]]]]])  &rarr;  datetime
DateTime.new([year=-4712[, month=1[, mday=1[, hour=0[, minute=0[, second=0[, offset=0[, start=Date::ITALY]]]]]]]])    &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a date-time object denoting the given calendar date.
</p>
<p>
For example:
</p>
<pre>
   DateTime.new(2001,2,3)  #=&gt; #&lt;DateTime: 2001-02-03T00:00:00+00:00 ...&gt;
   DateTime.new(2001,2,3,4,5,6,'+7')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.new(2001,-11,-26,-20,-55,-54,'+7')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008740_source')" id="l_M008740_source">show</a>
                        
                    </p>
                    <div id="M008740_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_civil(int argc, VALUE *argv, VALUE klass)
{
    VALUE vy, vm, vd, vh, vmin, vs, vof, vsg, y, fr, fr2, ret;
    int m, d, h, min, s, rof;
    double sg;

    rb_scan_args(argc, argv, &quot;08&quot;, &amp;vy, &amp;vm, &amp;vd, &amp;vh, &amp;vmin, &amp;vs, &amp;vof, &amp;vsg);

    y = INT2FIX(-4712);
    m = 1;
    d = 1;

    h = min = s = 0;
    fr2 = INT2FIX(0);
    rof = 0;
    sg = DEFAULT_SG;

    switch (argc) {
      case 8:
  val2sg(vsg, sg);
      case 7:
  val2off(vof, rof);
      case 6:
  num2int_with_frac(s, positive_inf);
      case 5:
  num2int_with_frac(min, 5);
      case 4:
  num2int_with_frac(h, 4);
      case 3:
  num2int_with_frac(d, 3);
      case 2:
  m = NUM2INT(vm);
      case 1:
  y = vy;
    }

    if (guess_style(y, sg) &lt; 0) {
  VALUE nth;
  int ry, rm, rd, rh, rmin, rs;

  if (!valid_gregorian_p(y, m, d,
             &amp;nth, &amp;ry,
             &amp;rm, &amp;rd))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  if (!c_valid_time_p(h, min, s, &amp;rh, &amp;rmin, &amp;rs))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  canon24oc();

  ret = d_complex_new_internal(klass,
             nth, 0,
             0, INT2FIX(0),
             rof, sg,
             ry, rm, rd,
             rh, rmin, rs,
             HAVE_CIVIL | HAVE_TIME);
    }
    else {
  VALUE nth;
  int ry, rm, rd, rh, rmin, rs, rjd, rjd2, ns;

  if (!valid_civil_p(y, m, d, sg,
         &amp;nth, &amp;ry,
         &amp;rm, &amp;rd, &amp;rjd,
         &amp;ns))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  if (!c_valid_time_p(h, min, s, &amp;rh, &amp;rmin, &amp;rs))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  canon24oc();

  rjd2 = jd_local_to_utc(rjd,
             time_to_df(rh, rmin, rs),
             rof);

  ret = d_complex_new_internal(klass,
             nth, rjd2,
             0, INT2FIX(0),
             rof, sg,
             ry, rm, rd,
             rh, rmin, rs,
             HAVE_JD | HAVE_CIVIL | HAVE_TIME);
    }
    add_frac();
    return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008742">
                    
                    <a name="M008742"></a><b>DateTime.now([start=Date::ITALY])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a date-time object denoting the present time.
</p>
<p>
For example:
</p>
<pre>
   DateTime.now    #=&gt; #&lt;DateTime: 2011-06-11T21:20:44+09:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008742_source')" id="l_M008742_source">show</a>
                        
                    </p>
                    <div id="M008742_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_now(int argc, VALUE *argv, VALUE klass)
{
    VALUE vsg, nth, ret;
    double sg;
#ifdef HAVE_CLOCK_GETTIME
    struct timespec ts;
#else
    struct timeval tv;
#endif
    time_t sec;
    struct tm tm;
    long sf, of;
    int y, ry, m, d, h, min, s;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;vsg);

    if (argc &lt; 1)
  sg = DEFAULT_SG;
    else
  sg = NUM2DBL(vsg);

#ifdef HAVE_CLOCK_GETTIME
    if (clock_gettime(CLOCK_REALTIME, &amp;ts) == -1)
  rb_sys_fail(&quot;clock_gettime&quot;);
    sec = ts.tv_sec;
#else
    if (gettimeofday(&amp;tv, NULL) == -1)
  rb_sys_fail(&quot;gettimeofday&quot;);
    sec = tv.tv_sec;
#endif
    if (!localtime_r(&amp;sec, &amp;tm))
  rb_sys_fail(&quot;localtime&quot;);

    y = tm.tm_year + 1900;
    m = tm.tm_mon + 1;
    d = tm.tm_mday;
    h = tm.tm_hour;
    min = tm.tm_min;
    s = tm.tm_sec;
    if (s == 60)
  s = 59;
#ifdef HAVE_STRUCT_TM_TM_GMTOFF
    of = tm.tm_gmtoff;
#else
    of = -timezone;
#endif
#ifdef HAVE_CLOCK_GETTIME
    sf = ts.tv_nsec;
#else
    sf = tv.tv_usec * 1000;
#endif

    if (of &lt; -DAY_IN_SECONDS || of &gt; DAY_IN_SECONDS) {
  of = 0;
  rb_warning(&quot;invalid offset is ignored&quot;);
    }

    decode_year(INT2FIX(y), -1, &amp;nth, &amp;ry);

    ret = d_complex_new_internal(klass,
         nth, 0,
         0, LONG2NUM(sf),
         (int)of, GREGORIAN,
         ry, m, d,
         h, min, s,
         HAVE_CIVIL | HAVE_TIME);
    {
  get_d1(ret);
  set_sg(dat, sg);
    }
    return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008731">
                    
                    <a name="M008731"></a><b>DateTime.ordinal([year=-4712[, yday=1[, hour=0[, minute=0[, second=0[, offset=0[, start=Date::ITALY]]]]]]])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a date-time object denoting the given ordinal date.
</p>
<p>
For example:
</p>
<pre>
   DateTime.ordinal(2001,34) #=&gt; #&lt;DateTime: 2001-02-03T00:00:00+00:00 ...&gt;
   DateTime.ordinal(2001,34,4,5,6,'+7')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.ordinal(2001,-332,-20,-55,-54,'+7')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008731_source')" id="l_M008731_source">show</a>
                        
                    </p>
                    <div id="M008731_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_ordinal(int argc, VALUE *argv, VALUE klass)
{
    VALUE vy, vd, vh, vmin, vs, vof, vsg, y, fr, fr2, ret;
    int d, h, min, s, rof;
    double sg;

    rb_scan_args(argc, argv, &quot;07&quot;, &amp;vy, &amp;vd, &amp;vh, &amp;vmin, &amp;vs, &amp;vof, &amp;vsg);

    y = INT2FIX(-4712);
    d = 1;

    h = min = s = 0;
    fr2 = INT2FIX(0);
    rof = 0;
    sg = DEFAULT_SG;

    switch (argc) {
      case 7:
  val2sg(vsg, sg);
      case 6:
  val2off(vof, rof);
      case 5:
  num2int_with_frac(s, positive_inf);
      case 4:
  num2int_with_frac(min, 4);
      case 3:
  num2int_with_frac(h, 3);
      case 2:
  num2int_with_frac(d, 2);
      case 1:
  y = vy;
    }

    {
  VALUE nth;
  int ry, rd, rh, rmin, rs, rjd, rjd2, ns;

  if (!valid_ordinal_p(y, d, sg,
           &amp;nth, &amp;ry,
           &amp;rd, &amp;rjd,
           &amp;ns))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  if (!c_valid_time_p(h, min, s, &amp;rh, &amp;rmin, &amp;rs))
      rb_raise(rb_eArgError, &quot;invalid date&quot;);
  canon24oc();

  rjd2 = jd_local_to_utc(rjd,
             time_to_df(rh, rmin, rs),
             rof);

  ret = d_complex_new_internal(klass,
             nth, rjd2,
             0, INT2FIX(0),
             rof, sg,
             0, 0, 0,
             rh, rmin, rs,
             HAVE_JD | HAVE_TIME);
    }
    add_frac();
    return ret;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008751">
                    
                    <a name="M008751"></a><b>DateTime.parse(string='-4712-01-01T00:00:00+00:00'[, comp=true[, start=ITALY]])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Parses the given representation of date and time, and creates a date
object.
</p>
<p>
If the optional second argument is true and the detected year is in the
range &#8220;00&#8221; to &#8220;99&#8221;, makes it full.
</p>
<p>
For example:
</p>
<pre>
   DateTime.parse('2001-02-03T04:05:06+07:00')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.parse('20010203T040506+0700')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.parse('3rd Feb 2001 04:05:06 PM')
       #=&gt; #&lt;DateTime: 2001-02-03T16:05:06+00:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008751_source')" id="l_M008751_source">show</a>
                        
                    </p>
                    <div id="M008751_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_parse(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, comp, sg;

    rb_scan_args(argc, argv, &quot;03&quot;, &amp;str, &amp;comp, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;-4712-01-01T00:00:00+00:00&quot;);
      case 1:
  comp = Qtrue;
      case 2:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE argv2[2], hash;

  argv2[0] = str;
  argv2[1] = comp;
  hash = date_s__parse(2, argv2, klass);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008760">
                    
                    <a name="M008760"></a><b>DateTime.rfc2822(string='Mon, 1 Jan -4712 00:00:00 +0000'[, start=ITALY])  &rarr;  datetime
DateTime.rfc822(string='Mon, 1 Jan -4712 00:00:00 +0000'[, start=ITALY])   &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Date.html">Date</a> object by parsing from a string
according to some typical RFC 2822 formats.
</p>
<p>
For example:
</p>
<pre>
    DateTime.rfc2822('Sat, 3 Feb 2001 04:05:06 +0700')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008760_source')" id="l_M008760_source">show</a>
                        
                    </p>
                    <div id="M008760_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_rfc2822(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, sg;

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;str, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;Mon, 1 Jan -4712 00:00:00 +0000&quot;);
      case 1:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE hash = date_s__rfc2822(klass, str);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008758">
                    
                    <a name="M008758"></a><b>DateTime.rfc3339(string='-4712-01-01T00:00:00+00:00'[, start=ITALY])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Date.html">Date</a> object by parsing from a string
according to some typical RFC 3339 formats.
</p>
<p>
For example:
</p>
<pre>
   DateTime.rfc3339('2001-02-03T04:05:06+07:00')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008758_source')" id="l_M008758_source">show</a>
                        
                    </p>
                    <div id="M008758_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_rfc3339(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, sg;

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;str, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;-4712-01-01T00:00:00+00:00&quot;);
      case 1:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE hash = date_s__rfc3339(klass, str);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008768">
                    
                    <a name="M008768"></a><b>DateTime.rfc2822(string='Mon, 1 Jan -4712 00:00:00 +0000'[, start=ITALY])  &rarr;  datetime
DateTime.rfc822(string='Mon, 1 Jan -4712 00:00:00 +0000'[, start=ITALY])   &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Date.html">Date</a> object by parsing from a string
according to some typical RFC 2822 formats.
</p>
<p>
For example:
</p>
<pre>
    DateTime.rfc2822('Sat, 3 Feb 2001 04:05:06 +0700')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008768_source')" id="l_M008768_source">show</a>
                        
                    </p>
                    <div id="M008768_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_rfc2822(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, sg;

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;str, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;Mon, 1 Jan -4712 00:00:00 +0000&quot;);
      case 1:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE hash = date_s__rfc2822(klass, str);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008750">
                    
                    <a name="M008750"></a><b>DateTime.strptime([string='-4712-01-01T00:00:00+00:00'[, format='%FT%T%z'[ ,start=ITALY]]])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Parses the given representation of date and time with the given template,
and creates a date object.
</p>
<p>
For example:
</p>
<pre>
   DateTime.strptime('2001-02-03T04:05:06+07:00', '%Y-%m-%dT%H:%M:%S%z')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.strptime('03-02-2001 04:05:06 PM', '%d-%m-%Y %I:%M:%S %p')
       #=&gt; #&lt;DateTime: 2001-02-03T16:05:06+00:00 ...&gt;
   DateTime.strptime('2001-W05-6T04:05:06+07:00', '%G-W%V-%uT%H:%M:%S%z')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.strptime('2001 04 6 04 05 06 +7', '%Y %U %w %H %M %S %z')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.strptime('2001 05 6 04 05 06 +7', '%Y %W %u %H %M %S %z')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
   DateTime.strptime('-1', '%s')
       #=&gt; #&lt;DateTime: 1969-12-31T23:59:59+00:00 ...&gt;
   DateTime.strptime('-1000', '%Q')
       #=&gt; #&lt;DateTime: 1969-12-31T23:59:59+00:00 ...&gt;
   DateTime.strptime('sat3feb014pm+7', '%a%d%b%y%H%p%z')
       #=&gt; #&lt;DateTime: 2001-02-03T16:00:00+07:00 ...&gt;
</pre>
<p>
See also strptime(3) and strftime.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008750_source')" id="l_M008750_source">show</a>
                        
                    </p>
                    <div id="M008750_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_strptime(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, fmt, sg;

    rb_scan_args(argc, argv, &quot;03&quot;, &amp;str, &amp;fmt, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;-4712-01-01T00:00:00+00:00&quot;);
      case 1:
  fmt = rb_str_new2(&quot;%FT%T%z&quot;);
      case 2:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE argv2[2], hash;

  argv2[0] = str;
  argv2[1] = fmt;
  hash = date_s__strptime(2, argv2, klass);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008759">
                    
                    <a name="M008759"></a><b>DateTime.xmlschema(string='-4712-01-01T00:00:00+00:00'[, start=ITALY])  &rarr;  datetime
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Date.html">Date</a> object by parsing from a string
according to some typical <a href="XML.html">XML</a> Schema formats.
</p>
<p>
For example:
</p>
<pre>
   DateTime.xmlschema('2001-02-03T04:05:06+07:00')
       #=&gt; #&lt;DateTime: 2001-02-03T04:05:06+07:00 ...&gt;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008759_source')" id="l_M008759_source">show</a>
                        
                    </p>
                    <div id="M008759_source" class="dyn-source">
                        <pre>static VALUE
datetime_s_xmlschema(int argc, VALUE *argv, VALUE klass)
{
    VALUE str, sg;

    rb_scan_args(argc, argv, &quot;02&quot;, &amp;str, &amp;sg);

    switch (argc) {
      case 0:
  str = rb_str_new2(&quot;-4712-01-01T00:00:00+00:00&quot;);
      case 1:
  sg = INT2FIX(DEFAULT_SG);
    }

    {
  VALUE hash = date_s__xmlschema(klass, str);
  return dt_new_by_frags(klass, hash, sg);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M009203">
                    
                    <a name="M009203"></a><b>as_json</b>(*)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a hash, that will be turned into a <a href="JSON.html">JSON</a>
object and represent this object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M009203_source')" id="l_M009203_source">show</a>
                        
                    </p>
                    <div id="M009203_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/json/lib/json/add/core.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">as_json</span>(<span class="ruby-operator">*</span>)
116:     {
117:       <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">create_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>,
118:       <span class="ruby-value str">'y'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">year</span>,
119:       <span class="ruby-value str">'m'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">month</span>,
120:       <span class="ruby-value str">'d'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">day</span>,
121:       <span class="ruby-value str">'H'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">hour</span>,
122:       <span class="ruby-value str">'M'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">min</span>,
123:       <span class="ruby-value str">'S'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">sec</span>,
124:       <span class="ruby-value str">'of'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset</span>.<span class="ruby-identifier">to_s</span>,
125:       <span class="ruby-value str">'sg'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">start</span>,
126:     }
127:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008780">
                    
                    <a name="M008780"></a><b>dt.iso8601([n=0])    &rarr;  string
dt.xmlschema([n=0])  &rarr;  string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
This method is equivalent to strftime(&#8217;%FT%T&#8217;). The optional
argument n is length of fractional seconds.
</p>
<p>
For example:
</p>
<pre>
   DateTime.parse('2001-02-03T04:05:06.123456789+07:00').iso8601(9)
       #=&gt; &quot;2001-02-03T04:05:06.123456789+07:00&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008780_source')" id="l_M008780_source">show</a>
                        
                    </p>
                    <div id="M008780_source" class="dyn-source">
                        <pre>static VALUE
dt_lite_iso8601(int argc, VALUE *argv, VALUE self)
{
    VALUE n;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;n);

    if (argc &lt; 1)
  n = INT2FIX(0);

    return f_add(strftimev(&quot;%Y-%m-%d&quot;, self, set_tmx),
     iso8601_timediv(self, n));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008788">
                    
                    <a name="M008788"></a><b>dt.jisx0301([n=0])  &rarr;  string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string in a JIS X 0301 format. The optional argument n is length
of fractional seconds.
</p>
<p>
For example:
</p>
<pre>
   DateTime.parse('2001-02-03T04:05:06.123456789+07:00').jisx0301(9)
       #=&gt; &quot;H13.02.03T04:05:06.123456789+07:00&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008788_source')" id="l_M008788_source">show</a>
                        
                    </p>
                    <div id="M008788_source" class="dyn-source">
                        <pre>static VALUE
dt_lite_jisx0301(int argc, VALUE *argv, VALUE self)
{
    VALUE n, s;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;n);

    if (argc &lt; 1)
  n = INT2FIX(0);

    {
  get_d1(self);
  s = jisx0301_date(m_real_local_jd(dat),
        m_real_year(dat));
  return rb_str_append(strftimev(RSTRING_PTR(s), self, set_tmx),
           iso8601_timediv(self, n));
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008787">
                    
                    <a name="M008787"></a><b>dt.rfc3339([n=0])  &rarr;  string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
This method is equivalent to strftime(&#8217;%FT%T&#8217;). The optional
argument n is length of fractional seconds.
</p>
<p>
For example:
</p>
<pre>
   DateTime.parse('2001-02-03T04:05:06.123456789+07:00').rfc3339(9)
       #=&gt; &quot;2001-02-03T04:05:06.123456789+07:00&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008787_source')" id="l_M008787_source">show</a>
                        
                    </p>
                    <div id="M008787_source" class="dyn-source">
                        <pre>static VALUE
dt_lite_rfc3339(int argc, VALUE *argv, VALUE self)
{
    return dt_lite_iso8601(argc, argv, self);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008779">
                    
                    <a name="M008779"></a><b>dt.strftime([format='%FT%T%:z'])  &rarr;  string
</b>
                    
                </div>
                
                <div class="description">
                  <pre>
 Formats date according to the directives in the given format
 string.
 The directives begins with a percent (%) character.
 Any text not listed as a directive will be passed through to the
 output string.

 The directive consists of a percent (%) character,
 zero or more flags, optional minimum field width,
 optional modifier and a conversion specifier
 as follows.

   %&lt;flags&gt;&lt;width&gt;&lt;modifier&gt;&lt;conversion&gt;

 Flags:
   -  don't pad a numerical output.
   _  use spaces for padding.
   0  use zeros for padding.
   ^  upcase the result string.
   #  change case.
   :  use colons for %z.

 The minimum field width specifies the minimum width.

 The modifier is &quot;E&quot; and &quot;O&quot;.
 They are ignored.

 Format directives:

   Date (Year, Month, Day):
     %Y - Year with century (can be negative, 4 digits at least)
             -0001, 0000, 1995, 2009, 14292, etc.
     %C - year / 100 (round down.  20 in 2009)
     %y - year % 100 (00..99)

     %m - Month of the year, zero-padded (01..12)
             %_m  blank-padded ( 1..12)
             %-m  no-padded (1..12)
     %B - The full month name (``January'')
             %^B  uppercased (``JANUARY'')
     %b - The abbreviated month name (``Jan'')
             %^b  uppercased (``JAN'')
     %h - Equivalent to %b

     %d - Day of the month, zero-padded (01..31)
             %-d  no-padded (1..31)
     %e - Day of the month, blank-padded ( 1..31)

     %j - Day of the year (001..366)

   Time (Hour, Minute, Second, Subsecond):
     %H - Hour of the day, 24-hour clock, zero-padded (00..23)
     %k - Hour of the day, 24-hour clock, blank-padded ( 0..23)
     %I - Hour of the day, 12-hour clock, zero-padded (01..12)
     %l - Hour of the day, 12-hour clock, blank-padded ( 1..12)
     %P - Meridian indicator, lowercase (``am'' or ``pm'')
     %p - Meridian indicator, uppercase (``AM'' or ``PM'')

     %M - Minute of the hour (00..59)

     %S - Second of the minute (00..59)

     %L - Millisecond of the second (000..999)
     %N - Fractional seconds digits, default is 9 digits (nanosecond)
             %3N  millisecond (3 digits)
             %6N  microsecond (6 digits)
             %9N  nanosecond (9 digits)
             %12N picosecond (12 digits)

   Time zone:
     %z - Time zone as hour and minute offset from UTC (e.g. +0900)
             %:z - hour and minute offset from UTC with a colon (e.g. +09:00)
             %::z - hour, minute and second offset from UTC (e.g. +09:00:00)
             %:::z - hour, minute and second offset from UTC
                                               (e.g. +09, +09:30, +09:30:30)
     %Z - Time zone abbreviation name

   Weekday:
     %A - The full weekday name (``Sunday'')
             %^A  uppercased (``SUNDAY'')
     %a - The abbreviated name (``Sun'')
             %^a  uppercased (``SUN'')
     %u - Day of the week (Monday is 1, 1..7)
     %w - Day of the week (Sunday is 0, 0..6)

   ISO 8601 week-based year and week number:
   The week 1 of YYYY starts with a Monday and includes YYYY-01-04.
   The days in the year before the first week are in the last week of
   the previous year.
     %G - The week-based year
     %g - The last 2 digits of the week-based year (00..99)
     %V - Week number of the week-based year (01..53)

   Week number:
   The week 1 of YYYY starts with a Sunday or Monday (according to %U
   or %W).  The days in the year before the first week are in week 0.
     %U - Week number of the year.  The week starts with Sunday.  (00..53)
     %W - Week number of the year.  The week starts with Monday.  (00..53)

   Seconds since the Unix Epoch:
     %s - Number of seconds since 1970-01-01 00:00:00 UTC.
     %Q - Number of microseconds since 1970-01-01 00:00:00 UTC.

   Literal string:
     %n - Newline character (\n)
     %t - Tab character (\t)
     %% - Literal ``%'' character

   Combination:
     %c - date and time (%a %b %e %T %Y)
     %D - Date (%m/%d/%y)
     %F - The ISO 8601 date format (%Y-%m-%d)
     %v - VMS date (%e-%b-%Y)
     %x - Same as %D
     %X - Same as %T
     %r - 12-hour time (%I:%M:%S %p)
     %R - 24-hour time (%H:%M)
     %T - 24-hour time (%H:%M:%S)
     %+ - date(1) (%a %b %e %H:%M:%S %Z %Y)

 This method is similar to strftime() function defined in ISO C and POSIX.
 Several directives (%a, %A, %b, %B, %c, %p, %r, %x, %X, %E*, %O* and %Z)
 are locale dependent in the function.
 However this method is locale independent.
 So, the result may differ even if a same format string is used in other
 systems such as C.
 It is good practice to avoid %x and %X because there are corresponding
 locale independent representations, %D and %T.

 Examples:

   d = DateTime.new(2007,11,19,8,37,48,&quot;-06:00&quot;)
       #=&gt; #&lt;DateTime: 2007-11-19T08:37:48-0600 ...&gt;
   d.strftime(&quot;Printed on %m/%d/%Y&quot;)   #=&gt; &quot;Printed on 11/19/2007&quot;
   d.strftime(&quot;at %I:%M%p&quot;)            #=&gt; &quot;at 08:37AM&quot;

 Various ISO 8601 formats:
   %Y%m%d           =&gt; 20071119                  Calendar date (basic)
   %F               =&gt; 2007-11-19                Calendar date (extended)
   %Y-%m            =&gt; 2007-11                   Calendar date, reduced accuracy, specific month
   %Y               =&gt; 2007                      Calendar date, reduced accuracy, specific year
   %C               =&gt; 20                        Calendar date, reduced accuracy, specific century
   %Y%j             =&gt; 2007323                   Ordinal date (basic)
   %Y-%j            =&gt; 2007-323                  Ordinal date (extended)
   %GW%V%u          =&gt; 2007W471                  Week date (basic)
   %G-W%V-%u        =&gt; 2007-W47-1                Week date (extended)
   %GW%V            =&gt; 2007W47                   Week date, reduced accuracy, specific week (basic)
   %G-W%V           =&gt; 2007-W47                  Week date, reduced accuracy, specific week (extended)
   %H%M%S           =&gt; 083748                    Local time (basic)
   %T               =&gt; 08:37:48                  Local time (extended)
   %H%M             =&gt; 0837                      Local time, reduced accuracy, specific minute (basic)
   %H:%M            =&gt; 08:37                     Local time, reduced accuracy, specific minute (extended)
   %H               =&gt; 08                        Local time, reduced accuracy, specific hour
   %H%M%S,%L        =&gt; 083748,000                Local time with decimal fraction, comma as decimal sign (basic)
   %T,%L            =&gt; 08:37:48,000              Local time with decimal fraction, comma as decimal sign (extended)
   %H%M%S.%L        =&gt; 083748.000                Local time with decimal fraction, full stop as decimal sign (basic)
   %T.%L            =&gt; 08:37:48.000              Local time with decimal fraction, full stop as decimal sign (extended)
   %H%M%S%z         =&gt; 083748-0600               Local time and the difference from UTC (basic)
   %T%:z            =&gt; 08:37:48-06:00            Local time and the difference from UTC (extended)
   %Y%m%dT%H%M%S%z  =&gt; 20071119T083748-0600      Date and time of day for calendar date (basic)
   %FT%T%:z         =&gt; 2007-11-19T08:37:48-06:00 Date and time of day for calendar date (extended)
   %Y%jT%H%M%S%z    =&gt; 2007323T083748-0600       Date and time of day for ordinal date (basic)
   %Y-%jT%T%:z      =&gt; 2007-323T08:37:48-06:00   Date and time of day for ordinal date (extended)
   %GW%V%uT%H%M%S%z =&gt; 2007W471T083748-0600      Date and time of day for week date (basic)
   %G-W%V-%uT%T%:z  =&gt; 2007-W47-1T08:37:48-06:00 Date and time of day for week date (extended)
   %Y%m%dT%H%M      =&gt; 20071119T0837             Calendar date and local time (basic)
   %FT%R            =&gt; 2007-11-19T08:37          Calendar date and local time (extended)
   %Y%jT%H%MZ       =&gt; 2007323T0837Z             Ordinal date and UTC of day (basic)
   %Y-%jT%RZ        =&gt; 2007-323T08:37Z           Ordinal date and UTC of day (extended)
   %GW%V%uT%H%M%z   =&gt; 2007W471T0837-0600        Week date and local time and difference from UTC (basic)
   %G-W%V-%uT%R%:z  =&gt; 2007-W47-1T08:37-06:00    Week date and local time and difference from UTC (extended)
</pre>
<p>
See also strftime(3) and strptime.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008779_source')" id="l_M008779_source">show</a>
                        
                    </p>
                    <div id="M008779_source" class="dyn-source">
                        <pre>static VALUE
dt_lite_strftime(int argc, VALUE *argv, VALUE self)
{
    return date_strftime_internal(argc, argv, self,
          &quot;%Y-%m-%dT%H:%M:%S%:z&quot;, set_tmx);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008808">
                    
                    <a name="M008808"></a><b>dt.to_date  &rarr;  date
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <a href="Date.html">Date</a> object which denotes self.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008808_source')" id="l_M008808_source">show</a>
                        
                    </p>
                    <div id="M008808_source" class="dyn-source">
                        <pre>static VALUE
datetime_to_date(VALUE self)
{
    get_d1a(self);

    if (simple_dat_p(adat)) {
  VALUE new = d_lite_s_alloc_simple(cDate);
  {
      get_d1b(new);
      bdat-&gt;s = adat-&gt;s;
      bdat-&gt;s.jd = m_local_jd(adat);
      return new;
  }
    }
    else {
  VALUE new = d_lite_s_alloc_simple(cDate);
  {
      get_d1b(new);
      copy_complex_to_simple(&amp;bdat-&gt;s, &amp;adat-&gt;c)
      bdat-&gt;s.jd = m_local_jd(adat);
      bdat-&gt;s.flags &amp;= ~(HAVE_DF | HAVE_TIME | COMPLEX_DAT);
      return new;
  }
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008809">
                    
                    <a name="M008809"></a><b>dt.to_datetime  &rarr;  self
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns self.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008809_source')" id="l_M008809_source">show</a>
                        
                    </p>
                    <div id="M008809_source" class="dyn-source">
                        <pre>static VALUE
datetime_to_datetime(VALUE self)
{
    return self;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M009204">
                    
                    <a name="M009204"></a><b>to_json</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Stores class name (<a href="DateTime.html">DateTime</a>) with Julian year
<tt>y</tt>, month <tt>m</tt>, day <tt>d</tt>, hour <tt>H</tt>, minute
<tt>M</tt>, second <tt>S</tt>, offset <tt>of</tt> and Day of Calendar
Reform <tt>sg</tt> as <a href="JSON.html">JSON</a> string
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M009204_source')" id="l_M009204_source">show</a>
                        
                    </p>
                    <div id="M009204_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File ext/json/lib/json/add/core.rb, line 132</span>
132:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_json</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
133:     <span class="ruby-identifier">as_json</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
134:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008778">
                    
                    <a name="M008778"></a><b>dt.to_s  &rarr;  string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string in an ISO 8601 format (This method doesn&#8217;t use the
expanded representations).
</p>
<p>
For example:
</p>
<pre>
    DateTime.new(2001,2,3,4,5,6,'-7').to_s
       #=&gt; &quot;2001-02-03T04:05:06-07:00&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008778_source')" id="l_M008778_source">show</a>
                        
                    </p>
                    <div id="M008778_source" class="dyn-source">
                        <pre>static VALUE
dt_lite_to_s(VALUE self)
{
    return strftimev(&quot;%Y-%m-%dT%H:%M:%S%:z&quot;, self, set_tmx);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008807">
                    
                    <a name="M008807"></a><b>dt.to_time  &rarr;  time
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a <a href="Time.html">Time</a> object which denotes self.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008807_source')" id="l_M008807_source">show</a>
                        
                    </p>
                    <div id="M008807_source" class="dyn-source">
                        <pre>static VALUE
datetime_to_time(VALUE self)
{
    volatile VALUE dup = dup_obj_with_new_offset(self, 0);
    {
  VALUE t;

  get_d1(dup);

  t = f_utc6(rb_cTime,
       m_real_year(dat),
       INT2FIX(m_mon(dat)),
       INT2FIX(m_mday(dat)),
       INT2FIX(m_hour(dat)),
       INT2FIX(m_min(dat)),
       f_add(INT2FIX(m_sec(dat)),
       m_sf_in_sec(dat)));
  return f_getlocal(t);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M008786">
                    
                    <a name="M008786"></a><b>dt.iso8601([n=0])    &rarr;  string
dt.xmlschema([n=0])  &rarr;  string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
This method is equivalent to strftime(&#8217;%FT%T&#8217;). The optional
argument n is length of fractional seconds.
</p>
<p>
For example:
</p>
<pre>
   DateTime.parse('2001-02-03T04:05:06.123456789+07:00').iso8601(9)
       #=&gt; &quot;2001-02-03T04:05:06.123456789+07:00&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M008786_source')" id="l_M008786_source">show</a>
                        
                    </p>
                    <div id="M008786_source" class="dyn-source">
                        <pre>static VALUE
dt_lite_iso8601(int argc, VALUE *argv, VALUE self)
{
    VALUE n;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;n);

    if (argc &lt; 1)
  n = INT2FIX(0);

    return f_add(strftimev(&quot;%Y-%m-%d&quot;, self, set_tmx),
     iso8601_timediv(self, n));
}</pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    