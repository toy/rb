<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>REXML::Parsers::XPathParser</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            REXML::Parsers::XPathParser 
            
                <span class="parent">&lt; 
                    
                    <a href="../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/rexml/parsers/xpathparser_rb.html">lib/rexml/parsers/xpathparser.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
You don&#8217;t want to use this class. Really. Use <a
href="../XPath.html">XPath</a>, which is a wrapper for this class. Believe
me. You don&#8217;t want to poke around in here. There is strange, dark
magic at work in this code. Beware. Go back! Go back while you still can!
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M005353">AdditiveExpr</a>,</li>
                
                <li><a href="#M005350">AndExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M005351">EqualityExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M005375">FilterExpr</a>,</li>
                
                <li><a href="#M005379">FunctionCall</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M005340">LocationPath</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M005363">MultiplicativeExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M005347">NodeTest</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M005349">OrExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M005374">PathExpr</a>,</li>
                
                <li><a href="#M005348">Predicate</a>,</li>
                
                <li><a href="#M005376">PrimaryExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M005352">RelationalExpr</a>,</li>
                
                <li><a href="#M005343">RelativeLocationPath</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M005372">UnaryExpr</a>,</li>
                
                <li><a href="#M005373">UnionExpr</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M005334">abbreviate</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M005336">expand</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M005381">get_group</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M005330">namespaces=</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M005331">parse</a>,</li>
                
                <li><a href="#M005385">parse_args</a>,</li>
                
                <li><a href="#M005333">predicate</a>,</li>
                
                <li><a href="#M005338">predicate_to_string</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../Formatters.html">REXML::Formatters</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">LITERAL</td>
            <td>=</td>
            <td class="attr-value">/^'([^']*)'|^&quot;([^&quot;]*)&quot;/u</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">AXIS</td>
            <td>=</td>
            <td class="attr-value">/^(ancestor|ancestor-or-self|attribute|child|descendant|descendant-or-self|following|following-sibling|namespace|parent|preceding|preceding-sibling|self)::/</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="XPathParser.html#M005343">RelativeLocationPath</a>
</p>
<pre>
  |                                                    Step
    | (AXIS_NAME '::' | '@' | '')                     AxisSpecifier
      NodeTest
        Predicate
    | '.' | '..'                                      AbbreviatedStep
  |  RelativeLocationPath '/' Step
  | RelativeLocationPath '//' Step
</pre>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NCNAMETEST</td>
            <td>=</td>
            <td class="attr-value">/^(#{NCNAME_STR}):\*/u</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><pre>
 Returns a 1-1 map of the nodeset
 The contents of the resulting array are either:
   true/false, if a positive match
   String, if a name match
</pre>
<p>
<a href="XPathParser.html#M005347">NodeTest</a>
</p>
<pre>
  | ('*' | NCNAME ':' '*' | QNAME)                NameTest
  | NODE_TYPE '(' ')'                              NodeType
  | PI '(' LITERAL ')'                            PI
    | '[' expr ']'                                Predicate
</pre>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">QNAME</td>
            <td>=</td>
            <td class="attr-value">Namespace::NAMESPLIT</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NODE_TYPE</td>
            <td>=</td>
            <td class="attr-value">/^(comment|text|node)\(\s*\)/m</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">PI</td>
            <td>=</td>
            <td class="attr-value">/^processing-instruction\(/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">VARIABLE_REFERENCE</td>
            <td>=</td>
            <td class="attr-value">/^\$(#{NAME_STR})/u</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
| <a href="XPathParser.html#VARIABLE_REFERENCE">VARIABLE_REFERENCE</a> |
&#8217;(&#8217; expr &#8217;)&#8217; | <a
href="XPathParser.html#LITERAL">LITERAL</a> | <a
href="XPathParser.html#NUMBER">NUMBER</a> | <a
href="XPathParser.html#M005379">FunctionCall</a>
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NUMBER</td>
            <td>=</td>
            <td class="attr-value">/^(\d*\.?\d+)/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NT</td>
            <td>=</td>
            <td class="attr-value">/^comment|text|processing-instruction|node$/</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M005334">
                    
                    <a name="M005334"></a><b>abbreviate</b>( path )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005334_source')" id="l_M005334_source">show</a>
                        
                    </p>
                    <div id="M005334_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 34</span>
34:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abbreviate</span>( <span class="ruby-identifier">path</span> )
35:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">parse</span>( <span class="ruby-identifier">path</span> ) <span class="ruby-operator">:</span> <span class="ruby-identifier">path</span>
36:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;&quot;</span>
37:         <span class="ruby-identifier">document</span> = <span class="ruby-keyword kw">false</span>
38:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
39:           <span class="ruby-identifier">op</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
40:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">op</span>
41:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:node</span>
42:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:attribute</span>
43:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
44:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;@&quot;</span>
45:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:child</span>
46:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
47:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:descendant_or_self</span>
48:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span>
49:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:self</span>
50:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;.&quot;</span>
51:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:parent</span>
52:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;..&quot;</span>
53:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:any</span>
54:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;*&quot;</span>
55:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:text</span>
56:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;text()&quot;</span>
57:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:following</span>, <span class="ruby-identifier">:following_sibling</span>,
58:                 <span class="ruby-identifier">:ancestor</span>, <span class="ruby-identifier">:ancestor_or_self</span>, <span class="ruby-identifier">:descendant</span>,
59:                 <span class="ruby-identifier">:namespace</span>, <span class="ruby-identifier">:preceding</span>, <span class="ruby-identifier">:preceding_sibling</span>
60:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
61:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;_&quot;</span>, <span class="ruby-value str">&quot;-&quot;</span>)
62:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;::&quot;</span>
63:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:qname</span>
64:             <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
65:             <span class="ruby-identifier">name</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
66:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prefix</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
67:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
68:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:predicate</span>
69:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'['</span>
70:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span> ) {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">abbreviate</span>( <span class="ruby-identifier">x</span> ) }
71:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">']'</span>
72:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:document</span>
73:             <span class="ruby-identifier">document</span> = <span class="ruby-keyword kw">true</span>
74:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:function</span>
75:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
76:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;( &quot;</span>
77:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>[<span class="ruby-value">0</span>] ) {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">abbreviate</span>( <span class="ruby-identifier">x</span> )}
78:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; )&quot;</span>
79:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:literal</span>
80:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">%Q{ &quot;#{path.shift}&quot; }</span>
81:           <span class="ruby-keyword kw">else</span>
82:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
83:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;UNKNOWN(&quot;</span>
84:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">inspect</span>
85:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;)&quot;</span>
86:           <span class="ruby-keyword kw">end</span>
87:         <span class="ruby-keyword kw">end</span>
88:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">string</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">document</span>
89:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">string</span>
90:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005336">
                    
                    <a name="M005336"></a><b>expand</b>( path )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005336_source')" id="l_M005336_source">show</a>
                        
                    </p>
                    <div id="M005336_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 92</span>
 92:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expand</span>( <span class="ruby-identifier">path</span> )
 93:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">parse</span>( <span class="ruby-identifier">path</span> ) <span class="ruby-operator">:</span> <span class="ruby-identifier">path</span>
 94:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;&quot;</span>
 95:         <span class="ruby-identifier">document</span> = <span class="ruby-keyword kw">false</span>
 96:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
 97:           <span class="ruby-identifier">op</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
 98:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">op</span>
 99:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:node</span>
100:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;node()&quot;</span>
101:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:attribute</span>, <span class="ruby-identifier">:child</span>, <span class="ruby-identifier">:following</span>, <span class="ruby-identifier">:following_sibling</span>,
102:                 <span class="ruby-identifier">:ancestor</span>, <span class="ruby-identifier">:ancestor_or_self</span>, <span class="ruby-identifier">:descendant</span>, <span class="ruby-identifier">:descendant_or_self</span>,
103:                 <span class="ruby-identifier">:namespace</span>, <span class="ruby-identifier">:preceding</span>, <span class="ruby-identifier">:preceding_sibling</span>, <span class="ruby-identifier">:self</span>, <span class="ruby-identifier">:parent</span>
104:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
105:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;_&quot;</span>, <span class="ruby-value str">&quot;-&quot;</span>)
106:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;::&quot;</span>
107:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:any</span>
108:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;*&quot;</span>
109:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:qname</span>
110:             <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
111:             <span class="ruby-identifier">name</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
112:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prefix</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
113:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
114:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:predicate</span>
115:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'['</span>
116:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span> ) { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">expand</span>(<span class="ruby-identifier">x</span>) }
117:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">']'</span>
118:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:document</span>
119:             <span class="ruby-identifier">document</span> = <span class="ruby-keyword kw">true</span>
120:           <span class="ruby-keyword kw">else</span>
121:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;/&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
122:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;UNKNOWN(&quot;</span>
123:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">inspect</span>
124:             <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;)&quot;</span>
125:           <span class="ruby-keyword kw">end</span>
126:         <span class="ruby-keyword kw">end</span>
127:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;/&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">string</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">document</span>
128:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">string</span>
129:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005330">
                    
                    <a name="M005330"></a><b>namespaces=</b>( namespaces )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005330_source')" id="l_M005330_source">show</a>
                        
                    </p>
                    <div id="M005330_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 14</span>
14:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">namespaces=</span>( <span class="ruby-identifier">namespaces</span> )
15:         <span class="ruby-constant">Functions</span><span class="ruby-operator">::</span><span class="ruby-identifier">namespace_context</span> = <span class="ruby-identifier">namespaces</span>
16:         <span class="ruby-ivar">@namespaces</span> = <span class="ruby-identifier">namespaces</span>
17:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005331">
                    
                    <a name="M005331"></a><b>parse</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005331_source')" id="l_M005331_source">show</a>
                        
                    </p>
                    <div id="M005331_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 19</span>
19:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse</span> <span class="ruby-identifier">path</span>
20:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">dup</span>
21:         <span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/([\(\[])\s+/</span>, <span class="ruby-value str">'\1'</span>) <span class="ruby-comment cmt"># Strip ignorable spaces</span>
22:         <span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-regexp re">/\s+([\]\)])/</span>, <span class="ruby-value str">'\1'</span>)
23:         <span class="ruby-identifier">parsed</span> = []
24:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">OrExpr</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>)
25:         <span class="ruby-identifier">parsed</span>
26:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005333">
                    
                    <a name="M005333"></a><b>predicate</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005333_source')" id="l_M005333_source">show</a>
                        
                    </p>
                    <div id="M005333_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 28</span>
28:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">predicate</span> <span class="ruby-identifier">path</span>
29:         <span class="ruby-identifier">parsed</span> = []
30:         <span class="ruby-constant">Predicate</span>( <span class="ruby-node">&quot;[#{path}]&quot;</span>, <span class="ruby-identifier">parsed</span> )
31:         <span class="ruby-identifier">parsed</span>
32:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005338">
                    
                    <a name="M005338"></a><b>predicate_to_string</b>( path, &amp;block )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005338_source')" id="l_M005338_source">show</a>
                        
                    </p>
                    <div id="M005338_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 131</span>
131:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
132:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;&quot;</span>
133:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>]
134:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:and</span>, <span class="ruby-identifier">:or</span>, <span class="ruby-identifier">:mult</span>, <span class="ruby-identifier">:plus</span>, <span class="ruby-identifier">:minus</span>, <span class="ruby-identifier">:neq</span>, <span class="ruby-identifier">:eq</span>, <span class="ruby-identifier">:lt</span>, <span class="ruby-identifier">:gt</span>, <span class="ruby-identifier">:lteq</span>, <span class="ruby-identifier">:gteq</span>, <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">:mod</span>, <span class="ruby-identifier">:union</span>
135:           <span class="ruby-identifier">op</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
136:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">op</span>
137:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:eq</span>
138:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;=&quot;</span>
139:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:lt</span>
140:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;&lt;&quot;</span>
141:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:gt</span>
142:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;&gt;&quot;</span>
143:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:lteq</span>
144:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;&lt;=&quot;</span>
145:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:gteq</span>
146:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;&gt;=&quot;</span>
147:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:neq</span>
148:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;!=&quot;</span>
149:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:union</span>
150:             <span class="ruby-identifier">op</span> = <span class="ruby-value str">&quot;|&quot;</span>
151:           <span class="ruby-keyword kw">end</span>
152:           <span class="ruby-identifier">left</span> = <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
153:           <span class="ruby-identifier">right</span> = <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
154:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
155:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">left</span>
156:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
157:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">to_s</span>
158:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
159:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">right</span>
160:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
161:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:function</span>
162:           <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
163:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
164:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
165:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;( &quot;</span>
166:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">predicate_to_string</span>( <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> )
167:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; )&quot;</span>
168:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:literal</span>
169:           <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>
170:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
171:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">inspect</span>
172:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
173:         <span class="ruby-keyword kw">else</span>
174:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
175:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">yield</span>( <span class="ruby-identifier">path</span> )
176:           <span class="ruby-identifier">string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; &quot;</span>
177:         <span class="ruby-keyword kw">end</span>
178:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">squeeze</span>(<span class="ruby-value str">&quot; &quot;</span>)
179:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M005353">
                    
                    <a name="M005353"></a><b>AdditiveExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005353">AdditiveExpr</a> (&#8217;+&#8217; | S
&#8217;-&#8217;) <a href="XPathParser.html#M005363">MultiplicativeExpr</a>
| <a href="XPathParser.html#M005363">MultiplicativeExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005353_source')" id="l_M005353_source">show</a>
                        
                    </p>
                    <div id="M005353_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 448</span>
448:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AdditiveExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
449:         <span class="ruby-comment cmt">#puts &quot;ADDITIVE &gt;&gt;&gt; #{path}&quot;</span>
450:         <span class="ruby-identifier">n</span> = []
451:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">MultiplicativeExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
452:         <span class="ruby-comment cmt">#puts &quot;ADDITIVE &lt;&lt;&lt; #{rest}&quot;</span>
453:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
454:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*(\+| -)\s*/</span>
455:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?+</span>
456:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:plus</span>, <span class="ruby-identifier">n</span>, [] ]
457:             <span class="ruby-keyword kw">else</span>
458:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:minus</span>, <span class="ruby-identifier">n</span>, [] ]
459:             <span class="ruby-keyword kw">end</span>
460:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">MultiplicativeExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
461:           <span class="ruby-keyword kw">end</span>
462:         <span class="ruby-keyword kw">end</span>
463:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
464:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
465:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
466:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
467:         <span class="ruby-keyword kw">end</span>
468:         <span class="ruby-identifier">rest</span>
469:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005350">
                    
                    <a name="M005350"></a><b>AndExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005350">AndExpr</a> S &#8216;and&#8217; S <a
href="XPathParser.html#M005351">EqualityExpr</a> | <a
href="XPathParser.html#M005351">EqualityExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005350_source')" id="l_M005350_source">show</a>
                        
                    </p>
                    <div id="M005350_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 373</span>
373:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AndExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
374:         <span class="ruby-comment cmt">#puts &quot;AND &gt;&gt;&gt; #{path}&quot;</span>
375:         <span class="ruby-identifier">n</span> = []
376:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">EqualityExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
377:         <span class="ruby-comment cmt">#puts &quot;AND &lt;&lt;&lt; #{rest}&quot;</span>
378:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
379:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*( and )/</span>
380:             <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:and</span>, <span class="ruby-identifier">n</span>, [] ]
381:             <span class="ruby-comment cmt">#puts &quot;AND &gt;&gt;&gt; #{rest}&quot;</span>
382:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">EqualityExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
383:             <span class="ruby-comment cmt">#puts &quot;AND &lt;&lt;&lt; #{rest}&quot;</span>
384:           <span class="ruby-keyword kw">end</span>
385:         <span class="ruby-keyword kw">end</span>
386:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
387:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
388:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
389:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
390:         <span class="ruby-keyword kw">end</span>
391:         <span class="ruby-identifier">rest</span>
392:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005351">
                    
                    <a name="M005351"></a><b>EqualityExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005351">EqualityExpr</a> (&#8217;=&#8217; |
&#8217;!=&#8217;) <a href="XPathParser.html#M005352">RelationalExpr</a> |
<a href="XPathParser.html#M005352">RelationalExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005351_source')" id="l_M005351_source">show</a>
                        
                    </p>
                    <div id="M005351_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 396</span>
396:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">EqualityExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
397:         <span class="ruby-comment cmt">#puts &quot;EQUALITY &gt;&gt;&gt; #{path}&quot;</span>
398:         <span class="ruby-identifier">n</span> = []
399:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">RelationalExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
400:         <span class="ruby-comment cmt">#puts &quot;EQUALITY &lt;&lt;&lt; #{rest}&quot;</span>
401:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
402:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*(!?=)\s*/</span>
403:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?!</span>
404:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:neq</span>, <span class="ruby-identifier">n</span>, [] ]
405:             <span class="ruby-keyword kw">else</span>
406:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:eq</span>, <span class="ruby-identifier">n</span>, [] ]
407:             <span class="ruby-keyword kw">end</span>
408:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">RelationalExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
409:           <span class="ruby-keyword kw">end</span>
410:         <span class="ruby-keyword kw">end</span>
411:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
412:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
413:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
414:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
415:         <span class="ruby-keyword kw">end</span>
416:         <span class="ruby-identifier">rest</span>
417:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005375">
                    
                    <a name="M005375"></a><b>FilterExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005375">FilterExpr</a> <a
href="XPathParser.html#M005348">Predicate</a> | <a
href="XPathParser.html#M005376">PrimaryExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005375_source')" id="l_M005375_source">show</a>
                        
                    </p>
                    <div id="M005375_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 561</span>
561:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FilterExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
562:         <span class="ruby-comment cmt">#puts &quot;FILTER &gt;&gt;&gt; #{path}&quot;</span>
563:         <span class="ruby-identifier">n</span> = []
564:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">PrimaryExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
565:         <span class="ruby-comment cmt">#puts &quot;FILTER &lt;&lt;&lt; #{path}&quot;</span>
566:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">Predicate</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?[</span>
567:         <span class="ruby-comment cmt">#puts &quot;FILTER &lt;&lt;&lt; #{path}&quot;</span>
568:         <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">n</span>)
569:         <span class="ruby-identifier">path</span>
570:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005379">
                    
                    <a name="M005379"></a><b>FunctionCall</b>(rest, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| FUNCTION_NAME &#8217;(&#8217; ( expr ( &#8217;,&#8217; expr )* )?
&#8217;)&#8217;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005379_source')" id="l_M005379_source">show</a>
                        
                    </p>
                    <div id="M005379_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 621</span>
621:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FunctionCall</span> <span class="ruby-identifier">rest</span>, <span class="ruby-identifier">parsed</span>
622:         <span class="ruby-identifier">path</span>, <span class="ruby-identifier">arguments</span> = <span class="ruby-identifier">parse_args</span>(<span class="ruby-identifier">rest</span>)
623:         <span class="ruby-identifier">argset</span> = []
624:         <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">argument</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">arguments</span>
625:           <span class="ruby-identifier">args</span> = []
626:           <span class="ruby-constant">OrExpr</span>( <span class="ruby-identifier">argument</span>, <span class="ruby-identifier">args</span> )
627:           <span class="ruby-identifier">argset</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">args</span>
628:         <span class="ruby-keyword kw">end</span>
629:         <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">argset</span>
630:         <span class="ruby-identifier">path</span>
631:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005340">
                    
                    <a name="M005340"></a><b>LocationPath</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="XPathParser.html#M005340">LocationPath</a>
</p>
<pre>
  | RelativeLocationPath
  | '/' RelativeLocationPath?
  | '//' RelativeLocationPath
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005340_source')" id="l_M005340_source">show</a>
                        
                    </p>
                    <div id="M005340_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 186</span>
186:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">LocationPath</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
187:         <span class="ruby-comment cmt">#puts &quot;LocationPath '#{path}'&quot;</span>
188:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">strip</span>
189:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
190:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:document</span>
191:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
192:             <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:descendant_or_self</span>
193:             <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:node</span>
194:             <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
195:           <span class="ruby-keyword kw">else</span>
196:             <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
197:           <span class="ruby-keyword kw">end</span>
198:         <span class="ruby-keyword kw">end</span>
199:         <span class="ruby-comment cmt">#puts parsed.inspect</span>
200:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">RelativeLocationPath</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span> ) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
201:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005363">
                    
                    <a name="M005363"></a><b>MultiplicativeExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005363">MultiplicativeExpr</a>
(&#8217;*&#8217; | S (&#8216;div&#8217; | &#8216;mod&#8217;) S) <a
href="XPathParser.html#M005372">UnaryExpr</a> | <a
href="XPathParser.html#M005372">UnaryExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005363_source')" id="l_M005363_source">show</a>
                        
                    </p>
                    <div id="M005363_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 473</span>
473:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">MultiplicativeExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
474:         <span class="ruby-comment cmt">#puts &quot;MULT &gt;&gt;&gt; #{path}&quot;</span>
475:         <span class="ruby-identifier">n</span> = []
476:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">UnaryExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
477:         <span class="ruby-comment cmt">#puts &quot;MULT &lt;&lt;&lt; #{rest}&quot;</span>
478:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
479:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*(\*| div | mod )\s*/</span>
480:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?*</span>
481:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:mult</span>, <span class="ruby-identifier">n</span>, [] ]
482:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">include?</span>( <span class="ruby-value str">&quot;div&quot;</span> )
483:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">n</span>, [] ]
484:             <span class="ruby-keyword kw">else</span>
485:               <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:mod</span>, <span class="ruby-identifier">n</span>, [] ]
486:             <span class="ruby-keyword kw">end</span>
487:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">UnaryExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
488:           <span class="ruby-keyword kw">end</span>
489:         <span class="ruby-keyword kw">end</span>
490:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
491:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
492:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
493:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
494:         <span class="ruby-keyword kw">end</span>
495:         <span class="ruby-identifier">rest</span>
496:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005347">
                    
                    <a name="M005347"></a><b>NodeTest</b>(path, parsed)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005347_source')" id="l_M005347_source">show</a>
                        
                    </p>
                    <div id="M005347_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 284</span>
284:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">NodeTest</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
285:         <span class="ruby-comment cmt">#puts &quot;NodeTest with #{path}&quot;</span>
286:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">path</span>
287:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\*/</span>
288:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
289:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:any</span>
290:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">NODE_TYPE</span>
291:           <span class="ruby-identifier">type</span> = <span class="ruby-identifier">$1</span>
292:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
293:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">'-'</span>, <span class="ruby-value str">'_'</span>).<span class="ruby-identifier">intern</span>
294:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">PI</span>
295:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
296:           <span class="ruby-identifier">literal</span> = <span class="ruby-keyword kw">nil</span>
297:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/^\s*\)/</span>
298:             <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">LITERAL</span>
299:             <span class="ruby-identifier">literal</span> = <span class="ruby-identifier">$1</span>
300:             <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
301:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ParseException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Missing ')' after processing instruction&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?)</span>
302:             <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
303:           <span class="ruby-keyword kw">end</span>
304:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:processing_instruction</span>
305:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">literal</span> <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>)
306:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">NCNAMETEST</span>
307:           <span class="ruby-comment cmt">#puts &quot;NCNAMETEST&quot;</span>
308:           <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">$1</span>
309:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
310:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:namespace</span>
311:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prefix</span>
312:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">QNAME</span>
313:           <span class="ruby-comment cmt">#puts &quot;QNAME&quot;</span>
314:           <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">$1</span>
315:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$2</span>
316:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
317:           <span class="ruby-identifier">prefix</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">prefix</span>
318:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:qname</span>
319:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prefix</span>
320:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
321:         <span class="ruby-keyword kw">end</span>
322:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span>
323:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005349">
                    
                    <a name="M005349"></a><b>OrExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005349">OrExpr</a> S &#8216;or&#8217; S <a
href="XPathParser.html#M005350">AndExpr</a> | <a
href="XPathParser.html#M005350">AndExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005349_source')" id="l_M005349_source">show</a>
                        
                    </p>
                    <div id="M005349_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 352</span>
352:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">OrExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
353:         <span class="ruby-comment cmt">#puts &quot;OR &gt;&gt;&gt; #{path}&quot;</span>
354:         <span class="ruby-identifier">n</span> = []
355:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">AndExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
356:         <span class="ruby-comment cmt">#puts &quot;OR &lt;&lt;&lt; #{rest}&quot;</span>
357:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
358:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*( or )/</span>
359:             <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:or</span>, <span class="ruby-identifier">n</span>, [] ]
360:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">AndExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
361:           <span class="ruby-keyword kw">end</span>
362:         <span class="ruby-keyword kw">end</span>
363:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
364:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
365:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
366:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
367:         <span class="ruby-keyword kw">end</span>
368:         <span class="ruby-identifier">rest</span>
369:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005374">
                    
                    <a name="M005374"></a><b>PathExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005340">LocationPath</a> | <a
href="XPathParser.html#M005375">FilterExpr</a> (&#8217;/&#8217; |
&#8217;//&#8217;) <a
href="XPathParser.html#M005343">RelativeLocationPath</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005374_source')" id="l_M005374_source">show</a>
                        
                    </p>
                    <div id="M005374_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 541</span>
541:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">PathExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
542:         <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*/</span>
543:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
544:         <span class="ruby-comment cmt">#puts &quot;PATH &gt;&gt;&gt; #{path}&quot;</span>
545:         <span class="ruby-identifier">n</span> = []
546:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">FilterExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
547:         <span class="ruby-comment cmt">#puts &quot;PATH &lt;&lt;&lt; '#{rest}'&quot;</span>
548:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
549:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">rest</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
550:             <span class="ruby-keyword kw">return</span> <span class="ruby-constant">RelativeLocationPath</span>(<span class="ruby-identifier">rest</span>, <span class="ruby-identifier">n</span>)
551:           <span class="ruby-keyword kw">end</span>
552:         <span class="ruby-keyword kw">end</span>
553:         <span class="ruby-comment cmt">#puts &quot;BEFORE WITH '#{rest}'&quot;</span>
554:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">LocationPath</span>(<span class="ruby-identifier">rest</span>, <span class="ruby-identifier">n</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A[\/\.\@\[\w*]/</span>
555:         <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">n</span>)
556:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">rest</span>
557:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005348">
                    
                    <a name="M005348"></a><b>Predicate</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
Filters the supplied nodeset on the predicate(s)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005348_source')" id="l_M005348_source">show</a>
                        
                    </p>
                    <div id="M005348_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 326</span>
326:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Predicate</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
327:         <span class="ruby-comment cmt">#puts &quot;PREDICATE with #{path}&quot;</span>
328:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?[</span>
329:         <span class="ruby-identifier">predicates</span> = []
330:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?[</span>
331:           <span class="ruby-identifier">path</span>, <span class="ruby-identifier">expr</span> = <span class="ruby-identifier">get_group</span>(<span class="ruby-identifier">path</span>)
332:           <span class="ruby-identifier">predicates</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">expr</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">expr</span>
333:         <span class="ruby-keyword kw">end</span>
334:         <span class="ruby-comment cmt">#puts &quot;PREDICATES = #{predicates.inspect}&quot;</span>
335:         <span class="ruby-identifier">predicates</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">pred</span><span class="ruby-operator">|</span>
336:           <span class="ruby-comment cmt">#puts &quot;ORING #{pred}&quot;</span>
337:           <span class="ruby-identifier">preds</span> = []
338:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:predicate</span>
339:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">preds</span>
340:           <span class="ruby-constant">OrExpr</span>(<span class="ruby-identifier">pred</span>, <span class="ruby-identifier">preds</span>)
341:         }
342:         <span class="ruby-comment cmt">#puts &quot;PREDICATES = #{predicates.inspect}&quot;</span>
343:         <span class="ruby-identifier">path</span>
344:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005376">
                    
                    <a name="M005376"></a><b>PrimaryExpr</b>(path, parsed)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005376_source')" id="l_M005376_source">show</a>
                        
                    </p>
                    <div id="M005376_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 580</span>
580:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">PrimaryExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
581:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">path</span>
582:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">VARIABLE_REFERENCE</span>
583:           <span class="ruby-identifier">varname</span> = <span class="ruby-identifier">$1</span>
584:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
585:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:variable</span>
586:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">varname</span>
587:           <span class="ruby-comment cmt">#arry &lt;&lt; @variables[ varname ]</span>
588:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^(\w[-\w]*)(?:\()/</span>
589:           <span class="ruby-comment cmt">#puts &quot;PrimaryExpr :: Function &gt;&gt;&gt; #$1 -- '#$''&quot;</span>
590:           <span class="ruby-identifier">fname</span> = <span class="ruby-identifier">$1</span>
591:           <span class="ruby-identifier">tmp</span> = <span class="ruby-identifier">$'</span>
592:           <span class="ruby-comment cmt">#puts &quot;#{fname} =~ #{NT.inspect}&quot;</span>
593:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fname</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">NT</span>
594:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">tmp</span>
595:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:function</span>
596:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fname</span>
597:           <span class="ruby-identifier">path</span> = <span class="ruby-constant">FunctionCall</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>)
598:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">NUMBER</span>
599:           <span class="ruby-comment cmt">#puts &quot;LITERAL or NUMBER: #$1&quot;</span>
600:           <span class="ruby-identifier">varname</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-identifier">$2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">$1</span>
601:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
602:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:literal</span>
603:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">varname</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'.'</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">varname</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">varname</span>.<span class="ruby-identifier">to_i</span>)
604:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">LITERAL</span>
605:           <span class="ruby-comment cmt">#puts &quot;LITERAL or NUMBER: #$1&quot;</span>
606:           <span class="ruby-identifier">varname</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-identifier">$2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">$1</span>
607:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
608:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:literal</span>
609:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">varname</span>
610:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\(/</span>                                               <span class="ruby-comment cmt">#/</span>
611:           <span class="ruby-identifier">path</span>, <span class="ruby-identifier">contents</span> = <span class="ruby-identifier">get_group</span>(<span class="ruby-identifier">path</span>)
612:           <span class="ruby-identifier">contents</span> = <span class="ruby-identifier">contents</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
613:           <span class="ruby-identifier">n</span> = []
614:           <span class="ruby-constant">OrExpr</span>( <span class="ruby-identifier">contents</span>, <span class="ruby-identifier">n</span> )
615:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">n</span>)
616:         <span class="ruby-keyword kw">end</span>
617:         <span class="ruby-identifier">path</span>
618:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005352">
                    
                    <a name="M005352"></a><b>RelationalExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005352">RelationalExpr</a> (&#8217;<&#8217; |
&#8217;>&#8217; | &#8217;<=&#8217; | &#8217;>=&#8217;) <a
href="XPathParser.html#M005353">AdditiveExpr</a> | <a
href="XPathParser.html#M005353">AdditiveExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005352_source')" id="l_M005352_source">show</a>
                        
                    </p>
                    <div id="M005352_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 421</span>
421:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RelationalExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
422:         <span class="ruby-comment cmt">#puts &quot;RELATION &gt;&gt;&gt; #{path}&quot;</span>
423:         <span class="ruby-identifier">n</span> = []
424:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">AdditiveExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
425:         <span class="ruby-comment cmt">#puts &quot;RELATION &lt;&lt;&lt; #{rest}&quot;</span>
426:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
427:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*([&lt;&gt;]=?)\s*/</span>
428:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?&lt;</span>
429:               <span class="ruby-identifier">sym</span> = <span class="ruby-value str">&quot;lt&quot;</span>
430:             <span class="ruby-keyword kw">else</span>
431:               <span class="ruby-identifier">sym</span> = <span class="ruby-value str">&quot;gt&quot;</span>
432:             <span class="ruby-keyword kw">end</span>
433:             <span class="ruby-identifier">sym</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;eq&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?=</span>
434:             <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">intern</span>, <span class="ruby-identifier">n</span>, [] ]
435:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">AdditiveExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
436:           <span class="ruby-keyword kw">end</span>
437:         <span class="ruby-keyword kw">end</span>
438:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
439:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">n</span>)
440:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
441:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
442:         <span class="ruby-keyword kw">end</span>
443:         <span class="ruby-identifier">rest</span>
444:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005343">
                    
                    <a name="M005343"></a><b>RelativeLocationPath</b>(path, parsed)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005343_source')" id="l_M005343_source">show</a>
                        
                    </p>
                    <div id="M005343_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 212</span>
212:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RelativeLocationPath</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
213:         <span class="ruby-comment cmt">#puts &quot;RelativeLocationPath #{path}&quot;</span>
214:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
215:           <span class="ruby-comment cmt"># (axis or @ or &lt;child::&gt;) nodetest predicate  &gt;</span>
216:           <span class="ruby-comment cmt"># OR                                          &gt;  / Step</span>
217:           <span class="ruby-comment cmt"># (. or ..)                                    &gt;</span>
218:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?.</span>
219:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?.</span>
220:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:parent</span>
221:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:node</span>
222:               <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
223:             <span class="ruby-keyword kw">else</span>
224:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:self</span>
225:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:node</span>
226:               <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
227:             <span class="ruby-keyword kw">end</span>
228:           <span class="ruby-keyword kw">else</span>
229:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?@</span>
230:               <span class="ruby-comment cmt">#puts &quot;ATTRIBUTE&quot;</span>
231:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:attribute</span>
232:               <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
233:               <span class="ruby-comment cmt"># Goto Nodetest</span>
234:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">AXIS</span>
235:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">'-'</span>,<span class="ruby-value str">'_'</span>).<span class="ruby-identifier">intern</span>
236:               <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
237:               <span class="ruby-comment cmt"># Goto Nodetest</span>
238:             <span class="ruby-keyword kw">else</span>
239:               <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:child</span>
240:             <span class="ruby-keyword kw">end</span>
241: 
242:             <span class="ruby-comment cmt">#puts &quot;NODETESTING '#{path}'&quot;</span>
243:             <span class="ruby-identifier">n</span> = []
244:             <span class="ruby-identifier">path</span> = <span class="ruby-constant">NodeTest</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span>)
245:             <span class="ruby-comment cmt">#puts &quot;NODETEST RETURNED '#{path}'&quot;</span>
246: 
247:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?[</span>
248:               <span class="ruby-identifier">path</span> = <span class="ruby-constant">Predicate</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
249:             <span class="ruby-keyword kw">end</span>
250: 
251:             <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">n</span>)
252:           <span class="ruby-keyword kw">end</span>
253: 
254:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
255:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
256:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?/</span>
257:                 <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:descendant_or_self</span>
258:                 <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:node</span>
259:                 <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
260:               <span class="ruby-keyword kw">else</span>
261:                 <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
262:               <span class="ruby-keyword kw">end</span>
263:             <span class="ruby-keyword kw">else</span>
264:               <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span>
265:             <span class="ruby-keyword kw">end</span>
266:           <span class="ruby-keyword kw">end</span>
267:         <span class="ruby-keyword kw">end</span>
268:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">path</span>
269:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005372">
                    
                    <a name="M005372"></a><b>UnaryExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| &#8217;-&#8217; <a href="XPathParser.html#M005372">UnaryExpr</a> | <a
href="XPathParser.html#M005373">UnionExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005372_source')" id="l_M005372_source">show</a>
                        
                    </p>
                    <div id="M005372_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 500</span>
500:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">UnaryExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
501:         <span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^(\-*)/</span>
502:         <span class="ruby-identifier">path</span> = <span class="ruby-identifier">$'</span>
503:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">and</span> ((<span class="ruby-identifier">$1</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>)
504:           <span class="ruby-identifier">mult</span> = <span class="ruby-value">-1</span>
505:         <span class="ruby-keyword kw">else</span>
506:           <span class="ruby-identifier">mult</span> = <span class="ruby-value">1</span>
507:         <span class="ruby-keyword kw">end</span>
508:         <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">:neg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mult</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
509: 
510:         <span class="ruby-comment cmt">#puts &quot;UNARY &gt;&gt;&gt; #{path}&quot;</span>
511:         <span class="ruby-identifier">n</span> = []
512:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">UnionExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
513:         <span class="ruby-comment cmt">#puts &quot;UNARY &lt;&lt;&lt; #{path}&quot;</span>
514:         <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">concat</span>( <span class="ruby-identifier">n</span> )
515:         <span class="ruby-identifier">path</span>
516:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005373">
                    
                    <a name="M005373"></a><b>UnionExpr</b>(path, parsed)
                    
                </div>
                
                <div class="description">
                  <p>
| <a href="XPathParser.html#M005373">UnionExpr</a> &#8217;|&#8217; <a
href="XPathParser.html#M005374">PathExpr</a> | <a
href="XPathParser.html#M005374">PathExpr</a>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005373_source')" id="l_M005373_source">show</a>
                        
                    </p>
                    <div id="M005373_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 520</span>
520:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">UnionExpr</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">parsed</span>
521:         <span class="ruby-comment cmt">#puts &quot;UNION &gt;&gt;&gt; #{path}&quot;</span>
522:         <span class="ruby-identifier">n</span> = []
523:         <span class="ruby-identifier">rest</span> = <span class="ruby-constant">PathExpr</span>( <span class="ruby-identifier">path</span>, <span class="ruby-identifier">n</span> )
524:         <span class="ruby-comment cmt">#puts &quot;UNION &lt;&lt;&lt; #{rest}&quot;</span>
525:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">path</span>
526:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">rest</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*(\|)\s*/</span>
527:             <span class="ruby-identifier">n</span> = [ <span class="ruby-identifier">:union</span>, <span class="ruby-identifier">n</span>, [] ]
528:             <span class="ruby-identifier">rest</span> = <span class="ruby-constant">PathExpr</span>( <span class="ruby-identifier">$'</span>, <span class="ruby-identifier">n</span>[<span class="ruby-value">-1</span>] )
529:           <span class="ruby-keyword kw">end</span>
530:         <span class="ruby-keyword kw">end</span>
531:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
532:           <span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">replace</span>( <span class="ruby-identifier">n</span> )
533:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
534:           <span class="ruby-identifier">parsed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">n</span>
535:         <span class="ruby-keyword kw">end</span>
536:         <span class="ruby-identifier">rest</span>
537:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005381">
                    
                    <a name="M005381"></a><b>get_group</b>(string)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="XPathParser.html#M005381">get_group</a>( &#8217;[foo]bar&#8217; )
-> [&#8216;bar&#8217;, &#8217;[foo]&#8217;]
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005381_source')" id="l_M005381_source">show</a>
                        
                    </p>
                    <div id="M005381_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 634</span>
634:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_group</span> <span class="ruby-identifier">string</span>
635:         <span class="ruby-identifier">ind</span> = <span class="ruby-value">0</span>
636:         <span class="ruby-identifier">depth</span> = <span class="ruby-value">0</span>
637:         <span class="ruby-identifier">st</span> = <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>,<span class="ruby-value">1</span>]
638:         <span class="ruby-identifier">en</span> = (<span class="ruby-identifier">st</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;(&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;)&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;]&quot;</span>)
639:         <span class="ruby-keyword kw">begin</span>
640:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span>,<span class="ruby-value">1</span>]
641:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">st</span>
642:             <span class="ruby-identifier">depth</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
643:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">en</span>
644:             <span class="ruby-identifier">depth</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
645:           <span class="ruby-keyword kw">end</span>
646:           <span class="ruby-identifier">ind</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
647:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">ind</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">length</span>
648:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">depth</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
649:         [<span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>], <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">ind</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]]
650:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005385">
                    
                    <a name="M005385"></a><b>parse_args</b>( string )
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005385_source')" id="l_M005385_source">show</a>
                        
                    </p>
                    <div id="M005385_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rexml/parsers/xpathparser.rb, line 652</span>
652:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_args</span>( <span class="ruby-identifier">string</span> )
653:         <span class="ruby-identifier">arguments</span> = []
654:         <span class="ruby-identifier">ind</span> = <span class="ruby-value">0</span>
655:         <span class="ruby-identifier">inquot</span> = <span class="ruby-keyword kw">false</span>
656:         <span class="ruby-identifier">inapos</span> = <span class="ruby-keyword kw">false</span>
657:         <span class="ruby-identifier">depth</span> = <span class="ruby-value">1</span>
658:         <span class="ruby-keyword kw">begin</span>
659:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span>]
660:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">?&quot;</span>
661:             <span class="ruby-identifier">inquot</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">inquot</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">inapos</span>
662:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">?'</span>
663:             <span class="ruby-identifier">inapos</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">inapos</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">inquot</span>
664:           <span class="ruby-keyword kw">else</span>
665:             <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">inquot</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">inapos</span>
666:               <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span>]
667:               <span class="ruby-keyword kw">when</span> <span class="ruby-value">?(</span>
668:                 <span class="ruby-identifier">depth</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
669:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
670:                   <span class="ruby-identifier">string</span> = <span class="ruby-identifier">string</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
671:                   <span class="ruby-identifier">ind</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
672:                 <span class="ruby-keyword kw">end</span>
673:               <span class="ruby-keyword kw">when</span> <span class="ruby-value">?)</span>
674:                 <span class="ruby-identifier">depth</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
675:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
676:                   <span class="ruby-identifier">s</span> = <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">ind</span>].<span class="ruby-identifier">strip</span>
677:                   <span class="ruby-identifier">arguments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
678:                   <span class="ruby-identifier">string</span> = <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
679:                 <span class="ruby-keyword kw">end</span>
680:               <span class="ruby-keyword kw">when</span> <span class="ruby-value">?,</span>
681:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
682:                   <span class="ruby-identifier">s</span> = <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">ind</span>].<span class="ruby-identifier">strip</span>
683:                   <span class="ruby-identifier">arguments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
684:                   <span class="ruby-identifier">string</span> = <span class="ruby-identifier">string</span>[<span class="ruby-identifier">ind</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
685:                   <span class="ruby-identifier">ind</span> = <span class="ruby-value">-1</span>
686:                 <span class="ruby-keyword kw">end</span>
687:               <span class="ruby-keyword kw">end</span>
688:             <span class="ruby-keyword kw">end</span>
689:           <span class="ruby-keyword kw">end</span>
690:           <span class="ruby-identifier">ind</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
691:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">ind</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">length</span>
692:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">depth</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
693:         [<span class="ruby-identifier">string</span>,<span class="ruby-identifier">arguments</span>]
694:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    