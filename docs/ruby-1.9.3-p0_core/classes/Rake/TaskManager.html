<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Rake::TaskManager</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            Rake::TaskManager 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/rake/task_manager_rb.html">lib/rake/task_manager.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
The <a href="TaskManager.html">TaskManager</a> module is a mixin for
managing tasks.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M003991">[]</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M004013">add_location</a>,</li>
                
                <li><a href="#M004021">attempt_rule</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M003999">clear</a>,</li>
                
                <li><a href="#M003987">create_rule</a>,</li>
                
                <li><a href="#M004007">current_scope</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M003988">define_task</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M003996">enhance_with_matching_rule</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M004014">find_location</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M004019">generate_name</a>,</li>
                
                <li><a href="#M004025">get_description</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M004008">in_namespace</a>,</li>
                
                <li><a href="#M003990">intern</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M004000">lookup</a>,</li>
                
                <li><a href="#M004004">lookup_in_scope</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M004024">make_sources</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M003986">new</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M003993">resolve_args</a>,</li>
                
                <li><a href="#M003994">resolve_args_without_dependencies</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M003992">synthesize_file_task</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M003997">tasks</a>,</li>
                
                <li><a href="#M003998">tasks_in_scope</a>,</li>
                
                <li><a href="#M004020">trace_rule</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>last_description</td>
            <td class='attr-desc'><p>
Track the last comment made in the Rakefile.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>record_task_metadata</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M003986">
                    
                    <a name="M003986"></a><b>new</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003986_source')" id="l_M003986_source">show</a>
                        
                    </p>
                    <div id="M003986_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 9</span>
 9:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
10:       <span class="ruby-keyword kw">super</span>
11:       <span class="ruby-ivar">@tasks</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
12:       <span class="ruby-ivar">@rules</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
13:       <span class="ruby-ivar">@scope</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
14:       <span class="ruby-ivar">@last_description</span> = <span class="ruby-keyword kw">nil</span>
15:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M003991">
                    
                    <a name="M003991"></a><b>[]</b>(task_name, scopes=nil)
                    
                </div>
                
                <div class="description">
                  <p>
<a href="../Find.html">Find</a> a matching task for <tt>task_name</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003991_source')" id="l_M003991_source">show</a>
                        
                    </p>
                    <div id="M003991_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 44</span>
44:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">scopes</span>=<span class="ruby-keyword kw">nil</span>)
45:       <span class="ruby-identifier">task_name</span> = <span class="ruby-identifier">task_name</span>.<span class="ruby-identifier">to_s</span>
46:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">lookup</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">scopes</span>) <span class="ruby-keyword kw">or</span>
47:         <span class="ruby-identifier">enhance_with_matching_rule</span>(<span class="ruby-identifier">task_name</span>) <span class="ruby-keyword kw">or</span>
48:         <span class="ruby-identifier">synthesize_file_task</span>(<span class="ruby-identifier">task_name</span>) <span class="ruby-keyword kw">or</span>
49:         <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;Don't know how to build task '#{task_name}'&quot;</span>
50:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003999">
                    
                    <a name="M003999"></a><b>clear</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Clear all tasks in this application.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003999_source')" id="l_M003999_source">show</a>
                        
                    </p>
                    <div id="M003999_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 157</span>
157:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear</span>
158:       <span class="ruby-ivar">@tasks</span>.<span class="ruby-identifier">clear</span>
159:       <span class="ruby-ivar">@rules</span>.<span class="ruby-identifier">clear</span>
160:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003987">
                    
                    <a name="M003987"></a><b>create_rule</b>(*args, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003987_source')" id="l_M003987_source">show</a>
                        
                    </p>
                    <div id="M003987_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 17</span>
17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_rule</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
18:       <span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">_</span>, <span class="ruby-identifier">deps</span> = <span class="ruby-identifier">resolve_args</span>(<span class="ruby-identifier">args</span>)
19:       <span class="ruby-identifier">pattern</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">quote</span>(<span class="ruby-identifier">pattern</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'$'</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">pattern</span>
20:       <span class="ruby-ivar">@rules</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">deps</span>, <span class="ruby-identifier">block</span>]
21:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004007">
                    
                    <a name="M004007"></a><b>current_scope</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return the list of scope names currently active in the task manager.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004007_source')" id="l_M004007_source">show</a>
                        
                    </p>
                    <div id="M004007_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 197</span>
197:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_scope</span>
198:       <span class="ruby-ivar">@scope</span>.<span class="ruby-identifier">dup</span>
199:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003988">
                    
                    <a name="M003988"></a><b>define_task</b>(task_class, *args, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003988_source')" id="l_M003988_source">show</a>
                        
                    </p>
                    <div id="M003988_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 23</span>
23:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">define_task</span>(<span class="ruby-identifier">task_class</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
24:       <span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">arg_names</span>, <span class="ruby-identifier">deps</span> = <span class="ruby-identifier">resolve_args</span>(<span class="ruby-identifier">args</span>)
25:       <span class="ruby-identifier">task_name</span> = <span class="ruby-identifier">task_class</span>.<span class="ruby-identifier">scope_name</span>(<span class="ruby-ivar">@scope</span>, <span class="ruby-identifier">task_name</span>)
26:       <span class="ruby-identifier">deps</span> = [<span class="ruby-identifier">deps</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">deps</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_ary</span>)
27:       <span class="ruby-identifier">deps</span> = <span class="ruby-identifier">deps</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">to_s</span> }
28:       <span class="ruby-identifier">task</span> = <span class="ruby-identifier">intern</span>(<span class="ruby-identifier">task_class</span>, <span class="ruby-identifier">task_name</span>)
29:       <span class="ruby-identifier">task</span>.<span class="ruby-identifier">set_arg_names</span>(<span class="ruby-identifier">arg_names</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">arg_names</span>.<span class="ruby-identifier">empty?</span>
30:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">TaskManager</span>.<span class="ruby-identifier">record_task_metadata</span>
31:         <span class="ruby-identifier">add_location</span>(<span class="ruby-identifier">task</span>)
32:         <span class="ruby-identifier">task</span>.<span class="ruby-identifier">add_description</span>(<span class="ruby-identifier">get_description</span>(<span class="ruby-identifier">task</span>))
33:       <span class="ruby-keyword kw">end</span>
34:       <span class="ruby-identifier">task</span>.<span class="ruby-identifier">enhance</span>(<span class="ruby-identifier">deps</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
35:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003996">
                    
                    <a name="M003996"></a><b>enhance_with_matching_rule</b>(task_name, level=0)
                    
                </div>
                
                <div class="description">
                  <p>
If a rule can be found that matches the task name, enhance the task with
the prerequisites and actions from the rule. <a href="../Set.html">Set</a>
the source attribute of the task appropriately for the rule. Return the
enhanced task or nil of no rule was found.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003996_source')" id="l_M003996_source">show</a>
                        
                    </p>
                    <div id="M003996_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 127</span>
127:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">enhance_with_matching_rule</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">level</span>=<span class="ruby-value">0</span>)
128:       <span class="ruby-identifier">fail</span> <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleRecursionOverflowError</span>,
129:         <span class="ruby-value str">&quot;Rule Recursion Too Deep&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">level</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">16</span>
130:       <span class="ruby-ivar">@rules</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">extensions</span>, <span class="ruby-identifier">block</span><span class="ruby-operator">|</span>
131:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pattern</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">task_name</span>)
132:           <span class="ruby-identifier">task</span> = <span class="ruby-identifier">attempt_rule</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">extensions</span>, <span class="ruby-identifier">block</span>, <span class="ruby-identifier">level</span>)
133:           <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">task</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">task</span>
134:         <span class="ruby-keyword kw">end</span>
135:       <span class="ruby-keyword kw">end</span>
136:       <span class="ruby-keyword kw">nil</span>
137:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">RuleRecursionOverflowError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
138:       <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">add_target</span>(<span class="ruby-identifier">task_name</span>)
139:       <span class="ruby-identifier">fail</span> <span class="ruby-identifier">ex</span>
140:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004008">
                    
                    <a name="M004008"></a><b>in_namespace</b>(name)
                    
                </div>
                
                <div class="description">
                  <p>
Evaluate the block in a nested namespace named <tt>name</tt>. Create an
anonymous namespace if <tt>name</tt> is nil.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004008_source')" id="l_M004008_source">show</a>
                        
                    </p>
                    <div id="M004008_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 203</span>
203:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">in_namespace</span>(<span class="ruby-identifier">name</span>)
204:       <span class="ruby-identifier">name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">generate_name</span>
205:       <span class="ruby-ivar">@scope</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">name</span>)
206:       <span class="ruby-identifier">ns</span> = <span class="ruby-constant">NameSpace</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-ivar">@scope</span>)
207:       <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">ns</span>)
208:       <span class="ruby-identifier">ns</span>
209:     <span class="ruby-keyword kw">ensure</span>
210:       <span class="ruby-ivar">@scope</span>.<span class="ruby-identifier">pop</span>
211:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003990">
                    
                    <a name="M003990"></a><b>intern</b>(task_class, task_name)
                    
                </div>
                
                <div class="description">
                  <p>
Lookup a task. Return an existing task if found, otherwise create a task of
the current type.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003990_source')" id="l_M003990_source">show</a>
                        
                    </p>
                    <div id="M003990_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 39</span>
39:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">intern</span>(<span class="ruby-identifier">task_class</span>, <span class="ruby-identifier">task_name</span>)
40:       <span class="ruby-ivar">@tasks</span>[<span class="ruby-identifier">task_name</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">task_class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-keyword kw">self</span>)
41:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004000">
                    
                    <a name="M004000"></a><b>lookup</b>(task_name, initial_scope=nil)
                    
                </div>
                
                <div class="description">
                  <p>
Lookup a task, using scope and the scope hints in the task name. This
method performs straight lookups without trying to synthesize file tasks or
rules. Special scope names (e.g. &#8217;^&#8217;) are recognized. If no
scope argument is supplied, use the current scope. Return nil if the task
cannot be found.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004000_source')" id="l_M004000_source">show</a>
                        
                    </p>
                    <div id="M004000_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 167</span>
167:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lookup</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">initial_scope</span>=<span class="ruby-keyword kw">nil</span>)
168:       <span class="ruby-identifier">initial_scope</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@scope</span>
169:       <span class="ruby-identifier">task_name</span> = <span class="ruby-identifier">task_name</span>.<span class="ruby-identifier">to_s</span>
170:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">task_name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^rake:/</span>
171:         <span class="ruby-identifier">scopes</span> = []
172:         <span class="ruby-identifier">task_name</span> = <span class="ruby-identifier">task_name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^rake:/</span>, <span class="ruby-value str">''</span>)
173:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">task_name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^(\^+)/</span>
174:         <span class="ruby-identifier">scopes</span> = <span class="ruby-identifier">initial_scope</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">initial_scope</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">size</span>]
175:         <span class="ruby-identifier">task_name</span> = <span class="ruby-identifier">task_name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^(\^+)/</span>, <span class="ruby-value str">''</span>)
176:       <span class="ruby-keyword kw">else</span>
177:         <span class="ruby-identifier">scopes</span> = <span class="ruby-identifier">initial_scope</span>
178:       <span class="ruby-keyword kw">end</span>
179:       <span class="ruby-identifier">lookup_in_scope</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">scopes</span>)
180:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003993">
                    
                    <a name="M003993"></a><b>resolve_args</b>(args)
                    
                </div>
                
                <div class="description">
                  <p>
Resolve the arguments for a task/rule. Returns a triplet of [task_name,
arg_name_list, prerequisites].
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003993_source')" id="l_M003993_source">show</a>
                        
                    </p>
                    <div id="M003993_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 59</span>
59:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resolve_args</span>(<span class="ruby-identifier">args</span>)
60:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
61:         <span class="ruby-identifier">deps</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span>
62:         <span class="ruby-identifier">resolve_args_with_dependencies</span>(<span class="ruby-identifier">args</span>, <span class="ruby-identifier">deps</span>)
63:       <span class="ruby-keyword kw">else</span>
64:         <span class="ruby-identifier">resolve_args_without_dependencies</span>(<span class="ruby-identifier">args</span>)
65:       <span class="ruby-keyword kw">end</span>
66:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003992">
                    
                    <a name="M003992"></a><b>synthesize_file_task</b>(task_name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003992_source')" id="l_M003992_source">show</a>
                        
                    </p>
                    <div id="M003992_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 52</span>
52:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">synthesize_file_task</span>(<span class="ruby-identifier">task_name</span>)
53:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">task_name</span>)
54:       <span class="ruby-identifier">define_task</span>(<span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">FileTask</span>, <span class="ruby-identifier">task_name</span>)
55:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003997">
                    
                    <a name="M003997"></a><b>tasks</b>()
                    
                </div>
                
                <div class="description">
                  <p>
List of all defined tasks in this application.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003997_source')" id="l_M003997_source">show</a>
                        
                    </p>
                    <div id="M003997_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 143</span>
143:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tasks</span>
144:       <span class="ruby-ivar">@tasks</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">name</span> }
145:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003998">
                    
                    <a name="M003998"></a><b>tasks_in_scope</b>(scope)
                    
                </div>
                
                <div class="description">
                  <p>
List of all the tasks defined in the given scope (and its sub-scopes).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003998_source')" id="l_M003998_source">show</a>
                        
                    </p>
                    <div id="M003998_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 149</span>
149:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tasks_in_scope</span>(<span class="ruby-identifier">scope</span>)
150:       <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;:&quot;</span>)
151:       <span class="ruby-identifier">tasks</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
152:         <span class="ruby-node">/^#{prefix}:/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">name</span>
153:       }
154:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M004013">
                    
                    <a name="M004013"></a><b>add_location</b>(task)
                    
                </div>
                
                <div class="description">
                  <p>
Add a location to the locations field of the given task.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004013_source')" id="l_M004013_source">show</a>
                        
                    </p>
                    <div id="M004013_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 216</span>
216:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_location</span>(<span class="ruby-identifier">task</span>)
217:       <span class="ruby-identifier">loc</span> = <span class="ruby-identifier">find_location</span>
218:       <span class="ruby-identifier">task</span>.<span class="ruby-identifier">locations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">loc</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">loc</span>
219:       <span class="ruby-identifier">task</span>
220:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004021">
                    
                    <a name="M004021"></a><b>attempt_rule</b>(task_name, extensions, block, level)
                    
                </div>
                
                <div class="description">
                  <p>
Attempt to create a rule given the list of prerequisites.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004021_source')" id="l_M004021_source">show</a>
                        
                    </p>
                    <div id="M004021_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 245</span>
245:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attempt_rule</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">extensions</span>, <span class="ruby-identifier">block</span>, <span class="ruby-identifier">level</span>)
246:       <span class="ruby-identifier">sources</span> = <span class="ruby-identifier">make_sources</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">extensions</span>)
247:       <span class="ruby-identifier">prereqs</span> = <span class="ruby-identifier">sources</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">source</span><span class="ruby-operator">|</span>
248:         <span class="ruby-identifier">trace_rule</span> <span class="ruby-identifier">level</span>, <span class="ruby-node">&quot;Attempting Rule #{task_name} =&gt; #{source}&quot;</span>
249:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">source</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">Task</span>.<span class="ruby-identifier">task_defined?</span>(<span class="ruby-identifier">source</span>)
250:           <span class="ruby-identifier">trace_rule</span> <span class="ruby-identifier">level</span>, <span class="ruby-node">&quot;(#{task_name} =&gt; #{source} ... EXIST)&quot;</span>
251:           <span class="ruby-identifier">source</span>
252:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">parent</span> = <span class="ruby-identifier">enhance_with_matching_rule</span>(<span class="ruby-identifier">source</span>, <span class="ruby-identifier">level</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)
253:           <span class="ruby-identifier">trace_rule</span> <span class="ruby-identifier">level</span>, <span class="ruby-node">&quot;(#{task_name} =&gt; #{source} ... ENHANCE)&quot;</span>
254:           <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">name</span>
255:         <span class="ruby-keyword kw">else</span>
256:           <span class="ruby-identifier">trace_rule</span> <span class="ruby-identifier">level</span>, <span class="ruby-node">&quot;(#{task_name} =&gt; #{source} ... FAIL)&quot;</span>
257:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
258:         <span class="ruby-keyword kw">end</span>
259:       }
260:       <span class="ruby-identifier">task</span> = <span class="ruby-constant">FileTask</span>.<span class="ruby-identifier">define_task</span>({<span class="ruby-identifier">task_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">prereqs</span>}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
261:       <span class="ruby-identifier">task</span>.<span class="ruby-identifier">sources</span> = <span class="ruby-identifier">prereqs</span>
262:       <span class="ruby-identifier">task</span>
263:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004014">
                    
                    <a name="M004014"></a><b>find_location</b>()
                    
                </div>
                
                <div class="description">
                  <p>
<a href="../Find.html">Find</a> the location that called into the dsl
layer.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004014_source')" id="l_M004014_source">show</a>
                        
                    </p>
                    <div id="M004014_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 223</span>
223:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_location</span>
224:       <span class="ruby-identifier">locations</span> = <span class="ruby-identifier">caller</span>
225:       <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>
226:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">locations</span>[<span class="ruby-identifier">i</span>]
227:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">locations</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">locations</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/rake\/dsl_definition.rb/</span>
228:         <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
229:       <span class="ruby-keyword kw">end</span>
230:       <span class="ruby-keyword kw">nil</span>
231:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004019">
                    
                    <a name="M004019"></a><b>generate_name</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Generate an anonymous namespace name.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004019_source')" id="l_M004019_source">show</a>
                        
                    </p>
                    <div id="M004019_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 234</span>
234:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_name</span>
235:       <span class="ruby-ivar">@seed</span> <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
236:       <span class="ruby-ivar">@seed</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
237:       <span class="ruby-node">&quot;_anon_#{@seed}&quot;</span>
238:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004025">
                    
                    <a name="M004025"></a><b>get_description</b>(task)
                    
                </div>
                
                <div class="description">
                  <p>
Return the current description, clearing it in the process.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004025_source')" id="l_M004025_source">show</a>
                        
                    </p>
                    <div id="M004025_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 295</span>
295:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_description</span>(<span class="ruby-identifier">task</span>)
296:       <span class="ruby-identifier">desc</span> = <span class="ruby-ivar">@last_description</span>
297:       <span class="ruby-ivar">@last_description</span> = <span class="ruby-keyword kw">nil</span>
298:       <span class="ruby-identifier">desc</span>
299:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004004">
                    
                    <a name="M004004"></a><b>lookup_in_scope</b>(name, scope)
                    
                </div>
                
                <div class="description">
                  <p>
Lookup the task name
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004004_source')" id="l_M004004_source">show</a>
                        
                    </p>
                    <div id="M004004_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 183</span>
183:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lookup_in_scope</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">scope</span>)
184:       <span class="ruby-identifier">n</span> = <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">size</span>
185:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">n</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span>
186:         <span class="ruby-identifier">tn</span> = (<span class="ruby-identifier">scope</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">n</span>] <span class="ruby-operator">+</span> [<span class="ruby-identifier">name</span>]).<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>)
187:         <span class="ruby-identifier">task</span> = <span class="ruby-ivar">@tasks</span>[<span class="ruby-identifier">tn</span>]
188:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">task</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">task</span>
189:         <span class="ruby-identifier">n</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
190:       <span class="ruby-keyword kw">end</span>
191:       <span class="ruby-keyword kw">nil</span>
192:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004024">
                    
                    <a name="M004024"></a><b>make_sources</b>(task_name, extensions)
                    
                </div>
                
                <div class="description">
                  <p>
Make a list of sources from the list of file name extensions / translation
procs.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004024_source')" id="l_M004024_source">show</a>
                        
                    </p>
                    <div id="M004024_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 267</span>
267:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make_sources</span>(<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">extensions</span>)
268:       <span class="ruby-identifier">result</span> = <span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
269:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ext</span>
270:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/%/</span>
271:           <span class="ruby-identifier">task_name</span>.<span class="ruby-identifier">pathmap</span>(<span class="ruby-identifier">ext</span>)
272:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">%r{/}</span>
273:           <span class="ruby-identifier">ext</span>
274:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\./</span>
275:           <span class="ruby-identifier">task_name</span>.<span class="ruby-identifier">ext</span>(<span class="ruby-identifier">ext</span>)
276:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
277:           <span class="ruby-identifier">ext</span>
278:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Proc</span>
279:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
280:             <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">task_name</span>)
281:           <span class="ruby-keyword kw">else</span>
282:             <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">call</span>
283:           <span class="ruby-keyword kw">end</span>
284:         <span class="ruby-keyword kw">else</span>
285:           <span class="ruby-identifier">fail</span> <span class="ruby-node">&quot;Don't know how to handle rule dependent: #{ext.inspect}&quot;</span>
286:         <span class="ruby-keyword kw">end</span>
287:       }
288:       <span class="ruby-identifier">result</span>.<span class="ruby-identifier">flatten</span>
289:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003994">
                    
                    <a name="M003994"></a><b>resolve_args_without_dependencies</b>(args)
                    
                </div>
                
                <div class="description">
                  <p>
Resolve task arguments for a task or rule when there are no dependencies
declared.
</p>
<p>
The patterns recognized by this argument resolving function are:
</p>
<pre>
  task :t
  task :t, [:a]
  task :t, :a                 (deprecated)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003994_source')" id="l_M003994_source">show</a>
                        
                    </p>
                    <div id="M003994_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 77</span>
77:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resolve_args_without_dependencies</span>(<span class="ruby-identifier">args</span>)
78:       <span class="ruby-identifier">task_name</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
79:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_ary</span>)
80:         <span class="ruby-identifier">arg_names</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_ary</span>
81:       <span class="ruby-keyword kw">else</span>
82:         <span class="ruby-identifier">arg_names</span> = <span class="ruby-identifier">args</span>
83:       <span class="ruby-keyword kw">end</span>
84:       [<span class="ruby-identifier">task_name</span>, <span class="ruby-identifier">arg_names</span>, []]
85:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004020">
                    
                    <a name="M004020"></a><b>trace_rule</b>(level, message)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004020_source')" id="l_M004020_source">show</a>
                        
                    </p>
                    <div id="M004020_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rake/task_manager.rb, line 240</span>
240:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trace_rule</span>(<span class="ruby-identifier">level</span>, <span class="ruby-identifier">message</span>)
241:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{&quot;    &quot;*level}#{message}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Rake</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">options</span>.<span class="ruby-identifier">trace_rules</span>
242:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    