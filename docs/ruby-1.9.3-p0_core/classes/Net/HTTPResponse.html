<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Net::HTTPResponse</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Net::HTTPResponse 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/net/http_rb.html">lib/net/http.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="HTTP.html">HTTP</a> response class.
</p>
<p>
This class wraps together the response header and the response body (the
entity requested).
</p>
<p>
It mixes in the <a href="HTTPHeader.html">HTTPHeader</a> module, which
provides access to response header values both via hash-like methods and
via individual readers.
</p>
<p>
Note that each possible <a href="HTTP.html">HTTP</a> response code defines
its own <a href="HTTPResponse.html">HTTPResponse</a> subclass. These are
listed below.
</p>
<p>
All classes are defined under the <a href="../Net.html">Net</a> module.
Indentation indicates inheritance.
</p>
<pre>
  xxx        HTTPResponse

    1xx        HTTPInformation
      100        HTTPContinue
      101        HTTPSwitchProtocol

    2xx        HTTPSuccess
      200        HTTPOK
      201        HTTPCreated
      202        HTTPAccepted
      203        HTTPNonAuthoritativeInformation
      204        HTTPNoContent
      205        HTTPResetContent
      206        HTTPPartialContent

    3xx        HTTPRedirection
      300        HTTPMultipleChoice
      301        HTTPMovedPermanently
      302        HTTPFound
      303        HTTPSeeOther
      304        HTTPNotModified
      305        HTTPUseProxy
      307        HTTPTemporaryRedirect

    4xx        HTTPClientError
      400        HTTPBadRequest
      401        HTTPUnauthorized
      402        HTTPPaymentRequired
      403        HTTPForbidden
      404        HTTPNotFound
      405        HTTPMethodNotAllowed
      406        HTTPNotAcceptable
      407        HTTPProxyAuthenticationRequired
      408        HTTPRequestTimeOut
      409        HTTPConflict
      410        HTTPGone
      411        HTTPLengthRequired
      412        HTTPPreconditionFailed
      413        HTTPRequestEntityTooLarge
      414        HTTPRequestURITooLong
      415        HTTPUnsupportedMediaType
      416        HTTPRequestedRangeNotSatisfiable
      417        HTTPExpectationFailed

    5xx        HTTPServerError
      500        HTTPInternalServerError
      501        HTTPNotImplemented
      502        HTTPBadGateway
      503        HTTPServiceUnavailable
      504        HTTPGatewayTimeOut
      505        HTTPVersionNotSupported

    xxx        HTTPUnknownResponse
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M003335">body</a>,</li>
                
                <li><a href="#M003336">body=</a>,</li>
                
                <li><a href="#M003310">body_permitted?</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M003323">each_response_header</a>,</li>
                
                <li><a href="#M003337">entity</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M003325">inspect</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M003341">procdest</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M003334">read_body</a>,</li>
                
                <li><a href="#M003338">read_body_0</a>,</li>
                
                <li><a href="#M003339">read_chunked</a>,</li>
                
                <li><a href="#M003321">read_status_line</a>,</li>
                
                <li><a href="#M003322">response_class</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M003340">stream_check</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M003329">value</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../Net.html">Net</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">CODE_CLASS_TO_OBJ</td>
            <td>=</td>
            <td class="attr-value">{       '1' =&gt; HTTPInformation,       '2' =&gt; HTTPSuccess,       '3' =&gt; HTTPRedirection,       '4' =&gt; HTTPClientError,       '5' =&gt; HTTPServerError     }</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">CODE_TO_OBJ</td>
            <td>=</td>
            <td class="attr-value">{       '100' =&gt; HTTPContinue,       '101' =&gt; HTTPSwitchProtocol,        '200' =&gt; HTTPOK,       '201' =&gt; HTTPCreated,       '202' =&gt; HTTPAccepted,       '203' =&gt; HTTPNonAuthoritativeInformation,       '204' =&gt; HTTPNoContent,       '205' =&gt; HTTPResetContent,       '206' =&gt; HTTPPartialContent,        '300' =&gt; HTTPMultipleChoice,       '301' =&gt; HTTPMovedPermanently,       '302' =&gt; HTTPFound,       '303' =&gt; HTTPSeeOther,       '304' =&gt; HTTPNotModified,       '305' =&gt; HTTPUseProxy,       '307' =&gt; HTTPTemporaryRedirect,        '400' =&gt; HTTPBadRequest,       '401' =&gt; HTTPUnauthorized,       '402' =&gt; HTTPPaymentRequired,       '403' =&gt; HTTPForbidden,       '404' =&gt; HTTPNotFound,       '405' =&gt; HTTPMethodNotAllowed,       '406' =&gt; HTTPNotAcceptable,       '407' =&gt; HTTPProxyAuthenticationRequired,       '408' =&gt; HTTPRequestTimeOut,       '409' =&gt; HTTPConflict,       '410' =&gt; HTTPGone,       '411' =&gt; HTTPLengthRequired,       '412' =&gt; HTTPPreconditionFailed,       '413' =&gt; HTTPRequestEntityTooLarge,       '414' =&gt; HTTPRequestURITooLong,       '415' =&gt; HTTPUnsupportedMediaType,       '416' =&gt; HTTPRequestedRangeNotSatisfiable,       '417' =&gt; HTTPExpectationFailed,        '500' =&gt; HTTPInternalServerError,       '501' =&gt; HTTPNotImplemented,       '502' =&gt; HTTPBadGateway,       '503' =&gt; HTTPServiceUnavailable,       '504' =&gt; HTTPGatewayTimeOut,       '505' =&gt; HTTPVersionNotSupported     }</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>http_version</td>
            <td class='attr-desc'><p>
The <a href="HTTP.html">HTTP</a> version supported by the server.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>code</td>
            <td class='attr-desc'><p>
The <a href="HTTP.html">HTTP</a> result code string. For example,
&#8216;302&#8217;. You can also determine the response type by examining
which response subclass the response object is an instance of.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>message</td>
            <td class='attr-desc'><p>
The <a href="HTTP.html">HTTP</a> result message sent by the server. For
example, &#8216;Not Found&#8217;.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M003310">
                    
                    <a name="M003310"></a><b>body_permitted?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
true if the response has a body.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003310_source')" id="l_M003310_source">show</a>
                        
                    </p>
                    <div id="M003310_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2326</span>
2326:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HTTPResponse</span>.<span class="ruby-identifier">body_permitted?</span>
2327:       <span class="ruby-keyword kw">self</span><span class="ruby-operator">::</span><span class="ruby-constant">HAS_BODY</span>
2328:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Private methods</div>
            
            <div class="method">
                <div class="title" id="M003323">
                    
                    <a name="M003323"></a><b>each_response_header</b>(sock)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003323_source')" id="l_M003323_source">show</a>
                        
                    </p>
                    <div id="M003323_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2574</span>
2574:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_response_header</span>(<span class="ruby-identifier">sock</span>)
2575:         <span class="ruby-identifier">key</span> = <span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>
2576:         <span class="ruby-keyword kw">while</span> <span class="ruby-keyword kw">true</span>
2577:           <span class="ruby-identifier">line</span> = <span class="ruby-identifier">sock</span>.<span class="ruby-identifier">readuntil</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\s+\z/</span>, <span class="ruby-value str">''</span>)
2578:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">empty?</span>
2579:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?\s</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">line</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?\t</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">value</span>
2580:             <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">' '</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span>
2581:             <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>
2582:           <span class="ruby-keyword kw">else</span>
2583:             <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span>
2584:             <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\s*:\s*/</span>, <span class="ruby-value">2</span>)
2585:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">HTTPBadResponse</span>, <span class="ruby-value str">'wrong header line format'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
2586:           <span class="ruby-keyword kw">end</span>
2587:         <span class="ruby-keyword kw">end</span>
2588:         <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span>
2589:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003321">
                    
                    <a name="M003321"></a><b>read_status_line</b>(sock)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003321_source')" id="l_M003321_source">show</a>
                        
                    </p>
                    <div id="M003321_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2561</span>
2561:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_status_line</span>(<span class="ruby-identifier">sock</span>)
2562:         <span class="ruby-identifier">str</span> = <span class="ruby-identifier">sock</span>.<span class="ruby-identifier">readline</span>
2563:         <span class="ruby-identifier">m</span> = <span class="ruby-regexp re">/\AHTTP(?:\/(\d+\.\d+))?\s+(\d\d\d)\s*(.*)\z/i</span><span class="ruby-identifier">n</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">str</span>) <span class="ruby-keyword kw">or</span>
2564:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">HTTPBadResponse</span>, <span class="ruby-node">&quot;wrong status line: #{str.dump}&quot;</span>
2565:         <span class="ruby-identifier">m</span>.<span class="ruby-identifier">captures</span>
2566:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003322">
                    
                    <a name="M003322"></a><b>response_class</b>(code)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003322_source')" id="l_M003322_source">show</a>
                        
                    </p>
                    <div id="M003322_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2568</span>
2568:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">response_class</span>(<span class="ruby-identifier">code</span>)
2569:         <span class="ruby-constant">CODE_TO_OBJ</span>[<span class="ruby-identifier">code</span>] <span class="ruby-keyword kw">or</span>
2570:         <span class="ruby-constant">CODE_CLASS_TO_OBJ</span>[<span class="ruby-identifier">code</span>[<span class="ruby-value">0</span>,<span class="ruby-value">1</span>]] <span class="ruby-keyword kw">or</span>
2571:         <span class="ruby-constant">HTTPUnknownResponse</span>
2572:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M003335">
                    
                    <a name="M003335"></a><b>body</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the full entity body.
</p>
<p>
Calling this method a second or subsequent time will return the string
already read.
</p>
<pre>
  http.request_get('/index.html') {|res|
    puts res.body
  }

  http.request_get('/index.html') {|res|
    p res.body.object_id   # 538149362
    p res.body.object_id   # 538149362
  }
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="HTTPResponse.html#M003337">entity</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003335_source')" id="l_M003335_source">show</a>
                        
                    </p>
                    <div id="M003335_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2734</span>
2734:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">body</span>
2735:       <span class="ruby-identifier">read_body</span>()
2736:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003336">
                    
                    <a name="M003336"></a><b>body=</b>(value)
                    
                </div>
                
                <div class="description">
                  <p>
Because it may be necessary to modify the body, Eg, decompression this
method facilitates that.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003336_source')" id="l_M003336_source">show</a>
                        
                    </p>
                    <div id="M003336_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2740</span>
2740:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">body=</span>(<span class="ruby-identifier">value</span>)
2741:       <span class="ruby-ivar">@body</span> = <span class="ruby-identifier">value</span>
2742:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003337">
                    
                    <a name="M003337"></a><b>entity</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="HTTPResponse.html#M003335">body</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M003325">
                    
                    <a name="M003325"></a><b>inspect</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003325_source')" id="l_M003325_source">show</a>
                        
                    </p>
                    <div id="M003325_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2619</span>
2619:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
2620:       <span class="ruby-node">&quot;#&lt;#{self.class} #{@code} #{@message} readbody=#{@read}&gt;&quot;</span>
2621:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003334">
                    
                    <a name="M003334"></a><b>read_body</b>(dest = nil, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Gets the entity body returned by the remote <a href="HTTP.html">HTTP</a>
server.
</p>
<p>
If a block is given, the body is passed to the block, and the body is
provided in fragments, as it is read in from the socket.
</p>
<p>
Calling this method a second or subsequent time for the same <a
href="HTTPResponse.html">HTTPResponse</a> object will return the value
already read.
</p>
<pre>
  http.request_get('/index.html') {|res|
    puts res.read_body
  }

  http.request_get('/index.html') {|res|
    p res.read_body.object_id   # 538149362
    p res.read_body.object_id   # 538149362
  }

  # using iterator
  http.request_get('/index.html') {|res|
    res.read_body do |segment|
      print segment
    end
  }
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003334_source')" id="l_M003334_source">show</a>
                        
                    </p>
                    <div id="M003334_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2702</span>
2702:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_body</span>(<span class="ruby-identifier">dest</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
2703:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@read</span>
2704:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">IOError</span>, <span class="ruby-node">&quot;#{self.class}\#read_body called twice&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dest</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">block</span>
2705:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@body</span>
2706:       <span class="ruby-keyword kw">end</span>
2707:       <span class="ruby-identifier">to</span> = <span class="ruby-identifier">procdest</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">block</span>)
2708:       <span class="ruby-identifier">stream_check</span>
2709:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@body_exist</span>
2710:         <span class="ruby-identifier">read_body_0</span> <span class="ruby-identifier">to</span>
2711:         <span class="ruby-ivar">@body</span> = <span class="ruby-identifier">to</span>
2712:       <span class="ruby-keyword kw">else</span>
2713:         <span class="ruby-ivar">@body</span> = <span class="ruby-keyword kw">nil</span>
2714:       <span class="ruby-keyword kw">end</span>
2715:       <span class="ruby-ivar">@read</span> = <span class="ruby-keyword kw">true</span>
2716: 
2717:       <span class="ruby-ivar">@body</span>
2718:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003329">
                    
                    <a name="M003329"></a><b>value</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Raises an <a href="HTTP.html">HTTP</a> error if the response is not 2xx
(success).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003329_source')" id="l_M003329_source">show</a>
                        
                    </p>
                    <div id="M003329_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2640</span>
2640:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">value</span>
2641:       <span class="ruby-identifier">error!</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">HTTPSuccess</span>)
2642:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M003341">
                    
                    <a name="M003341"></a><b>procdest</b>(dest, block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003341_source')" id="l_M003341_source">show</a>
                        
                    </p>
                    <div id="M003341_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2791</span>
2791:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">procdest</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">block</span>)
2792:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'both arg and block given for HTTP method'</span> \
2793:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dest</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">block</span>
2794:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
2795:         <span class="ruby-constant">ReadAdapter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">block</span>)
2796:       <span class="ruby-keyword kw">else</span>
2797:         <span class="ruby-identifier">dest</span> <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>
2798:       <span class="ruby-keyword kw">end</span>
2799:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003338">
                    
                    <a name="M003338"></a><b>read_body_0</b>(dest)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003338_source')" id="l_M003338_source">show</a>
                        
                    </p>
                    <div id="M003338_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2748</span>
2748:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_body_0</span>(<span class="ruby-identifier">dest</span>)
2749:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">chunked?</span>
2750:         <span class="ruby-identifier">read_chunked</span> <span class="ruby-identifier">dest</span>
2751:         <span class="ruby-keyword kw">return</span>
2752:       <span class="ruby-keyword kw">end</span>
2753:       <span class="ruby-identifier">clen</span> = <span class="ruby-identifier">content_length</span>()
2754:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">clen</span>
2755:         <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">read</span> <span class="ruby-identifier">clen</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-keyword kw">true</span>   <span class="ruby-comment cmt"># ignore EOF</span>
2756:         <span class="ruby-keyword kw">return</span>
2757:       <span class="ruby-keyword kw">end</span>
2758:       <span class="ruby-identifier">clen</span> = <span class="ruby-identifier">range_length</span>()
2759:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">clen</span>
2760:         <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">read</span> <span class="ruby-identifier">clen</span>, <span class="ruby-identifier">dest</span>
2761:         <span class="ruby-keyword kw">return</span>
2762:       <span class="ruby-keyword kw">end</span>
2763:       <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">read_all</span> <span class="ruby-identifier">dest</span>
2764:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003339">
                    
                    <a name="M003339"></a><b>read_chunked</b>(dest)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003339_source')" id="l_M003339_source">show</a>
                        
                    </p>
                    <div id="M003339_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2766</span>
2766:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_chunked</span>(<span class="ruby-identifier">dest</span>)
2767:       <span class="ruby-identifier">len</span> = <span class="ruby-keyword kw">nil</span>
2768:       <span class="ruby-identifier">total</span> = <span class="ruby-value">0</span>
2769:       <span class="ruby-keyword kw">while</span> <span class="ruby-keyword kw">true</span>
2770:         <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">readline</span>
2771:         <span class="ruby-identifier">hexlen</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-regexp re">/[0-9a-fA-F]+/</span>) <span class="ruby-keyword kw">or</span>
2772:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">HTTPBadResponse</span>, <span class="ruby-node">&quot;wrong chunk size line: #{line}&quot;</span>
2773:         <span class="ruby-identifier">len</span> = <span class="ruby-identifier">hexlen</span>.<span class="ruby-identifier">hex</span>
2774:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">len</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
2775:         <span class="ruby-keyword kw">begin</span>
2776:           <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">read</span> <span class="ruby-identifier">len</span>, <span class="ruby-identifier">dest</span>
2777:         <span class="ruby-keyword kw">ensure</span>
2778:           <span class="ruby-identifier">total</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">len</span>
2779:           <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">read</span> <span class="ruby-value">2</span>   <span class="ruby-comment cmt"># \r\n</span>
2780:         <span class="ruby-keyword kw">end</span>
2781:       <span class="ruby-keyword kw">end</span>
2782:       <span class="ruby-keyword kw">until</span> <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">readline</span>.<span class="ruby-identifier">empty?</span>
2783:         <span class="ruby-comment cmt"># none</span>
2784:       <span class="ruby-keyword kw">end</span>
2785:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003340">
                    
                    <a name="M003340"></a><b>stream_check</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003340_source')" id="l_M003340_source">show</a>
                        
                    </p>
                    <div id="M003340_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/net/http.rb, line 2787</span>
2787:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stream_check</span>
2788:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">IOError</span>, <span class="ruby-value str">'attempt to read body out of block'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@socket</span>.<span class="ruby-identifier">closed?</span>
2789:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    