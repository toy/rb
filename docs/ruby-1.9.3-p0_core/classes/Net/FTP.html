<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Net::FTP</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Net::FTP 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/net/ftp_rb.html">lib/net/ftp.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
This class implements the <a href="../File.html">File</a> Transfer
Protocol. If you have used a command-line <a href="FTP.html">FTP</a>
program, and are familiar with the commands, you will be able to use this
class easily. Some extra features are included to take advantage of
Ruby&#8217;s style and strengths.
</p>
<h2>Example</h2>
<pre>
  require 'net/ftp'
</pre>
<h3>Example 1</h3>
<pre>
  ftp = Net::FTP.new('ftp.netlab.co.jp')
  ftp.login
  files = ftp.chdir('pub/lang/ruby/contrib')
  files = ftp.list('n*')
  ftp.getbinaryfile('nif.rb-0.91.gz', 'nif.gz', 1024)
  ftp.close
</pre>
<h3>Example 2</h3>
<pre>
  Net::FTP.open('ftp.netlab.co.jp') do |ftp|
    ftp.login
    files = ftp.chdir('pub/lang/ruby/contrib')
    files = ftp.list('n*')
    ftp.getbinaryfile('nif.rb-0.91.gz', 'nif.gz', 1024)
  end
</pre>
<h2>Major Methods</h2>
<p>
The following are the methods most likely to be useful to users:
</p>
<ul>
<li><a href="FTP.html#M003020">FTP.open</a>

</li>
<li><a href="FTP.html#M003057">getbinaryfile</a>

</li>
<li><a href="FTP.html#M003058">gettextfile</a>

</li>
<li><a href="FTP.html#M003060">putbinaryfile</a>

</li>
<li><a href="FTP.html#M003061">puttextfile</a>

</li>
<li><a href="FTP.html#M003070">chdir</a>

</li>
<li><a href="FTP.html#M003064">nlst</a>

</li>
<li><a href="FTP.html#M003073">size</a>

</li>
<li><a href="FTP.html#M003068">rename</a>

</li>
<li><a href="FTP.html#M003069">delete</a>

</li>
</ul>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M003080">abort</a>,</li>
                
                <li><a href="#M003063">acct</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M003024">binary=</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M003070">chdir</a>,</li>
                
                <li><a href="#M003088">close</a>,</li>
                
                <li><a href="#M003089">closed?</a>,</li>
                
                <li><a href="#M003031">connect</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M003069">delete</a>,</li>
                
                <li><a href="#M003067">dir</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M003059">get</a>,</li>
                
                <li><a href="#M003057">getbinaryfile</a>,</li>
                
                <li><a href="#M003078">getdir</a>,</li>
                
                <li><a href="#M003058">gettextfile</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M003083">help</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M003065">list</a>,</li>
                
                <li><a href="#M003047">login</a>,</li>
                
                <li><a href="#M003066">ls</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M003082">mdtm</a>,</li>
                
                <li><a href="#M003075">mkdir</a>,</li>
                
                <li><a href="#M003074">mtime</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M003022">new</a>,</li>
                
                <li><a href="#M003064">nlst</a>,</li>
                
                <li><a href="#M003086">noop</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M003020">open</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M003062">put</a>,</li>
                
                <li><a href="#M003060">putbinaryfile</a>,</li>
                
                <li><a href="#M003061">puttextfile</a>,</li>
                
                <li><a href="#M003077">pwd</a></li>
                
            </ul>
        </dd>
    
        <dt>Q</dt>
        <dd>
            <ul>
                
                <li><a href="#M003085">quit</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M003068">rename</a>,</li>
                
                <li><a href="#M003049">retrbinary</a>,</li>
                
                <li><a href="#M003051">retrlines</a>,</li>
                
                <li><a href="#M003076">rmdir</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M003041">sendcmd</a>,</li>
                
                <li><a href="#M003033">set_socket</a>,</li>
                
                <li><a href="#M003087">site</a>,</li>
                
                <li><a href="#M003073">size</a>,</li>
                
                <li><a href="#M003081">status</a>,</li>
                
                <li><a href="#M003053">storbinary</a>,</li>
                
                <li><a href="#M003055">storlines</a>,</li>
                
                <li><a href="#M003079">system</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M003042">voidcmd</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../JSON.html">JSON</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>binary</td>
            <td class='attr-desc'><p>
When <tt>true</tt>, transfers are performed in binary mode. Default:
<tt>true</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>passive</td>
            <td class='attr-desc'><p>
When <tt>true</tt>, the connection is in passive mode. Default:
<tt>false</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>debug_mode</td>
            <td class='attr-desc'><p>
When <tt>true</tt>, all traffic to and from the server is written to
+$stdout+. Default: <tt>false</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>resume</td>
            <td class='attr-desc'><p>
Sets or retrieves the <tt>resume</tt> status, which decides whether
incomplete transfers are resumed or restarted. Default: <tt>false</tt>.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>welcome</td>
            <td class='attr-desc'><p>
The server&#8217;s welcome message.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>last_response_code</td>
            <td class='attr-desc'><p>
The server&#8217;s last response code.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>last_response</td>
            <td class='attr-desc'><p>
The server&#8217;s last response.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M003022">
                    
                    <a name="M003022"></a><b>new</b>(host = nil, user = nil, passwd = nil, acct = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Creates and returns a new <tt>FTP</tt> object. If a <tt>host</tt> is given,
a connection is made. Additionally, if the <tt>user</tt> is given, the
given user name, password, and (optionally) account are used to log in. See
<a href="FTP.html#M003047">login</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003022_source')" id="l_M003022_source">show</a>
                        
                    </p>
                    <div id="M003022_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 130</span>
130:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">host</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
131:       <span class="ruby-keyword kw">super</span>()
132:       <span class="ruby-ivar">@binary</span> = <span class="ruby-keyword kw">true</span>
133:       <span class="ruby-ivar">@passive</span> = <span class="ruby-keyword kw">false</span>
134:       <span class="ruby-ivar">@debug_mode</span> = <span class="ruby-keyword kw">false</span>
135:       <span class="ruby-ivar">@resume</span> = <span class="ruby-keyword kw">false</span>
136:       <span class="ruby-ivar">@sock</span> = <span class="ruby-constant">NullSocket</span>.<span class="ruby-identifier">new</span>
137:       <span class="ruby-ivar">@logged_in</span> = <span class="ruby-keyword kw">false</span>
138:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">host</span>
139:         <span class="ruby-identifier">connect</span>(<span class="ruby-identifier">host</span>)
140:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">user</span>
141:           <span class="ruby-identifier">login</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
142:         <span class="ruby-keyword kw">end</span>
143:       <span class="ruby-keyword kw">end</span>
144:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003020">
                    
                    <a name="M003020"></a><b>open</b>(host, user = nil, passwd = nil, acct = nil)
                    
                </div>
                
                <div class="description">
                  <p>
A synonym for <tt><a href="FTP.html#M003022">FTP.new</a></tt>, but with a
mandatory host parameter.
</p>
<p>
If a block is given, it is passed the <tt>FTP</tt> object, which will be
closed when the block finishes, or when an exception is raised.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003020_source')" id="l_M003020_source">show</a>
                        
                    </p>
                    <div id="M003020_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 112</span>
112:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FTP</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
113:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
114:         <span class="ruby-identifier">ftp</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
115:         <span class="ruby-keyword kw">begin</span>
116:           <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">ftp</span>
117:         <span class="ruby-keyword kw">ensure</span>
118:           <span class="ruby-identifier">ftp</span>.<span class="ruby-identifier">close</span>
119:         <span class="ruby-keyword kw">end</span>
120:       <span class="ruby-keyword kw">else</span>
121:         <span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
122:       <span class="ruby-keyword kw">end</span>
123:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M003080">
                    
                    <a name="M003080"></a><b>abort</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Aborts the previous command (ABOR command).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003080_source')" id="l_M003080_source">show</a>
                        
                    </p>
                    <div id="M003080_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 837</span>
837:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abort</span>
838:       <span class="ruby-identifier">line</span> = <span class="ruby-value str">&quot;ABOR&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
839:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;put: ABOR\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
840:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">line</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">MSG_OOB</span>)
841:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">getmultiline</span>
842:       <span class="ruby-keyword kw">unless</span> [<span class="ruby-value str">&quot;426&quot;</span>, <span class="ruby-value str">&quot;226&quot;</span>, <span class="ruby-value str">&quot;225&quot;</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>])
843:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
844:       <span class="ruby-keyword kw">end</span>
845:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>
846:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003063">
                    
                    <a name="M003063"></a><b>acct</b>(account)
                    
                </div>
                
                <div class="description">
                  <p>
Sends the ACCT command.
</p>
<p>
This is a less common <a href="FTP.html">FTP</a> command, to send account
information if the destination host requires it.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003063_source')" id="l_M003063_source">show</a>
                        
                    </p>
                    <div id="M003063_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 689</span>
689:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">acct</span>(<span class="ruby-identifier">account</span>)
690:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;ACCT &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">account</span>
691:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
692:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003024">
                    
                    <a name="M003024"></a><b>binary=</b>(newmode)
                    
                </div>
                
                <div class="description">
                  <p>
A setter to toggle transfers in binary mode. <tt>newmode</tt> is either
<tt>true</tt> or <tt>false</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003024_source')" id="l_M003024_source">show</a>
                        
                    </p>
                    <div id="M003024_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 148</span>
148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">binary=</span>(<span class="ruby-identifier">newmode</span>)
149:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">newmode</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@binary</span>
150:         <span class="ruby-ivar">@binary</span> = <span class="ruby-identifier">newmode</span>
151:         <span class="ruby-identifier">send_type_command</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@logged_in</span>
152:       <span class="ruby-keyword kw">end</span>
153:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003070">
                    
                    <a name="M003070"></a><b>chdir</b>(dirname)
                    
                </div>
                
                <div class="description">
                  <p>
Changes the (remote) directory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003070_source')" id="l_M003070_source">show</a>
                        
                    </p>
                    <div id="M003070_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 759</span>
759:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dirname</span>)
760:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dirname</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;..&quot;</span>
761:         <span class="ruby-keyword kw">begin</span>
762:           <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;CDUP&quot;</span>)
763:           <span class="ruby-keyword kw">return</span>
764:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">FTPPermError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
765:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;500&quot;</span>
766:             <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
767:           <span class="ruby-keyword kw">end</span>
768:         <span class="ruby-keyword kw">end</span>
769:       <span class="ruby-keyword kw">end</span>
770:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;CWD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>
771:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
772:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003088">
                    
                    <a name="M003088"></a><b>close</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Closes the connection. Further operations are impossible until you open a
new connection with <a href="FTP.html#M003031">connect</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003088_source')" id="l_M003088_source">show</a>
                        
                    </p>
                    <div id="M003088_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 907</span>
907:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span>
908:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@sock</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">closed?</span>
909:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003089">
                    
                    <a name="M003089"></a><b>closed?</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> iff the connection is closed.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003089_source')" id="l_M003089_source">show</a>
                        
                    </p>
                    <div id="M003089_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 914</span>
914:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">closed?</span>
915:       <span class="ruby-ivar">@sock</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">closed?</span>
916:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003031">
                    
                    <a name="M003031"></a><b>connect</b>(host, port = FTP_PORT)
                    
                </div>
                
                <div class="description">
                  <p>
Establishes an <a href="FTP.html">FTP</a> connection to host, optionally
overriding the default port. If the environment variable
<tt>SOCKS_SERVER</tt> is set, sets up the connection through a SOCKS proxy.
Raises an exception (typically <tt>Errno::ECONNREFUSED</tt>) if the
connection cannot be established.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003031_source')" id="l_M003031_source">show</a>
                        
                    </p>
                    <div id="M003031_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 217</span>
217:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span> = <span class="ruby-constant">FTP_PORT</span>)
218:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
219:         <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;connect: &quot;</span>, <span class="ruby-identifier">host</span>, <span class="ruby-value str">&quot;, &quot;</span>, <span class="ruby-identifier">port</span>, <span class="ruby-value str">&quot;\n&quot;</span>
220:       <span class="ruby-keyword kw">end</span>
221:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
222:         <span class="ruby-ivar">@sock</span> = <span class="ruby-identifier">open_socket</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
223:         <span class="ruby-identifier">voidresp</span>
224:       <span class="ruby-keyword kw">end</span>
225:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003069">
                    
                    <a name="M003069"></a><b>delete</b>(filename)
                    
                </div>
                
                <div class="description">
                  <p>
Deletes a file on the server.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003069_source')" id="l_M003069_source">show</a>
                        
                    </p>
                    <div id="M003069_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 745</span>
745:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">filename</span>)
746:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;DELE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
747:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;250&quot;</span>
748:         <span class="ruby-keyword kw">return</span>
749:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?5</span>
750:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPPermError</span>, <span class="ruby-identifier">resp</span>
751:       <span class="ruby-keyword kw">else</span>
752:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
753:       <span class="ruby-keyword kw">end</span>
754:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003067">
                    
                    <a name="M003067"></a><b>dir</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FTP.html#M003065">list</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M003059">
                    
                    <a name="M003059"></a><b>get</b>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE)
                    
                </div>
                
                <div class="description">
                  <p>
Retrieves <tt>remotefile</tt> in whatever mode the session is set (text or
binary). See <a href="FTP.html#M003058">gettextfile</a> and <a
href="FTP.html#M003057">getbinaryfile</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003059_source')" id="l_M003059_source">show</a>
                        
                    </p>
                    <div id="M003059_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 618</span>
618:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>),
619:             <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
620:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@binary</span>
621:         <span class="ruby-identifier">getbinaryfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
622:       <span class="ruby-keyword kw">else</span>
623:         <span class="ruby-identifier">gettextfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
624:       <span class="ruby-keyword kw">end</span>
625:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003057">
                    
                    <a name="M003057"></a><b>getbinaryfile</b>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE)
                    
                </div>
                
                <div class="description">
                  <p>
Retrieves <tt>remotefile</tt> in binary mode, storing the result in
<tt>localfile</tt>. If <tt>localfile</tt> is nil, returns retrieved data.
If a block is supplied, it is passed the retrieved data in
<tt>blocksize</tt> chunks.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003057_source')" id="l_M003057_source">show</a>
                        
                    </p>
                    <div id="M003057_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 560</span>
560:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getbinaryfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>),
561:                       <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>) <span class="ruby-comment cmt"># :yield: data</span>
562:       <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
563:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
564:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@resume</span>
565:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">size?</span>(<span class="ruby-identifier">localfile</span>)
566:           <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;a&quot;</span>)
567:         <span class="ruby-keyword kw">else</span>
568:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
569:           <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;w&quot;</span>)
570:         <span class="ruby-keyword kw">end</span>
571:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_given?</span>
572:         <span class="ruby-identifier">result</span> = <span class="ruby-value str">&quot;&quot;</span>
573:       <span class="ruby-keyword kw">end</span>
574:       <span class="ruby-keyword kw">begin</span>
575:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">binmode</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
576:         <span class="ruby-identifier">retrbinary</span>(<span class="ruby-value str">&quot;RETR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
577:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
578:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
579:           <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>
580:         <span class="ruby-keyword kw">end</span>
581:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
582:       <span class="ruby-keyword kw">ensure</span>
583:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
584:       <span class="ruby-keyword kw">end</span>
585:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003078">
                    
                    <a name="M003078"></a><b>getdir</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FTP.html#M003077">pwd</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M003058">
                    
                    <a name="M003058"></a><b>gettextfile</b>(remotefile, localfile = File.basename(remotefile))
                    
                </div>
                
                <div class="description">
                  <p>
Retrieves <tt>remotefile</tt> in ASCII (text) mode, storing the result in
<tt>localfile</tt>. If <tt>localfile</tt> is nil, returns retrieved data.
If a block is supplied, it is passed the retrieved data one line at a time.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003058_source')" id="l_M003058_source">show</a>
                        
                    </p>
                    <div id="M003058_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 594</span>
594:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gettextfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>)) <span class="ruby-comment cmt"># :yield: line</span>
595:       <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
596:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
597:         <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;w&quot;</span>)
598:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_given?</span>
599:         <span class="ruby-identifier">result</span> = <span class="ruby-value str">&quot;&quot;</span>
600:       <span class="ruby-keyword kw">end</span>
601:       <span class="ruby-keyword kw">begin</span>
602:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-value str">&quot;RETR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span>, <span class="ruby-identifier">newline</span><span class="ruby-operator">|</span>
603:           <span class="ruby-identifier">l</span> = <span class="ruby-identifier">newline</span> <span class="ruby-value">? </span><span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>
604:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
605:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">newline</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
606:           <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>
607:         <span class="ruby-keyword kw">end</span>
608:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
609:       <span class="ruby-keyword kw">ensure</span>
610:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">localfile</span>
611:       <span class="ruby-keyword kw">end</span>
612:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003083">
                    
                    <a name="M003083"></a><b>help</b>(arg = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Issues the HELP command.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003083_source')" id="l_M003083_source">show</a>
                        
                    </p>
                    <div id="M003083_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 871</span>
871:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>(<span class="ruby-identifier">arg</span> = <span class="ruby-keyword kw">nil</span>)
872:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;HELP&quot;</span>
873:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span>
874:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
875:       <span class="ruby-keyword kw">end</span>
876:       <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
877:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003065">
                    
                    <a name="M003065"></a><b>list</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of file information in the directory (the output is like
`ls -l`). If a block is given, it iterates through the listing.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FTP.html#M003066">ls</a>
                    
                    <a href="FTP.html#M003067">dir</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003065_source')" id="l_M003065_source">show</a>
                        
                    </p>
                    <div id="M003065_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 713</span>
713:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
714:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;LIST&quot;</span>
715:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
716:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_s</span>
717:       <span class="ruby-keyword kw">end</span>
718:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
719:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
720:       <span class="ruby-keyword kw">else</span>
721:         <span class="ruby-identifier">lines</span> = []
722:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
723:           <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
724:         <span class="ruby-keyword kw">end</span>
725:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">lines</span>
726:       <span class="ruby-keyword kw">end</span>
727:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003047">
                    
                    <a name="M003047"></a><b>login</b>(user = &quot;anonymous&quot;, passwd = nil, acct = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Logs in to the remote host. The session must have been previously
connected. If <tt>user</tt> is the string &#8220;anonymous&#8221; and the
<tt>password</tt> is <tt>nil</tt>, a password of <tt>user@host</tt> is
synthesized. If the <tt>acct</tt> parameter is not <tt>nil</tt>, an <a
href="FTP.html">FTP</a> ACCT command is sent following the successful
login. Raises an exception on error (typically <tt>Net::FTPPermError</tt>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003047_source')" id="l_M003047_source">show</a>
                        
                    </p>
                    <div id="M003047_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 423</span>
423:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">login</span>(<span class="ruby-identifier">user</span> = <span class="ruby-value str">&quot;anonymous&quot;</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
424:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;anonymous&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">passwd</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
425:         <span class="ruby-identifier">passwd</span> = <span class="ruby-value str">&quot;anonymous@&quot;</span>
426:       <span class="ruby-keyword kw">end</span>
427: 
428:       <span class="ruby-identifier">resp</span> = <span class="ruby-value str">&quot;&quot;</span>
429:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
430:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'USER '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">user</span>)
431:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?3</span>
432:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">passwd</span>.<span class="ruby-identifier">nil?</span>
433:           <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'PASS '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">passwd</span>)
434:         <span class="ruby-keyword kw">end</span>
435:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?3</span>
436:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">acct</span>.<span class="ruby-identifier">nil?</span>
437:           <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'ACCT '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">acct</span>)
438:         <span class="ruby-keyword kw">end</span>
439:       <span class="ruby-keyword kw">end</span>
440:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?2</span>
441:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
442:       <span class="ruby-keyword kw">end</span>
443:       <span class="ruby-ivar">@welcome</span> = <span class="ruby-identifier">resp</span>
444:       <span class="ruby-identifier">send_type_command</span>
445:       <span class="ruby-ivar">@logged_in</span> = <span class="ruby-keyword kw">true</span>
446:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003066">
                    
                    <a name="M003066"></a><b>ls</b>(*args)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="FTP.html#M003065">list</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M003082">
                    
                    <a name="M003082"></a><b>mdtm</b>(filename)
                    
                </div>
                
                <div class="description">
                  <p>
Issues the MDTM command. TODO: more info.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003082_source')" id="l_M003082_source">show</a>
                        
                    </p>
                    <div id="M003082_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 861</span>
861:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mdtm</span>(<span class="ruby-identifier">filename</span>)
862:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;MDTM &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
863:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;213&quot;</span>
864:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">3</span> <span class="ruby-operator">..</span> <span class="ruby-value">-1</span>].<span class="ruby-identifier">strip</span>
865:       <span class="ruby-keyword kw">end</span>
866:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003075">
                    
                    <a name="M003075"></a><b>mkdir</b>(dirname)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a remote directory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003075_source')" id="l_M003075_source">show</a>
                        
                    </p>
                    <div id="M003075_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 802</span>
802:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">dirname</span>)
803:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;MKD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>)
804:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
805:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003074">
                    
                    <a name="M003074"></a><b>mtime</b>(filename, local = false)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the last modification time of the (remote) file. If <tt>local</tt>
is <tt>true</tt>, it is returned as a local time, otherwise it&#8217;s a
UTC time.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003074_source')" id="l_M003074_source">show</a>
                        
                    </p>
                    <div id="M003074_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 793</span>
793:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">local</span> = <span class="ruby-keyword kw">false</span>)
794:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">mdtm</span>(<span class="ruby-identifier">filename</span>)
795:       <span class="ruby-identifier">ary</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">MDTM_REGEXP</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>}
796:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">local</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ary</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">gm</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ary</span>)
797:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003064">
                    
                    <a name="M003064"></a><b>nlst</b>(dir = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of filenames in the remote directory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003064_source')" id="l_M003064_source">show</a>
                        
                    </p>
                    <div id="M003064_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 697</span>
697:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nlst</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-keyword kw">nil</span>)
698:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;NLST&quot;</span>
699:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span>
700:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dir</span>
701:       <span class="ruby-keyword kw">end</span>
702:       <span class="ruby-identifier">files</span> = []
703:       <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
704:         <span class="ruby-identifier">files</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">line</span>)
705:       <span class="ruby-keyword kw">end</span>
706:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">files</span>
707:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003086">
                    
                    <a name="M003086"></a><b>noop</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Issues a NOOP command.
</p>
<p>
Does nothing except return a response.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003086_source')" id="l_M003086_source">show</a>
                        
                    </p>
                    <div id="M003086_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 891</span>
891:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">noop</span>
892:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;NOOP&quot;</span>)
893:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003062">
                    
                    <a name="M003062"></a><b>put</b>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE, &amp;block)
                    
                </div>
                
                <div class="description">
                  <p>
Transfers <tt>localfile</tt> to the server in whatever mode the session is
set (text or binary). See <a href="FTP.html#M003061">puttextfile</a> and <a
href="FTP.html#M003060">putbinaryfile</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003062_source')" id="l_M003062_source">show</a>
                        
                    </p>
                    <div id="M003062_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 674</span>
674:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">put</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>),
675:             <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
676:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@binary</span>
677:         <span class="ruby-identifier">putbinaryfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
678:       <span class="ruby-keyword kw">else</span>
679:         <span class="ruby-identifier">puttextfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
680:       <span class="ruby-keyword kw">end</span>
681:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003060">
                    
                    <a name="M003060"></a><b>putbinaryfile</b>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE)
                    
                </div>
                
                <div class="description">
                  <p>
Transfers <tt>localfile</tt> to the server in binary mode, storing the
result in <tt>remotefile</tt>. If a block is supplied, calls it, passing in
the transmitted data in <tt>blocksize</tt> chunks.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003060_source')" id="l_M003060_source">show</a>
                        
                    </p>
                    <div id="M003060_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 632</span>
632:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">putbinaryfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>),
633:                       <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
634:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@resume</span>
635:         <span class="ruby-keyword kw">begin</span>
636:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-identifier">size</span>(<span class="ruby-identifier">remotefile</span>)
637:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">FTPPermError</span>
638:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
639:         <span class="ruby-keyword kw">end</span>
640:       <span class="ruby-keyword kw">else</span>
641:         <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
642:       <span class="ruby-keyword kw">end</span>
643:       <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>)
644:       <span class="ruby-keyword kw">begin</span>
645:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">binmode</span>
646:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest_offset</span>
647:           <span class="ruby-identifier">storbinary</span>(<span class="ruby-value str">&quot;APPE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
648:         <span class="ruby-keyword kw">else</span>
649:           <span class="ruby-identifier">storbinary</span>(<span class="ruby-value str">&quot;STOR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
650:         <span class="ruby-keyword kw">end</span>
651:       <span class="ruby-keyword kw">ensure</span>
652:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
653:       <span class="ruby-keyword kw">end</span>
654:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003061">
                    
                    <a name="M003061"></a><b>puttextfile</b>(localfile, remotefile = File.basename(localfile))
                    
                </div>
                
                <div class="description">
                  <p>
Transfers <tt>localfile</tt> to the server in ASCII (text) mode, storing
the result in <tt>remotefile</tt>. If callback or an associated block is
supplied, calls it, passing in the transmitted data one line at a time.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003061_source')" id="l_M003061_source">show</a>
                        
                    </p>
                    <div id="M003061_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 661</span>
661:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">puttextfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
662:       <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>)
663:       <span class="ruby-keyword kw">begin</span>
664:         <span class="ruby-identifier">storlines</span>(<span class="ruby-value str">&quot;STOR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
665:       <span class="ruby-keyword kw">ensure</span>
666:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
667:       <span class="ruby-keyword kw">end</span>
668:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003077">
                    
                    <a name="M003077"></a><b>pwd</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the current remote directory.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FTP.html#M003078">getdir</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003077_source')" id="l_M003077_source">show</a>
                        
                    </p>
                    <div id="M003077_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 817</span>
817:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pwd</span>
818:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;PWD&quot;</span>)
819:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
820:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003085">
                    
                    <a name="M003085"></a><b>quit</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Exits the <a href="FTP.html">FTP</a> session.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003085_source')" id="l_M003085_source">show</a>
                        
                    </p>
                    <div id="M003085_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 882</span>
882:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quit</span>
883:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;QUIT&quot;</span>)
884:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003068">
                    
                    <a name="M003068"></a><b>rename</b>(fromname, toname)
                    
                </div>
                
                <div class="description">
                  <p>
Renames a file on the server.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003068_source')" id="l_M003068_source">show</a>
                        
                    </p>
                    <div id="M003068_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 734</span>
734:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename</span>(<span class="ruby-identifier">fromname</span>, <span class="ruby-identifier">toname</span>)
735:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;RNFR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">fromname</span>)
736:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?3</span>
737:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
738:       <span class="ruby-keyword kw">end</span>
739:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;RNTO &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">toname</span>)
740:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003049">
                    
                    <a name="M003049"></a><b>retrbinary</b>(cmd, blocksize, rest_offset = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Puts the connection into binary (image) mode, issues the given command, and
fetches the data returned, passing it to the associated block in chunks of
<tt>blocksize</tt> characters. Note that <tt>cmd</tt> is a server command
(such as &#8220;RETR myfile&#8221;).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003049_source')" id="l_M003049_source">show</a>
                        
                    </p>
                    <div id="M003049_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 454</span>
454:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retrbinary</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>) <span class="ruby-comment cmt"># :yield: data</span>
455:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
456:         <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span>
457:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">rest_offset</span>)
458:           <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
459:             <span class="ruby-identifier">data</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">blocksize</span>)
460:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
461:             <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">data</span>)
462:           <span class="ruby-keyword kw">end</span>
463:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
464:           <span class="ruby-identifier">voidresp</span>
465:         <span class="ruby-keyword kw">end</span>
466:       <span class="ruby-keyword kw">end</span>
467:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003051">
                    
                    <a name="M003051"></a><b>retrlines</b>(cmd)
                    
                </div>
                
                <div class="description">
                  <p>
Puts the connection into ASCII (text) mode, issues the given command, and
passes the resulting data, one line at a time, to the associated block. If
no block is given, prints the lines. Note that <tt>cmd</tt> is a server
command (such as &#8220;RETR myfile&#8221;).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003051_source')" id="l_M003051_source">show</a>
                        
                    </p>
                    <div id="M003051_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 475</span>
475:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-comment cmt"># :yield: line</span>
476:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
477:         <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">do</span>
478:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
479:           <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
480:             <span class="ruby-identifier">line</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">gets</span>
481:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
482:             <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">line</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\r?\n\z/</span>, <span class="ruby-value str">&quot;&quot;</span>), <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/\n\z/</span>).<span class="ruby-identifier">nil?</span>)
483:           <span class="ruby-keyword kw">end</span>
484:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
485:           <span class="ruby-identifier">voidresp</span>
486:         <span class="ruby-keyword kw">end</span>
487:       <span class="ruby-keyword kw">end</span>
488:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003076">
                    
                    <a name="M003076"></a><b>rmdir</b>(dirname)
                    
                </div>
                
                <div class="description">
                  <p>
Removes a remote directory.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003076_source')" id="l_M003076_source">show</a>
                        
                    </p>
                    <div id="M003076_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 810</span>
810:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dirname</span>)
811:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;RMD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>)
812:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003041">
                    
                    <a name="M003041"></a><b>sendcmd</b>(cmd)
                    
                </div>
                
                <div class="description">
                  <p>
Sends a command and returns the response.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003041_source')" id="l_M003041_source">show</a>
                        
                    </p>
                    <div id="M003041_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 322</span>
322:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
323:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
324:         <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">cmd</span>)
325:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">getresp</span>
326:       <span class="ruby-keyword kw">end</span>
327:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003033">
                    
                    <a name="M003033"></a><b>set_socket</b>(sock, get_greeting = true)
                    
                </div>
                
                <div class="description">
                  <p>
WRITEME or make private
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003033_source')" id="l_M003033_source">show</a>
                        
                    </p>
                    <div id="M003033_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 230</span>
230:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_socket</span>(<span class="ruby-identifier">sock</span>, <span class="ruby-identifier">get_greeting</span> = <span class="ruby-keyword kw">true</span>)
231:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
232:         <span class="ruby-ivar">@sock</span> = <span class="ruby-identifier">sock</span>
233:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">get_greeting</span>
234:           <span class="ruby-identifier">voidresp</span>
235:         <span class="ruby-keyword kw">end</span>
236:       <span class="ruby-keyword kw">end</span>
237:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003087">
                    
                    <a name="M003087"></a><b>site</b>(arg)
                    
                </div>
                
                <div class="description">
                  <p>
Issues a SITE command.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003087_source')" id="l_M003087_source">show</a>
                        
                    </p>
                    <div id="M003087_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 898</span>
898:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site</span>(<span class="ruby-identifier">arg</span>)
899:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;SITE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
900:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
901:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003073">
                    
                    <a name="M003073"></a><b>size</b>(filename)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the size of the given (remote) filename.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003073_source')" id="l_M003073_source">show</a>
                        
                    </p>
                    <div id="M003073_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 777</span>
777:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">size</span>(<span class="ruby-identifier">filename</span>)
778:       <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span>
779:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;SIZE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
780:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;213&quot;</span>
781:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
782:         <span class="ruby-keyword kw">end</span>
783:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">3</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">to_i</span>
784:       <span class="ruby-keyword kw">end</span>
785:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003081">
                    
                    <a name="M003081"></a><b>status</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns the status (STAT command).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003081_source')" id="l_M003081_source">show</a>
                        
                    </p>
                    <div id="M003081_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 851</span>
851:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">status</span>
852:       <span class="ruby-identifier">line</span> = <span class="ruby-value str">&quot;STAT&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
853:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;put: STAT\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
854:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">line</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">MSG_OOB</span>)
855:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">getresp</span>
856:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003053">
                    
                    <a name="M003053"></a><b>storbinary</b>(cmd, file, blocksize, rest_offset = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Puts the connection into binary (image) mode, issues the given server-side
command (such as &#8220;STOR myfile&#8221;), and sends the contents of the
file named <tt>file</tt> to the server. If the optional block is given, it
also passes it the data, in chunks of <tt>blocksize</tt> characters.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003053_source')" id="l_M003053_source">show</a>
                        
                    </p>
                    <div id="M003053_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 496</span>
496:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">storbinary</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
497:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest_offset</span>
498:         <span class="ruby-identifier">file</span>.<span class="ruby-identifier">seek</span>(<span class="ruby-identifier">rest_offset</span>, <span class="ruby-constant">IO</span><span class="ruby-operator">::</span><span class="ruby-constant">SEEK_SET</span>)
499:       <span class="ruby-keyword kw">end</span>
500:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
501:         <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span>
502:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
503:           <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
504:             <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">blocksize</span>)
505:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
506:             <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">buf</span>)
507:             <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
508:           <span class="ruby-keyword kw">end</span>
509:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
510:           <span class="ruby-identifier">voidresp</span>
511:         <span class="ruby-keyword kw">end</span>
512:       <span class="ruby-keyword kw">end</span>
513:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPIPE</span>
514:       <span class="ruby-comment cmt"># EPIPE, in this case, means that the data connection was unexpectedly</span>
515:       <span class="ruby-comment cmt"># terminated.  Rather than just raising EPIPE to the caller, check the</span>
516:       <span class="ruby-comment cmt"># response on the control connection.  If getresp doesn't raise a more</span>
517:       <span class="ruby-comment cmt"># appropriate exception, re-raise the original exception.</span>
518:       <span class="ruby-identifier">getresp</span>
519:       <span class="ruby-identifier">raise</span>
520:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003055">
                    
                    <a name="M003055"></a><b>storlines</b>(cmd, file)
                    
                </div>
                
                <div class="description">
                  <p>
Puts the connection into ASCII (text) mode, issues the given server-side
command (such as &#8220;STOR myfile&#8221;), and sends the contents of the
file named <tt>file</tt> to the server, one line at a time. If the optional
block is given, it also passes it the lines.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003055_source')" id="l_M003055_source">show</a>
                        
                    </p>
                    <div id="M003055_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 528</span>
528:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">storlines</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">file</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
529:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
530:         <span class="ruby-identifier">with_binary</span>(<span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">do</span>
531:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
532:           <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
533:             <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">gets</span>
534:             <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
535:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span>[<span class="ruby-value">-2</span>, <span class="ruby-value">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">CRLF</span>
536:               <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
537:             <span class="ruby-keyword kw">end</span>
538:             <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">buf</span>)
539:             <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
540:           <span class="ruby-keyword kw">end</span>
541:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
542:           <span class="ruby-identifier">voidresp</span>
543:         <span class="ruby-keyword kw">end</span>
544:       <span class="ruby-keyword kw">end</span>
545:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPIPE</span>
546:       <span class="ruby-comment cmt"># EPIPE, in this case, means that the data connection was unexpectedly</span>
547:       <span class="ruby-comment cmt"># terminated.  Rather than just raising EPIPE to the caller, check the</span>
548:       <span class="ruby-comment cmt"># response on the control connection.  If getresp doesn't raise a more</span>
549:       <span class="ruby-comment cmt"># appropriate exception, re-raise the original exception.</span>
550:       <span class="ruby-identifier">getresp</span>
551:       <span class="ruby-identifier">raise</span>
552:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003079">
                    
                    <a name="M003079"></a><b>system</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns system information.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003079_source')" id="l_M003079_source">show</a>
                        
                    </p>
                    <div id="M003079_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 826</span>
826:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">system</span>
827:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;SYST&quot;</span>)
828:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;215&quot;</span>
829:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
830:       <span class="ruby-keyword kw">end</span>
831:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">4</span> <span class="ruby-operator">..</span> <span class="ruby-value">-1</span>]
832:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003042">
                    
                    <a name="M003042"></a><b>voidcmd</b>(cmd)
                    
                </div>
                
                <div class="description">
                  <p>
Sends a command and expect a response beginning with &#8216;2&#8217;.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003042_source')" id="l_M003042_source">show</a>
                        
                    </p>
                    <div id="M003042_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/net/ftp.rb, line 332</span>
332:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
333:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
334:         <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">cmd</span>)
335:         <span class="ruby-identifier">voidresp</span>
336:       <span class="ruby-keyword kw">end</span>
337:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    