<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RDoc::Parser::Ruby</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            RDoc::Parser::Ruby 
            
                <span class="parent">&lt; 
                    
                    <a href="../Parser.html">RDoc::Parser</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/rdoc/parser/ruby_rb.html">lib/rdoc/parser/ruby.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Extracts code elements from a source file returning a <a
href="../TopLevel.html">TopLevel</a> object containing the constituent file
elements.
</p>
<p>
This file is based on rtags
</p>
<p>
RubyParser understands how to document:
</p>
<ul>
<li>classes

</li>
<li>modules

</li>
<li>methods

</li>
<li>constants

</li>
<li>aliases

</li>
<li>private, public, protected

</li>
<li>private_class_function, public_class_function

</li>
<li>module_function

</li>
<li>attr, attr_reader, attr_writer, attr_accessor

</li>
<li>extra accessors given on the command line

</li>
<li>metaprogrammed methods

</li>
<li>require

</li>
<li>include

</li>
</ul>
<h2><a href="../../Method.html">Method</a> Arguments</h2>
<p>
The parser extracts the arguments from the method definition. You can
override this with a custom argument definition using the :call-seq:
directive:
</p>
<pre>
  ##
  # This method can be called with a range or an offset and length
  #
  # :call-seq:
  #   my_method(Range)
  #   my_method(offset, length)

  def my_method(*args)
  end
</pre>
<p>
The parser extracts <tt>yield</tt> expressions from method bodies to gather
the yielded argument names. If your method manually calls a block instead
of yielding or you want to override the discovered argument names use the
:yields: directive:
</p>
<pre>
  ##
  # My method is awesome

  def my_method(&amp;block) # :yields: happy, times
    block.call 1, 2
  end
</pre>
<h2>Metaprogrammed Methods</h2>
<p>
To pick up a metaprogrammed method, the parser looks for a comment starting
with &#8217;##&#8217; before an identifier:
</p>
<pre>
  ##
  # This is a meta-programmed method!

  add_my_method :meta_method, :arg1, :arg2
</pre>
<p>
The parser looks at the token after the identifier to determine the name,
in this example, :meta_method. If a name cannot be found, a warning is
printed and &#8216;unknown is used.
</p>
<p>
You can force the name of a method using the :method: directive:
</p>
<pre>
  ##
  # :method: woo_hoo!
</pre>
<p>
By default, meta-methods are instance methods. To indicate that a method is
a singleton method instead use the :singleton-method: directive:
</p>
<pre>
  ##
  # :singleton-method:
</pre>
<p>
You can also use the :singleton-method: directive with a name:
</p>
<pre>
  ##
  # :singleton-method: woo_hoo!
</pre>
<p>
Additionally you can mark a method as an attribute by using :attr:,
:attr_reader:, :attr_writer: or :attr_accessor:. Just like for :method:,
the name is optional.
</p>
<pre>
  ##
  # :attr_reader: my_attr_name
</pre>
<h2>Hidden methods and attributes</h2>
<p>
You can provide documentation for methods that don&#8217;t appear using the
:method:, :singleton-method: and :attr: directives:
</p>
<pre>
  ##
  # :attr_writer: ghost_writer
  # There is an attribute here, but you can't see it!

  ##
  # :method: ghost_method
  # There is a method here, but you can't see it!

  ##
  # this is a comment for a regular method

  def regular_method() end
</pre>
<p>
Note that by default, the :method: directive will be ignored if there is a
standard rdocable item following it.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M004546">collect_first_comment</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M004547">error</a>,</li>
                
                <li><a href="#M004548">extract_call_seq</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M004549">get_bool</a>,</li>
                
                <li><a href="#M004550">get_class_or_module</a>,</li>
                
                <li><a href="#M004553">get_class_specification</a>,</li>
                
                <li><a href="#M004554">get_constant</a>,</li>
                
                <li><a href="#M004556">get_constant_with_optional_parens</a>,</li>
                
                <li><a href="#M004557">get_symbol_or_name</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M004561">look_for_directives_in</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M004565">make_message</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M004544">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M004571">parse_alias</a>,</li>
                
                <li><a href="#M004568">parse_attr</a>,</li>
                
                <li><a href="#M004569">parse_attr_accessor</a>,</li>
                
                <li><a href="#M004575">parse_call_parameters</a>,</li>
                
                <li><a href="#M004576">parse_class</a>,</li>
                
                <li><a href="#M004581">parse_comment</a>,</li>
                
                <li><a href="#M004577">parse_constant</a>,</li>
                
                <li><a href="#M004586">parse_include</a>,</li>
                
                <li><a href="#M004588">parse_meta_attr</a>,</li>
                
                <li><a href="#M004589">parse_meta_method</a>,</li>
                
                <li><a href="#M004590">parse_method</a>,</li>
                
                <li><a href="#M004605">parse_method_or_yield_parameters</a>,</li>
                
                <li><a href="#M004608">parse_method_parameters</a>,</li>
                
                <li><a href="#M004610">parse_module</a>,</li>
                
                <li><a href="#M004613">parse_require</a>,</li>
                
                <li><a href="#M004614">parse_statements</a>,</li>
                
                <li><a href="#M004619">parse_symbol_arg</a>,</li>
                
                <li><a href="#M004622">parse_symbol_in_arg</a>,</li>
                
                <li><a href="#M004623">parse_top_level_statements</a>,</li>
                
                <li><a href="#M004624">parse_visibility</a>,</li>
                
                <li><a href="#M004625">parse_yield</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M004626">read_directive</a>,</li>
                
                <li><a href="#M004627">read_documentation_modifiers</a>,</li>
                
                <li><a href="#M004628">remove_private_comments</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M004629">scan</a>,</li>
                
                <li><a href="#M004632">skip_for_variable</a>,</li>
                
                <li><a href="#M004635">skip_method</a>,</li>
                
                <li><a href="#M004630">skip_optional_do_after_expression</a>,</li>
                
                <li><a href="#M004636">skip_tkspace_comment</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M004637">warn</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="../../JSON.html">JSON</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="../../JSON.html">JSON</a>
            
            START:includes
        </li>
        
        <li>
            
            <a href="../../JSON.html">JSON</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">NORMAL</td>
            <td>=</td>
            <td class="attr-value">&quot;::&quot;</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="../NormalClass.html">RDoc::NormalClass</a> type
</p>
</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">SINGLE</td>
            <td>=</td>
            <td class="attr-value">&quot;&lt;&lt;&quot;</td>
        </tr>
        
        <tr valign='top'>
            <td>&nbsp;</td>
            <td colspan="2" class="attr-desc"><p>
<a href="../SingleClass.html">RDoc::SingleClass</a> type
</p>
</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M004544">
                    
                    <a name="M004544"></a><b>new</b>(top_level, file_name, content, options, stats)
                    
                </div>
                
                <div class="description">
                  <p>
Creates a new <a href="Ruby.html">Ruby</a> parser.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004544_source')" id="l_M004544_source">show</a>
                        
                    </p>
                    <div id="M004544_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 168</span>
168:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">top_level</span>, <span class="ruby-identifier">file_name</span>, <span class="ruby-identifier">content</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">stats</span>)
169:     <span class="ruby-keyword kw">super</span>
170: 
171:     <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>
172:     <span class="ruby-ivar">@token_listeners</span> = <span class="ruby-keyword kw">nil</span>
173:     <span class="ruby-ivar">@scanner</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RubyLex</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">content</span>, <span class="ruby-ivar">@options</span>
174:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">exception_on_syntax_error</span> = <span class="ruby-keyword kw">false</span>
175:     <span class="ruby-ivar">@prev_seek</span> = <span class="ruby-keyword kw">nil</span>
176: 
177:     <span class="ruby-ivar">@encoding</span> = <span class="ruby-keyword kw">nil</span>
178:     <span class="ruby-ivar">@encoding</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span>
179: 
180:     <span class="ruby-identifier">reset</span>
181:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M004546">
                    
                    <a name="M004546"></a><b>collect_first_comment</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Look for the first comment in a file that isn&#8217;t a shebang line.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004546_source')" id="l_M004546_source">show</a>
                        
                    </p>
                    <div id="M004546_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 186</span>
186:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collect_first_comment</span>
187:     <span class="ruby-identifier">skip_tkspace</span>
188:     <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>
189:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@encoding</span>
190:     <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">true</span>
191: 
192:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
193: 
194:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
195:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">first_line</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A#!/</span> <span class="ruby-keyword kw">then</span>
196:         <span class="ruby-identifier">skip_tkspace</span>
197:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
198:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">first_line</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A#\s*-\*-/</span> <span class="ruby-keyword kw">then</span>
199:         <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">false</span>
200:         <span class="ruby-identifier">skip_tkspace</span>
201:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
202:       <span class="ruby-keyword kw">else</span>
203:         <span class="ruby-identifier">first_line</span> = <span class="ruby-keyword kw">false</span>
204:         <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
205:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
206: 
207:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkNL</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
208:           <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
209:           <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
210:         <span class="ruby-keyword kw">end</span>
211:       <span class="ruby-keyword kw">end</span>
212:     <span class="ruby-keyword kw">end</span>
213: 
214:     <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
215: 
216:     <span class="ruby-identifier">comment</span>
217:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004547">
                    
                    <a name="M004547"></a><b>error</b>(msg)
                    
                </div>
                
                <div class="description">
                  <p>
Aborts with <tt>msg</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004547_source')" id="l_M004547_source">show</a>
                        
                    </p>
                    <div id="M004547_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 222</span>
222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">error</span>(<span class="ruby-identifier">msg</span>)
223:     <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">msg</span>
224: 
225:     <span class="ruby-identifier">abort</span> <span class="ruby-identifier">msg</span>
226:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004548">
                    
                    <a name="M004548"></a><b>extract_call_seq</b>(comment, meth)
                    
                </div>
                
                <div class="description">
                  <p>
Look for a &#8216;call-seq&#8217; in the comment, and override the normal
parameter stuff
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004548_source')" id="l_M004548_source">show</a>
                        
                    </p>
                    <div id="M004548_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 234</span>
234:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_call_seq</span>(<span class="ruby-identifier">comment</span>, <span class="ruby-identifier">meth</span>)
235:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/:?call-seq:(.*?)(^\s*#?\s*$|\z)/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
236:       <span class="ruby-identifier">seq</span> = <span class="ruby-identifier">$1</span>
237:       <span class="ruby-identifier">seq</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^\s*\#\s*/</span>, <span class="ruby-value str">''</span>)
238:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">call_seq</span> = <span class="ruby-identifier">seq</span>
239:     <span class="ruby-keyword kw">end</span>
240: 
241:     <span class="ruby-identifier">meth</span>
242:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004549">
                    
                    <a name="M004549"></a><b>get_bool</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Looks for a true or false token. Returns false if TkFALSE or TkNIL are
found.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004549_source')" id="l_M004549_source">show</a>
                        
                    </p>
                    <div id="M004549_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 248</span>
248:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_bool</span>
249:     <span class="ruby-identifier">skip_tkspace</span>
250:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
251:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
252:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkTRUE</span>
253:       <span class="ruby-keyword kw">true</span>
254:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkFALSE</span>, <span class="ruby-constant">TkNIL</span>
255:       <span class="ruby-keyword kw">false</span>
256:     <span class="ruby-keyword kw">else</span>
257:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
258:       <span class="ruby-keyword kw">true</span>
259:     <span class="ruby-keyword kw">end</span>
260:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004550">
                    
                    <a name="M004550"></a><b>get_class_or_module</b>(container)
                    
                </div>
                
                <div class="description">
                  <table>
<tr><td valign="top">Look for the name of a class of module (optionally with a leading :</td><td>or

</td></tr>
<tr><td valign="top">with :</td><td>separated named) and return the ultimate name, the associated

</td></tr>
</table>
<p>
container, and the given name (with the ::).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004550_source')" id="l_M004550_source">show</a>
                        
                    </p>
                    <div id="M004550_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 267</span>
267:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_class_or_module</span>(<span class="ruby-identifier">container</span>)
268:     <span class="ruby-identifier">skip_tkspace</span>
269:     <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
270:     <span class="ruby-identifier">given_name</span> = <span class="ruby-value str">''</span>
271: 
272:     <span class="ruby-comment cmt"># class ::A -&gt; A is in the top level</span>
273:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
274:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOLON2</span>, <span class="ruby-constant">TkCOLON3</span> <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># bug</span>
275:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
276:       <span class="ruby-identifier">container</span> = <span class="ruby-ivar">@top_level</span>
277:       <span class="ruby-identifier">given_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'::'</span>
278:     <span class="ruby-keyword kw">end</span>
279: 
280:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
281:     <span class="ruby-identifier">given_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
282: 
283:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">do</span>
284:       <span class="ruby-identifier">prev_container</span> = <span class="ruby-identifier">container</span>
285:       <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
286:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">then</span>
287:         <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
288:       <span class="ruby-keyword kw">end</span>
289:       <span class="ruby-identifier">get_tk</span>
290:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
291:       <span class="ruby-identifier">given_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'::'</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
292:     <span class="ruby-keyword kw">end</span>
293:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
294:     <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>, <span class="ruby-identifier">given_name</span>]
295:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004553">
                    
                    <a name="M004553"></a><b>get_class_specification</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Return a superclass, which can be either a constant of an expression
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004553_source')" id="l_M004553_source">show</a>
                        
                    </p>
                    <div id="M004553_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 300</span>
300:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_class_specification</span>
301:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
302:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;self&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkSELF</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
303: 
304:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
305:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON3</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
306:       <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
307:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
308:     <span class="ruby-keyword kw">end</span>
309: 
310:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
311:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
312: 
313:     <span class="ruby-identifier">get_tkread</span> <span class="ruby-comment cmt"># empty out read buffer</span>
314: 
315:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
316: 
317:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
318:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>, <span class="ruby-constant">TkCOMMENT</span>, <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
319:       <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
320:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>
321:     <span class="ruby-keyword kw">end</span>
322: 
323:     <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">parse_call_parameters</span>(<span class="ruby-identifier">tk</span>)
324:     <span class="ruby-identifier">res</span>
325:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004554">
                    
                    <a name="M004554"></a><b>get_constant</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Parse a constant, which might be qualified by one or more class or module
names
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004554_source')" id="l_M004554_source">show</a>
                        
                    </p>
                    <div id="M004554_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 331</span>
331:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_constant</span>
332:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
333:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
334:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
335: 
336:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON3</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
337:       <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
338:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
339:     <span class="ruby-keyword kw">end</span>
340: 
341: <span class="ruby-comment cmt">#      if res.empty?</span>
342: <span class="ruby-comment cmt">#        warn(&quot;Unexpected token #{tk} in constant&quot;)</span>
343: <span class="ruby-comment cmt">#      end</span>
344:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
345:     <span class="ruby-identifier">res</span>
346:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004556">
                    
                    <a name="M004556"></a><b>get_constant_with_optional_parens</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Get a constant that may be surrounded by parens
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004556_source')" id="l_M004556_source">show</a>
                        
                    </p>
                    <div id="M004556_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 351</span>
351:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_constant_with_optional_parens</span>
352:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
353: 
354:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
355: 
356:     <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> (<span class="ruby-identifier">tk</span> = <span class="ruby-identifier">peek_tk</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
357:       <span class="ruby-identifier">get_tk</span>
358:       <span class="ruby-identifier">skip_tkspace</span>
359:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
360:     <span class="ruby-keyword kw">end</span>
361: 
362:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_constant</span>
363: 
364:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
365:       <span class="ruby-identifier">skip_tkspace</span>
366:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
367:       <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkRPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
368:     <span class="ruby-keyword kw">end</span>
369: 
370:     <span class="ruby-identifier">name</span>
371:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004557">
                    
                    <a name="M004557"></a><b>get_symbol_or_name</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Extracts a name or symbol from the token stream.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004557_source')" id="l_M004557_source">show</a>
                        
                    </p>
                    <div id="M004557_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 376</span>
376:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_symbol_or_name</span>
377:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
378:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
379:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span> <span class="ruby-keyword kw">then</span>
380:       <span class="ruby-identifier">text</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^:/</span>, <span class="ruby-value str">''</span>)
381: 
382:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkASSIGN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
383:         <span class="ruby-identifier">get_tk</span>
384:         <span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'='</span>
385:       <span class="ruby-keyword kw">end</span>
386: 
387:       <span class="ruby-identifier">text</span>
388:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkId</span>, <span class="ruby-constant">TkOp</span> <span class="ruby-keyword kw">then</span>
389:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
390:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkAMPER</span>,
391:          <span class="ruby-constant">TkDSTRING</span>,
392:          <span class="ruby-constant">TkSTAR</span>,
393:          <span class="ruby-constant">TkSTRING</span> <span class="ruby-keyword kw">then</span>
394:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>
395:     <span class="ruby-keyword kw">else</span>
396:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Name or symbol expected (got #{tk})&quot;</span>
397:     <span class="ruby-keyword kw">end</span>
398:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004561">
                    
                    <a name="M004561"></a><b>look_for_directives_in</b>(context, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Look for directives in a normal comment block:
</p>
<pre>
  # :stopdoc:
  # Don't display comment from this point forward
</pre>
<p>
This routine modifies its <tt>comment</tt> parameter.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004561_source')" id="l_M004561_source">show</a>
                        
                    </p>
                    <div id="M004561_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 408</span>
408:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">look_for_directives_in</span> <span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>
409:     <span class="ruby-ivar">@preprocess</span>.<span class="ruby-identifier">handle</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">context</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directive</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
410:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">directive</span>
411:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'method'</span>, <span class="ruby-value str">'singleton-method'</span>,
412:            <span class="ruby-value str">'attr'</span>, <span class="ruby-value str">'attr_accessor'</span>, <span class="ruby-value str">'attr_reader'</span>, <span class="ruby-value str">'attr_writer'</span> <span class="ruby-keyword kw">then</span>
413:         <span class="ruby-keyword kw">false</span> <span class="ruby-comment cmt"># handled elsewhere</span>
414:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'section'</span> <span class="ruby-keyword kw">then</span>
415:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">set_current_section</span> <span class="ruby-identifier">param</span>, <span class="ruby-identifier">comment</span>
416:         <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">replace</span> <span class="ruby-value str">''</span>
417:         <span class="ruby-keyword kw">break</span>
418:       <span class="ruby-keyword kw">end</span>
419:     <span class="ruby-keyword kw">end</span>
420: 
421:     <span class="ruby-identifier">remove_private_comments</span> <span class="ruby-identifier">comment</span>
422:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004565">
                    
                    <a name="M004565"></a><b>make_message</b>(message)
                    
                </div>
                
                <div class="description">
                  <p>
Adds useful info about the parser to <tt>message</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004565_source')" id="l_M004565_source">show</a>
                        
                    </p>
                    <div id="M004565_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 427</span>
427:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">message</span>
428:     <span class="ruby-identifier">prefix</span> = <span class="ruby-node">&quot;#{@file_name}:&quot;</span>
429: 
430:     <span class="ruby-identifier">prefix</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{@scanner.line_no}:#{@scanner.char_no}:&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>
431: 
432:     <span class="ruby-node">&quot;#{prefix} #{message}&quot;</span>
433:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004571">
                    
                    <a name="M004571"></a><b>parse_alias</b>(context, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses an <tt>alias</tt> in <tt>context</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004571_source')" id="l_M004571_source">show</a>
                        
                    </p>
                    <div id="M004571_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 510</span>
510:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_alias</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
511:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
512:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
513: 
514:     <span class="ruby-identifier">skip_tkspace</span>
515: 
516:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
517:       <span class="ruby-identifier">get_tk</span>
518:       <span class="ruby-identifier">skip_tkspace</span>
519:     <span class="ruby-keyword kw">end</span>
520: 
521:     <span class="ruby-identifier">new_name</span> = <span class="ruby-identifier">get_symbol_or_name</span>
522: 
523:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span> }
524: 
525:     <span class="ruby-identifier">skip_tkspace</span>
526:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
527:       <span class="ruby-identifier">get_tk</span>
528:       <span class="ruby-identifier">skip_tkspace</span>
529:     <span class="ruby-keyword kw">end</span>
530: 
531:     <span class="ruby-keyword kw">begin</span>
532:       <span class="ruby-identifier">old_name</span> = <span class="ruby-identifier">get_symbol_or_name</span>
533:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
534:       <span class="ruby-keyword kw">return</span>
535:     <span class="ruby-keyword kw">end</span>
536: 
537:     <span class="ruby-identifier">al</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Alias</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">old_name</span>, <span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">comment</span>,
538:                          <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
539:     <span class="ruby-identifier">al</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
540:     <span class="ruby-identifier">al</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
541:     <span class="ruby-identifier">al</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
542: 
543:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">al</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
544:     <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_alias</span> <span class="ruby-identifier">al</span>
545:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_alias</span> <span class="ruby-identifier">al</span>
546: 
547:     <span class="ruby-identifier">al</span>
548:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004568">
                    
                    <a name="M004568"></a><b>parse_attr</b>(context, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Creates an <a href="../Attr.html">RDoc::Attr</a> for the name following
<tt>tk</tt>, setting the comment to <tt>comment</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004568_source')" id="l_M004568_source">show</a>
                        
                    </p>
                    <div id="M004568_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 439</span>
439:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attr</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
440:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
441:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
442: 
443:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span> <span class="ruby-value">1</span>
444:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span>
445:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>]
446:       <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;R&quot;</span>
447:       <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
448:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
449: 
450:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
451:         <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;RW&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">get_bool</span>
452:       <span class="ruby-keyword kw">else</span>
453:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
454:       <span class="ruby-keyword kw">end</span>
455: 
456:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>
457:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
458:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
459:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
460: 
461:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">att</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
462: 
463:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
464: 
465:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
466:     <span class="ruby-keyword kw">else</span>
467:       <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;'attr' ignored - looks like a variable&quot;</span>
468:     <span class="ruby-keyword kw">end</span>
469:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004569">
                    
                    <a name="M004569"></a><b>parse_attr_accessor</b>(context, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Creates an <a href="../Attr.html">RDoc::Attr</a> for each attribute listed
after <tt>tk</tt>, setting the comment for each to <tt>comment</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004569_source')" id="l_M004569_source">show</a>
                        
                    </p>
                    <div id="M004569_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 475</span>
475:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_attr_accessor</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
476:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
477:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
478: 
479:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
480:     <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;?&quot;</span>
481: 
482:     <span class="ruby-identifier">tmp</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeObject</span>.<span class="ruby-identifier">new</span>
483:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">tmp</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
484:     <span class="ruby-comment cmt"># TODO In most other places we let the context keep track of document_self</span>
485:     <span class="ruby-comment cmt"># and add found items appropriately but here we do not.  I'm not sure why.</span>
486:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tmp</span>.<span class="ruby-identifier">document_self</span>
487: 
488:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
489:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_reader&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;R&quot;</span>
490:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_writer&quot;</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;W&quot;</span>
491:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;attr_accessor&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;RW&quot;</span>
492:     <span class="ruby-keyword kw">else</span>
493:       <span class="ruby-identifier">rw</span> = <span class="ruby-value str">'?'</span>
494:     <span class="ruby-keyword kw">end</span>
495: 
496:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">args</span>
497:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>
498:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
499:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
500:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
501: 
502:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
503:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
504:     <span class="ruby-keyword kw">end</span>
505:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004575">
                    
                    <a name="M004575"></a><b>parse_call_parameters</b>(tk)
                    
                </div>
                
                <div class="description">
                  <p>
Extracts call parameters from the token stream.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004575_source')" id="l_M004575_source">show</a>
                        
                    </p>
                    <div id="M004575_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 553</span>
553:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_call_parameters</span>(<span class="ruby-identifier">tk</span>)
554:     <span class="ruby-identifier">end_token</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
555:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
556:                   <span class="ruby-constant">TkRPAREN</span>
557:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
558:                   <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
559:                 <span class="ruby-keyword kw">else</span>
560:                   <span class="ruby-constant">TkNL</span>
561:                 <span class="ruby-keyword kw">end</span>
562:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
563: 
564:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
565:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
566:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span>
567:         <span class="ruby-keyword kw">break</span>
568:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
569:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
570:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span>
571:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
572:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
573:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
574:         <span class="ruby-keyword kw">else</span>
575:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
576:         <span class="ruby-keyword kw">end</span>
577:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span>, <span class="ruby-constant">TkASSIGN</span>, <span class="ruby-constant">TkOPASGN</span>
578:         <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>)
579:         <span class="ruby-keyword kw">break</span>
580:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">then</span>
581:         <span class="ruby-keyword kw">break</span>
582:       <span class="ruby-keyword kw">end</span>
583:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
584:     <span class="ruby-keyword kw">end</span>
585:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">strip</span>
586:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
587:     <span class="ruby-identifier">res</span>
588:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004576">
                    
                    <a name="M004576"></a><b>parse_class</b>(container, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a class in <tt>context</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004576_source')" id="l_M004576_source">show</a>
                        
                    </p>
                    <div id="M004576_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 593</span>
593:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_class</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
594:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
595:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
596: 
597:     <span class="ruby-identifier">declaration_context</span> = <span class="ruby-identifier">container</span>
598:     <span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>, <span class="ruby-identifier">given_name</span> = <span class="ruby-identifier">get_class_or_module</span> <span class="ruby-identifier">container</span>
599: 
600:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
601:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span>
602:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
603:       <span class="ruby-identifier">superclass</span> = <span class="ruby-value str">'::Object'</span>
604: 
605:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
606:         <span class="ruby-identifier">get_tk</span>
607:         <span class="ruby-identifier">skip_tkspace</span>
608:         <span class="ruby-identifier">superclass</span> = <span class="ruby-identifier">get_class_specification</span>
609:         <span class="ruby-identifier">superclass</span> = <span class="ruby-value str">'(unknown)'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">empty?</span>
610:       <span class="ruby-keyword kw">end</span>
611: 
612:       <span class="ruby-identifier">cls_type</span> = <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span> <span class="ruby-value">? </span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">SingleClass</span> <span class="ruby-operator">:</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span>
613:       <span class="ruby-identifier">cls</span> = <span class="ruby-identifier">declaration_context</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">cls_type</span>, <span class="ruby-identifier">given_name</span>, <span class="ruby-identifier">superclass</span>
614:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">ignore</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_children</span>
615: 
616:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">cls</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
617:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
618:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
619:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
620: 
621:       <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">add_comment</span> <span class="ruby-identifier">comment</span>, <span class="ruby-ivar">@top_level</span>
622: 
623:       <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_to_classes_or_modules</span> <span class="ruby-identifier">cls</span>
624:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">cls</span>
625: 
626:       <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">cls</span>
627:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLSHFT</span>
628:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_class_specification</span>
629:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;self&quot;</span>, <span class="ruby-identifier">container</span>.<span class="ruby-identifier">name</span>
630:         <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-constant">SINGLE</span>
631:       <span class="ruby-keyword kw">else</span>
632:         <span class="ruby-identifier">other</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">find_class_named</span> <span class="ruby-identifier">name</span>
633: 
634:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">other</span> <span class="ruby-keyword kw">then</span>
635:           <span class="ruby-identifier">other</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name</span>
636:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
637:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">offset</span>
638:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">line</span>    = <span class="ruby-identifier">line_no</span>
639: 
640:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">add_comment</span> <span class="ruby-identifier">comment</span>, <span class="ruby-ivar">@top_level</span>
641:         <span class="ruby-keyword kw">end</span>
642: 
643:         <span class="ruby-comment cmt"># notify :nodoc: all if not a constant-named class/module</span>
644:         <span class="ruby-comment cmt"># (and remove any comment)</span>
645:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A(::)?[A-Z]/</span> <span class="ruby-keyword kw">then</span>
646:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">nil</span>
647:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">document_children</span> = <span class="ruby-keyword kw">false</span>
648:           <span class="ruby-identifier">other</span>.<span class="ruby-identifier">clear_comment</span>
649:         <span class="ruby-keyword kw">end</span>
650: 
651:         <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_to_classes_or_modules</span> <span class="ruby-identifier">other</span>
652:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">other</span>
653: 
654:         <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">other</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
655:         <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">other</span>, <span class="ruby-constant">SINGLE</span>)
656:       <span class="ruby-keyword kw">end</span>
657:     <span class="ruby-keyword kw">else</span>
658:       <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Expected class name or '&lt;&lt;'. Got #{name_t.class}: #{name_t.text.inspect}&quot;</span>)
659:     <span class="ruby-keyword kw">end</span>
660:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004581">
                    
                    <a name="M004581"></a><b>parse_comment</b>(container, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Generates an <a href="../../Method.html">RDoc::Method</a> or <a
href="../Attr.html">RDoc::Attr</a> from <tt>comment</tt> by looking for
:method: or :attr: directives in <tt>comment</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004581_source')" id="l_M004581_source">show</a>
                        
                    </p>
                    <div id="M004581_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 754</span>
754:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_comment</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
755:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
756:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
757:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
758: 
759:     <span class="ruby-identifier">singleton</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/(^# +:?)(singleton-)(method:)/</span>, <span class="ruby-value str">'\1\3'</span>)
760: 
761:     <span class="ruby-comment cmt"># REFACTOR</span>
762:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^# +:?method: *(\S*).*?\n/i</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
763:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">empty?</span>
764: 
765:       <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">GhostMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
766:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
767:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-identifier">singleton</span>
768:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">offset</span>    = <span class="ruby-identifier">offset</span>
769:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">line</span>      = <span class="ruby-identifier">line_no</span>
770: 
771:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
772:       <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
773:       <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">column</span>
774: 
775:       <span class="ruby-identifier">position_comment</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>
776:       <span class="ruby-identifier">position_comment</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-node">&quot;# File #{@top_level.absolute_name}, line #{line_no}&quot;</span>
777:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">position_comment</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
778: 
779:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">params</span> = <span class="ruby-value str">''</span>
780: 
781:       <span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">meth</span>
782: 
783:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span>
784: 
785:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
786: 
787:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
788: 
789:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
790:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/# +:?(attr(_reader|_writer|_accessor)?): *(\S*).*?\n/i</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
791:       <span class="ruby-identifier">rw</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">$1</span>
792:            <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr_reader'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'R'</span>
793:            <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr_writer'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'W'</span>
794:            <span class="ruby-keyword kw">else</span> <span class="ruby-value str">'RW'</span>
795:            <span class="ruby-keyword kw">end</span>
796: 
797:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$3</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">empty?</span>
798: 
799:       <span class="ruby-comment cmt"># TODO authorize 'singleton-attr...'?</span>
800:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>
801:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
802:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">offset</span>    = <span class="ruby-identifier">offset</span>
803:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">line</span>      = <span class="ruby-identifier">line_no</span>
804: 
805:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
806:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
807:     <span class="ruby-keyword kw">end</span>
808: 
809:     <span class="ruby-keyword kw">true</span>
810:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004577">
                    
                    <a name="M004577"></a><b>parse_constant</b>(container, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a constant in <tt>context</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004577_source')" id="l_M004577_source">show</a>
                        
                    </p>
                    <div id="M004577_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 665</span>
665:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_constant</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
666:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
667:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
668: 
669:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
670:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
671: 
672:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\w+$/</span>
673: 
674:     <span class="ruby-identifier">eq_tk</span> = <span class="ruby-identifier">get_tk</span>
675: 
676:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkASSIGN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">eq_tk</span> <span class="ruby-keyword kw">then</span>
677:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">eq_tk</span>
678:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
679:     <span class="ruby-keyword kw">end</span>
680: 
681:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
682:     <span class="ruby-identifier">get_tkread</span>
683: 
684:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
685: 
686:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkGT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
687:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
688:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">eq_tk</span>
689:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
690:     <span class="ruby-keyword kw">end</span>
691: 
692:     <span class="ruby-identifier">rhs_name</span> = <span class="ruby-value str">''</span>
693: 
694:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
695:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
696:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
697:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
698:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>, <span class="ruby-constant">TkLBRACE</span>, <span class="ruby-constant">TkfLBRACE</span>, <span class="ruby-constant">TkLBRACK</span>, <span class="ruby-constant">TkfLBRACK</span>,
699:            <span class="ruby-constant">TkDO</span>, <span class="ruby-constant">TkIF</span>, <span class="ruby-constant">TkUNLESS</span>, <span class="ruby-constant">TkCASE</span>, <span class="ruby-constant">TkDEF</span>, <span class="ruby-constant">TkBEGIN</span> <span class="ruby-keyword kw">then</span>
700:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
701:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>, <span class="ruby-constant">TkRBRACE</span>, <span class="ruby-constant">TkRBRACK</span>, <span class="ruby-constant">TkEND</span> <span class="ruby-keyword kw">then</span>
702:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
703:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-keyword kw">then</span>
704:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span>
705:            (<span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>) <span class="ruby-keyword kw">then</span>
706:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
707:           <span class="ruby-keyword kw">break</span>
708:         <span class="ruby-keyword kw">end</span>
709:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-keyword kw">then</span>
710:         <span class="ruby-identifier">rhs_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
711: 
712:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-constant">TkNL</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-keyword kw">then</span>
713:           <span class="ruby-identifier">mod</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rhs_name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^::/</span> <span class="ruby-keyword kw">then</span>
714:                   <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">find_class_or_module</span> <span class="ruby-identifier">rhs_name</span>
715:                 <span class="ruby-keyword kw">else</span>
716:                   <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span> <span class="ruby-identifier">rhs_name</span>
717:                 <span class="ruby-keyword kw">end</span>
718: 
719:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_module_alias</span> <span class="ruby-identifier">mod</span>, <span class="ruby-identifier">name</span>, <span class="ruby-ivar">@top_level</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mod</span>
720:           <span class="ruby-keyword kw">break</span>
721:         <span class="ruby-keyword kw">end</span>
722:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span> <span class="ruby-keyword kw">then</span>
723:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span>
724:            (<span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>) <span class="ruby-keyword kw">then</span>
725:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
726:           <span class="ruby-keyword kw">break</span>
727:         <span class="ruby-keyword kw">end</span>
728:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOLON2</span>, <span class="ruby-constant">TkCOLON3</span> <span class="ruby-keyword kw">then</span>
729:         <span class="ruby-identifier">rhs_name</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'::'</span>
730:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">then</span>
731:         <span class="ruby-keyword kw">break</span>
732:       <span class="ruby-keyword kw">end</span>
733:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
734:     <span class="ruby-keyword kw">end</span>
735: 
736:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^[ \t]+/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">strip</span>
737:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;;&quot;</span>
738: 
739:     <span class="ruby-identifier">con</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Constant</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">comment</span>
740:     <span class="ruby-identifier">con</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
741:     <span class="ruby-identifier">con</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
742:     <span class="ruby-identifier">con</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
743:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">con</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CONSTANT_MODIFIERS</span>
744: 
745:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_constant</span> <span class="ruby-identifier">con</span>
746:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_constant</span> <span class="ruby-identifier">con</span>
747:     <span class="ruby-keyword kw">true</span>
748:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004586">
                    
                    <a name="M004586"></a><b>parse_include</b>(context, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses an <tt>include</tt> in <tt>context</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004586_source')" id="l_M004586_source">show</a>
                        
                    </p>
                    <div id="M004586_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 815</span>
815:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_include</span> <span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>
816:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
817:       <span class="ruby-identifier">skip_tkspace_comment</span>
818: 
819:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">get_constant_with_optional_parens</span>
820: 
821:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
822:         <span class="ruby-identifier">incl</span> = <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_include</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Include</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">comment</span>)
823:         <span class="ruby-identifier">incl</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
824:       <span class="ruby-keyword kw">end</span>
825: 
826:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
827: 
828:       <span class="ruby-identifier">get_tk</span>
829:     <span class="ruby-keyword kw">end</span>
830:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004588">
                    
                    <a name="M004588"></a><b>parse_meta_attr</b>(context, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a meta-programmed attribute and creates an <a
href="../Attr.html">RDoc::Attr</a>.
</p>
<p>
To create foo and bar attributes on class <a href="C.html">C</a> with
comment &#8220;My attributes&#8221;:
</p>
<pre>
  class C

    ##
    # :attr:
    #
    # My attributes

    my_attr :foo, :bar

  end
</pre>
<p>
To create a foo attribute on class <a href="C.html">C</a> with comment
&#8220;My attribute&#8221;:
</p>
<pre>
  class C

    ##
    # :attr: foo
    #
    # My attribute

    my_attr :foo, :bar

  end
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004588_source')" id="l_M004588_source">show</a>
                        
                    </p>
                    <div id="M004588_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 861</span>
861:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_meta_attr</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
862:     <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
863:     <span class="ruby-identifier">rw</span> = <span class="ruby-value str">&quot;?&quot;</span>
864: 
865:     <span class="ruby-comment cmt"># If nodoc is given, don't document any of them</span>
866: 
867:     <span class="ruby-identifier">tmp</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeObject</span>.<span class="ruby-identifier">new</span>
868:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">tmp</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">ATTR_MODIFIERS</span>
869: 
870:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^# +:?(attr(_reader|_writer|_accessor)?): *(\S*).*?\n/i</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
871:       <span class="ruby-identifier">rw</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">$1</span>
872:            <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr_reader'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'R'</span>
873:            <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr_writer'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'W'</span>
874:            <span class="ruby-keyword kw">else</span> <span class="ruby-value str">'RW'</span>
875:            <span class="ruby-keyword kw">end</span>
876:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$3</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">empty?</span>
877:     <span class="ruby-keyword kw">end</span>
878: 
879:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">then</span>
880:       <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>
881:       <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
882: 
883:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
884:       <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
885:     <span class="ruby-keyword kw">else</span>
886:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr_name</span><span class="ruby-operator">|</span>
887:         <span class="ruby-identifier">att</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">rw</span>, <span class="ruby-identifier">comment</span>,
888:                              <span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
889:         <span class="ruby-identifier">att</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
890: 
891:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
892:         <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">att</span>
893:       <span class="ruby-keyword kw">end</span>
894:     <span class="ruby-keyword kw">end</span>
895:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004589">
                    
                    <a name="M004589"></a><b>parse_meta_method</b>(container, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a meta-programmed method
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004589_source')" id="l_M004589_source">show</a>
                        
                    </p>
                    <div id="M004589_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 900</span>
900:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_meta_method</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
901:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
902:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
903:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
904: 
905:     <span class="ruby-identifier">start_collecting_tokens</span>
906:     <span class="ruby-identifier">add_token</span> <span class="ruby-identifier">tk</span>
907:     <span class="ruby-identifier">add_token_listener</span> <span class="ruby-keyword kw">self</span>
908: 
909:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
910: 
911:     <span class="ruby-identifier">singleton</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/(^# +:?)(singleton-)(method:)/</span>, <span class="ruby-value str">'\1\3'</span>)
912: 
913:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^# +:?method: *(\S*).*?\n/i</span>, <span class="ruby-value str">''</span>) <span class="ruby-keyword kw">then</span>
914:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">empty?</span>
915:     <span class="ruby-keyword kw">end</span>
916: 
917:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
918:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
919:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
920:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span> <span class="ruby-keyword kw">then</span>
921:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">text</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
922:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span> <span class="ruby-keyword kw">then</span>
923:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">value</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
924:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkASSIGN</span> <span class="ruby-keyword kw">then</span> <span class="ruby-comment cmt"># ignore</span>
925:         <span class="ruby-identifier">remove_token_listener</span> <span class="ruby-keyword kw">self</span>
926:         <span class="ruby-keyword kw">return</span>
927:       <span class="ruby-keyword kw">else</span>
928:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;unknown name token #{name_t.inspect} for meta-method '#{tk.name}'&quot;</span>
929:         <span class="ruby-identifier">name</span> = <span class="ruby-value str">'unknown'</span>
930:       <span class="ruby-keyword kw">end</span>
931:     <span class="ruby-keyword kw">end</span>
932: 
933:     <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">MetaMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
934:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
935:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
936:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
937:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-identifier">singleton</span>
938: 
939:     <span class="ruby-identifier">remove_token_listener</span> <span class="ruby-keyword kw">self</span>
940: 
941:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
942:     <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
943:     <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">column</span>
944: 
945:     <span class="ruby-identifier">position_comment</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>
946:     <span class="ruby-identifier">position_comment</span>.<span class="ruby-identifier">value</span> = <span class="ruby-node">&quot;# File #{@top_level.absolute_name}, line #{line_no}&quot;</span>
947:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">position_comment</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
948:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> <span class="ruby-ivar">@token_stream</span>
949: 
950:     <span class="ruby-identifier">token_listener</span> <span class="ruby-identifier">meth</span> <span class="ruby-keyword kw">do</span>
951:       <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">params</span> = <span class="ruby-value str">''</span>
952: 
953:       <span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">meth</span>
954: 
955:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
956: 
957:       <span class="ruby-identifier">last_tk</span> = <span class="ruby-identifier">tk</span>
958: 
959:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">do</span>
960:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
961:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
962:           <span class="ruby-keyword kw">break</span>
963:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span> <span class="ruby-keyword kw">then</span>
964:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">last_tk</span> <span class="ruby-keyword kw">and</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">last_tk</span>
965:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSPACE</span> <span class="ruby-keyword kw">then</span>
966:           <span class="ruby-comment cmt"># expression continues</span>
967:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDO</span> <span class="ruby-keyword kw">then</span>
968:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
969:           <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">meth</span>
970:           <span class="ruby-keyword kw">break</span>
971:         <span class="ruby-keyword kw">else</span>
972:           <span class="ruby-identifier">last_tk</span> = <span class="ruby-identifier">tk</span>
973:         <span class="ruby-keyword kw">end</span>
974:       <span class="ruby-keyword kw">end</span>
975:     <span class="ruby-keyword kw">end</span>
976: 
977:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
978: 
979:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
980:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004590">
                    
                    <a name="M004590"></a><b>parse_method</b>(container, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses a normal method defined by <tt>def</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004590_source')" id="l_M004590_source">show</a>
                        
                    </p>
                    <div id="M004590_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 985</span>
 985:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
 986:     <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">nil</span>
 987:     <span class="ruby-identifier">meth</span> = <span class="ruby-keyword kw">nil</span>
 988:     <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>
 989:     <span class="ruby-identifier">column</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">char_no</span>
 990:     <span class="ruby-identifier">offset</span>  = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">seek</span>
 991:     <span class="ruby-identifier">line_no</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">line_no</span>
 992: 
 993:     <span class="ruby-identifier">start_collecting_tokens</span>
 994:     <span class="ruby-identifier">add_token</span> <span class="ruby-identifier">tk</span>
 995: 
 996:     <span class="ruby-identifier">token_listener</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">do</span>
 997:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span> <span class="ruby-keyword kw">end</span>
 998: 
 999:       <span class="ruby-identifier">skip_tkspace</span>
1000:       <span class="ruby-identifier">name_t</span> = <span class="ruby-identifier">get_tk</span>
1001:       <span class="ruby-identifier">back_tk</span> = <span class="ruby-identifier">skip_tkspace</span>
1002:       <span class="ruby-identifier">meth</span> = <span class="ruby-keyword kw">nil</span>
1003:       <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">false</span>
1004: 
1005:       <span class="ruby-identifier">dot</span> = <span class="ruby-identifier">get_tk</span>
1006:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkDOT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">dot</span> <span class="ruby-keyword kw">or</span> <span class="ruby-constant">TkCOLON2</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">dot</span> <span class="ruby-keyword kw">then</span>
1007:         <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@lex_state</span> = <span class="ruby-constant">EXPR_FNAME</span> <span class="ruby-keyword kw">end</span>
1008:         <span class="ruby-identifier">skip_tkspace</span>
1009:         <span class="ruby-identifier">name_t2</span> = <span class="ruby-identifier">get_tk</span>
1010: 
1011:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
1012:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSELF</span>, <span class="ruby-constant">TkMOD</span> <span class="ruby-keyword kw">then</span>
1013:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
1014:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-keyword kw">then</span>
1015:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
1016:           <span class="ruby-identifier">prev_container</span> = <span class="ruby-identifier">container</span>
1017:           <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">find_module_named</span>(<span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>)
1018:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">then</span>
1019:             <span class="ruby-identifier">added_container</span> = <span class="ruby-keyword kw">true</span>
1020:             <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;::&quot;</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-constant">Object</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span>, <span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
1021:               <span class="ruby-identifier">state</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">item</span>)
1022:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1023: 
1024:             <span class="ruby-identifier">type</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Class</span> <span class="ruby-value">? </span><span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span> <span class="ruby-operator">:</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>
1025: 
1026:             <span class="ruby-keyword kw">unless</span> [<span class="ruby-constant">Class</span>, <span class="ruby-constant">Module</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">class</span>) <span class="ruby-keyword kw">then</span>
1027:               <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Couldn't find #{name_t.name}. Assuming it's a module&quot;</span>)
1028:             <span class="ruby-keyword kw">end</span>
1029: 
1030:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span> <span class="ruby-keyword kw">then</span>
1031:               <span class="ruby-identifier">sclass</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-value">? </span><span class="ruby-identifier">obj</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
1032:               <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-identifier">type</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">sclass</span>
1033:             <span class="ruby-keyword kw">else</span>
1034:               <span class="ruby-identifier">container</span> = <span class="ruby-identifier">prev_container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-identifier">type</span>, <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1035:             <span class="ruby-keyword kw">end</span>
1036: 
1037:             <span class="ruby-identifier">container</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1038:           <span class="ruby-keyword kw">end</span>
1039:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkIDENTIFIER</span>, <span class="ruby-constant">TkIVAR</span>, <span class="ruby-constant">TkGVAR</span> <span class="ruby-keyword kw">then</span>
1040:           <span class="ruby-identifier">dummy</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">new</span>
1041:           <span class="ruby-identifier">dummy</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-identifier">container</span>
1042:           <span class="ruby-identifier">skip_method</span> <span class="ruby-identifier">dummy</span>
1043:           <span class="ruby-keyword kw">return</span>
1044:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkTRUE</span>, <span class="ruby-constant">TkFALSE</span>, <span class="ruby-constant">TkNIL</span> <span class="ruby-keyword kw">then</span>
1045:           <span class="ruby-identifier">klass_name</span> = <span class="ruby-node">&quot;#{name_t.name.capitalize}Class&quot;</span>
1046:           <span class="ruby-identifier">container</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">TopLevel</span>.<span class="ruby-identifier">find_class_named</span> <span class="ruby-identifier">klass_name</span>
1047:           <span class="ruby-identifier">container</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_class</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalClass</span>, <span class="ruby-identifier">klass_name</span>
1048: 
1049:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t2</span>.<span class="ruby-identifier">name</span>
1050:         <span class="ruby-keyword kw">else</span>
1051:           <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;unexpected method name token #{name_t.inspect}&quot;</span>
1052:           <span class="ruby-comment cmt"># break</span>
1053:           <span class="ruby-identifier">skip_method</span> <span class="ruby-identifier">container</span>
1054:           <span class="ruby-keyword kw">return</span>
1055:         <span class="ruby-keyword kw">end</span>
1056: 
1057:         <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>)
1058:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1059:       <span class="ruby-keyword kw">else</span>
1060:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">dot</span>
1061:         <span class="ruby-identifier">back_tk</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">token</span><span class="ruby-operator">|</span>
1062:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">token</span>
1063:         <span class="ruby-keyword kw">end</span>
1064: 
1065:         <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">name_t</span>
1066:                <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTAR</span>, <span class="ruby-constant">TkAMPER</span> <span class="ruby-keyword kw">then</span>
1067:                  <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">text</span>
1068:                <span class="ruby-keyword kw">else</span>
1069:                  <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:name</span> <span class="ruby-keyword kw">then</span>
1070:                    <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;expected method name token, . or ::, got #{name_t.inspect}&quot;</span>
1071:                    <span class="ruby-identifier">skip_method</span> <span class="ruby-identifier">container</span>
1072:                    <span class="ruby-keyword kw">return</span>
1073:                  <span class="ruby-keyword kw">end</span>
1074:                  <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1075:                <span class="ruby-keyword kw">end</span>
1076: 
1077:         <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">get_tkread</span>, <span class="ruby-identifier">name</span>
1078:         <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = (<span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
1079:       <span class="ruby-keyword kw">end</span>
1080:     <span class="ruby-keyword kw">end</span>
1081: 
1082:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1083:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>
1084:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">line</span>   = <span class="ruby-identifier">line_no</span>
1085: 
1086:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">start_collecting_tokens</span>
1087:     <span class="ruby-identifier">indent</span> = <span class="ruby-constant">TkSPACE</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>
1088:     <span class="ruby-identifier">indent</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">column</span>
1089: 
1090:     <span class="ruby-identifier">token</span> = <span class="ruby-constant">TkCOMMENT</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">line_no</span>, <span class="ruby-value">1</span>
1091:     <span class="ruby-identifier">token</span>.<span class="ruby-identifier">set_text</span> <span class="ruby-node">&quot;# File #{@top_level.absolute_name}, line #{line_no}&quot;</span>
1092:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> [<span class="ruby-identifier">token</span>, <span class="ruby-constant">NEWLINE_TOKEN</span>, <span class="ruby-identifier">indent</span>]
1093:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">add_tokens</span> <span class="ruby-ivar">@token_stream</span>
1094: 
1095:     <span class="ruby-identifier">token_listener</span> <span class="ruby-identifier">meth</span> <span class="ruby-keyword kw">do</span>
1096:       <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">end</span>
1097:       <span class="ruby-identifier">parse_method_parameters</span> <span class="ruby-identifier">meth</span>
1098: 
1099:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">then</span>
1100:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
1101:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">added_container</span> <span class="ruby-keyword kw">then</span>
1102:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> = <span class="ruby-keyword kw">false</span>
1103:       <span class="ruby-keyword kw">end</span>
1104: 
1105:       <span class="ruby-comment cmt"># Having now read the method parameters and documentation modifiers, we</span>
1106:       <span class="ruby-comment cmt"># now know whether we have to rename #initialize to ::new</span>
1107: 
1108:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;initialize&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> <span class="ruby-keyword kw">then</span>
1109:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">dont_rename_initialize</span> <span class="ruby-keyword kw">then</span>
1110:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">:protected</span>
1111:         <span class="ruby-keyword kw">else</span>
1112:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1113:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;new&quot;</span>
1114:           <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">:public</span>
1115:         <span class="ruby-keyword kw">end</span>
1116:       <span class="ruby-keyword kw">end</span>
1117: 
1118:       <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">meth</span>
1119:     <span class="ruby-keyword kw">end</span>
1120: 
1121:     <span class="ruby-identifier">extract_call_seq</span> <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">meth</span>
1122: 
1123:     <span class="ruby-identifier">meth</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span>
1124: 
1125:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">meth</span>
1126:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004605">
                    
                    <a name="M004605"></a><b>parse_method_or_yield_parameters</b>(method = nil, modifiers = RDoc::METHOD_MODIFIERS)
                    
                </div>
                
                <div class="description">
                  <p>
Extracts <tt>yield</tt> parameters from <tt>method</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004605_source')" id="l_M004605_source">show</a>
                        
                    </p>
                    <div id="M004605_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1131</span>
1131:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method_or_yield_parameters</span>(<span class="ruby-identifier">method</span> = <span class="ruby-keyword kw">nil</span>,
1132:                                        <span class="ruby-identifier">modifiers</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">METHOD_MODIFIERS</span>)
1133:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1134:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1135: 
1136:     <span class="ruby-comment cmt"># Little hack going on here. In the statement</span>
1137:     <span class="ruby-comment cmt">#  f = 2*(1+yield)</span>
1138:     <span class="ruby-comment cmt"># We see the RPAREN as the next token, so we need</span>
1139:     <span class="ruby-comment cmt"># to exit early. This still won't catch all cases</span>
1140:     <span class="ruby-comment cmt"># (such as &quot;a = yield + 1&quot;</span>
1141:     <span class="ruby-identifier">end_token</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1142:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span>
1143:                   <span class="ruby-constant">TkRPAREN</span>
1144:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
1145:                   <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
1146:                 <span class="ruby-keyword kw">else</span>
1147:                   <span class="ruby-constant">TkNL</span>
1148:                 <span class="ruby-keyword kw">end</span>
1149:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1150: 
1151:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1152:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1153:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
1154:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
1155:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLBRACE</span>, <span class="ruby-constant">TkfLBRACE</span> <span class="ruby-keyword kw">then</span>
1156:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1157:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRBRACE</span> <span class="ruby-keyword kw">then</span>
1158:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1159:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1160:           <span class="ruby-comment cmt"># we might have a.each { |i| yield i }</span>
1161:           <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
1162:           <span class="ruby-keyword kw">break</span>
1163:         <span class="ruby-keyword kw">end</span>
1164:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-keyword kw">then</span>
1165:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1166:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span> <span class="ruby-keyword kw">then</span>
1167:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
1168:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1169:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1170:         <span class="ruby-keyword kw">else</span>
1171:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
1172:         <span class="ruby-keyword kw">end</span>
1173:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span> <span class="ruby-keyword kw">then</span>
1174:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1175:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-keyword kw">then</span>
1176:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1177:         <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">modifiers</span>
1178:         <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">pop</span>
1179:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-keyword kw">then</span>
1180:         <span class="ruby-ivar">@read</span>.<span class="ruby-identifier">pop</span>
1181:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">then</span>
1182:         <span class="ruby-keyword kw">break</span>
1183:       <span class="ruby-keyword kw">end</span>
1184:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1185:     <span class="ruby-keyword kw">end</span>
1186: 
1187:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">get_tkread</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\s+/</span>, <span class="ruby-value str">' '</span>).<span class="ruby-identifier">strip</span>
1188:     <span class="ruby-identifier">res</span> = <span class="ruby-value str">''</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">==</span> <span class="ruby-value str">';'</span>
1189:     <span class="ruby-identifier">res</span>
1190:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004608">
                    
                    <a name="M004608"></a><b>parse_method_parameters</b>(method)
                    
                </div>
                
                <div class="description">
                  <p>
Capture the method&#8217;s parameters. Along the way, look for a comment
containing:
</p>
<pre>
   # yields: ....
</pre>
<p>
and add this as the block_params for the method
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004608_source')" id="l_M004608_source">show</a>
                        
                    </p>
                    <div id="M004608_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1200</span>
1200:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_method_parameters</span>(<span class="ruby-identifier">method</span>)
1201:     <span class="ruby-identifier">res</span> = <span class="ruby-identifier">parse_method_or_yield_parameters</span> <span class="ruby-identifier">method</span>
1202: 
1203:     <span class="ruby-identifier">res</span> = <span class="ruby-node">&quot;(#{res})&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">res</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A\(/</span>
1204:     <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span> = <span class="ruby-identifier">res</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">params</span>
1205: 
1206:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
1207:       <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1208:       <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">method</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">METHOD_MODIFIERS</span>
1209:     <span class="ruby-keyword kw">end</span>
1210:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004610">
                    
                    <a name="M004610"></a><b>parse_module</b>(container, single, tk, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses an <a href="../NormalModule.html">RDoc::NormalModule</a> in
<tt>container</tt> with <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004610_source')" id="l_M004610_source">show</a>
                        
                    </p>
                    <div id="M004610_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1215</span>
1215:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_module</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>)
1216:     <span class="ruby-identifier">container</span>, <span class="ruby-identifier">name_t</span>, = <span class="ruby-identifier">get_class_or_module</span> <span class="ruby-identifier">container</span>
1217: 
1218:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_t</span>.<span class="ruby-identifier">name</span>
1219: 
1220:     <span class="ruby-identifier">mod</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">NormalModule</span>, <span class="ruby-identifier">name</span>
1221:     <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1222: 
1223:     <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">mod</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
1224:     <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">add_comment</span> <span class="ruby-identifier">comment</span>, <span class="ruby-ivar">@top_level</span>
1225:     <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">mod</span>)
1226: 
1227:     <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_to_classes_or_modules</span> <span class="ruby-identifier">mod</span>
1228:     <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_module</span> <span class="ruby-identifier">mod</span>
1229:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004613">
                    
                    <a name="M004613"></a><b>parse_require</b>(context, comment)
                    
                </div>
                
                <div class="description">
                  <p>
Parses an <a href="../Require.html">RDoc::Require</a> in <tt>context</tt>
containing <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004613_source')" id="l_M004613_source">show</a>
                        
                    </p>
                    <div id="M004613_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1234</span>
1234:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_require</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">comment</span>)
1235:     <span class="ruby-identifier">skip_tkspace_comment</span>
1236:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1237: 
1238:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkLPAREN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1239:       <span class="ruby-identifier">skip_tkspace_comment</span>
1240:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1241:     <span class="ruby-keyword kw">end</span>
1242: 
1243:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkSTRING</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1244: 
1245:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">then</span>
1246:       <span class="ruby-ivar">@top_level</span>.<span class="ruby-identifier">add_require</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Require</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">comment</span>)
1247:     <span class="ruby-keyword kw">else</span>
1248:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1249:     <span class="ruby-keyword kw">end</span>
1250:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004614">
                    
                    <a name="M004614"></a><b>parse_statements</b>(container, single = NORMAL, current_method = nil, comment = '')
                    
                </div>
                
                <div class="description">
                  <p>
The core of the ruby parser.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004614_source')" id="l_M004614_source">show</a>
                        
                    </p>
                    <div id="M004614_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1255</span>
1255:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_statements</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span> = <span class="ruby-constant">NORMAL</span>, <span class="ruby-identifier">current_method</span> = <span class="ruby-keyword kw">nil</span>,
1256:                        <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>)
1257:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@encoding</span>
1258: 
1259:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">1</span>
1260:     <span class="ruby-identifier">save_visibility</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">visibility</span>
1261: 
1262:     <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span>
1263: 
1264:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">do</span>
1265:       <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">false</span>
1266:       <span class="ruby-identifier">try_parse_comment</span> = <span class="ruby-keyword kw">false</span>
1267: 
1268:       <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1269: 
1270:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1271:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span> <span class="ruby-keyword kw">then</span>
1272:         <span class="ruby-identifier">skip_tkspace</span>
1273:         <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1274: 
1275:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1276:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">non_comment_seen</span> <span class="ruby-keyword kw">then</span>
1277:             <span class="ruby-comment cmt"># Look for RDoc in a comment about to be thrown away</span>
1278:             <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-identifier">parse_comment</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span>
1279:               <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1280: 
1281:             <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>
1282:             <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@encoding</span>
1283:           <span class="ruby-keyword kw">end</span>
1284: 
1285:           <span class="ruby-keyword kw">while</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">do</span>
1286:             <span class="ruby-identifier">comment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
1287: 
1288:             <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1289: 
1290:             <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkNL</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1291:               <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span> <span class="ruby-comment cmt"># leading spaces</span>
1292:               <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1293:             <span class="ruby-keyword kw">end</span>
1294:           <span class="ruby-keyword kw">end</span>
1295: 
1296:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
1297:             <span class="ruby-identifier">look_for_directives_in</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
1298: 
1299:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">done_documenting</span> <span class="ruby-keyword kw">then</span>
1300:               <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">save_visibility</span>
1301:             <span class="ruby-keyword kw">end</span>
1302:           <span class="ruby-keyword kw">end</span>
1303: 
1304:           <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1305:         <span class="ruby-keyword kw">else</span>
1306:           <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-keyword kw">true</span>
1307:         <span class="ruby-keyword kw">end</span>
1308: 
1309:         <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span> <span class="ruby-comment cmt"># TODO peek instead of get then unget</span>
1310:         <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1311: 
1312:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCLASS</span> <span class="ruby-keyword kw">then</span>
1313:         <span class="ruby-identifier">parse_class</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1314: 
1315:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkMODULE</span> <span class="ruby-keyword kw">then</span>
1316:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_children</span> <span class="ruby-keyword kw">then</span>
1317:           <span class="ruby-identifier">parse_module</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1318:         <span class="ruby-keyword kw">else</span>
1319:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1320:         <span class="ruby-keyword kw">end</span>
1321: 
1322:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDEF</span> <span class="ruby-keyword kw">then</span>
1323:         <span class="ruby-identifier">parse_method</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1324: 
1325:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCONSTANT</span> <span class="ruby-keyword kw">then</span>
1326:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parse_constant</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">then</span>
1327:           <span class="ruby-identifier">try_parse_comment</span> = <span class="ruby-keyword kw">true</span>
1328:         <span class="ruby-keyword kw">end</span>
1329: 
1330:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkALIAS</span> <span class="ruby-keyword kw">then</span>
1331:         <span class="ruby-identifier">parse_alias</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_method</span>
1332: 
1333:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkYIELD</span> <span class="ruby-keyword kw">then</span>
1334:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_method</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
1335:           <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;Warning: yield outside of method&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span>
1336:         <span class="ruby-keyword kw">else</span>
1337:           <span class="ruby-identifier">parse_yield</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">current_method</span>
1338:         <span class="ruby-keyword kw">end</span>
1339: 
1340:       <span class="ruby-comment cmt"># Until and While can have a 'do', which shouldn't increase the nesting.</span>
1341:       <span class="ruby-comment cmt"># We can't solve the general case, but we can handle most occurrences by</span>
1342:       <span class="ruby-comment cmt"># ignoring a do at the end of a line.</span>
1343: 
1344:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkUNTIL</span>, <span class="ruby-constant">TkWHILE</span> <span class="ruby-keyword kw">then</span>
1345:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1346:         <span class="ruby-identifier">skip_optional_do_after_expression</span>
1347: 
1348:       <span class="ruby-comment cmt"># 'for' is trickier</span>
1349:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkFOR</span> <span class="ruby-keyword kw">then</span>
1350:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1351:         <span class="ruby-identifier">skip_for_variable</span>
1352:         <span class="ruby-identifier">skip_optional_do_after_expression</span>
1353: 
1354:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCASE</span>, <span class="ruby-constant">TkDO</span>, <span class="ruby-constant">TkIF</span>, <span class="ruby-constant">TkUNLESS</span>, <span class="ruby-constant">TkBEGIN</span> <span class="ruby-keyword kw">then</span>
1355:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1356: 
1357:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkIDENTIFIER</span> <span class="ruby-keyword kw">then</span>
1358:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">current_method</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">then</span>
1359:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1360:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private'</span>, <span class="ruby-value str">'protected'</span>, <span class="ruby-value str">'public'</span>, <span class="ruby-value str">'private_class_method'</span>,
1361:                <span class="ruby-value str">'public_class_method'</span>, <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
1362:             <span class="ruby-identifier">parse_visibility</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>
1363:             <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">true</span>
1364:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'attr'</span> <span class="ruby-keyword kw">then</span>
1365:             <span class="ruby-identifier">parse_attr</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1366:           <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^attr_(reader|writer|accessor)$/</span> <span class="ruby-keyword kw">then</span>
1367:             <span class="ruby-identifier">parse_attr_accessor</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1368:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'alias_method'</span> <span class="ruby-keyword kw">then</span>
1369:             <span class="ruby-identifier">parse_alias</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1370:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'require'</span>, <span class="ruby-value str">'include'</span> <span class="ruby-keyword kw">then</span>
1371:             <span class="ruby-comment cmt"># ignore</span>
1372:           <span class="ruby-keyword kw">else</span>
1373:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">comment</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A#\#$/</span> <span class="ruby-keyword kw">then</span>
1374:               <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">comment</span>
1375:               <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^# +:?attr(_reader|_writer|_accessor)?:/</span> <span class="ruby-keyword kw">then</span>
1376:                 <span class="ruby-identifier">parse_meta_attr</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1377:               <span class="ruby-keyword kw">else</span>
1378:                 <span class="ruby-identifier">parse_meta_method</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span>
1379:               <span class="ruby-keyword kw">end</span>
1380:             <span class="ruby-keyword kw">end</span>
1381:           <span class="ruby-keyword kw">end</span>
1382:         <span class="ruby-keyword kw">end</span>
1383: 
1384:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1385:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;require&quot;</span> <span class="ruby-keyword kw">then</span>
1386:           <span class="ruby-identifier">parse_require</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
1387:         <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;include&quot;</span> <span class="ruby-keyword kw">then</span>
1388:           <span class="ruby-identifier">parse_include</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
1389:         <span class="ruby-keyword kw">end</span>
1390: 
1391:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkEND</span> <span class="ruby-keyword kw">then</span>
1392:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1393:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span>
1394:           <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">container</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">CLASS_MODIFIERS</span>
1395:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">save_visibility</span>
1396: 
1397:           <span class="ruby-identifier">parse_comment</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1398: 
1399:           <span class="ruby-keyword kw">return</span>
1400:         <span class="ruby-keyword kw">end</span>
1401:       <span class="ruby-keyword kw">else</span>
1402:         <span class="ruby-identifier">try_parse_comment</span> = <span class="ruby-identifier">nest</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
1403:       <span class="ruby-keyword kw">end</span>
1404: 
1405:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">try_parse_comment</span> <span class="ruby-keyword kw">then</span>
1406:         <span class="ruby-identifier">non_comment_seen</span> = <span class="ruby-identifier">parse_comment</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">unless</span>
1407:           <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1408: 
1409:         <span class="ruby-identifier">keep_comment</span> = <span class="ruby-keyword kw">false</span>
1410:       <span class="ruby-keyword kw">end</span>
1411: 
1412:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">keep_comment</span> <span class="ruby-keyword kw">then</span>
1413:         <span class="ruby-identifier">comment</span> = <span class="ruby-value str">''</span>
1414:         <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@encoding</span>
1415:       <span class="ruby-keyword kw">end</span>
1416: 
1417:       <span class="ruby-keyword kw">begin</span>
1418:         <span class="ruby-identifier">get_tkread</span>
1419:         <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1420:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">peek_tk</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkNL</span>
1421:     <span class="ruby-keyword kw">end</span>
1422:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004619">
                    
                    <a name="M004619"></a><b>parse_symbol_arg</b>(no = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Parse up to <tt>no</tt> symbol arguments
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004619_source')" id="l_M004619_source">show</a>
                        
                    </p>
                    <div id="M004619_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1427</span>
1427:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_symbol_arg</span>(<span class="ruby-identifier">no</span> = <span class="ruby-keyword kw">nil</span>)
1428:     <span class="ruby-identifier">args</span> = []
1429: 
1430:     <span class="ruby-identifier">skip_tkspace_comment</span>
1431: 
1432:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1433:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>
1434:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1435:         <span class="ruby-identifier">skip_tkspace_comment</span>
1436:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
1437:           <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk1</span>
1438:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
1439:         <span class="ruby-keyword kw">end</span>
1440: 
1441:         <span class="ruby-identifier">skip_tkspace_comment</span>
1442:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk2</span> = <span class="ruby-identifier">get_tk</span>
1443:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkRPAREN</span>
1444:           <span class="ruby-keyword kw">break</span>
1445:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkCOMMA</span>
1446:         <span class="ruby-keyword kw">else</span>
1447:           <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;unexpected token: '#{tk2.inspect}'&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>
1448:           <span class="ruby-keyword kw">break</span>
1449:         <span class="ruby-keyword kw">end</span>
1450:       <span class="ruby-keyword kw">end</span>
1451:     <span class="ruby-keyword kw">else</span>
1452:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1453:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
1454:         <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
1455:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">args</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
1456:       <span class="ruby-keyword kw">end</span>
1457: 
1458:       <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1459:         <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1460: 
1461:         <span class="ruby-identifier">tk1</span> = <span class="ruby-identifier">get_tk</span>
1462:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMA</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk1</span> <span class="ruby-keyword kw">then</span>
1463:           <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk1</span>
1464:           <span class="ruby-keyword kw">break</span>
1465:         <span class="ruby-keyword kw">end</span>
1466: 
1467:         <span class="ruby-identifier">skip_tkspace_comment</span>
1468:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">parse_symbol_in_arg</span>
1469:           <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">tk</span>
1470:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">no</span>
1471:         <span class="ruby-keyword kw">end</span>
1472:       <span class="ruby-keyword kw">end</span>
1473:     <span class="ruby-keyword kw">end</span>
1474: 
1475:     <span class="ruby-identifier">args</span>
1476:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004622">
                    
                    <a name="M004622"></a><b>parse_symbol_in_arg</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns symbol text from the next token
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004622_source')" id="l_M004622_source">show</a>
                        
                    </p>
                    <div id="M004622_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1481</span>
1481:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_symbol_in_arg</span>
1482:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1483:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSYMBOL</span>
1484:       <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/^:/</span>, <span class="ruby-value str">''</span>)
1485:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSTRING</span>
1486:       <span class="ruby-identifier">eval</span> <span class="ruby-ivar">@read</span>[<span class="ruby-value">-1</span>]
1487:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDSTRING</span>, <span class="ruby-constant">TkIDENTIFIER</span> <span class="ruby-keyword kw">then</span>
1488:       <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># ignore</span>
1489:     <span class="ruby-keyword kw">else</span>
1490:       <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;Expected symbol or string, got #{tk.inspect}&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>
1491:       <span class="ruby-keyword kw">nil</span>
1492:     <span class="ruby-keyword kw">end</span>
1493:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004623">
                    
                    <a name="M004623"></a><b>parse_top_level_statements</b>(container)
                    
                </div>
                
                <div class="description">
                  <p>
Parses statements in the top-level <tt>container</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004623_source')" id="l_M004623_source">show</a>
                        
                    </p>
                    <div id="M004623_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1498</span>
1498:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_top_level_statements</span> <span class="ruby-identifier">container</span>
1499:     <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">collect_first_comment</span>
1500:     <span class="ruby-identifier">look_for_directives_in</span> <span class="ruby-identifier">container</span>, <span class="ruby-identifier">comment</span>
1501: 
1502:     <span class="ruby-comment cmt"># HACK move if to RDoc::Context#comment=</span>
1503:     <span class="ruby-identifier">container</span>.<span class="ruby-identifier">comment</span> = <span class="ruby-identifier">comment</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">container</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">empty?</span>
1504: 
1505:     <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-constant">NORMAL</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">comment</span>
1506:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004624">
                    
                    <a name="M004624"></a><b>parse_visibility</b>(container, single, tk)
                    
                </div>
                
                <div class="description">
                  <p>
Determines the visibility in <tt>container</tt> from <tt>tk</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004624_source')" id="l_M004624_source">show</a>
                        
                    </p>
                    <div id="M004624_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1511</span>
1511:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_visibility</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>)
1512:     <span class="ruby-identifier">singleton</span> = (<span class="ruby-identifier">single</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SINGLE</span>)
1513: 
1514:     <span class="ruby-identifier">vis_type</span> = <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">name</span>
1515: 
1516:     <span class="ruby-identifier">vis</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">vis_type</span>
1517:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private'</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:private</span>
1518:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'protected'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:protected</span>
1519:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'public'</span>    <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">:public</span>
1520:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'private_class_method'</span> <span class="ruby-keyword kw">then</span>
1521:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1522:             <span class="ruby-identifier">:private</span>
1523:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'public_class_method'</span> <span class="ruby-keyword kw">then</span>
1524:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1525:             <span class="ruby-identifier">:public</span>
1526:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
1527:             <span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1528:             <span class="ruby-identifier">:public</span>
1529:           <span class="ruby-keyword kw">else</span>
1530:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;Invalid visibility: #{tk.name}&quot;</span>
1531:           <span class="ruby-keyword kw">end</span>
1532: 
1533:     <span class="ruby-identifier">skip_tkspace_comment</span> <span class="ruby-keyword kw">false</span>
1534: 
1535:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">peek_tk</span>
1536:       <span class="ruby-comment cmt"># Ryan Davis suggested the extension to ignore modifiers, because he</span>
1537:       <span class="ruby-comment cmt"># often writes</span>
1538:       <span class="ruby-comment cmt">#</span>
1539:       <span class="ruby-comment cmt">#   protected unless $TESTING</span>
1540:       <span class="ruby-comment cmt">#</span>
1541:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkNL</span>, <span class="ruby-constant">TkUNLESS_MOD</span>, <span class="ruby-constant">TkIF_MOD</span>, <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
1542:       <span class="ruby-identifier">container</span>.<span class="ruby-identifier">ongoing_visibility</span> = <span class="ruby-identifier">vis</span>
1543:     <span class="ruby-keyword kw">else</span>
1544:       <span class="ruby-identifier">new_methods</span> = []
1545: 
1546:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">vis_type</span>
1547:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'module_function'</span> <span class="ruby-keyword kw">then</span>
1548:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
1549:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span> <span class="ruby-identifier">args</span>, <span class="ruby-identifier">:private</span>, <span class="ruby-keyword kw">false</span>
1550: 
1551:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">methods_matching</span> <span class="ruby-identifier">args</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
1552:           <span class="ruby-identifier">s_m</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">dup</span>
1553:           <span class="ruby-identifier">s_m</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1554:           <span class="ruby-identifier">s_m</span>.<span class="ruby-identifier">singleton</span> = <span class="ruby-keyword kw">true</span>
1555:           <span class="ruby-identifier">new_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">s_m</span>
1556:         <span class="ruby-keyword kw">end</span>
1557:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'public_class_method'</span>, <span class="ruby-value str">'private_class_method'</span> <span class="ruby-keyword kw">then</span>
1558:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
1559: 
1560:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">methods_matching</span> <span class="ruby-identifier">args</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
1561:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">parent</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">then</span>
1562:             <span class="ruby-identifier">m</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">dup</span>
1563:             <span class="ruby-identifier">m</span>.<span class="ruby-identifier">record_location</span> <span class="ruby-ivar">@top_level</span>
1564:             <span class="ruby-identifier">new_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">m</span>
1565:           <span class="ruby-keyword kw">end</span>
1566: 
1567:           <span class="ruby-identifier">m</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">vis</span>
1568:         <span class="ruby-keyword kw">end</span>
1569:       <span class="ruby-keyword kw">else</span>
1570:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">parse_symbol_arg</span>
1571:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">set_visibility_for</span> <span class="ruby-identifier">args</span>, <span class="ruby-identifier">vis</span>, <span class="ruby-identifier">singleton</span>
1572:       <span class="ruby-keyword kw">end</span>
1573: 
1574:       <span class="ruby-identifier">new_methods</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
1575:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">method</span>
1576:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span> <span class="ruby-keyword kw">then</span>
1577:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_method</span> <span class="ruby-identifier">method</span>
1578:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Attr</span> <span class="ruby-keyword kw">then</span>
1579:           <span class="ruby-identifier">container</span>.<span class="ruby-identifier">add_attribute</span> <span class="ruby-identifier">method</span>
1580:         <span class="ruby-keyword kw">end</span>
1581:         <span class="ruby-identifier">method</span>.<span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">vis</span>
1582:       <span class="ruby-keyword kw">end</span>
1583:     <span class="ruby-keyword kw">end</span>
1584:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004625">
                    
                    <a name="M004625"></a><b>parse_yield</b>(context, single, tk, method)
                    
                </div>
                
                <div class="description">
                  <p>
Determines the block parameter for <tt>context</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004625_source')" id="l_M004625_source">show</a>
                        
                    </p>
                    <div id="M004625_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1589</span>
1589:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_yield</span>(<span class="ruby-identifier">context</span>, <span class="ruby-identifier">single</span>, <span class="ruby-identifier">tk</span>, <span class="ruby-identifier">method</span>)
1590:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span>
1591: 
1592:     <span class="ruby-identifier">get_tkread</span>
1593:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span> }
1594:     <span class="ruby-identifier">method</span>.<span class="ruby-identifier">block_params</span> = <span class="ruby-identifier">parse_method_or_yield_parameters</span>
1595:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004626">
                    
                    <a name="M004626"></a><b>read_directive</b>(allowed)
                    
                </div>
                
                <div class="description">
                  <p>
Directives are modifier comments that can appear after class, module, or
method names. For example:
</p>
<pre>
  def fred # :yields: a, b
</pre>
<p>
or:
</p>
<pre>
  class MyClass # :nodoc:
</pre>
<p>
We return the directive name and any parameters as a two element array
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004626_source')" id="l_M004626_source">show</a>
                        
                    </p>
                    <div id="M004626_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1609</span>
1609:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_directive</span> <span class="ruby-identifier">allowed</span>
1610:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1611: 
1612:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span> <span class="ruby-keyword kw">then</span>
1613:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tk</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\s*:?(\w+):\s*(.*)/</span>
1614: 
1615:       <span class="ruby-identifier">directive</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">downcase</span>
1616: 
1617:       <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">directive</span>, <span class="ruby-identifier">$2</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">allowed</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">directive</span>
1618:     <span class="ruby-keyword kw">else</span>
1619:       <span class="ruby-identifier">unget_tk</span> <span class="ruby-identifier">tk</span>
1620:     <span class="ruby-keyword kw">end</span>
1621:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004627">
                    
                    <a name="M004627"></a><b>read_documentation_modifiers</b>(context, allow)
                    
                </div>
                
                <div class="description">
                  <p>
Handles the directive for <tt>context</tt> if the directive is listed in
<tt>allow</tt>. This method is called for directives following a
definition.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004627_source')" id="l_M004627_source">show</a>
                        
                    </p>
                    <div id="M004627_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1627</span>
1627:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read_documentation_modifiers</span> <span class="ruby-identifier">context</span>, <span class="ruby-identifier">allow</span>
1628:     <span class="ruby-identifier">directive</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_directive</span> <span class="ruby-identifier">allow</span>
1629: 
1630:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">directive</span>
1631: 
1632:     <span class="ruby-ivar">@preprocess</span>.<span class="ruby-identifier">handle_directive</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">directive</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">context</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span>, <span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
1633:       <span class="ruby-keyword kw">if</span> <span class="ruby-node">%w[notnew not_new not-new]</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword kw">then</span>
1634:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">dont_rename_initialize</span> = <span class="ruby-keyword kw">true</span>
1635: 
1636:         <span class="ruby-keyword kw">true</span>
1637:       <span class="ruby-keyword kw">end</span>
1638:     <span class="ruby-keyword kw">end</span>
1639:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004628">
                    
                    <a name="M004628"></a><b>remove_private_comments</b>(comment)
                    
                </div>
                
                <div class="description">
                  <p>
Removes private comments from <tt>comment</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004628_source')" id="l_M004628_source">show</a>
                        
                    </p>
                    <div id="M004628_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1644</span>
1644:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_private_comments</span>(<span class="ruby-identifier">comment</span>)
1645:     <span class="ruby-identifier">empty</span> = <span class="ruby-value str">''</span>
1646:     <span class="ruby-identifier">empty</span>.<span class="ruby-identifier">force_encoding</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span> <span class="ruby-identifier">:Encoding</span>
1647: 
1648:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/^#--.*?^#\+\+\n?/</span><span class="ruby-identifier">m</span>, <span class="ruby-identifier">empty</span>)
1649:     <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/^#--.*/</span><span class="ruby-identifier">m</span>, <span class="ruby-value str">''</span>)
1650:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004629">
                    
                    <a name="M004629"></a><b>scan</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Scans this ruby file for ruby constructs
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004629_source')" id="l_M004629_source">show</a>
                        
                    </p>
                    <div id="M004629_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1655</span>
1655:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan</span>
1656:     <span class="ruby-identifier">reset</span>
1657: 
1658:     <span class="ruby-identifier">catch</span> <span class="ruby-identifier">:eof</span> <span class="ruby-keyword kw">do</span>
1659:       <span class="ruby-keyword kw">begin</span>
1660:         <span class="ruby-identifier">parse_top_level_statements</span> <span class="ruby-ivar">@top_level</span>
1661:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">StandardError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1662:         <span class="ruby-identifier">bytes</span> = <span class="ruby-value str">''</span>
1663: 
1664:         <span class="ruby-value">20</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">ungetc</span> <span class="ruby-keyword kw">end</span>
1665:         <span class="ruby-identifier">count</span> = <span class="ruby-value">0</span>
1666:         <span class="ruby-value">60</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
1667:           <span class="ruby-identifier">count</span> = <span class="ruby-identifier">i</span>
1668:           <span class="ruby-identifier">byte</span> = <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">getc</span>
1669:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">byte</span>
1670:           <span class="ruby-identifier">bytes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">byte</span>
1671:         <span class="ruby-keyword kw">end</span>
1672:         <span class="ruby-identifier">count</span> <span class="ruby-operator">-=</span> <span class="ruby-value">20</span>
1673:         <span class="ruby-identifier">count</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">ungetc</span> <span class="ruby-keyword kw">end</span>
1674: 
1675:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;\n\#{self.class} failure around line \#{@scanner.line_no} of\n\#{@file_name}\n\n&quot;</span>
1676: 
1677:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">bytes</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">then</span>
1678:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>
1679:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">bytes</span>.<span class="ruby-identifier">inspect</span>
1680:         <span class="ruby-keyword kw">end</span>
1681: 
1682:         <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
1683:       <span class="ruby-keyword kw">end</span>
1684:     <span class="ruby-keyword kw">end</span>
1685: 
1686:     <span class="ruby-ivar">@top_level</span>
1687:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004632">
                    
                    <a name="M004632"></a><b>skip_for_variable</b>()
                    
                </div>
                
                <div class="description">
                  <p>
skip the var [in] part of a &#8216;for&#8217; statement
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004632_source')" id="l_M004632_source">show</a>
                        
                    </p>
                    <div id="M004632_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1745</span>
1745:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_for_variable</span>
1746:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1747:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1748:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1749:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1750:     <span class="ruby-identifier">unget_tk</span>(<span class="ruby-identifier">tk</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkIN</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">tk</span>
1751:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004635">
                    
                    <a name="M004635"></a><b>skip_method</b>(container)
                    
                </div>
                
                <div class="description">
                  <p>
Skips the next method in <tt>container</tt>
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004635_source')" id="l_M004635_source">show</a>
                        
                    </p>
                    <div id="M004635_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1756</span>
1756:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_method</span> <span class="ruby-identifier">container</span>
1757:     <span class="ruby-identifier">meth</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">AnyMethod</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;anon&quot;</span>
1758:     <span class="ruby-identifier">parse_method_parameters</span> <span class="ruby-identifier">meth</span>
1759:     <span class="ruby-identifier">parse_statements</span> <span class="ruby-identifier">container</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">meth</span>
1760:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004630">
                    
                    <a name="M004630"></a><b>skip_optional_do_after_expression</b>()
                    
                </div>
                
                <div class="description">
                  <p>
while, until, and for have an optional do
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004630_source')" id="l_M004630_source">show</a>
                        
                    </p>
                    <div id="M004630_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1698</span>
1698:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_optional_do_after_expression</span>
1699:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1700:     <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1701:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1702:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-keyword kw">then</span>
1703:       <span class="ruby-identifier">end_token</span> = <span class="ruby-constant">TkRPAREN</span>
1704:     <span class="ruby-keyword kw">else</span>
1705:       <span class="ruby-identifier">end_token</span> = <span class="ruby-constant">TkNL</span>
1706:     <span class="ruby-keyword kw">end</span>
1707: 
1708:     <span class="ruby-identifier">b_nest</span> = <span class="ruby-value">0</span>
1709:     <span class="ruby-identifier">nest</span> = <span class="ruby-value">0</span>
1710:     <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-ivar">@continue</span> = <span class="ruby-keyword kw">false</span> }
1711: 
1712:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1713:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">tk</span>
1714:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkSEMICOLON</span> <span class="ruby-keyword kw">then</span>
1715:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b_nest</span>.<span class="ruby-identifier">zero?</span>
1716:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkLPAREN</span>, <span class="ruby-constant">TkfLPAREN</span> <span class="ruby-keyword kw">then</span>
1717:         <span class="ruby-identifier">nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1718:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkBEGIN</span> <span class="ruby-keyword kw">then</span>
1719:         <span class="ruby-identifier">b_nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1720:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkEND</span> <span class="ruby-keyword kw">then</span>
1721:         <span class="ruby-identifier">b_nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1722:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">TkDO</span>
1723:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
1724:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">end_token</span> <span class="ruby-keyword kw">then</span>
1725:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">end_token</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TkRPAREN</span>
1726:           <span class="ruby-identifier">nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
1727:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">lex_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EXPR_END</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nest</span>.<span class="ruby-identifier">zero?</span>
1728:         <span class="ruby-keyword kw">else</span>
1729:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scanner</span>.<span class="ruby-identifier">continue</span>
1730:         <span class="ruby-keyword kw">end</span>
1731:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">then</span>
1732:         <span class="ruby-keyword kw">break</span>
1733:       <span class="ruby-keyword kw">end</span>
1734:       <span class="ruby-identifier">tk</span> = <span class="ruby-identifier">get_tk</span>
1735:     <span class="ruby-keyword kw">end</span>
1736: 
1737:     <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-keyword kw">false</span>
1738: 
1739:     <span class="ruby-identifier">get_tk</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TkDO</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
1740:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004636">
                    
                    <a name="M004636"></a><b>skip_tkspace_comment</b>(skip_nl = true)
                    
                </div>
                
                <div class="description">
                  <p>
Skip spaces until a comment is found
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004636_source')" id="l_M004636_source">show</a>
                        
                    </p>
                    <div id="M004636_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1765</span>
1765:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_tkspace_comment</span>(<span class="ruby-identifier">skip_nl</span> = <span class="ruby-keyword kw">true</span>)
1766:     <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
1767:       <span class="ruby-identifier">skip_tkspace</span> <span class="ruby-identifier">skip_nl</span>
1768:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TkCOMMENT</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">peek_tk</span>
1769:       <span class="ruby-identifier">get_tk</span>
1770:     <span class="ruby-keyword kw">end</span>
1771:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M004637">
                    
                    <a name="M004637"></a><b>warn</b>(msg)
                    
                </div>
                
                <div class="description">
                  <p>
Prints <tt>msg</tt> to +$stderr+ unless we&#8217;re being quiet
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M004637_source')" id="l_M004637_source">show</a>
                        
                    </p>
                    <div id="M004637_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/rdoc/parser/ruby.rb, line 1776</span>
1776:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">warn</span>(<span class="ruby-identifier">msg</span>)
1777:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>
1778:     <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">make_message</span> <span class="ruby-identifier">msg</span>
1779:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">msg</span>
1780:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    