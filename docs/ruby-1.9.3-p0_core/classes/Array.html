<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Array</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Array 
            
                <span class="parent">&lt; 
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/array_c.html">array.c</a></li>
            
            <li><a href="../files/pack_c.html">pack.c</a></li>
            
            <li><a href="../files/lib/abbrev_rb.html">lib/abbrev.rb</a></li>
            
            <li><a href="../files/lib/csv_rb.html">lib/csv.rb</a></li>
            
            <li><a href="../files/lib/pp_rb.html">lib/pp.rb</a></li>
            
            <li><a href="../files/lib/rexml/xpath_parser_rb.html">lib/rexml/xpath_parser.rb</a></li>
            
            <li><a href="../files/lib/shellwords_rb.html">lib/shellwords.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
Arrays are ordered, integer-indexed collections of any object. <a
href="Array.html">Array</a> indexing starts at 0, as in C or Java. A
negative index is assumed to be relative to the end of the array&#8212;that
is, an index of -1 indicates the last element of the array, -2 is the next
to last element in the array, and so on.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000087">&</a>,</li>
                
                <li><a href="#M000085">*</a>,</li>
                
                <li><a href="#M000084">+</a>,</li>
                
                <li><a href="#M000086">-</a>,</li>
                
                <li><a href="#M000018"><<</a>,</li>
                
                <li><a href="#M000071"><=></a>,</li>
                
                <li><a href="#M000008">==</a>,</li>
                
                <li><a href="#M000000">[]</a>,</li>
                
                <li><a href="#M000011">[]</a>,</li>
                
                <li><a href="#M000012">[]=</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M001639">abbrev</a>,</li>
                
                <li><a href="#M000074">assoc</a>,</li>
                
                <li><a href="#M000013">at</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000056">clear</a>,</li>
                
                <li><a href="#M000040">collect</a>,</li>
                
                <li><a href="#M000041">collect!</a>,</li>
                
                <li><a href="#M000117">combination</a>,</li>
                
                <li><a href="#M000104">compact</a>,</li>
                
                <li><a href="#M000108">compact!</a>,</li>
                
                <li><a href="#M000017">concat</a>,</li>
                
                <li><a href="#M000111">count</a>,</li>
                
                <li><a href="#M000115">cycle</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M005518">dclone</a>,</li>
                
                <li><a href="#M000048">delete</a>,</li>
                
                <li><a href="#M000049">delete_at</a>,</li>
                
                <li><a href="#M000050">delete_if</a>,</li>
                
                <li><a href="#M000123">drop</a>,</li>
                
                <li><a href="#M000124">drop_while</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000024">each</a>,</li>
                
                <li><a href="#M000025">each_index</a>,</li>
                
                <li><a href="#M000028">empty?</a>,</li>
                
                <li><a href="#M000009">eql?</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000014">fetch</a>,</li>
                
                <li><a href="#M000069">fill</a>,</li>
                
                <li><a href="#M000029">find_index</a>,</li>
                
                <li><a href="#M000015">first</a>,</li>
                
                <li><a href="#M000109">flatten</a>,</li>
                
                <li><a href="#M000110">flatten!</a>,</li>
                
                <li><a href="#M000007">frozen?</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000010">hash</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000070">include?</a>,</li>
                
                <li><a href="#M000030">index</a>,</li>
                
                <li><a href="#M000003">initialize_copy</a>,</li>
                
                <li><a href="#M000023">insert</a>,</li>
                
                <li><a href="#M000004">inspect</a></li>
                
            </ul>
        </dd>
    
        <dt>J</dt>
        <dd>
            <ul>
                
                <li><a href="#M000032">join</a></li>
                
            </ul>
        </dd>
    
        <dt>K</dt>
        <dd>
            <ul>
                
                <li><a href="#M000046">keep_if</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000016">last</a>,</li>
                
                <li><a href="#M000027">length</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000042">map</a>,</li>
                
                <li><a href="#M000043">map!</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000002">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000901">pack</a>,</li>
                
                <li><a href="#M000116">permutation</a>,</li>
                
                <li><a href="#M000020">pop</a>,</li>
                
                <li><a href="#M003599">pretty_print</a>,</li>
                
                <li><a href="#M003600">pretty_print_cycle</a>,</li>
                
                <li><a href="#M000120">product</a>,</li>
                
                <li><a href="#M000019">push</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000083">rassoc</a>,</li>
                
                <li><a href="#M000051">reject</a>,</li>
                
                <li><a href="#M000052">reject!</a>,</li>
                
                <li><a href="#M000119">repeated_combination</a>,</li>
                
                <li><a href="#M000118">repeated_permutation</a>,</li>
                
                <li><a href="#M000055">replace</a>,</li>
                
                <li><a href="#M000033">reverse</a>,</li>
                
                <li><a href="#M000034">reverse!</a>,</li>
                
                <li><a href="#M000026">reverse_each</a>,</li>
                
                <li><a href="#M000031">rindex</a>,</li>
                
                <li><a href="#M000035">rotate</a>,</li>
                
                <li><a href="#M000036">rotate!</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000114">sample</a>,</li>
                
                <li><a href="#M000044">select</a>,</li>
                
                <li><a href="#M000045">select!</a>,</li>
                
                <li><a href="#M007588">shelljoin</a>,</li>
                
                <li><a href="#M000021">shift</a>,</li>
                
                <li><a href="#M000113">shuffle</a>,</li>
                
                <li><a href="#M000112">shuffle!</a>,</li>
                
                <li><a href="#M000126">size</a>,</li>
                
                <li><a href="#M000072">slice</a>,</li>
                
                <li><a href="#M000073">slice!</a>,</li>
                
                <li><a href="#M000037">sort</a>,</li>
                
                <li><a href="#M000038">sort!</a>,</li>
                
                <li><a href="#M000039">sort_by!</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000121">take</a>,</li>
                
                <li><a href="#M000122">take_while</a>,</li>
                
                <li><a href="#M000005">to_a</a>,</li>
                
                <li><a href="#M000006">to_ary</a>,</li>
                
                <li><a href="#M001981">to_csv</a>,</li>
                
                <li><a href="#M000125">to_s</a>,</li>
                
                <li><a href="#M000054">transpose</a>,</li>
                
                <li><a href="#M000001">try_convert</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000102">uniq</a>,</li>
                
                <li><a href="#M000103">uniq!</a>,</li>
                
                <li><a href="#M000022">unshift</a></li>
                
            </ul>
        </dd>
    
        <dt>V</dt>
        <dd>
            <ul>
                
                <li><a href="#M000047">values_at</a></li>
                
            </ul>
        </dd>
    
        <dt>Z</dt>
        <dd>
            <ul>
                
                <li><a href="#M000053">zip</a></li>
                
            </ul>
        </dd>
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000101">|</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="JSON.html">JSON</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000000">
                    
                    <a name="M000000"></a><b>[]</b>(...)
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new array populated with the given objects.
</p>
<pre>
  Array.[]( 1, 'a', /^A/ )
  Array[ 1, 'a', /^A/ ]
  [ 1, 'a', /^A/ ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000000_source')" id="l_M000000_source">show</a>
                        
                    </p>
                    <div id="M000000_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_s_create(int argc, VALUE *argv, VALUE klass)
{
    VALUE ary = ary_new(klass, argc);
    if (argc &gt; 0 &amp;&amp; argv) {
        MEMCPY(RARRAY_PTR(ary), argv, VALUE, argc);
        ARY_SET_LEN(ary, argc);
    }

    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000002">
                    
                    <a name="M000002"></a><b>Array.new(size=0, obj=nil)
Array.new(array)
Array.new(size) {|index| block }
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new array. In the first form, the new array is empty. In the
second it is created with <em>size</em> copies of <em>obj</em> (that is,
<em>size</em> references to the same <em>obj</em>). The third form creates
a copy of the array passed as a parameter (the array is generated by
calling <a href="Array.html#M000006">to_ary</a> on the parameter). In the
last form, an array of the given size is created. Each element in this
array is calculated by passing the element&#8217;s index to the given block
and storing the return value.
</p>
<pre>
   Array.new
   Array.new(2)
   Array.new(5, &quot;A&quot;)

   # only one copy of the object is created
   a = Array.new(2, Hash.new)
   a[0]['cat'] = 'feline'
   a
   a[1]['cat'] = 'Felix'
   a

   # here multiple copies are created
   a = Array.new(2) { Hash.new }
   a[0]['cat'] = 'feline'
   a

   squares = Array.new(5) {|i| i*i}
   squares

   copy = Array.new(squares)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000002_source')" id="l_M000002_source">show</a>
                        
                    </p>
                    <div id="M000002_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_initialize(int argc, VALUE *argv, VALUE ary)
{
    long len;
    VALUE size, val;

    rb_ary_modify(ary);
    if (argc == 0) {
  if (ARY_OWNS_HEAP_P(ary) &amp;&amp; RARRAY_PTR(ary)) {
      xfree(RARRAY_PTR(ary));
  }
        rb_ary_unshare_safe(ary);
        FL_SET_EMBED(ary);
  ARY_SET_EMBED_LEN(ary, 0);
  if (rb_block_given_p()) {
      rb_warning(&quot;given block not used&quot;);
  }
  return ary;
    }
    rb_scan_args(argc, argv, &quot;02&quot;, &amp;size, &amp;val);
    if (argc == 1 &amp;&amp; !FIXNUM_P(size)) {
  val = rb_check_array_type(size);
  if (!NIL_P(val)) {
      rb_ary_replace(ary, val);
      return ary;
  }
    }

    len = NUM2LONG(size);
    if (len &lt; 0) {
  rb_raise(rb_eArgError, &quot;negative array size&quot;);
    }
    if (len &gt; ARY_MAX_SIZE) {
  rb_raise(rb_eArgError, &quot;array size too big&quot;);
    }
    rb_ary_modify(ary);
    ary_resize_capa(ary, len);
    if (rb_block_given_p()) {
  long i;

  if (argc == 2) {
      rb_warn(&quot;block supersedes default value argument&quot;);
  }
  for (i=0; i&lt;len; i++) {
      rb_ary_store(ary, i, rb_yield(LONG2NUM(i)));
      ARY_SET_LEN(ary, i + 1);
  }
    }
    else {
  memfill(RARRAY_PTR(ary), len, val);
  ARY_SET_LEN(ary, len);
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000001">
                    
                    <a name="M000001"></a><b>Array.try_convert(obj) &rarr; array or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Try to convert <em>obj</em> into an array, using <tt><a
href="Array.html#M000006">to_ary</a></tt> method. Returns converted array
or <tt>nil</tt> if <em>obj</em> cannot be converted for any reason. This
method can be used to check if an argument is an array.
</p>
<pre>
   Array.try_convert([1])   #=&gt; [1]
   Array.try_convert(&quot;1&quot;)   #=&gt; nil

   if tmp = Array.try_convert(arg)
     # the argument is an array
   elsif tmp = String.try_convert(arg)
     # the argument is a string
   end
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000001_source')" id="l_M000001_source">show</a>
                        
                    </p>
                    <div id="M000001_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_s_try_convert(VALUE dummy, VALUE ary)
{
    return rb_check_array_type(ary);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000087">
                    
                    <a name="M000087"></a><b>ary & other_ary      &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
<a href="Set.html">Set</a> Intersection&#8212;Returns a new array
containing elements common to the two arrays, with no duplicates.
</p>
<pre>
   [ 1, 1, 3, 5 ] &amp; [ 1, 2, 3 ]   #=&gt; [ 1, 3 ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show</a>
                        
                    </p>
                    <div id="M000087_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_and(VALUE ary1, VALUE ary2)
{
    VALUE hash, ary3, v;
    st_data_t vv;
    long i;

    ary2 = to_ary(ary2);
    ary3 = rb_ary_new2(RARRAY_LEN(ary1) &lt; RARRAY_LEN(ary2) ?
      RARRAY_LEN(ary1) : RARRAY_LEN(ary2));
    hash = ary_make_hash(ary2);

    if (RHASH_EMPTY_P(hash))
        return ary3;

    for (i=0; i&lt;RARRAY_LEN(ary1); i++) {
  vv = (st_data_t)(v = rb_ary_elt(ary1, i));
  if (st_delete(RHASH_TBL(hash), &amp;vv, 0)) {
      rb_ary_push(ary3, v);
  }
    }
    ary_recycle_hash(hash);

    return ary3;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000085">
                    
                    <a name="M000085"></a><b>ary * int     &rarr; new_ary
ary * str     &rarr; new_string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Repetition&#8212;With a <a href="String.html">String</a> argument,
equivalent to self.join(str). Otherwise, returns a new array built by
concatenating the <em>int</em> copies of <tt>self</tt>.
</p>
<pre>
   [ 1, 2, 3 ] * 3    #=&gt; [ 1, 2, 3, 1, 2, 3, 1, 2, 3 ]
   [ 1, 2, 3 ] * &quot;,&quot;  #=&gt; &quot;1,2,3&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show</a>
                        
                    </p>
                    <div id="M000085_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_times(VALUE ary, VALUE times)
{
    VALUE ary2, tmp, *ptr, *ptr2;
    long t, len;

    tmp = rb_check_string_type(times);
    if (!NIL_P(tmp)) {
  return rb_ary_join(ary, tmp);
    }

    len = NUM2LONG(times);
    if (len == 0) {
  ary2 = ary_new(rb_obj_class(ary), 0);
  goto out;
    }
    if (len &lt; 0) {
  rb_raise(rb_eArgError, &quot;negative argument&quot;);
    }
    if (ARY_MAX_SIZE/len &lt; RARRAY_LEN(ary)) {
  rb_raise(rb_eArgError, &quot;argument too big&quot;);
    }
    len *= RARRAY_LEN(ary);

    ary2 = ary_new(rb_obj_class(ary), len);
    ARY_SET_LEN(ary2, len);

    ptr = RARRAY_PTR(ary);
    ptr2 = RARRAY_PTR(ary2);
    t = RARRAY_LEN(ary);
    if (0 &lt; t) {
        MEMCPY(ptr2, ptr, VALUE, t);
        while (t &lt;= len/2) {
            MEMCPY(ptr2+t, ptr2, VALUE, t);
            t *= 2;
        }
        if (t &lt; len) {
            MEMCPY(ptr2+t, ptr2, VALUE, len-t);
        }
    }
  out:
    OBJ_INFECT(ary2, ary);

    return ary2;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000084">
                    
                    <a name="M000084"></a><b>ary + other_ary   &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Concatenation&#8212;Returns a new array built by concatenating the two
arrays together to produce a third array.
</p>
<pre>
   [ 1, 2, 3 ] + [ 4, 5 ]    #=&gt; [ 1, 2, 3, 4, 5 ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show</a>
                        
                    </p>
                    <div id="M000084_source" class="dyn-source">
                        <pre>VALUE
rb_ary_plus(VALUE x, VALUE y)
{
    VALUE z;
    long len;

    y = to_ary(y);
    len = RARRAY_LEN(x) + RARRAY_LEN(y);
    z = rb_ary_new2(len);
    MEMCPY(RARRAY_PTR(z), RARRAY_PTR(x), VALUE, RARRAY_LEN(x));
    MEMCPY(RARRAY_PTR(z) + RARRAY_LEN(x), RARRAY_PTR(y), VALUE, RARRAY_LEN(y));
    ARY_SET_LEN(z, len);
    return z;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000086">
                    
                    <a name="M000086"></a><b>ary - other_ary    &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
<a href="Array.html">Array</a> Difference&#8212;Returns a new array that is
a copy of the original array, removing any items that also appear in
<em>other_ary</em>. (If you need set-like behavior, see the library class
<a href="Set.html">Set</a>.)
</p>
<pre>
   [ 1, 1, 2, 2, 3, 3, 4, 5 ] - [ 1, 2, 4 ]  #=&gt;  [ 3, 3, 5 ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show</a>
                        
                    </p>
                    <div id="M000086_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_diff(VALUE ary1, VALUE ary2)
{
    VALUE ary3;
    volatile VALUE hash;
    long i;

    hash = ary_make_hash(to_ary(ary2));
    ary3 = rb_ary_new();

    for (i=0; i&lt;RARRAY_LEN(ary1); i++) {
  if (st_lookup(RHASH_TBL(hash), RARRAY_PTR(ary1)[i], 0)) continue;
  rb_ary_push(ary3, rb_ary_elt(ary1, i));
    }
    ary_recycle_hash(hash);
    return ary3;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000018">
                    
                    <a name="M000018"></a><b>ary << obj            &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Append&#8212;Pushes the given object on to the end of this array. This
expression returns the array itself, so several appends may be chained
together.
</p>
<pre>
   [ 1, 2 ] &lt;&lt; &quot;c&quot; &lt;&lt; &quot;d&quot; &lt;&lt; [ 3, 4 ]
           #=&gt;  [ 1, 2, &quot;c&quot;, &quot;d&quot;, [ 3, 4 ] ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000018_source')" id="l_M000018_source">show</a>
                        
                    </p>
                    <div id="M000018_source" class="dyn-source">
                        <pre>VALUE
rb_ary_push(VALUE ary, VALUE item)
{
    rb_ary_modify(ary);
    return rb_ary_push_1(ary, item);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000071">
                    
                    <a name="M000071"></a><b>ary <=> other_ary   &rarr;  -1, 0, +1 or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Comparison&#8212;Returns an integer (-1, 0, or +1) if this array is less
than, equal to, or greater than <em>other_ary</em>. Each object in each
array is compared (using <=>). If any value isn&#8217;t equal, then that
inequality is the return value. If all the values found are equal, then the
return is based on a comparison of the array lengths. Thus, two arrays are
``equal&#8217;&#8217; according to <tt>Array#&lt;=&gt;</tt> if and only if
they have the same length and the value of each element is equal to the
value of the corresponding element in the other array.
</p>
<pre>
   [ &quot;a&quot;, &quot;a&quot;, &quot;c&quot; ]    &lt;=&gt; [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]   #=&gt; -1
   [ 1, 2, 3, 4, 5, 6 ] &lt;=&gt; [ 1, 2 ]            #=&gt; +1
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show</a>
                        
                    </p>
                    <div id="M000071_source" class="dyn-source">
                        <pre>VALUE
rb_ary_cmp(VALUE ary1, VALUE ary2)
{
    long len;
    VALUE v;

    ary2 = rb_check_array_type(ary2);
    if (NIL_P(ary2)) return Qnil;
    if (ary1 == ary2) return INT2FIX(0);
    v = rb_exec_recursive_paired(recursive_cmp, ary1, ary2, ary2);
    if (v != Qundef) return v;
    len = RARRAY_LEN(ary1) - RARRAY_LEN(ary2);
    if (len == 0) return INT2FIX(0);
    if (len &gt; 0) return INT2FIX(1);
    return INT2FIX(-1);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000008">
                    
                    <a name="M000008"></a><b>ary == other_ary   &rarr;   bool
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Equality&#8212;Two arrays are equal if they contain the same number of
elements and if each element is equal to (according to <a
href="Object.html">Object</a>.==) the corresponding element in the other
array.
</p>
<pre>
   [ &quot;a&quot;, &quot;c&quot; ]    == [ &quot;a&quot;, &quot;c&quot;, 7 ]     #=&gt; false
   [ &quot;a&quot;, &quot;c&quot;, 7 ] == [ &quot;a&quot;, &quot;c&quot;, 7 ]     #=&gt; true
   [ &quot;a&quot;, &quot;c&quot;, 7 ] == [ &quot;a&quot;, &quot;d&quot;, &quot;f&quot; ]   #=&gt; false
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000008_source')" id="l_M000008_source">show</a>
                        
                    </p>
                    <div id="M000008_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_equal(VALUE ary1, VALUE ary2)
{
    if (ary1 == ary2) return Qtrue;
    if (TYPE(ary2) != T_ARRAY) {
  if (!rb_respond_to(ary2, rb_intern(&quot;to_ary&quot;))) {
      return Qfalse;
  }
  return rb_equal(ary2, ary1);
    }
    if (RARRAY_LEN(ary1) != RARRAY_LEN(ary2)) return Qfalse;
    return rb_exec_recursive_paired(recursive_equal, ary1, ary2, ary2);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000011">
                    
                    <a name="M000011"></a><b>ary[index]                &rarr; obj     or nil
ary[start, length]        &rarr; new_ary or nil
ary[range]                &rarr; new_ary or nil
ary.slice(index)          &rarr; obj     or nil
ary.slice(start, length)  &rarr; new_ary or nil
ary.slice(range)          &rarr; new_ary or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Element Reference&#8212;Returns the element at <em>index</em>, or returns a
subarray starting at <em>start</em> and continuing for <em>length</em>
elements, or returns a subarray specified by <em>range</em>. Negative
indices count backward from the end of the array (-1 is the last element).
Returns <tt>nil</tt> if the index (or starting index) are out of range.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]
   a[2] +  a[0] + a[1]    #=&gt; &quot;cab&quot;
   a[6]                   #=&gt; nil
   a[1, 2]                #=&gt; [ &quot;b&quot;, &quot;c&quot; ]
   a[1..3]                #=&gt; [ &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a[4..7]                #=&gt; [ &quot;e&quot; ]
   a[6..10]               #=&gt; nil
   a[-3, 3]               #=&gt; [ &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]
   # special cases
   a[5]                   #=&gt; nil
   a[5, 1]                #=&gt; []
   a[5..10]               #=&gt; []
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000011_source')" id="l_M000011_source">show</a>
                        
                    </p>
                    <div id="M000011_source" class="dyn-source">
                        <pre>VALUE
rb_ary_aref(int argc, VALUE *argv, VALUE ary)
{
    VALUE arg;
    long beg, len;

    if (argc == 2) {
  beg = NUM2LONG(argv[0]);
  len = NUM2LONG(argv[1]);
  if (beg &lt; 0) {
      beg += RARRAY_LEN(ary);
  }
  return rb_ary_subseq(ary, beg, len);
    }
    if (argc != 1) {
  rb_scan_args(argc, argv, &quot;11&quot;, 0, 0);
    }
    arg = argv[0];
    /* special case - speeding up */
    if (FIXNUM_P(arg)) {
  return rb_ary_entry(ary, FIX2LONG(arg));
    }
    /* check if idx is Range */
    switch (rb_range_beg_len(arg, &amp;beg, &amp;len, RARRAY_LEN(ary), 0)) {
      case Qfalse:
  break;
      case Qnil:
  return Qnil;
      default:
  return rb_ary_subseq(ary, beg, len);
    }
    return rb_ary_entry(ary, NUM2LONG(arg));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000012">
                    
                    <a name="M000012"></a><b>ary[index]         = obj                      &rarr;  obj
ary[start, length] = obj or other_ary or nil  &rarr;  obj or other_ary or nil
ary[range]         = obj or other_ary or nil  &rarr;  obj or other_ary or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Element Assignment&#8212;Sets the element at <em>index</em>, or replaces a
subarray starting at <em>start</em> and continuing for <em>length</em>
elements, or replaces a subarray specified by <em>range</em>. If indices
are greater than the current capacity of the array, the array grows
automatically. A negative indices will count backward from the end of the
array. Inserts elements if <em>length</em> is zero. An <tt>IndexError</tt>
is raised if a negative index points past the beginning of the array. See
also <tt><a href="Array.html#M000019">Array#push</a></tt>, and <tt><a
href="Array.html#M000022">Array#unshift</a></tt>.
</p>
<pre>
   a = Array.new
   a[4] = &quot;4&quot;;                 #=&gt; [nil, nil, nil, nil, &quot;4&quot;]
   a[0, 3] = [ 'a', 'b', 'c' ] #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, nil, &quot;4&quot;]
   a[1..2] = [ 1, 2 ]          #=&gt; [&quot;a&quot;, 1, 2, nil, &quot;4&quot;]
   a[0, 2] = &quot;?&quot;               #=&gt; [&quot;?&quot;, 2, nil, &quot;4&quot;]
   a[0..2] = &quot;A&quot;               #=&gt; [&quot;A&quot;, &quot;4&quot;]
   a[-1]   = &quot;Z&quot;               #=&gt; [&quot;A&quot;, &quot;Z&quot;]
   a[1..-1] = nil              #=&gt; [&quot;A&quot;, nil]
   a[1..-1] = []               #=&gt; [&quot;A&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000012_source')" id="l_M000012_source">show</a>
                        
                    </p>
                    <div id="M000012_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_aset(int argc, VALUE *argv, VALUE ary)
{
    long offset, beg, len;

    if (argc == 3) {
  rb_ary_modify_check(ary);
  beg = NUM2LONG(argv[0]);
  len = NUM2LONG(argv[1]);
  rb_ary_splice(ary, beg, len, argv[2]);
  return argv[2];
    }
    if (argc != 2) {
  rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for 2)&quot;, argc);
    }
    rb_ary_modify_check(ary);
    if (FIXNUM_P(argv[0])) {
  offset = FIX2LONG(argv[0]);
  goto fixnum;
    }
    if (rb_range_beg_len(argv[0], &amp;beg, &amp;len, RARRAY_LEN(ary), 1)) {
  /* check if idx is Range */
  rb_ary_splice(ary, beg, len, argv[1]);
  return argv[1];
    }

    offset = NUM2LONG(argv[0]);
fixnum:
    rb_ary_store(ary, offset, argv[1]);
    return argv[1];
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001639">
                    
                    <a name="M001639"></a><b>abbrev</b>(pattern = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Calculates the set of unambiguous abbreviations for the strings in
<tt>self</tt>. If passed a pattern or a string, only the strings matching
the pattern or starting with the string are considered.
</p>
<pre>
  %w{ car cone }.abbrev   #=&gt; { &quot;ca&quot; =&gt; &quot;car&quot;, &quot;car&quot; =&gt; &quot;car&quot;,
                                &quot;co&quot; =&gt; &quot;cone&quot;, &quot;con&quot; =&gt; cone&quot;,
                                &quot;cone&quot; =&gt; &quot;cone&quot; }
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001639_source')" id="l_M001639_source">show</a>
                        
                    </p>
                    <div id="M001639_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/abbrev.rb, line 89</span>
89:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abbrev</span>(<span class="ruby-identifier">pattern</span> = <span class="ruby-keyword kw">nil</span>)
90:     <span class="ruby-constant">Abbrev</span><span class="ruby-operator">::</span><span class="ruby-identifier">abbrev</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">pattern</span>)
91:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000074">
                    
                    <a name="M000074"></a><b>ary.assoc(obj)   &rarr; new_ary  or  nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Searches through an array whose elements are also arrays comparing
<em>obj</em> with the first element of each contained array using obj.==.
Returns the first contained array that matches (that is, the first
associated array), or <tt>nil</tt> if no match is found. See also <tt><a
href="Array.html#M000083">Array#rassoc</a></tt>.
</p>
<pre>
   s1 = [ &quot;colors&quot;, &quot;red&quot;, &quot;blue&quot;, &quot;green&quot; ]
   s2 = [ &quot;letters&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   s3 = &quot;foo&quot;
   a  = [ s1, s2, s3 ]
   a.assoc(&quot;letters&quot;)  #=&gt; [ &quot;letters&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.assoc(&quot;foo&quot;)      #=&gt; nil
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show</a>
                        
                    </p>
                    <div id="M000074_source" class="dyn-source">
                        <pre>VALUE
rb_ary_assoc(VALUE ary, VALUE key)
{
    long i;
    VALUE v;

    for (i = 0; i &lt; RARRAY_LEN(ary); ++i) {
  v = rb_check_array_type(RARRAY_PTR(ary)[i]);
  if (!NIL_P(v) &amp;&amp; RARRAY_LEN(v) &gt; 0 &amp;&amp;
      rb_equal(RARRAY_PTR(v)[0], key))
      return v;
    }
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000013">
                    
                    <a name="M000013"></a><b>ary.at(index)   &rarr;   obj  or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the element at <em>index</em>. A negative index counts from the end
of <tt>self</tt>. Returns <tt>nil</tt> if the index is out of range. See
also <tt>Array#[]</tt>.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]
   a.at(0)     #=&gt; &quot;a&quot;
   a.at(-1)    #=&gt; &quot;e&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000013_source')" id="l_M000013_source">show</a>
                        
                    </p>
                    <div id="M000013_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_at(VALUE ary, VALUE pos)
{
    return rb_ary_entry(ary, NUM2LONG(pos));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000056">
                    
                    <a name="M000056"></a><b>ary.clear    &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Removes all elements from <tt>self</tt>.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]
   a.clear    #=&gt; [ ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000056_source')" id="l_M000056_source">show</a>
                        
                    </p>
                    <div id="M000056_source" class="dyn-source">
                        <pre>VALUE
rb_ary_clear(VALUE ary)
{
    rb_ary_modify_check(ary);
    ARY_SET_LEN(ary, 0);
    if (ARY_SHARED_P(ary)) {
  if (!ARY_EMBED_P(ary)) {
      rb_ary_unshare(ary);
      FL_SET_EMBED(ary);
  }
    }
    else if (ARY_DEFAULT_SIZE * 2 &lt; ARY_CAPA(ary)) {
  ary_resize_capa(ary, ARY_DEFAULT_SIZE * 2);
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000040">
                    
                    <a name="M000040"></a><b>ary.collect {|item| block }  &rarr; new_ary
ary.map     {|item| block }  &rarr; new_ary
ary.collect                  &rarr; an_enumerator
ary.map                      &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Invokes <em>block</em> once for each element of <tt>self</tt>. Creates a
new array containing the values returned by the block. See also <tt><a
href="Enumerable.html#M000289">Enumerable#collect</a></tt>.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.collect {|x| x + &quot;!&quot; }   #=&gt; [&quot;a!&quot;, &quot;b!&quot;, &quot;c!&quot;, &quot;d!&quot;]
   a                          #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000040_source')" id="l_M000040_source">show</a>
                        
                    </p>
                    <div id="M000040_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_collect(VALUE ary)
{
    long i;
    VALUE collect;

    RETURN_ENUMERATOR(ary, 0, 0);
    collect = rb_ary_new2(RARRAY_LEN(ary));
    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
  rb_ary_push(collect, rb_yield(RARRAY_PTR(ary)[i]));
    }
    return collect;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000041">
                    
                    <a name="M000041"></a><b>ary.collect! {|item| block }   &rarr; ary
ary.map!     {|item| block }   &rarr; ary
ary.collect                    &rarr; an_enumerator
ary.map                        &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Invokes the block once for each element of <tt>self</tt>, replacing the
element with the value returned by <em>block</em>. See also <tt><a
href="Enumerable.html#M000289">Enumerable#collect</a></tt>.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.collect! {|x| x + &quot;!&quot; }
   a             #=&gt;  [ &quot;a!&quot;, &quot;b!&quot;, &quot;c!&quot;, &quot;d!&quot; ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000041_source')" id="l_M000041_source">show</a>
                        
                    </p>
                    <div id="M000041_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_collect_bang(VALUE ary)
{
    long i;

    RETURN_ENUMERATOR(ary, 0, 0);
    rb_ary_modify(ary);
    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
  rb_ary_store(ary, i, rb_yield(RARRAY_PTR(ary)[i]));
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000117">
                    
                    <a name="M000117"></a><b>ary.combination(n) { |c| block }    &rarr; ary
ary.combination(n)                  &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
When invoked with a block, yields all combinations of length <em>n</em> of
elements from <em>ary</em> and then returns <em>ary</em> itself. The
implementation makes no guarantees about the order in which the
combinations are yielded.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<p>
Examples:
</p>
<pre>
    a = [1, 2, 3, 4]
    a.combination(1).to_a  #=&gt; [[1],[2],[3],[4]]
    a.combination(2).to_a  #=&gt; [[1,2],[1,3],[1,4],[2,3],[2,4],[3,4]]
    a.combination(3).to_a  #=&gt; [[1,2,3],[1,2,4],[1,3,4],[2,3,4]]
    a.combination(4).to_a  #=&gt; [[1,2,3,4]]
    a.combination(0).to_a  #=&gt; [[]] # one combination of length 0
    a.combination(5).to_a  #=&gt; []   # no combinations of length 5
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000117_source')" id="l_M000117_source">show</a>
                        
                    </p>
                    <div id="M000117_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_combination(VALUE ary, VALUE num)
{
    long n, i, len;

    n = NUM2LONG(num);
    RETURN_ENUMERATOR(ary, 1, &amp;num);
    len = RARRAY_LEN(ary);
    if (n &lt; 0 || len &lt; n) {
  /* yield nothing */
    }
    else if (n == 0) {
  rb_yield(rb_ary_new2(0));
    }
    else if (n == 1) {
  for (i = 0; i &lt; len; i++) {
      rb_yield(rb_ary_new3(1, RARRAY_PTR(ary)[i]));
  }
    }
    else {
  volatile VALUE t0 = tmpbuf(n+1, sizeof(long));
  long *stack = (long*)RSTRING_PTR(t0);
  volatile VALUE cc = tmpary(n);
  VALUE *chosen = RARRAY_PTR(cc);
  long lev = 0;

  MEMZERO(stack, long, n);
  stack[0] = -1;
  for (;;) {
      chosen[lev] = RARRAY_PTR(ary)[stack[lev+1]];
      for (lev++; lev &lt; n; lev++) {
    chosen[lev] = RARRAY_PTR(ary)[stack[lev+1] = stack[lev]+1];
      }
      rb_yield(rb_ary_new4(n, chosen));
      if (RBASIC(t0)-&gt;klass) {
    rb_raise(rb_eRuntimeError, &quot;combination reentered&quot;);
      }
      do {
    if (lev == 0) goto done;
    stack[lev--]++;
      } while (stack[lev+1]+n == len+lev+1);
  }
    done:
  tmpbuf_discard(t0);
  tmpary_discard(cc);
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000104">
                    
                    <a name="M000104"></a><b>ary.compact     &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a copy of <tt>self</tt> with all <tt>nil</tt> elements removed.
</p>
<pre>
   [ &quot;a&quot;, nil, &quot;b&quot;, nil, &quot;c&quot;, nil ].compact
                     #=&gt; [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show</a>
                        
                    </p>
                    <div id="M000104_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_compact(VALUE ary)
{
    ary = rb_ary_dup(ary);
    rb_ary_compact_bang(ary);
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000108">
                    
                    <a name="M000108"></a><b>ary.compact!    &rarr; ary  or  nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Removes <tt>nil</tt> elements from the array. Returns <tt>nil</tt> if no
changes were made, otherwise returns <em>ary</em>.
</p>
<pre>
   [ &quot;a&quot;, nil, &quot;b&quot;, nil, &quot;c&quot; ].compact! #=&gt; [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ].compact!           #=&gt; nil
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show</a>
                        
                    </p>
                    <div id="M000108_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_compact_bang(VALUE ary)
{
    VALUE *p, *t, *end;
    long n;

    rb_ary_modify(ary);
    p = t = RARRAY_PTR(ary);
    end = p + RARRAY_LEN(ary);

    while (t &lt; end) {
  if (NIL_P(*t)) t++;
  else *p++ = *t++;
    }
    n = p - RARRAY_PTR(ary);
    if (RARRAY_LEN(ary) == n) {
  return Qnil;
    }
    ARY_SET_LEN(ary, n);
    if (n * 2 &lt; ARY_CAPA(ary) &amp;&amp; ARY_DEFAULT_SIZE * 2 &lt; ARY_CAPA(ary)) {
  ary_resize_capa(ary, n * 2);
    }

    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000017">
                    
                    <a name="M000017"></a><b>ary.concat(other_ary)   &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Appends the elements of <em>other_ary</em> to <tt>self</tt>.
</p>
<pre>
   [ &quot;a&quot;, &quot;b&quot; ].concat( [&quot;c&quot;, &quot;d&quot;] ) #=&gt; [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000017_source')" id="l_M000017_source">show</a>
                        
                    </p>
                    <div id="M000017_source" class="dyn-source">
                        <pre>VALUE
rb_ary_concat(VALUE x, VALUE y)
{
    rb_ary_modify_check(x);
    y = to_ary(y);
    if (RARRAY_LEN(y) &gt; 0) {
  rb_ary_splice(x, RARRAY_LEN(x), 0, y);
    }
    return x;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000111">
                    
                    <a name="M000111"></a><b>ary.count      &rarr; int
ary.count(obj) &rarr; int
ary.count { |item| block }  &rarr; int
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the number of elements. If an argument is given, counts the number
of elements which equals to <em>obj</em>. If a block is given, counts the
number of elements yielding a true value.
</p>
<pre>
   ary = [1, 2, 4, 2]
   ary.count             #=&gt; 4
   ary.count(2)          #=&gt; 2
   ary.count{|x|x%2==0}  #=&gt; 3
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000111_source')" id="l_M000111_source">show</a>
                        
                    </p>
                    <div id="M000111_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_count(int argc, VALUE *argv, VALUE ary)
{
    long n = 0;

    if (argc == 0) {
  VALUE *p, *pend;

  if (!rb_block_given_p())
      return LONG2NUM(RARRAY_LEN(ary));

  for (p = RARRAY_PTR(ary), pend = p + RARRAY_LEN(ary); p &lt; pend; p++) {
      if (RTEST(rb_yield(*p))) n++;
  }
    }
    else {
  VALUE obj, *p, *pend;

  rb_scan_args(argc, argv, &quot;1&quot;, &amp;obj);
  if (rb_block_given_p()) {
      rb_warn(&quot;given block not used&quot;);
  }
  for (p = RARRAY_PTR(ary), pend = p + RARRAY_LEN(ary); p &lt; pend; p++) {
      if (rb_equal(*p, obj)) n++;
  }
    }

    return LONG2NUM(n);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000115">
                    
                    <a name="M000115"></a><b>ary.cycle(n=nil) {|obj| block }  &rarr; nil
ary.cycle(n=nil)                 &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Calls <em>block</em> for each element repeatedly <em>n</em> times or
forever if none or <tt>nil</tt> is given. If a non-positive number is given
or the array is empty, does nothing. Returns <tt>nil</tt> if the loop has
finished without getting interrupted.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
   a.cycle {|x| puts x }  # print, a, b, c, a, b, c,.. forever.
   a.cycle(2) {|x| puts x }  # print, a, b, c, a, b, c.
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show</a>
                        
                    </p>
                    <div id="M000115_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_cycle(int argc, VALUE *argv, VALUE ary)
{
    long n, i;
    VALUE nv = Qnil;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;nv);

    RETURN_ENUMERATOR(ary, argc, argv);
    if (NIL_P(nv)) {
        n = -1;
    }
    else {
        n = NUM2LONG(nv);
        if (n &lt;= 0) return Qnil;
    }

    while (RARRAY_LEN(ary) &gt; 0 &amp;&amp; (n &lt; 0 || 0 &lt; n--)) {
        for (i=0; i&lt;RARRAY_LEN(ary); i++) {
            rb_yield(RARRAY_PTR(ary)[i]);
        }
    }
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005518">
                    
                    <a name="M005518"></a><b>dclone</b>()
                    
                </div>
                
                <div class="description">
                  <p>
provides a unified <tt>clone</tt> operation, for <a
href="REXML/XPathParser.html">REXML::XPathParser</a> to use across multiple
Object+ types
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005518_source')" id="l_M005518_source">show</a>
                        
                    </p>
                    <div id="M005518_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/rexml/xpath_parser.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dclone</span>
33:     <span class="ruby-identifier">klone</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>
34:     <span class="ruby-identifier">klone</span>.<span class="ruby-identifier">clear</span>
35:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">klone</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">dclone</span>}
36:     <span class="ruby-identifier">klone</span>
37:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000048">
                    
                    <a name="M000048"></a><b>ary.delete(obj)            &rarr; obj or nil
ary.delete(obj) { block }  &rarr; obj or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Deletes items from <tt>self</tt> that are equal to <em>obj</em>. If any
items are found, returns <em>obj</em>. If the item is not found, returns
<tt>nil</tt>. If the optional code block is given, returns the result of
<em>block</em> if the item is not found. (To remove <tt>nil</tt> elements
and get an informative return value, use <a
href="Array.html#M000108">compact!</a>)
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.delete(&quot;b&quot;)                   #=&gt; &quot;b&quot;
   a                               #=&gt; [&quot;a&quot;, &quot;c&quot;]
   a.delete(&quot;z&quot;)                   #=&gt; nil
   a.delete(&quot;z&quot;) { &quot;not found&quot; }   #=&gt; &quot;not found&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000048_source')" id="l_M000048_source">show</a>
                        
                    </p>
                    <div id="M000048_source" class="dyn-source">
                        <pre>VALUE
rb_ary_delete(VALUE ary, VALUE item)
{
    VALUE v = item;
    long i1, i2;

    for (i1 = i2 = 0; i1 &lt; RARRAY_LEN(ary); i1++) {
  VALUE e = RARRAY_PTR(ary)[i1];

  if (rb_equal(e, item)) {
      v = e;
      continue;
  }
  if (i1 != i2) {
      rb_ary_store(ary, i2, e);
  }
  i2++;
    }
    if (RARRAY_LEN(ary) == i2) {
  if (rb_block_given_p()) {
      return rb_yield(item);
  }
  return Qnil;
    }

    rb_ary_modify(ary);
    if (RARRAY_LEN(ary) &gt; i2) {
  ARY_SET_LEN(ary, i2);
  if (i2 * 2 &lt; ARY_CAPA(ary) &amp;&amp;
      ARY_CAPA(ary) &gt; ARY_DEFAULT_SIZE) {
      ary_resize_capa(ary, i2*2);
  }
    }

    return v;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000049">
                    
                    <a name="M000049"></a><b>ary.delete_at(index)  &rarr; obj or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Deletes the element at the specified index, returning that element, or
<tt>nil</tt> if the index is out of range. See also <tt><a
href="Array.html#M000073">Array#slice!</a></tt>.
</p>
<pre>
   a = %w( ant bat cat dog )
   a.delete_at(2)    #=&gt; &quot;cat&quot;
   a                 #=&gt; [&quot;ant&quot;, &quot;bat&quot;, &quot;dog&quot;]
   a.delete_at(99)   #=&gt; nil
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000049_source')" id="l_M000049_source">show</a>
                        
                    </p>
                    <div id="M000049_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_delete_at_m(VALUE ary, VALUE pos)
{
    return rb_ary_delete_at(ary, NUM2LONG(pos));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000050">
                    
                    <a name="M000050"></a><b>ary.delete_if {|item| block }  &rarr; ary
ary.delete_if                  &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Deletes every element of <tt>self</tt> for which <em>block</em> evaluates
to true. See also <tt><a href="Array.html#M000052">Array#reject!</a></tt>
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.delete_if {|x| x &gt;= &quot;b&quot; }   #=&gt; [&quot;a&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000050_source')" id="l_M000050_source">show</a>
                        
                    </p>
                    <div id="M000050_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_delete_if(VALUE ary)
{
    RETURN_ENUMERATOR(ary, 0, 0);
    ary_reject_bang(ary);
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000123">
                    
                    <a name="M000123"></a><b>ary.drop(n)               &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Drops first n elements from <tt>ary</tt> and returns the rest of the
elements in an array.
</p>
<pre>
   a = [1, 2, 3, 4, 5, 0]
   a.drop(3)             #=&gt; [4, 5, 0]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show</a>
                        
                    </p>
                    <div id="M000123_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_drop(VALUE ary, VALUE n)
{
    VALUE result;
    long pos = NUM2LONG(n);
    if (pos &lt; 0) {
  rb_raise(rb_eArgError, &quot;attempt to drop negative size&quot;);
    }

    result = rb_ary_subseq(ary, pos, RARRAY_LEN(ary));
    if (result == Qnil) result = rb_ary_new();
    return result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000124">
                    
                    <a name="M000124"></a><b>ary.drop_while {|arr| block }   &rarr; new_ary
ary.drop_while                  &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Drops elements up to, but not including, the first element for which the
block returns <tt>nil</tt> or <tt>false</tt> and returns an array
containing the remaining elements.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [1, 2, 3, 4, 5, 0]
   a.drop_while {|i| i &lt; 3 }   #=&gt; [3, 4, 5, 0]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show</a>
                        
                    </p>
                    <div id="M000124_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_drop_while(VALUE ary)
{
    long i;

    RETURN_ENUMERATOR(ary, 0, 0);
    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
  if (!RTEST(rb_yield(RARRAY_PTR(ary)[i]))) break;
    }
    return rb_ary_drop(ary, LONG2FIX(i));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000024">
                    
                    <a name="M000024"></a><b>ary.each {|item| block }   &rarr; ary
ary.each                   &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Calls <em>block</em> once for each element in <tt>self</tt>, passing that
element as a parameter.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.each {|x| print x, &quot; -- &quot; }
</pre>
<p>
produces:
</p>
<pre>
   a -- b -- c --
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000024_source')" id="l_M000024_source">show</a>
                        
                    </p>
                    <div id="M000024_source" class="dyn-source">
                        <pre>VALUE
rb_ary_each(VALUE array)
{
    long i;
    volatile VALUE ary = array;

    RETURN_ENUMERATOR(ary, 0, 0);
    for (i=0; i&lt;RARRAY_LEN(ary); i++) {
  rb_yield(RARRAY_PTR(ary)[i]);
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000025">
                    
                    <a name="M000025"></a><b>ary.each_index {|index| block }  &rarr; ary
ary.each_index                   &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Same as <tt><a href="Array.html#M000024">Array#each</a></tt>, but passes
the index of the element instead of the element itself.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.each_index {|x| print x, &quot; -- &quot; }
</pre>
<p>
produces:
</p>
<pre>
   0 -- 1 -- 2 --
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000025_source')" id="l_M000025_source">show</a>
                        
                    </p>
                    <div id="M000025_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_each_index(VALUE ary)
{
    long i;
    RETURN_ENUMERATOR(ary, 0, 0);

    for (i=0; i&lt;RARRAY_LEN(ary); i++) {
  rb_yield(LONG2NUM(i));
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000028">
                    
                    <a name="M000028"></a><b>ary.empty?   &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <tt>self</tt> contains no elements.
</p>
<pre>
   [].empty?   #=&gt; true
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000028_source')" id="l_M000028_source">show</a>
                        
                    </p>
                    <div id="M000028_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_empty_p(VALUE ary)
{
    if (RARRAY_LEN(ary) == 0)
  return Qtrue;
    return Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000009">
                    
                    <a name="M000009"></a><b>ary.eql?(other)  &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if <tt>self</tt> and <em>other</em> are the same
object, or are both arrays with the same content.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000009_source')" id="l_M000009_source">show</a>
                        
                    </p>
                    <div id="M000009_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_eql(VALUE ary1, VALUE ary2)
{
    if (ary1 == ary2) return Qtrue;
    if (TYPE(ary2) != T_ARRAY) return Qfalse;
    if (RARRAY_LEN(ary1) != RARRAY_LEN(ary2)) return Qfalse;
    return rb_exec_recursive_paired(recursive_eql, ary1, ary2, ary2);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000014">
                    
                    <a name="M000014"></a><b>ary.fetch(index)                    &rarr; obj
ary.fetch(index, default )          &rarr; obj
ary.fetch(index) {|index| block }   &rarr; obj
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Tries to return the element at position <em>index</em>. If the index lies
outside the array, the first form throws an <tt>IndexError</tt> exception,
the second form returns <em>default</em>, and the third form returns the
value of invoking the block, passing in the index. Negative values of
<em>index</em> count from the end of the array.
</p>
<pre>
   a = [ 11, 22, 33, 44 ]
   a.fetch(1)               #=&gt; 22
   a.fetch(-1)              #=&gt; 44
   a.fetch(4, 'cat')        #=&gt; &quot;cat&quot;
   a.fetch(4) { |i| i*i }   #=&gt; 16
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000014_source')" id="l_M000014_source">show</a>
                        
                    </p>
                    <div id="M000014_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_fetch(int argc, VALUE *argv, VALUE ary)
{
    VALUE pos, ifnone;
    long block_given;
    long idx;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;pos, &amp;ifnone);
    block_given = rb_block_given_p();
    if (block_given &amp;&amp; argc == 2) {
  rb_warn(&quot;block supersedes default value argument&quot;);
    }
    idx = NUM2LONG(pos);

    if (idx &lt; 0) {
  idx +=  RARRAY_LEN(ary);
    }
    if (idx &lt; 0 || RARRAY_LEN(ary) &lt;= idx) {
  if (block_given) return rb_yield(pos);
  if (argc == 1) {
      rb_raise(rb_eIndexError, &quot;index %ld outside of array bounds: %ld...%ld&quot;,
      idx - (idx &lt; 0 ? RARRAY_LEN(ary) : 0), -RARRAY_LEN(ary), RARRAY_LEN(ary));
  }
  return ifnone;
    }
    return RARRAY_PTR(ary)[idx];
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000069">
                    
                    <a name="M000069"></a><b>ary.fill(obj)                                &rarr; ary
ary.fill(obj, start [, length])              &rarr; ary
ary.fill(obj, range )                        &rarr; ary
ary.fill {|index| block }                    &rarr; ary
ary.fill(start [, length] ) {|index| block } &rarr; ary
ary.fill(range) {|index| block }             &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
The first three forms set the selected elements of <tt>self</tt> (which may
be the entire array) to <em>obj</em>. A <em>start</em> of <tt>nil</tt> is
equivalent to zero. A <em>length</em> of <tt>nil</tt> is equivalent to
<em>self.length</em>. The last three forms fill the array with the value of
the block. The block is passed the absolute index of each element to be
filled. Negative values of <em>start</em> count from the end of the array.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.fill(&quot;x&quot;)              #=&gt; [&quot;x&quot;, &quot;x&quot;, &quot;x&quot;, &quot;x&quot;]
   a.fill(&quot;z&quot;, 2, 2)        #=&gt; [&quot;x&quot;, &quot;x&quot;, &quot;z&quot;, &quot;z&quot;]
   a.fill(&quot;y&quot;, 0..1)        #=&gt; [&quot;y&quot;, &quot;y&quot;, &quot;z&quot;, &quot;z&quot;]
   a.fill {|i| i*i}         #=&gt; [0, 1, 4, 9]
   a.fill(-2) {|i| i*i*i}   #=&gt; [0, 1, 8, 27]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show</a>
                        
                    </p>
                    <div id="M000069_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_fill(int argc, VALUE *argv, VALUE ary)
{
    VALUE item, arg1, arg2;
    long beg = 0, end = 0, len = 0;
    VALUE *p, *pend;
    int block_p = FALSE;

    if (rb_block_given_p()) {
  block_p = TRUE;
  rb_scan_args(argc, argv, &quot;02&quot;, &amp;arg1, &amp;arg2);
  argc += 1;   /* hackish */
    }
    else {
  rb_scan_args(argc, argv, &quot;12&quot;, &amp;item, &amp;arg1, &amp;arg2);
    }
    switch (argc) {
      case 1:
  beg = 0;
  len = RARRAY_LEN(ary);
  break;
      case 2:
  if (rb_range_beg_len(arg1, &amp;beg, &amp;len, RARRAY_LEN(ary), 1)) {
      break;
  }
  /* fall through */
      case 3:
  beg = NIL_P(arg1) ? 0 : NUM2LONG(arg1);
  if (beg &lt; 0) {
      beg = RARRAY_LEN(ary) + beg;
      if (beg &lt; 0) beg = 0;
  }
  len = NIL_P(arg2) ? RARRAY_LEN(ary) - beg : NUM2LONG(arg2);
  break;
    }
    rb_ary_modify(ary);
    if (len &lt; 0) {
        return ary;
    }
    if (beg &gt;= ARY_MAX_SIZE || len &gt; ARY_MAX_SIZE - beg) {
  rb_raise(rb_eArgError, &quot;argument too big&quot;);
    }
    end = beg + len;
    if (RARRAY_LEN(ary) &lt; end) {
  if (end &gt;= ARY_CAPA(ary)) {
      ary_resize_capa(ary, end);
  }
  rb_mem_clear(RARRAY_PTR(ary) + RARRAY_LEN(ary), end - RARRAY_LEN(ary));
  ARY_SET_LEN(ary, end);
    }

    if (block_p) {
  VALUE v;
  long i;

  for (i=beg; i&lt;end; i++) {
      v = rb_yield(LONG2NUM(i));
      if (i&gt;=RARRAY_LEN(ary)) break;
      RARRAY_PTR(ary)[i] = v;
  }
    }
    else {
  p = RARRAY_PTR(ary) + beg;
  pend = p + len;
  while (p &lt; pend) {
      *p++ = item;
  }
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000029">
                    
                    <a name="M000029"></a><b>ary.index(obj)           &rarr;  int or nil
ary.index {|item| block} &rarr;  int or nil
ary.index                &rarr;  an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the index of the first object in <tt>self</tt> such that the object
is <tt>==</tt> to <em>obj</em>. If a block is given instead of an argument,
returns index of first object for which <em>block</em> is true. Returns
<tt>nil</tt> if no match is found. See also <tt><a
href="Array.html#M000031">Array#rindex</a></tt>.
</p>
<p>
If neither block nor argument is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.index(&quot;b&quot;)        #=&gt; 1
   a.index(&quot;z&quot;)        #=&gt; nil
   a.index{|x|x==&quot;b&quot;}  #=&gt; 1
</pre>
<p>
This is an alias of <tt><a href="Array.html#M000029">find_index</a></tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000029_source')" id="l_M000029_source">show</a>
                        
                    </p>
                    <div id="M000029_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_index(int argc, VALUE *argv, VALUE ary)
{
    VALUE val;
    long i;

    if (argc == 0) {
  RETURN_ENUMERATOR(ary, 0, 0);
  for (i=0; i&lt;RARRAY_LEN(ary); i++) {
      if (RTEST(rb_yield(RARRAY_PTR(ary)[i]))) {
    return LONG2NUM(i);
      }
  }
  return Qnil;
    }
    rb_scan_args(argc, argv, &quot;1&quot;, &amp;val);
    if (rb_block_given_p())
  rb_warn(&quot;given block not used&quot;);
    for (i=0; i&lt;RARRAY_LEN(ary); i++) {
  if (rb_equal(RARRAY_PTR(ary)[i], val))
      return LONG2NUM(i);
    }
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000015">
                    
                    <a name="M000015"></a><b>ary.first     &rarr;   obj or nil
ary.first(n)  &rarr;   new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the first element, or the first <tt>n</tt> elements, of the array.
If the array is empty, the first form returns <tt>nil</tt>, and the second
form returns an empty array.
</p>
<pre>
   a = [ &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot; ]
   a.first     #=&gt; &quot;q&quot;
   a.first(2)  #=&gt; [&quot;q&quot;, &quot;r&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000015_source')" id="l_M000015_source">show</a>
                        
                    </p>
                    <div id="M000015_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_first(int argc, VALUE *argv, VALUE ary)
{
    if (argc == 0) {
  if (RARRAY_LEN(ary) == 0) return Qnil;
  return RARRAY_PTR(ary)[0];
    }
    else {
  return ary_take_first_or_last(argc, argv, ary, ARY_TAKE_FIRST);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000109">
                    
                    <a name="M000109"></a><b>ary.flatten &rarr; new_ary
ary.flatten(level) &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new array that is a one-dimensional flattening of this array
(recursively). That is, for every element that is an array, extract its
elements into the new array. If the optional <em>level</em> argument
determines the level of recursion to flatten.
</p>
<pre>
   s = [ 1, 2, 3 ]           #=&gt; [1, 2, 3]
   t = [ 4, 5, 6, [7, 8] ]   #=&gt; [4, 5, 6, [7, 8]]
   a = [ s, t, 9, 10 ]       #=&gt; [[1, 2, 3], [4, 5, 6, [7, 8]], 9, 10]
   a.flatten                 #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
   a = [ 1, 2, [3, [4, 5] ] ]
   a.flatten(1)              #=&gt; [1, 2, 3, [4, 5]]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000109_source')" id="l_M000109_source">show</a>
                        
                    </p>
                    <div id="M000109_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_flatten(int argc, VALUE *argv, VALUE ary)
{
    int mod = 0, level = -1;
    VALUE result, lv;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;lv);
    if (!NIL_P(lv)) level = NUM2INT(lv);
    if (level == 0) return ary_make_shared_copy(ary);

    result = flatten(ary, level, &amp;mod);
    OBJ_INFECT(result, ary);

    return result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000110">
                    
                    <a name="M000110"></a><b>ary.flatten!        &rarr; ary or nil
ary.flatten!(level) &rarr; array or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Flattens <tt>self</tt> in place. Returns <tt>nil</tt> if no modifications
were made (i.e., <em>ary</em> contains no subarrays.) If the optional
<em>level</em> argument determines the level of recursion to flatten.
</p>
<pre>
   a = [ 1, 2, [3, [4, 5] ] ]
   a.flatten!   #=&gt; [1, 2, 3, 4, 5]
   a.flatten!   #=&gt; nil
   a            #=&gt; [1, 2, 3, 4, 5]
   a = [ 1, 2, [3, [4, 5] ] ]
   a.flatten!(1) #=&gt; [1, 2, 3, [4, 5]]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show</a>
                        
                    </p>
                    <div id="M000110_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_flatten_bang(int argc, VALUE *argv, VALUE ary)
{
    int mod = 0, level = -1;
    VALUE result, lv;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;lv);
    rb_ary_modify_check(ary);
    if (!NIL_P(lv)) level = NUM2INT(lv);
    if (level == 0) return Qnil;

    result = flatten(ary, level, &amp;mod);
    if (mod == 0) {
  ary_discard(result);
  return Qnil;
    }
    if (!(mod = ARY_EMBED_P(result))) rb_obj_freeze(result);
    rb_ary_replace(ary, result);
    if (mod) ARY_SET_EMBED_LEN(result, 0);

    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000007">
                    
                    <a name="M000007"></a><b>ary.frozen?  &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Return <tt>true</tt> if this array is frozen (or temporarily frozen while
being sorted).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000007_source')" id="l_M000007_source">show</a>
                        
                    </p>
                    <div id="M000007_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_frozen_p(VALUE ary)
{
    if (OBJ_FROZEN(ary)) return Qtrue;
    return Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000010">
                    
                    <a name="M000010"></a><b>ary.hash   &rarr; fixnum
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Compute a hash-code for this array. Two arrays with the same content will
have the same hash code (and will compare using <tt>eql?</tt>).
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000010_source')" id="l_M000010_source">show</a>
                        
                    </p>
                    <div id="M000010_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_hash(VALUE ary)
{
    return rb_exec_recursive_outer(recursive_hash, ary, 0);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000070">
                    
                    <a name="M000070"></a><b>ary.include?(obj)   &rarr; true or false
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>true</tt> if the given object is present in <tt>self</tt> (that
is, if any object <tt>==</tt> <em>anObject</em>), <tt>false</tt> otherwise.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.include?(&quot;b&quot;)   #=&gt; true
   a.include?(&quot;z&quot;)   #=&gt; false
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show</a>
                        
                    </p>
                    <div id="M000070_source" class="dyn-source">
                        <pre>VALUE
rb_ary_includes(VALUE ary, VALUE item)
{
    long i;

    for (i=0; i&lt;RARRAY_LEN(ary); i++) {
  if (rb_equal(RARRAY_PTR(ary)[i], item)) {
      return Qtrue;
  }
    }
    return Qfalse;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000030">
                    
                    <a name="M000030"></a><b>ary.index(obj)           &rarr;  int or nil
ary.index {|item| block} &rarr;  int or nil
ary.index                &rarr;  an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the index of the first object in <tt>self</tt> such that the object
is <tt>==</tt> to <em>obj</em>. If a block is given instead of an argument,
returns index of first object for which <em>block</em> is true. Returns
<tt>nil</tt> if no match is found. See also <tt><a
href="Array.html#M000031">Array#rindex</a></tt>.
</p>
<p>
If neither block nor argument is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.index(&quot;b&quot;)        #=&gt; 1
   a.index(&quot;z&quot;)        #=&gt; nil
   a.index{|x|x==&quot;b&quot;}  #=&gt; 1
</pre>
<p>
This is an alias of <tt><a href="Array.html#M000029">find_index</a></tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000030_source')" id="l_M000030_source">show</a>
                        
                    </p>
                    <div id="M000030_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_index(int argc, VALUE *argv, VALUE ary)
{
    VALUE val;
    long i;

    if (argc == 0) {
  RETURN_ENUMERATOR(ary, 0, 0);
  for (i=0; i&lt;RARRAY_LEN(ary); i++) {
      if (RTEST(rb_yield(RARRAY_PTR(ary)[i]))) {
    return LONG2NUM(i);
      }
  }
  return Qnil;
    }
    rb_scan_args(argc, argv, &quot;1&quot;, &amp;val);
    if (rb_block_given_p())
  rb_warn(&quot;given block not used&quot;);
    for (i=0; i&lt;RARRAY_LEN(ary); i++) {
  if (rb_equal(RARRAY_PTR(ary)[i], val))
      return LONG2NUM(i);
    }
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000003">
                    
                    <a name="M000003"></a><b>ary.replace(other_ary)  &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Replaces the contents of <tt>self</tt> with the contents of
<em>other_ary</em>, truncating or expanding if necessary.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]
   a.replace([ &quot;x&quot;, &quot;y&quot;, &quot;z&quot; ])   #=&gt; [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;]
   a                              #=&gt; [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000003_source')" id="l_M000003_source">show</a>
                        
                    </p>
                    <div id="M000003_source" class="dyn-source">
                        <pre>VALUE
rb_ary_replace(VALUE copy, VALUE orig)
{
    rb_ary_modify_check(copy);
    orig = to_ary(orig);
    if (copy == orig) return copy;

    if (RARRAY_LEN(orig) &lt;= RARRAY_EMBED_LEN_MAX) {
        VALUE *ptr;
        VALUE shared = 0;

        if (ARY_OWNS_HEAP_P(copy)) {
            xfree(RARRAY_PTR(copy));
        }
        else if (ARY_SHARED_P(copy)) {
            shared = ARY_SHARED(copy);
            FL_UNSET_SHARED(copy);
        }
        FL_SET_EMBED(copy);
        ptr = RARRAY_PTR(orig);
        MEMCPY(RARRAY_PTR(copy), ptr, VALUE, RARRAY_LEN(orig));
        if (shared) {
            rb_ary_decrement_share(shared);
        }
        ARY_SET_LEN(copy, RARRAY_LEN(orig));
    }
    else {
        VALUE shared = ary_make_shared(orig);
        if (ARY_OWNS_HEAP_P(copy)) {
            xfree(RARRAY_PTR(copy));
        }
        else {
            rb_ary_unshare_safe(copy);
        }
        FL_UNSET_EMBED(copy);
        ARY_SET_PTR(copy, RARRAY_PTR(orig));
        ARY_SET_LEN(copy, RARRAY_LEN(orig));
        rb_ary_set_shared(copy, shared);
    }
    return copy;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000023">
                    
                    <a name="M000023"></a><b>ary.insert(index, obj...)  &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Inserts the given values before the element with the given index (which may
be negative).
</p>
<pre>
   a = %w{ a b c d }
   a.insert(2, 99)         #=&gt; [&quot;a&quot;, &quot;b&quot;, 99, &quot;c&quot;, &quot;d&quot;]
   a.insert(-2, 1, 2, 3)   #=&gt; [&quot;a&quot;, &quot;b&quot;, 99, &quot;c&quot;, 1, 2, 3, &quot;d&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000023_source')" id="l_M000023_source">show</a>
                        
                    </p>
                    <div id="M000023_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_insert(int argc, VALUE *argv, VALUE ary)
{
    long pos;

    if (argc &lt; 1) {
  rb_raise(rb_eArgError, &quot;wrong number of arguments (at least 1)&quot;);
    }
    rb_ary_modify_check(ary);
    if (argc == 1) return ary;
    pos = NUM2LONG(argv[0]);
    if (pos == -1) {
  pos = RARRAY_LEN(ary);
    }
    if (pos &lt; 0) {
  pos++;
    }
    rb_ary_splice(ary, pos, 0, rb_ary_new4(argc - 1, argv + 1));
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000004">
                    
                    <a name="M000004"></a><b>ary.to_s &rarr; string
ary.inspect  &rarr; string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Creates a string representation of <tt>self</tt>.
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Array.html#M000125">to_s</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000004_source')" id="l_M000004_source">show</a>
                        
                    </p>
                    <div id="M000004_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_inspect(VALUE ary)
{
    if (RARRAY_LEN(ary) == 0) return rb_usascii_str_new2(&quot;[]&quot;);
    return rb_exec_recursive(inspect_ary, ary, 0);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000032">
                    
                    <a name="M000032"></a><b>ary.join(sep=$,)    &rarr; str
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a string created by converting each element of the array to a
string, separated by <em>sep</em>.
</p>
<pre>
   [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ].join        #=&gt; &quot;abc&quot;
   [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ].join(&quot;-&quot;)   #=&gt; &quot;a-b-c&quot;
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000032_source')" id="l_M000032_source">show</a>
                        
                    </p>
                    <div id="M000032_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_join_m(int argc, VALUE *argv, VALUE ary)
{
    VALUE sep;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;sep);
    if (NIL_P(sep)) sep = rb_output_fs;

    return rb_ary_join(ary, sep);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000046">
                    
                    <a name="M000046"></a><b>ary.keep_if {|item| block } &rarr; ary
ary.keep_if                 &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Deletes every element of <tt>self</tt> for which <em>block</em> evaluates
to false. See also <tt><a href="Array.html#M000045">Array#select!</a></tt>
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = %w{ a b c d e f }
   a.keep_if {|v| v =~ /[aeiou]/}   #=&gt; [&quot;a&quot;, &quot;e&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000046_source')" id="l_M000046_source">show</a>
                        
                    </p>
                    <div id="M000046_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_keep_if(VALUE ary)
{
    RETURN_ENUMERATOR(ary, 0, 0);
    rb_ary_select_bang(ary);
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000016">
                    
                    <a name="M000016"></a><b>ary.last     &rarr;  obj or nil
ary.last(n)  &rarr;  new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the last element(s) of <tt>self</tt>. If the array is empty, the
first form returns <tt>nil</tt>.
</p>
<pre>
   a = [ &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot; ]
   a.last     #=&gt; &quot;z&quot;
   a.last(2)  #=&gt; [&quot;y&quot;, &quot;z&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000016_source')" id="l_M000016_source">show</a>
                        
                    </p>
                    <div id="M000016_source" class="dyn-source">
                        <pre>VALUE
rb_ary_last(int argc, VALUE *argv, VALUE ary)
{
    if (argc == 0) {
  if (RARRAY_LEN(ary) == 0) return Qnil;
  return RARRAY_PTR(ary)[RARRAY_LEN(ary)-1];
    }
    else {
  return ary_take_first_or_last(argc, argv, ary, ARY_TAKE_LAST);
    }
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000027">
                    
                    <a name="M000027"></a><b>ary.length &rarr; int
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the number of elements in <tt>self</tt>. May be zero.
</p>
<pre>
   [ 1, 2, 3, 4, 5 ].length   #=&gt; 5
</pre>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="Array.html#M000126">size</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000027_source')" id="l_M000027_source">show</a>
                        
                    </p>
                    <div id="M000027_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_length(VALUE ary)
{
    long len = RARRAY_LEN(ary);
    return LONG2NUM(len);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000042">
                    
                    <a name="M000042"></a><b>ary.collect {|item| block }  &rarr; new_ary
ary.map     {|item| block }  &rarr; new_ary
ary.collect                  &rarr; an_enumerator
ary.map                      &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Invokes <em>block</em> once for each element of <tt>self</tt>. Creates a
new array containing the values returned by the block. See also <tt><a
href="Enumerable.html#M000289">Enumerable#collect</a></tt>.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.collect {|x| x + &quot;!&quot; }   #=&gt; [&quot;a!&quot;, &quot;b!&quot;, &quot;c!&quot;, &quot;d!&quot;]
   a                          #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000042_source')" id="l_M000042_source">show</a>
                        
                    </p>
                    <div id="M000042_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_collect(VALUE ary)
{
    long i;
    VALUE collect;

    RETURN_ENUMERATOR(ary, 0, 0);
    collect = rb_ary_new2(RARRAY_LEN(ary));
    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
  rb_ary_push(collect, rb_yield(RARRAY_PTR(ary)[i]));
    }
    return collect;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000043">
                    
                    <a name="M000043"></a><b>ary.collect! {|item| block }   &rarr; ary
ary.map!     {|item| block }   &rarr; ary
ary.collect                    &rarr; an_enumerator
ary.map                        &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Invokes the block once for each element of <tt>self</tt>, replacing the
element with the value returned by <em>block</em>. See also <tt><a
href="Enumerable.html#M000289">Enumerable#collect</a></tt>.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.collect! {|x| x + &quot;!&quot; }
   a             #=&gt;  [ &quot;a!&quot;, &quot;b!&quot;, &quot;c!&quot;, &quot;d!&quot; ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000043_source')" id="l_M000043_source">show</a>
                        
                    </p>
                    <div id="M000043_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_collect_bang(VALUE ary)
{
    long i;

    RETURN_ENUMERATOR(ary, 0, 0);
    rb_ary_modify(ary);
    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
  rb_ary_store(ary, i, rb_yield(RARRAY_PTR(ary)[i]));
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000901">
                    
                    <a name="M000901"></a><b>arr.pack ( aTemplateString ) &rarr; aBinaryString
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Packs the contents of <em>arr</em> into a binary sequence according to the
directives in <em>aTemplateString</em> (see the table below) Directives
``A,&#8217;&#8217; ``a,&#8217;&#8217; and ``Z&#8217;&#8217; may be followed
by a count, which gives the width of the resulting field. The remaining
directives also may take a count, indicating the number of array elements
to convert. If the count is an asterisk (``<tt>*</tt>&#8217;&#8217;), all
remaining array elements will be converted. Any of the directives
``<tt>sSiIlL</tt>&#8217;&#8217; may be followed by an underscore
(``<tt>_</tt>&#8217;&#8217;) or exclamation mark
(``<tt>!</tt>&#8217;&#8217;) to use the underlying platform&#8217;s native
size for the specified type; otherwise, they use a platform-independent
size. Spaces are ignored in the template string. See also <tt><a
href="String.html#M000902">String#unpack</a></tt>.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   n = [ 65, 66, 67 ]
   a.pack(&quot;A3A3A3&quot;)   #=&gt; &quot;a  b  c  &quot;
   a.pack(&quot;a3a3a3&quot;)   #=&gt; &quot;a\000\000b\000\000c\000\000&quot;
   n.pack(&quot;ccc&quot;)      #=&gt; &quot;ABC&quot;
</pre>
<p>
Directives for <tt>pack</tt>.
</p>
<pre>
 Integer      | Array   |
 Directive    | Element | Meaning
 ---------------------------------------------------------------------------
    C         | Integer | 8-bit unsigned (unsigned char)
    S         | Integer | 16-bit unsigned, native endian (uint16_t)
    L         | Integer | 32-bit unsigned, native endian (uint32_t)
    Q         | Integer | 64-bit unsigned, native endian (uint64_t)
              |         |
    c         | Integer | 8-bit signed (signed char)
    s         | Integer | 16-bit signed, native endian (int16_t)
    l         | Integer | 32-bit signed, native endian (int32_t)
    q         | Integer | 64-bit signed, native endian (int64_t)
              |         |
    S_, S!    | Integer | unsigned short, native endian
    I, I_, I! | Integer | unsigned int, native endian
    L_, L!    | Integer | unsigned long, native endian
              |         |
    s_, s!    | Integer | signed short, native endian
    i, i_, i! | Integer | signed int, native endian
    l_, l!    | Integer | signed long, native endian
              |         |
    S&gt; L&gt; Q&gt;  | Integer | same as the directives without &quot;&gt;&quot; except
    s&gt; l&gt; q&gt;  |         | big endian
    S!&gt; I!&gt;   |         | (available since Ruby 1.9.3)
    L!&gt;       |         | &quot;S&gt;&quot; is same as &quot;n&quot;
    s!&gt; i!&gt;   |         | &quot;L&gt;&quot; is same as &quot;N&quot;
    l!&gt;       |         |
              |         |
    S&lt; L&lt; Q&lt;  | Integer | same as the directives without &quot;&lt;&quot; except
    s&lt; l&lt; q&lt;  |         | little endian
    S!&lt; I!&lt;   |         | (available since Ruby 1.9.3)
    L!&lt;       |         | &quot;S&lt;&quot; is same as &quot;v&quot;
    s!&lt; i!&lt;   |         | &quot;L&lt;&quot; is same as &quot;V&quot;
    l!&lt;       |         |
              |         |
    n         | Integer | 16-bit unsigned, network (big-endian) byte order
    N         | Integer | 32-bit unsigned, network (big-endian) byte order
    v         | Integer | 16-bit unsigned, VAX (little-endian) byte order
    V         | Integer | 32-bit unsigned, VAX (little-endian) byte order
              |         |
    U         | Integer | UTF-8 character
    w         | Integer | BER-compressed integer

 Float        |         |
 Directive    |         | Meaning
 ---------------------------------------------------------------------------
    D, d      | Float   | double-precision, native format
    F, f      | Float   | single-precision, native format
    E         | Float   | double-precision, little-endian byte order
    e         | Float   | single-precision, little-endian byte order
    G         | Float   | double-precision, network (big-endian) byte order
    g         | Float   | single-precision, network (big-endian) byte order

 String       |         |
 Directive    |         | Meaning
 ---------------------------------------------------------------------------
    A         | String  | arbitrary binary string (space padded, count is width)
    a         | String  | arbitrary binary string (null padded, count is width)
    Z         | String  | same as ``a'', except that null is added with *
    B         | String  | bit string (MSB first)
    b         | String  | bit string (LSB first)
    H         | String  | hex string (high nibble first)
    h         | String  | hex string (low nibble first)
    u         | String  | UU-encoded string
    M         | String  | quoted printable, MIME encoding (see RFC2045)
    m         | String  | base64 encoded string (see RFC 2045, count is width)
              |         | (if count is 0, no line feed are added, see RFC 4648)
    P         | String  | pointer to a structure (fixed-length string)
    p         | String  | pointer to a null-terminated string

 Misc.        |         |
 Directive    |         | Meaning
 ---------------------------------------------------------------------------
    @         | ---     | moves to absolute position
    X         | ---     | back up a byte
    x         | ---     | null byte
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000901_source')" id="l_M000901_source">show</a>
                        
                    </p>
                    <div id="M000901_source" class="dyn-source">
                        <pre>static VALUE
pack_pack(VALUE ary, VALUE fmt)
{
    static const char nul10[] = &quot;\0\0\0\0\0\0\0\0\0\0&quot;;
    static const char spc10[] = &quot;          &quot;;
    const char *p, *pend;
    VALUE res, from, associates = 0;
    char type;
    long items, len, idx, plen;
    const char *ptr;
    int enc_info = 1;   /* 0 - BINARY, 1 - US-ASCII, 2 - UTF-8 */
#ifdef NATINT_PACK
    int natint;   /* native integer */
#endif
    int signed_p, integer_size, bigendian_p;

    StringValue(fmt);
    p = RSTRING_PTR(fmt);
    pend = p + RSTRING_LEN(fmt);
    res = rb_str_buf_new(0);

    items = RARRAY_LEN(ary);
    idx = 0;

#define TOO_FEW (rb_raise(rb_eArgError, toofew), 0)
#define THISFROM (items &gt; 0 ? RARRAY_PTR(ary)[idx] : TOO_FEW)
#define NEXTFROM (items-- &gt; 0 ? RARRAY_PTR(ary)[idx++] : TOO_FEW)

    while (p &lt; pend) {
  int explicit_endian = 0;
  if (RSTRING_PTR(fmt) + RSTRING_LEN(fmt) != pend) {
      rb_raise(rb_eRuntimeError, &quot;format string modified&quot;);
  }
  type = *p++;   /* get data type */
#ifdef NATINT_PACK
  natint = 0;
#endif

  if (ISSPACE(type)) continue;
  if (type == '#') {
      while ((p &lt; pend) &amp;&amp; (*p != '\n')) {
    p++;
      }
      continue;
  }

  {
      static const char natstr[] = &quot;sSiIlL&quot;;
      static const char endstr[] = &quot;sSiIlLqQ&quot;;

          modifiers:
      switch (*p) {
        case '_':
        case '!':
    if (strchr(natstr, type)) {
#ifdef NATINT_PACK
        natint = 1;
#endif
        p++;
    }
    else {
        rb_raise(rb_eArgError, &quot;'%c' allowed only after types %s&quot;, *p, natstr);
    }
    goto modifiers;

        case '&lt;':
        case '&gt;':
    if (!strchr(endstr, type)) {
        rb_raise(rb_eArgError, &quot;'%c' allowed only after types %s&quot;, *p, endstr);
    }
    if (explicit_endian) {
        rb_raise(rb_eRangeError, &quot;Can't use both '&lt;' and '&gt;'&quot;);
    }
    explicit_endian = *p++;
    goto modifiers;
      }
  }

  if (*p == '*') { /* set data length */
      len = strchr(&quot;@Xxu&quot;, type) ? 0
                : strchr(&quot;PMm&quot;, type) ? 1
                : items;
      p++;
  }
  else if (ISDIGIT(*p)) {
      errno = 0;
      len = STRTOUL(p, (char**)&amp;p, 10);
      if (errno) {
    rb_raise(rb_eRangeError, &quot;pack length too big&quot;);
      }
  }
  else {
      len = 1;
  }

  switch (type) {
    case 'U':
      /* if encoding is US-ASCII, upgrade to UTF-8 */
      if (enc_info == 1) enc_info = 2;
      break;
    case 'm': case 'M': case 'u':
      /* keep US-ASCII (do nothing) */
      break;
    default:
      /* fall back to BINARY */
      enc_info = 0;
      break;
  }
  switch (type) {
    case 'A': case 'a': case 'Z':
    case 'B': case 'b':
    case 'H': case 'h':
      from = NEXTFROM;
      if (NIL_P(from)) {
    ptr = &quot;&quot;;
    plen = 0;
      }
      else {
    StringValue(from);
    ptr = RSTRING_PTR(from);
    plen = RSTRING_LEN(from);
    OBJ_INFECT(res, from);
      }

      if (p[-1] == '*')
    len = plen;

      switch (type) {
        case 'a':    /* arbitrary binary string (null padded)  */
        case 'A':         /* arbitrary binary string (ASCII space padded) */
        case 'Z':         /* null terminated string  */
    if (plen &gt;= len) {
        rb_str_buf_cat(res, ptr, len);
        if (p[-1] == '*' &amp;&amp; type == 'Z')
      rb_str_buf_cat(res, nul10, 1);
    }
    else {
        rb_str_buf_cat(res, ptr, plen);
        len -= plen;
        while (len &gt;= 10) {
      rb_str_buf_cat(res, (type == 'A')?spc10:nul10, 10);
      len -= 10;
        }
        rb_str_buf_cat(res, (type == 'A')?spc10:nul10, len);
    }
    break;

        case 'b':    /* bit string (ascending) */
    {
        int byte = 0;
        long i, j = 0;

        if (len &gt; plen) {
      j = (len - plen + 1)/2;
      len = plen;
        }
        for (i=0; i++ &lt; len; ptr++) {
      if (*ptr &amp; 1)
          byte |= 128;
      if (i &amp; 7)
          byte &gt;&gt;= 1;
      else {
          char c = byte &amp; 0xff;
          rb_str_buf_cat(res, &amp;c, 1);
          byte = 0;
      }
        }
        if (len &amp; 7) {
      char c;
      byte &gt;&gt;= 7 - (len &amp; 7);
      c = byte &amp; 0xff;
      rb_str_buf_cat(res, &amp;c, 1);
        }
        len = j;
        goto grow;
    }
    break;

        case 'B':    /* bit string (descending) */
    {
        int byte = 0;
        long i, j = 0;

        if (len &gt; plen) {
      j = (len - plen + 1)/2;
      len = plen;
        }
        for (i=0; i++ &lt; len; ptr++) {
      byte |= *ptr &amp; 1;
      if (i &amp; 7)
          byte &lt;&lt;= 1;
      else {
          char c = byte &amp; 0xff;
          rb_str_buf_cat(res, &amp;c, 1);
          byte = 0;
      }
        }
        if (len &amp; 7) {
      char c;
      byte &lt;&lt;= 7 - (len &amp; 7);
      c = byte &amp; 0xff;
      rb_str_buf_cat(res, &amp;c, 1);
        }
        len = j;
        goto grow;
    }
    break;

        case 'h':    /* hex string (low nibble first) */
    {
        int byte = 0;
        long i, j = 0;

        if (len &gt; plen) {
      j = (len + 1) / 2 - (plen + 1) / 2;
      len = plen;
        }
        for (i=0; i++ &lt; len; ptr++) {
      if (ISALPHA(*ptr))
          byte |= (((*ptr &amp; 15) + 9) &amp; 15) &lt;&lt; 4;
      else
          byte |= (*ptr &amp; 15) &lt;&lt; 4;
      if (i &amp; 1)
          byte &gt;&gt;= 4;
      else {
          char c = byte &amp; 0xff;
          rb_str_buf_cat(res, &amp;c, 1);
          byte = 0;
      }
        }
        if (len &amp; 1) {
      char c = byte &amp; 0xff;
      rb_str_buf_cat(res, &amp;c, 1);
        }
        len = j;
        goto grow;
    }
    break;

        case 'H':    /* hex string (high nibble first) */
    {
        int byte = 0;
        long i, j = 0;

        if (len &gt; plen) {
      j = (len + 1) / 2 - (plen + 1) / 2;
      len = plen;
        }
        for (i=0; i++ &lt; len; ptr++) {
      if (ISALPHA(*ptr))
          byte |= ((*ptr &amp; 15) + 9) &amp; 15;
      else
          byte |= *ptr &amp; 15;
      if (i &amp; 1)
          byte &lt;&lt;= 4;
      else {
          char c = byte &amp; 0xff;
          rb_str_buf_cat(res, &amp;c, 1);
          byte = 0;
      }
        }
        if (len &amp; 1) {
      char c = byte &amp; 0xff;
      rb_str_buf_cat(res, &amp;c, 1);
        }
        len = j;
        goto grow;
    }
    break;
      }
      break;

    case 'c':    /* signed char */
    case 'C':    /* unsigned char */
      while (len-- &gt; 0) {
    char c;

    from = NEXTFROM;
    c = (char)num2i32(from);
    rb_str_buf_cat(res, &amp;c, sizeof(char));
      }
      break;

    case 's':    /* signed short */
            signed_p = 1;
            integer_size = NATINT_LEN(short, 2);
            bigendian_p = BIGENDIAN_P();
            goto pack_integer;

    case 'S':    /* unsigned short */
            signed_p = 0;
            integer_size = NATINT_LEN(short, 2);
            bigendian_p = BIGENDIAN_P();
            goto pack_integer;

    case 'i':    /* signed int */
            signed_p = 1;
            integer_size = (int)sizeof(int);
            bigendian_p = BIGENDIAN_P();
            goto pack_integer;

    case 'I':    /* unsigned int */
            signed_p = 0;
            integer_size = (int)sizeof(int);
            bigendian_p = BIGENDIAN_P();
            goto pack_integer;

    case 'l':    /* signed long */
            signed_p = 1;
            integer_size = NATINT_LEN(long, 4);
            bigendian_p = BIGENDIAN_P();
            goto pack_integer;

    case 'L':    /* unsigned long */
            signed_p = 0;
            integer_size = NATINT_LEN(long, 4);
            bigendian_p = BIGENDIAN_P();
            goto pack_integer;

    case 'q':    /* signed quad (64bit) int */
            signed_p = 1;
      integer_size = 8;
            bigendian_p = BIGENDIAN_P();
            goto pack_integer;

    case 'Q':    /* unsigned quad (64bit) int */
            signed_p = 0;
      integer_size = 8;
            bigendian_p = BIGENDIAN_P();
            goto pack_integer;

    case 'n':    /* unsigned short (network byte-order)  */
            signed_p = 0;
            integer_size = 2;
            bigendian_p = 1;
            goto pack_integer;

    case 'N':    /* unsigned long (network byte-order) */
            signed_p = 0;
            integer_size = 4;
            bigendian_p = 1;
            goto pack_integer;

    case 'v':    /* unsigned short (VAX byte-order) */
            signed_p = 0;
            integer_size = 2;
            bigendian_p = 0;
            goto pack_integer;

    case 'V':    /* unsigned long (VAX byte-order) */
            signed_p = 0;
            integer_size = 4;
            bigendian_p = 0;
            goto pack_integer;

          pack_integer:
      if (explicit_endian) {
    bigendian_p = explicit_endian == '&gt;';
      }

            switch (integer_size) {
#if defined(HAVE_INT16_T) &amp;&amp; !defined(FORCE_BIG_PACK)
              case SIZEOF_INT16_T:
    while (len-- &gt; 0) {
                    union {
                        int16_t i;
                        char a[sizeof(int16_t)];
                    } v;

        from = NEXTFROM;
        v.i = (int16_t)num2i32(from);
        if (bigendian_p != BIGENDIAN_P()) v.i = swap16(v.i);
        rb_str_buf_cat(res, v.a, sizeof(int16_t));
    }
    break;
#endif

#if defined(HAVE_INT32_T) &amp;&amp; !defined(FORCE_BIG_PACK)
              case SIZEOF_INT32_T:
    while (len-- &gt; 0) {
        union {
                        int32_t i;
                        char a[sizeof(int32_t)];
                    } v;

        from = NEXTFROM;
        v.i = (int32_t)num2i32(from);
        if (bigendian_p != BIGENDIAN_P()) v.i = swap32(v.i);
        rb_str_buf_cat(res, v.a, sizeof(int32_t));
    }
    break;
#endif

#if defined(HAVE_INT64_T) &amp;&amp; SIZEOF_LONG == SIZEOF_INT64_T &amp;&amp; !defined(FORCE_BIG_PACK)
              case SIZEOF_INT64_T:
    while (len-- &gt; 0) {
        union {
                        int64_t i;
                        char a[sizeof(int64_t)];
                    } v;

        from = NEXTFROM;
        v.i = num2i32(from); /* can return 64bit value if SIZEOF_LONG == SIZEOF_INT64_T */
        if (bigendian_p != BIGENDIAN_P()) v.i = swap64(v.i);
        rb_str_buf_cat(res, v.a, sizeof(int64_t));
    }
    break;
#endif

        default:
                if (integer_size &gt; MAX_INTEGER_PACK_SIZE)
                    rb_bug(&quot;unexpected intger size for pack: %d&quot;, integer_size);
                while (len-- &gt; 0) {
                    union {
                        unsigned long i[(MAX_INTEGER_PACK_SIZE+SIZEOF_LONG-1)/SIZEOF_LONG];
                        char a[(MAX_INTEGER_PACK_SIZE+SIZEOF_LONG-1)/SIZEOF_LONG*SIZEOF_LONG];
                    } v;
                    int num_longs = (integer_size+SIZEOF_LONG-1)/SIZEOF_LONG;
                    int i;

                    from = NEXTFROM;
                    rb_big_pack(from, v.i, num_longs);
                    if (bigendian_p) {
                        for (i = 0; i &lt; num_longs/2; i++) {
                            unsigned long t = v.i[i];
                            v.i[i] = v.i[num_longs-1-i];
                            v.i[num_longs-1-i] = t;
                        }
                    }
        if (bigendian_p != BIGENDIAN_P()) {
                        for (i = 0; i &lt; num_longs; i++)
                            v.i[i] = swapl(v.i[i]);
                    }
                    rb_str_buf_cat(res,
                                   bigendian_p ?
                                     v.a + sizeof(long)*num_longs - integer_size :
                                     v.a,
                                   integer_size);
                }
                break;
      }
      break;

    case 'f':    /* single precision float in native format */
    case 'F':    /* ditto */
      while (len-- &gt; 0) {
    float f;

    from = NEXTFROM;
    f = (float)RFLOAT_VALUE(rb_to_float(from));
    rb_str_buf_cat(res, (char*)&amp;f, sizeof(float));
      }
      break;

    case 'e':    /* single precision float in VAX byte-order */
      while (len-- &gt; 0) {
    float f;
    FLOAT_CONVWITH(ftmp);

    from = NEXTFROM;
    f = (float)RFLOAT_VALUE(rb_to_float(from));
    f = HTOVF(f,ftmp);
    rb_str_buf_cat(res, (char*)&amp;f, sizeof(float));
      }
      break;

    case 'E':    /* double precision float in VAX byte-order */
      while (len-- &gt; 0) {
    double d;
    DOUBLE_CONVWITH(dtmp);

    from = NEXTFROM;
    d = RFLOAT_VALUE(rb_to_float(from));
    d = HTOVD(d,dtmp);
    rb_str_buf_cat(res, (char*)&amp;d, sizeof(double));
      }
      break;

    case 'd':    /* double precision float in native format */
    case 'D':    /* ditto */
      while (len-- &gt; 0) {
    double d;

    from = NEXTFROM;
    d = RFLOAT_VALUE(rb_to_float(from));
    rb_str_buf_cat(res, (char*)&amp;d, sizeof(double));
      }
      break;

    case 'g':    /* single precision float in network byte-order */
      while (len-- &gt; 0) {
    float f;
    FLOAT_CONVWITH(ftmp);

    from = NEXTFROM;
    f = (float)RFLOAT_VALUE(rb_to_float(from));
    f = HTONF(f,ftmp);
    rb_str_buf_cat(res, (char*)&amp;f, sizeof(float));
      }
      break;

    case 'G':    /* double precision float in network byte-order */
      while (len-- &gt; 0) {
    double d;
    DOUBLE_CONVWITH(dtmp);

    from = NEXTFROM;
    d = RFLOAT_VALUE(rb_to_float(from));
    d = HTOND(d,dtmp);
    rb_str_buf_cat(res, (char*)&amp;d, sizeof(double));
      }
      break;

    case 'x':    /* null byte */
    grow:
      while (len &gt;= 10) {
    rb_str_buf_cat(res, nul10, 10);
    len -= 10;
      }
      rb_str_buf_cat(res, nul10, len);
      break;

    case 'X':    /* back up byte */
    shrink:
      plen = RSTRING_LEN(res);
      if (plen &lt; len)
    rb_raise(rb_eArgError, &quot;X outside of string&quot;);
      rb_str_set_len(res, plen - len);
      break;

    case '@':    /* null fill to absolute position */
      len -= RSTRING_LEN(res);
      if (len &gt; 0) goto grow;
      len = -len;
      if (len &gt; 0) goto shrink;
      break;

    case '%':
      rb_raise(rb_eArgError, &quot;%% is not supported&quot;);
      break;

    case 'U':    /* Unicode character */
      while (len-- &gt; 0) {
    SIGNED_VALUE l;
    char buf[8];
    int le;

    from = NEXTFROM;
    from = rb_to_int(from);
    l = NUM2LONG(from);
    if (l &lt; 0) {
        rb_raise(rb_eRangeError, &quot;pack(U): value out of range&quot;);
    }
    le = rb_uv_to_utf8(buf, l);
    rb_str_buf_cat(res, (char*)buf, le);
      }
      break;

    case 'u':    /* uuencoded string */
    case 'm':    /* base64 encoded string */
      from = NEXTFROM;
      StringValue(from);
      ptr = RSTRING_PTR(from);
      plen = RSTRING_LEN(from);

      if (len == 0 &amp;&amp; type == 'm') {
    encodes(res, ptr, plen, type, 0);
    ptr += plen;
    break;
      }
      if (len &lt;= 2)
    len = 45;
      else
    len = len / 3 * 3;
      while (plen &gt; 0) {
    long todo;

    if (plen &gt; len)
        todo = len;
    else
        todo = plen;
    encodes(res, ptr, todo, type, 1);
    plen -= todo;
    ptr += todo;
      }
      break;

    case 'M':    /* quoted-printable encoded string */
      from = rb_obj_as_string(NEXTFROM);
      if (len &lt;= 1)
    len = 72;
      qpencode(res, from, len);
      break;

    case 'P':    /* pointer to packed byte string */
      from = THISFROM;
      if (!NIL_P(from)) {
    StringValue(from);
    if (RSTRING_LEN(from) &lt; len) {
        rb_raise(rb_eArgError, &quot;too short buffer for P(%ld for %ld)&quot;,
           RSTRING_LEN(from), len);
    }
      }
      len = 1;
      /* FALL THROUGH */
    case 'p':    /* pointer to string */
      while (len-- &gt; 0) {
    char *t;
    from = NEXTFROM;
    if (NIL_P(from)) {
        t = 0;
    }
    else {
        t = StringValuePtr(from);
    }
    if (!associates) {
        associates = rb_ary_new();
    }
    rb_ary_push(associates, from);
    rb_obj_taint(from);
    rb_str_buf_cat(res, (char*)&amp;t, sizeof(char*));
      }
      break;

    case 'w':    /* BER compressed integer  */
      while (len-- &gt; 0) {
    unsigned long ul;
    VALUE buf = rb_str_new(0, 0);
    char c, *bufs, *bufe;

    from = NEXTFROM;
    if (TYPE(from) == T_BIGNUM) {
        VALUE big128 = rb_uint2big(128);
        while (TYPE(from) == T_BIGNUM) {
      from = rb_big_divmod(from, big128);
      c = NUM2INT(RARRAY_PTR(from)[1]) | 0x80; /* mod */
      rb_str_buf_cat(buf, &amp;c, sizeof(char));
      from = RARRAY_PTR(from)[0]; /* div */
        }
    }

    {
        long l = NUM2LONG(from);
        if (l &lt; 0) {
      rb_raise(rb_eArgError, &quot;can't compress negative numbers&quot;);
        }
        ul = l;
    }

    while (ul) {
        c = (char)(ul &amp; 0x7f) | 0x80;
        rb_str_buf_cat(buf, &amp;c, sizeof(char));
        ul &gt;&gt;=  7;
    }

    if (RSTRING_LEN(buf)) {
        bufs = RSTRING_PTR(buf);
        bufe = bufs + RSTRING_LEN(buf) - 1;
        *bufs &amp;= 0x7f; /* clear continue bit */
        while (bufs &lt; bufe) { /* reverse */
      c = *bufs;
      *bufs++ = *bufe;
      *bufe-- = c;
        }
        rb_str_buf_cat(res, RSTRING_PTR(buf), RSTRING_LEN(buf));
    }
    else {
        c = 0;
        rb_str_buf_cat(res, &amp;c, sizeof(char));
    }
      }
      break;

    default:
      break;
  }
    }

    if (associates) {
  rb_str_associate(res, associates);
    }
    OBJ_INFECT(res, fmt);
    switch (enc_info) {
      case 1:
  ENCODING_CODERANGE_SET(res, rb_usascii_encindex(), ENC_CODERANGE_7BIT);
  break;
      case 2:
  rb_enc_set_index(res, rb_utf8_encindex());
  break;
      default:
  /* do nothing, keep ASCII-8BIT */
  break;
    }
    return res;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000116">
                    
                    <a name="M000116"></a><b>ary.permutation { |p| block }          &rarr; ary
ary.permutation                        &rarr; an_enumerator
ary.permutation(n) { |p| block }       &rarr; ary
ary.permutation(n)                     &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
When invoked with a block, yield all permutations of length <em>n</em> of
the elements of <em>ary</em>, then return the array itself. If <em>n</em>
is not specified, yield all permutations of all elements. The
implementation makes no guarantees about the order in which the
permutations are yielded.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<p>
Examples:
</p>
<pre>
    a = [1, 2, 3]
    a.permutation.to_a     #=&gt; [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
    a.permutation(1).to_a  #=&gt; [[1],[2],[3]]
    a.permutation(2).to_a  #=&gt; [[1,2],[1,3],[2,1],[2,3],[3,1],[3,2]]
    a.permutation(3).to_a  #=&gt; [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
    a.permutation(0).to_a  #=&gt; [[]] # one permutation of length 0
    a.permutation(4).to_a  #=&gt; []   # no permutations of length 4
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000116_source')" id="l_M000116_source">show</a>
                        
                    </p>
                    <div id="M000116_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_permutation(int argc, VALUE *argv, VALUE ary)
{
    VALUE num;
    long r, n, i;

    n = RARRAY_LEN(ary);                  /* Array length */
    RETURN_ENUMERATOR(ary, argc, argv);   /* Return enumerator if no block */
    rb_scan_args(argc, argv, &quot;01&quot;, &amp;num);
    r = NIL_P(num) ? n : NUM2LONG(num);   /* Permutation size from argument */

    if (r &lt; 0 || n &lt; r) {
  /* no permutations: yield nothing */
    }
    else if (r == 0) { /* exactly one permutation: the zero-length array */
  rb_yield(rb_ary_new2(0));
    }
    else if (r == 1) { /* this is a special, easy case */
  for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
      rb_yield(rb_ary_new3(1, RARRAY_PTR(ary)[i]));
  }
    }
    else {             /* this is the general case */
  volatile VALUE t0 = tmpbuf(n,sizeof(long));
  long *p = (long*)RSTRING_PTR(t0);
  volatile VALUE t1 = tmpbuf(n,sizeof(char));
  char *used = (char*)RSTRING_PTR(t1);
  VALUE ary0 = ary_make_shared_copy(ary); /* private defensive copy of ary */
  RBASIC(ary0)-&gt;klass = 0;

  MEMZERO(used, char, n); /* initialize array */

  permute0(n, r, p, 0, used, ary0); /* compute and yield permutations */
  tmpbuf_discard(t0);
  tmpbuf_discard(t1);
  RBASIC(ary0)-&gt;klass = rb_cArray;
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000020">
                    
                    <a name="M000020"></a><b>ary.pop    &rarr; obj or nil
ary.pop(n) &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Removes the last element from <tt>self</tt> and returns it, or <tt>nil</tt>
if the array is empty.
</p>
<p>
If a number <em>n</em> is given, returns an array of the last n elements
(or less) just like <tt>array.slice!(-n, n)</tt> does.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.pop     #=&gt; &quot;d&quot;
   a.pop(2)  #=&gt; [&quot;b&quot;, &quot;c&quot;]
   a         #=&gt; [&quot;a&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000020_source')" id="l_M000020_source">show</a>
                        
                    </p>
                    <div id="M000020_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_pop_m(int argc, VALUE *argv, VALUE ary)
{
    VALUE result;

    if (argc == 0) {
  return rb_ary_pop(ary);
    }

    rb_ary_modify_check(ary);
    result = ary_take_first_or_last(argc, argv, ary, ARY_TAKE_LAST);
    ARY_INCREASE_LEN(ary, -RARRAY_LEN(result));
    return result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003599">
                    
                    <a name="M003599"></a><b>pretty_print</b>(q)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003599_source')" id="l_M003599_source">show</a>
                        
                    </p>
                    <div id="M003599_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/pp.rb, line 336</span>
336:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pretty_print</span>(<span class="ruby-identifier">q</span>)
337:     <span class="ruby-identifier">q</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">1</span>, <span class="ruby-value str">'['</span>, <span class="ruby-value str">']'</span>) {
338:       <span class="ruby-identifier">q</span>.<span class="ruby-identifier">seplist</span>(<span class="ruby-keyword kw">self</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
339:         <span class="ruby-identifier">q</span>.<span class="ruby-identifier">pp</span> <span class="ruby-identifier">v</span>
340:       }
341:     }
342:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M003600">
                    
                    <a name="M003600"></a><b>pretty_print_cycle</b>(q)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M003600_source')" id="l_M003600_source">show</a>
                        
                    </p>
                    <div id="M003600_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/pp.rb, line 344</span>
344:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pretty_print_cycle</span>(<span class="ruby-identifier">q</span>)
345:     <span class="ruby-identifier">q</span>.<span class="ruby-identifier">text</span>(<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-value str">'[]'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'[...]'</span>)
346:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000120">
                    
                    <a name="M000120"></a><b>ary.product(other_ary, ...)                &rarr; new_ary
ary.product(other_ary, ...) { |p| block }  &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array of all combinations of elements from all arrays, The
length of the returned array is the product of the length of <tt>self</tt>
and the argument arrays. If given a block, <em>product</em> will yield all
combinations and return <tt>self</tt> instead.
</p>
<pre>
   [1,2,3].product([4,5])     #=&gt; [[1,4],[1,5],[2,4],[2,5],[3,4],[3,5]]
   [1,2].product([1,2])       #=&gt; [[1,1],[1,2],[2,1],[2,2]]
   [1,2].product([3,4],[5,6]) #=&gt; [[1,3,5],[1,3,6],[1,4,5],[1,4,6],
                              #     [2,3,5],[2,3,6],[2,4,5],[2,4,6]]
   [1,2].product()            #=&gt; [[1],[2]]
   [1,2].product([])          #=&gt; []
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000120_source')" id="l_M000120_source">show</a>
                        
                    </p>
                    <div id="M000120_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_product(int argc, VALUE *argv, VALUE ary)
{
    int n = argc+1;    /* How many arrays we're operating on */
    volatile VALUE t0 = tmpary(n);
    volatile VALUE t1 = tmpbuf(n, sizeof(int));
    VALUE *arrays = RARRAY_PTR(t0); /* The arrays we're computing the product of */
    int *counters = (int*)RSTRING_PTR(t1); /* The current position in each one */
    VALUE result = Qnil;      /* The array we'll be returning, when no block given */
    long i,j;
    long resultlen = 1;

    RBASIC(t0)-&gt;klass = 0;
    RBASIC(t1)-&gt;klass = 0;

    /* initialize the arrays of arrays */
    ARY_SET_LEN(t0, n);
    arrays[0] = ary;
    for (i = 1; i &lt; n; i++) arrays[i] = Qnil;
    for (i = 1; i &lt; n; i++) arrays[i] = to_ary(argv[i-1]);

    /* initialize the counters for the arrays */
    for (i = 0; i &lt; n; i++) counters[i] = 0;

    /* Otherwise, allocate and fill in an array of results */
    if (rb_block_given_p()) {
  /* Make defensive copies of arrays; exit if any is empty */
  for (i = 0; i &lt; n; i++) {
      if (RARRAY_LEN(arrays[i]) == 0) goto done;
      arrays[i] = ary_make_shared_copy(arrays[i]);
  }
    }
    else {
  /* Compute the length of the result array; return [] if any is empty */
  for (i = 0; i &lt; n; i++) {
      long k = RARRAY_LEN(arrays[i]), l = resultlen;
      if (k == 0) {
    result = rb_ary_new2(0);
    goto done;
      }
      resultlen *= k;
      if (resultlen &lt; k || resultlen &lt; l || resultlen / k != l) {
    rb_raise(rb_eRangeError, &quot;too big to product&quot;);
      }
  }
  result = rb_ary_new2(resultlen);
    }
    for (;;) {
  int m;
  /* fill in one subarray */
  VALUE subarray = rb_ary_new2(n);
  for (j = 0; j &lt; n; j++) {
      rb_ary_push(subarray, rb_ary_entry(arrays[j], counters[j]));
  }

  /* put it on the result array */
  if(NIL_P(result)) {
      FL_SET(t0, FL_USER5);
      rb_yield(subarray);
      if (! FL_TEST(t0, FL_USER5)) {
    rb_raise(rb_eRuntimeError, &quot;product reentered&quot;);
      }
      else {
    FL_UNSET(t0, FL_USER5);
      }
  }
  else {
      rb_ary_push(result, subarray);
  }

  /*
   * Increment the last counter.  If it overflows, reset to 0
   * and increment the one before it.
   */
  m = n-1;
  counters[m]++;
  while (counters[m] == RARRAY_LEN(arrays[m])) {
      counters[m] = 0;
      /* If the first counter overflows, we are done */
      if (--m &lt; 0) goto done;
      counters[m]++;
  }
    }
done:
    tmpary_discard(t0);
    tmpbuf_discard(t1);

    return NIL_P(result) ? ary : result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000019">
                    
                    <a name="M000019"></a><b>ary.push(obj, ... )   &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Append&#8212;Pushes the given object(s) on to the end of this array. This
expression returns the array itself, so several appends may be chained
together.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.push(&quot;d&quot;, &quot;e&quot;, &quot;f&quot;)
           #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000019_source')" id="l_M000019_source">show</a>
                        
                    </p>
                    <div id="M000019_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_push_m(int argc, VALUE *argv, VALUE ary)
{
    rb_ary_modify(ary);
    while (argc--) {
  rb_ary_push_1(ary, *argv++);
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000083">
                    
                    <a name="M000083"></a><b>ary.rassoc(obj) &rarr; new_ary or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Searches through the array whose elements are also arrays. Compares
<em>obj</em> with the second element of each contained array using
<tt>==</tt>. Returns the first contained array that matches. See also
<tt><a href="Array.html#M000074">Array#assoc</a></tt>.
</p>
<pre>
   a = [ [ 1, &quot;one&quot;], [2, &quot;two&quot;], [3, &quot;three&quot;], [&quot;ii&quot;, &quot;two&quot;] ]
   a.rassoc(&quot;two&quot;)    #=&gt; [2, &quot;two&quot;]
   a.rassoc(&quot;four&quot;)   #=&gt; nil
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show</a>
                        
                    </p>
                    <div id="M000083_source" class="dyn-source">
                        <pre>VALUE
rb_ary_rassoc(VALUE ary, VALUE value)
{
    long i;
    VALUE v;

    for (i = 0; i &lt; RARRAY_LEN(ary); ++i) {
  v = RARRAY_PTR(ary)[i];
  if (TYPE(v) == T_ARRAY &amp;&amp;
      RARRAY_LEN(v) &gt; 1 &amp;&amp;
      rb_equal(RARRAY_PTR(v)[1], value))
      return v;
    }
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000051">
                    
                    <a name="M000051"></a><b>ary.reject {|item| block }  &rarr; new_ary
ary.reject                  &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new array containing the items in <tt>self</tt> for which the
block is not true. See also <tt><a
href="Array.html#M000050">Array#delete_if</a></tt>
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000051_source')" id="l_M000051_source">show</a>
                        
                    </p>
                    <div id="M000051_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_reject(VALUE ary)
{
    VALUE rejected_ary;

    RETURN_ENUMERATOR(ary, 0, 0);
    rejected_ary = rb_ary_new();
    ary_reject(ary, rejected_ary);
    return rejected_ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000052">
                    
                    <a name="M000052"></a><b>ary.reject! {|item| block }  &rarr; ary or nil
ary.reject!                  &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Equivalent to <tt><a href="Array.html#M000050">Array#delete_if</a></tt>,
deleting elements from <tt>self</tt> for which the block evaluates to true,
but returns <tt>nil</tt> if no changes were made. See also <tt><a
href="Enumerable.html#M000288">Enumerable#reject</a></tt> and <tt><a
href="Array.html#M000050">Array#delete_if</a></tt>.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000052_source')" id="l_M000052_source">show</a>
                        
                    </p>
                    <div id="M000052_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_reject_bang(VALUE ary)
{
    RETURN_ENUMERATOR(ary, 0, 0);
    return ary_reject_bang(ary);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000119">
                    
                    <a name="M000119"></a><b>ary.repeated_combination(n) { |c| block } &rarr; ary
ary.repeated_combination(n)               &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
When invoked with a block, yields all repeated combinations of length
<em>n</em> of elements from <em>ary</em> and then returns <em>ary</em>
itself. The implementation makes no guarantees about the order in which the
repeated combinations are yielded.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<p>
Examples:
</p>
<pre>
    a = [1, 2, 3]
    a.repeated_combination(1).to_a  #=&gt; [[1], [2], [3]]
    a.repeated_combination(2).to_a  #=&gt; [[1,1],[1,2],[1,3],[2,2],[2,3],[3,3]]
    a.repeated_combination(3).to_a  #=&gt; [[1,1,1],[1,1,2],[1,1,3],[1,2,2],[1,2,3],
                                    #    [1,3,3],[2,2,2],[2,2,3],[2,3,3],[3,3,3]]
    a.repeated_combination(4).to_a  #=&gt; [[1,1,1,1],[1,1,1,2],[1,1,1,3],[1,1,2,2],[1,1,2,3],
                                    #    [1,1,3,3],[1,2,2,2],[1,2,2,3],[1,2,3,3],[1,3,3,3],
                                    #    [2,2,2,2],[2,2,2,3],[2,2,3,3],[2,3,3,3],[3,3,3,3]]
    a.repeated_combination(0).to_a  #=&gt; [[]] # one combination of length 0
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000119_source')" id="l_M000119_source">show</a>
                        
                    </p>
                    <div id="M000119_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_repeated_combination(VALUE ary, VALUE num)
{
    long n, i, len;

    n = NUM2LONG(num);                 /* Combination size from argument */
    RETURN_ENUMERATOR(ary, 1, &amp;num);   /* Return enumerator if no block */
    len = RARRAY_LEN(ary);
    if (n &lt; 0) {
  /* yield nothing */
    }
    else if (n == 0) {
  rb_yield(rb_ary_new2(0));
    }
    else if (n == 1) {
  for (i = 0; i &lt; len; i++) {
      rb_yield(rb_ary_new3(1, RARRAY_PTR(ary)[i]));
  }
    }
    else if (len == 0) {
  /* yield nothing */
    }
    else {
  volatile VALUE t0 = tmpbuf(n, sizeof(long));
  long *p = (long*)RSTRING_PTR(t0);
  VALUE ary0 = ary_make_shared_copy(ary); /* private defensive copy of ary */
  RBASIC(ary0)-&gt;klass = 0;

  rcombinate0(len, n, p, 0, n, ary0); /* compute and yield repeated combinations */
  tmpbuf_discard(t0);
  RBASIC(ary0)-&gt;klass = rb_cArray;
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000118">
                    
                    <a name="M000118"></a><b>ary.repeated_permutation(n) { |p| block } &rarr; ary
ary.repeated_permutation(n)               &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
When invoked with a block, yield all repeated permutations of length
<em>n</em> of the elements of <em>ary</em>, then return the array itself.
The implementation makes no guarantees about the order in which the
repeated permutations are yielded.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<p>
Examples:
</p>
<pre>
    a = [1, 2]
    a.repeated_permutation(1).to_a  #=&gt; [[1], [2]]
    a.repeated_permutation(2).to_a  #=&gt; [[1,1],[1,2],[2,1],[2,2]]
    a.repeated_permutation(3).to_a  #=&gt; [[1,1,1],[1,1,2],[1,2,1],[1,2,2],
                                    #    [2,1,1],[2,1,2],[2,2,1],[2,2,2]]
    a.repeated_permutation(0).to_a  #=&gt; [[]] # one permutation of length 0
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000118_source')" id="l_M000118_source">show</a>
                        
                    </p>
                    <div id="M000118_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_repeated_permutation(VALUE ary, VALUE num)
{
    long r, n, i;

    n = RARRAY_LEN(ary);                  /* Array length */
    RETURN_ENUMERATOR(ary, 1, &amp;num);      /* Return enumerator if no block */
    r = NUM2LONG(num);                    /* Permutation size from argument */

    if (r &lt; 0) {
  /* no permutations: yield nothing */
    }
    else if (r == 0) { /* exactly one permutation: the zero-length array */
  rb_yield(rb_ary_new2(0));
    }
    else if (r == 1) { /* this is a special, easy case */
  for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
      rb_yield(rb_ary_new3(1, RARRAY_PTR(ary)[i]));
  }
    }
    else {             /* this is the general case */
  volatile VALUE t0 = tmpbuf(r, sizeof(long));
  long *p = (long*)RSTRING_PTR(t0);
  VALUE ary0 = ary_make_shared_copy(ary); /* private defensive copy of ary */
  RBASIC(ary0)-&gt;klass = 0;

  rpermute0(n, r, p, 0, ary0); /* compute and yield repeated permutations */
  tmpbuf_discard(t0);
  RBASIC(ary0)-&gt;klass = rb_cArray;
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000055">
                    
                    <a name="M000055"></a><b>ary.replace(other_ary)  &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Replaces the contents of <tt>self</tt> with the contents of
<em>other_ary</em>, truncating or expanding if necessary.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]
   a.replace([ &quot;x&quot;, &quot;y&quot;, &quot;z&quot; ])   #=&gt; [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;]
   a                              #=&gt; [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000055_source')" id="l_M000055_source">show</a>
                        
                    </p>
                    <div id="M000055_source" class="dyn-source">
                        <pre>VALUE
rb_ary_replace(VALUE copy, VALUE orig)
{
    rb_ary_modify_check(copy);
    orig = to_ary(orig);
    if (copy == orig) return copy;

    if (RARRAY_LEN(orig) &lt;= RARRAY_EMBED_LEN_MAX) {
        VALUE *ptr;
        VALUE shared = 0;

        if (ARY_OWNS_HEAP_P(copy)) {
            xfree(RARRAY_PTR(copy));
        }
        else if (ARY_SHARED_P(copy)) {
            shared = ARY_SHARED(copy);
            FL_UNSET_SHARED(copy);
        }
        FL_SET_EMBED(copy);
        ptr = RARRAY_PTR(orig);
        MEMCPY(RARRAY_PTR(copy), ptr, VALUE, RARRAY_LEN(orig));
        if (shared) {
            rb_ary_decrement_share(shared);
        }
        ARY_SET_LEN(copy, RARRAY_LEN(orig));
    }
    else {
        VALUE shared = ary_make_shared(orig);
        if (ARY_OWNS_HEAP_P(copy)) {
            xfree(RARRAY_PTR(copy));
        }
        else {
            rb_ary_unshare_safe(copy);
        }
        FL_UNSET_EMBED(copy);
        ARY_SET_PTR(copy, RARRAY_PTR(orig));
        ARY_SET_LEN(copy, RARRAY_LEN(orig));
        rb_ary_set_shared(copy, shared);
    }
    return copy;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000033">
                    
                    <a name="M000033"></a><b>ary.reverse &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new array containing <tt>self</tt>&#8217;s elements in reverse
order.
</p>
<pre>
   [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ].reverse   #=&gt; [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;]
   [ 1 ].reverse               #=&gt; [1]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000033_source')" id="l_M000033_source">show</a>
                        
                    </p>
                    <div id="M000033_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_reverse_m(VALUE ary)
{
    long len = RARRAY_LEN(ary);
    VALUE dup = rb_ary_new2(len);

    if (len &gt; 0) {
  VALUE *p1 = RARRAY_PTR(ary);
  VALUE *p2 = RARRAY_PTR(dup) + len - 1;
  do *p2-- = *p1++; while (--len &gt; 0);
    }
    ARY_SET_LEN(dup, RARRAY_LEN(ary));
    return dup;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000034">
                    
                    <a name="M000034"></a><b>ary.reverse!   &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Reverses <tt>self</tt> in place.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.reverse!       #=&gt; [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;]
   a                #=&gt; [&quot;c&quot;, &quot;b&quot;, &quot;a&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000034_source')" id="l_M000034_source">show</a>
                        
                    </p>
                    <div id="M000034_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_reverse_bang(VALUE ary)
{
    return rb_ary_reverse(ary);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000026">
                    
                    <a name="M000026"></a><b>ary.reverse_each {|item| block }   &rarr; ary
ary.reverse_each                   &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Same as <tt><a href="Array.html#M000024">Array#each</a></tt>, but traverses
<tt>self</tt> in reverse order.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.reverse_each {|x| print x, &quot; &quot; }
</pre>
<p>
produces:
</p>
<pre>
   c b a
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000026_source')" id="l_M000026_source">show</a>
                        
                    </p>
                    <div id="M000026_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_reverse_each(VALUE ary)
{
    long len;

    RETURN_ENUMERATOR(ary, 0, 0);
    len = RARRAY_LEN(ary);
    while (len--) {
  rb_yield(RARRAY_PTR(ary)[len]);
  if (RARRAY_LEN(ary) &lt; len) {
      len = RARRAY_LEN(ary);
  }
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000031">
                    
                    <a name="M000031"></a><b>ary.rindex(obj)           &rarr;  int or nil
ary.rindex {|item| block} &rarr;  int or nil
ary.rindex                &rarr;  an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the index of the last object in <tt>self</tt> <tt>==</tt> to
<em>obj</em>. If a block is given instead of an argument, returns index of
first object for which <em>block</em> is true, starting from the last
object. Returns <tt>nil</tt> if no match is found. See also <tt><a
href="Array.html#M000030">Array#index</a></tt>.
</p>
<p>
If neither block nor argument is given, an enumerator is returned instead.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.rindex(&quot;b&quot;)        #=&gt; 3
   a.rindex(&quot;z&quot;)        #=&gt; nil
   a.rindex{|x|x==&quot;b&quot;}  #=&gt; 3
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000031_source')" id="l_M000031_source">show</a>
                        
                    </p>
                    <div id="M000031_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_rindex(int argc, VALUE *argv, VALUE ary)
{
    VALUE val;
    long i = RARRAY_LEN(ary);

    if (argc == 0) {
  RETURN_ENUMERATOR(ary, 0, 0);
  while (i--) {
      if (RTEST(rb_yield(RARRAY_PTR(ary)[i])))
    return LONG2NUM(i);
      if (i &gt; RARRAY_LEN(ary)) {
    i = RARRAY_LEN(ary);
      }
  }
  return Qnil;
    }
    rb_scan_args(argc, argv, &quot;1&quot;, &amp;val);
    if (rb_block_given_p())
  rb_warn(&quot;given block not used&quot;);
    while (i--) {
  if (rb_equal(RARRAY_PTR(ary)[i], val))
      return LONG2NUM(i);
  if (i &gt; RARRAY_LEN(ary)) {
      i = RARRAY_LEN(ary);
  }
    }
    return Qnil;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000035">
                    
                    <a name="M000035"></a><b>ary.rotate(cnt=1) &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns new array by rotating <tt>self</tt> so that the element at
<tt>cnt</tt> in <tt>self</tt> is the first element of the new array. If
<tt>cnt</tt> is negative then it rotates in the opposite direction.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.rotate         #=&gt; [&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;a&quot;]
   a                #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
   a.rotate(2)      #=&gt; [&quot;c&quot;, &quot;d&quot;, &quot;a&quot;, &quot;b&quot;]
   a.rotate(-3)     #=&gt; [&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;a&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000035_source')" id="l_M000035_source">show</a>
                        
                    </p>
                    <div id="M000035_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_rotate_m(int argc, VALUE *argv, VALUE ary)
{
    VALUE rotated, *ptr, *ptr2;
    long len, cnt = 1;

    switch (argc) {
      case 1: cnt = NUM2LONG(argv[0]);
      case 0: break;
      default: rb_scan_args(argc, argv, &quot;01&quot;, NULL);
    }

    len = RARRAY_LEN(ary);
    rotated = rb_ary_new2(len);
    if (len &gt; 0) {
  cnt = rotate_count(cnt, len);
  ptr = RARRAY_PTR(ary);
  ptr2 = RARRAY_PTR(rotated);
  len -= cnt;
  MEMCPY(ptr2, ptr + cnt, VALUE, len);
  MEMCPY(ptr2 + len, ptr, VALUE, cnt);
    }
    ARY_SET_LEN(rotated, RARRAY_LEN(ary));
    return rotated;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000036">
                    
                    <a name="M000036"></a><b>ary.rotate!(cnt=1) &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Rotates <tt>self</tt> in place so that the element at <tt>cnt</tt> comes
first, and returns <tt>self</tt>. If <tt>cnt</tt> is negative then it
rotates in the opposite direction.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.rotate!        #=&gt; [&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;a&quot;]
   a                #=&gt; [&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;a&quot;]
   a.rotate!(2)     #=&gt; [&quot;d&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
   a.rotate!(-3)    #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000036_source')" id="l_M000036_source">show</a>
                        
                    </p>
                    <div id="M000036_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_rotate_bang(int argc, VALUE *argv, VALUE ary)
{
    long n = 1;

    switch (argc) {
      case 1: n = NUM2LONG(argv[0]);
      case 0: break;
      default: rb_scan_args(argc, argv, &quot;01&quot;, NULL);
    }
    rb_ary_rotate(ary, n);
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000114">
                    
                    <a name="M000114"></a><b>ary.sample                  &rarr; obj
ary.sample(random: rng)     &rarr; obj
ary.sample(n)               &rarr; new_ary
ary.sample(n, random: rng)  &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Choose a random element or <tt>n</tt> random elements from the array. The
elements are chosen by using random and unique indices into the array in
order to ensure that an element doesn&#8217;t repeat itself unless the
array already contained duplicate elements. If the array is empty the first
form returns <tt>nil</tt> and the second form returns an empty array.
</p>
<p>
If <tt>rng</tt> is given, it will be used as the random number generator.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000114_source')" id="l_M000114_source">show</a>
                        
                    </p>
                    <div id="M000114_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_sample(int argc, VALUE *argv, VALUE ary)
{
    VALUE nv, result, *ptr;
    VALUE opts, randgen = rb_cRandom;
    long n, len, i, j, k, idx[10];
    double rnds[numberof(idx)];

    if (OPTHASH_GIVEN_P(opts)) {
  randgen = rb_hash_lookup2(opts, sym_random, randgen);
    }
    ptr = RARRAY_PTR(ary);
    len = RARRAY_LEN(ary);
    if (argc == 0) {
  if (len == 0) return Qnil;
  if (len == 1) {
      i = 0;
  }
  else {
      double x = rb_random_real(randgen);
      if ((len = RARRAY_LEN(ary)) == 0) return Qnil;
      i = (long)(x * len);
  }
  return RARRAY_PTR(ary)[i];
    }
    rb_scan_args(argc, argv, &quot;1&quot;, &amp;nv);
    n = NUM2LONG(nv);
    if (n &lt; 0) rb_raise(rb_eArgError, &quot;negative sample number&quot;);
    if (n &gt; len) n = len;
    if (n &lt;= numberof(idx)) {
  for (i = 0; i &lt; n; ++i) {
      rnds[i] = rb_random_real(randgen);
  }
    }
    len = RARRAY_LEN(ary);
    ptr = RARRAY_PTR(ary);
    if (n &gt; len) n = len;
    switch (n) {
      case 0:
  return rb_ary_new2(0);
      case 1:
  i = (long)(rnds[0] * len);
  return rb_ary_new4(1, &amp;ptr[i]);
      case 2:
  i = (long)(rnds[0] * len);
  j = (long)(rnds[1] * (len-1));
  if (j &gt;= i) j++;
  return rb_ary_new3(2, ptr[i], ptr[j]);
      case 3:
  i = (long)(rnds[0] * len);
  j = (long)(rnds[1] * (len-1));
  k = (long)(rnds[2] * (len-2));
  {
      long l = j, g = i;
      if (j &gt;= i) l = i, g = ++j;
      if (k &gt;= l &amp;&amp; (++k &gt;= g)) ++k;
  }
  return rb_ary_new3(3, ptr[i], ptr[j], ptr[k]);
    }
    if (n &lt;= numberof(idx)) {
  VALUE *ptr_result;
  long sorted[numberof(idx)];
  sorted[0] = idx[0] = (long)(rnds[0] * len);
  for (i=1; i&lt;n; i++) {
      k = (long)(rnds[i] * --len);
      for (j = 0; j &lt; i; ++j) {
    if (k &lt; sorted[j]) break;
    ++k;
      }
      memmove(&amp;sorted[j+1], &amp;sorted[j], sizeof(sorted[0])*(i-j));
      sorted[j] = idx[i] = k;
  }
  result = rb_ary_new2(n);
  ptr_result = RARRAY_PTR(result);
  for (i=0; i&lt;n; i++) {
      ptr_result[i] = ptr[idx[i]];
  }
    }
    else {
  VALUE *ptr_result;
  result = rb_ary_new4(len, ptr);
  RBASIC(result)-&gt;klass = 0;
  ptr_result = RARRAY_PTR(result);
  RB_GC_GUARD(ary);
  for (i=0; i&lt;n; i++) {
      j = RAND_UPTO(len-i) + i;
      nv = ptr_result[j];
      ptr_result[j] = ptr_result[i];
      ptr_result[i] = nv;
  }
  RBASIC(result)-&gt;klass = rb_cArray;
    }
    ARY_SET_LEN(result, n);

    return result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000044">
                    
                    <a name="M000044"></a><b>ary.select {|item| block } &rarr; new_ary
ary.select                 &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Invokes the block passing in successive elements from <tt>self</tt>,
returning an array containing those elements for which the block returns a
true value (equivalent to <tt><a
href="Enumerable.html#M000287">Enumerable#select</a></tt>).
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = %w{ a b c d e f }
   a.select {|v| v =~ /[aeiou]/}   #=&gt; [&quot;a&quot;, &quot;e&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000044_source')" id="l_M000044_source">show</a>
                        
                    </p>
                    <div id="M000044_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_select(VALUE ary)
{
    VALUE result;
    long i;

    RETURN_ENUMERATOR(ary, 0, 0);
    result = rb_ary_new2(RARRAY_LEN(ary));
    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
  if (RTEST(rb_yield(RARRAY_PTR(ary)[i]))) {
      rb_ary_push(result, rb_ary_elt(ary, i));
  }
    }
    return result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000045">
                    
                    <a name="M000045"></a><b>ary.select! {|item| block } &rarr; new_ary or nil
ary.select!                 &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Invokes the block passing in successive elements from <tt>self</tt>,
deleting elements for which the block returns a false value. It returns
<tt>self</tt> if changes were made, otherwise it returns <tt>nil</tt>. See
also <tt><a href="Array.html#M000046">Array#keep_if</a></tt>
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000045_source')" id="l_M000045_source">show</a>
                        
                    </p>
                    <div id="M000045_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_select_bang(VALUE ary)
{
    long i1, i2;

    RETURN_ENUMERATOR(ary, 0, 0);
    rb_ary_modify(ary);
    for (i1 = i2 = 0; i1 &lt; RARRAY_LEN(ary); i1++) {
  VALUE v = RARRAY_PTR(ary)[i1];
  if (!RTEST(rb_yield(v))) continue;
  if (i1 != i2) {
      rb_ary_store(ary, i2, v);
  }
  i2++;
    }

    if (RARRAY_LEN(ary) == i2) return Qnil;
    if (i2 &lt; RARRAY_LEN(ary))
  ARY_SET_LEN(ary, i2);
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M007588">
                    
                    <a name="M007588"></a><b>array.shelljoin => string
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Builds a command line string from an argument list <tt>array</tt> joining
all elements escaped for Bourne shell and separated by a space. See
+Shellwords::shelljoin+ for details.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M007588_source')" id="l_M007588_source">show</a>
                        
                    </p>
                    <div id="M007588_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/shellwords.rb, line 153</span>
153:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shelljoin</span>
154:     <span class="ruby-constant">Shellwords</span>.<span class="ruby-identifier">join</span>(<span class="ruby-keyword kw">self</span>)
155:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000021">
                    
                    <a name="M000021"></a><b>ary.shift    &rarr; obj or nil
ary.shift(n) &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns the first element of <tt>self</tt> and removes it (shifting all
other elements down by one). Returns <tt>nil</tt> if the array is empty.
</p>
<p>
If a number <em>n</em> is given, returns an array of the first n elements
(or less) just like <tt>array.slice!(0, n)</tt> does.
</p>
<pre>
   args = [ &quot;-m&quot;, &quot;-q&quot;, &quot;filename&quot; ]
   args.shift     #=&gt; &quot;-m&quot;
   args           #=&gt; [&quot;-q&quot;, &quot;filename&quot;]

   args = [ &quot;-m&quot;, &quot;-q&quot;, &quot;filename&quot; ]
   args.shift(2)  #=&gt; [&quot;-m&quot;, &quot;-q&quot;]
   args           #=&gt; [&quot;filename&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000021_source')" id="l_M000021_source">show</a>
                        
                    </p>
                    <div id="M000021_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_shift_m(int argc, VALUE *argv, VALUE ary)
{
    VALUE result;
    long n;

    if (argc == 0) {
  return rb_ary_shift(ary);
    }

    rb_ary_modify_check(ary);
    result = ary_take_first_or_last(argc, argv, ary, ARY_TAKE_FIRST);
    n = RARRAY_LEN(result);
    if (ARY_SHARED_P(ary)) {
  if (ARY_SHARED_NUM(ARY_SHARED(ary)) == 1) {
      rb_mem_clear(RARRAY_PTR(ary), n);
  }
        ARY_INCREASE_PTR(ary, n);
    }
    else {
  MEMMOVE(RARRAY_PTR(ary), RARRAY_PTR(ary)+n, VALUE, RARRAY_LEN(ary)-n);
    }
    ARY_INCREASE_LEN(ary, -n);

    return result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000113">
                    
                    <a name="M000113"></a><b>ary.shuffle              &rarr; new_ary
ary.shuffle(random: rng) &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new array with elements of this array shuffled.
</p>
<pre>
   a = [ 1, 2, 3 ]           #=&gt; [1, 2, 3]
   a.shuffle                 #=&gt; [2, 3, 1]
</pre>
<p>
If <tt>rng</tt> is given, it will be used as the random number generator.
</p>
<pre>
   a.shuffle(random: Random.new(1))  #=&gt; [1, 3, 2]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show</a>
                        
                    </p>
                    <div id="M000113_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_shuffle(int argc, VALUE *argv, VALUE ary)
{
    ary = rb_ary_dup(ary);
    rb_ary_shuffle_bang(argc, argv, ary);
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000112">
                    
                    <a name="M000112"></a><b>ary.shuffle!              &rarr; ary
ary.shuffle!(random: rng) &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Shuffles elements in <tt>self</tt> in place. If <tt>rng</tt> is given, it
will be used as the random number generator.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show</a>
                        
                    </p>
                    <div id="M000112_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_shuffle_bang(int argc, VALUE *argv, VALUE ary)
{
    VALUE *ptr, opts, *snap_ptr, randgen = rb_cRandom;
    long i, snap_len;

    if (OPTHASH_GIVEN_P(opts)) {
  randgen = rb_hash_lookup2(opts, sym_random, randgen);
    }
    if (argc &gt; 0) {
  rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for 0)&quot;, argc);
    }
    rb_ary_modify(ary);
    i = RARRAY_LEN(ary);
    ptr = RARRAY_PTR(ary);
    snap_len = i;
    snap_ptr = ptr;
    while (i) {
  long j = RAND_UPTO(i);
  VALUE tmp;
  if (snap_len != RARRAY_LEN(ary) || snap_ptr != RARRAY_PTR(ary)) {
      rb_raise(rb_eRuntimeError, &quot;modified during shuffle&quot;);
  }
  tmp = ptr[--i];
  ptr[i] = ptr[j];
  ptr[j] = tmp;
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000126">
                    
                    <a name="M000126"></a><b>size</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Array.html#M000027">length</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000072">
                    
                    <a name="M000072"></a><b>ary[index]                &rarr; obj     or nil
ary[start, length]        &rarr; new_ary or nil
ary[range]                &rarr; new_ary or nil
ary.slice(index)          &rarr; obj     or nil
ary.slice(start, length)  &rarr; new_ary or nil
ary.slice(range)          &rarr; new_ary or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Element Reference&#8212;Returns the element at <em>index</em>, or returns a
subarray starting at <em>start</em> and continuing for <em>length</em>
elements, or returns a subarray specified by <em>range</em>. Negative
indices count backward from the end of the array (-1 is the last element).
Returns <tt>nil</tt> if the index (or starting index) are out of range.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]
   a[2] +  a[0] + a[1]    #=&gt; &quot;cab&quot;
   a[6]                   #=&gt; nil
   a[1, 2]                #=&gt; [ &quot;b&quot;, &quot;c&quot; ]
   a[1..3]                #=&gt; [ &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a[4..7]                #=&gt; [ &quot;e&quot; ]
   a[6..10]               #=&gt; nil
   a[-3, 3]               #=&gt; [ &quot;c&quot;, &quot;d&quot;, &quot;e&quot; ]
   # special cases
   a[5]                   #=&gt; nil
   a[5, 1]                #=&gt; []
   a[5..10]               #=&gt; []
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000072_source')" id="l_M000072_source">show</a>
                        
                    </p>
                    <div id="M000072_source" class="dyn-source">
                        <pre>VALUE
rb_ary_aref(int argc, VALUE *argv, VALUE ary)
{
    VALUE arg;
    long beg, len;

    if (argc == 2) {
  beg = NUM2LONG(argv[0]);
  len = NUM2LONG(argv[1]);
  if (beg &lt; 0) {
      beg += RARRAY_LEN(ary);
  }
  return rb_ary_subseq(ary, beg, len);
    }
    if (argc != 1) {
  rb_scan_args(argc, argv, &quot;11&quot;, 0, 0);
    }
    arg = argv[0];
    /* special case - speeding up */
    if (FIXNUM_P(arg)) {
  return rb_ary_entry(ary, FIX2LONG(arg));
    }
    /* check if idx is Range */
    switch (rb_range_beg_len(arg, &amp;beg, &amp;len, RARRAY_LEN(ary), 0)) {
      case Qfalse:
  break;
      case Qnil:
  return Qnil;
      default:
  return rb_ary_subseq(ary, beg, len);
    }
    return rb_ary_entry(ary, NUM2LONG(arg));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000073">
                    
                    <a name="M000073"></a><b>ary.slice!(index)         &rarr; obj or nil
ary.slice!(start, length) &rarr; new_ary or nil
ary.slice!(range)         &rarr; new_ary or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Deletes the element(s) given by an index (optionally with a length) or by a
range. Returns the deleted object (or objects), or <tt>nil</tt> if the
index is out of range.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.slice!(1)     #=&gt; &quot;b&quot;
   a               #=&gt; [&quot;a&quot;, &quot;c&quot;]
   a.slice!(-1)    #=&gt; &quot;c&quot;
   a               #=&gt; [&quot;a&quot;]
   a.slice!(100)   #=&gt; nil
   a               #=&gt; [&quot;a&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show</a>
                        
                    </p>
                    <div id="M000073_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_slice_bang(int argc, VALUE *argv, VALUE ary)
{
    VALUE arg1, arg2;
    long pos, len, orig_len;

    rb_ary_modify_check(ary);
    if (argc == 2) {
  pos = NUM2LONG(argv[0]);
  len = NUM2LONG(argv[1]);
      delete_pos_len:
  if (len &lt; 0) return Qnil;
  orig_len = RARRAY_LEN(ary);
  if (pos &lt; 0) {
      pos += orig_len;
      if (pos &lt; 0) return Qnil;
  }
  else if (orig_len &lt; pos) return Qnil;
  if (orig_len &lt; pos + len) {
      len = orig_len - pos;
  }
  if (len == 0) return rb_ary_new2(0);
  arg2 = rb_ary_new4(len, RARRAY_PTR(ary)+pos);
  RBASIC(arg2)-&gt;klass = rb_obj_class(ary);
  rb_ary_splice(ary, pos, len, Qundef);
  return arg2;
    }

    if (argc != 1) {
  /* error report */
  rb_scan_args(argc, argv, &quot;11&quot;, NULL, NULL);
    }
    arg1 = argv[0];

    if (!FIXNUM_P(arg1)) {
  switch (rb_range_beg_len(arg1, &amp;pos, &amp;len, RARRAY_LEN(ary), 0)) {
    case Qtrue:
      /* valid range */
      goto delete_pos_len;
    case Qnil:
      /* invalid range */
      return Qnil;
    default:
      /* not a range */
      break;
  }
    }

    return rb_ary_delete_at(ary, NUM2LONG(arg1));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000037">
                    
                    <a name="M000037"></a><b>ary.sort                   &rarr; new_ary
ary.sort {| a,b | block }  &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new array created by sorting <tt>self</tt>. Comparisons for the
sort will be done using the <tt>&lt;=&gt;</tt> operator or using an
optional code block. The block implements a comparison between <em>a</em>
and <em>b</em>, returning -1, 0, or +1. See also <tt><a
href="Enumerable.html#M000280">Enumerable#sort_by</a></tt>.
</p>
<pre>
   a = [ &quot;d&quot;, &quot;a&quot;, &quot;e&quot;, &quot;c&quot;, &quot;b&quot; ]
   a.sort                    #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]
   a.sort {|x,y| y &lt;=&gt; x }   #=&gt; [&quot;e&quot;, &quot;d&quot;, &quot;c&quot;, &quot;b&quot;, &quot;a&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000037_source')" id="l_M000037_source">show</a>
                        
                    </p>
                    <div id="M000037_source" class="dyn-source">
                        <pre>VALUE
rb_ary_sort(VALUE ary)
{
    ary = rb_ary_dup(ary);
    rb_ary_sort_bang(ary);
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000038">
                    
                    <a name="M000038"></a><b>ary.sort!                   &rarr; ary
ary.sort! {| a,b | block }  &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Sorts <tt>self</tt>. Comparisons for the sort will be done using the
<tt>&lt;=&gt;</tt> operator or using an optional code block. The block
implements a comparison between <em>a</em> and <em>b</em>, returning -1, 0,
or +1. See also <tt><a
href="Enumerable.html#M000280">Enumerable#sort_by</a></tt>.
</p>
<pre>
   a = [ &quot;d&quot;, &quot;a&quot;, &quot;e&quot;, &quot;c&quot;, &quot;b&quot; ]
   a.sort!                    #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]
   a.sort! {|x,y| y &lt;=&gt; x }   #=&gt; [&quot;e&quot;, &quot;d&quot;, &quot;c&quot;, &quot;b&quot;, &quot;a&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000038_source')" id="l_M000038_source">show</a>
                        
                    </p>
                    <div id="M000038_source" class="dyn-source">
                        <pre>VALUE
rb_ary_sort_bang(VALUE ary)
{
    rb_ary_modify(ary);
    assert(!ARY_SHARED_P(ary));
    if (RARRAY_LEN(ary) &gt; 1) {
  VALUE tmp = ary_make_substitution(ary); /* only ary refers tmp */
  struct ary_sort_data data;

  RBASIC(tmp)-&gt;klass = 0;
  data.ary = tmp;
  data.opt_methods = 0;
  data.opt_inited = 0;
  ruby_qsort(RARRAY_PTR(tmp), RARRAY_LEN(tmp), sizeof(VALUE),
       rb_block_given_p()?sort_1:sort_2, &amp;data);

        if (ARY_EMBED_P(tmp)) {
            assert(ARY_EMBED_P(tmp));
            if (ARY_SHARED_P(ary)) { /* ary might be destructively operated in the given block */
                rb_ary_unshare(ary);
            }
            FL_SET_EMBED(ary);
            MEMCPY(RARRAY_PTR(ary), ARY_EMBED_PTR(tmp), VALUE, ARY_EMBED_LEN(tmp));
            ARY_SET_LEN(ary, ARY_EMBED_LEN(tmp));
        }
        else {
            assert(!ARY_EMBED_P(tmp));
            if (ARY_HEAP_PTR(ary) == ARY_HEAP_PTR(tmp)) {
                assert(!ARY_EMBED_P(ary));
                FL_UNSET_SHARED(ary);
                ARY_SET_CAPA(ary, ARY_CAPA(tmp));
            }
            else {
                assert(!ARY_SHARED_P(tmp));
                if (ARY_EMBED_P(ary)) {
                    FL_UNSET_EMBED(ary);
                }
                else if (ARY_SHARED_P(ary)) {
                    /* ary might be destructively operated in the given block */
                    rb_ary_unshare(ary);
                }
                else {
                    xfree(ARY_HEAP_PTR(ary));
                }
                ARY_SET_PTR(ary, RARRAY_PTR(tmp));
                ARY_SET_HEAP_LEN(ary, RARRAY_LEN(tmp));
                ARY_SET_CAPA(ary, ARY_CAPA(tmp));
            }
            /* tmp was lost ownership for the ptr */
            FL_UNSET(tmp, FL_FREEZE);
            FL_SET_EMBED(tmp);
            ARY_SET_EMBED_LEN(tmp, 0);
            FL_SET(tmp, FL_FREEZE);
  }
        /* tmp will be GC'ed. */
        RBASIC(tmp)-&gt;klass = rb_cArray;
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000039">
                    
                    <a name="M000039"></a><b>ary.sort_by! {| obj | block }    &rarr; ary
ary.sort_by!                     &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Sorts <tt>self</tt> in place using a set of keys generated by mapping the
values in <tt>self</tt> through the given block.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000039_source')" id="l_M000039_source">show</a>
                        
                    </p>
                    <div id="M000039_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_sort_by_bang(VALUE ary)
{
    VALUE sorted;

    RETURN_ENUMERATOR(ary, 0, 0);
    rb_ary_modify(ary);
    sorted = rb_block_call(ary, rb_intern(&quot;sort_by&quot;), 0, 0, sort_by_i, 0);
    rb_ary_replace(ary, sorted);
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000121">
                    
                    <a name="M000121"></a><b>ary.take(n)               &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns first n elements from <em>ary</em>.
</p>
<pre>
   a = [1, 2, 3, 4, 5, 0]
   a.take(3)             #=&gt; [1, 2, 3]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000121_source')" id="l_M000121_source">show</a>
                        
                    </p>
                    <div id="M000121_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_take(VALUE obj, VALUE n)
{
    long len = NUM2LONG(n);
    if (len &lt; 0) {
  rb_raise(rb_eArgError, &quot;attempt to take negative size&quot;);
    }
    return rb_ary_subseq(obj, 0, len);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000122">
                    
                    <a name="M000122"></a><b>ary.take_while {|arr| block }   &rarr; new_ary
ary.take_while                  &rarr; an_enumerator
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Passes elements to the block until the block returns <tt>nil</tt> or
<tt>false</tt>, then stops iterating and returns an array of all prior
elements.
</p>
<p>
If no block is given, an enumerator is returned instead.
</p>
<pre>
   a = [1, 2, 3, 4, 5, 0]
   a.take_while {|i| i &lt; 3 }   #=&gt; [1, 2]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000122_source')" id="l_M000122_source">show</a>
                        
                    </p>
                    <div id="M000122_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_take_while(VALUE ary)
{
    long i;

    RETURN_ENUMERATOR(ary, 0, 0);
    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
  if (!RTEST(rb_yield(RARRAY_PTR(ary)[i]))) break;
    }
    return rb_ary_take(ary, LONG2FIX(i));
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000005">
                    
                    <a name="M000005"></a><b>ary.to_a     &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>self</tt>. If called on a subclass of <a
href="Array.html">Array</a>, converts the receiver to an <a
href="Array.html">Array</a> object.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000005_source')" id="l_M000005_source">show</a>
                        
                    </p>
                    <div id="M000005_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_to_a(VALUE ary)
{
    if (rb_obj_class(ary) != rb_cArray) {
  VALUE dup = rb_ary_new2(RARRAY_LEN(ary));
  rb_ary_replace(dup, ary);
  return dup;
    }
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000006">
                    
                    <a name="M000006"></a><b>ary.to_ary &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns <tt>self</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000006_source')" id="l_M000006_source">show</a>
                        
                    </p>
                    <div id="M000006_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_to_ary_m(VALUE ary)
{
    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001981">
                    
                    <a name="M001981"></a><b>to_csv</b>(options = Hash.new)
                    
                </div>
                
                <div class="description">
                  <p>
Equivalent to <tt>CSV::generate_line(self, options)</tt>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001981_source')" id="l_M001981_source">show</a>
                        
                    </p>
                    <div id="M001981_source" class="dyn-source">
                        <pre>      <span class="ruby-comment cmt"># File lib/csv.rb, line 2346</span>
2346:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_csv</span>(<span class="ruby-identifier">options</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>)
2347:     <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">generate_line</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">options</span>)
2348:   <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000125">
                    
                    <a name="M000125"></a><b>to_s</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="Array.html#M000004">inspect</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000054">
                    
                    <a name="M000054"></a><b>ary.transpose &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Assumes that <tt>self</tt> is an array of arrays and transposes the rows
and columns.
</p>
<pre>
   a = [[1,2], [3,4], [5,6]]
   a.transpose   #=&gt; [[1, 3, 5], [2, 4, 6]]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000054_source')" id="l_M000054_source">show</a>
                        
                    </p>
                    <div id="M000054_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_transpose(VALUE ary)
{
    long elen = -1, alen, i, j;
    VALUE tmp, result = 0;

    alen = RARRAY_LEN(ary);
    if (alen == 0) return rb_ary_dup(ary);
    for (i=0; i&lt;alen; i++) {
  tmp = to_ary(rb_ary_elt(ary, i));
  if (elen &lt; 0) {    /* first element */
      elen = RARRAY_LEN(tmp);
      result = rb_ary_new2(elen);
      for (j=0; j&lt;elen; j++) {
    rb_ary_store(result, j, rb_ary_new2(alen));
      }
  }
  else if (elen != RARRAY_LEN(tmp)) {
      rb_raise(rb_eIndexError, &quot;element size differs (%ld should be %ld)&quot;,
         RARRAY_LEN(tmp), elen);
  }
  for (j=0; j&lt;elen; j++) {
      rb_ary_store(rb_ary_elt(result, j), i, rb_ary_elt(tmp, j));
  }
    }
    return result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000102">
                    
                    <a name="M000102"></a><b>ary.uniq   &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns a new array by removing duplicate values in <tt>self</tt>.
</p>
<pre>
   a = [ &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.uniq   #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
   c = [ &quot;a:def&quot;, &quot;a:xyz&quot;, &quot;b:abc&quot;, &quot;b:xyz&quot;, &quot;c:jkl&quot; ]
   c.uniq {|s| s[/^\w+/]}  #=&gt; [ &quot;a:def&quot;, &quot;b:abc&quot;, &quot;c:jkl&quot; ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show</a>
                        
                    </p>
                    <div id="M000102_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_uniq(VALUE ary)
{
    VALUE hash, uniq, v;
    long i;

    if (RARRAY_LEN(ary) &lt;= 1)
        return rb_ary_dup(ary);
    if (rb_block_given_p()) {
  hash = ary_make_hash_by(ary);
  uniq = ary_new(rb_obj_class(ary), RHASH_SIZE(hash));
  st_foreach(RHASH_TBL(hash), push_value, uniq);
    }
    else {
  hash = ary_make_hash(ary);
  uniq = ary_new(rb_obj_class(ary), RHASH_SIZE(hash));
  for (i=0; i&lt;RARRAY_LEN(ary); i++) {
      st_data_t vv = (st_data_t)(v = rb_ary_elt(ary, i));
      if (st_delete(RHASH_TBL(hash), &amp;vv, 0)) {
    rb_ary_push(uniq, v);
      }
  }
    }
    ary_recycle_hash(hash);

    return uniq;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000103">
                    
                    <a name="M000103"></a><b>ary.uniq! &rarr; ary or nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Removes duplicate elements from <tt>self</tt>. Returns <tt>nil</tt> if no
changes are made (that is, no duplicates are found).
</p>
<pre>
   a = [ &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot; ]
   a.uniq!   #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
   b = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]
   b.uniq!   #=&gt; nil
   c = [ &quot;a:def&quot;, &quot;a:xyz&quot;, &quot;b:abc&quot;, &quot;b:xyz&quot;, &quot;c:jkl&quot; ]
   c.uniq! {|s| s[/^\w+/]}  #=&gt; [ &quot;a:def&quot;, &quot;b:abc&quot;, &quot;c:jkl&quot; ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show</a>
                        
                    </p>
                    <div id="M000103_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_uniq_bang(VALUE ary)
{
    VALUE hash, v;
    long i, j;

    rb_ary_modify_check(ary);
    if (RARRAY_LEN(ary) &lt;= 1)
        return Qnil;
    if (rb_block_given_p()) {
  hash = ary_make_hash_by(ary);
  if (RARRAY_LEN(ary) == (i = RHASH_SIZE(hash))) {
      return Qnil;
  }
  ARY_SET_LEN(ary, 0);
  if (ARY_SHARED_P(ary) &amp;&amp; !ARY_EMBED_P(ary)) {
      rb_ary_unshare(ary);
      FL_SET_EMBED(ary);
  }
  ary_resize_capa(ary, i);
  st_foreach(RHASH_TBL(hash), push_value, ary);
    }
    else {
  hash = ary_make_hash(ary);
  if (RARRAY_LEN(ary) == (long)RHASH_SIZE(hash)) {
      return Qnil;
  }
  for (i=j=0; i&lt;RARRAY_LEN(ary); i++) {
      st_data_t vv = (st_data_t)(v = rb_ary_elt(ary, i));
      if (st_delete(RHASH_TBL(hash), &amp;vv, 0)) {
    rb_ary_store(ary, j++, v);
      }
  }
  ARY_SET_LEN(ary, j);
    }
    ary_recycle_hash(hash);

    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000022">
                    
                    <a name="M000022"></a><b>ary.unshift(obj, ...)  &rarr; ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Prepends objects to the front of <tt>self</tt>, moving other elements
upwards.
</p>
<pre>
   a = [ &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
   a.unshift(&quot;a&quot;)   #=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
   a.unshift(1, 2)  #=&gt; [ 1, 2, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000022_source')" id="l_M000022_source">show</a>
                        
                    </p>
                    <div id="M000022_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_unshift_m(int argc, VALUE *argv, VALUE ary)
{
    long len;

    rb_ary_modify(ary);
    if (argc == 0) return ary;
    if (ARY_CAPA(ary) &lt;= (len = RARRAY_LEN(ary)) + argc) {
  ary_double_capa(ary, len + argc);
    }

    /* sliding items */
    MEMMOVE(RARRAY_PTR(ary) + argc, RARRAY_PTR(ary), VALUE, len);
    MEMCPY(RARRAY_PTR(ary), argv, VALUE, argc);
    ARY_INCREASE_LEN(ary, argc);

    return ary;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000047">
                    
                    <a name="M000047"></a><b>ary.values_at(selector,... )  &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Returns an array containing the elements in <tt>self</tt> corresponding to
the given selector(s). The selectors may be either integer indices or
ranges. See also <tt><a href="Array.html#M000044">Array#select</a></tt>.
</p>
<pre>
   a = %w{ a b c d e f }
   a.values_at(1, 3, 5)
   a.values_at(1, 3, 5, 7)
   a.values_at(-1, -3, -5, -7)
   a.values_at(1..3, 2...5)
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000047_source')" id="l_M000047_source">show</a>
                        
                    </p>
                    <div id="M000047_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_values_at(int argc, VALUE *argv, VALUE ary)
{
    return rb_get_values_at(ary, RARRAY_LEN(ary), argc, argv, rb_ary_entry);
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000053">
                    
                    <a name="M000053"></a><b>ary.zip(arg, ...)                   &rarr; new_ary
ary.zip(arg, ...) {| arr | block }  &rarr; nil
</b>
                    
                </div>
                
                <div class="description">
                  <p>
Converts any arguments to arrays, then merges elements of <tt>self</tt>
with corresponding elements from each argument. This generates a sequence
of <tt>self.size</tt> <em>n</em>-element arrays, where <em>n</em> is one
more that the count of arguments. If the size of any argument is less than
<tt>enumObj.size</tt>, <tt>nil</tt> values are supplied. If a block is
given, it is invoked for each output array, otherwise an array of arrays is
returned.
</p>
<pre>
   a = [ 4, 5, 6 ]
   b = [ 7, 8, 9 ]
   [1,2,3].zip(a, b)      #=&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]
   [1,2].zip(a,b)         #=&gt; [[1, 4, 7], [2, 5, 8]]
   a.zip([1,2],[8])       #=&gt; [[4,1,8], [5,2,nil], [6,nil,nil]]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000053_source')" id="l_M000053_source">show</a>
                        
                    </p>
                    <div id="M000053_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_zip(int argc, VALUE *argv, VALUE ary)
{
    int i, j;
    long len;
    VALUE result = Qnil;

    len = RARRAY_LEN(ary);
    for (i=0; i&lt;argc; i++) {
  argv[i] = take_items(argv[i], len);
    }
    if (!rb_block_given_p()) {
  result = rb_ary_new2(len);
    }

    for (i=0; i&lt;RARRAY_LEN(ary); i++) {
  VALUE tmp = rb_ary_new2(argc+1);

  rb_ary_push(tmp, rb_ary_elt(ary, i));
  for (j=0; j&lt;argc; j++) {
      rb_ary_push(tmp, rb_ary_elt(argv[j], i));
  }
  if (NIL_P(result)) {
      rb_yield(tmp);
  }
  else {
      rb_ary_push(result, tmp);
  }
    }
    return result;
}</pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000101">
                    
                    <a name="M000101"></a><b>ary | other_ary     &rarr; new_ary
</b>
                    
                </div>
                
                <div class="description">
                  <p>
<a href="Set.html">Set</a> Union&#8212;Returns a new array by joining this
array with <em>other_ary</em>, removing duplicates.
</p>
<pre>
   [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ] | [ &quot;c&quot;, &quot;d&quot;, &quot;a&quot; ]
          #=&gt; [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show</a>
                        
                    </p>
                    <div id="M000101_source" class="dyn-source">
                        <pre>static VALUE
rb_ary_or(VALUE ary1, VALUE ary2)
{
    VALUE hash, ary3, v;
    st_data_t vv;
    long i;

    ary2 = to_ary(ary2);
    ary3 = rb_ary_new2(RARRAY_LEN(ary1)+RARRAY_LEN(ary2));
    hash = ary_add_hash(ary_make_hash(ary1), ary2);

    for (i=0; i&lt;RARRAY_LEN(ary1); i++) {
  vv = (st_data_t)(v = rb_ary_elt(ary1, i));
  if (st_delete(RHASH_TBL(hash), &amp;vv, 0)) {
      rb_ary_push(ary3, v);
  }
    }
    for (i=0; i&lt;RARRAY_LEN(ary2); i++) {
  vv = (st_data_t)(v = rb_ary_elt(ary2, i));
  if (st_delete(RHASH_TBL(hash), &amp;vv, 0)) {
      rb_ary_push(ary3, v);
  }
    }
    ary_recycle_hash(hash);
    return ary3;
}</pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    