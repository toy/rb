<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RSS::ListenerMixin</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            RSS::ListenerMixin 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/rss/0_9_rb.html">lib/rss/0.9.rb</a></li>
            
            <li><a href="../../files/lib/rss/1_0_rb.html">lib/rss/1.0.rb</a></li>
            
            <li><a href="../../files/lib/rss/atom_rb.html">lib/rss/atom.rb</a></li>
            
            <li><a href="../../files/lib/rss/parser_rb.html">lib/rss/parser.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M006223">_ns</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M006231">check_ns</a>,</li>
                
                <li><a href="#M006239">collect_attributes</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M005697">initial_start_RDF</a>,</li>
                
                <li><a href="#M005780">initial_start_entry</a>,</li>
                
                <li><a href="#M005779">initial_start_feed</a>,</li>
                
                <li><a href="#M005659">initial_start_rss</a>,</li>
                
                <li><a href="#M006219">instruction</a></li>
                
            </ul>
        </dd>
    
        <dt>K</dt>
        <dd>
            <ul>
                
                <li><a href="#M006228">known_class?</a>,</li>
                
                <li><a href="#M006227">known_class?</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M006217">new</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M006224">parse_pi_content</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M006245">setup_next_element</a>,</li>
                
                <li><a href="#M006250">setup_next_element_in_unknown_element</a>,</li>
                
                <li><a href="#M006230">split_name</a>,</li>
                
                <li><a href="#M006225">start_else_element</a>,</li>
                
                <li><a href="#M006233">start_get_text_element</a>,</li>
                
                <li><a href="#M006236">start_have_something_element</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M006221">tag_end</a>,</li>
                
                <li><a href="#M006220">tag_start</a>,</li>
                
                <li><a href="#M006222">text</a></li>
                
            </ul>
        </dd>
    
        <dt>X</dt>
        <dd>
            <ul>
                
                <li><a href="#M006218">xmldecl</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">CONTENT_PATTERN</td>
            <td>=</td>
            <td class="attr-value">/\s*([^=]+)=([&quot;'])([^\2]+?)\2/</td>
        </tr>
        
        
        <tr valign='top'>
            <td class="attr-name">NAMESPLIT</td>
            <td>=</td>
            <td class="attr-value">/^(?:([\w:][-\w.]*):)?([\w:][-\w.]*)/</td>
        </tr>
        
        
    </table>
    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>rss</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>ignore_unknown_element</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>do_validate</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M006217">
                    
                    <a name="M006217"></a><b>new</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006217_source')" id="l_M006217_source">show</a>
                        
                    </p>
                    <div id="M006217_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 267</span>
267:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
268:       <span class="ruby-ivar">@rss</span> = <span class="ruby-keyword kw">nil</span>
269:       <span class="ruby-ivar">@ignore_unknown_element</span> = <span class="ruby-keyword kw">true</span>
270:       <span class="ruby-ivar">@do_validate</span> = <span class="ruby-keyword kw">true</span>
271:       <span class="ruby-ivar">@ns_stack</span> = [{<span class="ruby-value str">&quot;xml&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xml</span>}]
272:       <span class="ruby-ivar">@tag_stack</span> = [[]]
273:       <span class="ruby-ivar">@text_stack</span> = [<span class="ruby-value str">''</span>]
274:       <span class="ruby-ivar">@proc_stack</span> = []
275:       <span class="ruby-ivar">@last_element</span> = <span class="ruby-keyword kw">nil</span>
276:       <span class="ruby-ivar">@version</span> = <span class="ruby-ivar">@encoding</span> = <span class="ruby-ivar">@standalone</span> = <span class="ruby-keyword kw">nil</span>
277:       <span class="ruby-ivar">@xml_stylesheets</span> = []
278:       <span class="ruby-ivar">@xml_child_mode</span> = <span class="ruby-keyword kw">false</span>
279:       <span class="ruby-ivar">@xml_element</span> = <span class="ruby-keyword kw">nil</span>
280:       <span class="ruby-ivar">@last_xml_element</span> = <span class="ruby-keyword kw">nil</span>
281:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M006219">
                    
                    <a name="M006219"></a><b>instruction</b>(name, content)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006219_source')" id="l_M006219_source">show</a>
                        
                    </p>
                    <div id="M006219_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 288</span>
288:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">instruction</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">content</span>)
289:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;xml-stylesheet&quot;</span>
290:         <span class="ruby-identifier">params</span> = <span class="ruby-identifier">parse_pi_content</span>(<span class="ruby-identifier">content</span>)
291:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value str">&quot;href&quot;</span>)
292:           <span class="ruby-ivar">@xml_stylesheets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">XMLStyleSheet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
293:         <span class="ruby-keyword kw">end</span>
294:       <span class="ruby-keyword kw">end</span>
295:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006221">
                    
                    <a name="M006221"></a><b>tag_end</b>(name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006221_source')" id="l_M006221_source">show</a>
                        
                    </p>
                    <div id="M006221_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 350</span>
350:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tag_end</span>(<span class="ruby-identifier">name</span>)
351:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">DEBUG</span>
352:         <span class="ruby-identifier">p</span> <span class="ruby-node">&quot;end tag #{name}&quot;</span>
353:         <span class="ruby-identifier">p</span> <span class="ruby-ivar">@tag_stack</span>
354:       <span class="ruby-keyword kw">end</span>
355:       <span class="ruby-identifier">text</span> = <span class="ruby-ivar">@text_stack</span>.<span class="ruby-identifier">pop</span>
356:       <span class="ruby-identifier">tags</span> = <span class="ruby-ivar">@tag_stack</span>.<span class="ruby-identifier">pop</span>
357:       <span class="ruby-identifier">pr</span> = <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">pop</span>
358:       <span class="ruby-identifier">pr</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">tags</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pr</span>.<span class="ruby-identifier">nil?</span>
359:       <span class="ruby-ivar">@ns_stack</span>.<span class="ruby-identifier">pop</span>
360:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006220">
                    
                    <a name="M006220"></a><b>tag_start</b>(name, attributes)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006220_source')" id="l_M006220_source">show</a>
                        
                    </p>
                    <div id="M006220_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 297</span>
297:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tag_start</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">attributes</span>)
298:       <span class="ruby-ivar">@text_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-value str">''</span>)
299: 
300:       <span class="ruby-identifier">ns</span> = <span class="ruby-ivar">@ns_stack</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">dup</span>
301:       <span class="ruby-identifier">attrs</span> = {}
302:       <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
303:         <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\Axmlns(?:\z|:)/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">n</span>
304:           <span class="ruby-identifier">ns</span>[<span class="ruby-identifier">$POSTMATCH</span>] = <span class="ruby-identifier">v</span>
305:         <span class="ruby-keyword kw">else</span>
306:           <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">n</span>] = <span class="ruby-identifier">v</span>
307:         <span class="ruby-keyword kw">end</span>
308:       <span class="ruby-keyword kw">end</span>
309:       <span class="ruby-ivar">@ns_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">ns</span>)
310: 
311:       <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">local</span> = <span class="ruby-identifier">split_name</span>(<span class="ruby-identifier">name</span>)
312:       <span class="ruby-ivar">@tag_stack</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">push</span>([<span class="ruby-identifier">_ns</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">prefix</span>), <span class="ruby-identifier">local</span>])
313:       <span class="ruby-ivar">@tag_stack</span>.<span class="ruby-identifier">push</span>([])
314:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@xml_child_mode</span>
315:         <span class="ruby-identifier">previous</span> = <span class="ruby-ivar">@last_xml_element</span>
316:         <span class="ruby-identifier">element_attrs</span> = <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">dup</span>
317:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">previous</span>
318:           <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ns_prefix</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
319:             <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ns_prefix</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;xml&quot;</span>
320:             <span class="ruby-identifier">key</span> = <span class="ruby-identifier">ns_prefix</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-value str">&quot;xmlns&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;xmlns:#{ns_prefix}&quot;</span>
321:             <span class="ruby-identifier">element_attrs</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">value</span>
322:           <span class="ruby-keyword kw">end</span>
323:         <span class="ruby-keyword kw">end</span>
324:         <span class="ruby-identifier">next_element</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">local</span>,
325:                                         <span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">prefix</span>,
326:                                         <span class="ruby-identifier">_ns</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">prefix</span>),
327:                                         <span class="ruby-identifier">element_attrs</span>)
328:         <span class="ruby-identifier">previous</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">next_element</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">previous</span>
329:         <span class="ruby-ivar">@last_xml_element</span> = <span class="ruby-identifier">next_element</span>
330:         <span class="ruby-identifier">pr</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span>, <span class="ruby-identifier">tags</span><span class="ruby-operator">|</span>
331:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">previous</span>
332:             <span class="ruby-ivar">@last_xml_element</span> = <span class="ruby-identifier">previous</span>
333:           <span class="ruby-keyword kw">else</span>
334:             <span class="ruby-ivar">@xml_element</span> = <span class="ruby-ivar">@last_xml_element</span>
335:             <span class="ruby-ivar">@last_xml_element</span> = <span class="ruby-keyword kw">nil</span>
336:           <span class="ruby-keyword kw">end</span>
337:         <span class="ruby-keyword kw">end</span>
338:         <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pr</span>)
339:       <span class="ruby-keyword kw">else</span>
340:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;initial_start_#{local}&quot;</span>, <span class="ruby-keyword kw">true</span>)
341:           <span class="ruby-identifier">__send__</span>(<span class="ruby-node">&quot;initial_start_#{local}&quot;</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">dup</span>)
342:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;start_#{local}&quot;</span>, <span class="ruby-keyword kw">true</span>)
343:           <span class="ruby-identifier">__send__</span>(<span class="ruby-node">&quot;start_#{local}&quot;</span>, <span class="ruby-identifier">local</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">dup</span>)
344:         <span class="ruby-keyword kw">else</span>
345:           <span class="ruby-identifier">start_else_element</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">dup</span>)
346:         <span class="ruby-keyword kw">end</span>
347:       <span class="ruby-keyword kw">end</span>
348:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006222">
                    
                    <a name="M006222"></a><b>text</b>(data)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006222_source')" id="l_M006222_source">show</a>
                        
                    </p>
                    <div id="M006222_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 362</span>
362:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">text</span>(<span class="ruby-identifier">data</span>)
363:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@xml_child_mode</span>
364:         <span class="ruby-ivar">@last_xml_element</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">data</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@last_xml_element</span>
365:       <span class="ruby-keyword kw">else</span>
366:         <span class="ruby-ivar">@text_stack</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">data</span>
367:       <span class="ruby-keyword kw">end</span>
368:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006218">
                    
                    <a name="M006218"></a><b>xmldecl</b>(version, encoding, standalone)
                    
                </div>
                
                <div class="description">
                  <p>
set instance vars for version, encoding, standalone
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006218_source')" id="l_M006218_source">show</a>
                        
                    </p>
                    <div id="M006218_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 284</span>
284:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">xmldecl</span>(<span class="ruby-identifier">version</span>, <span class="ruby-identifier">encoding</span>, <span class="ruby-identifier">standalone</span>)
285:       <span class="ruby-ivar">@version</span>, <span class="ruby-ivar">@encoding</span>, <span class="ruby-ivar">@standalone</span> = <span class="ruby-identifier">version</span>, <span class="ruby-identifier">encoding</span>, <span class="ruby-identifier">standalone</span>
286:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M006223">
                    
                    <a name="M006223"></a><b>_ns</b>(ns, prefix)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006223_source')" id="l_M006223_source">show</a>
                        
                    </p>
                    <div id="M006223_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 371</span>
371:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_ns</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">prefix</span>)
372:       <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">prefix</span>, <span class="ruby-value str">&quot;&quot;</span>)
373:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006231">
                    
                    <a name="M006231"></a><b>check_ns</b>(tag_name, prefix, ns, require_uri, ignore_unknown_element=nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006231_source')" id="l_M006231_source">show</a>
                        
                    </p>
                    <div id="M006231_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 426</span>
426:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_ns</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">require_uri</span>, <span class="ruby-identifier">ignore_unknown_element</span>=<span class="ruby-keyword kw">nil</span>)
427:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">_ns</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">prefix</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">require_uri</span>
428:         <span class="ruby-keyword kw">true</span>
429:       <span class="ruby-keyword kw">else</span>
430:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ignore_unknown_element</span>.<span class="ruby-identifier">nil?</span>
431:           <span class="ruby-identifier">ignore_unknown_element</span> = <span class="ruby-ivar">@ignore_unknown_element</span>
432:         <span class="ruby-keyword kw">end</span>
433: 
434:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ignore_unknown_element</span>
435:           <span class="ruby-keyword kw">false</span>
436:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@do_validate</span>
437:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">NSError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">require_uri</span>)
438:         <span class="ruby-keyword kw">else</span>
439:           <span class="ruby-comment cmt"># Force bind required URI with prefix</span>
440:           <span class="ruby-ivar">@ns_stack</span>.<span class="ruby-identifier">last</span>[<span class="ruby-identifier">prefix</span>] = <span class="ruby-identifier">require_uri</span>
441:           <span class="ruby-keyword kw">true</span>
442:         <span class="ruby-keyword kw">end</span>
443:       <span class="ruby-keyword kw">end</span>
444:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006239">
                    
                    <a name="M006239"></a><b>collect_attributes</b>(tag_name, prefix, attrs, ns, klass)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006239_source')" id="l_M006239_source">show</a>
                        
                    </p>
                    <div id="M006239_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 476</span>
476:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collect_attributes</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">klass</span>)
477:       <span class="ruby-identifier">attributes</span> = {}
478:       <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">get_attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a_name</span>, <span class="ruby-identifier">a_uri</span>, <span class="ruby-identifier">required</span>, <span class="ruby-identifier">element_name</span><span class="ruby-operator">|</span>
479:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">a_uri</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-operator">!</span><span class="ruby-identifier">a_uri</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:include?</span>)
480:           <span class="ruby-identifier">a_uri</span> = [<span class="ruby-identifier">a_uri</span>]
481:         <span class="ruby-keyword kw">end</span>
482:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">a_uri</span> <span class="ruby-operator">==</span> [<span class="ruby-value str">&quot;&quot;</span>]
483:           <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">uri</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">ns</span>
484:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">a_uri</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">uri</span>)
485:               <span class="ruby-identifier">val</span> = <span class="ruby-identifier">attrs</span>[<span class="ruby-node">&quot;#{prefix}:#{a_name}&quot;</span>]
486:               <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span>
487:             <span class="ruby-keyword kw">end</span>
488:           <span class="ruby-keyword kw">end</span>
489:         <span class="ruby-keyword kw">end</span>
490:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">a_uri</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;&quot;</span>)
491:           <span class="ruby-identifier">val</span> = <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">a_name</span>]
492:         <span class="ruby-keyword kw">end</span>
493: 
494:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@do_validate</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">required</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">nil?</span>
495:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">a_uri</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;&quot;</span>)
496:             <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">uri</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">ns</span>
497:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">a_uri</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">uri</span>)
498:                 <span class="ruby-identifier">a_name</span> = <span class="ruby-node">&quot;#{prefix}:#{a_name}&quot;</span>
499:               <span class="ruby-keyword kw">end</span>
500:             <span class="ruby-keyword kw">end</span>
501:           <span class="ruby-keyword kw">end</span>
502:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">MissingAttributeError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">a_name</span>)
503:         <span class="ruby-keyword kw">end</span>
504: 
505:         <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">a_name</span>] = <span class="ruby-identifier">val</span>
506:       <span class="ruby-keyword kw">end</span>
507:       <span class="ruby-identifier">attributes</span>
508:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005697">
                    
                    <a name="M005697"></a><b>initial_start_RDF</b>(tag_name, prefix, attrs, ns)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005697_source')" id="l_M005697_source">show</a>
                        
                    </p>
                    <div id="M005697_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/1.0.rb, line 438</span>
438:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initial_start_RDF</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>)
439:       <span class="ruby-identifier">check_ns</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-constant">RDF</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>, <span class="ruby-keyword kw">false</span>)
440: 
441:       <span class="ruby-ivar">@rss</span> = <span class="ruby-constant">RDF</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@version</span>, <span class="ruby-ivar">@encoding</span>, <span class="ruby-ivar">@standalone</span>)
442:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">do_validate</span> = <span class="ruby-ivar">@do_validate</span>
443:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">xml_stylesheets</span> = <span class="ruby-ivar">@xml_stylesheets</span>
444:       <span class="ruby-ivar">@last_element</span> = <span class="ruby-ivar">@rss</span>
445:       <span class="ruby-identifier">pr</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span>, <span class="ruby-identifier">tags</span><span class="ruby-operator">|</span>
446:         <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">validate_for_stream</span>(<span class="ruby-identifier">tags</span>, <span class="ruby-ivar">@ignore_unknown_element</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@do_validate</span>
447:       <span class="ruby-keyword kw">end</span>
448:       <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pr</span>)
449:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005780">
                    
                    <a name="M005780"></a><b>initial_start_entry</b>(tag_name, prefix, attrs, ns)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005780_source')" id="l_M005780_source">show</a>
                        
                    </p>
                    <div id="M005780_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/atom.rb, line 741</span>
741:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initial_start_entry</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>)
742:       <span class="ruby-identifier">check_ns</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-constant">Atom</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>, <span class="ruby-keyword kw">false</span>)
743: 
744:       <span class="ruby-ivar">@rss</span> = <span class="ruby-constant">Atom</span><span class="ruby-operator">::</span><span class="ruby-constant">Entry</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@version</span>, <span class="ruby-ivar">@encoding</span>, <span class="ruby-ivar">@standalone</span>)
745:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">do_validate</span> = <span class="ruby-ivar">@do_validate</span>
746:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">xml_stylesheets</span> = <span class="ruby-ivar">@xml_stylesheets</span>
747:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">lang</span> = <span class="ruby-identifier">attrs</span>[<span class="ruby-value str">&quot;xml:lang&quot;</span>]
748:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">base</span> = <span class="ruby-identifier">attrs</span>[<span class="ruby-value str">&quot;xml:base&quot;</span>]
749:       <span class="ruby-ivar">@last_element</span> = <span class="ruby-ivar">@rss</span>
750:       <span class="ruby-identifier">pr</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span>, <span class="ruby-identifier">tags</span><span class="ruby-operator">|</span>
751:         <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">validate_for_stream</span>(<span class="ruby-identifier">tags</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@do_validate</span>
752:       <span class="ruby-keyword kw">end</span>
753:       <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pr</span>)
754:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005779">
                    
                    <a name="M005779"></a><b>initial_start_feed</b>(tag_name, prefix, attrs, ns)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005779_source')" id="l_M005779_source">show</a>
                        
                    </p>
                    <div id="M005779_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/atom.rb, line 726</span>
726:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initial_start_feed</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>)
727:       <span class="ruby-identifier">check_ns</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-constant">Atom</span><span class="ruby-operator">::</span><span class="ruby-constant">URI</span>, <span class="ruby-keyword kw">false</span>)
728: 
729:       <span class="ruby-ivar">@rss</span> = <span class="ruby-constant">Atom</span><span class="ruby-operator">::</span><span class="ruby-constant">Feed</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@version</span>, <span class="ruby-ivar">@encoding</span>, <span class="ruby-ivar">@standalone</span>)
730:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">do_validate</span> = <span class="ruby-ivar">@do_validate</span>
731:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">xml_stylesheets</span> = <span class="ruby-ivar">@xml_stylesheets</span>
732:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">lang</span> = <span class="ruby-identifier">attrs</span>[<span class="ruby-value str">&quot;xml:lang&quot;</span>]
733:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">base</span> = <span class="ruby-identifier">attrs</span>[<span class="ruby-value str">&quot;xml:base&quot;</span>]
734:       <span class="ruby-ivar">@last_element</span> = <span class="ruby-ivar">@rss</span>
735:       <span class="ruby-identifier">pr</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span>, <span class="ruby-identifier">tags</span><span class="ruby-operator">|</span>
736:         <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">validate_for_stream</span>(<span class="ruby-identifier">tags</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@do_validate</span>
737:       <span class="ruby-keyword kw">end</span>
738:       <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pr</span>)
739:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M005659">
                    
                    <a name="M005659"></a><b>initial_start_rss</b>(tag_name, prefix, attrs, ns)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M005659_source')" id="l_M005659_source">show</a>
                        
                    </p>
                    <div id="M005659_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/0.9.rb, line 413</span>
413:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initial_start_rss</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>)
414:       <span class="ruby-identifier">check_ns</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-keyword kw">false</span>)
415: 
416:       <span class="ruby-ivar">@rss</span> = <span class="ruby-constant">Rss</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attrs</span>[<span class="ruby-value str">'version'</span>], <span class="ruby-ivar">@version</span>, <span class="ruby-ivar">@encoding</span>, <span class="ruby-ivar">@standalone</span>)
417:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">do_validate</span> = <span class="ruby-ivar">@do_validate</span>
418:       <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">xml_stylesheets</span> = <span class="ruby-ivar">@xml_stylesheets</span>
419:       <span class="ruby-ivar">@last_element</span> = <span class="ruby-ivar">@rss</span>
420:       <span class="ruby-identifier">pr</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span>, <span class="ruby-identifier">tags</span><span class="ruby-operator">|</span>
421:         <span class="ruby-ivar">@rss</span>.<span class="ruby-identifier">validate_for_stream</span>(<span class="ruby-identifier">tags</span>, <span class="ruby-ivar">@ignore_unknown_element</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@do_validate</span>
422:       <span class="ruby-keyword kw">end</span>
423:       <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pr</span>)
424:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006227">
                    
                    <a name="M006227"></a><b>known_class?</b>(target_class, class_name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006227_source')" id="l_M006227_source">show</a>
                        
                    </p>
                    <div id="M006227_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 407</span>
407:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">known_class?</span>(<span class="ruby-identifier">target_class</span>, <span class="ruby-identifier">class_name</span>)
408:         <span class="ruby-identifier">class_name</span> <span class="ruby-keyword kw">and</span>
409:           (<span class="ruby-identifier">target_class</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">class_name</span>, <span class="ruby-keyword kw">false</span>) <span class="ruby-keyword kw">or</span>
410:            <span class="ruby-identifier">target_class</span>.<span class="ruby-identifier">constants</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">class_name</span>.<span class="ruby-identifier">to_sym</span>))
411:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006228">
                    
                    <a name="M006228"></a><b>known_class?</b>(target_class, class_name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006228_source')" id="l_M006228_source">show</a>
                        
                    </p>
                    <div id="M006228_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 413</span>
413:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">known_class?</span>(<span class="ruby-identifier">target_class</span>, <span class="ruby-identifier">class_name</span>)
414:         <span class="ruby-identifier">class_name</span> <span class="ruby-keyword kw">and</span>
415:           (<span class="ruby-identifier">target_class</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">class_name</span>) <span class="ruby-keyword kw">or</span>
416:            <span class="ruby-identifier">target_class</span>.<span class="ruby-identifier">constants</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">class_name</span>))
417:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006224">
                    
                    <a name="M006224"></a><b>parse_pi_content</b>(content)
                    
                </div>
                
                <div class="description">
                  <p>
Extract the first name=&#8220;value&#8221; pair from content. Works with
single quotes according to the constant <a
href="ListenerMixin.html#CONTENT_PATTERN">CONTENT_PATTERN</a>. Return a <a
href="../Hash.html">Hash</a>.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006224_source')" id="l_M006224_source">show</a>
                        
                    </p>
                    <div id="M006224_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 379</span>
379:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_pi_content</span>(<span class="ruby-identifier">content</span>)
380:       <span class="ruby-identifier">params</span> = {}
381:       <span class="ruby-identifier">content</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">CONTENT_PATTERN</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">quote</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
382:         <span class="ruby-identifier">params</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">value</span>
383:       <span class="ruby-keyword kw">end</span>
384:       <span class="ruby-identifier">params</span>
385:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006245">
                    
                    <a name="M006245"></a><b>setup_next_element</b>(tag_name, klass, attributes)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006245_source')" id="l_M006245_source">show</a>
                        
                    </p>
                    <div id="M006245_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 510</span>
510:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_next_element</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">attributes</span>)
511:       <span class="ruby-identifier">previous</span> = <span class="ruby-ivar">@last_element</span>
512:       <span class="ruby-identifier">next_element</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@do_validate</span>, <span class="ruby-identifier">attributes</span>)
513:       <span class="ruby-identifier">previous</span>.<span class="ruby-identifier">set_next_element</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">next_element</span>)
514:       <span class="ruby-ivar">@last_element</span> = <span class="ruby-identifier">next_element</span>
515:       <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-identifier">previous</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">need_parent?</span>
516:       <span class="ruby-ivar">@xml_child_mode</span> = <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">have_xml_content?</span>
517: 
518:       <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span>, <span class="ruby-identifier">tags</span><span class="ruby-operator">|</span>
519:         <span class="ruby-identifier">p</span>(<span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">class</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">DEBUG</span>
520:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@xml_child_mode</span>
521:           <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">content</span> = <span class="ruby-ivar">@xml_element</span>.<span class="ruby-identifier">to_s</span>
522:           <span class="ruby-identifier">xml_setter</span> = <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">xml_setter</span>
523:           <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">xml_setter</span>, <span class="ruby-ivar">@xml_element</span>)
524:           <span class="ruby-ivar">@xml_element</span> = <span class="ruby-keyword kw">nil</span>
525:           <span class="ruby-ivar">@xml_child_mode</span> = <span class="ruby-keyword kw">false</span>
526:         <span class="ruby-keyword kw">else</span>
527:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">have_content?</span>
528:             <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">need_base64_encode?</span>
529:               <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">lstrip</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;m&quot;</span>).<span class="ruby-identifier">first</span>
530:             <span class="ruby-keyword kw">end</span>
531:             <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">content</span> = <span class="ruby-identifier">text</span>
532:           <span class="ruby-keyword kw">end</span>
533:         <span class="ruby-keyword kw">end</span>
534:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@do_validate</span>
535:           <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">validate_for_stream</span>(<span class="ruby-identifier">tags</span>, <span class="ruby-ivar">@ignore_unknown_element</span>)
536:         <span class="ruby-keyword kw">end</span>
537:         <span class="ruby-ivar">@last_element</span> = <span class="ruby-identifier">previous</span>
538:       <span class="ruby-keyword kw">end</span>
539:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006250">
                    
                    <a name="M006250"></a><b>setup_next_element_in_unknown_element</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006250_source')" id="l_M006250_source">show</a>
                        
                    </p>
                    <div id="M006250_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 541</span>
541:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_next_element_in_unknown_element</span>
542:       <span class="ruby-identifier">current_element</span>, <span class="ruby-ivar">@last_element</span> = <span class="ruby-ivar">@last_element</span>, <span class="ruby-keyword kw">nil</span>
543:       <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> {<span class="ruby-ivar">@last_element</span> = <span class="ruby-identifier">current_element</span>}
544:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006230">
                    
                    <a name="M006230"></a><b>split_name</b>(name)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006230_source')" id="l_M006230_source">show</a>
                        
                    </p>
                    <div id="M006230_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 421</span>
421:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">split_name</span>(<span class="ruby-identifier">name</span>)
422:       <span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">NAMESPLIT</span>
423:       [<span class="ruby-identifier">$1</span> <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">$2</span>]
424:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006225">
                    
                    <a name="M006225"></a><b>start_else_element</b>(local, prefix, attrs, ns)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006225_source')" id="l_M006225_source">show</a>
                        
                    </p>
                    <div id="M006225_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 387</span>
387:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">start_else_element</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>)
388:       <span class="ruby-identifier">class_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">class_name</span>(<span class="ruby-identifier">_ns</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">prefix</span>), <span class="ruby-identifier">local</span>)
389:       <span class="ruby-identifier">current_class</span> = <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">class</span>
390:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">known_class?</span>(<span class="ruby-identifier">current_class</span>, <span class="ruby-identifier">class_name</span>)
391:         <span class="ruby-identifier">next_class</span> = <span class="ruby-identifier">current_class</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">class_name</span>)
392:         <span class="ruby-identifier">start_have_something_element</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">next_class</span>)
393:       <span class="ruby-keyword kw">else</span>
394:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@do_validate</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@ignore_unknown_element</span>
395:           <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">setup_next_element_in_unknown_element</span>)
396:         <span class="ruby-keyword kw">else</span>
397:           <span class="ruby-identifier">parent</span> = <span class="ruby-value str">&quot;ROOT ELEMENT???&quot;</span>
398:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_class</span>.<span class="ruby-identifier">tag_name</span>
399:             <span class="ruby-identifier">parent</span> = <span class="ruby-identifier">current_class</span>.<span class="ruby-identifier">tag_name</span>
400:           <span class="ruby-keyword kw">end</span>
401:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotExpectedTagError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">local</span>, <span class="ruby-identifier">_ns</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">prefix</span>), <span class="ruby-identifier">parent</span>)
402:         <span class="ruby-keyword kw">end</span>
403:       <span class="ruby-keyword kw">end</span>
404:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006233">
                    
                    <a name="M006233"></a><b>start_get_text_element</b>(tag_name, prefix, ns, required_uri)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006233_source')" id="l_M006233_source">show</a>
                        
                    </p>
                    <div id="M006233_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 446</span>
446:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">start_get_text_element</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">required_uri</span>)
447:       <span class="ruby-identifier">pr</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span>, <span class="ruby-identifier">tags</span><span class="ruby-operator">|</span>
448:         <span class="ruby-identifier">setter</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">setter</span>(<span class="ruby-identifier">required_uri</span>, <span class="ruby-identifier">tag_name</span>)
449:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">setter</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">setter</span>)
450:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@do_validate</span>
451:             <span class="ruby-identifier">getter</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">getter</span>(<span class="ruby-identifier">required_uri</span>, <span class="ruby-identifier">tag_name</span>)
452:             <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">getter</span>)
453:               <span class="ruby-identifier">raise</span> <span class="ruby-constant">TooMuchTagError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">tag_name</span>)
454:             <span class="ruby-keyword kw">end</span>
455:           <span class="ruby-keyword kw">end</span>
456:           <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">setter</span>, <span class="ruby-identifier">text</span>.<span class="ruby-identifier">to_s</span>)
457:         <span class="ruby-keyword kw">else</span>
458:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@do_validate</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@ignore_unknown_element</span>
459:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotExpectedTagError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">_ns</span>(<span class="ruby-identifier">ns</span>, <span class="ruby-identifier">prefix</span>),
460:                                           <span class="ruby-ivar">@last_element</span>.<span class="ruby-identifier">tag_name</span>)
461:           <span class="ruby-keyword kw">end</span>
462:         <span class="ruby-keyword kw">end</span>
463:       <span class="ruby-keyword kw">end</span>
464:       <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pr</span>)
465:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M006236">
                    
                    <a name="M006236"></a><b>start_have_something_element</b>(tag_name, prefix, attrs, ns, klass)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M006236_source')" id="l_M006236_source">show</a>
                        
                    </p>
                    <div id="M006236_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/rss/parser.rb, line 467</span>
467:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">start_have_something_element</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">klass</span>)
468:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_ns</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">required_uri</span>)
469:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">collect_attributes</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">klass</span>)
470:         <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">setup_next_element</span>(<span class="ruby-identifier">tag_name</span>, <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">attributes</span>))
471:       <span class="ruby-keyword kw">else</span>
472:         <span class="ruby-ivar">@proc_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">setup_next_element_in_unknown_element</span>)
473:       <span class="ruby-keyword kw">end</span>
474:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    