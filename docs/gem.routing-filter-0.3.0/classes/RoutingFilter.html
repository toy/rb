<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RoutingFilter</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            RoutingFilter 
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/routing_filter/chain_rb.html">lib/routing_filter/chain.rb</a></li>
            
            <li><a href="../files/lib/routing_filter/filter_rb.html">lib/routing_filter/filter.rb</a></li>
            
            <li><a href="../files/lib/routing_filter/filters/extension_rb.html">lib/routing_filter/filters/extension.rb</a></li>
            
            <li><a href="../files/lib/routing_filter/filters/pagination_rb.html">lib/routing_filter/filters/pagination.rb</a></li>
            
            <li><a href="../files/lib/routing_filter/filters/locale_rb.html">lib/routing_filter/filters/locale.rb</a></li>
            
            <li><a href="../files/lib/routing_filter/version_rb.html">lib/routing_filter/version.rb</a></li>
            
            <li><a href="../files/lib/routing_filter/filters/uuid_rb.html">lib/routing_filter/filters/uuid.rb</a></li>
            
            <li><a href="../files/lib/routing_filter_rb.html">lib/routing_filter.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
The <a href="RoutingFilter/Extension.html">Extension</a> filter chops a
file extension off from the end of the recognized path. When a path is
generated the filter re-adds the extension to the path accordingly.
</p>
<pre>
  incoming url: /products.xml
  filtered url: /products
  generated url: /products.xml
</pre>
<p>
You can install the filter like this:
</p>
<pre>
  # in config/routes.rb
  Rails.application.routes.draw do
    filter :extension
  end
</pre>
<hr size="1"></hr><p>
The <a href="RoutingFilter/Locale.html">Locale</a> filter extracts segments
matching /:locale from the beginning of the recognized path and exposes the
page parameter as params[:locale]. When a path is generated the filter adds
the segments to the path accordingly if the page parameter is passed to the
url helper.
</p>
<pre>
  incoming url: /de/products
  filtered url: /products
  params:       params[:locale] = 'de'
</pre>
<p>
You can install the filter like this:
</p>
<pre>
  # in config/routes.rb
  Rails.application.routes.draw do
    filter :locale
  end
</pre>
<p>
To make your named_route helpers or url_for add the locale segments you can
use:
</p>
<pre>
  products_path(:locale =&gt; 'de')
  url_for(:products, :locale =&gt; 'de'))
</pre>
<hr size="1"></hr><p>
The <a href="RoutingFilter/Pagination.html">Pagination</a> filter extracts
segments matching /page/:page from the end of the recognized url and
exposes the page parameter as params[:page]. When a url is generated the
filter adds the segments to the url accordingly if the page parameter is
passed to the url helper.
</p>
<pre>
  incoming url: /products/page/1
  filtered url: /products
  params:       params[:page] = 1
</pre>
<p>
You can install the filter like this:
</p>
<pre>
  # in config/routes.rb
  Rails.application.routes.draw do
    filter :pagination
  end
</pre>
<p>
To make your named_route helpers or url_for add the pagination segments you
can use:
</p>
<pre>
  products_path(:page =&gt; 1)
  url_for(:products, :page =&gt; 1)
</pre>
<hr size="1"></hr><p>
The <a href="RoutingFilter/Uuid.html">Uuid</a> filter extracts an UUID
segment from the beginning of the recognized path and exposes the page
parameter as params[:page]. When a path is generated the filter adds the
segments to the path accordingly if the page parameter is passed to the url
helper.
</p>
<pre>
  incoming url: /d00fbbd1-82b6-4c1a-a57d-098d529d6854/products
  filtered url: /products
  params:       params[:uuid] = 'd00fbbd1-82b6-4c1a-a57d-098d529d6854'
</pre>
<p>
You can install the filter like this:
</p>
<pre>
  # in config/routes.rb
  Rails.application.routes.draw do
    filter :uuid
  end
</pre>
<p>
To make your named_route helpers or url_for add the uuid segment you can
use:
</p>
<pre>
  products_path(:uuid =&gt; uuid)
  url_for(:products, :uuid =&gt; uuid)
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000053">active=</a>,</li>
                
                <li><a href="#M000054">active?</a>,</li>
                
                <li><a href="#M000034">append_extension!</a>,</li>
                
                <li><a href="#M000032">append_extension?</a>,</li>
                
                <li><a href="#M000051">around_generate</a>,</li>
                
                <li><a href="#M000045">around_generate</a>,</li>
                
                <li><a href="#M000044">around_generate</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000035">blank?</a>,</li>
                
                <li><a href="#M000052">build</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000036">excluded?</a>,</li>
                
                <li><a href="#M000031">extract_extension!</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000037">mime_extension?</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">CLASS</span> <a href="RoutingFilter/Chain.html">RoutingFilter::Chain</a></li>
        
        <li><span class="type">CLASS</span> <a href="RoutingFilter/Extension.html">RoutingFilter::Extension</a></li>
        
        <li><span class="type">CLASS</span> <a href="RoutingFilter/Filter.html">RoutingFilter::Filter</a></li>
        
        <li><span class="type">CLASS</span> <a href="RoutingFilter/Locale.html">RoutingFilter::Locale</a></li>
        
        <li><span class="type">CLASS</span> <a href="RoutingFilter/Pagination.html">RoutingFilter::Pagination</a></li>
        
        <li><span class="type">CLASS</span> <a href="RoutingFilter/Uuid.html">RoutingFilter::Uuid</a></li>
        
    </ul>
    

    
    <div class="sectiontitle">Constants</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class="attr-name">VERSION</td>
            <td>=</td>
            <td class="attr-value">'0.3.0'</td>
        </tr>
        
        
    </table>
    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000053">
                    
                    <a name="M000053"></a><b>active=</b>(active)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000053_source')" id="l_M000053_source">show</a>
                        
                    </p>
                    <div id="M000053_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter.rb, line 17</span>
17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">active=</span>(<span class="ruby-identifier">active</span>)
18:       <span class="ruby-ivar">@@active</span> = <span class="ruby-identifier">active</span>
19:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000054">
                    
                    <a name="M000054"></a><b>active?</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000054_source')" id="l_M000054_source">show</a>
                        
                    </p>
                    <div id="M000054_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter.rb, line 21</span>
21:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">active?</span>
22:       <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@@active</span>) <span class="ruby-operator">?</span> <span class="ruby-ivar">@@active</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@@active</span> = <span class="ruby-keyword kw">true</span>
23:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000052">
                    
                    <a name="M000052"></a><b>build</b>(name, options)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000052_source')" id="l_M000052_source">show</a>
                        
                    </p>
                    <div id="M000052_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter.rb, line 13</span>
13:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>)
14:       <span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">camelize</span>).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)
15:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000051">
                    
                    <a name="M000051"></a><b>around_generate</b>(params, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000051_source')" id="l_M000051_source">show</a>
                        
                    </p>
                    <div id="M000051_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/uuid.rb, line 33</span>
33:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">around_generate</span>(<span class="ruby-identifier">params</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
34:       <span class="ruby-identifier">uuid</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:uuid</span>)
35:       <span class="ruby-keyword kw">yield</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span>
36:         <span class="ruby-identifier">prepend_segment!</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">uuid</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">uuid</span>
37:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000045">
                    
                    <a name="M000045"></a><b>around_generate</b>(*args, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000045_source')" id="l_M000045_source">show</a>
                        
                    </p>
                    <div id="M000045_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/locale.rb, line 53</span>
53:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">around_generate</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
54:       <span class="ruby-identifier">params</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>                              <span class="ruby-comment cmt"># this is because we might get a call like forum_topics_path(forum, topic, :locale =&gt; :en)</span>
55: 
56:       <span class="ruby-identifier">locale</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:locale</span>)                             <span class="ruby-comment cmt"># extract the passed :locale option</span>
57:       <span class="ruby-identifier">locale</span> = <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">locale</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">nil?</span>                         <span class="ruby-comment cmt"># default to I18n.locale when locale is nil (could also be false)</span>
58:       <span class="ruby-identifier">locale</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">valid_locale?</span>(<span class="ruby-identifier">locale</span>)                   <span class="ruby-comment cmt"># reset to no locale when locale is not valid</span>
59: 
60:       <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">params</span>
61: 
62:       <span class="ruby-keyword kw">yield</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span>
63:         <span class="ruby-identifier">prepend_segment!</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">locale</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prepend_locale?</span>(<span class="ruby-identifier">locale</span>)
64:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000044">
                    
                    <a name="M000044"></a><b>around_generate</b>(params, &amp;block)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000044_source')" id="l_M000044_source">show</a>
                        
                    </p>
                    <div id="M000044_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/pagination.rb, line 34</span>
34:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">around_generate</span>(<span class="ruby-identifier">params</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
35:       <span class="ruby-identifier">page</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:page</span>)
36:       <span class="ruby-keyword kw">yield</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span>
37:         <span class="ruby-identifier">append_segment!</span>(<span class="ruby-identifier">result</span>, <span class="ruby-node">&quot;page/#{page}&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">append_page?</span>(<span class="ruby-identifier">page</span>)
38:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Protected methods</div>
            
            <div class="method">
                <div class="title" id="M000034">
                    
                    <a name="M000034"></a><b>append_extension!</b>(url)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000034_source')" id="l_M000034_source">show</a>
                        
                    </p>
                    <div id="M000034_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/extension.rb, line 49</span>
49:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">append_extension!</span>(<span class="ruby-identifier">url</span>)
50:         <span class="ruby-identifier">url</span>.<span class="ruby-identifier">replace</span> <span class="ruby-identifier">url</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/(\?|$)/</span>, <span class="ruby-node">&quot;.#{extension}\\1&quot;</span>)
51:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000032">
                    
                    <a name="M000032"></a><b>append_extension?</b>(url)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000032_source')" id="l_M000032_source">show</a>
                        
                    </p>
                    <div id="M000032_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/extension.rb, line 45</span>
45:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">append_extension?</span>(<span class="ruby-identifier">url</span>)
46:         <span class="ruby-operator">!</span>(<span class="ruby-identifier">blank?</span>(<span class="ruby-identifier">url</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">excluded?</span>(<span class="ruby-identifier">url</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">mime_extension?</span>(<span class="ruby-identifier">url</span>))
47:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000035">
                    
                    <a name="M000035"></a><b>blank?</b>(url)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000035_source')" id="l_M000035_source">show</a>
                        
                    </p>
                    <div id="M000035_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/extension.rb, line 53</span>
53:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">blank?</span>(<span class="ruby-identifier">url</span>)
54:         <span class="ruby-identifier">url</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">url</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">%r(^/(\?|$))</span>)
55:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000036">
                    
                    <a name="M000036"></a><b>excluded?</b>(url)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000036_source')" id="l_M000036_source">show</a>
                        
                    </p>
                    <div id="M000036_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/extension.rb, line 57</span>
57:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">excluded?</span>(<span class="ruby-identifier">url</span>)
58:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">exclude</span>
59:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Regexp</span>
60:           <span class="ruby-identifier">url</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">exclude</span>
61:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Proc</span>
62:           <span class="ruby-identifier">exclude</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">url</span>)
63:         <span class="ruby-keyword kw">end</span>
64:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000031">
                    
                    <a name="M000031"></a><b>extract_extension!</b>(path)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000031_source')" id="l_M000031_source">show</a>
                        
                    </p>
                    <div id="M000031_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/extension.rb, line 40</span>
40:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_extension!</span>(<span class="ruby-identifier">path</span>)
41:         <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-node">/\.#{extension}$/</span>, <span class="ruby-value str">''</span>)
42:         <span class="ruby-identifier">$1</span>
43:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000037">
                    
                    <a name="M000037"></a><b>mime_extension?</b>(url)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000037_source')" id="l_M000037_source">show</a>
                        
                    </p>
                    <div id="M000037_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/routing_filter/filters/extension.rb, line 66</span>
66:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mime_extension?</span>(<span class="ruby-identifier">url</span>)
67:         <span class="ruby-identifier">url</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/\.#{Mime::EXTENSION_LOOKUP.keys.join('|')}(\?|$)/</span>
68:       <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    