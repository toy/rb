<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Arel::SelectManager</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            Arel::SelectManager 
            
                <span class="parent">&lt; 
                    
                    <a href="TreeManager.html">Arel::TreeManager</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/arel/select_manager_rb.html">lib/arel/select_manager.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000133">as</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000170">collapse</a>,</li>
                
                <li><a href="#M000127">constraints</a></li>
                
            </ul>
        </dd>
    
        <dt>D</dt>
        <dd>
            <ul>
                
                <li><a href="#M000145">distinct</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000152">except</a>,</li>
                
                <li><a href="#M000132">exists</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000139">from</a>,</li>
                
                <li><a href="#M000140">froms</a></li>
                
            </ul>
        </dd>
    
        <dt>G</dt>
        <dd>
            <ul>
                
                <li><a href="#M000138">group</a></li>
                
            </ul>
        </dd>
    
        <dt>H</dt>
        <dd>
            <ul>
                
                <li><a href="#M000142">having</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000124">initialize_copy</a>,</li>
                
                <li><a href="#M000165">insert</a>,</li>
                
                <li><a href="#M000151">intersect</a></li>
                
            </ul>
        </dd>
    
        <dt>J</dt>
        <dd>
            <ul>
                
                <li><a href="#M000141">join</a>,</li>
                
                <li><a href="#M000159">join_sources</a>,</li>
                
                <li><a href="#M000157">join_sql</a>,</li>
                
                <li><a href="#M000161">joins</a></li>
                
            </ul>
        </dd>
    
        <dt>L</dt>
        <dd>
            <ul>
                
                <li><a href="#M000125">limit</a>,</li>
                
                <li><a href="#M000156">limit=</a>,</li>
                
                <li><a href="#M000135">lock</a>,</li>
                
                <li><a href="#M000136">locked</a></li>
                
            </ul>
        </dd>
    
        <dt>M</dt>
        <dd>
            <ul>
                
                <li><a href="#M000153">minus</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000123">new</a></li>
                
            </ul>
        </dd>
    
        <dt>O</dt>
        <dd>
            <ul>
                
                <li><a href="#M000128">offset</a>,</li>
                
                <li><a href="#M000131">offset=</a>,</li>
                
                <li><a href="#M000137">on</a>,</li>
                
                <li><a href="#M000146">order</a>,</li>
                
                <li><a href="#M000158">order_clauses</a>,</li>
                
                <li><a href="#M000147">orders</a></li>
                
            </ul>
        </dd>
    
        <dt>P</dt>
        <dd>
            <ul>
                
                <li><a href="#M000143">project</a>,</li>
                
                <li><a href="#M000144">projections=</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000129">skip</a>,</li>
                
                <li><a href="#M000160">source</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000155">take</a>,</li>
                
                <li><a href="#M000126">taken</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000150">union</a></li>
                
            </ul>
        </dd>
    
        <dt>W</dt>
        <dd>
            <ul>
                
                <li><a href="#M000134">where_clauses</a>,</li>
                
                <li><a href="#M000149">where_sql</a>,</li>
                
                <li><a href="#M000148">wheres</a>,</li>
                
                <li><a href="#M000154">with</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    
    <div class="sectiontitle">Included Modules</div>
    <ul>
        
        <li>
            
            <a href="OrderPredications.html">Arel::OrderPredications</a>
            
            START:includes
        </li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">CLASS</span> <a href="SelectManager/Row.html">Arel::SelectManager::Row</a></li>
        
    </ul>
    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000133">
                    
                    <a name="M000133"></a><b>as</b>(other)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000133_source')" id="l_M000133_source">show</a>
                        
                    </p>
                    <div id="M000133_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 46</span>
46:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">as</span> <span class="ruby-identifier">other</span>
47:       <span class="ruby-identifier">create_table_alias</span> <span class="ruby-identifier">grouping</span>(<span class="ruby-ivar">@ast</span>), <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">other</span>)
48:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000127">
                    
                    <a name="M000127"></a><b>constraints</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000127_source')" id="l_M000127_source">show</a>
                        
                    </p>
                    <div id="M000127_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 22</span>
22:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">constraints</span>
23:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">wheres</span>
24:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000145">
                    
                    <a name="M000145"></a><b>distinct</b>(value = true)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000145_source')" id="l_M000145_source">show</a>
                        
                    </p>
                    <div id="M000145_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 142</span>
142:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">distinct</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">true</span>)
143:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>
144:         <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">set_quantifier</span> = <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Distinct</span>.<span class="ruby-identifier">new</span>
145:       <span class="ruby-keyword kw">else</span>
146:         <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">set_quantifier</span> = <span class="ruby-keyword kw">nil</span>
147:       <span class="ruby-keyword kw">end</span>
148:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000152">
                    
                    <a name="M000152"></a><b>except</b>(other)
                    
                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="SelectManager.html#M000153">minus</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000152_source')" id="l_M000152_source">show</a>
                        
                    </p>
                    <div id="M000152_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 189</span>
189:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">except</span> <span class="ruby-identifier">other</span>
190:       <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Except</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">ast</span>, <span class="ruby-identifier">other</span>.<span class="ruby-identifier">ast</span>
191:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000132">
                    
                    <a name="M000132"></a><b>exists</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Produces an Arel::Nodes::Exists node
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show</a>
                        
                    </p>
                    <div id="M000132_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 42</span>
42:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exists</span>
43:       <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Exists</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@ast</span>
44:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000139">
                    
                    <a name="M000139"></a><b>from</b>(table)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000139_source')" id="l_M000139_source">show</a>
                        
                    </p>
                    <div id="M000139_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 91</span>
 91:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from</span> <span class="ruby-identifier">table</span>
 92:       <span class="ruby-identifier">table</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">table</span>
 93:       <span class="ruby-comment cmt"># FIXME: this is a hack to support</span>
 94:       <span class="ruby-comment cmt"># test_with_two_tables_in_from_without_getting_double_quoted</span>
 95:       <span class="ruby-comment cmt"># from the AR tests.</span>
 96: 
 97:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">table</span>
 98:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Join</span>
 99:         <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">right</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">table</span>
100:       <span class="ruby-keyword kw">else</span>
101:         <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">left</span> = <span class="ruby-identifier">table</span>
102:       <span class="ruby-keyword kw">end</span>
103: 
104:       <span class="ruby-keyword kw">self</span>
105:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000140">
                    
                    <a name="M000140"></a><b>froms</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000140_source')" id="l_M000140_source">show</a>
                        
                    </p>
                    <div id="M000140_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 107</span>
107:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">froms</span>
108:       <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">cores</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">from</span> }.<span class="ruby-identifier">compact</span>
109:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000138">
                    
                    <a name="M000138"></a><b>group</b>(*columns)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000138_source')" id="l_M000138_source">show</a>
                        
                    </p>
                    <div id="M000138_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 80</span>
80:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">group</span> <span class="ruby-operator">*</span><span class="ruby-identifier">columns</span>
81:       <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
82:         <span class="ruby-comment cmt"># FIXME: backwards compat</span>
83:         <span class="ruby-identifier">column</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">column</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">column</span>
84:         <span class="ruby-identifier">column</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Symbol</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">column</span>
85: 
86:         <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Group</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">column</span>
87:       <span class="ruby-keyword kw">end</span>
88:       <span class="ruby-keyword kw">self</span>
89:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000142">
                    
                    <a name="M000142"></a><b>having</b>(*exprs)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000142_source')" id="l_M000142_source">show</a>
                        
                    </p>
                    <div id="M000142_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 124</span>
124:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">having</span> <span class="ruby-operator">*</span><span class="ruby-identifier">exprs</span>
125:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">having</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Having</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">collapse</span>(<span class="ruby-identifier">exprs</span>, <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">having</span>))
126:       <span class="ruby-keyword kw">self</span>
127:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000124">
                    
                    <a name="M000124"></a><b>initialize_copy</b>(other)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show</a>
                        
                    </p>
                    <div id="M000124_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 12</span>
12:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_copy</span> <span class="ruby-identifier">other</span>
13:       <span class="ruby-keyword kw">super</span>
14:       <span class="ruby-ivar">@ctx</span> = <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">cores</span>.<span class="ruby-identifier">last</span>
15:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000165">
                    
                    <a name="M000165"></a><b>insert</b>(values)
                    
                </div>
                
                <div class="description">
                  <p>
FIXME: this method should go away
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show</a>
                        
                    </p>
                    <div id="M000165_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 266</span>
266:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">insert</span> <span class="ruby-identifier">values</span>
267:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
268:         <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;insert (\#{caller.first}) is deprecated and will be removed in ARel 4.0.0. Please\nswitch to `compile_insert`\n&quot;</span>
269:       <span class="ruby-keyword kw">end</span>
270: 
271:       <span class="ruby-identifier">im</span> = <span class="ruby-identifier">compile_insert</span>(<span class="ruby-identifier">values</span>)
272:       <span class="ruby-identifier">table</span> = <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">froms</span>
273: 
274:       <span class="ruby-identifier">primary_key</span>      = <span class="ruby-identifier">table</span>.<span class="ruby-identifier">primary_key</span>
275:       <span class="ruby-identifier">primary_key_name</span> = <span class="ruby-identifier">primary_key</span>.<span class="ruby-identifier">name</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">primary_key</span>
276: 
277:       <span class="ruby-comment cmt"># FIXME: in AR tests values sometimes were Array and not Hash therefore is_a?(Hash) check is added</span>
278:       <span class="ruby-identifier">primary_key_value</span> = <span class="ruby-identifier">primary_key</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">values</span>[<span class="ruby-identifier">primary_key</span>]
279:       <span class="ruby-identifier">im</span>.<span class="ruby-identifier">into</span> <span class="ruby-identifier">table</span>
280:       <span class="ruby-comment cmt"># Oracle adapter needs primary key name to generate RETURNING ... INTO ... clause</span>
281:       <span class="ruby-comment cmt"># for tables which assign primary key value using trigger.</span>
282:       <span class="ruby-comment cmt"># RETURNING ... INTO ... clause will be added only if primary_key_value is nil</span>
283:       <span class="ruby-comment cmt"># therefore it is necessary to pass primary key value as well</span>
284:       <span class="ruby-ivar">@engine</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">insert</span> <span class="ruby-identifier">im</span>.<span class="ruby-identifier">to_sql</span>, <span class="ruby-value str">'AREL'</span>, <span class="ruby-identifier">primary_key_name</span>, <span class="ruby-identifier">primary_key_value</span>
285:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000151">
                    
                    <a name="M000151"></a><b>intersect</b>(other)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000151_source')" id="l_M000151_source">show</a>
                        
                    </p>
                    <div id="M000151_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 185</span>
185:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">intersect</span> <span class="ruby-identifier">other</span>
186:       <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Intersect</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">ast</span>, <span class="ruby-identifier">other</span>.<span class="ruby-identifier">ast</span>
187:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000141">
                    
                    <a name="M000141"></a><b>join</b>(relation, klass = Nodes::InnerJoin)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000141_source')" id="l_M000141_source">show</a>
                        
                    </p>
                    <div id="M000141_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 111</span>
111:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join</span> <span class="ruby-identifier">relation</span>, <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">InnerJoin</span>
112:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">relation</span>
113: 
114:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">relation</span>
115:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>, <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>
116:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">blank?</span>
117:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">StringJoin</span>
118:       <span class="ruby-keyword kw">end</span>
119: 
120:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">right</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">create_join</span>(<span class="ruby-identifier">relation</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">klass</span>)
121:       <span class="ruby-keyword kw">self</span>
122:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000159">
                    
                    <a name="M000159"></a><b>join_sources</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show</a>
                        
                    </p>
                    <div id="M000159_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 231</span>
231:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join_sources</span>
232:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">right</span>
233:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000157">
                    
                    <a name="M000157"></a><b>join_sql</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show</a>
                        
                    </p>
                    <div id="M000157_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 217</span>
217:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">join_sql</span>
218:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">right</span>.<span class="ruby-identifier">empty?</span>
219: 
220:       <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">visitor</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-constant">Visitors</span><span class="ruby-operator">::</span><span class="ruby-constant">JoinSql</span>).<span class="ruby-identifier">accept</span> <span class="ruby-ivar">@ctx</span>
221:       <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">sql</span>
222:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000161">
                    
                    <a name="M000161"></a><b>joins</b>(manager)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show</a>
                        
                    </p>
                    <div id="M000161_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 239</span>
239:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">joins</span> <span class="ruby-identifier">manager</span>
240:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
241:         <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;joins is deprecated and will be removed in 4.0.0&quot;</span>
242:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;please remove your call to joins from #{caller.first}&quot;</span>
243:       <span class="ruby-keyword kw">end</span>
244:       <span class="ruby-identifier">manager</span>.<span class="ruby-identifier">join_sql</span>
245:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000125">
                    
                    <a name="M000125"></a><b>limit</b>()
                    
                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="SelectManager.html#M000126">taken</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000125_source')" id="l_M000125_source">show</a>
                        
                    </p>
                    <div id="M000125_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 17</span>
17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">limit</span>
18:       <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">limit</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">limit</span>.<span class="ruby-identifier">expr</span>
19:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000156">
                    
                    <a name="M000156"></a><b>limit=</b>(limit)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="SelectManager.html#M000155">take</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000135">
                    
                    <a name="M000135"></a><b>lock</b>(locking = Arel.sql('FOR UPDATE'))
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000135_source')" id="l_M000135_source">show</a>
                        
                    </p>
                    <div id="M000135_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 58</span>
58:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lock</span> <span class="ruby-identifier">locking</span> = <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-value str">'FOR UPDATE'</span>)
59:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">locking</span>
60:       <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">true</span>
61:         <span class="ruby-identifier">locking</span> = <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-value str">'FOR UPDATE'</span>)
62:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>
63:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
64:         <span class="ruby-identifier">locking</span> = <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span> <span class="ruby-identifier">locking</span>
65:       <span class="ruby-keyword kw">end</span>
66: 
67:       <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">lock</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Lock</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">locking</span>)
68:       <span class="ruby-keyword kw">self</span>
69:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000136">
                    
                    <a name="M000136"></a><b>locked</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000136_source')" id="l_M000136_source">show</a>
                        
                    </p>
                    <div id="M000136_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 71</span>
71:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">locked</span>
72:       <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">lock</span>
73:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000153">
                    
                    <a name="M000153"></a><b>minus</b>(other)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="SelectManager.html#M000152">except</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000128">
                    
                    <a name="M000128"></a><b>offset</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000128_source')" id="l_M000128_source">show</a>
                        
                    </p>
                    <div id="M000128_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 26</span>
26:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">offset</span>
27:       <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">offset</span>.<span class="ruby-identifier">expr</span>
28:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000131">
                    
                    <a name="M000131"></a><b>offset=</b>(amount)
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="SelectManager.html#M000129">skip</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000137">
                    
                    <a name="M000137"></a><b>on</b>(*exprs)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000137_source')" id="l_M000137_source">show</a>
                        
                    </p>
                    <div id="M000137_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 75</span>
75:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on</span> <span class="ruby-operator">*</span><span class="ruby-identifier">exprs</span>
76:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">right</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">right</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">On</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">collapse</span>(<span class="ruby-identifier">exprs</span>))
77:       <span class="ruby-keyword kw">self</span>
78:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000146">
                    
                    <a name="M000146"></a><b>order</b>(*expr)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show</a>
                        
                    </p>
                    <div id="M000146_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 150</span>
150:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">order</span> <span class="ruby-operator">*</span><span class="ruby-identifier">expr</span>
151:       <span class="ruby-comment cmt"># FIXME: We SHOULD NOT be converting these to SqlLiteral automatically</span>
152:       <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">orders</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">expr</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
153:         <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Symbol</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">x</span> <span class="ruby-value">? </span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">x</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">x</span>
154:       }
155:       <span class="ruby-keyword kw">self</span>
156:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000158">
                    
                    <a name="M000158"></a><b>order_clauses</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show</a>
                        
                    </p>
                    <div id="M000158_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 224</span>
224:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">order_clauses</span>
225:       <span class="ruby-identifier">visitor</span> = <span class="ruby-constant">Visitors</span><span class="ruby-operator">::</span><span class="ruby-constant">OrderClauses</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@engine</span>.<span class="ruby-identifier">connection</span>)
226:       <span class="ruby-identifier">visitor</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-ivar">@ast</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
227:         <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">x</span>
228:       }
229:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000147">
                    
                    <a name="M000147"></a><b>orders</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000147_source')" id="l_M000147_source">show</a>
                        
                    </p>
                    <div id="M000147_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 158</span>
158:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">orders</span>
159:       <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">orders</span>
160:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000143">
                    
                    <a name="M000143"></a><b>project</b>(*projections)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000143_source')" id="l_M000143_source">show</a>
                        
                    </p>
                    <div id="M000143_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 129</span>
129:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">project</span> <span class="ruby-operator">*</span><span class="ruby-identifier">projections</span>
130:       <span class="ruby-comment cmt"># FIXME: converting these to SQLLiterals is probably not good, but</span>
131:       <span class="ruby-comment cmt"># rails tests require it.</span>
132:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">projections</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">projections</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
133:         [<span class="ruby-constant">Symbol</span>, <span class="ruby-constant">String</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">x</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">x</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">x</span>
134:       }
135:       <span class="ruby-keyword kw">self</span>
136:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000144">
                    
                    <a name="M000144"></a><b>projections=</b>(projections)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000144_source')" id="l_M000144_source">show</a>
                        
                    </p>
                    <div id="M000144_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 138</span>
138:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">projections=</span> <span class="ruby-identifier">projections</span>
139:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">projections</span> = <span class="ruby-identifier">projections</span>
140:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000129">
                    
                    <a name="M000129"></a><b>skip</b>(amount)
                    
                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="SelectManager.html#M000131">offset=</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show</a>
                        
                    </p>
                    <div id="M000129_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 30</span>
30:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip</span> <span class="ruby-identifier">amount</span>
31:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">amount</span>
32:         <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Offset</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">amount</span>)
33:       <span class="ruby-keyword kw">else</span>
34:         <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">offset</span> = <span class="ruby-keyword kw">nil</span>
35:       <span class="ruby-keyword kw">end</span>
36:       <span class="ruby-keyword kw">self</span>
37:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000160">
                    
                    <a name="M000160"></a><b>source</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show</a>
                        
                    </p>
                    <div id="M000160_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 235</span>
235:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">source</span>
236:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">source</span>
237:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000155">
                    
                    <a name="M000155"></a><b>take</b>(limit)
                    
                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="SelectManager.html#M000156">limit=</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show</a>
                        
                    </p>
                    <div id="M000155_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 205</span>
205:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">take</span> <span class="ruby-identifier">limit</span>
206:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">limit</span>
207:         <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">limit</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Limit</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">limit</span>)
208:         <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">top</span>   = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Top</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">limit</span>)
209:       <span class="ruby-keyword kw">else</span>
210:         <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">limit</span> = <span class="ruby-keyword kw">nil</span>
211:         <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">top</span>   = <span class="ruby-keyword kw">nil</span>
212:       <span class="ruby-keyword kw">end</span>
213:       <span class="ruby-keyword kw">self</span>
214:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000126">
                    
                    <a name="M000126"></a><b>taken</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Alias for <a href="SelectManager.html#M000125">limit</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title" id="M000150">
                    
                    <a name="M000150"></a><b>union</b>(operation, other = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000150_source')" id="l_M000150_source">show</a>
                        
                    </p>
                    <div id="M000150_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 174</span>
174:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">union</span> <span class="ruby-identifier">operation</span>, <span class="ruby-identifier">other</span> = <span class="ruby-keyword kw">nil</span>
175:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other</span>
176:         <span class="ruby-identifier">node_class</span> = <span class="ruby-constant">Nodes</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-node">&quot;Union#{operation.to_s.capitalize}&quot;</span>)
177:       <span class="ruby-keyword kw">else</span>
178:         <span class="ruby-identifier">other</span> = <span class="ruby-identifier">operation</span>
179:         <span class="ruby-identifier">node_class</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Union</span>
180:       <span class="ruby-keyword kw">end</span>
181: 
182:       <span class="ruby-identifier">node_class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ast</span>, <span class="ruby-identifier">other</span>.<span class="ruby-identifier">ast</span>
183:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000134">
                    
                    <a name="M000134"></a><b>where_clauses</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000134_source')" id="l_M000134_source">show</a>
                        
                    </p>
                    <div id="M000134_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 50</span>
50:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">where_clauses</span>
51:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
52:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;(#{caller.first}) where_clauses is deprecated and will be removed in arel 4.0.0 with no replacement&quot;</span>
53:       <span class="ruby-keyword kw">end</span>
54:       <span class="ruby-identifier">to_sql</span> = <span class="ruby-constant">Visitors</span><span class="ruby-operator">::</span><span class="ruby-constant">ToSql</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@engine</span>.<span class="ruby-identifier">connection</span>
55:       <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">wheres</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">to_sql</span>.<span class="ruby-identifier">accept</span> <span class="ruby-identifier">c</span> }
56:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000149">
                    
                    <a name="M000149"></a><b>where_sql</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000149_source')" id="l_M000149_source">show</a>
                        
                    </p>
                    <div id="M000149_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 167</span>
167:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">where_sql</span>
168:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">wheres</span>.<span class="ruby-identifier">empty?</span>
169: 
170:       <span class="ruby-identifier">viz</span> = <span class="ruby-constant">Visitors</span><span class="ruby-operator">::</span><span class="ruby-constant">WhereSql</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@engine</span>.<span class="ruby-identifier">connection</span>
171:       <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SqlLiteral</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">viz</span>.<span class="ruby-identifier">accept</span> <span class="ruby-ivar">@ctx</span>
172:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000148">
                    
                    <a name="M000148"></a><b>wheres</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show</a>
                        
                    </p>
                    <div id="M000148_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 162</span>
162:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wheres</span>
163:       <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{caller[0]}: SelectManager#wheres is deprecated and will be removed in ARel 4.0.0 with no replacement&quot;</span>
164:       <span class="ruby-constant">Compatibility</span><span class="ruby-operator">::</span><span class="ruby-constant">Wheres</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@engine</span>.<span class="ruby-identifier">connection</span>, <span class="ruby-ivar">@ctx</span>.<span class="ruby-identifier">wheres</span>
165:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000154">
                    
                    <a name="M000154"></a><b>with</b>(*subqueries)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show</a>
                        
                    </p>
                    <div id="M000154_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 194</span>
194:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with</span> <span class="ruby-operator">*</span><span class="ruby-identifier">subqueries</span>
195:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">subqueries</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Symbol</span>
196:         <span class="ruby-identifier">node_class</span> = <span class="ruby-constant">Nodes</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-node">&quot;With#{subqueries.shift.to_s.capitalize}&quot;</span>)
197:       <span class="ruby-keyword kw">else</span>
198:         <span class="ruby-identifier">node_class</span> = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">With</span>
199:       <span class="ruby-keyword kw">end</span>
200:       <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">with</span> = <span class="ruby-identifier">node_class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">subqueries</span>.<span class="ruby-identifier">flatten</span>)
201: 
202:       <span class="ruby-keyword kw">self</span>
203:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Private methods</div>
            
            <div class="method">
                <div class="title" id="M000170">
                    
                    <a name="M000170"></a><b>collapse</b>(exprs, existing = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show</a>
                        
                    </p>
                    <div id="M000170_source" class="dyn-source">
                        <pre>     <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 292</span>
292:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collapse</span> <span class="ruby-identifier">exprs</span>, <span class="ruby-identifier">existing</span> = <span class="ruby-keyword kw">nil</span>
293:       <span class="ruby-identifier">exprs</span> = <span class="ruby-identifier">exprs</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">existing</span>.<span class="ruby-identifier">expr</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">existing</span>
294:       <span class="ruby-identifier">exprs</span> = <span class="ruby-identifier">exprs</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">expr</span><span class="ruby-operator">|</span>
295:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">expr</span>
296:           <span class="ruby-comment cmt"># FIXME: Don't do this automatically</span>
297:           <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-identifier">expr</span>)
298:         <span class="ruby-keyword kw">else</span>
299:           <span class="ruby-identifier">expr</span>
300:         <span class="ruby-keyword kw">end</span>
301:       }
302: 
303:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">exprs</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
304:         <span class="ruby-identifier">exprs</span>.<span class="ruby-identifier">first</span>
305:       <span class="ruby-keyword kw">else</span>
306:         <span class="ruby-identifier">create_and</span> <span class="ruby-identifier">exprs</span>
307:       <span class="ruby-keyword kw">end</span>
308:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000123">
                    
                    <a name="M000123"></a><b>new</b>(engine, table = nil)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show</a>
                        
                    </p>
                    <div id="M000123_source" class="dyn-source">
                        <pre>    <span class="ruby-comment cmt"># File lib/arel/select_manager.rb, line 5</span>
 5:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-identifier">engine</span>, <span class="ruby-identifier">table</span> = <span class="ruby-keyword kw">nil</span>
 6:       <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">engine</span>)
 7:       <span class="ruby-ivar">@ast</span>   = <span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">SelectStatement</span>.<span class="ruby-identifier">new</span>
 8:       <span class="ruby-ivar">@ctx</span>    = <span class="ruby-ivar">@ast</span>.<span class="ruby-identifier">cores</span>.<span class="ruby-identifier">last</span>
 9:       <span class="ruby-identifier">from</span> <span class="ruby-identifier">table</span>
10:     <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    