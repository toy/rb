<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.md</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README.md
        </h1>
        <ul class="files">
            <li>README.md</li>
            <li>Last modified: Tue Dec 13 07:39:36 +0100 2011</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
<a href="../classes/Guard.html">Guard</a> [![Build Status](<a
href="https://secure.travis-ci.org/guard/guard.png?branch=master)](http://travis-ci.org/guard/guard">secure.travis-ci.org/guard/guard.png?branch=master)](http://travis-ci.org/guard/guard</a>)
</p>
<h5></h5>
<p>
<a href="../classes/Guard.html">Guard</a> is a command line tool to easily
handle events on file modifications.
</p>
<p>
If you have any questions please join us on our [Google group](<a
href="http://groups.google.com/group/guard-dev">groups.google.com/group/guard-dev</a>)
or on `guard` (irc.freenode.net).
</p>
<p>
Features
</p>
<hr size="6"></hr><ul>
<li>[FSEvent](<a
href="http://en.wikipedia.org/wiki/FSEvents">en.wikipedia.org/wiki/FSEvents</a>)
support on Mac OS X 10.5+ (without RubyCocoa!, [rb-fsevent gem, >=
0.3.5](<a
href="https://rubygems.org/gems/rb-fsevent">rubygems.org/gems/rb-fsevent</a>)
required).

</li>
<li>[Inotify](<a
href="http://en.wikipedia.org/wiki/Inotify">en.wikipedia.org/wiki/Inotify</a>)
support on Linux ([rb-inotify gem, >= 0.5.1](<a
href="https://rubygems.org/gems/rb-inotify">rubygems.org/gems/rb-inotify</a>)
required).

</li>
<li>[Directory Change Notification](<a
href="http://msdn.microsoft.com/en-us/library/aa365261\(VS.85\).aspx">msdn.microsoft.com/en-us/library/aa365261\(VS.85\).aspx</a>)
support on Windows ([rb-fchange, >= 0.0.2](<a
href="https://rubygems.org/gems/rb-fchange">rubygems.org/gems/rb-fchange</a>)
required).

</li>
<li>Polling on the other operating systems (help us to support more OS).

</li>
<li>Automatic &amp; Super fast (when polling is not used) file modifications
detection (even new files are detected).

</li>
<li>Visual notifications on Mac OSX ([Growl](<a
href="http://growl.info">growl.info</a>)), Linux ([Libnotify](<a
href="http://developer.gnome.org/libnotify">developer.gnome.org/libnotify</a>))
and Windows ([Notifu](<a
href="http://www.paralint.com/projects/notifu">www.paralint.com/projects/notifu</a>)).

</li>
<li>Tested against Ruby 1.8.7, 1.9.2, REE and the latest versions of JRuby
&amp; Rubinius.

</li>
</ul>
<p>
Screencast
</p>
<hr size="8"></hr><p>
Ryan Bates made a Railscast on <a href="../classes/Guard.html">Guard</a>,
you can view it here: [<a
href="http://railscasts.com/episodes/264-guard](http://railscasts.com/episodes/264-guard">railscasts.com/episodes/264-guard](http://railscasts.com/episodes/264-guard</a>)
</p>
<p>
Install
</p>
<hr size="5"></hr><p>
Add <a href="../classes/Guard.html">Guard</a> to your `Gemfile`:
</p>
<pre>
    group :development do
      gem 'guard'
    end
</pre>
<p>
and install it via Bundler:
</p>
<pre>
    $ bundle
</pre>
<p>
Generate an empty Guardfile with:
</p>
<pre>
    $ guard init
</pre>
<p>
You may optionally place a .Guardfile in your home directory to use it
across multiple projects. Also note that if a `.guard.rb` is found in your
home directory, it will be appended to the Guardfile.
</p>
<p>
Add the guards you need to your Guardfile (see the existing guards below).
</p>
<p>
Now, be sure to read the particular instructions for your operating system:
[Mac OS X](mac) | [Linux](linux) | [Windows](win)
</p>
<p>
<a name=&#8220;mac&#8221; />
</p>
<p>
### On Mac OS X
</p>
<p>
Install the rb-fsevent gem for [FSEvent](<a
href="http://en.wikipedia.org/wiki/FSEvents">en.wikipedia.org/wiki/FSEvents</a>)
support:
</p>
<pre>
    $ gem install rb-fsevent
</pre>
<p>
You have three possibilities for getting Growl support:
</p>
<p>
Use the [growl_notify gem](<a
href="https://rubygems.org/gems/growl_notify">rubygems.org/gems/growl_notify</a>):
</p>
<pre>
    $ gem install growl_notify
</pre>
<p>
The `growl_notify` gem is compatible with Growl >= 1.3 and uses AppleScript
to send Growl notifications. The gem needs a native C extension to make use
of AppleScript and does not run on JRuby and MacRuby.
</p>
<p>
Use the [ruby_gntp gem](<a
href="https://github.com/snaka/ruby_gntp">github.com/snaka/ruby_gntp</a>):
</p>
<pre>
    $ gem install ruby_gntp
</pre>
<p>
The `ruby_gntp` gem is compatible with Growl >= 1.3 and uses the Growl
Notification Transport Protocol to send Growl notifications. <a
href="../classes/Guard.html">Guard</a> supports multiple notification
channels for customizing each notification type, but it&#8217;s limited to
the local host currently.
</p>
<p>
Use the [growl gem](<a
href="https://rubygems.org/gems/growl">rubygems.org/gems/growl</a>):
</p>
<pre>
    $ gem install growl
</pre>
<p>
The `growl` gem is compatible with all versions of Growl and uses a command
line tool [growlnotify](<a
href="http://growl.info/extras.php#growlnotify">growl.info/extras.php#growlnotify</a>)
that must be separately downloaded and installed. You can also install it
with HomeBrew:
</p>
<pre>
    $ brew install growlnotify
</pre>
<p>
Finally you have to add your Growl library of choice to your Gemfile:
</p>
<pre>
    gem 'rb-fsevent'
    gem 'growl_notify' # or gem 'ruby_gntp' or gem 'growl'
</pre>
<p>
Have a look at the [<a href="../classes/Guard.html">Guard</a> Wiki](<a
href="https://github.com/guard/guard/wiki/Which-Growl-library-should-I-use">github.com/guard/guard/wiki/Which-Growl-library-should-I-use</a>)
for more information.
</p>
<p>
<a name=&#8220;linux&#8221; />
</p>
<p>
### On Linux
</p>
<p>
Install the [rb-inotify gem](<a
href="https://rubygems.org/gems/rb-inotify">rubygems.org/gems/rb-inotify</a>)
for [inotify](<a
href="http://en.wikipedia.org/wiki/Inotify">en.wikipedia.org/wiki/Inotify</a>)
support:
</p>
<pre>
    $ gem install rb-inotify
</pre>
<p>
Install the [libnotify gem](<a
href="https://rubygems.org/gems/libnotify">rubygems.org/gems/libnotify</a>)
if you want visual notification support:
</p>
<pre>
    $ gem install libnotify
</pre>
<p>
And add them to your Gemfile:
</p>
<pre>
    gem 'rb-inotify'
    gem 'libnotify'
</pre>
<p>
<a name=&#8220;win&#8221; />
</p>
<p>
### On Windows
</p>
<p>
Install the [rb-fchange gem](<a
href="https://rubygems.org/gems/rb-fchange">rubygems.org/gems/rb-fchange</a>)
for [Directory Change Notification](<a
href="http://msdn.microsoft.com/en-us/library/aa365261\(VS.85\).aspx">msdn.microsoft.com/en-us/library/aa365261\(VS.85\).aspx</a>)
support:
</p>
<pre>
    $ gem install rb-fchange
</pre>
<p>
Install the [win32console gem](<a
href="https://rubygems.org/gems/win32console">rubygems.org/gems/win32console</a>)
if you want colors in your terminal:
</p>
<pre>
    $ gem install win32console
</pre>
<p>
Install the [rb-notifu gem](<a
href="https://rubygems.org/gems/rb-notifu">rubygems.org/gems/rb-notifu</a>)
if you want visual notification support:
</p>
<pre>
    $ gem install rb-notifu
</pre>
<p>
And add them to your Gemfile:
</p>
<pre>
    gem 'rb-fchange'
    gem 'rb-notifu'
    gem 'win32console'
</pre>
<p>
Usage
</p>
<hr size="3"></hr><p>
Just launch <a href="../classes/Guard.html">Guard</a> inside your Ruby /
Rails project with:
</p>
<pre>
    $ guard [start]
</pre>
<p>
or if you use Bundler, to run the <a href="../classes/Guard.html">Guard</a>
executable specific to your bundle:
</p>
<pre>
    $ bundle exec guard [start]
</pre>
<p>
<a href="../classes/Guard.html">Guard</a> will look for a Guardfile in your
current directory. If it does not find one, it will look in your `$HOME`
directory for a .Guardfile.
</p>
<p>
Command line options
</p>
<hr size="10"></hr><p>
### `-c`/`&#8212;clear` option
</p>
<p>
Shell can be cleared after each change:
</p>
<pre>
    $ guard --clear
    $ guard -c # shortcut
</pre>
<p>
### `-n`/`&#8212;notify` option
</p>
<p>
Notifications (growl/libnotify) can be disabled:
</p>
<pre>
    $ guard --notify false
    $ guard -n f # shortcut
</pre>
<p>
Notifications can also be disabled globally by setting a `GUARD_NOTIFY`
environment variable to `false`
</p>
<p>
### `-g`/`&#8212;group` option
</p>
<p>
Only certain guards groups can be run (see the Guardfile DSL below for
creating groups):
</p>
<pre>
    $ guard --group group_name another_group_name
    $ guard -g group_name another_group_name # shortcut
</pre>
<p>
### `-d`/`&#8212;debug` option
</p>
<p>
<a href="../classes/Guard.html">Guard</a> can be run in debug mode:
</p>
<pre>
    $ guard --debug
    $ guard -d # shortcut
</pre>
<p>
### `-w`/`&#8212;watchdir` option
</p>
<p>
<a href="../classes/Guard.html">Guard</a> can watch in any directory
(instead of the current directory):
</p>
<pre>
    $ guard --watchdir ~/your/fancy/project
    $ guard -w ~/your/fancy/project # shortcut
</pre>
<p>
### `-G`/`&#8212;guardfile` option
</p>
<p>
<a href="../classes/Guard.html">Guard</a> can use a Guardfile not located
in the current directory:
</p>
<pre>
    $ guard --guardfile ~/.your_global_guardfile
    $ guard -G ~/.your_global_guardfile # shortcut
</pre>
<p>
### `-A`/`&#8212;watch-all-modifications` option
</p>
<p>
<a href="../classes/Guard.html">Guard</a> can optionally watch all file
modifications like moves or deletions with:
</p>
<pre>
    $ guard start -A
    $ guard start --watch-all-modifications
</pre>
<p>
### `-i`/`&#8212;no-interactions` option
</p>
<p>
Turn off completely any <a href="../classes/Guard.html">Guard</a> terminal
[interactions](interactions) with:
</p>
<pre>
    $ guard start -i
    $ guard start --no-interactions
</pre>
<p>
### `-I`/`&#8212;no-vendor` option
</p>
<p>
Ignore the use of vendored gems with:
</p>
<pre>
    $ guard start -I
    $ guard start --no-vendor
</pre>
<p>
An exhaustive list of options is available with:
</p>
<pre>
    $ guard help [TASK]
</pre>
<p>
<a name=&#8220;interactions&#8221; />
</p>
<p>
Interactions
</p>
<hr size="10"></hr><p>
**From version >= 0.7.0 Posix Signal handlers are no more used to interact
with <a href="../classes/Guard.html">Guard</a>. If you&#8217;re using a
version < 0.7, please refer to the [README in the v0.6 branch](<a
href="https://github.com/guard/guard/blob/v0.6/README.md">github.com/guard/guard/blob/v0.6/README.md</a>).**
</p>
<p>
When <a href="../classes/Guard.html">Guard</a> do nothing you can interact
with by entering a command + hitting return/enter:
</p>
<ul>
<li>`stop`: `stop|quit|exit|s|q|e + return` - Calls each guard&#8217;s `stop`
method, in the same order they are declared in the Guardfile, and then
quits <a href="../classes/Guard.html">Guard</a> itself.

</li>
<li>`reload`: `reload|r|z + return` - Calls each guard&#8217;s `reload` method,
in the same order they are declared in the Guardfile.

</li>
<li>`pause`: `pause|p + return` - Toggle file modification listening. Useful
when switching git branches.

</li>
<li>`run_all`: `just return (no commands)` - Calls each guard&#8217;s `run_all`
method, in the same order they are declared in the Guardfile.

</li>
</ul>
<p>
`reload` and `run_all` actions can be scoped to only run on a certain guard
or group. Examples:
</p>
<ul>
<li>`backend reload + return` - Call only each guard&#8217;s `reload` method on
backend group.

</li>
<li>`rspec + return` - Call only rspec guard&#8217;s `run_all` method.

</li>
</ul>
<p>
Available Guards
</p>
<hr size="10"></hr><p>
A list of the available guards is present [in the wiki](<a
href="https://github.com/guard/guard/wiki/List-of-available-Guards">github.com/guard/guard/wiki/List-of-available-Guards</a>).
</p>
<p>
### Add a guard to your Guardfile
</p>
<p>
Add it to your Gemfile (inside the `development` group):
</p>
<pre>
    gem '&lt;guard-name&gt;'
</pre>
<p>
You can list all guards installed on your system with:
</p>
<pre>
    $ guard list
</pre>
<p>
Insert default guard&#8217;s definition to your Guardfile by running this
command:
</p>
<pre>
    $ guard init &lt;guard-name&gt;
</pre>
<p>
You are good to go, or you can modify your guards&#8217; definition to suit
your needs.
</p>
<p>
Guardfile DSL
</p>
<hr size="10"></hr><p>
The Guardfile DSL consists of the following methods:
</p>
<ul>
<li>`guard` - Allows you to add a guard with an optional hash of options.

</li>
<li>`watch` - Allows you to define which files are supervised by a guard. An
optional block can be added to overwrite the paths sent to the
guard&#8217;s `run_on_change` method or to launch any arbitrary command.

</li>
<li>`group` - Allows you to group several guards together. Groups to be run can
be specified with the <a href="../classes/Guard.html">Guard</a> DSL option
`&#8212;group` (or `-g`). This comes in handy especially when you have a
huge Guardfile and want to focus your development on a certain part. Guards
that don&#8217;t belong to a group are considered global and are always
run.

</li>
<li>`callback` - Allows you to execute arbitrary code before or after any of
the `start`, `stop`, `reload`, `run_all` and `run_on_change` guards&#8217;
method. You can even insert more hooks inside these methods. Please
[checkout the Wiki page](<a
href="https://github.com/guard/guard/wiki/Hooks-and-callbacks">github.com/guard/guard/wiki/Hooks-and-callbacks</a>)
for more details.

</li>
<li>`ignore_paths` - Allows you to ignore top level directories altogether.
This comes is handy when you have large amounts of non-source data in you
project. By default .bundle, .git, log, tmp, and vendor are ignored.
Currently it is only possible to ignore the immediate descendants of the
watched directory.

</li>
</ul>
<p>
Example:
</p>
<pre>
    ignore_paths 'foo', 'bar'

    group 'backend' do
      guard 'bundler' do
        watch('Gemfile')
      end

      guard 'rspec', :cli =&gt; '--color --format doc' do
        # Regexp watch patterns are matched with Regexp#match
        watch(%r{^spec/.+_spec\.rb$})
        watch(%r{^lib/(.+)\.rb$})         { |m| &quot;spec/lib/#{m[1]}_spec.rb&quot; }
        watch(%r{^spec/models/.+\.rb$})   { [&quot;spec/models&quot;, &quot;spec/acceptance&quot;] }
        watch(%r{^spec/.+\.rb$})          { `say hello` }

        # String watch patterns are matched with simple '=='
        watch('spec/spec_helper.rb') { &quot;spec&quot; }
      end
    end

    group 'frontend' do
      guard 'coffeescript', :output =&gt; 'public/javascripts/compiled' do
        watch(%r{^app/coffeescripts/.+\.coffee$})
      end

      guard 'livereload' do
        watch(%r{^app/.+\.(erb|haml)$})
      end
    end
</pre>
<p>
Using a Guardfile without the `guard` binary
</p>
<hr size="10"></hr><p>
The Guardfile DSL can also be used in a programmatic fashion by calling
directly `<a
href="../classes/Guard/Dsl.html#M000007">Guard::Dsl.evaluate_guardfile</a>`.
Available options are as follow:
</p>
<ul>
<li>`:guardfile` - The path to a valid Guardfile.

</li>
<li>`:guardfile_contents` - A string representing the content of a valid
Guardfile

</li>
</ul>
<p>
Remember, without any options given, <a
href="../classes/Guard.html">Guard</a> will look for a Guardfile in your
current directory and if it does not find one, it will look for it in your
`$HOME` directory.
</p>
<p>
For instance, you could use it as follow:
</p>
<pre>
    gem 'guard'
    require 'guard'

    Guard.setup

    Guard::Dsl.evaluate_guardfile(:guardfile =&gt; '/your/custom/path/to/a/valid/Guardfile')
    # or
    Guard::Dsl.evaluate_guardfile(:guardfile_contents =&gt; &quot;
      guard 'rspec' do
        watch(%r{^spec/.+_spec\.rb$})
      end
    &quot;)

    Guard.start
</pre>
<p>
### Listing defined guards/groups for the current project
</p>
<p>
You can list the defined groups and guards for the current Guardfile from
the command line using `guard show` or `guard -T`:
</p>
<pre>
    $ guard -T

    (global):
      shell
    Group backend:
      bundler
      rspec: cli =&gt; &quot;--color --format doc&quot;
    Group frontend:
      coffeescript: output =&gt; &quot;public/javascripts/compiled&quot;
      livereload
</pre>
<p>
User config file
</p>
<hr size="10"></hr><p>
If a `.guard.rb` is found in your home directory, it will be appended to
the Guardfile. This can be used for tasks you want guard to handle but
other users probably don&#8217;t. For example, indexing your source tree
with [Ctags](<a
href="http://ctags.sourceforge.net">ctags.sourceforge.net</a>):
</p>
<pre>
    guard 'shell' do
      watch(%r{^(?:app|lib)/.+\.rb$}) { `ctags -R` }
    end
</pre>
<p>
Create a new guard
</p>
<hr size="10"></hr><p>
Creating a new guard is very easy, just create a new gem (`bundle gem` if
you use Bundler) with this basic structure:
</p>
<pre>
    .travis.yml  # bonus point!
    CHANGELOG.md # bonus point!
    Gemfile
    guard-name.gemspec
    Guardfile
    lib/
      guard/
        guard-name/
          templates/
            Guardfile # needed for `guard init &lt;guard-name&gt;`
          version.rb
        guard-name.rb
    test/ # or spec/
    README.md
</pre>
<p>
`Guard::GuardName` (in `lib/guard/guard-name.rb`) must inherit from
[Guard::Guard](<a
href="http://rubydoc.info/github/guard/guard/master/Guard/Guard">rubydoc.info/github/guard/guard/master/Guard/Guard</a>)
and should overwrite at least one of the basic `Guard::Guard` task methods.
</p>
<p>
Here is an example scaffold for `lib/guard/guard-name.rb`:
</p>
<pre>
    require 'guard'
    require 'guard/guard'

    module Guard
      class GuardName &lt; Guard

        # Initialize a Guard.
        # @param [Array&lt;Guard::Watcher&gt;] watchers the Guard file watchers
        # @param [Hash] options the custom Guard options
        def initialize(watchers = [], options = {})
          super
        end

        # Call once when Guard starts. Please override initialize method to init stuff.
        # @raise [:task_has_failed] when start has failed
        def start
        end

        # Called when `stop|quit|exit|s|q|e + enter` is pressed (when Guard quits).
        # @raise [:task_has_failed] when stop has failed
        def stop
        end

        # Called when `reload|r|z + enter` is pressed.
        # This method should be mainly used for &quot;reload&quot; (really!) actions like reloading passenger/spork/bundler/...
        # @raise [:task_has_failed] when reload has failed
        def reload
        end

        # Called when just `enter` is pressed
        # This method should be principally used for long action like running all specs/tests/...
        # @raise [:task_has_failed] when run_all has failed
        def run_all
        end

        # Called on file(s) modifications that the Guard watches.
        # @param [Array&lt;String&gt;] paths the changes files or paths
        # @raise [:task_has_failed] when run_on_change has failed
        def run_on_change(paths)
        end

        # Called on file(s) deletions that the Guard watches.
        # @param [Array&lt;String&gt;] paths the deleted files or paths
        # @raise [:task_has_failed] when run_on_change has failed
        def run_on_deletion(paths)
        end

      end
    end
</pre>
<p>
Please take a look at the [existing guards&#8217; source code](<a
href="https://github.com/guard/guard/wiki/List-of-available-Guards">github.com/guard/guard/wiki/List-of-available-Guards</a>)
for more concrete example and inspiration.
</p>
<p>
Alternatively, a new guard can be added inline to a Guardfile with this
basic structure:
</p>
<pre>
    require 'guard/guard'

    module ::Guard
      class InlineGuard &lt; ::Guard::Guard
        def run_all
        end

        def run_on_change(paths)
        end
      end
    end
</pre>
<p>
Here is a very cool example by [@avdi](<a
href="https://github.com/avdi">github.com/avdi</a>) : [<a
href="http://avdi.org/devblog/2011/06/15/a-guardfile-for-redis](http://avdi.org/devblog/2011/06/15/a-guardfile-for-redis">avdi.org/devblog/2011/06/15/a-guardfile-for-redis](http://avdi.org/devblog/2011/06/15/a-guardfile-for-redis</a>)
</p>
<p>
Development
</p>
<hr size="9"></hr><ul>
<li>Documentation hosted at [RubyDoc](<a
href="http://rubydoc.info/github/guard/guard/master/frames">rubydoc.info/github/guard/guard/master/frames</a>).

</li>
<li>Source hosted at [GitHub](<a
href="https://github.com/guard/guard">github.com/guard/guard</a>).

</li>
<li>Report issues and feature requests to [GitHub Issues](<a
href="https://github.com/guard/guard/issues">github.com/guard/guard/issues</a>).

</li>
</ul>
<p>
Pull requests are very welcome! Please try to follow these simple
&#8220;rules&#8221;, though:
</p>
<ul>
<li>Please create a topic branch for every separate change you make;

</li>
<li>Make sure your patches are well tested;

</li>
<li>Update the README (if applicable);

</li>
<li>Update the CHANGELOG (maybe not for a typo but don&#8217;t hesitate!);

</li>
<li>Please **do not change** the version number.

</li>
</ul>
<p>
For questions please join us on our [Google group](<a
href="http://groups.google.com/group/guard-dev">groups.google.com/group/guard-dev</a>)
or on `guard` (irc.freenode.net).
</p>
<p>
Author
</p>
<hr size="4"></hr><p>
[Thibaud Guillaume-Gentil](<a
href="https://github.com/thibaudgg">github.com/thibaudgg</a>)
</p>
<p>
Contributors
</p>
<hr size="10"></hr><p>
[<a
href="https://github.com/guard/guard/contributors](https://github.com/guard/guard/contributors">github.com/guard/guard/contributors](https://github.com/guard/guard/contributors</a>)
</p>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>